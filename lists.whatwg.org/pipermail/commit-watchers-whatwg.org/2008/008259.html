<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1357 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1357%20-%20/&In-Reply-To=%3C20080307120826.9BF86139DDD%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008258.html">
   <LINK REL="Next"  HREF="008260.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1357 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1357%20-%20/&In-Reply-To=%3C20080307120826.9BF86139DDD%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1357 - /">whatwg at whatwg.org
       </A><BR>
    <I>Fri Mar  7 04:08:26 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008258.html">[html5] r1356 - /
</A></li>
        <LI>Next message: <A HREF="008260.html">[html5] r1358 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8259">[ date ]</a>
              <a href="thread.html#8259">[ thread ]</a>
              <a href="subject.html#8259">[ subject ]</a>
              <a href="author.html#8259">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-03-07 04:08:25 -0800 (Fri, 07 Mar 2008)
New Revision: 1357

Modified:
   index
   source
Log:
[giow] (2) queryCommandEnabled() and friends -- this really requires heavy testing, please let me know of any mistakes

Modified: index
===================================================================
--- index	2008-03-07 09:31:01 UTC (rev 1356)
+++ index	2008-03-07 12:08:25 UTC (rev 1357)
@@ -2621,6 +2621,11 @@
   boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId);
   boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean doShowUI);
   boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean doShowUI, in DOMString value);
+  boolean &lt;a href=&quot;#querycommandenabled&quot; title=dom-document-queryCommandEnabled&gt;queryCommandEnabled&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandindeterm&quot; title=dom-document-queryCommandIndeterm&gt;queryCommandIndeterm&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandstate&quot; title=dom-document-queryCommandState&gt;queryCommandState&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandsupported&quot; title=dom-document-queryCommandSupported&gt;queryCommandSupported&lt;/a&gt;(in DOMString commandId);
+  DOMString &lt;a href=&quot;#querycommandvalue&quot; title=dom-document-queryCommandValue&gt;queryCommandValue&lt;/a&gt;(in DOMString commandId);
   &lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt; &lt;a href=&quot;#getselection0&quot; title=dom-document-getSelection&gt;getSelection&lt;/a&gt;();
 
 &lt;!-- XXX we're not done here.
@@ -35564,73 +35569,190 @@
    title=&quot;&quot;&gt;doShowUI&lt;/var&gt; parameter is always ignored, regardless of its
    value. It is included for historical reasons only.
 
-  &lt;p&gt;When any of these methods are invoked, user agents must act as described
-   in the list below.
+  &lt;p&gt;When &lt;code title=dom-document-execCommand&gt;&lt;a
+   href=&quot;#execCommand&quot;&gt;execCommand()&lt;/a&gt;&lt;/code&gt; is invoked, the user agent
+   must follow the following steps:
 
-  &lt;p&gt;For actions marked &quot;&lt;dfn id=editing2&gt;editing hosts only&lt;/dfn&gt;&quot;, if the
-   selection is not entirely within an &lt;a href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt;,
-   of if there is no selection and the caret is not inside an &lt;a
-   href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt;, then the user agent must do nothing.
+  &lt;ol&gt;
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; maps to an entry below that
+    is marked as &quot;&lt;dfn id=editing2&gt;editing hosts only&lt;/dfn&gt;&quot;, and the
+    document is not &lt;a href=&quot;#ready&quot;&gt;ready for editing host commands&lt;/a&gt;, do
+    nothing; abort these steps.
 
+   &lt;li&gt;Otherwise, execute the &quot;Action&quot; listed below for the given &lt;var
+    title=&quot;&quot;&gt;commandId&lt;/var&gt;.
+  &lt;/ol&gt;
+
+  &lt;p&gt;A document is &lt;dfn id=ready&gt;ready for editing host commands&lt;/dfn&gt; if it
+   has a selection that is entirely within an &lt;a href=&quot;#editing1&quot;&gt;editing
+   host&lt;/a&gt;, or if it has no selection but its caret is inside an &lt;a
+   href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;dfn id=querycommandenabled
+   title=dom-document-queryCommandEnabled&gt;&lt;code&gt;queryCommandEnabled(&lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must return
+   true if the condition listed below under &quot;Enabled When&quot; for the given &lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt; is true, and false otherwise.
+
+  &lt;p&gt;The &lt;dfn id=querycommandindeterm
+   title=dom-document-queryCommandIndeterm&gt;&lt;code&gt;queryCommandIndeterm(&lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must return
+   true if the condition listed below under &quot;Indeterminate When&quot; for the
+   given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is true, and false otherwise.
+
+  &lt;p&gt;The &lt;dfn id=querycommandstate
+   title=dom-document-queryCommandState&gt;&lt;code&gt;queryCommandState(&lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must return
+   the value expressed below under &quot;State&quot; for the given &lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;.
+
+  &lt;p&gt;The &lt;dfn id=querycommandsupported
+   title=dom-document-queryCommandSupported&gt;&lt;code&gt;queryCommandSupported(&lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must return
+   true if the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is in the list below, and
+   false otherwise.
+
+  &lt;p&gt;The &lt;dfn id=querycommandvalue
+   title=dom-document-queryCommandValue&gt;&lt;code&gt;queryCommandValue(&lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must return
+   the value expressed below under &quot;Value&quot; for the given &lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;.
+
+  &lt;p&gt;The commands are:
+
   &lt;dl&gt;
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=undo1
     title=command-undo&gt;&lt;code&gt;undo&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;The user agent must &lt;a href=&quot;#undo-moving0&quot; title=do-undo&gt;move back
-    one step&lt;/a&gt; in its &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-    history&lt;/a&gt;, restoring the associated state. If there is no further undo
-    information the user agent must do nothing. See the &lt;a
-    href=&quot;#undo-history&quot;&gt;undo history&lt;/a&gt;.
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;a href=&quot;#undo-moving0&quot;
+    title=do-undo&gt;move back one step&lt;/a&gt; in its &lt;a
+    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, restoring the
+    associated state. If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the
+    start of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;,
+    the user agent must do nothing. See the &lt;a href=&quot;#undo-history&quot;&gt;undo
+    history&lt;/a&gt;.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current3&quot;&gt;undo
+    position&lt;/a&gt; is not at the start of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo
+    transaction history&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=redo0
     title=command-redo&gt;&lt;code&gt;redo&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;The user agent must &lt;a href=&quot;#redo-moving0&quot; title=do-redo&gt;move forward
-    one step&lt;/a&gt; in its &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-    history&lt;/a&gt;, restoring the associated state. If there is no further undo
-    (well, &quot;redo&quot;) information the user agent must do nothing. See the &lt;a
-    href=&quot;#undo-history&quot;&gt;undo history&lt;/a&gt;.
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;a href=&quot;#redo-moving0&quot;
+    title=do-redo&gt;move forward one step&lt;/a&gt; in its &lt;a
+    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, restoring the
+    associated state. If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the
+    end of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, the
+    user agent must do nothing. See the &lt;a href=&quot;#undo-history&quot;&gt;undo
+    history&lt;/a&gt;.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current3&quot;&gt;undo
+    position&lt;/a&gt; is not at the end of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo
+    transaction history&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=selectall0
     title=command-selectAll&gt;&lt;code&gt;selectAll&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;The user agent must change the selection so that all the content in
-    the currently focused &lt;a href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt; is selected.
-    If no &lt;a href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt; is focused, then the content
-    of the entire document must be selected.
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must change the selection so
+    that all the content in the currently focused &lt;a href=&quot;#editing1&quot;&gt;editing
+    host&lt;/a&gt; is selected. If no &lt;a href=&quot;#editing1&quot;&gt;editing host&lt;/a&gt; is
+    focused, then the content of the entire document must be selected.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Always.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=unselect
     title=command-unselect&gt;&lt;code&gt;unselect&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;The user agent must change the selection so that nothing is selected.
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must change the selection so
+    that nothing is selected.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Always.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=superscript
     title=command-superscript&gt;&lt;code&gt;superscript&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had requested that the selection &lt;a
-    href=&quot;#contenteditable-wrapSemantic&quot;&gt;be wrapped in the semantics&lt;/a&gt; of
-    the &lt;code&gt;&lt;a href=&quot;#sup&quot;&gt;sup&lt;/a&gt;&lt;/code&gt; element (or unwrapped, or, if
-    there is no selection, have that semantic inserted or removed &mdash; the
-    exact behaviour is UA-defined).
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had
+    requested that the selection &lt;a href=&quot;#contenteditable-wrapSemantic&quot;&gt;be
+    wrapped in the semantics&lt;/a&gt; of the &lt;code&gt;&lt;a href=&quot;#sup&quot;&gt;sup&lt;/a&gt;&lt;/code&gt;
+    element (or unwrapped, or, if there is no selection, have that semantic
+    inserted or removed &mdash; the exact behaviour is UA-defined).
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; True if the selection, or the caret, if there
+    is no selection, is, or is contained within, a &lt;code&gt;&lt;a
+    href=&quot;#sup&quot;&gt;sup&lt;/a&gt;&lt;/code&gt; element. False otherwise.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; The string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot; if the
+    expression given for the &quot;State&quot; above is true, the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot; otherwise.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=subscript
     title=command-subscript&gt;&lt;code&gt;subscript&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had requested that the selection &lt;a
-    href=&quot;#contenteditable-wrapSemantic&quot;&gt;be wrapped in the semantics&lt;/a&gt; of
-    the &lt;em title=&quot;&quot;&gt;&lt;code&gt;&lt;a href=&quot;#sub&quot;&gt;sub&lt;/a&gt;&lt;/code&gt;&lt;/em&gt; element (or,
-    again, unwrapped, or have that semantic inserted or removed, as defined
-    by the UA).
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had
+    requested that the selection &lt;a href=&quot;#contenteditable-wrapSemantic&quot;&gt;be
+    wrapped in the semantics&lt;/a&gt; of the &lt;em title=&quot;&quot;&gt;&lt;code&gt;&lt;a
+    href=&quot;#sub&quot;&gt;sub&lt;/a&gt;&lt;/code&gt;&lt;/em&gt; element (or, again, unwrapped, or have
+    that semantic inserted or removed, as defined by the UA).
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; True if the selection, or the caret, if there
+    is no selection, is, or is contained within, a &lt;code&gt;&lt;a
+    href=&quot;#sub&quot;&gt;sub&lt;/a&gt;&lt;/code&gt; element. False otherwise.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; The string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot; if the
+    expression given for the &quot;State&quot; above is true, the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot; otherwise.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=formatblock
     title=command-formatBlock&gt;&lt;code&gt;formatBlock&lt;/code&gt;&lt;/dfn&gt;
 
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
+
    &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; This command
-     changes the semantics of the blocks containing the selection.&lt;/p&gt;
+    &lt;p&gt;&lt;strong&gt;Action:&lt;/strong&gt; This command changes the semantics of the
+     blocks containing the selection.&lt;/p&gt;
 
     &lt;p&gt;If there is no selection, then, where in the description below refers
      to the selection, the user agent must act as if the selection was an
@@ -35674,57 +35796,141 @@
      title=&quot;&quot;&gt;Element.renameNode()&lt;/code&gt; method had been used) according to
      the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;, by stripping the leading
      &lt;code&gt;&lt;&lt;/code&gt; character and the trailing &lt;code&gt;&gt;&lt;/code&gt; character
-     and using the rest as the new tag name, using the HTML namespace.
+     and using the rest as the new tag name, using the HTML namespace.&lt;/p&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=delete
     title=command-delete&gt;&lt;code&gt;delete&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a
-    backspace operation&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had
+    performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a backspace operation&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=forwarddelete
     title=command-forwardDelete&gt;&lt;code&gt;forwardDelete&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a
-    forward delete operation&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had
+    performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a forward delete
+    operation&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=insertlinebreak
     title=command-insertLineBreak&gt;&lt;code&gt;insertLineBreak&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had &lt;a href=&quot;#contenteditable-br&quot;&gt;requested a
-    line separator&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had &lt;a
+    href=&quot;#contenteditable-br&quot;&gt;requested a line separator&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=insertparagraph
     title=command-insertParagraph&gt;&lt;code&gt;insertParagraph&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had performed a &lt;a
-    href=&quot;#contenteditable-breakBlock&quot;&gt;break block&lt;/a&gt; editing action.
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
 
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had
+    performed a &lt;a href=&quot;#contenteditable-breakBlock&quot;&gt;break block&lt;/a&gt; editing
+    action.
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn id=inserttext
     title=command-insertText&gt;&lt;code&gt;insertText&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;dd&gt;&lt;em&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;&lt;/em&gt; The user agent
-    must act as if the user had &lt;a
+   &lt;dd&gt;&lt;a href=&quot;#editing2&quot;&gt;Editing hosts only.&lt;/a&gt;
+
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user had &lt;a
     href=&quot;#contenteditable-insertText&quot;&gt;inserted text&lt;/a&gt; corresponding to the
     &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; parameter.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;a href=&quot;#ready&quot;&gt;ready
+    for editing host commands&lt;/a&gt;.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;code&gt;&lt;var
     title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;customCommandID&lt;/var&gt;&lt;/code&gt;
 
-   &lt;dd&gt;User agents may implement vendor-specific extensions to this API.
-    Vendor-specific extensions to the list of commands should use the syntax
-    &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; User agents may implement vendor-specific
+    extensions to this API. Vendor-specific extensions to the list of
+    commands should use the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var
     title=&quot;&quot;&gt;customCommandID&lt;/var&gt;&lt;/code&gt; so as to prevent clashes between
     extensions from different vendors and future additions to this
     specification.
 
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; UA-defined.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; UA-defined.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; UA-defined.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; UA-defined.
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is something else
 
-   &lt;dd&gt;User agents must do nothing.
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; User agents must do nothing.
+
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.
+
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.
+
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code
+    title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.
   &lt;/dl&gt;
 
   &lt;h2 id=comms&gt;&lt;span class=secno&gt;6. &lt;/span&gt;Communication&lt;/h2&gt;

Modified: source
===================================================================
--- source	2008-03-07 09:31:01 UTC (rev 1356)
+++ source	2008-03-07 12:08:25 UTC (rev 1357)
@@ -975,6 +975,11 @@
   boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId);
   boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean doShowUI);
   boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean doShowUI, in DOMString value);
+  boolean &lt;span title=&quot;dom-document-queryCommandEnabled&quot;&gt;queryCommandEnabled&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandIndeterm&quot;&gt;queryCommandIndeterm&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandState&quot;&gt;queryCommandState&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandSupported&quot;&gt;queryCommandSupported&lt;/span&gt;(in DOMString commandId);
+  DOMString &lt;span title=&quot;dom-document-queryCommandValue&quot;&gt;queryCommandValue&lt;/span&gt;(in DOMString commandId);
   &lt;span&gt;Selection&lt;/span&gt; &lt;span title=&quot;dom-document-getSelection&quot;&gt;getSelection&lt;/span&gt;();
 
 &lt;!-- XXX we're not done here.
@@ -33008,141 +33013,281 @@
   title=&quot;&quot;&gt;doShowUI&lt;/var&gt; parameter is always ignored, regardless of
   its value. It is included for historical reasons only.&lt;/p&gt;
 
-  &lt;p&gt;When any of these methods are invoked, user agents must act as
-  described in the list below.&lt;/p&gt;
+  &lt;p&gt;When &lt;code title=&quot;dom-document-execCommand&quot;&gt;execCommand()&lt;/code&gt;
+  is invoked, the user agent must follow the following steps:&lt;/p&gt;
 
-  &lt;p&gt;For actions marked &quot;&lt;dfn&gt;editing hosts only&lt;/dfn&gt;&quot;, if the
-  selection is not entirely within an &lt;span&gt;editing host&lt;/span&gt;, of if
-  there is no selection and the caret is not inside an &lt;span&gt;editing
-  host&lt;/span&gt;, then the user agent must do nothing.&lt;/p&gt;
+  &lt;ol&gt;
 
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; maps to an entry
+   below that is marked as &quot;&lt;dfn&gt;editing hosts only&lt;/dfn&gt;&quot;, and the
+   document is not &lt;span&gt;ready for editing host commands&lt;/span&gt;, do
+   nothing; abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, execute the &quot;Action&quot; listed below for the given &lt;var
+   title=&quot;&quot;&gt;commandId&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;A document is &lt;dfn&gt;ready for editing host commands&lt;/dfn&gt; if it
+  has a selection that is entirely within an &lt;span&gt;editing
+  host&lt;/span&gt;, or if it has no selection but its caret is inside an
+  &lt;span&gt;editing host&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-queryCommandEnabled&quot;&gt;&lt;code&gt;queryCommandEnabled(&lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  return true if the condition listed below under &quot;Enabled When&quot; for
+  the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is true, and false
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-queryCommandIndeterm&quot;&gt;&lt;code&gt;queryCommandIndeterm(&lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  return true if the condition listed below under &quot;Indeterminate When&quot;
+  for the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is true, and false
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-queryCommandState&quot;&gt;&lt;code&gt;queryCommandState(&lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  return the value expressed below under &quot;State&quot; for the given &lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-queryCommandSupported&quot;&gt;&lt;code&gt;queryCommandSupported(&lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  return true if the given &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is in the
+  list below, and false otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-queryCommandValue&quot;&gt;&lt;code&gt;queryCommandValue(&lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
+  return the value expressed below under &quot;Value&quot; for the given &lt;var
+  title=&quot;&quot;&gt;commandId&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The commands are:&lt;/p&gt;
+
   &lt;dl&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-undo&quot;&gt;&lt;code&gt;undo&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;The user agent must &lt;span title=&quot;do-undo&quot;&gt;move back one
-   step&lt;/span&gt; in its &lt;span&gt;undo transaction history&lt;/span&gt;, restoring
-   the associated state. If there is no further undo information the
-   user agent must do nothing. See the &lt;span&gt;undo history&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;span
+   title=&quot;do-undo&quot;&gt;move back one step&lt;/span&gt; in its &lt;span&gt;undo
+   transaction history&lt;/span&gt;, restoring the associated state. If the
+   &lt;span&gt;undo position&lt;/span&gt; is at the start of the &lt;span&gt;undo
+   transaction history&lt;/span&gt;, the user agent must do nothing. See the
+   &lt;span&gt;undo history&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;span&gt;undo position&lt;/span&gt;
+   is not at the start of the &lt;span&gt;undo transaction
+   history&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-redo&quot;&gt;&lt;code&gt;redo&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;The user agent must &lt;span title=&quot;do-redo&quot;&gt;move forward one
-   step&lt;/span&gt; in its &lt;span&gt;undo transaction history&lt;/span&gt;, restoring
-   the associated state. If there is no further undo (well, &quot;redo&quot;)
-   information the user agent must do nothing. See the &lt;span&gt;undo
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;span
+   title=&quot;do-redo&quot;&gt;move forward one step&lt;/span&gt; in its &lt;span&gt;undo
+   transaction history&lt;/span&gt;, restoring the associated state. If the
+   &lt;span&gt;undo position&lt;/span&gt; is at the end of the &lt;span&gt;undo
+   transaction history&lt;/span&gt;, the user agent must do nothing. See the
+   &lt;span&gt;undo history&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;span&gt;undo position&lt;/span&gt;
+   is not at the end of the &lt;span&gt;undo transaction
    history&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-selectAll&quot;&gt;&lt;code&gt;selectAll&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;The user agent must change the selection so that all the
-   content in the currently focused &lt;span&gt;editing host&lt;/span&gt; is
-   selected. If no &lt;span&gt;editing host&lt;/span&gt; is focused, then the
-   content of the entire document must be selected.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must change the
+   selection so that all the content in the currently focused
+   &lt;span&gt;editing host&lt;/span&gt; is selected. If no &lt;span&gt;editing
+   host&lt;/span&gt; is focused, then the content of the entire document
+   must be selected.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Always.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-unselect&quot;&gt;&lt;code&gt;unselect&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent must change the selection so that nothing is
-   selected.&lt;/p&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must change the
+   selection so that nothing is selected.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Always.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-superscript&quot;&gt;&lt;code&gt;superscript&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had requested that the selection &lt;a
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had requested that the selection &lt;a
    href=&quot;#contenteditable-wrapSemantic&quot;&gt;be wrapped in the
    semantics&lt;/a&gt; of the &lt;code&gt;sup&lt;/code&gt; element (or unwrapped, or, if
    there is no selection, have that semantic inserted or removed
    &mdash; the exact behaviour is UA-defined).&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; True if the selection, or the caret, if
+   there is no selection, is, or is contained within, a
+   &lt;code&gt;sup&lt;/code&gt; element. False otherwise.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; The string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;
+   if the expression given for the &quot;State&quot; above is true, the string
+   &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot; otherwise.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-subscript&quot;&gt;&lt;code&gt;subscript&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had requested that the selection &lt;a
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had requested that the selection &lt;a
    href=&quot;#contenteditable-wrapSemantic&quot;&gt;be wrapped in the
-   semantics&lt;/a&gt; of the &lt;em title=&quot;&quot;&gt;&lt;code&gt;sub&lt;/code&gt;&lt;/em&gt; element (or, again,
-   unwrapped, or have that semantic inserted or removed, as defined by
-   the UA).&lt;/dd&gt;
+   semantics&lt;/a&gt; of the &lt;em title=&quot;&quot;&gt;&lt;code&gt;sub&lt;/code&gt;&lt;/em&gt; element
+   (or, again, unwrapped, or have that semantic inserted or removed,
+   as defined by the UA).&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; True if the selection, or the caret, if
+   there is no selection, is, or is contained within, a
+   &lt;code&gt;sub&lt;/code&gt; element. False otherwise.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; The string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;
+   if the expression given for the &quot;State&quot; above is true, the string
+   &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot; otherwise.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-formatBlock&quot;&gt;&lt;code&gt;formatBlock&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; This command changes the
-   semantics of the blocks containing the selection.&lt;/p&gt;
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;
 
-   &lt;p&gt;If there is no selection, then, where in the description below
-   refers to the selection, the user agent must act as if the
-   selection was an empty range at the caret position.&lt;/p&gt;
+    &lt;p&gt;&lt;strong&gt;Action:&lt;/strong&gt; This command changes the semantics of
+    the blocks containing the selection.&lt;/p&gt;
 
-   &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; parameter is not specified or
-   has a value other than one of the following literal strings:&lt;/p&gt;
-   &lt;ul class=&quot;brief&quot;&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;address&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;aside&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h1&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h2&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h3&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h4&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h5&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h6&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;nav&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;p&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;pre&gt;&lt;/code&gt;&lt;/li&gt;
-    &lt;!-- XXX this list is incomplete --&gt;
-   &lt;/ul&gt;
-   &lt;p&gt;...then the user agent must do nothing.&lt;/p&gt;
+    &lt;p&gt;If there is no selection, then, where in the description below
+    refers to the selection, the user agent must act as if the
+    selection was an empty range at the caret position.&lt;/p&gt;
 
-   &lt;p&gt;Otherwise, the user agent must, for every position in the
-   selection, take the furthest &lt;span&gt;flow content&lt;/span&gt; ancestor
-   element of that position that contains only &lt;span&gt;phrasing
-   content&lt;/span&gt;, and, if that element is a descendant of the editing
-   host, rename it (as if the &lt;code
-   title=&quot;&quot;&gt;Element.renameNode()&lt;/code&gt; method had been used)
-   according to the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;, by stripping the
-   leading &lt;code&gt;&lt;&lt;/code&gt; character and the trailing
-   &lt;code&gt;&gt;&lt;/code&gt; character and using the rest as the new tag name,
-   using the HTML namespace.&lt;/p&gt;&lt;/dd&gt;
+    &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; parameter is not specified or
+    has a value other than one of the following literal strings:&lt;/p&gt;
 
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;address&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;aside&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h1&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h2&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h3&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h4&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h5&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;h6&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;nav&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;p&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;code title=&quot;&quot;&gt;&lt;pre&gt;&lt;/code&gt;&lt;/li&gt;
+     &lt;!-- XXX this list is incomplete --&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;...then the user agent must do nothing.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, the user agent must, for every position in the
+    selection, take the furthest &lt;span&gt;flow content&lt;/span&gt; ancestor
+    element of that position that contains only &lt;span&gt;phrasing
+    content&lt;/span&gt;, and, if that element is a descendant of the
+    editing host, rename it (as if the &lt;code
+    title=&quot;&quot;&gt;Element.renameNode()&lt;/code&gt; method had been used)
+    according to the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;, by stripping the
+    leading &lt;code&gt;&lt;&lt;/code&gt; character and the trailing
+    &lt;code&gt;&gt;&lt;/code&gt; character and using the rest as the new tag
+    name, using the HTML namespace.&lt;/p&gt;
+
+   &lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
+
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-delete&quot;&gt;&lt;code&gt;delete&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a backspace
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a backspace
    operation&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-forwardDelete&quot;&gt;&lt;code&gt;forwardDelete&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a forward
-   delete operation&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had performed &lt;a href=&quot;#contenteditable-delete&quot;&gt;a forward delete
+   operation&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-insertLineBreak&quot;&gt;&lt;code&gt;insertLineBreak&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had &lt;a href=&quot;#contenteditable-br&quot;&gt;requested a line
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had &lt;a href=&quot;#contenteditable-br&quot;&gt;requested a line
    separator&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-insertParagraph&quot;&gt;&lt;code&gt;insertParagraph&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had performed a &lt;a href=&quot;#contenteditable-breakBlock&quot;&gt;break
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had performed a &lt;a href=&quot;#contenteditable-breakBlock&quot;&gt;break
    block&lt;/a&gt; editing action.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;dfn title=&quot;command-insertText&quot;&gt;&lt;code&gt;insertText&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;em&gt;Editing hosts only.&lt;/em&gt; The user agent must act as if the
-   user had &lt;a href=&quot;#contenteditable-insertText&quot;&gt;inserted text&lt;/a&gt;
+   &lt;dd&gt;&lt;span&gt;Editing hosts only.&lt;/span&gt;&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must act as if the user
+   had &lt;a href=&quot;#contenteditable-insertText&quot;&gt;inserted text&lt;/a&gt;
    corresponding to the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; parameter.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The document is &lt;span&gt;ready for
+   editing host commands&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;customCommandID&lt;/var&gt;&lt;/code&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;User agents may implement vendor-specific extensions to this
-   API. Vendor-specific extensions to the list of commands should use
-   the syntax &lt;code&gt;&lt;var title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var
-   title=&quot;&quot;&gt;customCommandID&lt;/var&gt;&lt;/code&gt; so as to prevent clashes
-   between extensions from different vendors and future additions to
-   this specification.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; User agents may implement
+   vendor-specific extensions to this API. Vendor-specific extensions
+   to the list of commands should use the syntax &lt;code&gt;&lt;var
+   title=&quot;&quot;&gt;vendorID&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;customCommandID&lt;/var&gt;&lt;/code&gt;
+   so as to prevent clashes between extensions from different vendors
+   and future additions to this specification.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; UA-defined.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; UA-defined.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; UA-defined.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; UA-defined.&lt;/dd&gt;
 
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt; is something else&lt;/dt&gt;
 
-   &lt;dd&gt;User agents must do nothing.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; User agents must do nothing.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Indeterminate When:&lt;/strong&gt; Never.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;State:&lt;/strong&gt; Always false.&lt;/dd&gt;
+   &lt;dd&gt;&lt;strong&gt;Value:&lt;/strong&gt; Always the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;.&lt;/dd&gt;
 
   &lt;/dl&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008258.html">[html5] r1356 - /
</A></li>
	<LI>Next message: <A HREF="008260.html">[html5] r1358 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8259">[ date ]</a>
              <a href="thread.html#8259">[ thread ]</a>
              <a href="subject.html#8259">[ subject ]</a>
              <a href="author.html#8259">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
