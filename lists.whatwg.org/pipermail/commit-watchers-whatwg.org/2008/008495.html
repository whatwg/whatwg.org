<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1597 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1597%20-%20/&In-Reply-To=%3C20080513011716.CF30213A17A%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008494.html">
   <LINK REL="Next"  HREF="008496.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1597 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1597%20-%20/&In-Reply-To=%3C20080513011716.CF30213A17A%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1597 - /">whatwg at whatwg.org
       </A><BR>
    <I>Mon May 12 18:17:16 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008494.html">[html5] r1595 - /
</A></li>
        <LI>Next message: <A HREF="008496.html">[html5] r1598 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8495">[ date ]</a>
              <a href="thread.html#8495">[ thread ]</a>
              <a href="subject.html#8495">[ subject ]</a>
              <a href="author.html#8495">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-05-12 18:17:16 -0700 (Mon, 12 May 2008)
New Revision: 1597

Modified:
   index
   source
Log:
[e] (0) Move the history traversal algorithm out of the History object section

Modified: index
===================================================================
--- index	2008-05-13 01:09:45 UTC (rev 1596)
+++ index	2008-05-13 01:17:16 UTC (rev 1597)
@@ -1170,29 +1170,35 @@
         &lt;/span&gt;Implementation notes for session history&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Navigating across
-      documents&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#browsing0&quot;&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Browsing the
+      Web&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;Navigating
+        across documents&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;Page load
         processing model for HTML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;Page load
         processing model for XML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;Page load
         processing model for text files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;Page load
         processing model for images&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;Page load
         processing model for content that uses plugins&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-ua-inline&quot;&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-ua-inline&quot;&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;Page load
         processing model for inline content that doesn't have a DOM&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;4.9.7
+       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;4.9.8
         &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#history0&quot;&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;History
+        traversal&lt;/a&gt;
       &lt;/ul&gt;
 
      &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;4.10
@@ -2715,7 +2721,7 @@
   &lt;p&gt;The &lt;dfn id=referrer
    title=dom-document-referrer&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute must
    return either the URI of the page which &lt;a href=&quot;#navigate&quot;
-   title=navigate&gt;navigated&lt;/a&gt; the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+   title=navigate&gt;navigated&lt;/a&gt; the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
    to the current document (if any), or the empty string if there is no such
    originating page, or if the UA has been configured not to report referrers
    in this case, or if the navigation was initiated for a &lt;a
@@ -3941,10 +3947,10 @@
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
 
     &lt;ol&gt;
-     &lt;li&gt;Remove all the entries in the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+     &lt;li&gt;Remove all the entries in the &lt;a href=&quot;#browsing1&quot;&gt;browsing
       context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session history&lt;/a&gt; after the &lt;a
       href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in its &lt;code&gt;Document&lt;/code&gt;'s
-      &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object
+      &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object
 
      &lt;li&gt;Remove any earlier entries that share the same &lt;code&gt;Document&lt;/code&gt;
 
@@ -7162,7 +7168,7 @@
 
   &lt;p&gt;The &lt;dfn id=hasfocus
    title=dom-document-hasFocus&gt;&lt;code&gt;hasFocus&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return true if the document, one of its nested &lt;a href=&quot;#browsing0&quot;
+   return true if the document, one of its nested &lt;a href=&quot;#browsing1&quot;
    title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;, or any element in the
    document or its browsing contexts currently has the system focus.
 
@@ -7535,7 +7541,7 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt; element allows authors to
    specify the document's base URI for the purposes of resolving relative
-   URIs, and the name of the default &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   URIs, and the name of the default &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; for the purposes of &lt;a href=&quot;#following0&quot;&gt;following
    hyperlinks&lt;/a&gt;.
 
@@ -8410,7 +8416,7 @@
 
        &lt;li&gt;
         &lt;p&gt;Provide the user with an interface that, when selected,
-         &lt;span&gt;navigates&lt;/span&gt; a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+         &lt;span&gt;navigates&lt;/span&gt; a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
          to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
 
        &lt;li&gt;
@@ -14138,11 +14144,11 @@
   &lt;/dl&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element introduces a new
-   nested &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;.
+   nested &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.
 
   &lt;p&gt;The &lt;dfn id=src1 title=attr-iframe-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute,
    if present, must be a URI (or IRI) to a page that the nested &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is to contain. When the browsing
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is to contain. When the browsing
    context is created, if the attribute is present, the user agent must &lt;a
    href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; this browsing context to the given URI, with
    &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;. If the user &lt;a
@@ -14153,7 +14159,7 @@
    href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute will not change.
 
   &lt;p&gt;Whenever the &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute is set, the nested &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+   attribute is set, the nested &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
    must be &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; to the given URI.
 
   &lt;p&gt;If the &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
@@ -14163,15 +14169,15 @@
   &lt;p&gt;The &lt;dfn id=name1 title=attr-iframe-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
    attribute, if present, must be a &lt;a href=&quot;#valid8&quot;&gt;valid browsing context
    name&lt;/a&gt;. When the browsing context is created, if the attribute is
-   present, the &lt;a href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be set to
-   the value of this attribute; otherwise, the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   present, the &lt;a href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; must be set to
+   the value of this attribute; otherwise, the &lt;a href=&quot;#browsing2&quot;&gt;browsing
    context name&lt;/a&gt; must be set to the empty string.
 
   &lt;p&gt;Whenever the &lt;code title=attr-iframe-name&gt;&lt;a
    href=&quot;#name1&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute is set, the nested &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#browsing1&quot;
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#browsing2&quot;
    title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; must be changed to the new value.
-   If the attribute is removed, the &lt;a href=&quot;#browsing1&quot;&gt;browsing context
+   If the attribute is removed, the &lt;a href=&quot;#browsing2&quot;&gt;browsing context
    name&lt;/a&gt; must be set to the empty string.
 
   &lt;p&gt;When content loads in an &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;,
@@ -14188,19 +14194,19 @@
    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; that is &lt;a href=&quot;#delays&quot; title=&quot;delay
    the load event&quot;&gt;delaying the &lt;code title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt;
    in the &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the &lt;code&gt;&lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the &lt;code&gt;&lt;a
    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; must &lt;a href=&quot;#delays&quot;&gt;delay the &lt;code
    title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt;.
 
   &lt;p class=note&gt;If, during the handling of the &lt;code title=event-load&gt;&lt;a
-   href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event, the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event, the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; in the &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; is again &lt;a
    href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt;, that will further &lt;a
    href=&quot;#delays&quot;&gt;delay the &lt;code title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt;.
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element never has &lt;a
    href=&quot;#fallback&quot;&gt;fallback content&lt;/a&gt;, as it will always create a nested
-   &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, regardless of whether the
+   &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, regardless of whether the
    specified initial contents are successfully used.
 
   &lt;p&gt;Descendants of &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; elements
@@ -14412,7 +14418,7 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element can represent an
    external resource, which, depending on the type of the resource, will
-   either be treated as an image, as a nested &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   either be treated as an image, as a nested &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;, or as an external resource to be processed by a third-party
    software package.
 
@@ -14558,9 +14564,9 @@
 
        &lt;dd&gt;
         &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element must be
-         associated with a nested &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;,
+         associated with a nested &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;,
          if it does not already have one. The element's nested &lt;a
-         href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; must then be &lt;a
+         href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; must then be &lt;a
          href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; to the given resource,
          with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;. (The &lt;code
          title=attr-object-data&gt;&lt;a href=&quot;#data&quot;&gt;data&lt;/a&gt;&lt;/code&gt; attribute of
@@ -14570,8 +14576,8 @@
 
         &lt;p&gt;If the &lt;code title=attr-object-name&gt;&lt;a
          href=&quot;#name2&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute is present, the &lt;a
-         href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be set to the value
-         of this attribute; otherwise, the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+         href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; must be set to the value
+         of this attribute; otherwise, the &lt;a href=&quot;#browsing2&quot;&gt;browsing
          context name&lt;/a&gt; must be set to the empty string.&lt;/p&gt;
 
         &lt;p class=big-issue&gt;navigation might end up treating it as something
@@ -14587,7 +14593,7 @@
 
         &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element represents
          the specified image. The image is not a nested &lt;a
-         href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+         href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
 
         &lt;p&gt;If the image cannot be rendered, e.g. because it is malformed or
          in an unsupported format, jump to the last step in the overall set
@@ -14637,7 +14643,7 @@
    handler supports a scriptable interface, the &lt;code&gt;&lt;a
    href=&quot;#htmlobjectelement&quot;&gt;HTMLObjectElement&lt;/a&gt;&lt;/code&gt; object representing
    the element should expose that interface. The handler is not a nested &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
   &lt;!-- duplicates what's in &lt;embed&gt; section above --&gt;
 
   &lt;p class=note&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element can, in
@@ -14659,11 +14665,11 @@
   &lt;p&gt;Whenever the &lt;code title=attr-object-name&gt;&lt;a
    href=&quot;#name2&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute is set, if the &lt;code&gt;&lt;a
    href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element has a nested &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, its &lt;a href=&quot;#browsing1&quot;
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, its &lt;a href=&quot;#browsing2&quot;
    title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; must be changed to the new value.
    If the attribute is removed, if the &lt;code&gt;&lt;a
    href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element has a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the &lt;a href=&quot;#browsing2&quot;&gt;browsing
    context name&lt;/a&gt; must be set to the empty string.
 
   &lt;p&gt;The &lt;code title=attr-hyperlink-usemap&gt;&lt;a
@@ -22867,7 +22873,7 @@
    the &lt;code&gt;Document&lt;/code&gt; does not have &lt;code
    title=dom-document-designMode&gt;&lt;a href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt;
    enabled, and the &lt;code&gt;Document&lt;/code&gt; is the &lt;a href=&quot;#active&quot;&gt;active
-   document&lt;/a&gt; in its &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the user
+   document&lt;/a&gt; in its &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user
    agent must execute the script:
 
   &lt;p&gt;If the script is from an external file, then that file must be used as
@@ -22886,7 +22892,7 @@
    href=&quot;#scriptingLanguages&quot;&gt;scripting languages&lt;/a&gt; section below).
 
   &lt;p&gt;Scripts must be executed in the scope of the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; of the element's
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the element's
    &lt;code&gt;Document&lt;/code&gt;.
 
   &lt;p class=note&gt;The element's attributes' values might have changed between
@@ -26671,7 +26677,7 @@
    href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute set, the user agent must
    fetch the specified file&lt;!-- XXX or queue it up to be fetched,
   or something --&gt;
-   and parse it (without a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, and
+   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, and
    with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX
   xref --&gt;) to obtain a DOM.
    If the URI is the same as the URI of the current
@@ -26797,7 +26803,7 @@
    title=attr-ref&gt;&lt;a href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute set, the user agent
    must fetch the specified file&lt;!-- XXX or queue it up to be fetched, or
   something --&gt;
-   and parse it (without a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, and
+   and parse it (without a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, and
    with &lt;span&gt;scripting disabled&lt;/span&gt;&lt;!-- XXX xref --&gt;) to obtain a DOM. If
    the URI is the same as the URI of the current document&lt;!--
   XXX xref --&gt;,
@@ -27375,27 +27381,27 @@
 
   &lt;h3 id=windows&gt;&lt;span class=secno&gt;4.1 &lt;/span&gt;Browsing contexts&lt;/h3&gt;
 
-  &lt;p&gt;A &lt;dfn id=browsing0&gt;browsing context&lt;/dfn&gt; is a collection of one or
+  &lt;p&gt;A &lt;dfn id=browsing1&gt;browsing context&lt;/dfn&gt; is a collection of one or
    more &lt;code&gt;Document&lt;/code&gt; objects, and one or more &lt;a href=&quot;#view&quot;
    title=view&gt;views&lt;/a&gt;.
 
   &lt;p&gt;At any one time, one of the &lt;code&gt;Document&lt;/code&gt;s in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is the &lt;dfn id=active&gt;active
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is the &lt;dfn id=active&gt;active
    document&lt;/dfn&gt;. The collection of &lt;code&gt;Document&lt;/code&gt;s is the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session
    history&lt;/a&gt;.
 
   &lt;p&gt;A &lt;dfn id=view&gt;view&lt;/dfn&gt; is a user agent interface tied to a particular
    media used for the presentation of &lt;code&gt;Document&lt;/code&gt; objects in some
    media. A view may be interactive. Each view is represented by an
    &lt;code&gt;AbstractView&lt;/code&gt; object. Each view belongs to a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;. &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;. &lt;a
    href=&quot;#refsDOM2VIEWS&quot;&gt;[DOM2VIEWS]&lt;/a&gt;
 
   &lt;p class=note&gt;The &lt;code title=&quot;&quot;&gt;document&lt;/code&gt; attribute of an
    &lt;code&gt;AbstractView&lt;/code&gt; object representing a &lt;a href=&quot;#view&quot;&gt;view&lt;/a&gt;
    gives the &lt;code&gt;Document&lt;/code&gt; object of the view's &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
    document&lt;/a&gt;. &lt;a href=&quot;#refsDOM2VIEWS&quot;&gt;[DOM2VIEWS]&lt;/a&gt;
 
   &lt;p class=note&gt;Events that use the &lt;code&gt;UIEvent&lt;/code&gt; interface are
@@ -27405,7 +27411,7 @@
    href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;
 
   &lt;p class=note&gt;A typical Web browser has one obvious &lt;a
-   href=&quot;#view&quot;&gt;view&lt;/a&gt; per &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;: the
+   href=&quot;#view&quot;&gt;view&lt;/a&gt; per &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;: the
    browser's window (screen media). If a page is printed, however, a second
    view becomes evident, that of the print media. The two views always share
    the same underlying &lt;code&gt;Document&lt;/code&gt;, but they have a different
@@ -27413,7 +27419,7 @@
    browsing context, one with a view in the speech media.
 
   &lt;p class=note&gt;A &lt;code&gt;Document&lt;/code&gt; does not necessarily have a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; associated with it. In particular,
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; associated with it. In particular,
    data mining tools are likely to never instantiate browsing contexts.
 
   &lt;p&gt;The main &lt;a href=&quot;#view&quot;&gt;view&lt;/a&gt; through which a user primarily
@@ -27424,7 +27430,7 @@
    attribute on the &lt;code&gt;Document&lt;/code&gt; object's &lt;code&gt;DocumentView&lt;/code&gt;
    interface. &lt;a href=&quot;#refsDOM3VIEWS&quot;&gt;[DOM3VIEWS]&lt;/a&gt;
 
-  &lt;p&gt;When a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is first created, it
+  &lt;p&gt;When a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is first created, it
    must be created with a single &lt;code&gt;Document&lt;/code&gt; in its session
    history, whose &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; is
    &lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt;, which is marked as being an &lt;a
@@ -27432,46 +27438,46 @@
    &lt;code&gt;Document&lt;/code&gt; must have a single child &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; node, which itself has a single child
    &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; node. If the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is created specifically to be
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is created specifically to be
    immediately navigated, then that initial navigation will have &lt;a
    href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.
 
   &lt;p id=about-blank-origin&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
    &lt;code&gt;about:blank&lt;/code&gt; &lt;code&gt;Document&lt;/code&gt; is set when the
    &lt;code&gt;Document&lt;/code&gt; is created, in a manner dependent on whether the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; created is a &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; created is a &lt;a
    href=&quot;#nested0&quot;&gt;nested browsing context&lt;/a&gt;, as follows:
 
   &lt;dl class=switch&gt;
-   &lt;dt&gt;If the new &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is a &lt;a
+   &lt;dt&gt;If the new &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is a &lt;a
     href=&quot;#nested0&quot;&gt;nested browsing context&lt;/a&gt;
 
    &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;about:blank&lt;/code&gt;
     &lt;code&gt;Document&lt;/code&gt; is the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;a
     href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the new &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#parent&quot;&gt;parent
+    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#parent&quot;&gt;parent
     browsing context&lt;/a&gt; at the time of its creation.
 
-   &lt;dt&gt;If the new &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is an &lt;a
+   &lt;dt&gt;If the new &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is an &lt;a
     href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt;
 
    &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;about:blank&lt;/code&gt;
     &lt;code&gt;Document&lt;/code&gt; is the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;a
     href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the new &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#opener&quot;&gt;opener
+    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#opener&quot;&gt;opener
     browsing context&lt;/a&gt; at the time of its creation.
 
    &lt;dt&gt;Otherwise
 
    &lt;dd&gt;The &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;about:blank&lt;/code&gt;
     &lt;code&gt;Document&lt;/code&gt; is a globally unique identifier assigned when the
-    new &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is created.
+    new &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is created.
   &lt;/dl&gt;
 
   &lt;h4 id=nested&gt;&lt;span class=secno&gt;4.1.1 &lt;/span&gt;Nested browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;Certain elements (for example, &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;
-   elements) can instantiate further &lt;a href=&quot;#browsing0&quot; title=&quot;browsing
+   elements) can instantiate further &lt;a href=&quot;#browsing1&quot; title=&quot;browsing
    context&quot;&gt;browsing contexts&lt;/a&gt;. These are called &lt;dfn id=nested0
    title=&quot;nested browsing context&quot;&gt;nested browsing contexts&lt;/dfn&gt;. If a
    browsing context &lt;var title=&quot;&quot;&gt;P&lt;/var&gt; has an element in one of its
@@ -27500,7 +27506,7 @@
 
   &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; is said to be &lt;dfn id=fully&gt;fully active&lt;/dfn&gt;
    when it is the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; of its &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, and either its browsing context is
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, and either its browsing context is
    a &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt;, or the
    &lt;code&gt;Document&lt;/code&gt; &lt;a href=&quot;#nested1&quot; title=&quot;browsing context nested
    through&quot;&gt;through which&lt;/a&gt; that browsing context is &lt;a href=&quot;#nested0&quot;
@@ -27526,7 +27532,7 @@
 
   &lt;p&gt;An &lt;a href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt; has an &lt;dfn
    id=opener&gt;opener browsing context&lt;/dfn&gt;, which is the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; from which the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; from which the &lt;a
    href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt; was created, and it has
    a &lt;dfn id=furthest&gt;furthest ancestor browsing context&lt;/dfn&gt;, which is the
    &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; of the &lt;a
@@ -27536,22 +27542,22 @@
   &lt;p&gt;The &lt;dfn id=opener0 title=dom-opener&gt;&lt;code&gt;opener&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute on the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object must
    return the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; from which the current browsing
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; from which the current browsing
    context was created (its &lt;a href=&quot;#opener&quot;&gt;opener browsing context&lt;/a&gt;),
    if there is one and it is still available.
 
   &lt;h4 id=secondary&gt;&lt;span class=secno&gt;4.1.3 &lt;/span&gt;Secondary browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;User agents may support &lt;dfn id=secondary0 title=&quot;secondary browsing
-   context&quot;&gt;secondary browsing contexts&lt;/dfn&gt;, which are &lt;a href=&quot;#browsing0&quot;
+   context&quot;&gt;secondary browsing contexts&lt;/dfn&gt;, which are &lt;a href=&quot;#browsing1&quot;
    title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; that form part of the user
    agent's interface, apart from the main content area.
 
   &lt;h4 id=security2&gt;&lt;span class=secno&gt;4.1.4 &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;p&gt;A &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is
+  &lt;p&gt;A &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is
    &lt;dfn id=allowed&gt;allowed to navigate&lt;/dfn&gt; a second &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if one of the
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if one of the
    following conditions is true:
 
   &lt;ul&gt;
@@ -27577,26 +27583,26 @@
 
   &lt;h4 id=threads&gt;&lt;span class=secno&gt;4.1.5 &lt;/span&gt;Threads&lt;/h4&gt;
 
-  &lt;p&gt;Each &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is defined as having a
+  &lt;p&gt;Each &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is defined as having a
    list of zero or more &lt;dfn id=directly&gt;directly reachable browsing
    contexts&lt;/dfn&gt;. These are:
 
   &lt;ul&gt;
-   &lt;li&gt;All the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#child&quot;
+   &lt;li&gt;All the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#child&quot;
     title=&quot;child browsing context&quot;&gt;child browsing contexts&lt;/a&gt;.
 
-   &lt;li&gt;The &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a
+   &lt;li&gt;The &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a
     href=&quot;#parent&quot;&gt;parent browsing context&lt;/a&gt;.
 
-   &lt;li&gt;All the &lt;a href=&quot;#browsing0&quot; title=&quot;browsing context&quot;&gt;browsing
-    contexts&lt;/a&gt; that have the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; as
+   &lt;li&gt;All the &lt;a href=&quot;#browsing1&quot; title=&quot;browsing context&quot;&gt;browsing
+    contexts&lt;/a&gt; that have the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; as
     their &lt;a href=&quot;#opener&quot;&gt;opener browsing context&lt;/a&gt;.
 
-   &lt;li&gt;The &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a
+   &lt;li&gt;The &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a
     href=&quot;#opener&quot;&gt;opener browsing context&lt;/a&gt;.
   &lt;/ul&gt;
 
-  &lt;p&gt;The transitive closure of all the &lt;a href=&quot;#browsing0&quot; title=&quot;browsing
+  &lt;p&gt;The transitive closure of all the &lt;a href=&quot;#browsing1&quot; title=&quot;browsing
    context&quot;&gt;browsing contexts&lt;/a&gt; that are &lt;a href=&quot;#directly&quot;&gt;directly
    reachable browsing contexts&lt;/a&gt; forms a &lt;dfn id=unit-of&gt;unit of related
    browsing contexts&lt;/dfn&gt;.
@@ -27615,7 +27621,7 @@
 
   &lt;h4 id=browsing&gt;&lt;span class=secno&gt;4.1.6 &lt;/span&gt;Browsing context names&lt;/h4&gt;
 
-  &lt;p&gt;Browsing contexts can have a &lt;dfn id=browsing1&gt;browsing context
+  &lt;p&gt;Browsing contexts can have a &lt;dfn id=browsing2&gt;browsing context
    name&lt;/dfn&gt;. By default, a browsing context has no name (its name is not
    set).
 
@@ -27631,7 +27637,7 @@
 
   &lt;p&gt;&lt;dfn id=the-rules&gt;The rules for chosing a browsing context given a
    browsing context name&lt;/dfn&gt; are as follows. The rules assume that they are
-   being applied in the context of a &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   being applied in the context of a &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;.
 
   &lt;ol&gt;
@@ -27654,7 +27660,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If the given browsing context name is not &lt;code title=&quot;&quot;&gt;_blank&lt;/code&gt;
-     and there exists a browsing context whose &lt;a href=&quot;#browsing1&quot;
+     and there exists a browsing context whose &lt;a href=&quot;#browsing2&quot;
      title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; is the same as the given browsing
      context name, and the current browsing context is &lt;a
      href=&quot;#allowed&quot;&gt;allowed to navigate&lt;/a&gt; that browsing context, and the
@@ -27710,7 +27716,7 @@
   readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#self&quot; title=dom-self&gt;self&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#name6&quot; title=dom-name&gt;name&lt;/a&gt;;
   [PutForwards=href] readonly attribute &lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt; &lt;a href=&quot;#location0&quot; title=dom-document-location&gt;location&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt; &lt;a href=&quot;#history0&quot; title=dom-history&gt;history&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt; &lt;a href=&quot;#history1&quot; title=dom-history&gt;history&lt;/a&gt;;
   readonly attribute &lt;a href=&quot;#undomanager&quot;&gt;UndoManager&lt;/a&gt; &lt;a href=&quot;#undomanager0&quot; title=dom-undoManager&gt;undoManager&lt;/a&gt;;
   &lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt; &lt;a href=&quot;#getselection&quot; title=dom-getSelection&gt;getSelection&lt;/a&gt;();
 
@@ -27791,7 +27797,7 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object also provides the
    scope for script execution. Each &lt;code&gt;Document&lt;/code&gt; in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; has an associated &lt;dfn
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; has an associated &lt;dfn
    id=list-of2&gt;list of added properties&lt;/dfn&gt; which, when a document is &lt;a
    href=&quot;#active&quot; title=&quot;active document&quot;&gt;active&lt;/a&gt;, are available on the
    &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=&quot;#default3&quot;&gt;default view&lt;/a&gt; &lt;code&gt;&lt;a
@@ -27812,7 +27818,7 @@
    whenever any of the members of a &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
    object are accessed by scripts whose &lt;a href=&quot;#effective3&quot;&gt;effective
    script origin&lt;/a&gt; is not the same as the &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;'s &lt;a
    href=&quot;#effective3&quot;&gt;effective script origin&lt;/a&gt;, with the following
    exceptions:
@@ -27896,7 +27902,7 @@
   &lt;p&gt;The &lt;dfn id=open2 title=dom-open&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt; method on
    &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; objects provides a mechanism for
    &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigating&lt;/a&gt; an existing &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; or opening and navigating an &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; or opening and navigating an &lt;a
    href=&quot;#auxiliary0&quot;&gt;auxiliary browsing context&lt;/a&gt;.
 
   &lt;p&gt;The method has four arguments, though they are all optional.
@@ -27908,7 +27914,7 @@
    to an absolute URI by &lt;span class=big-issue&gt;...&lt;/span&gt;
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the &lt;a
-   href=&quot;#browsing1&quot; title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; of the browsing
+   href=&quot;#browsing2&quot; title=&quot;browsing context name&quot;&gt;name&lt;/a&gt; of the browsing
    context that is to be navigated. It must be a &lt;a href=&quot;#valid9&quot;&gt;valid
    browsing context name or keyword&lt;/a&gt;. If fewer than two arguments are
    provided, then the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; argument defaults to the value
@@ -27926,10 +27932,10 @@
    provided, &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; defaults to false.
 
   &lt;p&gt;When the method is invoked, the user agent must first select a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to navigate by applying &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to navigate by applying &lt;a
    href=&quot;#the-rules&quot;&gt;the rules for chosing a browsing context given a
    browsing context name&lt;/a&gt; using the &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; argument as
-   the name and the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; of the script
+   the name and the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the script
    as the context in which the algorithm is executed, unless the user has
    indicated a preference, in which case the browsing context to navigate may
    instead be the one indicated by the user.
@@ -27944,23 +27950,23 @@
    instead target a new tab.
 
   &lt;p&gt;Then, the user agent must &lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the selected
-   &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to the URI given in &lt;var
+   &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to the URI given in &lt;var
    title=&quot;&quot;&gt;url&lt;/var&gt;. If the &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is true, then &lt;a
    href=&quot;#replacement&quot; title=&quot;replacement enabled&quot;&gt;replacement must be
    enabled&lt;/a&gt;; otherwise, it must not be enabled unless the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; was just created as part of the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; was just created as part of the &lt;a
    href=&quot;#the-rules&quot;&gt;the rules for chosing a browsing context given a
    browsing context name&lt;/a&gt;.
 
   &lt;p&gt;The method must return the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
-   object of the default view of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   object of the default view of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; that was navigated, or null if no browsing context was
    navigated.
 
   &lt;p&gt;The &lt;dfn id=name6 title=dom-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute of
    the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object must, on getting,
-   return the current name of the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;,
-   and, on setting, set the name of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   return the current name of the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;,
+   and, on setting, set the name of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; to the new value.
 
   &lt;p class=note&gt;The name &lt;a href=&quot;#resetBCName&quot;&gt;gets reset&lt;/a&gt; when the
@@ -28091,17 +28097,17 @@
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-      href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+      href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
       title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by the user
       (e.g. by using a &lt;i&gt;bookmarklet&lt;/i&gt;)
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the &lt;a
-      href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
+      href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
       document&lt;/a&gt;.
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-      href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+      href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
       title=navigate&gt;navigated&lt;/a&gt;, the URI having been declared in markup
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; of the element (e.g. an
@@ -28110,7 +28116,7 @@
 
      &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
       protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-      href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+      href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
       title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by script
 
      &lt;dd&gt;The owner is the script that provided the URI.
@@ -28361,7 +28367,7 @@
    title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
    href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has the same
    &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the script given by that URI, the
-   dereference context must be the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+   dereference context must be the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
    being navigated.
 
   &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
@@ -28408,10 +28414,10 @@
    &lt;p&gt;The &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
     attribute of an &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element would
     be evaluated in the context of the &lt;code&gt;&lt;a
-    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=&quot;#browsing0&quot;&gt;browsing
+    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=&quot;#browsing1&quot;&gt;browsing
     context&lt;/a&gt;; once evaluated, its return value (if it was not void) would
-    replace that &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s document, thus
-    changing the variables visible in that &lt;a href=&quot;#browsing0&quot;&gt;browsing
+    replace that &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s document, thus
+    changing the variables visible in that &lt;a href=&quot;#browsing1&quot;&gt;browsing
     context&lt;/a&gt;.&lt;/p&gt;
   &lt;/div&gt;
 
@@ -28457,7 +28463,7 @@
    called &lt;code&gt;event&lt;/code&gt;, with the new function's scope chain being
    linked from the activation object of the handler, to the element, to the
    element's &lt;code&gt;form&lt;/code&gt; element if it is a form control, to the
-   &lt;code&gt;Document&lt;/code&gt; object, to the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   &lt;code&gt;Document&lt;/code&gt; object, to the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; of that &lt;code&gt;Document&lt;/code&gt;. The function's
    &lt;code&gt;this&lt;/code&gt; parameter must be the &lt;code&gt;Element&lt;/code&gt; object
    representing the element. The resulting function must then be set as the
@@ -28918,7 +28924,7 @@
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
 
   &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;Document&lt;/code&gt; in
-   a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, if the event is not a &lt;code
+   a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, if the event is not a &lt;code
    title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event, the user agent
    must also dispatch the event to the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;, as follows:
@@ -29498,7 +29504,7 @@
    &lt;dfn id=update0 title=concept-appcache-status&gt;update status&lt;/dfn&gt;, which
    is one of the following: &lt;i&gt;idle&lt;/i&gt;, &lt;i&gt;checking&lt;/i&gt;, &lt;i&gt;downloading&lt;/i&gt;.
 
-  &lt;p id=appcache-history-1&gt;A &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; can be
+  &lt;p id=appcache-history-1&gt;A &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; can be
    associated with an application cache. A &lt;a href=&quot;#child&quot;&gt;child browsing
    context&lt;/a&gt; is always associated with the same application cache as its &lt;a
    href=&quot;#parent&quot;&gt;parent browsing context&lt;/a&gt;, if any. A &lt;a
@@ -30572,7 +30578,7 @@
    on &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; objects must return the
    &lt;code&gt;&lt;a href=&quot;#applicationcache&quot;&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object
    associated with the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;.
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=&quot;#applicationcache&quot;&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object
@@ -30585,7 +30591,7 @@
    Otherwise, the &lt;code&gt;&lt;a
    href=&quot;#applicationcache&quot;&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object is associated
    with the application cache that the &lt;code&gt;Document&lt;/code&gt; object's &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is associated with, if any.
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is associated with, if any.
 
   &lt;p&gt;The &lt;dfn id=status0 title=dom-appcache-status&gt;&lt;code&gt;status&lt;/code&gt;&lt;/dfn&gt;
    attribute, on getting, must return the current state of the &lt;a
@@ -30908,28 +30914,28 @@
    browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;The sequence of &lt;code&gt;Document&lt;/code&gt;s in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is its &lt;dfn id=session&gt;session
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is its &lt;dfn id=session&gt;session
    history&lt;/dfn&gt;.
 
-  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; objects provide a
-   representation of the pages in the session history of &lt;a href=&quot;#browsing0&quot;
+  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; objects provide a
+   representation of the pages in the session history of &lt;a href=&quot;#browsing1&quot;
    title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;. Each browsing context has
    a distinct session history.
 
   &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a browsing context's session
    history is associated with a unique instance of the &lt;code&gt;&lt;a
-   href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object, although they all must model
+   href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object, although they all must model
    the same underlying session history.
 
-  &lt;p&gt;The &lt;dfn id=history0 title=dom-history&gt;&lt;code&gt;history&lt;/code&gt;&lt;/dfn&gt;
+  &lt;p&gt;The &lt;dfn id=history1 title=dom-history&gt;&lt;code&gt;history&lt;/code&gt;&lt;/dfn&gt;
    attribute of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface must
    return the object implementing the &lt;code&gt;&lt;a
-   href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface for that &lt;code&gt;&lt;a
+   href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface for that &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=&quot;#active&quot;&gt;active
    document&lt;/a&gt;.
 
-  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; objects represent their &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s session history as a flat list of
+  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; objects represent their &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s session history as a flat list of
    &lt;a href=&quot;#session0&quot; title=&quot;session history entry&quot;&gt;session history
    entries&lt;/a&gt;. Each &lt;dfn id=session0&gt;session history entry&lt;/dfn&gt; consists of
    either a URI or a &lt;a href=&quot;#state&quot;&gt;state object&lt;/a&gt;, or both, and may in
@@ -30964,7 +30970,7 @@
 
   &lt;p&gt;At any point, one of the entries in the session history is the &lt;dfn
    id=current1&gt;current entry&lt;/dfn&gt;. This is the entry representing the &lt;a
-   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;. The &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is usually an entry
    for the &lt;a href=&quot;#href5&quot; title=dom-location-href&gt;location&lt;/a&gt; of the
    &lt;code&gt;Document&lt;/code&gt;. However, it can also be one of the entries for &lt;a
@@ -31017,9 +31023,9 @@
    killed
 
   &lt;h4 id=the-history&gt;&lt;span class=secno&gt;4.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a
-   href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+   href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;pre class=idl&gt;interface &lt;dfn id=history1&gt;History&lt;/dfn&gt; {
+  &lt;pre class=idl&gt;interface &lt;dfn id=history2&gt;History&lt;/dfn&gt; {
   readonly attribute long &lt;a href=&quot;#length7&quot; title=dom-history-length&gt;length&lt;/a&gt;;
   void &lt;a href=&quot;#godelta&quot; title=dom-history-go&gt;go&lt;/a&gt;(in long delta);
   void &lt;a href=&quot;#go&quot; title=dom-history-go-0&gt;go&lt;/a&gt;();
@@ -31031,7 +31037,7 @@
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn id=length7 title=dom-history-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-   attribute of the &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface
+   attribute of the &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface
    must return the number of entries in this &lt;a href=&quot;#session&quot;&gt;session
    history&lt;/a&gt;.
 
@@ -31051,142 +31057,12 @@
    was called instead.
 
   &lt;p&gt;Otherwise, the user agent must cause the current &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to &lt;a href=&quot;#traverse&quot;&gt;traverse the
-   history&lt;/a&gt; to the specified entry, as described below. The &lt;dfn
-   id=specified&gt;specified entry&lt;/dfn&gt; is the one whose index equals the index
-   of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; plus &lt;var
-   title=&quot;&quot;&gt;delta&lt;/var&gt;.
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to &lt;a href=&quot;#traverse&quot;&gt;traverse the
+   history&lt;/a&gt; to the specified entry. The &lt;i&gt;specified entry&lt;/i&gt; is the one
+   whose index equals the index of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;
+   plus &lt;var title=&quot;&quot;&gt;delta&lt;/var&gt;.
 
-  &lt;p&gt;When a user agent is required to &lt;dfn id=traverse&gt;traverse the
-   history&lt;/dfn&gt;&lt;!-- (traversal) --&gt; to a specified entry, the user agent
-   must act as follows:
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;If there is no longer a &lt;code&gt;Document&lt;/code&gt; object for the entry in
-     question, the user agent must &lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the
-     browsing context to the location for that entry to perform an &lt;a
-     href=&quot;#entry&quot;&gt;entry update&lt;/a&gt; of that entry, and abort these steps. The
-     &quot;&lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
-     algorithm to complete the traversal, at which point there &lt;em&gt;is&lt;/em&gt; a
-     &lt;code&gt;Document&lt;/code&gt; object and so this step gets skipped.
-
-   &lt;li&gt;
-    &lt;p&gt;If appropriate, update the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in
-     the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;
-     object's &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object to reflect
-     any state that the user agent wishes to persist.&lt;/p&gt;
-
-    &lt;p class=example&gt;For example, some user agents might want to persist the
-     scroll position, or the values of form controls.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; has a different
-     &lt;code&gt;Document&lt;/code&gt; object than the &lt;a href=&quot;#current1&quot;&gt;current
-     entry&lt;/a&gt; then the user agent must run the following substeps:&lt;/p&gt;
-
-    &lt;ol&gt;
-     &lt;li class=big-issue&gt;freeze any timers, intervals, XMLHttpRequests,
-      database transactions, etc
-
-     &lt;li&gt;The user agent must move any properties that have been added to the
-      browsing context's default view's &lt;code&gt;&lt;a
-      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object to the &lt;a href=&quot;#active&quot;&gt;active
-      document&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=&quot;#list-of2&quot;&gt;list of
-      added properties&lt;/a&gt;.
-
-     &lt;li&gt;If the browsing context is a &lt;a href=&quot;#top-level&quot;&gt;top-level browsing
-      context&lt;/a&gt; (and not an &lt;a href=&quot;#auxiliary0&quot;&gt;auxiliary browsing
-      context&lt;/a&gt;), and the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
-      &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;
-      is not the same as the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
-      &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;,
-      then the following sub-sub-steps must be run:
-      &lt;ol&gt;
-       &lt;li&gt;The current &lt;a href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be
-        stored with all the entries in the history that are associated with
-        &lt;code&gt;Document&lt;/code&gt; objects with the same &lt;a
-        href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the &lt;a href=&quot;#active&quot;&gt;active
-        document&lt;/a&gt; &lt;em&gt;and&lt;/em&gt; that are contiguous with the &lt;a
-        href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;.
-
-       &lt;li id=resetBCName&gt;The browsing context's &lt;a
-        href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be unset.
-      &lt;/ol&gt;
-
-     &lt;li id=appcache-history-2&gt;The user agent must make the &lt;a
-      href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt; object
-      the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a
-      href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;. (If it is a &lt;a
-      href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt;, this might &lt;a
-      href=&quot;#appcache-history-1&quot;&gt;change&lt;/a&gt; which &lt;a
-      href=&quot;#application0&quot;&gt;application cache&lt;/a&gt; it is associated with.)
-
-     &lt;li&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; has a &lt;a
-      href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; stored with it, then the
-      following sub-sub-steps must be run:
-      &lt;ol&gt;
-       &lt;li&gt;The browsing context's &lt;a href=&quot;#browsing1&quot;&gt;browsing context
-        name&lt;/a&gt; must be set to the name stored with the specified entry.
-
-       &lt;li&gt;Any &lt;a href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; stored with the
-        entries in the history that are associated with &lt;code&gt;Document&lt;/code&gt;
-        objects with the same &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the new &lt;a
-        href=&quot;#active&quot;&gt;active document&lt;/a&gt;, and that are contiguous with the
-        specified entry, must be cleared.
-      &lt;/ol&gt;
-
-     &lt;li&gt;The user agent must move any properties that have been added to the
-      &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;'s &lt;a
-      href=&quot;#list-of2&quot;&gt;list of added properties&lt;/a&gt; to browsing context's
-      default view's &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object.
-
-     &lt;li class=big-issue&gt;unfreeze any timers, intervals, XMLHttpRequests,
-      database transactions, etc
-    &lt;/ol&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If there are any entries with state objects between the &lt;a
-     href=&quot;#last-activated&quot;&gt;last activated entry&lt;/a&gt; for the
-     &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;
-     and the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; itself (not inclusive),
-     then the user agent must iterate through every entry between that &lt;a
-     href=&quot;#last-activated&quot;&gt;last activated entry&lt;/a&gt; and the &lt;a
-     href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;, starting with the entry closest
-     to the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;, and ending with the one
-     closest to the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;. For each entry,
-     if the entry is a state object, the user agent must &lt;a
-     href=&quot;#activating0&quot;&gt;activate the state object&lt;/a&gt;.
-
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; is a state object or
-     the first entry for a &lt;code&gt;Document&lt;/code&gt;, the user agent must &lt;a
-     href=&quot;#activating0&quot; title=&quot;activate the state object&quot;&gt;activate that
-     entry&lt;/a&gt;.
-
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; has a URI that differs
-     from the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;'s only by its fragment
-     identifier, and the two share the same &lt;code&gt;Document&lt;/code&gt; object,
-     then &lt;a href=&quot;#firing2&quot;&gt;fire a simple event&lt;/a&gt; with the name
-     &lt;code&gt;hashchanged&lt;/code&gt; at &lt;a href=&quot;#the-body1&quot;&gt;the &lt;code&gt;body&lt;/code&gt;
-     element&lt;/a&gt;, and, if the new URI has a fragment identifier, &lt;a
-     href=&quot;#scroll&quot;&gt;scroll to the fragment identifier&lt;/a&gt;.
-
-   &lt;li&gt;
-    &lt;p&gt;User agents may also update other aspects of the document view when
-     the location changes in this way, for instance the scroll position,
-     values of form fields, etc.
-
-   &lt;li&gt;
-    &lt;p&gt;The &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is now the &lt;a
-     href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;.
-  &lt;/ol&gt;
-
-  &lt;p class=big-issue&gt;how does the changing of the global attributes affect
-   .watch() when seen from other Windows?
-
-  &lt;p&gt;When the user navigates through a &lt;a href=&quot;#browsing0&quot;&gt;browsing
+  &lt;p&gt;When the user navigates through a &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;, e.g. using a browser's back and forward buttons, the user
    agent must translate this action into the equivalent invocations of the
    &lt;code title=dom-history-go&gt;&lt;a href=&quot;#godelta&quot;&gt;history.go(&lt;var
@@ -31194,7 +31070,7 @@
    title=dom-window&gt;&lt;a href=&quot;#window0&quot;&gt;window&lt;/a&gt;&lt;/code&gt; objects.
 
   &lt;p&gt;Some of the other members of the &lt;code&gt;&lt;a
-   href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface are defined in terms of the
+   href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface are defined in terms of the
    &lt;code title=dom-history-go&gt;&lt;a href=&quot;#godelta&quot;&gt;go()&lt;/a&gt;&lt;/code&gt; method, as
    follows:
 
@@ -31364,10 +31240,10 @@
 
   &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; objects provide a
    representation of the URI of their document, and allow the &lt;a
-   href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;'s session history to be changed, by adding or replacing
    entries in the &lt;code title=dom-history&gt;&lt;a
-   href=&quot;#history0&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object.
+   href=&quot;#history1&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object.
 
   &lt;pre class=idl&gt;interface &lt;dfn id=location2&gt;Location&lt;/dfn&gt; {
   readonly attribute DOMString &lt;a href=&quot;#href5&quot; title=dom-location-href&gt;href&lt;/a&gt;;
@@ -31410,12 +31286,12 @@
 
   &lt;p&gt;When the &lt;dfn id=assign title=dom-location-assign&gt;&lt;code&gt;assign(&lt;var
    title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the UA must &lt;a
-   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
 
   &lt;p&gt;When the &lt;dfn id=replace title=dom-location-replace&gt;&lt;code&gt;replace(&lt;var
    title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the UA must &lt;a
-   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with &lt;a
    href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.
 
@@ -31469,7 +31345,7 @@
 
   &lt;ul&gt;
    &lt;li&gt;The &lt;code title=dom-location-href&gt;&lt;a href=&quot;#href5&quot;&gt;href&lt;/a&gt;&lt;/code&gt;
-    setter, if the script is running in a &lt;a href=&quot;#browsing0&quot;&gt;browsing
+    setter, if the script is running in a &lt;a href=&quot;#browsing1&quot;&gt;browsing
     context&lt;/a&gt; that is &lt;a href=&quot;#allowed&quot;&gt;allowed to navigate&lt;/a&gt; the
     browsing context with which the &lt;code&gt;&lt;a
     href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; object is associated
@@ -31484,21 +31360,21 @@
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface is not meant
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface is not meant
    to place restrictions on how implementations represent the session history
    to the user.
 
   &lt;p&gt;For example, session history could be implemented in a tree-like manner,
    with each page having multiple &quot;forward&quot; pages. This specification doesn't
    define how the linear list of pages in the &lt;code title=dom-history&gt;&lt;a
-   href=&quot;#history0&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object are derived from the actual
+   href=&quot;#history1&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object are derived from the actual
    session history as seen from the user's perspective.
 
   &lt;p&gt;Similarly, a page containing two &lt;code&gt;&lt;a
    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;s has a &lt;code title=dom-history&gt;&lt;a
-   href=&quot;#history0&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object distinct from the &lt;code&gt;&lt;a
+   href=&quot;#history1&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object distinct from the &lt;code&gt;&lt;a
    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;s' &lt;code title=dom-history&gt;&lt;a
-   href=&quot;#history0&quot;&gt;history&lt;/a&gt;&lt;/code&gt; objects, despite the fact that typical
+   href=&quot;#history1&quot;&gt;history&lt;/a&gt;&lt;/code&gt; objects, despite the fact that typical
    Web browsers present the user with just one &quot;Back&quot; button, with a session
    history that interleaves the navigation of the two inner frames and the
    outer page.
@@ -31518,9 +31394,12 @@
    that are invoked on a timer, or from event handlers that do not represent
    a clear user action, or that are invoked in rapid succession.
 
-  &lt;h3 id=navigating&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Navigating across documents&lt;/h3&gt;
+  &lt;h3 id=browsing0&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Browsing the Web&lt;/h3&gt;
 
-  &lt;p&gt;Certain actions cause the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to
+  &lt;h4 id=navigating&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;Navigating across
+   documents&lt;/h4&gt;
+
+  &lt;p&gt;Certain actions cause the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to
    &lt;dfn id=navigate&gt;navigate&lt;/dfn&gt;. For example, &lt;a href=&quot;#following0&quot;
    title=&quot;following hyperlinks&quot;&gt;following a hyperlink&lt;/a&gt;, &lt;span
    title=&quot;&quot;&gt;form submission&lt;/span&gt;, and the &lt;code title=dom-open&gt;&lt;a
@@ -31658,7 +31537,7 @@
    &lt;li&gt;
     &lt;p&gt;If the user agent has been configured to process resources of the
      given &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; using some mechanism other than rendering
-     the content in a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, then skip
+     the content in a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, then skip
      this step. Otherwise, if the &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is one of the
      following types, jump to the appropriate entry in the following list,
      and process the resource as described there:&lt;/p&gt;
@@ -31692,7 +31571,7 @@
       title=navigate-image&gt;image&lt;/a&gt; section, and abort these steps.
 
      &lt;dt&gt;A type that will use an external application to render the content
-      in the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+      in the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
 
      &lt;dd&gt;Follow the steps given in the &lt;a href=&quot;#page-load3&quot;
       title=navigate-plugin&gt;plugin&lt;/a&gt; section, and abort these steps.
@@ -31763,9 +31642,9 @@
       &lt;ol&gt;
        &lt;li&gt;
         &lt;p&gt;Remove all the entries after the &lt;a href=&quot;#current1&quot;&gt;current
-         entry&lt;/a&gt; in the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s
+         entry&lt;/a&gt; in the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s
          &lt;code&gt;Document&lt;/code&gt; object's &lt;code&gt;&lt;a
-         href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+         href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
         &lt;p class=note&gt;This &lt;a href=&quot;#history-notes&quot;&gt;doesn't necessarily have
          to affect&lt;/a&gt;&lt;!--XXX change to auto-xref?--&gt; the user agent's user
@@ -31773,7 +31652,7 @@
 
        &lt;li&gt;
         &lt;p&gt;Append a new entry at the end of the &lt;code&gt;&lt;a
-         href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object representing the new
+         href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object representing the new
          resource and its &lt;code&gt;Document&lt;/code&gt; object and related state.
 
        &lt;li&gt;
@@ -31788,10 +31667,10 @@
     &lt;/dl&gt;
   &lt;/ol&gt;
 
-  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;&lt;dfn id=page-load
+  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;&lt;dfn id=page-load
    title=navigate-html&gt;Page load processing model for HTML files&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;When an HTML document is to be loaded in a &lt;a href=&quot;#browsing0&quot;&gt;browsing
+  &lt;p&gt;When an HTML document is to be loaded in a &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;, the user agent must create a &lt;code&gt;Document&lt;/code&gt; object,
    mark it as being an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML
    document&lt;/a&gt;, create an &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, associate it
@@ -31819,7 +31698,7 @@
    title=concept-appcache-init-with-attribute&gt;Application cache selection&lt;/a&gt;
    happens &lt;a href=&quot;#parser-appcache&quot;&gt;in the HTML parser&lt;/a&gt;.
 
-  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;&lt;dfn id=page-load0
+  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;&lt;dfn id=page-load0
    title=navigate-xml&gt;Page load processing model for XML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When faced with displaying an XML file inline, user agents must first
@@ -31876,11 +31755,11 @@
   &lt;p&gt;Error messages from the parse process (e.g. namespace well-formedness
    errors) may be reported inline by mutating the &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;&lt;dfn id=page-load1
+  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;&lt;dfn id=page-load1
    title=navigate-text&gt;Page load processing model for text files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a plain text document is to be loaded in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
    &lt;code&gt;Document&lt;/code&gt; object, mark it as being an &lt;a href=&quot;#html-&quot;
    title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, create an &lt;a href=&quot;#html-0&quot;&gt;HTML
    parser&lt;/a&gt;, associate it with the document, act as if the tokeniser had
@@ -31919,11 +31798,11 @@
    binding, providing script, giving the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;&lt;dfn id=page-load2
+  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;&lt;dfn id=page-load2
    title=navigate-image&gt;Page load processing model for images&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an image resource is to be loaded in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
    &lt;code&gt;Document&lt;/code&gt; object, mark it as being an &lt;a href=&quot;#html-&quot;
    title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, append an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element to the &lt;code&gt;Document&lt;/code&gt;, append
@@ -31955,12 +31834,12 @@
    binding, to provide a script, to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;&lt;dfn id=page-load3
+  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;&lt;dfn id=page-load3
    title=navigate-plugin&gt;Page load processing model for content that uses
    plugins&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a resource that requires an external resource to be rendered is to
-   be loaded in a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the user agent
+   be loaded in a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user agent
    should create a &lt;code&gt;Document&lt;/code&gt; object, mark it as being an &lt;a
    href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, append an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element to the &lt;code&gt;Document&lt;/code&gt;, append
@@ -31992,12 +31871,12 @@
    XBL binding, or to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;.
 
-  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;&lt;dfn id=page-load4
+  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;&lt;dfn id=page-load4
    title=navigate-ua-inline&gt;Page load processing model for inline content
    that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is to display a user agent page inline in a &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, the user agent should create a
    &lt;code&gt;Document&lt;/code&gt; object, mark it as being an &lt;a href=&quot;#html-&quot;
    title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, and then either associate that
    &lt;code&gt;Document&lt;/code&gt; with a custom rendering that is not rendered using
@@ -32019,7 +31898,7 @@
    the page has been completely set up, the user agent must &lt;a
    href=&quot;#update2&quot;&gt;update the session history with the new page&lt;/a&gt;.
 
-  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;&lt;dfn id=navigating0
+  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;4.9.8 &lt;/span&gt;&lt;dfn id=navigating0
    title=navigate-fragid&gt;Navigating to a fragment identifier&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is supposed to navigate to a fragment identifier, then
@@ -32083,6 +31962,134 @@
    an element; otherwise there is no &lt;i&gt;target element&lt;/i&gt;. &lt;a
    href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt;
 
+  &lt;h4 id=history0&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;History traversal&lt;/h4&gt;
+
+  &lt;p&gt;When a user agent is required to &lt;dfn id=traverse&gt;traverse the
+   history&lt;/dfn&gt; to a &lt;i&gt;specified entry&lt;/i&gt;, the user agent must act as
+   follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If there is no longer a &lt;code&gt;Document&lt;/code&gt; object for the entry in
+     question, the user agent must &lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; the
+     browsing context to the location for that entry to perform an &lt;a
+     href=&quot;#entry&quot;&gt;entry update&lt;/a&gt; of that entry, and abort these steps. The
+     &quot;&lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
+     algorithm to complete the traversal, at which point there &lt;em&gt;is&lt;/em&gt; a
+     &lt;code&gt;Document&lt;/code&gt; object and so this step gets skipped.
+
+   &lt;li&gt;
+    &lt;p&gt;If appropriate, update the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in
+     the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;
+     object's &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object to reflect
+     any state that the user agent wishes to persist.&lt;/p&gt;
+
+    &lt;p class=example&gt;For example, some user agents might want to persist the
+     scroll position, or the values of form controls.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a different &lt;code&gt;Document&lt;/code&gt;
+     object than the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; then the user
+     agent must run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li class=big-issue&gt;freeze any timers, intervals, XMLHttpRequests,
+      database transactions, etc
+
+     &lt;li&gt;The user agent must move any properties that have been added to the
+      browsing context's default view's &lt;code&gt;&lt;a
+      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object to the &lt;a href=&quot;#active&quot;&gt;active
+      document&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=&quot;#list-of2&quot;&gt;list of
+      added properties&lt;/a&gt;.
+
+     &lt;li&gt;If the browsing context is a &lt;a href=&quot;#top-level&quot;&gt;top-level browsing
+      context&lt;/a&gt; (and not an &lt;a href=&quot;#auxiliary0&quot;&gt;auxiliary browsing
+      context&lt;/a&gt;), and the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
+      &lt;code&gt;Document&lt;/code&gt; of the &lt;i&gt;specified entry&lt;/i&gt; is not the same as
+      the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; of the
+      &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;, then the following sub-sub-steps
+      must be run:
+      &lt;ol&gt;
+       &lt;li&gt;The current &lt;a href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; must be
+        stored with all the entries in the history that are associated with
+        &lt;code&gt;Document&lt;/code&gt; objects with the same &lt;a
+        href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the &lt;a href=&quot;#active&quot;&gt;active
+        document&lt;/a&gt; &lt;em&gt;and&lt;/em&gt; that are contiguous with the &lt;a
+        href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;.
+
+       &lt;li id=resetBCName&gt;The browsing context's &lt;a
+        href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; must be unset.
+      &lt;/ol&gt;
+
+     &lt;li id=appcache-history-2&gt;The user agent must make the &lt;i&gt;specified
+      entry&lt;/i&gt;'s &lt;code&gt;Document&lt;/code&gt; object the &lt;a href=&quot;#active&quot;&gt;active
+      document&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;. (If it
+      is a &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt;, this might &lt;a
+      href=&quot;#appcache-history-1&quot;&gt;change&lt;/a&gt; which &lt;a
+      href=&quot;#application0&quot;&gt;application cache&lt;/a&gt; it is associated with.)
+
+     &lt;li&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a &lt;a href=&quot;#browsing2&quot;&gt;browsing
+      context name&lt;/a&gt; stored with it, then the following sub-sub-steps must
+      be run:
+      &lt;ol&gt;
+       &lt;li&gt;The browsing context's &lt;a href=&quot;#browsing2&quot;&gt;browsing context
+        name&lt;/a&gt; must be set to the name stored with the specified entry.
+
+       &lt;li&gt;Any &lt;a href=&quot;#browsing2&quot;&gt;browsing context name&lt;/a&gt; stored with the
+        entries in the history that are associated with &lt;code&gt;Document&lt;/code&gt;
+        objects with the same &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the new &lt;a
+        href=&quot;#active&quot;&gt;active document&lt;/a&gt;, and that are contiguous with the
+        specified entry, must be cleared.
+      &lt;/ol&gt;
+
+     &lt;li&gt;The user agent must move any properties that have been added to the
+      &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;'s &lt;a
+      href=&quot;#list-of2&quot;&gt;list of added properties&lt;/a&gt; to browsing context's
+      default view's &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object.
+
+     &lt;li class=big-issue&gt;unfreeze any timers, intervals, XMLHttpRequests,
+      database transactions, etc
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If there are any entries with state objects between the &lt;a
+     href=&quot;#last-activated&quot;&gt;last activated entry&lt;/a&gt; for the
+     &lt;code&gt;Document&lt;/code&gt; of the &lt;i&gt;specified entry&lt;/i&gt; and the &lt;i&gt;specified
+     entry&lt;/i&gt; itself (not inclusive), then the user agent must iterate
+     through every entry between that &lt;a href=&quot;#last-activated&quot;&gt;last
+     activated entry&lt;/a&gt; and the &lt;i&gt;specified entry&lt;/i&gt;, starting with the
+     entry closest to the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;, and ending
+     with the one closest to the &lt;i&gt;specified entry&lt;/i&gt;. For each entry, if
+     the entry is a state object, the user agent must &lt;a
+     href=&quot;#activating0&quot;&gt;activate the state object&lt;/a&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; is a state object or the first entry for
+     a &lt;code&gt;Document&lt;/code&gt;, the user agent must &lt;a href=&quot;#activating0&quot;
+     title=&quot;activate the state object&quot;&gt;activate that entry&lt;/a&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a URI that differs from the &lt;a
+     href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;'s only by its fragment identifier,
+     and the two share the same &lt;code&gt;Document&lt;/code&gt; object, then &lt;a
+     href=&quot;#firing2&quot;&gt;fire a simple event&lt;/a&gt; with the name
+     &lt;code&gt;hashchanged&lt;/code&gt; at &lt;a href=&quot;#the-body1&quot;&gt;the &lt;code&gt;body&lt;/code&gt;
+     element&lt;/a&gt;, and, if the new URI has a fragment identifier, &lt;a
+     href=&quot;#scroll&quot;&gt;scroll to the fragment identifier&lt;/a&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;User agents may also update other aspects of the document view when
+     the location changes in this way, for instance the scroll position,
+     values of form fields, etc.
+
+   &lt;li&gt;
+    &lt;p&gt;The &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is now the &lt;i&gt;specified
+     entry&lt;/i&gt;.
+  &lt;/ol&gt;
+
+  &lt;p class=big-issue&gt;how does the changing of the global attributes affect
+   .watch() when seen from other Windows?
+
   &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Determining the
    type of a new resource in a browsing context&lt;/h3&gt;
 
@@ -33117,13 +33124,13 @@
    for that &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt;.
 
   &lt;p&gt;When a new &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; is
-   created by cloning an existing &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;,
+   created by cloning an existing &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;,
    the new browsing context must start with the same session storage areas as
    the original, but the two sets must from that point on be considered
    separate, not affecting each other in any way.
 
   &lt;p&gt;When a new &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; is
-   created by a script in an existing &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   created by a script in an existing &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;, or by the user following a link in an existing browsing
    context, or in some other way related to a specific &lt;code&gt;&lt;a
    href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;, then the session storage
@@ -33171,7 +33178,7 @@
   &lt;p&gt;When the &lt;code title=dom-localStorage&gt;&lt;a
    href=&quot;#localstorage&quot;&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute is accessed, the
    user agent must check to see if it has allocated local storage area for
-   the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt; within which the script is running. If it has not, a new
    storage area for that origin must be created.
 
@@ -33235,7 +33242,7 @@
    &lt;code&gt;&lt;a href=&quot;#storage0&quot;&gt;Storage&lt;/a&gt;&lt;/code&gt; object was affected, and its
    &lt;code title=dom-StorageEvent-source&gt;&lt;a href=&quot;#source0&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
    attribute set to the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of
-   the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; that that document is in, if
+   the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; that that document is in, if
    the two documents are in the same &lt;a href=&quot;#unit-of&quot;&gt;unit of related
    browsing contexts&lt;/a&gt;, or null otherwise.
 
@@ -33559,7 +33566,7 @@
    make appropriate use of the transaction features to handle the case of
    multiple scripts interacting with the same database simultaneously (as
    could happen if the same page was opened in two different &lt;a
-   href=&quot;#browsing0&quot; title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;).
+   href=&quot;#browsing1&quot; title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;).
 
   &lt;p&gt;User agents must consider statements that use the &lt;code
    title=&quot;&quot;&gt;BEGIN&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;COMMIT&lt;/code&gt;, and &lt;code
@@ -33890,7 +33897,7 @@
      &lt;code title=dom-localStorage&gt;&lt;a
      href=&quot;#localstorage&quot;&gt;localStorage&lt;/a&gt;&lt;/code&gt; and database objects to
      scripts originating at the domain of the top-level document of the &lt;a
-     href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, for instance denying access to
+     href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, for instance denying access to
      the API for pages from other domains running in &lt;code&gt;&lt;a
      href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
 
@@ -34126,7 +34133,7 @@
    id=following0&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user &lt;em&gt;follows a hyperlink&lt;/em&gt;, the user agent must &lt;a
-   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;
+   href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
    to the URI of the hyperlink.
 
   &lt;p&gt;The URI of the hyperlink is URI given by resolving the &lt;code
@@ -34149,7 +34156,7 @@
    using the value of the &lt;code title=attr-hyperlink-target&gt;&lt;a
    href=&quot;#target3&quot;&gt;target&lt;/a&gt;&lt;/code&gt; attribute as the browsing context name.
    If these rules result in the creation of a new &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, it must be navigated with &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, it must be navigated with &lt;a
    href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.
 
   &lt;p&gt;Otherwise, if the hyperlink element is a &lt;a href=&quot;#sidebar0&quot;
@@ -34171,7 +34178,7 @@
    title=attr-base-target&gt;&lt;a href=&quot;#target&quot;&gt;target&lt;/a&gt;&lt;/code&gt; attribute of
    the first such &lt;code&gt;&lt;a href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt; element as the
    browsing context name. If these rules result in the creation of a new &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, it must be navigated with &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;, it must be navigated with &lt;a
    href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.
 
   &lt;p&gt;Otherwise, the browsing context that must be navigated is the same
@@ -35122,7 +35129,7 @@
   &lt;p&gt;The &lt;code title=rel-sidebar&gt;&lt;a href=&quot;#sidebar&quot;&gt;sidebar&lt;/a&gt;&lt;/code&gt;
    keyword indicates that the referenced document, if retrieved, is intended
    to be shown in a &lt;a href=&quot;#secondary0&quot;&gt;secondary browsing context&lt;/a&gt; (if
-   possible), instead of in the current &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   possible), instead of in the current &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;.
 
   &lt;p&gt;A &lt;a href=&quot;#hyperlinks&quot; title=hyperlink&gt;hyperlink element&lt;/a&gt; with with
@@ -37392,7 +37399,7 @@
 
   &lt;h3 id=selection&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;The text selection APIs&lt;/h3&gt;
 
-  &lt;p&gt;Every &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; has &lt;dfn id=a-selection
+  &lt;p&gt;Every &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; has &lt;dfn id=a-selection
    title=&quot;the selection&quot;&gt;a selection&lt;/dfn&gt;. The selection can be empty, and
    the selection can have more than one range (a disjointed selection). The
    user should be able to change the selection. User agents are not required
@@ -37402,7 +37409,7 @@
    selections with multiple ranges.)
 
   &lt;p&gt;This one selection must be shared by all the content of the browsing
-   context (though not by nested &lt;a href=&quot;#browsing0&quot; title=&quot;browsing
+   context (though not by nested &lt;a href=&quot;#browsing1&quot; title=&quot;browsing
    context&quot;&gt;browsing contexts&lt;/a&gt;), including any editing hosts in the
    document. (Editing hosts that are not inside a document cannot have a
    selection.)
@@ -37421,7 +37428,7 @@
    the position of the selection altogether.
 
   &lt;p&gt;Mostly for historical reasons, in addition to the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#a-selection&quot; title=&quot;the
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#a-selection&quot; title=&quot;the
    selection&quot;&gt;selection&lt;/a&gt;, each &lt;code&gt;textarea&lt;/code&gt; and
    &lt;code&gt;input&lt;/code&gt; element has an independent selection. These are the
    &lt;dfn id=text-field title=&quot;text field selection&quot;&gt;text field
@@ -37455,7 +37462,7 @@
    &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface must return the
    &lt;code&gt;&lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt;&lt;/code&gt; object representing &lt;a
    href=&quot;#a-selection&quot;&gt;the selection&lt;/a&gt; of that &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=&quot;#browsing1&quot;&gt;browsing
    context&lt;/a&gt;.
 
   &lt;p&gt;For historical reasons, the &lt;dfn id=getselection0
@@ -39708,7 +39715,7 @@
      empty string, and the &lt;code title=dom-MessageEvent-source&gt;&lt;a
      href=&quot;#source2&quot;&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be set to the &lt;code&gt;&lt;a
      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
-     href=&quot;#default3&quot;&gt;default view&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+     href=&quot;#default3&quot;&gt;default view&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
      context&lt;/a&gt; for which the &lt;code&gt;Document&lt;/code&gt; object with which the
      script is associated is the &lt;a href=&quot;#active&quot;&gt;active
      document&lt;/a&gt;&lt;!--, if there is one, or null
@@ -50005,7 +50012,7 @@
    href=&quot;#timeouthandler&quot;&gt;TimeoutHandler&lt;/a&gt;&lt;/code&gt; object. That string must
    be parsed using the specified &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; (defaulting to
    ECMAScript if the third argument is omitted) and executed in the scope of
-   the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; associated with the &lt;code&gt;&lt;a
+   the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; associated with the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the &lt;code
    title=setTimeout&gt;&lt;a href=&quot;#settimeout&quot;&gt;setTimeout()&lt;/a&gt;&lt;/code&gt; method was
    invoked.

Modified: source
===================================================================
--- source	2008-05-13 01:09:45 UTC (rev 1596)
+++ source	2008-05-13 01:17:16 UTC (rev 1597)
@@ -28914,147 +28914,10 @@
 
   &lt;p&gt;Otherwise, the user agent must cause the current &lt;span&gt;browsing
   context&lt;/span&gt; to &lt;span&gt;traverse the history&lt;/span&gt; to the specified
-  entry, as described below. The &lt;dfn&gt;specified entry&lt;/dfn&gt; is the one
-  whose index equals the index of the &lt;span&gt;current entry&lt;/span&gt; plus
-  &lt;var title=&quot;&quot;&gt;delta&lt;/var&gt;.&lt;/p&gt;
+  entry. The &lt;i&gt;specified entry&lt;/i&gt; is the one whose index equals the
+  index of the &lt;span&gt;current entry&lt;/span&gt; plus &lt;var
+  title=&quot;&quot;&gt;delta&lt;/var&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When a user agent is required to &lt;dfn&gt;traverse the
-  history&lt;/dfn&gt;&lt;!-- (traversal) --&gt; to a specified entry, the user
-  agent must act as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If there is no longer a &lt;code&gt;Document&lt;/code&gt; object for the
-   entry in question, the user agent must &lt;span&gt;navigate&lt;/span&gt; the
-   browsing context to the location for that entry to perform an
-   &lt;span&gt;entry update&lt;/span&gt; of that entry, and abort these steps. The
-   &quot;&lt;span&gt;navigate&lt;/span&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
-   algorithm to complete the traversal, at which point there
-   &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;Document&lt;/code&gt; object and so this step gets
-   skipped.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If appropriate, update the &lt;span&gt;current entry&lt;/span&gt; in the
-   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt; object's
-   &lt;code&gt;History&lt;/code&gt; object to reflect any state that the user
-   agent wishes to persist.&lt;/p&gt;
-   &lt;p class=&quot;example&quot;&gt;For example, some user agents might want to
-   persist the scroll position, or the values of form controls.&lt;/p&gt;
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;specified entry&lt;/span&gt; has a different
-   &lt;code&gt;Document&lt;/code&gt; object than the &lt;span&gt;current entry&lt;/span&gt;
-   then the user agent must run the following substeps:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li class=&quot;big-issue&quot;&gt;freeze any timers, intervals,
-     XMLHttpRequests, database transactions, etc&lt;/li&gt;
-
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the browsing context's default view's &lt;code&gt;Window&lt;/code&gt;
-     object to the &lt;span&gt;active document&lt;/span&gt;'s
-     &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;list of added
-     properties&lt;/span&gt;.&lt;/li&gt;
-
-     &lt;li&gt;If the browsing context is a &lt;span&gt;top-level browsing
-     context&lt;/span&gt; (and not an &lt;span&gt;auxiliary browsing
-     context&lt;/span&gt;), and the &lt;span&gt;origin&lt;/span&gt; of the
-     &lt;code&gt;Document&lt;/code&gt; of the &lt;span&gt;specified entry&lt;/span&gt; is not
-     the same as the &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt;
-     of the &lt;span&gt;current entry&lt;/span&gt;, then the following
-     sub-sub-steps must be run:
-
-      &lt;ol&gt;
-
-       &lt;li&gt;The current &lt;span&gt;browsing context name&lt;/span&gt; must be
-       stored with all the entries in the history that are associated
-       with &lt;code&gt;Document&lt;/code&gt; objects with the same
-       &lt;span&gt;origin&lt;/span&gt; as the &lt;span&gt;active document&lt;/span&gt;
-       &lt;em&gt;and&lt;/em&gt; that are contiguous with the &lt;span&gt;current
-       entry&lt;/span&gt;.&lt;/li&gt;
-
-       &lt;li id=&quot;resetBCName&quot;&gt;The browsing context's &lt;span&gt;browsing
-       context name&lt;/span&gt; must be unset.&lt;/li&gt;
-
-      &lt;/ol&gt;
-
-     &lt;/li&gt;
-
-     &lt;li id=&quot;appcache-history-2&quot;&gt;The user agent must make the
-     &lt;span&gt;specified entry&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt; object the
-     &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
-     context&lt;/span&gt;. (If it is a &lt;span&gt;top-level browsing
-     context&lt;/span&gt;, this might &lt;a
-     href=&quot;#appcache-history-1&quot;&gt;change&lt;/a&gt; which &lt;span&gt;application
-     cache&lt;/span&gt; it is associated with.)&lt;/li&gt;
-
-     &lt;li&gt;If the &lt;span&gt;specified entry&lt;/span&gt; has a &lt;span&gt;browsing
-     context name&lt;/span&gt; stored with it, then the following
-     sub-sub-steps must be run:
-
-      &lt;ol&gt;
-
-       &lt;li&gt;The browsing context's &lt;span&gt;browsing context name&lt;/span&gt;
-       must be set to the name stored with the specified entry.&lt;/li&gt;
-
-       &lt;li&gt;Any &lt;span&gt;browsing context name&lt;/span&gt; stored with the
-       entries in the history that are associated with
-       &lt;code&gt;Document&lt;/code&gt; objects with the same &lt;span&gt;origin&lt;/span&gt;
-       as the new &lt;span&gt;active document&lt;/span&gt;, and that are
-       contiguous with the specified entry, must be cleared.&lt;/li&gt;
-
-      &lt;/ol&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the &lt;span&gt;active document&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt;'s
-     &lt;span&gt;list of added properties&lt;/span&gt; to browsing context's
-     default view's &lt;code&gt;Window&lt;/code&gt; object.&lt;/li&gt;
-
-     &lt;li class=&quot;big-issue&quot;&gt;unfreeze any timers, intervals,
-     XMLHttpRequests, database transactions, etc&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If there are any entries with state objects between the
-   &lt;span&gt;last activated entry&lt;/span&gt; for the &lt;code&gt;Document&lt;/code&gt; of
-   the &lt;span&gt;specified entry&lt;/span&gt; and the &lt;span&gt;specified
-   entry&lt;/span&gt; itself (not inclusive), then the user agent must
-   iterate through every entry between that &lt;span&gt;last activated
-   entry&lt;/span&gt; and the &lt;span&gt;specified entry&lt;/span&gt;, starting with
-   the entry closest to the &lt;span&gt;current entry&lt;/span&gt;, and ending
-   with the one closest to the &lt;span&gt;specified entry&lt;/span&gt;. For each
-   entry, if the entry is a state object, the user agent must
-   &lt;span&gt;activate the state object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;specified entry&lt;/span&gt; is a state object or the
-   first entry for a &lt;code&gt;Document&lt;/code&gt;, the user agent must &lt;span
-   title=&quot;activate the state object&quot;&gt;activate that
-   entry&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;specified entry&lt;/span&gt; has a URI that differs
-   from the &lt;span&gt;current entry&lt;/span&gt;'s only by its fragment
-   identifier, and the two share the same &lt;code&gt;Document&lt;/code&gt;
-   object, then &lt;span&gt;fire a simple event&lt;/span&gt; with the name
-   &lt;code&gt;hashchanged&lt;/code&gt; at &lt;span&gt;the &lt;code&gt;body&lt;/code&gt;
-   element&lt;/span&gt;, and, if the new URI has a fragment identifier,
-   &lt;span&gt;scroll to the fragment identifier&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;User agents may also update other aspects of the document
-   view when the location changes in this way, for instance the scroll
-   position, values of form fields, etc.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;current entry&lt;/span&gt; is now the &lt;span&gt;specified
-   entry&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;how does the changing of the global attributes
-  affect .watch() when seen from other Windows?&lt;/p&gt;
-
   &lt;p&gt;When the user navigates through a &lt;span&gt;browsing context&lt;/span&gt;,
   e.g. using a browser's back and forward buttons, the user agent must
   translate this action into the equivalent invocations of the &lt;code
@@ -29376,8 +29239,9 @@
 
 
 
+  &lt;h3&gt;Browsing the Web&lt;/h3&gt;
 
-  &lt;h3&gt;Navigating across documents&lt;/h3&gt;
+  &lt;h4&gt;Navigating across documents&lt;/h4&gt;
 
   &lt;p&gt;Certain actions cause the &lt;span&gt;browsing context&lt;/span&gt; to
   &lt;dfn&gt;navigate&lt;/dfn&gt;. For example, &lt;span title=&quot;following
@@ -29955,8 +29819,147 @@
   href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt;&lt;/p&gt;
 
 
+  &lt;h4&gt;History traversal&lt;/h4&gt;
 
+  &lt;p&gt;When a user agent is required to &lt;dfn&gt;traverse the history&lt;/dfn&gt;
+  to a &lt;i&gt;specified entry&lt;/i&gt;, the user agent must act as
+  follows:&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If there is no longer a &lt;code&gt;Document&lt;/code&gt; object for the
+   entry in question, the user agent must &lt;span&gt;navigate&lt;/span&gt; the
+   browsing context to the location for that entry to perform an
+   &lt;span&gt;entry update&lt;/span&gt; of that entry, and abort these steps. The
+   &quot;&lt;span&gt;navigate&lt;/span&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
+   algorithm to complete the traversal, at which point there
+   &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;Document&lt;/code&gt; object and so this step gets
+   skipped.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If appropriate, update the &lt;span&gt;current entry&lt;/span&gt; in the
+   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt; object's
+   &lt;code&gt;History&lt;/code&gt; object to reflect any state that the user
+   agent wishes to persist.&lt;/p&gt;
+   &lt;p class=&quot;example&quot;&gt;For example, some user agents might want to
+   persist the scroll position, or the values of form controls.&lt;/p&gt;
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a different
+   &lt;code&gt;Document&lt;/code&gt; object than the &lt;span&gt;current entry&lt;/span&gt;
+   then the user agent must run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li class=&quot;big-issue&quot;&gt;freeze any timers, intervals,
+     XMLHttpRequests, database transactions, etc&lt;/li&gt;
+
+     &lt;li&gt;The user agent must move any properties that have been added
+     to the browsing context's default view's &lt;code&gt;Window&lt;/code&gt;
+     object to the &lt;span&gt;active document&lt;/span&gt;'s
+     &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;list of added
+     properties&lt;/span&gt;.&lt;/li&gt;
+
+     &lt;li&gt;If the browsing context is a &lt;span&gt;top-level browsing
+     context&lt;/span&gt; (and not an &lt;span&gt;auxiliary browsing
+     context&lt;/span&gt;), and the &lt;span&gt;origin&lt;/span&gt; of the
+     &lt;code&gt;Document&lt;/code&gt; of the &lt;i&gt;specified entry&lt;/i&gt; is not
+     the same as the &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt;
+     of the &lt;span&gt;current entry&lt;/span&gt;, then the following
+     sub-sub-steps must be run:
+
+      &lt;ol&gt;
+
+       &lt;li&gt;The current &lt;span&gt;browsing context name&lt;/span&gt; must be
+       stored with all the entries in the history that are associated
+       with &lt;code&gt;Document&lt;/code&gt; objects with the same
+       &lt;span&gt;origin&lt;/span&gt; as the &lt;span&gt;active document&lt;/span&gt;
+       &lt;em&gt;and&lt;/em&gt; that are contiguous with the &lt;span&gt;current
+       entry&lt;/span&gt;.&lt;/li&gt;
+
+       &lt;li id=&quot;resetBCName&quot;&gt;The browsing context's &lt;span&gt;browsing
+       context name&lt;/span&gt; must be unset.&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/li&gt;
+
+     &lt;li id=&quot;appcache-history-2&quot;&gt;The user agent must make the
+     &lt;i&gt;specified entry&lt;/i&gt;'s &lt;code&gt;Document&lt;/code&gt; object the
+     &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
+     context&lt;/span&gt;. (If it is a &lt;span&gt;top-level browsing
+     context&lt;/span&gt;, this might &lt;a
+     href=&quot;#appcache-history-1&quot;&gt;change&lt;/a&gt; which &lt;span&gt;application
+     cache&lt;/span&gt; it is associated with.)&lt;/li&gt;
+
+     &lt;li&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a &lt;span&gt;browsing
+     context name&lt;/span&gt; stored with it, then the following
+     sub-sub-steps must be run:
+
+      &lt;ol&gt;
+
+       &lt;li&gt;The browsing context's &lt;span&gt;browsing context name&lt;/span&gt;
+       must be set to the name stored with the specified entry.&lt;/li&gt;
+
+       &lt;li&gt;Any &lt;span&gt;browsing context name&lt;/span&gt; stored with the
+       entries in the history that are associated with
+       &lt;code&gt;Document&lt;/code&gt; objects with the same &lt;span&gt;origin&lt;/span&gt;
+       as the new &lt;span&gt;active document&lt;/span&gt;, and that are
+       contiguous with the specified entry, must be cleared.&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;The user agent must move any properties that have been added
+     to the &lt;span&gt;active document&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt;'s
+     &lt;span&gt;list of added properties&lt;/span&gt; to browsing context's
+     default view's &lt;code&gt;Window&lt;/code&gt; object.&lt;/li&gt;
+
+     &lt;li class=&quot;big-issue&quot;&gt;unfreeze any timers, intervals,
+     XMLHttpRequests, database transactions, etc&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If there are any entries with state objects between the
+   &lt;span&gt;last activated entry&lt;/span&gt; for the &lt;code&gt;Document&lt;/code&gt; of
+   the &lt;i&gt;specified entry&lt;/i&gt; and the &lt;i&gt;specified entry&lt;/i&gt; itself
+   (not inclusive), then the user agent must iterate through every
+   entry between that &lt;span&gt;last activated entry&lt;/span&gt; and the
+   &lt;i&gt;specified entry&lt;/i&gt;, starting with the entry closest to the
+   &lt;span&gt;current entry&lt;/span&gt;, and ending with the one closest to the
+   &lt;i&gt;specified entry&lt;/i&gt;. For each entry, if the entry is a state
+   object, the user agent must &lt;span&gt;activate the state
+   object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; is a state object or the
+   first entry for a &lt;code&gt;Document&lt;/code&gt;, the user agent must &lt;span
+   title=&quot;activate the state object&quot;&gt;activate that
+   entry&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; has a URI that differs
+   from the &lt;span&gt;current entry&lt;/span&gt;'s only by its fragment
+   identifier, and the two share the same &lt;code&gt;Document&lt;/code&gt;
+   object, then &lt;span&gt;fire a simple event&lt;/span&gt; with the name
+   &lt;code&gt;hashchanged&lt;/code&gt; at &lt;span&gt;the &lt;code&gt;body&lt;/code&gt;
+   element&lt;/span&gt;, and, if the new URI has a fragment identifier,
+   &lt;span&gt;scroll to the fragment identifier&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;User agents may also update other aspects of the document
+   view when the location changes in this way, for instance the scroll
+   position, values of form fields, etc.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;span&gt;current entry&lt;/span&gt; is now the &lt;i&gt;specified
+   entry&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;how does the changing of the global attributes
+  affect .watch() when seen from other Windows?&lt;/p&gt;
+
+
+
   &lt;h3 id=&quot;content-type-sniffing&quot;&gt;Determining the type of a new resource in a browsing context&lt;/h3&gt;
 
   &lt;p class=&quot;warning&quot;&gt;It is imperative that the rules in this section


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008494.html">[html5] r1595 - /
</A></li>
	<LI>Next message: <A HREF="008496.html">[html5] r1598 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8495">[ date ]</a>
              <a href="thread.html#8495">[ thread ]</a>
              <a href="subject.html#8495">[ subject ]</a>
              <a href="author.html#8495">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
