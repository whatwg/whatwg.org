<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1172 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1172%20-%20/&In-Reply-To=%3C20080125043801.55127139DDD%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008079.html">
   <LINK REL="Next"  HREF="008081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1172 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1172%20-%20/&In-Reply-To=%3C20080125043801.55127139DDD%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1172 - /">whatwg at whatwg.org
       </A><BR>
    <I>Thu Jan 24 20:38:01 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008079.html">[html5] r1171 - /
</A></li>
        <LI>Next message: <A HREF="008081.html">[html5] r1173 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8080">[ date ]</a>
              <a href="thread.html#8080">[ thread ]</a>
              <a href="subject.html#8080">[ subject ]</a>
              <a href="author.html#8080">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-01-24 20:37:57 -0800 (Thu, 24 Jan 2008)
New Revision: 1172

Modified:
   index
   source
Log:
[gow] (2) Various changes to how to stroke lines, zero-length line segments, line joins, and line caps.

Modified: index
===================================================================
--- index	2008-01-24 02:34:04 UTC (rev 1171)
+++ index	2008-01-25 04:37:57 UTC (rev 1172)
@@ -24,7 +24,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 24 January 2008&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 25 January 2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
     href=&quot;<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&quot;&gt;Join the working group's
@@ -16721,8 +16721,8 @@
 
   &lt;p&gt;The &lt;dfn id=linewidth
    title=dom-context-2d-lineWidth&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt; attribute
-   gives the default width of lines, in coordinate space units. On setting,
-   zero and negative values must be ignored, leaving the value unchanged.
+   gives the width of lines, in coordinate space units. On setting, zero and
+   negative values must be ignored, leaving the value unchanged.
 
   &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineWidth&gt;&lt;a
    href=&quot;#linewidth&quot;&gt;lineWidth&lt;/a&gt;&lt;/code&gt; attribute must initially have the
@@ -16735,11 +16735,11 @@
    &lt;code&gt;square&lt;/code&gt;. The &lt;code&gt;butt&lt;/code&gt; value means that the end of
    each line is a flat edge perpendicular to the direction of the line. The
    &lt;code&gt;round&lt;/code&gt; value means that a semi-circle with the diameter equal
-   to the width of the line is then added on to the end of the line. The
-   &lt;code&gt;square&lt;/code&gt; value means that at the end of each line is a
-   rectangle with the length of the line width and the width of half the line
-   width, placed flat against the edge perpendicular to the direction of the
-   line. On setting, any other value than the literal strings
+   to the width of the line must then be added on to the end of the line. The
+   &lt;code&gt;square&lt;/code&gt; value means that a rectangle with the length of the
+   line width and the width of half the line width, placed flat against the
+   edge perpendicular to the direction of the line, must be added at the end
+   of each line. On setting, any other value than the literal strings
    &lt;code&gt;butt&lt;/code&gt;, &lt;code&gt;round&lt;/code&gt;, and &lt;code&gt;square&lt;/code&gt; must be
    ignored, leaving the value unchanged.
 
@@ -16750,38 +16750,51 @@
   &lt;p&gt;The &lt;dfn id=linejoin
    title=dom-context-2d-lineJoin&gt;&lt;code&gt;lineJoin&lt;/code&gt;&lt;/dfn&gt; attribute
    defines the type of corners that that UAs will place where two lines meet.
-   The three valid values are &lt;code&gt;round&lt;/code&gt;, &lt;code&gt;bevel&lt;/code&gt;, and
+   The three valid values are &lt;code&gt;bevel&lt;/code&gt;, &lt;code&gt;round&lt;/code&gt;, and
    &lt;code&gt;miter&lt;/code&gt;.
 
-  &lt;p&gt;On setting, any other value than the literal strings &lt;code&gt;round&lt;/code&gt;,
-   &lt;code&gt;bevel&lt;/code&gt; and &lt;code&gt;miter&lt;/code&gt; must be ignored, leaving the
+  &lt;p&gt;On setting, any other value than the literal strings &lt;code&gt;bevel&lt;/code&gt;,
+   &lt;code&gt;round&lt;/code&gt;, and &lt;code&gt;miter&lt;/code&gt; must be ignored, leaving the
    value unchanged.
 
   &lt;p&gt;When the context is created, the &lt;code title=dom-context-2d-lineJoin&gt;&lt;a
    href=&quot;#linejoin&quot;&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute must initially have the
    value &lt;code&gt;miter&lt;/code&gt;.
 
-  &lt;p&gt;The &lt;code&gt;round&lt;/code&gt; value means that a filled arc connecting the
+  &lt;p&gt;A join exists at any point in a subpath shared by two consecutive pairs
+   of lines. When a subpath is closed, then a join also exists at its first
+   point (equivalent to its last point) connecting the first and last lines
+   in the subpath. In addition to the point where the join occurs, two
+   additional points are relevant to each join: the corners found half the
+   line width away from the join point, perpendicular to the two lines
+   joining at the join point.
+
+  &lt;p&gt;A filled triangle connecting these two opposite corners with a straight
+   line, with the third point of the triangle being the point of the join
+   itself (where the lines touch on the inside of the join), must be rendered
+   at all joins. The &lt;code title=dom-context-2d-lineJoin&gt;&lt;a
+   href=&quot;#linejoin&quot;&gt;lineJoin&lt;/a&gt;&lt;/code&gt; attribute controls whether anything
+   else is rendered. The three aforementioned values have the following
+   meanings:
+
+  &lt;p&gt;The &lt;code&gt;bevel&lt;/code&gt; value means that this is all that is rendered at
+   joins.
+
+  &lt;p&gt;The &lt;code&gt;round&lt;/code&gt; value means that a filled arc connecting the two
    corners on the outside of the join, with the diameter equal to the line
-   width, and the origin at the point where the inside edges of the lines
-   touch, must be rendered at joins. The &lt;code&gt;bevel&lt;/code&gt; value means that
-   a filled triangle connecting those two corners with a straight line, the
-   third point of the triangle being the point where the lines touch on the
-   inside of the join, must be rendered at joins. The &lt;code&gt;miter&lt;/code&gt;
-   value means that a filled four- or five-sided polygon must be placed at
-   the join, with two of the lines being the perpendicular edges of the
-   joining lines, and the other two being continuations of the outside edges
-   of the two joining lines, as long as required to intersect without going
-   over the miter limit.
+   width and the origin at the point of the join, must be rendered at joins.
 
+  &lt;p&gt;The &lt;code&gt;miter&lt;/code&gt; value means that a filled four-sided polygon must
+   be rendered at the join, with two of the lines being the perpendicular
+   edges of the joining lines, and the other two being continuations of the
+   outside edges of the two joining lines, as long as required to intersect
+   without going over the miter limit.
+
   &lt;p&gt;The miter length is the distance from the point where the lines touch on
    the inside of the join to the intersection of the line edges on the
    outside of the join. The miter limit ratio is the maximum allowed ratio of
    the miter length to the line width. If the miter limit would be exceeded,
-   then a fifth line must be added to the polygon, connecting the two outside
-   lines, such that the distance from the inside point of the join to the
-   point in the middle of this fifth line is the maximum allowed value for
-   the miter length.
+   the four-sided polygon is not rendered.
 
   &lt;p&gt;The miter limit ratio can be explicitly set using the &lt;dfn id=miterlimit
    title=dom-context-2d-miterLimit&gt;&lt;code&gt;miterLimit&lt;/code&gt;&lt;/dfn&gt; attribute.
@@ -17153,6 +17166,7 @@
    title=dom-context-2d-strokeStyle&gt;&lt;a
    href=&quot;#strokestyle&quot;&gt;strokeStyle&lt;/a&gt;&lt;/code&gt;, &lt;code
    title=dom-context-2d-lineWidth&gt;&lt;a href=&quot;#linewidth&quot;&gt;lineWidth&lt;/a&gt;&lt;/code&gt;,
+   &lt;code title=dom-context-2d-lineCap&gt;&lt;a href=&quot;#linecap&quot;&gt;lineCap&lt;/a&gt;&lt;/code&gt;,
    &lt;code title=dom-context-2d-lineJoin&gt;&lt;a
    href=&quot;#linejoin&quot;&gt;lineJoin&lt;/a&gt;&lt;/code&gt;, and (if appropriate) &lt;code
    title=dom-context-2d-miterLimit&gt;&lt;a
@@ -17167,6 +17181,9 @@
    title=dom-context-2d-globalCompositeOperation&gt;global composition
    operators&lt;/a&gt;.
 
+  &lt;p&gt;Zero length line segments must be pruned before stroking a path. Empty
+   subpaths must be ignored.
+
   &lt;p class=note&gt;The transformation is applied to the path when it is drawn,
    not when the path is constructed. Thus, a single path can be constructed
    and then drawn according to different transformations without recreating

Modified: source
===================================================================
--- source	2008-01-24 02:34:04 UTC (rev 1171)
+++ source	2008-01-25 04:37:57 UTC (rev 1172)
@@ -14274,9 +14274,9 @@
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-lineWidth&quot;&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt;
-  attribute gives the default width of lines, in coordinate space
-  units. On setting, zero and negative values must be ignored, leaving
-  the value unchanged.&lt;/p&gt;
+  attribute gives the width of lines, in coordinate space units. On
+  setting, zero and negative values must be ignored, leaving the value
+  unchanged.&lt;/p&gt;
 
   &lt;p&gt;When the context is created, the &lt;code
   title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt; attribute must
@@ -14290,56 +14290,73 @@
   value means that the end of each line is a flat edge perpendicular
   to the direction of the line. The &lt;code&gt;round&lt;/code&gt; value means
   that a semi-circle with the diameter equal to the width of the line
-  is then added on to the end of the line. The &lt;code&gt;square&lt;/code&gt;
-  value means that at the end of each line is a rectangle with the
-  length of the line width and the width of half the line width,
-  placed flat against the edge perpendicular to the direction of the
-  line. On setting, any other value than the literal strings
-  &lt;code&gt;butt&lt;/code&gt;, &lt;code&gt;round&lt;/code&gt;, and &lt;code&gt;square&lt;/code&gt; must
-  be ignored, leaving the value unchanged.&lt;/p&gt;
+  must then be added on to the end of the line. The
+  &lt;code&gt;square&lt;/code&gt; value means that a rectangle with the length of
+  the line width and the width of half the line width, placed flat
+  against the edge perpendicular to the direction of the line, must be
+  added at the end of each line. On setting, any other value than the
+  literal strings &lt;code&gt;butt&lt;/code&gt;, &lt;code&gt;round&lt;/code&gt;, and
+  &lt;code&gt;square&lt;/code&gt; must be ignored, leaving the value
+  unchanged.&lt;/p&gt;
 
   &lt;p&gt;When the context is created, the &lt;code
   title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;butt&lt;/code&gt;.&lt;/p&gt;
 
+
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-lineJoin&quot;&gt;&lt;code&gt;lineJoin&lt;/code&gt;&lt;/dfn&gt;
   attribute defines the type of corners that that UAs will place where
-  two lines meet. The three valid values are &lt;code&gt;round&lt;/code&gt;,
-  &lt;code&gt;bevel&lt;/code&gt;, and &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
+  two lines meet. The three valid values are &lt;code&gt;bevel&lt;/code&gt;,
+  &lt;code&gt;round&lt;/code&gt;, and &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;On setting, any other value than the literal strings
-  &lt;code&gt;round&lt;/code&gt;, &lt;code&gt;bevel&lt;/code&gt; and &lt;code&gt;miter&lt;/code&gt; must
+  &lt;code&gt;bevel&lt;/code&gt;, &lt;code&gt;round&lt;/code&gt;, and &lt;code&gt;miter&lt;/code&gt; must
   be ignored, leaving the value unchanged.&lt;/p&gt;
 
   &lt;p&gt;When the context is created, the &lt;code
   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;miter&lt;/code&gt;.&lt;/p&gt;
 
+  &lt;p&gt;A join exists at any point in a subpath shared by two consecutive
+  pairs of lines. When a subpath is closed, then a join also exists at
+  its first point (equivalent to its last point) connecting the first
+  and last lines in the subpath. In addition to the point where the
+  join occurs, two additional points are relevant to each join: the
+  corners found half the line width away from the join point,
+  perpendicular to the two lines joining at the join point.&lt;/p&gt;
+
+  &lt;p&gt;A filled triangle connecting these two opposite corners with a
+  straight line, with the third point of the triangle being the point
+  of the join itself (where the lines touch on the inside of the
+  join), must be rendered at all joins. The &lt;code
+  title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt; attribute controls
+  whether anything else is rendered. The three aforementioned values
+  have the following meanings:&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;bevel&lt;/code&gt; value means that this is all that is
+  rendered at joins.&lt;/p&gt;
+
   &lt;p&gt;The &lt;code&gt;round&lt;/code&gt; value means that a filled arc connecting
-  the corners on the outside of the join, with the diameter equal to
-  the line width, and the origin at the point where the inside edges
-  of the lines touch, must be rendered at joins. The
-  &lt;code&gt;bevel&lt;/code&gt; value means that a filled triangle connecting
-  those two corners with a straight line, the third point of the
-  triangle being the point where the lines touch on the inside of the
-  join, must be rendered at joins. The &lt;code&gt;miter&lt;/code&gt; value means
-  that a filled four- or five-sided polygon must be placed at the
-  join, with two of the lines being the perpendicular edges of the
-  joining lines, and the other two being continuations of the outside
-  edges of the two joining lines, as long as required to intersect
-  without going over the miter limit.&lt;/p&gt;
+  the two corners on the outside of the join, with the diameter equal
+  to the line width and the origin at the point of the join, must be
+  rendered at joins.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code&gt;miter&lt;/code&gt; value means that a filled four-sided
+  polygon must be rendered at the join, with two of the lines being
+  the perpendicular edges of the joining lines, and the other two
+  being continuations of the outside edges of the two joining lines,
+  as long as required to intersect without going over the miter
+  limit.&lt;/p&gt;
+
   &lt;p&gt;The miter length is the distance from the point where the lines
   touch on the inside of the join to the intersection of the line
   edges on the outside of the join. The miter limit ratio is the
   maximum allowed ratio of the miter length to the line width. If the
-  miter limit would be exceeded, then a fifth line must be added to
-  the polygon, connecting the two outside lines, such that the
-  distance from the inside point of the join to the point in the
-  middle of this fifth line is the maximum allowed value for the miter
-  length.&lt;/p&gt;
+  miter limit would be exceeded, the four-sided polygon is not
+  rendered.&lt;/p&gt;
 
+
   &lt;p&gt;The miter limit ratio can be explicitly set using the &lt;dfn
   title=&quot;dom-context-2d-miterLimit&quot;&gt;&lt;code&gt;miterLimit&lt;/code&gt;&lt;/dfn&gt;
   attribute. On setting, zero and negative values must be ignored,
@@ -14349,6 +14366,7 @@
   title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attribute must
   initially have the value &lt;code&gt;10.0&lt;/code&gt;.&lt;/p&gt;
 
+
   &lt;!-- XXX this section doesn't say what these attributes return or
   what they do on setting. not a big deal; it's pretty obvious. but if
   anyone complains, we'll have to add it --&gt;
@@ -14731,6 +14749,7 @@
   must stroke each subpath of the current path in turn, using the
   &lt;code title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt;, &lt;code
   title=&quot;dom-context-2d-lineWidth&quot;&gt;lineWidth&lt;/code&gt;, &lt;code
+  title=&quot;dom-context-2d-lineCap&quot;&gt;lineCap&lt;/code&gt;, &lt;code
   title=&quot;dom-context-2d-lineJoin&quot;&gt;lineJoin&lt;/code&gt;, and (if
   appropriate) &lt;code
   title=&quot;dom-context-2d-miterLimit&quot;&gt;miterLimit&lt;/code&gt; attributes.&lt;/p&gt;
@@ -14743,6 +14762,9 @@
   &lt;span title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;global
   composition operators&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;Zero length line segments must be pruned before stroking a
+  path. Empty subpaths must be ignored.&lt;/p&gt;
+
   &lt;p class=&quot;note&quot;&gt;The transformation is applied to the path when it is
   drawn, not when the path is constructed. Thus, a single path can be
   constructed and then drawn according to different transformations


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008079.html">[html5] r1171 - /
</A></li>
	<LI>Next message: <A HREF="008081.html">[html5] r1173 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8080">[ date ]</a>
              <a href="thread.html#8080">[ thread ]</a>
              <a href="subject.html#8080">[ subject ]</a>
              <a href="author.html#8080">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
