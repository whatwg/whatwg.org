<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2057 - [] (0) Define the Content-Language pragma,	since apparently ~1% of sites use it  [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2057%20-%20%5B%5D%20%280%29%20Define%20the%20Content-Language%20pragma%2C%0A%09since%20apparently%20%7E1%25%20of%20sites%20use%20it%20%20%5B...%5D&In-Reply-To=%3C20080812100204.D887338DEA5%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008942.html">
   <LINK REL="Next"  HREF="008944.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2057 - [] (0) Define the Content-Language pragma,	since apparently ~1% of sites use it  [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2057%20-%20%5B%5D%20%280%29%20Define%20the%20Content-Language%20pragma%2C%0A%09since%20apparently%20%7E1%25%20of%20sites%20use%20it%20%20%5B...%5D&In-Reply-To=%3C20080812100204.D887338DEA5%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2057 - [] (0) Define the Content-Language pragma,	since apparently ~1% of sites use it  [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Aug 12 03:02:04 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008942.html">[html5] r2056 - [] (0) How to determine the language of the node if	the language code isn't reco [...]
</A></li>
        <LI>Next message: <A HREF="008944.html">[html5] r2058 - [e] (0) Make it clear that xml:lang is namespaced.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8943">[ date ]</a>
              <a href="thread.html#8943">[ thread ]</a>
              <a href="subject.html#8943">[ subject ]</a>
              <a href="author.html#8943">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-08-12 03:02:04 -0700 (Tue, 12 Aug 2008)
New Revision: 2057

Modified:
   index
   source
Log:
[] (0) Define the Content-Language pragma, since apparently ~1% of sites use it in some way or another.

Modified: index
===================================================================
--- index	2008-08-12 09:32:29 UTC (rev 2056)
+++ index	2008-08-12 10:02:04 UTC (rev 2057)
@@ -7966,15 +7966,15 @@
   &lt;!-- technically this is redundant
   with the XML spec --&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;To determine the language of a node, user agents must look at the
    nearest ancestor element (including the element itself if the node is an
    element) that has an &lt;code title=attr-xml-lang&gt;&lt;a
    href=&quot;#xmllang&quot;&gt;xml:lang&lt;/a&gt;&lt;/code&gt; attribute set or is an &lt;a
    href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt; and has a
    &lt;code title=attr-lang&gt;&lt;a href=&quot;#lang&quot;&gt;lang&lt;/a&gt;&lt;/code&gt; attribute set. That
-   attribute specifies the language of the node. If that attribute's value is
-   not a recognised language code, then it must be treated as an unknown
-   language (as if the value was the empty string).
+   attribute specifies the language of the node.
 
   &lt;p&gt;If both the &lt;code title=attr-xml-lang&gt;&lt;a
    href=&quot;#xmllang&quot;&gt;xml:lang&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code
@@ -7986,11 +7986,20 @@
    the element's language.
 
   &lt;p&gt;If no explicit language is given for the &lt;a href=&quot;#root-element&quot;&gt;root
-   element&lt;/a&gt;, then language information from a higher-level protocol (such
+   element&lt;/a&gt;, but there is a &lt;a href=&quot;#document-wide&quot;&gt;document-wide default
+   language&lt;/a&gt; set, then that is the language of the node.
+
+  &lt;p&gt;If there is no &lt;a href=&quot;#document-wide&quot;&gt;document-wide default
+   language&lt;/a&gt;, then language information from a higher-level protocol (such
    as HTTP), if any, must be used as the final fallback language. In the
    absence of any language information, the default value is unknown (the
    empty string).
 
+  &lt;p&gt;If the resulting value is not a recognised language code, then it must
+   be treated as an unknown language (as if the value was the empty string).
+
+  &lt;hr&gt;
+
   &lt;p&gt;User agents may use the element's language to determine proper
    processing or rendering (e.g. in the selection of appropriate fonts or
    pronunciations, or for dictionary selection). &lt;!--User
@@ -8873,7 +8882,7 @@
      tokeniser had emitted a start tag token with the tag name &quot;pre&quot;, then
      set the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;'s &lt;a
      href=&quot;#tokenization0&quot;&gt;tokenization&lt;/a&gt; stage's &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;PLAINTEXT&lt;/em&gt;.
+     href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;PLAINTEXT&lt;/em&gt;.
 
    &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
@@ -10200,7 +10209,8 @@
    keywords defined for this attribute. The states given in the first cell of
    the rows with keywords give the states to which those keywords
    map.&lt;!-- Some of the keywords are non-conforming, as
-  noted in the last column.--&gt;
+  noted in the last column.--&gt;&lt;/p&gt;
+  &lt;!-- things that are neither conforming nor do anything are commented out --&gt;
 
   &lt;table&gt;
    &lt;thead&gt;
@@ -10209,12 +10219,13 @@
 
      &lt;th&gt;Keywords &lt;!--     &lt;th&gt;Notes--&gt;
 
-   &lt;tbody&gt;&lt;!-- things that are neither conforming nor do anything are commented out
+   &lt;tbody&gt;
     &lt;tr&gt;
-     &lt;td&gt;&lt;span title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content-Language&lt;/span&gt;
+     &lt;td&gt;&lt;a href=&quot;#content3&quot;
+      title=attr-meta-http-equiv-content-language&gt;Content Language&lt;/a&gt;
+
      &lt;td&gt;&lt;code title=&quot;&quot;&gt;Content-Language&lt;/code&gt;
-     &lt;td&gt;Non-conforming [ XXX but maybe we should make this an alternative to &lt;html lang=&quot;&quot;&gt;? ]
---&gt;
+      &lt;!--     &lt;td&gt;Non-conforming --&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;#encoding&quot; title=attr-meta-http-equiv-content-type&gt;Encoding
@@ -10291,6 +10302,62 @@
    algorithm appropriate for that state, as described in the following list:
 
   &lt;dl&gt;
+   &lt;dt&gt;&lt;dfn id=content3 title=attr-meta-http-equiv-content-language&gt;Content
+    language&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;This pragma sets the &lt;dfn id=document-wide&gt;document-wide default
+     language&lt;/dfn&gt;. Until the pragma is successfully processed, there is no
+     &lt;a href=&quot;#document-wide&quot;&gt;document-wide default language&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li&gt;
+      &lt;p&gt;If another &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element in the &lt;a
+       href=&quot;#content3&quot; title=attr-meta-http-equiv-content-language&gt;Content
+       Language state&lt;/a&gt; has already been successfully processed (i.e. when
+       it was inserted the user agent processed it and reached the last step
+       of this list of steps), then abort these steps.
+
+     &lt;li&gt;
+      &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element has no &lt;code
+       title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+       attribute, or if that attribute's value is the empty string, then
+       abort these steps.
+
+     &lt;li&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the value of the element's &lt;code
+       title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+       attribute.
+
+     &lt;li&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; point at the first character of
+       &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.
+
+     &lt;li&gt;
+      &lt;p&gt;&lt;a href=&quot;#skip-whitespace&quot;&gt;Skip whitespace&lt;/a&gt;.
+
+     &lt;li&gt;
+      &lt;p&gt;&lt;a href=&quot;#collect&quot; title=&quot;collect a sequence of characters&quot;&gt;Collect
+       a sequence of characters&lt;/a&gt; that are neither &lt;a href=&quot;#space&quot;
+       title=&quot;space character&quot;&gt;space characters&lt;/a&gt; nor a U+002C COMMA
+       character (&quot;,&quot;).
+
+     &lt;li&gt;
+      &lt;p&gt;Let the &lt;a href=&quot;#document-wide&quot;&gt;document-wide default language&lt;/a&gt;
+       be the string that resulted from the previous step.
+    &lt;/ol&gt;
+
+    &lt;p&gt;For &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements in the &lt;a
+     href=&quot;#content3&quot; title=attr-meta-http-equiv-content-language&gt;Content
+     Language state&lt;/a&gt;, the &lt;code title=attr-meta-content&gt;&lt;a
+     href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute must have a value
+     consisting of a valid RFC 3066 language code. &lt;a
+     href=&quot;#refsRFC3066&quot;&gt;[RFC3066]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p class=note&gt;This pragma not exactly equivalent to the HTTP
+     &lt;code&gt;Content-Language&lt;/code&gt; header, for instance it only supports one
+     language. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;&lt;/p&gt;
+
    &lt;dt&gt;&lt;dfn id=encoding title=attr-meta-http-equiv-content-type&gt;Encoding
     declaration state&lt;/dfn&gt;
 
@@ -36432,7 +36499,7 @@
    title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, create an &lt;a href=&quot;#html-0&quot;&gt;HTML
    parser&lt;/a&gt;, associate it with the document, act as if the tokeniser had
    emitted a start tag token with the tag name &quot;pre&quot;, set the &lt;a
-   href=&quot;#tokenization0&quot;&gt;tokenization&lt;/a&gt; stage's &lt;a href=&quot;#content3&quot;&gt;content
+   href=&quot;#tokenization0&quot;&gt;tokenization&lt;/a&gt; stage's &lt;a href=&quot;#content4&quot;&gt;content
    model flag&lt;/a&gt; to &lt;i&gt;PLAINTEXT&lt;/i&gt;, and begin to pass the stream of
    characters in the plain text document to that tokeniser.
 
@@ -46624,7 +46691,7 @@
    to another state.
 
   &lt;p&gt;The exact behavior of certain states depends on a &lt;dfn
-   id=content3&gt;content model flag&lt;/dfn&gt; that is set after certain tokens are
+   id=content4&gt;content model flag&lt;/dfn&gt; that is set after certain tokens are
    emitted. The flag has several states: &lt;i title=&quot;&quot;&gt;PCDATA&lt;/i&gt;, &lt;i
    title=&quot;&quot;&gt;RCDATA&lt;/i&gt;, &lt;i title=&quot;&quot;&gt;CDATA&lt;/i&gt;, and &lt;i title=&quot;&quot;&gt;PLAINTEXT&lt;/i&gt;.
    Initially it must be in the PCDATA state. In the RCDATA and CDATA states,
@@ -46648,7 +46715,7 @@
 
   &lt;p&gt;When a token is emitted, it must immediately be handled by the &lt;a
    href=&quot;#tree-construction0&quot;&gt;tree construction&lt;/a&gt; stage. The tree
-   construction stage can affect the state of the &lt;a href=&quot;#content3&quot;&gt;content
+   construction stage can affect the state of the &lt;a href=&quot;#content4&quot;&gt;content
    model flag&lt;/a&gt;, and can insert additional characters into the stream. (For
    example, the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element can result
    in scripts executing and using the &lt;a href=&quot;#dynamic3&quot;&gt;dynamic markup
@@ -46659,7 +46726,7 @@
    flag&quot;&gt;acknowledged&lt;/dfn&gt; when it is processed by the tree construction
    stage, that is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;.
 
-  &lt;p&gt;When an end tag token is emitted, the &lt;a href=&quot;#content3&quot;&gt;content model
+  &lt;p&gt;When an end tag token is emitted, the &lt;a href=&quot;#content4&quot;&gt;content model
    flag&lt;/a&gt; must be switched to the PCDATA state.
 
   &lt;p&gt;When an end tag token is emitted with attributes, that is a &lt;a
@@ -46690,7 +46757,7 @@
   &lt;dl class=switch&gt;
    &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to one of
+   &lt;dd&gt;When the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to one of
     the PCDATA or RCDATA states and the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt; is
     false: switch to the &lt;a href=&quot;#character6&quot;&gt;character reference data
     state&lt;/a&gt;.
@@ -46700,7 +46767,7 @@
    &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either the
+    &lt;p&gt;If the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to either the
      RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
      flag&lt;/a&gt; is false, and there are at least three characters before this
      one in the input stream, and the last four characters in the input
@@ -46713,10 +46780,10 @@
 
    &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)
 
-   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
+   &lt;dd&gt;When the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to the
     PCDATA state: switch to the &lt;a href=&quot;#tag-open0&quot;&gt;tag open state&lt;/a&gt;.
 
-   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
+   &lt;dd&gt;When the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to either
     the RCDATA state or the CDATA state and the &lt;a href=&quot;#escape&quot;&gt;escape
     flag&lt;/a&gt; is false: switch to the &lt;a href=&quot;#tag-open0&quot;&gt;tag open state&lt;/a&gt;.
 
@@ -46725,7 +46792,7 @@
    &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either the
+    &lt;p&gt;If the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to either the
      RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
      flag&lt;/a&gt; is true, and the last three characters in the input stream
      including this one are U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E
@@ -46752,7 +46819,7 @@
   &lt;h5 id=character1&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;&lt;dfn
    id=character6&gt;Character reference data state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+  &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content4&quot;&gt;content model
    flag&lt;/a&gt; is set to the CDATA state.)&lt;/em&gt;
 
   &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;, with no
@@ -46767,11 +46834,11 @@
   &lt;h5 id=tag-open&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;&lt;dfn id=tag-open0&gt;Tag
    open state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content3&quot;&gt;content
+  &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content4&quot;&gt;content
    model flag&lt;/a&gt;.
 
   &lt;dl&gt;
-   &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+   &lt;dt&gt;If the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
     or CDATA states
 
    &lt;dd&gt;
@@ -46781,7 +46848,7 @@
      and reconsume the current input character in the &lt;a
      href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
-   &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the PCDATA
+   &lt;dt&gt;If the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to the PCDATA
     state
 
    &lt;dd&gt;
@@ -46834,10 +46901,10 @@
   &lt;h5 id=close&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;&lt;dfn id=close4&gt;Close tag
    open state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+  &lt;p&gt;If the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
    or CDATA states but no start tag token has ever been emitted by this
    instance of the tokeniser (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), or, if
-   the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA or
+   the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA or
    CDATA states and the next few characters do not match the tag name of the
    last start tag token emitted (compared in an &lt;span&gt;ASCII case
    insensitive&lt;/span&gt; manner), or if they do but they are not immediately
@@ -46864,7 +46931,7 @@
    character token, and switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;
    to process the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.
 
-  &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to
+  &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; is set to
    the PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that tag
    name, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
@@ -47346,7 +47413,7 @@
   &lt;h5 id=bogus&gt;&lt;span class=secno&gt;8.2.4.16. &lt;/span&gt;&lt;dfn id=bogus1&gt;Bogus
    comment state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content4&quot;&gt;content model
    flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;
 
   &lt;p&gt;Consume every character up to and including the first U+003E
@@ -47365,7 +47432,7 @@
   &lt;h5 id=markup&gt;&lt;span class=secno&gt;8.2.4.17. &lt;/span&gt;&lt;dfn id=markup0&gt;Markup
    declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content4&quot;&gt;content model
    flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;
 
   &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-) characters,
@@ -47385,7 +47452,7 @@
    (the five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
    character before and after), then consume those characters and switch to
    the &lt;a href=&quot;#cdata2&quot;&gt;CDATA section state&lt;/a&gt; (which is unrelated to the
-   &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state).
+   &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt;'s CDATA state).
 
   &lt;p&gt;Otherwise, this is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Switch to the &lt;a
    href=&quot;#bogus1&quot;&gt;bogus comment state&lt;/a&gt;. The next character that is
@@ -47995,9 +48062,9 @@
   &lt;h5 id=cdata0&gt;&lt;span class=secno&gt;8.2.4.36. &lt;/span&gt;&lt;dfn id=cdata2&gt;CDATA
    section state&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content4&quot;&gt;content model
    flag&lt;/a&gt; is set to the PCDATA state, and is unrelated to the &lt;a
-   href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;
+   href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;
 
   &lt;p&gt;Consume every character up to the next occurrence of the three character
    sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE BRACKET U+003E
@@ -48710,10 +48777,10 @@
    &lt;li&gt;
     &lt;p&gt;If the algorithm that was invoked is the &lt;a href=&quot;#generic&quot;&gt;generic
      CDATA element parsing algorithm&lt;/a&gt;, switch the tokeniser's &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the CDATA state; otherwise
+     href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the CDATA state; otherwise
      the algorithm invoked was the &lt;a href=&quot;#generic0&quot;&gt;generic RCDATA element
      parsing algorithm&lt;/a&gt;, switch the tokeniser's &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the RCDATA state.
+     href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the RCDATA state.
 
    &lt;li&gt;
     &lt;p&gt;Then, collect all the character tokens that the tokeniser returns
@@ -48726,7 +48793,7 @@
      all those tokens' characters, to the new element node.
 
    &lt;li&gt;
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.
 
    &lt;li&gt;
@@ -49358,7 +49425,7 @@
      script will execute in-line, instead of blowing the document away, as
      would happen in most other cases.&lt;/p&gt;
 
-    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
+    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to
      the CDATA state.&lt;/p&gt;
 
     &lt;p&gt;Then, collect all the character tokens that the tokeniser returns
@@ -49370,7 +49437,7 @@
      href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element node whose contents is the
      concatenation of all those tokens' characters.&lt;/p&gt;
 
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is not an end tag token with the tag name &quot;script&quot;,
@@ -49941,13 +50008,13 @@
 
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the PLAINTEXT
+    &lt;p&gt;Switch the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the PLAINTEXT
      state.&lt;/p&gt;
 
     &lt;p class=note&gt;Once a start tag with the tag name &quot;plaintext&quot; has been
      seen, that will be the last token ever seen other than character tokens
      (and the end-of-file token), because there is no way to switch the &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; out of the PLAINTEXT state.&lt;/p&gt;
+     href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; out of the PLAINTEXT state.&lt;/p&gt;
    &lt;/dd&gt;
    &lt;!-- end tags for non-phrasing flow content elements --&gt;
    &lt;!-- the normal ones --&gt;
@@ -50576,7 +50643,7 @@
      &lt;code&gt;form&lt;/code&gt; element pointed to by the &lt;a
      href=&quot;#form-element&quot;&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt; element pointer&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
+    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to
      the RCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is a U+000A LINE FEED (LF) character token, then
@@ -50591,7 +50658,7 @@
      single &lt;code&gt;Text&lt;/code&gt; node, whose contents is the concatenation of
      all those tokens' characters, to the new element node.&lt;/p&gt;
 
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is an end tag token with the tag name &quot;textarea&quot;,
@@ -52504,14 +52571,14 @@
    &lt;li&gt;
     &lt;p&gt;Set the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;'s &lt;a
      href=&quot;#tokenization0&quot;&gt;tokenization&lt;/a&gt; stage's &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; according to the &lt;var
+     href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; according to the &lt;var
      title=&quot;&quot;&gt;context&lt;/var&gt; element, as follows:&lt;/p&gt;
 
     &lt;dl class=switch&gt;
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; or
       &lt;code&gt;textarea&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the RCDATA
+     &lt;dd&gt;Set the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the RCDATA
       state.
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
@@ -52519,23 +52586,23 @@
       href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;noembed&lt;/code&gt;, or
       &lt;code&gt;noframes&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the CDATA
+     &lt;dd&gt;Set the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the CDATA
       state.
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element
 
      &lt;dd&gt;If the &lt;a href=&quot;#scripting3&quot;&gt;scripting flag&lt;/a&gt; is enabled, set the
-      &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the CDATA state.
-      Otherwise, set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the
+      &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the CDATA state.
+      Otherwise, set the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the
       PCDATA state.
 
      &lt;dt&gt;If it is a &lt;code&gt;plaintext&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to PLAINTEXT.
+     &lt;dd&gt;Set the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to PLAINTEXT.
 
      &lt;dt&gt;Otherwise
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the PCDATA
+     &lt;dd&gt;Set the &lt;a href=&quot;#content4&quot;&gt;content model flag&lt;/a&gt; to the PCDATA
       state.
     &lt;/dl&gt;
 

Modified: source
===================================================================
--- source	2008-08-12 09:32:29 UTC (rev 2056)
+++ source	2008-08-12 10:02:04 UTC (rev 2057)
@@ -5814,15 +5814,15 @@
   &lt;span&gt;HTML documents&lt;/span&gt;.&lt;/p&gt; &lt;!-- technically this is redundant
   with the XML spec --&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;To determine the language of a node, user agents must look at the
   nearest ancestor element (including the element itself if the node
   is an element) that has an &lt;code
   title=&quot;attr-xml-lang&quot;&gt;xml:lang&lt;/code&gt; attribute set or is an &lt;span
   title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; and has a &lt;code
   title=&quot;attr-lang&quot;&gt;lang&lt;/code&gt; attribute set. That attribute
-  specifies the language of the node. If that attribute's value is not
-  a recognised language code, then it must be treated as an unknown
-  language (as if the value was the empty string).&lt;/p&gt;
+  specifies the language of the node.&lt;/p&gt;
 
   &lt;p&gt;If both the &lt;code title=&quot;attr-xml-lang&quot;&gt;xml:lang&lt;/code&gt; attribute
   and the &lt;code title=&quot;attr-lang&quot;&gt;lang&lt;/code&gt; attribute are set on an
@@ -5833,11 +5833,21 @@
   element's language.&lt;/p&gt;
 
   &lt;p&gt;If no explicit language is given for the &lt;span&gt;root
-  element&lt;/span&gt;, then language information from a higher-level
-  protocol (such as HTTP), if any, must be used as the final
-  fallback language. In the absence of any language information, the
-  default value is unknown (the empty string).&lt;/p&gt;
+  element&lt;/span&gt;, but there is a &lt;span&gt;document-wide default
+  language&lt;/span&gt; set, then that is the language of the node.&lt;/p&gt;
 
+  &lt;p&gt;If there is no &lt;span&gt;document-wide default language&lt;/span&gt;, then
+  language information from a higher-level protocol (such as HTTP), if
+  any, must be used as the final fallback language. In the absence of
+  any language information, the default value is unknown (the empty
+  string).&lt;/p&gt;
+
+  &lt;p&gt;If the resulting value is not a recognised language code, then it
+  must be treated as an unknown language (as if the value was the
+  empty string).&lt;/p&gt;
+
+  &lt;hr&gt;
+
   &lt;p&gt;User agents may use the element's language to determine proper
   processing or rendering (e.g. in the selection of appropriate
   fonts or pronunciations, or for dictionary selection). &lt;!--User
@@ -8169,6 +8179,7 @@
   those keywords map.&lt;!-- Some of the keywords are non-conforming, as
   noted in the last column.--&gt;&lt;/p&gt;
 
+&lt;!-- things that are neither conforming nor do anything are commented out --&gt;
   &lt;table&gt;
    &lt;thead&gt;
     &lt;tr&gt;
@@ -8176,12 +8187,10 @@
      &lt;th&gt;Keywords
 &lt;!--     &lt;th&gt;Notes--&gt;
    &lt;tbody&gt;
-&lt;!-- things that are neither conforming nor do anything are commented out
     &lt;tr&gt;
-     &lt;td&gt;&lt;span title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content-Language&lt;/span&gt;
+     &lt;td&gt;&lt;span title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content Language&lt;/span&gt;
      &lt;td&gt;&lt;code title=&quot;&quot;&gt;Content-Language&lt;/code&gt;
-     &lt;td&gt;Non-conforming [ XXX but maybe we should make this an alternative to &lt;html lang=&quot;&quot;&gt;? ]
---&gt;
+&lt;!--     &lt;td&gt;Non-conforming --&gt;
     &lt;tr&gt;
      &lt;td&gt;&lt;span title=&quot;attr-meta-http-equiv-content-type&quot;&gt;Encoding declaration&lt;/span&gt;
      &lt;td&gt;&lt;code title=&quot;&quot;&gt;Content-Type&lt;/code&gt;
@@ -8254,6 +8263,58 @@
 
   &lt;dl&gt;
 
+   &lt;dt&gt;&lt;dfn title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content language&lt;/dfn&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;This pragma sets the &lt;dfn&gt;document-wide default
+    language&lt;/dfn&gt;. Until the pragma is successfully processed, there
+    is no &lt;span&gt;document-wide default language&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If another &lt;code&gt;meta&lt;/code&gt; element in the &lt;span
+     title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content Language
+     state&lt;/span&gt; has already been successfully processed (i.e. when
+     it was inserted the user agent processed it and reached the last
+     step of this list of steps), then abort these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;code&gt;meta&lt;/code&gt; element has no &lt;code
+     title=&quot;attr-meta-content&quot;&gt;content&lt;/code&gt; attribute, or if that
+     attribute's value is the empty string, then abort these
+     steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the value of the
+     element's &lt;code title=&quot;attr-meta-content&quot;&gt;content&lt;/code&gt;
+     attribute.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; point at the first
+     character of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip whitespace&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span title=&quot;collect a sequence of characters&quot;&gt;Collect a
+     sequence of characters&lt;/span&gt; that are neither &lt;span title=&quot;space
+     character&quot;&gt;space characters&lt;/span&gt; nor a U+002C COMMA character
+     (&quot;,&quot;).&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let the &lt;span&gt;document-wide default language&lt;/span&gt; be the
+     string that resulted from the previous step.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+    &lt;p&gt;For &lt;code&gt;meta&lt;/code&gt; elements in the &lt;span
+    title=&quot;attr-meta-http-equiv-content-language&quot;&gt;Content Language
+    state&lt;/span&gt;, the &lt;code title=&quot;attr-meta-content&quot;&gt;content&lt;/code&gt;
+    attribute must have a value consisting of a valid RFC 3066
+    language code. &lt;a href=&quot;#refsRFC3066&quot;&gt;[RFC3066]&lt;/a&gt;&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This pragma not exactly equivalent to the HTTP
+    &lt;code&gt;Content-Language&lt;/code&gt; header, for instance it only
+    supports one language. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;&lt;dfn title=&quot;attr-meta-http-equiv-content-type&quot;&gt;Encoding declaration state&lt;/dfn&gt;
 
    &lt;dd&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008942.html">[html5] r2056 - [] (0) How to determine the language of the node if	the language code isn't reco [...]
</A></li>
	<LI>Next message: <A HREF="008944.html">[html5] r2058 - [e] (0) Make it clear that xml:lang is namespaced.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8943">[ date ]</a>
              <a href="thread.html#8943">[ thread ]</a>
              <a href="subject.html#8943">[ subject ]</a>
              <a href="author.html#8943">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
