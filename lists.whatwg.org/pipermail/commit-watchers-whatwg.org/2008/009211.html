<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2326 - [e] (0) Reorganise the video section (should be no	normative changes here)
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2326%20-%20%5Be%5D%20%280%29%20Reorganise%20the%20video%20section%20%28should%20be%20no%0A%09normative%20changes%20here%29&In-Reply-To=%3C20081013205319.6DD6738EDB2%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009210.html">
   <LINK REL="Next"  HREF="009212.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2326 - [e] (0) Reorganise the video section (should be no	normative changes here)</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2326%20-%20%5Be%5D%20%280%29%20Reorganise%20the%20video%20section%20%28should%20be%20no%0A%09normative%20changes%20here%29&In-Reply-To=%3C20081013205319.6DD6738EDB2%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2326 - [e] (0) Reorganise the video section (should be no	normative changes here)">whatwg at whatwg.org
       </A><BR>
    <I>Mon Oct 13 13:53:19 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009210.html">[html5] r2325 - [e] (0) more things waiting on WebIDL
</A></li>
        <LI>Next message: <A HREF="009212.html">[html5] r2327 - [e] (0) Change 'actively playing' to 'potentially	playing' to be more accurate.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9211">[ date ]</a>
              <a href="thread.html#9211">[ thread ]</a>
              <a href="subject.html#9211">[ subject ]</a>
              <a href="author.html#9211">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-10-13 13:53:18 -0700 (Mon, 13 Oct 2008)
New Revision: 2326

Modified:
   index
   source
Log:
[e] (0) Reorganise the video section (should be no normative changes here)

Modified: index
===================================================================
--- index	2008-10-13 20:24:52 UTC (rev 2325)
+++ index	2008-10-13 20:53:18 UTC (rev 2326)
@@ -440,15 +440,14 @@
        &lt;li&gt;&lt;a href=#loading-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.4 &lt;/span&gt;Loading the media resource&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#offsets-into-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.5 &lt;/span&gt;Offsets into the media resource&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#the-ready-states&gt;&lt;span class=secno&gt;4.8.10.6 &lt;/span&gt;The ready states&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#playing-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.7 &lt;/span&gt;Playing the media resource&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#seeking&gt;&lt;span class=secno&gt;4.8.10.8 &lt;/span&gt;Seeking&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cue-ranges&gt;&lt;span class=secno&gt;4.8.10.9 &lt;/span&gt;Cue ranges&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#playback-processing-model&gt;&lt;span class=secno&gt;4.8.10.10 &lt;/span&gt;Playback processing model&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#user-interface&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;User interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#time-ranges&gt;&lt;span class=secno&gt;4.8.10.12 &lt;/span&gt;Time ranges&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#byte-ranges&gt;&lt;span class=secno&gt;4.8.10.13 &lt;/span&gt;Byte ranges&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#mediaevents&gt;&lt;span class=secno&gt;4.8.10.14 &lt;/span&gt;Event summary&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-and-privacy-considerations&gt;&lt;span class=secno&gt;4.8.10.15 &lt;/span&gt;Security and privacy considerations&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cue-ranges&gt;&lt;span class=secno&gt;4.8.10.7 &lt;/span&gt;Cue ranges&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#playing-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.8 &lt;/span&gt;Playing the media resource&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#seeking&gt;&lt;span class=secno&gt;4.8.10.9 &lt;/span&gt;Seeking&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#user-interface&gt;&lt;span class=secno&gt;4.8.10.10 &lt;/span&gt;User interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#time-ranges&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;Time ranges&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#byte-ranges&gt;&lt;span class=secno&gt;4.8.10.12 &lt;/span&gt;Byte ranges&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#mediaevents&gt;&lt;span class=secno&gt;4.8.10.13 &lt;/span&gt;Event summary&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#security-and-privacy-considerations&gt;&lt;span class=secno&gt;4.8.10.14 &lt;/span&gt;Security and privacy considerations&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-canvas-element&gt;&lt;span class=secno&gt;4.8.11 &lt;/span&gt;The &lt;code&gt;canvas&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#the-2d-context&gt;&lt;span class=secno&gt;4.8.11.1 &lt;/span&gt;The 2D context&lt;/a&gt;
@@ -1383,10 +1382,17 @@
   if the node is not currently part of the document tree, the root
   element will be an orphaned node.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt; of a &lt;code&gt;Node&lt;/code&gt; (such as an
+  element) is the &lt;code&gt;Document&lt;/code&gt; that the &lt;code&gt;Node&lt;/code&gt;'s
+  &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; DOM attribute returns.&lt;/p&gt;
+
   &lt;p&gt;An element is said to have been &lt;dfn id=insert-an-element-into-a-document title=&quot;insert an element
   into a document&quot;&gt;inserted into a document&lt;/dfn&gt; when its &lt;a href=#root-element&gt;root
   element&lt;/a&gt; changes and is now the document's &lt;a href=#root-element&gt;root
-  element&lt;/a&gt;.&lt;/p&gt;
+  element&lt;/a&gt;. If a &lt;code&gt;Node&lt;/code&gt; is in a &lt;code&gt;Document&lt;/code&gt;
+  then that &lt;code&gt;Document&lt;/code&gt; is always the &lt;code&gt;Node&lt;/code&gt;'s
+  &lt;code&gt;Document&lt;/code&gt;, and the &lt;code&gt;Node&lt;/code&gt;'s &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; DOM attribute thus always returns that
+  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The term &lt;dfn id=tree-order&gt;tree order&lt;/dfn&gt; means a pre-order, depth-first
   traversal of DOM nodes involved (through the &lt;code title=&quot;&quot;&gt;parentNode&lt;/code&gt;/&lt;code title=&quot;&quot;&gt;childNodes&lt;/code&gt;
@@ -17516,8 +17522,57 @@
 
 
 
-  &lt;h5 id=playing-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.7 &lt;/span&gt;Playing the media resource&lt;/h5&gt;
+  &lt;h5 id=cue-ranges&gt;&lt;span class=secno&gt;4.8.10.7 &lt;/span&gt;Cue ranges&lt;/h5&gt;
 
+  &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a set of
+  &lt;dfn id=cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/dfn&gt;. Each cue range is made up
+  of the following information:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;A class name&lt;/dt&gt;
+   &lt;dd&gt;A group of related ranges can be given the same class name so
+   that they can all be removed at the same time.&lt;/dd&gt;
+
+   &lt;dt&gt;An identifier&lt;dt&gt;
+   &lt;/dt&gt;&lt;dd&gt;A string can be assigned to each cue range for identification
+   by script. The string need not be unique and can contain any
+   value.&lt;/dd&gt;
+
+   &lt;dt&gt;A start time&lt;/dt&gt;
+   &lt;dt&gt;An end time&lt;/dt&gt;
+   &lt;dd&gt;The actual time range, using the same timeline as the
+   &lt;a href=#media-resource&gt;media resource&lt;/a&gt; itself.&lt;/dd&gt;
+
+   &lt;dt&gt;A &quot;pause&quot; boolean&lt;/dt&gt;
+   &lt;dd&gt;A flag indicating whether to pause playback on exit.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;enter&quot; callback&lt;/dt&gt;
+   &lt;dd&gt;A callback that is called when the &lt;a href=#current-playback-position&gt;current playback
+   position&lt;/a&gt; enters the range.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;exit&quot; callback&lt;/dt&gt;
+   &lt;dd&gt;A callback that is called when the &lt;a href=#current-playback-position&gt;current playback
+   position&lt;/a&gt; exits the range.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;active&quot; boolean&lt;/dt&gt;
+   &lt;dd&gt;A flag indicating whether the range is active or not.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=dom-media-addcuerange title=dom-media-addCueRange&gt;&lt;code&gt;addCueRange(&lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;start&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;end&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;exitCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
+  add a &lt;a href=#cue-range&gt;cue range&lt;/a&gt; to the &lt;a href=#media-element&gt;media element&lt;/a&gt;, that
+  cue range having the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, the
+  identifier &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, the start time &lt;var title=&quot;&quot;&gt;start&lt;/var&gt; (in seconds), the end time &lt;var title=&quot;&quot;&gt;end&lt;/var&gt; (in seconds), the &quot;pause&quot; boolean with the same
+  value as &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, the &quot;enter&quot; callback &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, the &quot;exit&quot; callback &lt;var title=&quot;&quot;&gt;exitCallback&lt;/var&gt;, and an &quot;active&quot; boolean that is true if
+  the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; is equal to or greater
+  than the start time and less than the end time, and false
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-media-removecueranges title=dom-media-removeCueRanges&gt;&lt;code&gt;removeCueRanges(&lt;var title=&quot;&quot;&gt;className&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
+  remove all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
+  &lt;a href=#media-element&gt;media element&lt;/a&gt; which have the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;.&lt;/p&gt;
+
+
+
+  &lt;h5 id=playing-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.8 &lt;/span&gt;Playing the media resource&lt;/h5&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-media-paused title=dom-media-paused&gt;&lt;code&gt;paused&lt;/code&gt;&lt;/dfn&gt;
   attribute represents whether the &lt;a href=#media-element&gt;media element&lt;/a&gt; is
   paused or not. The attribute must initially be true.&lt;/p&gt;
@@ -17538,6 +17593,10 @@
   &lt;code title=dom-media-currentLoop&gt;&lt;a href=#dom-media-currentloop&gt;currentLoop&lt;/a&gt;&lt;/code&gt; attribute is
   equal to &lt;span&gt;&lt;code title=dom-media-playCount&gt;&lt;a href=#dom-media-playcount&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-media-ended title=dom-media-ended&gt;&lt;code&gt;ended&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return true if the &lt;a href=#media-element&gt;media element&lt;/a&gt; has
+  &lt;a href=#ended-playback&gt;ended playback&lt;/a&gt;, and false otherwise.&lt;/p&gt;
+
   &lt;p&gt;A &lt;a href=#media-element&gt;media element&lt;/a&gt; is said to have &lt;dfn id=stopped-due-to-errors&gt;stopped due to
   errors&lt;/dfn&gt; when the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is
   &lt;code title=dom-media-LOADED_METADATA&gt;&lt;a href=#dom-media-loaded_metadata&gt;LOADED_METADATA&lt;/a&gt;&lt;/code&gt; or
@@ -17557,30 +17616,11 @@
   &lt;a href=#ended-playback&gt;ended playback&lt;/a&gt; and &lt;a href=#paused-for-user-interaction&gt;paused for user
   interaction&lt;/a&gt; at the same time.&lt;/p&gt;
 
-  &lt;p id=media-playback&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; is
-  &lt;a href=#actively-playing&gt;actively playing&lt;/a&gt; and its &lt;span title=dom-ownerDocument&gt;owner &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;&lt;!-- XXX
-  xref --&gt; is an &lt;a href=#active-document&gt;active document&lt;/a&gt;, its &lt;a href=#current-playback-position&gt;current
-  playback position&lt;/a&gt; must increase monotonically at &lt;code title=dom-media-playbackRate&gt;&lt;a href=#dom-media-playbackrate&gt;playbackRate&lt;/a&gt;&lt;/code&gt; units of media
-  time per unit time of wall clock time. If this value is not 1, the
-  user agent may apply pitch adjustments to any audio component of the
-  &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; that is &lt;a href=#actively-playing&gt;actively
+  playing&lt;/a&gt; stops playing because it has &lt;a href=#paused-for-user-interaction&gt;paused for user
+  interaction&lt;/a&gt;, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+  &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-timeupdate&gt;&lt;a href=#event-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
 
-  &lt;p class=note&gt;This specification doesn't define how the user agent
-  achieves the appropriate playback rate &mdash; depending on the
-  protocol and media available, it is plausible that the user agent
-  could negotiate with the server to have the server provide the media
-  data at the appropriate rate, so that (except for the period between
-  when the rate is changed and when the server updates the stream's
-  playback rate) the client doesn't actually have to drop or
-  interpolate any frames.&lt;/p&gt;
-
-  &lt;p&gt;&lt;a href=#media-resource title=&quot;media resource&quot;&gt;Media resources&lt;/a&gt; might be
-  internally scripted or interactive. Thus, a &lt;a href=#media-element&gt;media
-  element&lt;/a&gt; could play in a non-linear fashion. If this happens,
-  the user agent must act as if the algorithm for &lt;a href=#dom-media-seek title=dom-media-seek&gt;seeking&lt;/a&gt; was used whenever the
-  &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; changes in a discontinuous
-  fashion (so that the relevant events fire).&lt;/p&gt;
-
   &lt;p id=fire-waiting-when-waiting&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt;
   that is &lt;a href=#actively-playing&gt;actively playing&lt;/a&gt; stops playing because its
   &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute
@@ -17593,11 +17633,6 @@
   &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called
   &lt;code title=event-waiting&gt;&lt;a href=#event-waiting&gt;waiting&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; that is &lt;a href=#actively-playing&gt;actively
-  playing&lt;/a&gt; stops playing because it has &lt;a href=#paused-for-user-interaction&gt;paused for user
-  interaction&lt;/a&gt;, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
-  &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-timeupdate&gt;&lt;a href=#event-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
-
   &lt;p&gt;When &lt;code title=dom-media-currentLoop&gt;&lt;a href=#dom-media-currentloop&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is
   less than &lt;span&gt;&lt;code title=dom-media-playCount&gt;&lt;a href=#dom-media-playcount&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt; and the
   &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; reaches the &lt;var&gt;&lt;a href=#effective-loop-end&gt;effective
@@ -17649,7 +17684,29 @@
   event&lt;/a&gt; called &lt;code title=event-ratechange&gt;&lt;a href=#event-ratechange&gt;ratechange&lt;/a&gt;&lt;/code&gt;
   at the &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=dom-media-played title=dom-media-played&gt;&lt;code&gt;played&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return a static &lt;a href=#normalized-timeranges-object&gt;normalized
+  &lt;code&gt;TimeRanges&lt;/code&gt; object&lt;/a&gt; that represents the ranges of
+  the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, if any, that the user agent has so
+  far rendered, at the time the attribute is evaluated.&lt;/p&gt;
 
+  &lt;hr&gt;&lt;p id=media-playback&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; is
+  &lt;a href=#actively-playing&gt;actively playing&lt;/a&gt; and its &lt;code&gt;Document&lt;/code&gt; is an
+  &lt;a href=#active-document&gt;active document&lt;/a&gt;, its &lt;a href=#current-playback-position&gt;current playback
+  position&lt;/a&gt; must increase monotonically at &lt;code title=dom-media-playbackRate&gt;&lt;a href=#dom-media-playbackrate&gt;playbackRate&lt;/a&gt;&lt;/code&gt; units of media
+  time per unit time of wall clock time. If this value is not 1, the
+  user agent may apply pitch adjustments to any audio component of the
+  &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p class=note&gt;This specification doesn't define how the user agent
+  achieves the appropriate playback rate &mdash; depending on the
+  protocol and media available, it is plausible that the user agent
+  could negotiate with the server to have the server provide the media
+  data at the appropriate rate, so that (except for the period between
+  when the rate is changed and when the server updates the stream's
+  playback rate) the client doesn't actually have to drop or
+  interpolate any frames.&lt;/p&gt;
+
   &lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-media-play title=dom-media-play&gt;&lt;code&gt;play()&lt;/code&gt;&lt;/dfn&gt;
   method on a &lt;a href=#media-element&gt;media element&lt;/a&gt; is invoked, the user agent
   must run the following steps.&lt;/p&gt;
@@ -17699,7 +17756,7 @@
    called &lt;code title=event-pause&gt;&lt;a href=#event-pause&gt;play&lt;/a&gt;&lt;/code&gt; at the
    element.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;When the &lt;dfn id=dom-media-pause title=dom-media-pause&gt;&lt;code&gt;pause()&lt;/code&gt;&lt;/dfn&gt;
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the &lt;dfn id=dom-media-pause title=dom-media-pause&gt;&lt;code&gt;pause()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute has
@@ -17723,6 +17780,75 @@
    event&lt;/a&gt; called &lt;code title=event-pause&gt;&lt;a href=#event-pause&gt;pause&lt;/a&gt;&lt;/code&gt; at the
    element.&lt;/li&gt;
 
+  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; of a &lt;a href=#media-element&gt;media
+  element&lt;/a&gt; changes (e.g. due to playback or seeking), the user
+  agent must run the following steps. If the &lt;a href=#current-playback-position&gt;current playback
+  position&lt;/a&gt; changes while the steps are running, then the user
+  agent must wait for the steps to complete, and then must immediately
+  rerun the steps. (These steps are thus run as often as possible or
+  needed &mdash; if one iteration takes a long time, this can cause
+  certain ranges to be skipped over as the user agent rushes ahead to
+  &quot;catch up&quot;.)&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; be an ordered list of
+   &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;, initialized to contain
+   all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
+   &lt;a href=#media-element&gt;media element&lt;/a&gt; whose start times are less than or equal
+   to the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; and whose end times
+   are greater than the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, in the
+   order they were added to the element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; be an ordered list of
+   &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;, initialized to contain
+   all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
+   &lt;a href=#media-element&gt;media element&lt;/a&gt; that are not present in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;, in the order they were added to the
+   element.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If none of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in
+   &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; have their &quot;active&quot; boolean set
+   to &quot;false&quot; (inactive) and none of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue
+   ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; have their
+   &quot;active&quot; boolean set to &quot;true&quot; (active), then abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
+   of the current playback position during normal playback, the user
+   agent must then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
+   event&lt;/a&gt; called &lt;code title=event-timeupdate&gt;&lt;a href=#event-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element. (In the
+   other cases, such as explicit seeks, relevant events get fired as
+   part of the overall process of changing the current playback
+   position.)&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
+   of the current playback position during normal playback, and there
+   are &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; that have both their &quot;active&quot; boolean
+   and their &quot;pause&quot; boolean set to &quot;true&quot;, then immediately act as if
+   the element's &lt;code title=dom-media-pause&gt;&lt;a href=#dom-media-pause&gt;pause()&lt;/a&gt;&lt;/code&gt; method
+   had been invoked. &lt;!-- pause() can in theory call load(), but never
+   can it do so as part of this invokation, since we wouldn't be in
+   this algorithm if the media element was empty. So, no need to couch
+   all this in a task. --&gt; (In the other cases, such as explicit
+   seeks, playback is not paused by exiting a cue range, even if that
+   cue range has its &quot;pause&quot; boolean set to &quot;true&quot;.)&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each non-null &quot;exit&quot; callback of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other
+   ranges&lt;/var&gt; that have their &quot;active&quot; boolean set to &quot;true&quot;
+   (active), in list order, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; that invokes the
+   callback, passing the cue range's identifier as the callback's only
+   argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each non-null &quot;enter&quot; callback of the &lt;a href=#cue-range title=&quot;cue
+   range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; that
+   have their &quot;active&quot; boolean set to &quot;false&quot; (inactive), in list
+   order, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; that invokes the callback, passing
+   the cue range's identifier as the callback's only
+   argument.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &quot;active&quot; boolean of all the &lt;a href=#cue-range title=&quot;cue
+   range&quot;&gt;cue ranges&lt;/a&gt; in the &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;
+   list to &quot;true&quot; (active), and the &quot;active&quot; boolean of all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in the &lt;var title=&quot;&quot;&gt;other
+   ranges&lt;/var&gt; list to &quot;false&quot; (inactive).&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;When a &lt;a href=#media-element&gt;media element&lt;/a&gt; is &lt;span&gt;removed from a
   &lt;code&gt;Document&lt;/code&gt;&lt;!-- XXX xref removed --&gt;&lt;/span&gt;, if the
   &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute has a
@@ -17740,26 +17866,16 @@
   has been reached) may the element be &lt;span&gt;garbage
   collected&lt;/span&gt;&lt;!-- XXX xref --&gt;.&lt;/p&gt;
 
-  &lt;p class=note&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-ownerDocument&gt;ownerDocument&lt;/code&gt; stops being an active
-  document, then the playback will &lt;a href=#media-playback&gt;stop&lt;/a&gt;
-  until the document is active again.&lt;/p&gt;
+  &lt;p class=note&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
+  &lt;code&gt;Document&lt;/code&gt; stops being an active document, then the
+  playback will &lt;a href=#media-playback&gt;stop&lt;/a&gt; until the document
+  is active again.&lt;/p&gt;
 
 
-  &lt;p&gt;The &lt;dfn id=dom-media-ended title=dom-media-ended&gt;&lt;code&gt;ended&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return true if the &lt;a href=#media-element&gt;media element&lt;/a&gt; has
-  &lt;a href=#ended-playback&gt;ended playback&lt;/a&gt;, and false otherwise.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-media-played title=dom-media-played&gt;&lt;code&gt;played&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return a static &lt;a href=#normalized-timeranges-object&gt;normalized
-  &lt;code&gt;TimeRanges&lt;/code&gt; object&lt;/a&gt; that represents the ranges of
-  the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, if any, that the user agent has so
-  far rendered, at the time the attribute is evaluated.&lt;/p&gt;
 
+  &lt;h5 id=seeking&gt;&lt;span class=secno&gt;4.8.10.9 &lt;/span&gt;Seeking&lt;/h5&gt;
 
-
-
-  &lt;h5 id=seeking&gt;&lt;span class=secno&gt;4.8.10.8 &lt;/span&gt;Seeking&lt;/h5&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-media-seeking title=dom-media-seeking&gt;&lt;code&gt;seeking&lt;/code&gt;&lt;/dfn&gt;
   attribute must initially have the value false.&lt;/p&gt;
 
@@ -17849,129 +17965,17 @@
   as the time of the first frame plus the &lt;code title=dom-media-duration&gt;&lt;a href=#dom-media-duration&gt;duration&lt;/a&gt;&lt;/code&gt; attribute's value (which
   would equal the time of the last frame).&lt;/p&gt;
 
+  &lt;p&gt;&lt;a href=#media-resource title=&quot;media resource&quot;&gt;Media resources&lt;/a&gt; might be
+  internally scripted or interactive. Thus, a &lt;a href=#media-element&gt;media
+  element&lt;/a&gt; could play in a non-linear fashion. If this happens,
+  the user agent must act as if the algorithm for &lt;a href=#dom-media-seek title=dom-media-seek&gt;seeking&lt;/a&gt; was used whenever the
+  &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; changes in a discontinuous
+  fashion (so that the relevant events fire).&lt;/p&gt;
 
 
-  &lt;h5 id=cue-ranges&gt;&lt;span class=secno&gt;4.8.10.9 &lt;/span&gt;Cue ranges&lt;/h5&gt;
 
-  &lt;p&gt;&lt;a href=#media-element title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a set of
-  &lt;dfn id=cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/dfn&gt;. Each cue range is made up
-  of the following information:&lt;/p&gt;
+  &lt;h5 id=user-interface&gt;&lt;span class=secno&gt;4.8.10.10 &lt;/span&gt;User interface&lt;/h5&gt;
 
-  &lt;dl&gt;&lt;dt&gt;A class name&lt;/dt&gt;
-   &lt;dd&gt;A group of related ranges can be given the same class name so
-   that they can all be removed at the same time.&lt;/dd&gt;
-
-   &lt;dt&gt;An identifier&lt;dt&gt;
-   &lt;/dt&gt;&lt;dd&gt;A string can be assigned to each cue range for identification
-   by script. The string need not be unique and can contain any
-   value.&lt;/dd&gt;
-
-   &lt;dt&gt;A start time&lt;/dt&gt;
-   &lt;dt&gt;An end time&lt;/dt&gt;
-   &lt;dd&gt;The actual time range, using the same timeline as the
-   &lt;a href=#media-resource&gt;media resource&lt;/a&gt; itself.&lt;/dd&gt;
-
-   &lt;dt&gt;A &quot;pause&quot; boolean&lt;/dt&gt;
-   &lt;dd&gt;A flag indicating whether to pause playback on exit.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;enter&quot; callback&lt;/dt&gt;
-   &lt;dd&gt;A callback that is called when the &lt;a href=#current-playback-position&gt;current playback
-   position&lt;/a&gt; enters the range.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;exit&quot; callback&lt;/dt&gt;
-   &lt;dd&gt;A callback that is called when the &lt;a href=#current-playback-position&gt;current playback
-   position&lt;/a&gt; exits the range.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;active&quot; boolean&lt;/dt&gt;
-   &lt;dd&gt;A flag indicating whether the range is active or not.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;The &lt;dfn id=dom-media-addcuerange title=dom-media-addCueRange&gt;&lt;code&gt;addCueRange(&lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;start&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;end&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;exitCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
-  add a &lt;a href=#cue-range&gt;cue range&lt;/a&gt; to the &lt;a href=#media-element&gt;media element&lt;/a&gt;, that
-  cue range having the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, the
-  identifier &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, the start time &lt;var title=&quot;&quot;&gt;start&lt;/var&gt; (in seconds), the end time &lt;var title=&quot;&quot;&gt;end&lt;/var&gt; (in seconds), the &quot;pause&quot; boolean with the same
-  value as &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, the &quot;enter&quot; callback &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, the &quot;exit&quot; callback &lt;var title=&quot;&quot;&gt;exitCallback&lt;/var&gt;, and an &quot;active&quot; boolean that is true if
-  the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; is equal to or greater
-  than the start time and less than the end time, and false
-  otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-media-removecueranges title=dom-media-removeCueRanges&gt;&lt;code&gt;removeCueRanges(&lt;var title=&quot;&quot;&gt;className&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
-  remove all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
-  &lt;a href=#media-element&gt;media element&lt;/a&gt; which have the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;.&lt;/p&gt;
-
-
-  &lt;h5 id=playback-processing-model&gt;&lt;span class=secno&gt;4.8.10.10 &lt;/span&gt;Playback processing model&lt;/h5&gt;
-
-  &lt;p&gt;When the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; of a &lt;a href=#media-element&gt;media
-  element&lt;/a&gt; changes (e.g. due to playback or seeking), the user
-  agent must run the following steps. If the &lt;a href=#current-playback-position&gt;current playback
-  position&lt;/a&gt; changes while the steps are running, then the user
-  agent must wait for the steps to complete, and then must immediately
-  rerun the steps. (These steps are thus run as often as possible or
-  needed &mdash; if one iteration takes a long time, this can cause
-  certain ranges to be skipped over as the user agent rushes ahead to
-  &quot;catch up&quot;.)&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; be an ordered list of
-   &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;, initialized to contain
-   all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
-   &lt;a href=#media-element&gt;media element&lt;/a&gt; whose start times are less than or equal
-   to the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; and whose end times
-   are greater than the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, in the
-   order they were added to the element.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; be an ordered list of
-   &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;, initialized to contain
-   all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; of the
-   &lt;a href=#media-element&gt;media element&lt;/a&gt; that are not present in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;, in the order they were added to the
-   element.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If none of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in
-   &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; have their &quot;active&quot; boolean set
-   to &quot;false&quot; (inactive) and none of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue
-   ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; have their
-   &quot;active&quot; boolean set to &quot;true&quot; (active), then abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
-   of the current playback position during normal playback, the user
-   agent must then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
-   event&lt;/a&gt; called &lt;code title=event-timeupdate&gt;&lt;a href=#event-timeupdate&gt;timeupdate&lt;/a&gt;&lt;/code&gt; at the element. (In the
-   other cases, such as explicit seeks, relevant events get fired as
-   part of the overall process of changing the current playback
-   position.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
-   of the current playback position during normal playback, and there
-   are &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; that have both their &quot;active&quot; boolean
-   and their &quot;pause&quot; boolean set to &quot;true&quot;, then immediately act as if
-   the element's &lt;code title=dom-media-pause&gt;&lt;a href=#dom-media-pause&gt;pause()&lt;/a&gt;&lt;/code&gt; method
-   had been invoked. &lt;!-- pause() can in theory call load(), but never
-   can it do so as part of this invokation, since we wouldn't be in
-   this algorithm if the media element was empty. So, no need to couch
-   all this in a task. --&gt; (In the other cases, such as explicit
-   seeks, playback is not paused by exiting a cue range, even if that
-   cue range has its &quot;pause&quot; boolean set to &quot;true&quot;.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each non-null &quot;exit&quot; callback of the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;other
-   ranges&lt;/var&gt; that have their &quot;active&quot; boolean set to &quot;true&quot;
-   (active), in list order, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; that invokes the
-   callback, passing the cue range's identifier as the callback's only
-   argument.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each non-null &quot;enter&quot; callback of the &lt;a href=#cue-range title=&quot;cue
-   range&quot;&gt;cue ranges&lt;/a&gt; in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; that
-   have their &quot;active&quot; boolean set to &quot;false&quot; (inactive), in list
-   order, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; that invokes the callback, passing
-   the cue range's identifier as the callback's only
-   argument.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Set the &quot;active&quot; boolean of all the &lt;a href=#cue-range title=&quot;cue
-   range&quot;&gt;cue ranges&lt;/a&gt; in the &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;
-   list to &quot;true&quot; (active), and the &quot;active&quot; boolean of all the &lt;a href=#cue-range title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt; in the &lt;var title=&quot;&quot;&gt;other
-   ranges&lt;/var&gt; list to &quot;false&quot; (inactive).&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;h5 id=user-interface&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;User interface&lt;/h5&gt;
-
   &lt;p&gt;The &lt;dfn id=attr-media-controls title=attr-media-controls&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt;
   attribute is a &lt;a href=#boolean-attribute&gt;boolean attribute&lt;/a&gt;. If the attribute is
   present, or if the &lt;a href=#media-element&gt;media element&lt;/a&gt; is &lt;a href=#without-script&gt;without
@@ -18039,7 +18043,7 @@
 
 
 
-  &lt;h5 id=time-ranges&gt;&lt;span class=secno&gt;4.8.10.12 &lt;/span&gt;Time ranges&lt;/h5&gt;
+  &lt;h5 id=time-ranges&gt;&lt;span class=secno&gt;4.8.10.11 &lt;/span&gt;Time ranges&lt;/h5&gt;
 
   &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#timeranges&gt;TimeRanges&lt;/a&gt;&lt;/code&gt; interface
   represent a list of ranges (periods) of time.&lt;/p&gt;
@@ -18086,7 +18090,7 @@
 
 
 
-  &lt;h5 id=byte-ranges&gt;&lt;span class=secno&gt;4.8.10.13 &lt;/span&gt;Byte ranges&lt;/h5&gt;
+  &lt;h5 id=byte-ranges&gt;&lt;span class=secno&gt;4.8.10.12 &lt;/span&gt;Byte ranges&lt;/h5&gt;
 
   &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#byteranges&gt;ByteRanges&lt;/a&gt;&lt;/code&gt; interface
   represent a list of ranges of bytes.&lt;/p&gt;
@@ -18132,7 +18136,7 @@
 
 
 
-  &lt;h5 id=mediaevents&gt;&lt;span class=secno&gt;4.8.10.14 &lt;/span&gt;Event summary&lt;/h5&gt;
+  &lt;h5 id=mediaevents&gt;&lt;span class=secno&gt;4.8.10.13 &lt;/span&gt;Event summary&lt;/h5&gt;
 
   &lt;p&gt;The following events fire on &lt;a href=#media-element title=&quot;media element&quot;&gt;media
   elements&lt;/a&gt; as part of the processing model described above:&lt;/p&gt;
@@ -18236,7 +18240,7 @@
      &lt;td&gt;&lt;code&gt;Event&lt;/code&gt;
      &lt;td&gt;Either the &lt;code title=dom-media-volume&gt;&lt;a href=#dom-media-volume&gt;volume&lt;/a&gt;&lt;/code&gt; attribute or the &lt;code title=dom-media-muted&gt;&lt;a href=#dom-media-muted&gt;muted&lt;/a&gt;&lt;/code&gt; attribute has changed. Fired after the relevant attribute's setter has returned.
      &lt;td&gt;
-  &lt;/table&gt;&lt;h5 id=security-and-privacy-considerations&gt;&lt;span class=secno&gt;4.8.10.15 &lt;/span&gt;Security and privacy considerations&lt;/h5&gt;
+  &lt;/table&gt;&lt;h5 id=security-and-privacy-considerations&gt;&lt;span class=secno&gt;4.8.10.14 &lt;/span&gt;Security and privacy considerations&lt;/h5&gt;
 
   &lt;p class=XXX&gt;Talk about making sure interactive media files
   (e.g. SVG) don't have access to the container DOM (XSS potential);
@@ -38980,16 +38984,15 @@
   exactly one range and its &lt;code title=&quot;&quot;&gt;collapsed&lt;/code&gt; attribute
   is itself true. Otherwise it must return false.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-selection-collapse title=dom-selection-collapse&gt;&lt;code&gt;collapse(&lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must raise a
-  &lt;code&gt;WRONG_DOCUMENT_ERR&lt;/code&gt; DOM exception if
-  &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;'s &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; is not
-  the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object with which the
+  &lt;p&gt;The &lt;dfn id=dom-selection-collapse title=dom-selection-collapse&gt;&lt;code&gt;collapse(&lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method must raise a &lt;code&gt;WRONG_DOCUMENT_ERR&lt;/code&gt; DOM exception if
+  &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; is not the
+  &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object with which the
   &lt;code&gt;&lt;a href=#selection-0&gt;Selection&lt;/a&gt;&lt;/code&gt; object is associated. Otherwise it is, and
   the method must remove all the ranges in the &lt;code&gt;&lt;a href=#selection-0&gt;Selection&lt;/a&gt;&lt;/code&gt;
   list, then create a new &lt;code&gt;Range&lt;/code&gt; object, add it to the
-  list, and invoke its &lt;code title=&quot;&quot;&gt;setStart()&lt;/code&gt; and &lt;code title=&quot;&quot;&gt;setEnd()&lt;/code&gt; methods with the &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt; and
-  &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; values as their arguments.&lt;/p&gt;
+  list, and invoke its &lt;code title=&quot;&quot;&gt;setStart()&lt;/code&gt; and &lt;code title=&quot;&quot;&gt;setEnd()&lt;/code&gt; methods with the &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; values as
+  their arguments.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-selection-collapsetostart title=dom-selection-collapseToStart&gt;&lt;code&gt;collapseToStart()&lt;/code&gt;&lt;/dfn&gt;
   method must raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; DOM exception if

Modified: source
===================================================================
--- source	2008-10-13 20:24:52 UTC (rev 2325)
+++ source	2008-10-13 20:53:18 UTC (rev 2326)
@@ -442,10 +442,18 @@
   if the node is not currently part of the document tree, the root
   element will be an orphaned node.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt; of a &lt;code&gt;Node&lt;/code&gt; (such as an
+  element) is the &lt;code&gt;Document&lt;/code&gt; that the &lt;code&gt;Node&lt;/code&gt;'s
+  &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; DOM attribute returns.&lt;/p&gt;
+
   &lt;p&gt;An element is said to have been &lt;dfn title=&quot;insert an element
   into a document&quot;&gt;inserted into a document&lt;/dfn&gt; when its &lt;span&gt;root
   element&lt;/span&gt; changes and is now the document's &lt;span&gt;root
-  element&lt;/span&gt;.&lt;/p&gt;
+  element&lt;/span&gt;. If a &lt;code&gt;Node&lt;/code&gt; is in a &lt;code&gt;Document&lt;/code&gt;
+  then that &lt;code&gt;Document&lt;/code&gt; is always the &lt;code&gt;Node&lt;/code&gt;'s
+  &lt;code&gt;Document&lt;/code&gt;, and the &lt;code&gt;Node&lt;/code&gt;'s &lt;code
+  title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; DOM attribute thus always returns that
+  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The term &lt;dfn&gt;tree order&lt;/dfn&gt; means a pre-order, depth-first
   traversal of DOM nodes involved (through the &lt;code
@@ -18845,6 +18853,70 @@
 
 
 
+  &lt;h5&gt;Cue ranges&lt;/h5&gt;
+
+  &lt;p&gt;&lt;span title=&quot;media element&quot;&gt;Media elements&lt;/span&gt; have a set of
+  &lt;dfn title=&quot;cue range&quot;&gt;cue ranges&lt;/dfn&gt;. Each cue range is made up
+  of the following information:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;A class name&lt;/dt&gt;
+   &lt;dd&gt;A group of related ranges can be given the same class name so
+   that they can all be removed at the same time.&lt;/dd&gt;
+
+   &lt;dt&gt;An identifier&lt;dt&gt;
+   &lt;dd&gt;A string can be assigned to each cue range for identification
+   by script. The string need not be unique and can contain any
+   value.&lt;/dd&gt;
+
+   &lt;dt&gt;A start time&lt;/dt&gt;
+   &lt;dt&gt;An end time&lt;/dt&gt;
+   &lt;dd&gt;The actual time range, using the same timeline as the
+   &lt;span&gt;media resource&lt;/span&gt; itself.&lt;/dd&gt;
+
+   &lt;dt&gt;A &quot;pause&quot; boolean&lt;/dt&gt;
+   &lt;dd&gt;A flag indicating whether to pause playback on exit.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;enter&quot; callback&lt;/dt&gt;
+   &lt;dd&gt;A callback that is called when the &lt;span&gt;current playback
+   position&lt;/span&gt; enters the range.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;exit&quot; callback&lt;/dt&gt;
+   &lt;dd&gt;A callback that is called when the &lt;span&gt;current playback
+   position&lt;/span&gt; exits the range.&lt;/dd&gt;
+
+   &lt;dt&gt;An &quot;active&quot; boolean&lt;/dt&gt;
+   &lt;dd&gt;A flag indicating whether the range is active or not.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-media-addCueRange&quot;&gt;&lt;code&gt;addCueRange(&lt;var
+  title=&quot;&quot;&gt;className&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;start&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;end&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;exitCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
+  add a &lt;span&gt;cue range&lt;/span&gt; to the &lt;span&gt;media element&lt;/span&gt;, that
+  cue range having the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, the
+  identifier &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, the start time &lt;var
+  title=&quot;&quot;&gt;start&lt;/var&gt; (in seconds), the end time &lt;var
+  title=&quot;&quot;&gt;end&lt;/var&gt; (in seconds), the &quot;pause&quot; boolean with the same
+  value as &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, the &quot;enter&quot; callback &lt;var
+  title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, the &quot;exit&quot; callback &lt;var
+  title=&quot;&quot;&gt;exitCallback&lt;/var&gt;, and an &quot;active&quot; boolean that is true if
+  the &lt;span&gt;current playback position&lt;/span&gt; is equal to or greater
+  than the start time and less than the end time, and false
+  otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-media-removeCueRanges&quot;&gt;&lt;code&gt;removeCueRanges(&lt;var
+  title=&quot;&quot;&gt;className&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
+  remove all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
+  &lt;span&gt;media element&lt;/span&gt; which have the class name &lt;var
+  title=&quot;&quot;&gt;className&lt;/var&gt;.&lt;/p&gt;
+
+
+
   &lt;h5&gt;Playing the media resource&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-media-paused&quot;&gt;&lt;code&gt;paused&lt;/code&gt;&lt;/dfn&gt;
@@ -18871,6 +18943,10 @@
   equal to &lt;span&gt;&lt;code
   title=&quot;dom-media-playCount&quot;&gt;playCount&lt;/code&gt;-1&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;dom-media-ended&quot;&gt;&lt;code&gt;ended&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return true if the &lt;span&gt;media element&lt;/span&gt; has
+  &lt;span&gt;ended playback&lt;/span&gt;, and false otherwise.&lt;/p&gt;
+
   &lt;p&gt;A &lt;span&gt;media element&lt;/span&gt; is said to have &lt;dfn&gt;stopped due to
   errors&lt;/dfn&gt; when the element's &lt;code
   title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute is
@@ -18895,33 +18971,12 @@
   &lt;span&gt;ended playback&lt;/span&gt; and &lt;span&gt;paused for user
   interaction&lt;/span&gt; at the same time.&lt;/p&gt;
 
-  &lt;p id=&quot;media-playback&quot;&gt;When a &lt;span&gt;media element&lt;/span&gt; is
-  &lt;span&gt;actively playing&lt;/span&gt; and its &lt;span
-  title=&quot;dom-ownerDocument&quot;&gt;owner &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;&lt;!-- XXX
-  xref --&gt; is an &lt;span&gt;active document&lt;/span&gt;, its &lt;span&gt;current
-  playback position&lt;/span&gt; must increase monotonically at &lt;code
-  title=&quot;dom-media-playbackRate&quot;&gt;playbackRate&lt;/code&gt; units of media
-  time per unit time of wall clock time. If this value is not 1, the
-  user agent may apply pitch adjustments to any audio component of the
-  &lt;span&gt;media resource&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;When a &lt;span&gt;media element&lt;/span&gt; that is &lt;span&gt;actively
+  playing&lt;/span&gt; stops playing because it has &lt;span&gt;paused for user
+  interaction&lt;/span&gt;, the user agent must &lt;span&gt;queue a task&lt;/span&gt; to
+  &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
+  title=&quot;event-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;This specification doesn't define how the user agent
-  achieves the appropriate playback rate &mdash; depending on the
-  protocol and media available, it is plausible that the user agent
-  could negotiate with the server to have the server provide the media
-  data at the appropriate rate, so that (except for the period between
-  when the rate is changed and when the server updates the stream's
-  playback rate) the client doesn't actually have to drop or
-  interpolate any frames.&lt;/p&gt;
-
-  &lt;p&gt;&lt;span title=&quot;media resource&quot;&gt;Media resources&lt;/span&gt; might be
-  internally scripted or interactive. Thus, a &lt;span&gt;media
-  element&lt;/span&gt; could play in a non-linear fashion. If this happens,
-  the user agent must act as if the algorithm for &lt;span
-  title=&quot;dom-media-seek&quot;&gt;seeking&lt;/span&gt; was used whenever the
-  &lt;span&gt;current playback position&lt;/span&gt; changes in a discontinuous
-  fashion (so that the relevant events fire).&lt;/p&gt;
-
   &lt;p id=&quot;fire-waiting-when-waiting&quot;&gt;When a &lt;span&gt;media element&lt;/span&gt;
   that is &lt;span&gt;actively playing&lt;/span&gt; stops playing because its
   &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute
@@ -18936,12 +18991,6 @@
   &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; called
   &lt;code title=&quot;event-waiting&quot;&gt;waiting&lt;/code&gt; at the element.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;span&gt;media element&lt;/span&gt; that is &lt;span&gt;actively
-  playing&lt;/span&gt; stops playing because it has &lt;span&gt;paused for user
-  interaction&lt;/span&gt;, the user agent must &lt;span&gt;queue a task&lt;/span&gt; to
-  &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
-  title=&quot;event-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element.&lt;/p&gt;
-
   &lt;p&gt;When &lt;code title=&quot;dom-media-currentLoop&quot;&gt;currentLoop&lt;/code&gt; is
   less than &lt;span&gt;&lt;code
   title=&quot;dom-media-playCount&quot;&gt;playCount&lt;/code&gt;-1&lt;/span&gt; and the
@@ -19006,9 +19055,34 @@
   event&lt;/span&gt; called &lt;code title=&quot;event-ratechange&quot;&gt;ratechange&lt;/code&gt;
   at the &lt;span&gt;media element&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;dom-media-played&quot;&gt;&lt;code&gt;played&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return a static &lt;span&gt;normalized
+  &lt;code&gt;TimeRanges&lt;/code&gt; object&lt;/span&gt; that represents the ranges of
+  the &lt;span&gt;media resource&lt;/span&gt;, if any, that the user agent has so
+  far rendered, at the time the attribute is evaluated.&lt;/p&gt;
 
   &lt;hr&gt;
 
+  &lt;p id=&quot;media-playback&quot;&gt;When a &lt;span&gt;media element&lt;/span&gt; is
+  &lt;span&gt;actively playing&lt;/span&gt; and its &lt;code&gt;Document&lt;/code&gt; is an
+  &lt;span&gt;active document&lt;/span&gt;, its &lt;span&gt;current playback
+  position&lt;/span&gt; must increase monotonically at &lt;code
+  title=&quot;dom-media-playbackRate&quot;&gt;playbackRate&lt;/code&gt; units of media
+  time per unit time of wall clock time. If this value is not 1, the
+  user agent may apply pitch adjustments to any audio component of the
+  &lt;span&gt;media resource&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;This specification doesn't define how the user agent
+  achieves the appropriate playback rate &mdash; depending on the
+  protocol and media available, it is plausible that the user agent
+  could negotiate with the server to have the server provide the media
+  data at the appropriate rate, so that (except for the period between
+  when the rate is changed and when the server updates the stream's
+  playback rate) the client doesn't actually have to drop or
+  interpolate any frames.&lt;/p&gt;
+
+  &lt;hr&gt;
+
   &lt;p&gt;When the &lt;dfn title=&quot;dom-media-play&quot;&gt;&lt;code&gt;play()&lt;/code&gt;&lt;/dfn&gt;
   method on a &lt;span&gt;media element&lt;/span&gt; is invoked, the user agent
   must run the following steps.&lt;/p&gt;
@@ -19072,6 +19146,7 @@
 
   &lt;/ol&gt;
 
+  &lt;hr&gt;
 
   &lt;p&gt;When the &lt;dfn title=&quot;dom-media-pause&quot;&gt;&lt;code&gt;pause()&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the user agent must run the following steps:&lt;/p&gt;
@@ -19105,8 +19180,86 @@
 
   &lt;/ol&gt;
 
+  &lt;hr&gt;
 
+  &lt;p&gt;When the &lt;span&gt;current playback position&lt;/span&gt; of a &lt;span&gt;media
+  element&lt;/span&gt; changes (e.g. due to playback or seeking), the user
+  agent must run the following steps. If the &lt;span&gt;current playback
+  position&lt;/span&gt; changes while the steps are running, then the user
+  agent must wait for the steps to complete, and then must immediately
+  rerun the steps. (These steps are thus run as often as possible or
+  needed &mdash; if one iteration takes a long time, this can cause
+  certain ranges to be skipped over as the user agent rushes ahead to
+  &quot;catch up&quot;.)&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; be an ordered list of
+   &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt;, initialized to contain
+   all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
+   &lt;span&gt;media element&lt;/span&gt; whose start times are less than or equal
+   to the &lt;span&gt;current playback position&lt;/span&gt; and whose end times
+   are greater than the &lt;span&gt;current playback position&lt;/span&gt;, in the
+   order they were added to the element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; be an ordered list of
+   &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt;, initialized to contain
+   all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
+   &lt;span&gt;media element&lt;/span&gt; that are not present in &lt;var
+   title=&quot;&quot;&gt;current ranges&lt;/var&gt;, in the order they were added to the
+   element.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If none of the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in
+   &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; have their &quot;active&quot; boolean set
+   to &quot;false&quot; (inactive) and none of the &lt;span title=&quot;cue range&quot;&gt;cue
+   ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; have their
+   &quot;active&quot; boolean set to &quot;true&quot; (active), then abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
+   of the current playback position during normal playback, the user
+   agent must then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+   event&lt;/span&gt; called &lt;code
+   title=&quot;event-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element. (In the
+   other cases, such as explicit seeks, relevant events get fired as
+   part of the overall process of changing the current playback
+   position.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
+   of the current playback position during normal playback, and there
+   are &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var
+   title=&quot;&quot;&gt;other ranges&lt;/var&gt; that have both their &quot;active&quot; boolean
+   and their &quot;pause&quot; boolean set to &quot;true&quot;, then immediately act as if
+   the element's &lt;code title=&quot;dom-media-pause&quot;&gt;pause()&lt;/code&gt; method
+   had been invoked. &lt;!-- pause() can in theory call load(), but never
+   can it do so as part of this invokation, since we wouldn't be in
+   this algorithm if the media element was empty. So, no need to couch
+   all this in a task. --&gt; (In the other cases, such as explicit
+   seeks, playback is not paused by exiting a cue range, even if that
+   cue range has its &quot;pause&quot; boolean set to &quot;true&quot;.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each non-null &quot;exit&quot; callback of the &lt;span
+   title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;other
+   ranges&lt;/var&gt; that have their &quot;active&quot; boolean set to &quot;true&quot;
+   (active), in list order, &lt;span&gt;queue a task&lt;/span&gt; that invokes the
+   callback, passing the cue range's identifier as the callback's only
+   argument.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each non-null &quot;enter&quot; callback of the &lt;span title=&quot;cue
+   range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; that
+   have their &quot;active&quot; boolean set to &quot;false&quot; (inactive), in list
+   order, &lt;span&gt;queue a task&lt;/span&gt; that invokes the callback, passing
+   the cue range's identifier as the callback's only
+   argument.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Set the &quot;active&quot; boolean of all the &lt;span title=&quot;cue
+   range&quot;&gt;cue ranges&lt;/span&gt; in the &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;
+   list to &quot;true&quot; (active), and the &quot;active&quot; boolean of all the &lt;span
+   title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in the &lt;var title=&quot;&quot;&gt;other
+   ranges&lt;/var&gt; list to &quot;false&quot; (inactive).&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
   &lt;p&gt;When a &lt;span&gt;media element&lt;/span&gt; is &lt;span&gt;removed from a
   &lt;code&gt;Document&lt;/code&gt;&lt;!-- XXX xref removed --&gt;&lt;/span&gt;, if the
   &lt;span&gt;media element&lt;/span&gt;'s &lt;code
@@ -19126,25 +19279,14 @@
   has been reached) may the element be &lt;span&gt;garbage
   collected&lt;/span&gt;&lt;!-- XXX xref --&gt;.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;If the &lt;span&gt;media element&lt;/span&gt;'s &lt;code
-  title=&quot;dom-ownerDocument&quot;&gt;ownerDocument&lt;/code&gt; stops being an active
-  document, then the playback will &lt;a href=&quot;#media-playback&quot;&gt;stop&lt;/a&gt;
-  until the document is active again.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;If the &lt;span&gt;media element&lt;/span&gt;'s
+  &lt;code&gt;Document&lt;/code&gt; stops being an active document, then the
+  playback will &lt;a href=&quot;#media-playback&quot;&gt;stop&lt;/a&gt; until the document
+  is active again.&lt;/p&gt;
 
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-media-ended&quot;&gt;&lt;code&gt;ended&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return true if the &lt;span&gt;media element&lt;/span&gt; has
-  &lt;span&gt;ended playback&lt;/span&gt;, and false otherwise.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-media-played&quot;&gt;&lt;code&gt;played&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return a static &lt;span&gt;normalized
-  &lt;code&gt;TimeRanges&lt;/code&gt; object&lt;/span&gt; that represents the ranges of
-  the &lt;span&gt;media resource&lt;/span&gt;, if any, that the user agent has so
-  far rendered, at the time the attribute is evaluated.&lt;/p&gt;
 
-
-
-
   &lt;h5&gt;Seeking&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-media-seeking&quot;&gt;&lt;code&gt;seeking&lt;/code&gt;&lt;/dfn&gt;
@@ -19251,153 +19393,16 @@
   title=&quot;dom-media-duration&quot;&gt;duration&lt;/code&gt; attribute's value (which
   would equal the time of the last frame).&lt;/p&gt;
 
+  &lt;p&gt;&lt;span title=&quot;media resource&quot;&gt;Media resources&lt;/span&gt; might be
+  internally scripted or interactive. Thus, a &lt;span&gt;media
+  element&lt;/span&gt; could play in a non-linear fashion. If this happens,
+  the user agent must act as if the algorithm for &lt;span
+  title=&quot;dom-media-seek&quot;&gt;seeking&lt;/span&gt; was used whenever the
+  &lt;span&gt;current playback position&lt;/span&gt; changes in a discontinuous
+  fashion (so that the relevant events fire).&lt;/p&gt;
 
 
-  &lt;h5&gt;Cue ranges&lt;/h5&gt;
 
-  &lt;p&gt;&lt;span title=&quot;media element&quot;&gt;Media elements&lt;/span&gt; have a set of
-  &lt;dfn title=&quot;cue range&quot;&gt;cue ranges&lt;/dfn&gt;. Each cue range is made up
-  of the following information:&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;A class name&lt;/dt&gt;
-   &lt;dd&gt;A group of related ranges can be given the same class name so
-   that they can all be removed at the same time.&lt;/dd&gt;
-
-   &lt;dt&gt;An identifier&lt;dt&gt;
-   &lt;dd&gt;A string can be assigned to each cue range for identification
-   by script. The string need not be unique and can contain any
-   value.&lt;/dd&gt;
-
-   &lt;dt&gt;A start time&lt;/dt&gt;
-   &lt;dt&gt;An end time&lt;/dt&gt;
-   &lt;dd&gt;The actual time range, using the same timeline as the
-   &lt;span&gt;media resource&lt;/span&gt; itself.&lt;/dd&gt;
-
-   &lt;dt&gt;A &quot;pause&quot; boolean&lt;/dt&gt;
-   &lt;dd&gt;A flag indicating whether to pause playback on exit.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;enter&quot; callback&lt;/dt&gt;
-   &lt;dd&gt;A callback that is called when the &lt;span&gt;current playback
-   position&lt;/span&gt; enters the range.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;exit&quot; callback&lt;/dt&gt;
-   &lt;dd&gt;A callback that is called when the &lt;span&gt;current playback
-   position&lt;/span&gt; exits the range.&lt;/dd&gt;
-
-   &lt;dt&gt;An &quot;active&quot; boolean&lt;/dt&gt;
-   &lt;dd&gt;A flag indicating whether the range is active or not.&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-media-addCueRange&quot;&gt;&lt;code&gt;addCueRange(&lt;var
-  title=&quot;&quot;&gt;className&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;start&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;end&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;exitCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
-  add a &lt;span&gt;cue range&lt;/span&gt; to the &lt;span&gt;media element&lt;/span&gt;, that
-  cue range having the class name &lt;var title=&quot;&quot;&gt;className&lt;/var&gt;, the
-  identifier &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;, the start time &lt;var
-  title=&quot;&quot;&gt;start&lt;/var&gt; (in seconds), the end time &lt;var
-  title=&quot;&quot;&gt;end&lt;/var&gt; (in seconds), the &quot;pause&quot; boolean with the same
-  value as &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, the &quot;enter&quot; callback &lt;var
-  title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, the &quot;exit&quot; callback &lt;var
-  title=&quot;&quot;&gt;exitCallback&lt;/var&gt;, and an &quot;active&quot; boolean that is true if
-  the &lt;span&gt;current playback position&lt;/span&gt; is equal to or greater
-  than the start time and less than the end time, and false
-  otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-media-removeCueRanges&quot;&gt;&lt;code&gt;removeCueRanges(&lt;var
-  title=&quot;&quot;&gt;className&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must, when called,
-  remove all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
-  &lt;span&gt;media element&lt;/span&gt; which have the class name &lt;var
-  title=&quot;&quot;&gt;className&lt;/var&gt;.&lt;/p&gt;
-
-
-  &lt;h5&gt;Playback processing model&lt;/h5&gt;
-
-  &lt;p&gt;When the &lt;span&gt;current playback position&lt;/span&gt; of a &lt;span&gt;media
-  element&lt;/span&gt; changes (e.g. due to playback or seeking), the user
-  agent must run the following steps. If the &lt;span&gt;current playback
-  position&lt;/span&gt; changes while the steps are running, then the user
-  agent must wait for the steps to complete, and then must immediately
-  rerun the steps. (These steps are thus run as often as possible or
-  needed &mdash; if one iteration takes a long time, this can cause
-  certain ranges to be skipped over as the user agent rushes ahead to
-  &quot;catch up&quot;.)&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; be an ordered list of
-   &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt;, initialized to contain
-   all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
-   &lt;span&gt;media element&lt;/span&gt; whose start times are less than or equal
-   to the &lt;span&gt;current playback position&lt;/span&gt; and whose end times
-   are greater than the &lt;span&gt;current playback position&lt;/span&gt;, in the
-   order they were added to the element.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; be an ordered list of
-   &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt;, initialized to contain
-   all the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; of the
-   &lt;span&gt;media element&lt;/span&gt; that are not present in &lt;var
-   title=&quot;&quot;&gt;current ranges&lt;/var&gt;, in the order they were added to the
-   element.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If none of the &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in
-   &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; have their &quot;active&quot; boolean set
-   to &quot;false&quot; (inactive) and none of the &lt;span title=&quot;cue range&quot;&gt;cue
-   ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;other ranges&lt;/var&gt; have their
-   &quot;active&quot; boolean set to &quot;true&quot; (active), then abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
-   of the current playback position during normal playback, the user
-   agent must then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
-   event&lt;/span&gt; called &lt;code
-   title=&quot;event-timeupdate&quot;&gt;timeupdate&lt;/code&gt; at the element. (In the
-   other cases, such as explicit seeks, relevant events get fired as
-   part of the overall process of changing the current playback
-   position.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the time was reached through the usual monotonic increase
-   of the current playback position during normal playback, and there
-   are &lt;span title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var
-   title=&quot;&quot;&gt;other ranges&lt;/var&gt; that have both their &quot;active&quot; boolean
-   and their &quot;pause&quot; boolean set to &quot;true&quot;, then immediately act as if
-   the element's &lt;code title=&quot;dom-media-pause&quot;&gt;pause()&lt;/code&gt; method
-   had been invoked. &lt;!-- pause() can in theory call load(), but never
-   can it do so as part of this invokation, since we wouldn't be in
-   this algorithm if the media element was empty. So, no need to couch
-   all this in a task. --&gt; (In the other cases, such as explicit
-   seeks, playback is not paused by exiting a cue range, even if that
-   cue range has its &quot;pause&quot; boolean set to &quot;true&quot;.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each non-null &quot;exit&quot; callback of the &lt;span
-   title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;other
-   ranges&lt;/var&gt; that have their &quot;active&quot; boolean set to &quot;true&quot;
-   (active), in list order, &lt;span&gt;queue a task&lt;/span&gt; that invokes the
-   callback, passing the cue range's identifier as the callback's only
-   argument.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each non-null &quot;enter&quot; callback of the &lt;span title=&quot;cue
-   range&quot;&gt;cue ranges&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt; that
-   have their &quot;active&quot; boolean set to &quot;false&quot; (inactive), in list
-   order, &lt;span&gt;queue a task&lt;/span&gt; that invokes the callback, passing
-   the cue range's identifier as the callback's only
-   argument.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Set the &quot;active&quot; boolean of all the &lt;span title=&quot;cue
-   range&quot;&gt;cue ranges&lt;/span&gt; in the &lt;var title=&quot;&quot;&gt;current ranges&lt;/var&gt;
-   list to &quot;true&quot; (active), and the &quot;active&quot; boolean of all the &lt;span
-   title=&quot;cue range&quot;&gt;cue ranges&lt;/span&gt; in the &lt;var title=&quot;&quot;&gt;other
-   ranges&lt;/var&gt; list to &quot;false&quot; (inactive).&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-
   &lt;h5&gt;User interface&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-media-controls&quot;&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt;
@@ -44309,18 +44314,18 @@
   exactly one range and its &lt;code title=&quot;&quot;&gt;collapsed&lt;/code&gt; attribute
   is itself true. Otherwise it must return false.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-selection-collapse&quot;&gt;&lt;code&gt;collapse(&lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must raise a
-  &lt;code&gt;WRONG_DOCUMENT_ERR&lt;/code&gt; DOM exception if
-  &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;'s &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; is not
-  the &lt;code&gt;HTMLDocument&lt;/code&gt; object with which the
+  &lt;p&gt;The &lt;dfn title=&quot;dom-selection-collapse&quot;&gt;&lt;code&gt;collapse(&lt;var
+  title=&quot;&quot;&gt;parentNode&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method must raise a &lt;code&gt;WRONG_DOCUMENT_ERR&lt;/code&gt; DOM exception if
+  &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt;'s &lt;code&gt;Document&lt;/code&gt; is not the
+  &lt;code&gt;HTMLDocument&lt;/code&gt; object with which the
   &lt;code&gt;Selection&lt;/code&gt; object is associated. Otherwise it is, and
   the method must remove all the ranges in the &lt;code&gt;Selection&lt;/code&gt;
   list, then create a new &lt;code&gt;Range&lt;/code&gt; object, add it to the
   list, and invoke its &lt;code title=&quot;&quot;&gt;setStart()&lt;/code&gt; and &lt;code
-  title=&quot;&quot;&gt;setEnd()&lt;/code&gt; methods with the &lt;var title=&quot;&quot;&gt;parentNode&lt;/var&gt; and
-  &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; values as their arguments.&lt;/p&gt;
+  title=&quot;&quot;&gt;setEnd()&lt;/code&gt; methods with the &lt;var
+  title=&quot;&quot;&gt;parentNode&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;offset&lt;/var&gt; values as
+  their arguments.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-selection-collapseToStart&quot;&gt;&lt;code&gt;collapseToStart()&lt;/code&gt;&lt;/dfn&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009210.html">[html5] r2325 - [e] (0) more things waiting on WebIDL
</A></li>
	<LI>Next message: <A HREF="009212.html">[html5] r2327 - [e] (0) Change 'actively playing' to 'potentially	playing' to be more accurate.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9211">[ date ]</a>
              <a href="thread.html#9211">[ thread ]</a>
              <a href="subject.html#9211">[ subject ]</a>
              <a href="author.html#9211">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
