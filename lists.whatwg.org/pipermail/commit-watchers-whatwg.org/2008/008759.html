<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1861 - [] (1) Messaging: introduce placeholders for pipes;	make all the messaging syste [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1861%20-%20%5B%5D%20%281%29%20Messaging%3A%20introduce%20placeholders%20for%20pipes%3B%0A%09make%20all%20the%20messaging%20syste%20%5B...%5D&In-Reply-To=%3C20080711093335.35F6838E6A6%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008758.html">
   <LINK REL="Next"  HREF="008760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1861 - [] (1) Messaging: introduce placeholders for pipes;	make all the messaging syste [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1861%20-%20%5B%5D%20%281%29%20Messaging%3A%20introduce%20placeholders%20for%20pipes%3B%0A%09make%20all%20the%20messaging%20syste%20%5B...%5D&In-Reply-To=%3C20080711093335.35F6838E6A6%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1861 - [] (1) Messaging: introduce placeholders for pipes;	make all the messaging syste [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Jul 11 02:33:35 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008758.html">[html5] r1860 - [e] (0) more typos (credit: gs)
</A></li>
        <LI>Next message: <A HREF="008760.html">[html5] r1862 - [e] (0) wrong header level
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8759">[ date ]</a>
              <a href="thread.html#8759">[ thread ]</a>
              <a href="subject.html#8759">[ subject ]</a>
              <a href="author.html#8759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-07-11 02:33:33 -0700 (Fri, 11 Jul 2008)
New Revision: 1861

Modified:
   index
   source
Log:
[] (1) Messaging: introduce placeholders for pipes; make all the messaging systems use 'message' and MessageEvent; rename 'server sent dom events' to 'server sent events'.

Modified: index
===================================================================
--- index	2008-07-10 19:54:09 UTC (rev 1860)
+++ index	2008-07-11 09:33:33 UTC (rev 1861)
@@ -25,7 +25,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 10 July
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 11 July
     2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
@@ -1549,7 +1549,7 @@
       
 
      &lt;li&gt;&lt;a href=&quot;#server-sent-events&quot;&gt;&lt;span class=secno&gt;7.2
-      &lt;/span&gt;Server-sent DOM events&lt;/a&gt;
+      &lt;/span&gt;Server-sent events&lt;/a&gt;
       &lt;ul class=toc&gt;
        &lt;li&gt;&lt;a href=&quot;#the-remoteeventtarget&quot;&gt;&lt;span class=secno&gt;7.2.1
         &lt;/span&gt;The &lt;code&gt;RemoteEventTarget&lt;/code&gt; interface&lt;/a&gt;
@@ -1616,8 +1616,8 @@
       &lt;/ul&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#repetition&quot;&gt;&lt;span class=secno&gt;8. &lt;/span&gt;Repetition
-    templates&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#pipe-messaging&quot;&gt;&lt;span class=secno&gt;8. &lt;/span&gt;Pipe
+    messaging&lt;/a&gt;
 
    &lt;li&gt;&lt;a href=&quot;#syntax&quot;&gt;&lt;span class=secno&gt;9. &lt;/span&gt;The HTML syntax&lt;/a&gt;
     &lt;ul class=toc&gt;
@@ -30253,6 +30253,7 @@
 
   // &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;
   void &lt;a href=&quot;#postmessage&quot; title=dom-window-postMessage&gt;postMessage&lt;/a&gt;(in DOMString message, in DOMString targetOrigin);
+  void &lt;a href=&quot;#postmessage&quot; title=dom-window-postMessage&gt;postMessage&lt;/a&gt;(in DOMString message, in &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; pipeEnd, in DOMString targetOrigin);
 
   // &lt;a href=&quot;#event4&quot;&gt;event handler DOM attributes&lt;/a&gt;
            attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onabort&quot; title=handler-onabort&gt;onabort&lt;/a&gt;;
@@ -30332,7 +30333,7 @@
     object
 
    &lt;li&gt;The &lt;code title=dom-window-postMessage&gt;&lt;a
-    href=&quot;#postmessage&quot;&gt;postMessage()&lt;/a&gt;&lt;/code&gt; method
+    href=&quot;#postmessage&quot;&gt;postMessage()&lt;/a&gt;&lt;/code&gt; methods
 
    &lt;li&gt;The &lt;code title=dom-window-frames&gt;frames&lt;/code&gt; attribute
 
@@ -40736,9 +40737,11 @@
 
   &lt;h3 id=event1&gt;&lt;span class=secno&gt;7.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
-  &lt;p&gt;Messages in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt; and
-   in &lt;a href=&quot;#server-sent&quot;&gt;server-sent DOM events&lt;/a&gt;, use the &lt;dfn
-   id=message0 title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event.
+  &lt;p&gt;Messages in &lt;a href=&quot;#server-sent&quot;&gt;server-sent events&lt;/a&gt;, &lt;a
+   href=&quot;#web-sockets&quot;&gt;Web sockets&lt;/a&gt;, &lt;a
+   href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, and &lt;a
+   href=&quot;#pipe-messaging0&quot;&gt;pipe messaging&lt;/a&gt; use the &lt;dfn id=message0
+   title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event.
 
   &lt;p&gt;The following interface is defined for this event:
 
@@ -40747,8 +40750,9 @@
   readonly attribute DOMString &lt;a href=&quot;#origin1&quot; title=dom-MessageEvent-origin&gt;origin&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#lasteventid&quot; title=dom-MessageEvent-lastEventId&gt;lastEventId&lt;/a&gt;;
   readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#source3&quot; title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
-  void &lt;a href=&quot;#initmessageevent&quot; title=dom-MessageEvent-initMessageEvent&gt;initMessageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
-  void &lt;a href=&quot;#initmessageeventns&quot; title=dom-MessageEvent-initMessageEventNS&gt;initMessageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
+  readonly attribute &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; &lt;a href=&quot;#pipeend&quot; title=dom-MessageEvent-pipeEnd&gt;pipeEnd&lt;/a&gt;;
+  void &lt;a href=&quot;#initmessageevent&quot; title=dom-MessageEvent-initMessageEvent&gt;initMessageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; pipeEndArg);
+  void &lt;a href=&quot;#initmessageeventns&quot; title=dom-MessageEvent-initMessageEventNS&gt;initMessageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; pipeEndArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn id=initmessageevent
@@ -40764,23 +40768,41 @@
 
   &lt;p&gt;The &lt;dfn id=origin1
    title=dom-MessageEvent-origin&gt;&lt;code&gt;origin&lt;/code&gt;&lt;/dfn&gt; attribute
-   represents, in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, the
-   &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the document that sent the message
+   represents, in &lt;a href=&quot;#server-sent&quot;&gt;server-sent events&lt;/a&gt; and &lt;a
+   href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, the &lt;a
+   href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the document that sent the message
    (typically the scheme, hostname, and port of the document, but not its
    path or fragment identifier).
 
   &lt;p&gt;The &lt;dfn id=lasteventid
    title=dom-MessageEvent-lastEventId&gt;&lt;code&gt;lastEventId&lt;/code&gt;&lt;/dfn&gt;
-   attribute represents, in &lt;a href=&quot;#server-sent&quot;&gt;server-sent dom
-   events&lt;/a&gt;, the &lt;span&gt;last event ID string&lt;/span&gt; of the event source.
+   attribute represents, in &lt;a href=&quot;#server-sent&quot;&gt;server-sent events&lt;/a&gt;,
+   the &lt;span&gt;last event ID string&lt;/span&gt; of the event source.
 
   &lt;p&gt;The &lt;dfn id=source3
    title=dom-MessageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
    represents, in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, the
    &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; from which the message came.
 
+  &lt;p&gt;The &lt;dfn id=pipeend
+   title=dom-MessageEvent-pipeEnd&gt;&lt;code&gt;pipeEnd&lt;/code&gt;&lt;/dfn&gt; attribute
+   represents, in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt; and
+   &lt;a href=&quot;#pipe-messaging0&quot;&gt;pipe messaging&lt;/a&gt; the &lt;code&gt;&lt;a
+   href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt;&lt;/code&gt; being sent, if any.
+
+  &lt;p&gt;Unless otherwise specified, when the user agent creates and dispatches a
+   &lt;code title=event-message&gt;&lt;a href=&quot;#message0&quot;&gt;message&lt;/a&gt;&lt;/code&gt; event in
+   the algorithms described in the following sections, the &lt;code
+   title=dom-MessageEvent-lastEventId&gt;&lt;a
+   href=&quot;#lasteventid&quot;&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute must be the empty
+   string, the &lt;code title=dom-MessageEvent-origin&gt;&lt;a
+   href=&quot;#origin1&quot;&gt;origin&lt;/a&gt;&lt;/code&gt; attribute must be the empty string, the
+   &lt;code title=dom-MessageEvent-source&gt;&lt;a href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
+   attribute must be null, and the &lt;code title=dom-MessageEvent-pipeEnd&gt;&lt;a
+   href=&quot;#pipeend&quot;&gt;pipeEnd&lt;/a&gt;&lt;/code&gt; attribute must be null.
+
   &lt;h3 id=server-sent-events&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;&lt;dfn
-   id=server-sent&gt;Server-sent DOM events&lt;/dfn&gt;&lt;/h3&gt;
+   id=server-sent&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt;
   &lt;!-- event-source --&gt;
 
   &lt;p&gt;This section describes a mechanism for allowing servers to dispatch DOM
@@ -41127,12 +41149,11 @@
      attribute must be set to the value of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;
      buffer, the &lt;code title=dom-MessageEvent-origin&gt;&lt;a
      href=&quot;#origin1&quot;&gt;origin&lt;/a&gt;&lt;/code&gt; attribute must be set to the &lt;a
-     href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the event stream's URL, the &lt;code
-     title=dom-MessageEvent-lastEventId&gt;&lt;a
+     href=&quot;#unicode&quot; title=&quot;Unicode serialization of an origin&quot;&gt;Unicode
+     serialization&lt;/a&gt; of the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the event
+     stream's URL, and the &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a
      href=&quot;#lasteventid&quot;&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute must be set to the
-     &lt;span&gt;last event ID string&lt;/span&gt; of the event source, and the &lt;code
-     title=dom-MessageEvent-source&gt;&lt;a href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
-     attribute must be set to null.
+     &lt;span&gt;last event ID string&lt;/span&gt; of the event source.
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer has a value other than
@@ -41261,7 +41282,8 @@
    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; functionality on a per-page
    basis.
 
-  &lt;h3 id=network&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Web sockets&lt;/h3&gt;
+  &lt;h3 id=network&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;&lt;dfn id=web-sockets&gt;Web
+   sockets&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;To enable Web applications to maintain bidirectional communications with
    their originating server, this specification introduces the &lt;code&gt;&lt;a
@@ -41294,9 +41316,9 @@
 
   // networking
            attribute EventListener &lt;a href=&quot;#onopen&quot; title=handler-WebSocket-onopen&gt;onopen&lt;/a&gt;;
-           attribute EventListener &lt;a href=&quot;#onread&quot; title=handler-WebSocket-onread&gt;onread&lt;/a&gt;;
+           attribute EventListener &lt;a href=&quot;#onmessage0&quot; title=handler-WebSocket-onmessage&gt;onmessage&lt;/a&gt;;
            attribute EventListener &lt;span title=handler-WebSocket-onclosed&gt;onclosed&lt;/span&gt;;
-  void &lt;a href=&quot;#senddata&quot; title=dom-WebSocket-send&gt;send&lt;/a&gt;(in DOMString data);
+  void &lt;span title=dom-WebSocket-postMessage&gt;postMessage&lt;/span&gt;(in DOMString data);
   void &lt;a href=&quot;#disconnect&quot; title=dom-WebSocket-disconnect&gt;disconnect&lt;/a&gt;();
 };&lt;/pre&gt;
 
@@ -41383,46 +41405,14 @@
   &lt;p class=note&gt;No information regarding why the connection was closed is
    passed to the application in this version of this specification.
 
-  &lt;p&gt;The &lt;dfn id=read title=event-WebSocket-read&gt;&lt;code&gt;read&lt;/code&gt;&lt;/dfn&gt;
-   event is fired when when data is received for a connection. It uses the
-   &lt;code&gt;&lt;a href=&quot;#websocketreadevent&quot;&gt;WebSocketReadEvent&lt;/a&gt;&lt;/code&gt;
-   interface:
+  &lt;p&gt;The &lt;code title=event-message&gt;&lt;a href=&quot;#message0&quot;&gt;&lt;code&gt;message&lt;/code&gt;
+   event is fired when when data is received for a connection.&lt;/a&gt;&lt;/code&gt;
 
-  &lt;pre
-   class=idl&gt;interface &lt;dfn id=websocketreadevent&gt;WebSocketReadEvent&lt;/dfn&gt; : Event {
-  readonly attribute DOMString &lt;a href=&quot;#data5&quot; title=dom-WebSocketReadEvent-data&gt;data&lt;/a&gt;;
-  void &lt;a href=&quot;#initwebsocketreadevent&quot; title=dom-WebSocketReadEvent-initWebSocketReadEvent&gt;initWebSocketReadEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
-  void &lt;a href=&quot;#initwebsocketreadeventns&quot; title=dom-WebSocketReadEvent-initWebSocketReadEventNS&gt;initWebSocketReadEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
-};
-&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=initwebsocketreadevent
-   title=dom-WebSocketReadEvent-initWebSocketReadEvent&gt;&lt;code&gt;initWebSocketReadEvent()&lt;/code&gt;&lt;/dfn&gt;
-   and &lt;dfn id=initwebsocketreadeventns
-   title=dom-WebSocketReadEvent-initWebSocketReadEventNS&gt;&lt;code&gt;initWebSocketReadEventNS()&lt;/code&gt;&lt;/dfn&gt;
-   methods must initialise the event in a manner analogous to the
-   similarly-named methods in the DOM3 Events interfaces. &lt;a
-   href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;
-
-  &lt;p&gt;The &lt;dfn id=data5
-   title=dom-WebSocketReadEvent-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt; attribute
-   represents the data that was received.
-
-  &lt;p&gt;When the user agent is to &lt;dfn id=fire-a title=&quot;fire a read event&quot;&gt;fire
-   a &lt;code title=event-WebSocket-read&gt;read&lt;/code&gt; event&lt;/dfn&gt; with data &lt;var
-   title=&quot;&quot;&gt;data&lt;/var&gt;, the user agent must dispatch an event whose name is
-   &lt;code title=event-WebSocket-read&gt;&lt;a href=&quot;#read&quot;&gt;read&lt;/a&gt;&lt;/code&gt;, with no
-   namespace, which does not bubble but is cancelable, which uses the
-   &lt;code&gt;&lt;a href=&quot;#websocketreadevent&quot;&gt;WebSocketReadEvent&lt;/a&gt;&lt;/code&gt;
-   interface, and whose &lt;code title=dom-WebSocketReadEvent-data&gt;&lt;a
-   href=&quot;#data5&quot;&gt;data&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;var
-   title=&quot;&quot;&gt;data&lt;/var&gt;, at the given object.
-
   &lt;p&gt;Events that would be fired during script execution (e.g. between the
    &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object being created
    &mdash; and thus the connection being established &mdash; and the current
    script completing; or, during the execution of a &lt;code
-   title=event-WebSocket-read&gt;&lt;a href=&quot;#read&quot;&gt;read&lt;/a&gt;&lt;/code&gt; event handler)
+   title=event-message&gt;&lt;a href=&quot;#message0&quot;&gt;message&lt;/a&gt;&lt;/code&gt; event handler)
    must be buffered, and those events queued up and each one individually
    fired after the script has completed.&lt;/p&gt;
   &lt;!-- XXX make this more generic
@@ -41443,13 +41433,13 @@
      href=&quot;#open4&quot;&gt;open&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
      the &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.
 
-   &lt;dt&gt;&lt;dfn id=onread
-    title=handler-WebSocket-onread&gt;&lt;code&gt;onread&lt;/code&gt;&lt;/dfn&gt;
+   &lt;dt&gt;&lt;dfn id=onmessage0
+    title=handler-WebSocket-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever an &lt;code title=event-WebSocket-read&gt;&lt;a
-     href=&quot;#read&quot;&gt;read&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through the
-     &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-message&gt;&lt;a
+     href=&quot;#message0&quot;&gt;message&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.
 
    &lt;dt&gt;&lt;dfn id=onclose
     title=handler-WebSocket-onclose&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt;
@@ -41922,10 +41912,15 @@
          store that string in &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.&lt;/p&gt;
 
        &lt;li&gt;
-        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; is 0x00, &lt;a href=&quot;#fire-a&quot;&gt;fire
-         a &lt;code title=event-WebSocket-read&gt;read&lt;/code&gt; event&lt;/a&gt; at the
-         &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object with data
-         &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;. Otherwise, discard the data.
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; is 0x00, create an event that
+         uses the &lt;code&gt;&lt;a href=&quot;#messageevent&quot;&gt;MessageEvent&lt;/a&gt;&lt;/code&gt;
+         interface, with the event name &lt;code title=event-message&gt;&lt;a
+         href=&quot;#message0&quot;&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is
+         cancelable, has no default action, and whose &lt;code
+         title=dom-MessageEvent-data&gt;&lt;a href=&quot;#data4&quot;&gt;data&lt;/a&gt;&lt;/code&gt;
+         attribute is set to &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, and dispatch it at the
+         &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object. Otherwise,
+         discard the data.
       &lt;/ol&gt;
     &lt;/dl&gt;
 
@@ -42198,10 +42193,8 @@
      title=dom-MessageEvent-origin&gt;&lt;a href=&quot;#origin1&quot;&gt;origin&lt;/a&gt;&lt;/code&gt;
      attribute must be set to the &lt;a href=&quot;#unicode&quot; title=&quot;Unicode
      serialization of an origin&quot;&gt;Unicode serialization&lt;/a&gt; of the &lt;a
-     href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the script that invoked the method, the
-     &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a
-     href=&quot;#lasteventid&quot;&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute must be set to the
-     empty string, and the &lt;code title=dom-MessageEvent-source&gt;&lt;a
+     href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the script that invoked the method, and
+     the &lt;code title=dom-MessageEvent-source&gt;&lt;a
      href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be set to the &lt;code&gt;&lt;a
      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
      href=&quot;#default3&quot;&gt;default view&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
@@ -42275,12 +42268,32 @@
    security reasons. It also requires that UAs be careful to allow access to
    certain properties but not others.
 
-  &lt;h2 id=repetition&gt;&lt;span class=secno&gt;8. &lt;/span&gt;Repetition templates&lt;/h2&gt;
+  &lt;p class=big-issue&gt;postMessage() with a pipe isn't yet defined
 
-  &lt;p class=big-issue&gt;See &lt;a
-   href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls">http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls</A>&quot;&gt;WF2&lt;/a&gt;
-   for now
+  &lt;h2 id=pipe-messaging&gt;&lt;span class=secno&gt;8. &lt;/span&gt;&lt;dfn
+   id=pipe-messaging0&gt;Pipe messaging&lt;/dfn&gt;&lt;/h2&gt;
 
+  &lt;p class=big-issue&gt;...
+
+  &lt;pre class=idl&gt;[Constructor] interface &lt;dfn id=pipe&gt;Pipe&lt;/dfn&gt; {
+  readonly attribute &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; &lt;span title=dom-pipe-end1&gt;end1&lt;/span&gt;;
+  readonly attribute &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; &lt;span title=dom-pipe-end2&gt;end2&lt;/span&gt;;
+};
+
+interface &lt;dfn id=pipeend0&gt;PipeEnd&lt;/dfn&gt; {
+  readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;span title=dom-owner&gt;ownerWindow&lt;/span&gt;;
+  readonly attribute boolean &lt;span title=dom-endpipe&gt;active&lt;/span&gt;;
+  void &lt;span title=dom-pipeend-postMessage&gt;postMessage&lt;/span&gt;(in DOMString message);
+  void &lt;span title=dom-pipeend-postMessage&gt;postMessage&lt;/span&gt;(in DOMString message, in &lt;a href=&quot;#pipeend0&quot;&gt;PipeEnd&lt;/a&gt; pipeEnd);
+  void &lt;span title=dom-pipeend-close&gt;close&lt;/span&gt;();
+
+  // event handler attributes
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=handler-endpipe-onmessage&gt;onmessage&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=handler-endpipe-onunload&gt;onunload&lt;/span&gt;;
+};&lt;/pre&gt;
+
+  &lt;p class=big-issue&gt;...
+
   &lt;h2 id=syntax&gt;&lt;span class=secno&gt;9. &lt;/span&gt;The HTML syntax&lt;/h2&gt;
 
   &lt;h3 id=writing0&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Writing HTML documents&lt;/h3&gt;

Modified: source
===================================================================
--- source	2008-07-10 19:54:09 UTC (rev 1860)
+++ source	2008-07-11 09:33:33 UTC (rev 1861)
@@ -27779,6 +27779,7 @@
 
   // &lt;span&gt;cross-document messaging&lt;/span&gt;
   void &lt;span title=&quot;dom-window-postMessage&quot;&gt;postMessage&lt;/span&gt;(in DOMString message, in DOMString targetOrigin);
+  void &lt;span title=&quot;dom-window-postMessage&quot;&gt;postMessage&lt;/span&gt;(in DOMString message, in &lt;span&gt;PipeEnd&lt;/span&gt; pipeEnd, in DOMString targetOrigin);
 
   // &lt;span&gt;event handler DOM attributes&lt;/span&gt;
            attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onabort&quot;&gt;onabort&lt;/span&gt;;
@@ -27857,7 +27858,7 @@
    &lt;li&gt;The &lt;code title=&quot;dom-location&quot;&gt;location&lt;/code&gt; object
 
    &lt;li&gt;The &lt;code title=&quot;dom-window-postMessage&quot;&gt;postMessage()&lt;/code&gt;
-   method
+   methods
 
    &lt;li&gt;The &lt;code title=&quot;dom-window-frames&quot;&gt;frames&lt;/code&gt; attribute
 
@@ -38275,8 +38276,9 @@
 
   &lt;h3&gt;Event definitions&lt;/h3&gt;
 
-  &lt;p&gt;Messages in &lt;span&gt;cross-document messaging&lt;/span&gt; and in
-  &lt;span&gt;server-sent DOM events&lt;/span&gt;, use the &lt;dfn
+  &lt;p&gt;Messages in &lt;span&gt;server-sent events&lt;/span&gt;, &lt;span&gt;Web
+  sockets&lt;/span&gt;, &lt;span&gt;cross-document messaging&lt;/span&gt;, and
+  &lt;span&gt;pipe messaging&lt;/span&gt; use the &lt;dfn
   title=&quot;event-message&quot;&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event.&lt;/p&gt;
 
   &lt;p&gt;The following interface is defined for this event:&lt;/p&gt;
@@ -38286,8 +38288,9 @@
   readonly attribute DOMString &lt;span title=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/span&gt;;
   readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
-  void &lt;span title=&quot;dom-MessageEvent-initMessageEvent&quot;&gt;initMessageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
-  void &lt;span title=&quot;dom-MessageEvent-initMessageEventNS&quot;&gt;initMessageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
+  readonly attribute &lt;span&gt;PipeEnd&lt;/span&gt; &lt;span title=&quot;dom-MessageEvent-pipeEnd&quot;&gt;pipeEnd&lt;/span&gt;;
+  void &lt;span title=&quot;dom-MessageEvent-initMessageEvent&quot;&gt;initMessageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;span&gt;PipeEnd&lt;/span&gt; pipeEndArg);
+  void &lt;span title=&quot;dom-MessageEvent-initMessageEventNS&quot;&gt;initMessageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;span&gt;PipeEnd&lt;/span&gt; pipeEndArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn
@@ -38304,14 +38307,15 @@
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-MessageEvent-origin&quot;&gt;&lt;code&gt;origin&lt;/code&gt;&lt;/dfn&gt; attribute
-  represents, in &lt;span&gt;cross-document messaging&lt;/span&gt;, the
-  &lt;span&gt;origin&lt;/span&gt; of the document that sent the message (typically
-  the scheme, hostname, and port of the document, but not its path or
-  fragment identifier).&lt;/p&gt;
+  represents, in &lt;span&gt;server-sent events&lt;/span&gt; and
+  &lt;span&gt;cross-document messaging&lt;/span&gt;, the &lt;span&gt;origin&lt;/span&gt; of
+  the document that sent the message (typically the scheme, hostname,
+  and port of the document, but not its path or fragment
+  identifier).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-MessageEvent-lastEventId&quot;&gt;&lt;code&gt;lastEventId&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents, in &lt;span&gt;server-sent dom events&lt;/span&gt;, the
+  attribute represents, in &lt;span&gt;server-sent events&lt;/span&gt;, the
   &lt;span&gt;last event ID string&lt;/span&gt; of the event source.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
@@ -38319,8 +38323,26 @@
   represents, in &lt;span&gt;cross-document messaging&lt;/span&gt;, the
   &lt;code&gt;Window&lt;/code&gt; from which the message came.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-MessageEvent-pipeEnd&quot;&gt;&lt;code&gt;pipeEnd&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents, in &lt;span&gt;cross-document messaging&lt;/span&gt; and
+  &lt;span&gt;pipe messaging&lt;/span&gt; the &lt;code&gt;PipeEnd&lt;/code&gt; being sent, if
+  any.&lt;/p&gt;
 
-  &lt;h3 id=&quot;server-sent-events&quot;&gt;&lt;dfn&gt;Server-sent DOM events&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;p&gt;Unless otherwise specified, when the user agent creates and
+  dispatches a &lt;code title=&quot;event-message&quot;&gt;message&lt;/code&gt; event in the
+  algorithms described in the following sections, the &lt;code
+  title=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/code&gt; attribute
+  must be the empty string, the &lt;code
+  title=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/code&gt; attribute must be the
+  empty string, the &lt;code
+  title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt; attribute must be
+  null, and the &lt;code title=&quot;dom-MessageEvent-pipeEnd&quot;&gt;pipeEnd&lt;/code&gt;
+  attribute must be null.&lt;/p&gt;
+
+
+
+  &lt;h3 id=&quot;server-sent-events&quot;&gt;&lt;dfn&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt;
   &lt;!-- event-source --&gt;
 
   &lt;p&gt;This section describes a mechanism for allowing servers to
@@ -38691,11 +38713,12 @@
    title=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/code&gt; attribute must be set to
    the value of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer, the &lt;code
    title=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/code&gt; attribute must be set
-   to the &lt;span&gt;origin&lt;/span&gt; of the event stream's URL, the &lt;code
+   to the &lt;span title=&quot;Unicode serialization of an origin&quot;&gt;Unicode
+   serialization&lt;/span&gt; of the &lt;span&gt;origin&lt;/span&gt; of the event
+   stream's URL, and the &lt;code
    title=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/code&gt; attribute
    must be set to the &lt;span&gt;last event ID string&lt;/span&gt; of the event
-   source, and the &lt;code title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt;
-   attribute must be set to null.&lt;/p&gt;&lt;/li&gt;
+   source.&lt;/p&gt;&lt;/li&gt;
    
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer has a value
    other than the empty string, change the type of the newly created
@@ -38829,7 +38852,7 @@
 
 
 
-  &lt;h3 id=&quot;network&quot;&gt;Web sockets&lt;/h3&gt;
+  &lt;h3 id=&quot;network&quot;&gt;&lt;dfn&gt;Web sockets&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;To enable Web applications to maintain bidirectional
   communications with their originating server, this specification
@@ -38864,9 +38887,9 @@
 
   // networking
            attribute EventListener &lt;span title=&quot;handler-WebSocket-onopen&quot;&gt;onopen&lt;/span&gt;;
-           attribute EventListener &lt;span title=&quot;handler-WebSocket-onread&quot;&gt;onread&lt;/span&gt;;
+           attribute EventListener &lt;span title=&quot;handler-WebSocket-onmessage&quot;&gt;onmessage&lt;/span&gt;;
            attribute EventListener &lt;span title=&quot;handler-WebSocket-onclosed&quot;&gt;onclosed&lt;/span&gt;;
-  void &lt;span title=&quot;dom-WebSocket-send&quot;&gt;send&lt;/span&gt;(in DOMString data);
+  void &lt;span title=&quot;dom-WebSocket-postMessage&quot;&gt;postMessage&lt;/span&gt;(in DOMString data);
   void &lt;span title=&quot;dom-WebSocket-disconnect&quot;&gt;disconnect&lt;/span&gt;();
 };&lt;/pre&gt;
 
@@ -38953,43 +38976,14 @@
   closed is passed to the application in this version of this
   specification.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;event-WebSocket-read&quot;&gt;&lt;code&gt;read&lt;/code&gt;&lt;/dfn&gt;
-  event is fired when when data is received for a connection. It uses
-  the &lt;code&gt;WebSocketReadEvent&lt;/code&gt; interface:&lt;/p&gt;
+  &lt;p&gt;The &lt;code title=&quot;event-message&quot;&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt;
+  event is fired when when data is received for a connection.&lt;/p&gt;
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;WebSocketReadEvent&lt;/dfn&gt; : Event {
-  readonly attribute DOMString &lt;span title=&quot;dom-WebSocketReadEvent-data&quot;&gt;data&lt;/span&gt;;
-  void &lt;span title=&quot;dom-WebSocketReadEvent-initWebSocketReadEvent&quot;&gt;initWebSocketReadEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
-  void &lt;span title=&quot;dom-WebSocketReadEvent-initWebSocketReadEventNS&quot;&gt;initWebSocketReadEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
-};
-&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-WebSocketReadEvent-initWebSocketReadEvent&quot;&gt;&lt;code&gt;initWebSocketReadEvent()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn
-  title=&quot;dom-WebSocketReadEvent-initWebSocketReadEventNS&quot;&gt;&lt;code&gt;initWebSocketReadEventNS()&lt;/code&gt;&lt;/dfn&gt;
-  methods must initialise the event in a manner analogous to the
-  similarly-named methods in the DOM3 Events interfaces. &lt;a
-  href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-WebSocketReadEvent-data&quot;&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the data that was received.&lt;/p&gt;
-
-  &lt;p&gt;When the user agent is to &lt;dfn title=&quot;fire a read event&quot;&gt;fire a
-  &lt;code title=&quot;event-WebSocket-read&quot;&gt;read&lt;/code&gt; event&lt;/dfn&gt; with data
-  &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, the user agent must dispatch an event
-  whose name is &lt;code title=&quot;event-WebSocket-read&quot;&gt;read&lt;/code&gt;, with
-  no namespace, which does not bubble but is cancelable, which uses
-  the &lt;code&gt;WebSocketReadEvent&lt;/code&gt; interface, and whose &lt;code
-  title=&quot;dom-WebSocketReadEvent-data&quot;&gt;data&lt;/code&gt; attribute is set to
-  &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, at the given object.&lt;/p&gt;
-
   &lt;p&gt;Events that would be fired during script execution (e.g. between
   the &lt;code&gt;WebSocket&lt;/code&gt; object being created &mdash; and thus the
   connection being established &mdash; and the current script
   completing; or, during the execution of a &lt;code
-  title=&quot;event-WebSocket-read&quot;&gt;read&lt;/code&gt; event handler) must be
+  title=&quot;event-message&quot;&gt;message&lt;/code&gt; event handler) must be
   buffered, and those events queued up and each one individually fired
   after the script has completed.&lt;/p&gt; &lt;!-- XXX make this more generic
   --&gt;
@@ -39008,10 +39002,10 @@
    title=&quot;event-WebSocket-open&quot;&gt;open&lt;/code&gt; event is targeted at or
    bubbles through the &lt;code&gt;WebSocket&lt;/code&gt; object.&lt;/p&gt;&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn title=&quot;handler-WebSocket-onread&quot;&gt;&lt;code&gt;onread&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;dfn title=&quot;handler-WebSocket-onmessage&quot;&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
-   title=&quot;event-WebSocket-read&quot;&gt;read&lt;/code&gt; event is targeted at or
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-message&quot;&gt;message&lt;/code&gt; event is targeted at or
    bubbles through the &lt;code&gt;WebSocket&lt;/code&gt; object.&lt;/p&gt;&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;handler-WebSocket-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
@@ -39568,10 +39562,14 @@
        &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; as a UTF-8
        string, and store that string in &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.&lt;/p&gt;
 
-       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; is 0x00, &lt;span&gt;fire a
-       &lt;code title=&quot;event-WebSocket-read&quot;&gt;read&lt;/code&gt; event&lt;/span&gt; at
-       the &lt;code&gt;WebSocket&lt;/code&gt; object with data &lt;var
-       title=&quot;&quot;&gt;data&lt;/var&gt;. Otherwise, discard the data.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; is 0x00, create an
+       event that uses the &lt;code&gt;MessageEvent&lt;/code&gt; interface, with
+       the event name &lt;code title=&quot;event-message&quot;&gt;message&lt;/code&gt;,
+       which does not bubble, is cancelable, has no default action,
+       and whose &lt;code title=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/code&gt;
+       attribute is set to &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, and dispatch it
+       at the &lt;code&gt;WebSocket&lt;/code&gt; object. Otherwise, discard the
+       data.&lt;/p&gt;&lt;/li&gt;
 
       &lt;/ol&gt;
 
@@ -39823,6 +39821,7 @@
   domain, in a way designed to not enable cross-site scripting
   attacks.&lt;/p&gt;
 
+
   &lt;h4&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a script invokes the &lt;dfn
@@ -39883,9 +39882,7 @@
     method, the &lt;code title=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/code&gt;
     attribute must be set to the &lt;span title=&quot;Unicode serialization of
     an origin&quot;&gt;Unicode serialization&lt;/span&gt; of the &lt;span&gt;origin&lt;/span&gt;
-    of the script that invoked the method, the &lt;code
-    title=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/code&gt; attribute
-    must be set to the empty string, and the &lt;code
+    of the script that invoked the method, and the &lt;code
     title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt; attribute must be
     set to the &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;default
     view&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; for which the
@@ -39966,16 +39963,35 @@
   disallowed for security reasons. It also requires that UAs be
   careful to allow access to certain properties but not others.&lt;/p&gt;
 
+  &lt;p class=&quot;big-issue&quot;&gt;postMessage() with a pipe isn't yet defined&lt;/p&gt;
 
 
 
-  &lt;h2 id=&quot;repetition&quot;&gt;Repetition templates&lt;/h2&gt;
+  &lt;h2&gt;&lt;dfn&gt;Pipe messaging&lt;/dfn&gt;&lt;/h2&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;See &lt;a href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls">http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls</A>&quot;&gt;WF2&lt;/a&gt; for now&lt;/p&gt;
+  &lt;p class=&quot;big-issue&quot;&gt;...&lt;/p&gt;
 
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor] interface &lt;dfn&gt;Pipe&lt;/dfn&gt; {
+  readonly attribute &lt;span&gt;PipeEnd&lt;/span&gt; &lt;span title=&quot;dom-pipe-end1&quot;&gt;end1&lt;/span&gt;;
+  readonly attribute &lt;span&gt;PipeEnd&lt;/span&gt; &lt;span title=&quot;dom-pipe-end2&quot;&gt;end2&lt;/span&gt;;
+};
 
+interface &lt;dfn&gt;PipeEnd&lt;/dfn&gt; {
+  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-owner&quot;&gt;ownerWindow&lt;/span&gt;;
+  readonly attribute boolean &lt;span title=&quot;dom-endpipe&quot;&gt;active&lt;/span&gt;;
+  void &lt;span title=&quot;dom-pipeend-postMessage&quot;&gt;postMessage&lt;/span&gt;(in DOMString message);
+  void &lt;span title=&quot;dom-pipeend-postMessage&quot;&gt;postMessage&lt;/span&gt;(in DOMString message, in &lt;span&gt;PipeEnd&lt;/span&gt; pipeEnd);
+  void &lt;span title=&quot;dom-pipeend-close&quot;&gt;close&lt;/span&gt;();
 
+  // event handler attributes
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-endpipe-onmessage&quot;&gt;onmessage&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-endpipe-onunload&quot;&gt;onunload&lt;/span&gt;;
+};&lt;/pre&gt;
 
+  &lt;p class=&quot;big-issue&quot;&gt;...&lt;/p&gt;
+
+
+
   &lt;h2 id=&quot;syntax&quot;&gt;The HTML syntax&lt;/h2&gt;
 
   &lt;h3&gt;Writing HTML documents&lt;/h3&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008758.html">[html5] r1860 - [e] (0) more typos (credit: gs)
</A></li>
	<LI>Next message: <A HREF="008760.html">[html5] r1862 - [e] (0) wrong header level
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8759">[ date ]</a>
              <a href="thread.html#8759">[ thread ]</a>
              <a href="subject.html#8759">[ subject ]</a>
              <a href="author.html#8759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
