<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1311 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1311%20-%20/&In-Reply-To=%3C20080303011155.AC77D38EEF1%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008212.html">
   <LINK REL="Next"  HREF="008214.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1311 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1311%20-%20/&In-Reply-To=%3C20080303011155.AC77D38EEF1%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1311 - /">whatwg at whatwg.org
       </A><BR>
    <I>Sun Mar  2 17:11:55 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008212.html">[html5] r1310 - /
</A></li>
        <LI>Next message: <A HREF="008214.html">[html5] r1312 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8213">[ date ]</a>
              <a href="thread.html#8213">[ thread ]</a>
              <a href="subject.html#8213">[ subject ]</a>
              <a href="author.html#8213">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-03-02 17:11:51 -0800 (Sun, 02 Mar 2008)
New Revision: 1311

Modified:
   index
   source
Log:
[e] (0) Move the phase sections lower, move the insertion modes to the same level.

Modified: index
===================================================================
--- index	2008-03-03 01:07:54 UTC (rev 1310)
+++ index	2008-03-03 01:11:51 UTC (rev 1311)
@@ -1602,84 +1602,81 @@
        &lt;li&gt;&lt;a href=&quot;#tree-construction&quot;&gt;&lt;span class=secno&gt;8.2.4 &lt;/span&gt;Tree
         construction&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-initial&quot;&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;The
-          initial phase&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#the-root0&quot;&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;The root
-          element phase&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#the-main&quot;&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;The main
+         &lt;li&gt;&lt;a href=&quot;#the-main&quot;&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;The main
           phase&lt;/a&gt;
           &lt;ul class=toc&gt;
-           &lt;li&gt;&lt;a href=&quot;#the-stack&quot;&gt;&lt;span class=secno&gt;8.2.4.3.1. &lt;/span&gt;The
+           &lt;li&gt;&lt;a href=&quot;#the-stack&quot;&gt;&lt;span class=secno&gt;8.2.4.1.1. &lt;/span&gt;The
             stack of open elements&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#the-list&quot;&gt;&lt;span class=secno&gt;8.2.4.3.2. &lt;/span&gt;The
+           &lt;li&gt;&lt;a href=&quot;#the-list&quot;&gt;&lt;span class=secno&gt;8.2.4.1.2. &lt;/span&gt;The
             list of active formatting elements&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#creating&quot;&gt;&lt;span class=secno&gt;8.2.4.3.3.
+           &lt;li&gt;&lt;a href=&quot;#creating&quot;&gt;&lt;span class=secno&gt;8.2.4.1.3.
             &lt;/span&gt;Creating and inserting HTML elements&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;&lt;span class=secno&gt;8.2.4.3.4. &lt;/span&gt;Closing
+           &lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;&lt;span class=secno&gt;8.2.4.1.4. &lt;/span&gt;Closing
             elements that have implied end tags&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#the-element&quot;&gt;&lt;span class=secno&gt;8.2.4.3.5. &lt;/span&gt;The
+           &lt;li&gt;&lt;a href=&quot;#the-element&quot;&gt;&lt;span class=secno&gt;8.2.4.1.5. &lt;/span&gt;The
             element pointers&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#the-insertion&quot;&gt;&lt;span class=secno&gt;8.2.4.3.6.
+           &lt;li&gt;&lt;a href=&quot;#the-insertion&quot;&gt;&lt;span class=secno&gt;8.2.4.1.6.
             &lt;/span&gt;The insertion mode&lt;/a&gt;
+          &lt;/ul&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#the-before&quot;&gt;&lt;span class=secno&gt;8.2.4.3.7. &lt;/span&gt;The
-            before head insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-initial&quot;&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;The
+          initial phase&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-inhead&quot;&gt;&lt;span class=secno&gt;8.2.4.3.8.
-            &lt;/span&gt;The in head insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-root0&quot;&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;The root
+          element phase&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-inheadnoscript&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.9. &lt;/span&gt;The in head noscript insertion
-            mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-before&quot;&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;The
+          before head insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#the-after&quot;&gt;&lt;span class=secno&gt;8.2.4.3.10. &lt;/span&gt;The
-            after head insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inhead&quot;&gt;&lt;span class=secno&gt;8.2.4.5.
+          &lt;/span&gt;The in head insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-inbody&quot;&gt;&lt;span class=secno&gt;8.2.4.3.11.
-            &lt;/span&gt;The in body insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inheadnoscript&quot;&gt;&lt;span
+          class=secno&gt;8.2.4.6. &lt;/span&gt;The in head noscript insertion mode&lt;/a&gt;
+          
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-intable&quot;&gt;&lt;span class=secno&gt;8.2.4.3.12.
-            &lt;/span&gt;The in table insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-after&quot;&gt;&lt;span class=secno&gt;8.2.4.7. &lt;/span&gt;The after
+          head insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-incaption&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.13. &lt;/span&gt;The in caption insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inbody&quot;&gt;&lt;span class=secno&gt;8.2.4.8.
+          &lt;/span&gt;The in body insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-incolgroup&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.14. &lt;/span&gt;The in column group insertion
-            mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intable&quot;&gt;&lt;span class=secno&gt;8.2.4.9.
+          &lt;/span&gt;The in table insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-intbody&quot;&gt;&lt;span class=secno&gt;8.2.4.3.15.
-            &lt;/span&gt;The in table body insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-incaption&quot;&gt;&lt;span class=secno&gt;8.2.4.10.
+          &lt;/span&gt;The in caption insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-intr&quot;&gt;&lt;span class=secno&gt;8.2.4.3.16.
-            &lt;/span&gt;The in row insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-incolgroup&quot;&gt;&lt;span class=secno&gt;8.2.4.11.
+          &lt;/span&gt;The in column group insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-intd&quot;&gt;&lt;span class=secno&gt;8.2.4.3.17.
-            &lt;/span&gt;The in cell insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intbody&quot;&gt;&lt;span class=secno&gt;8.2.4.12.
+          &lt;/span&gt;The in table body insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-inselect&quot;&gt;&lt;span class=secno&gt;8.2.4.3.18.
-            &lt;/span&gt;The in select insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intr&quot;&gt;&lt;span class=secno&gt;8.2.4.13.
+          &lt;/span&gt;The in row insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-afterbody&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.19. &lt;/span&gt;The after body insertion mode&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intd&quot;&gt;&lt;span class=secno&gt;8.2.4.14.
+          &lt;/span&gt;The in cell insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-inframeset&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.20. &lt;/span&gt;The in frameset insertion mode&lt;/a&gt;
-            
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inselect&quot;&gt;&lt;span class=secno&gt;8.2.4.15.
+          &lt;/span&gt;The in select insertion mode&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#parsing-main-afterframeset&quot;&gt;&lt;span
-            class=secno&gt;8.2.4.3.21. &lt;/span&gt;The after frameset insertion
-            mode&lt;/a&gt;
-          &lt;/ul&gt;
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-afterbody&quot;&gt;&lt;span class=secno&gt;8.2.4.16.
+          &lt;/span&gt;The after body insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-trailing&quot;&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inframeset&quot;&gt;&lt;span class=secno&gt;8.2.4.17.
+          &lt;/span&gt;The in frameset insertion mode&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-afterframeset&quot;&gt;&lt;span
+          class=secno&gt;8.2.4.18. &lt;/span&gt;The after frameset insertion mode&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#the-trailing&quot;&gt;&lt;span class=secno&gt;8.2.4.19. &lt;/span&gt;The
           trailing end phase&lt;/a&gt;
         &lt;/ul&gt;
 
@@ -40477,398 +40474,7 @@
    href=&quot;#hardwareLimitations&quot;&gt;practical concerns&lt;/a&gt; will likely force user
    agents to impose nesting depths.
 
-  &lt;h5 id=the-initial&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;&lt;dfn
-   id=the-initial0&gt;The initial phase&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;Initially, the tree construction stage must handle each token emitted
-   from the &lt;a href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage as follows:
-
-  &lt;dl class=switch&gt;
-   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER TABULATION,
-    U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM FEED (FF),
-    &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
-
-   &lt;dd&gt;
-    &lt;p&gt;Ignore the token.&lt;/p&gt;
-
-   &lt;dt&gt;A comment token
-
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt; object
-     with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data given in
-     the comment token.&lt;/p&gt;
-
-   &lt;dt&gt;A DOCTYPE token
-
-   &lt;dd&gt;
-    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
-     case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, or if
-     the token's public identifier is not missing, or if the token's system
-     identifier is not missing, then there is a &lt;a href=&quot;#parse0&quot;&gt;parse
-     error&lt;/a&gt;. Conformance checkers may, instead of reporting this error,
-     switch to a conformance checking mode for another language (e.g. based
-     on the DOCTYPE token a conformance checker could recognise that the
-     document is an HTML4-era document, and defer to an HTML4 conformance
-     checker.)&lt;/p&gt;
-
-    &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
-     node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute set to the name
-     given in the DOCTYPE token; the &lt;code title=&quot;&quot;&gt;publicId&lt;/code&gt; attribute
-     set to the public identifier given in the DOCTYPE token, or the empty
-     string if the public identifier was not set; the &lt;code
-     title=&quot;&quot;&gt;systemId&lt;/code&gt; attribute set to the system identifier given in
-     the DOCTYPE token, or the empty string if the system identifier was not
-     set; and the other attributes specific to &lt;code&gt;DocumentType&lt;/code&gt;
-     objects set to null and empty lists as appropriate. Associate the
-     &lt;code&gt;DocumentType&lt;/code&gt; node with the &lt;code&gt;Document&lt;/code&gt; object so
-     that it is returned as the value of the &lt;code title=&quot;&quot;&gt;doctype&lt;/code&gt;
-     attribute of the &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
-
-    &lt;p id=quirks-mode-doctypes&gt;Then, if the DOCTYPE token matches one of the
-     conditions in the following list, then set the document to &lt;a
-     href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt;:&lt;/p&gt;
-
-    &lt;ul class=brief&gt;
-     &lt;li&gt; The &lt;i&gt;force-quirks flag&lt;/i&gt; is set to &lt;i&gt;on&lt;/i&gt;.
-
-     &lt;li&gt; The name is set to anything other than &quot;&lt;code
-      title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;.
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;+//Silmaril//dtd
-      html Pro v0r11 19970101//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AdvaSoft
-      Ltd//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AS//DTD HTML
-      3.0 asWedit + extensions//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0 Level 1//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0 Level 2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0 Strict Level 1//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0 Strict Level 2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0 Strict//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      2.1E//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      3.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      3.0//EN//&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      3.2 Final//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      3.2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      3//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 0//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 1//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 1//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 2//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 3//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Level 3//EN//3.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 0//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 1//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 1//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 2//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 3//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict Level 3//EN//3.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
-      Strict//EN//3.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
-      HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
-      HTML//EN//2.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
-      HTML//EN//3.0&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Metrius//DTD
-      Metrius Presentational//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 2.0 HTML Strict//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 2.0 HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 2.0 Tables//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 3.0 HTML Strict//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 3.0 HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
-      Internet Explorer 3.0 Tables//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm.
-      Corp.//DTD HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm.
-      Corp.//DTD Strict HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
-      Associates//DTD HTML 2.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
-      Associates//DTD HTML Extended 1.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
-      Associates//DTD HTML Extended Relaxed 1.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad
-      Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML
-      4.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad//DTD
-      HoTMetaL PRO 4.0::19971010::extensions to HTML 4.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Spyglass//DTD
-      HTML 2.0 Extended//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SQ//DTD HTML
-      2.0 HoTMetaL + extensions//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun
-      Microsystems Corp.//DTD HotJava HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun
-      Microsystems Corp.//DTD HotJava Strict HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3
-      1995-03-24//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      3.2 Draft//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      3.2 Final//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      3.2//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      3.2S Draft//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      4.0 Frameset//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      4.0 Transitional//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      Experimental 19960712//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
-      Experimental 970421//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD W3
-      HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
-      HTML 3.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
-      HTML 3.0//EN//&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
-      HTML Strict 3.0//EN//&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD
-      Mozilla HTML 2.0//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD
-      Mozilla HTML//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-/W3C/DTD HTML 4.0
-      Transitional/EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
-
-     &lt;li&gt; The system identifier is set to: &quot;&lt;code
-      title=&quot;&quot;&gt;<A HREF="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code">http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code</A>&gt;&quot;
-      
-
-     &lt;li&gt; The system identifier is missing and the public identifier is set
-      to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The system identifier is missing and the public identifier is set
-      to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot;
-    &lt;/ul&gt;
-
-    &lt;p&gt;Otherwise, if the DOCTYPE token matches one of the conditions in the
-     following list, then set the document to &lt;a href=&quot;#limited&quot;&gt;limited
-     quirks mode&lt;/a&gt;:&lt;/p&gt;
-
-    &lt;ul class=brief&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML
-      1.0 Frameset//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML
-      1.0 Transitional//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The system identifier is not missing and the public identifier is
-      set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot;
-
-     &lt;li&gt; The system identifier is not missing and the public identifier is
-      set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot;
-    &lt;/ul&gt;
-
-    &lt;p&gt;The name, system identifier, and public identifier strings must be
-     compared to the values given in the lists above in a
-     case-insensitive&lt;!-- ASCII --&gt; manner.&lt;/p&gt;
-
-    &lt;p&gt;Then, switch to &lt;a href=&quot;#the-root1&quot;&gt;the root element phase&lt;/a&gt; of the
-     tree construction stage.&lt;/p&gt;
-
-   &lt;dt&gt;A start tag token
-
-   &lt;dt&gt;An end tag token
-
-   &lt;dt&gt;A character token that is not one of one of U+0009 CHARACTER
-    TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM
-    FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
-
-   &lt;dt&gt;An end-of-file token
-
-   &lt;dd&gt;
-    &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the document to &lt;a href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Then, switch to &lt;a href=&quot;#the-root1&quot;&gt;the root element phase&lt;/a&gt; of the
-     tree construction stage and reprocess the current token.&lt;/p&gt;
-  &lt;/dl&gt;
-
-  &lt;h5 id=the-root0&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;&lt;dfn id=the-root1&gt;The
-   root element phase&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;After &lt;a href=&quot;#the-initial0&quot;&gt;the initial phase&lt;/a&gt;, as each token is
-   emitted from the &lt;a href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage, it must
-   be processed as described in this section.
-
-  &lt;dl class=switch&gt;
-   &lt;dt&gt;A DOCTYPE token
-
-   &lt;dd&gt;
-    &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
-
-   &lt;dt&gt;A comment token
-
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt; object
-     with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data given in
-     the comment token.&lt;/p&gt;
-
-   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER TABULATION,
-    U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM FEED (FF),
-    &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
-
-   &lt;dd&gt;
-    &lt;p&gt;Ignore the token.&lt;/p&gt;
-
-   &lt;dt&gt;A character token that is &lt;em&gt;not&lt;/em&gt; one of U+0009 CHARACTER
-    TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM
-    FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
-
-   &lt;dt&gt;A start tag token
-
-   &lt;dt&gt;An end tag token
-
-   &lt;dt&gt;An end-of-file token
-
-   &lt;dd&gt;
-    &lt;p id=parser-appcache&gt;If the token is a start tag token with the tag name
-     &quot;html&quot;, and it has an attribute &quot;manifest&quot;, then run the &lt;a
-     href=&quot;#application2&quot;
-     title=concept-appcache-init-with-attribute&gt;application cache selection
-     algorithm&lt;/a&gt; with the value of that attribute as the manifest URI.
-     Otherwise, run the &lt;a href=&quot;#application3&quot;
-     title=concept-appcache-init-no-attribute&gt;application cache selection
-     algorithm&lt;/a&gt; with no manifest.&lt;/p&gt;
-
-    &lt;p&gt;Create an &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; node
-     with the tag name &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt;, in the &lt;a
-     href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;. Append it to the
-     &lt;code&gt;Document&lt;/code&gt; object. Switch to &lt;a href=&quot;#the-main0&quot;&gt;the main
-     phase&lt;/a&gt; and reprocess the current token.&lt;/p&gt;
-
-    &lt;p class=big-issue&gt;Should probably make end tags be ignored, so that
-     &quot;&lt;/head&gt;&lt;!-- --&gt;&lt;html&gt;&quot; puts the comment before the root node
-     (or should we?)&lt;/p&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;The root element can end up being removed from the &lt;code&gt;Document&lt;/code&gt;
-   object, e.g. by scripts; nothing in particular happens in such cases,
-   content continues being appended to the nodes as described in the next
-   section.
-
-  &lt;h5 id=the-main&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;&lt;dfn id=the-main0&gt;The
+  &lt;h5 id=the-main&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;&lt;dfn id=the-main0&gt;The
    main phase&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;After &lt;a href=&quot;#the-root1&quot;&gt;the root element phase&lt;/a&gt;, each token
@@ -40887,7 +40493,7 @@
    concept (and duplicate the two rules common to all insertion modes into
    all of them).
 
-  &lt;h6 id=the-stack&gt;&lt;span class=secno&gt;8.2.4.3.1. &lt;/span&gt;The stack of open
+  &lt;h6 id=the-stack&gt;&lt;span class=secno&gt;8.2.4.1.1. &lt;/span&gt;The stack of open
    elements&lt;/h6&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=stack&gt;stack of open elements&lt;/dfn&gt; contains just
@@ -41047,7 +40653,7 @@
    misnested formatting elements&lt;/a&gt;), the stack is manipulated in a
    random-access fashion.
 
-  &lt;h6 id=the-list&gt;&lt;span class=secno&gt;8.2.4.3.2. &lt;/span&gt;The list of active
+  &lt;h6 id=the-list&gt;&lt;span class=secno&gt;8.2.4.1.2. &lt;/span&gt;The list of active
    formatting elements&lt;/h6&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=list-of4&gt;list of active formatting elements&lt;/dfn&gt;
@@ -41136,7 +40742,7 @@
    &lt;li&gt;Go to step 1.
   &lt;/ol&gt;
 
-  &lt;h6 id=creating&gt;&lt;span class=secno&gt;8.2.4.3.3. &lt;/span&gt;Creating and inserting
+  &lt;h6 id=creating&gt;&lt;span class=secno&gt;8.2.4.1.3. &lt;/span&gt;Creating and inserting
    HTML elements&lt;/h6&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=create title=&quot;create an
@@ -41208,7 +40814,7 @@
      error&lt;/a&gt;.
   &lt;/ol&gt;
 
-  &lt;h6 id=closing&gt;&lt;span class=secno&gt;8.2.4.3.4. &lt;/span&gt;Closing elements that
+  &lt;h6 id=closing&gt;&lt;span class=secno&gt;8.2.4.1.4. &lt;/span&gt;Closing elements that
    have implied end tags&lt;/h6&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=generate&gt;generate implied
@@ -41229,7 +40835,7 @@
    element to exclude from the process, then the UA must perform the above
    steps as if that element was not in the above list.
 
-  &lt;h6 id=the-element&gt;&lt;span class=secno&gt;8.2.4.3.5. &lt;/span&gt;The element pointers&lt;/h6&gt;
+  &lt;h6 id=the-element&gt;&lt;span class=secno&gt;8.2.4.1.5. &lt;/span&gt;The element pointers&lt;/h6&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=head-element&gt;&lt;code title=&quot;&quot;&gt;head&lt;/code&gt; element
    pointer&lt;/dfn&gt; and the &lt;dfn id=form-element&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt;
@@ -41245,7 +40851,7 @@
    associate with forms in the face of dramatically bad markup, for
    historical reasons.
 
-  &lt;h6 id=the-insertion&gt;&lt;span class=secno&gt;8.2.4.3.6. &lt;/span&gt;The insertion mode&lt;/h6&gt;
+  &lt;h6 id=the-insertion&gt;&lt;span class=secno&gt;8.2.4.1.6. &lt;/span&gt;The insertion mode&lt;/h6&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=insertion0&gt;insertion mode&lt;/dfn&gt; is &quot;&lt;a
    href=&quot;#before4&quot; title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;. It
@@ -41421,9 +41027,402 @@
   &lt;/ol&gt;
 --&gt;
 
-  &lt;h6 id=the-before&gt;&lt;span class=secno&gt;8.2.4.3.7. &lt;/span&gt;The &lt;dfn id=before4
-   title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;p&gt;`
 
+  &lt;h5 id=the-initial&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;&lt;dfn
+   id=the-initial0&gt;The initial phase&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Initially, the tree construction stage must handle each token emitted
+   from the &lt;a href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage as follows:
+
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER TABULATION,
+    U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM FEED (FF),
+    &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
+
+   &lt;dd&gt;
+    &lt;p&gt;Ignore the token.&lt;/p&gt;
+
+   &lt;dt&gt;A comment token
+
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt; object
+     with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data given in
+     the comment token.&lt;/p&gt;
+
+   &lt;dt&gt;A DOCTYPE token
+
+   &lt;dd&gt;
+    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
+     case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, or if
+     the token's public identifier is not missing, or if the token's system
+     identifier is not missing, then there is a &lt;a href=&quot;#parse0&quot;&gt;parse
+     error&lt;/a&gt;. Conformance checkers may, instead of reporting this error,
+     switch to a conformance checking mode for another language (e.g. based
+     on the DOCTYPE token a conformance checker could recognise that the
+     document is an HTML4-era document, and defer to an HTML4 conformance
+     checker.)&lt;/p&gt;
+
+    &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
+     node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute set to the name
+     given in the DOCTYPE token; the &lt;code title=&quot;&quot;&gt;publicId&lt;/code&gt; attribute
+     set to the public identifier given in the DOCTYPE token, or the empty
+     string if the public identifier was not set; the &lt;code
+     title=&quot;&quot;&gt;systemId&lt;/code&gt; attribute set to the system identifier given in
+     the DOCTYPE token, or the empty string if the system identifier was not
+     set; and the other attributes specific to &lt;code&gt;DocumentType&lt;/code&gt;
+     objects set to null and empty lists as appropriate. Associate the
+     &lt;code&gt;DocumentType&lt;/code&gt; node with the &lt;code&gt;Document&lt;/code&gt; object so
+     that it is returned as the value of the &lt;code title=&quot;&quot;&gt;doctype&lt;/code&gt;
+     attribute of the &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
+
+    &lt;p id=quirks-mode-doctypes&gt;Then, if the DOCTYPE token matches one of the
+     conditions in the following list, then set the document to &lt;a
+     href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt;:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;
+     &lt;li&gt; The &lt;i&gt;force-quirks flag&lt;/i&gt; is set to &lt;i&gt;on&lt;/i&gt;.
+
+     &lt;li&gt; The name is set to anything other than &quot;&lt;code
+      title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;.
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;+//Silmaril//dtd
+      html Pro v0r11 19970101//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AdvaSoft
+      Ltd//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AS//DTD HTML
+      3.0 asWedit + extensions//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0 Level 1//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0 Level 2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0 Strict Level 1//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0 Strict Level 2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0 Strict//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      2.1E//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      3.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      3.0//EN//&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      3.2 Final//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      3.2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      3//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 0//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 1//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 1//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 2//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 3//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Level 3//EN//3.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 0//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 1//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 1//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 2//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 3//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict Level 3//EN//3.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML
+      Strict//EN//3.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
+      HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
+      HTML//EN//2.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD
+      HTML//EN//3.0&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Metrius//DTD
+      Metrius Presentational//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 2.0 HTML Strict//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 2.0 HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 2.0 Tables//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 3.0 HTML Strict//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 3.0 HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD
+      Internet Explorer 3.0 Tables//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm.
+      Corp.//DTD HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm.
+      Corp.//DTD Strict HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
+      Associates//DTD HTML 2.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
+      Associates//DTD HTML Extended 1.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and
+      Associates//DTD HTML Extended Relaxed 1.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad
+      Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML
+      4.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad//DTD
+      HoTMetaL PRO 4.0::19971010::extensions to HTML 4.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Spyglass//DTD
+      HTML 2.0 Extended//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SQ//DTD HTML
+      2.0 HoTMetaL + extensions//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun
+      Microsystems Corp.//DTD HotJava HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun
+      Microsystems Corp.//DTD HotJava Strict HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3
+      1995-03-24//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      3.2 Draft//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      3.2 Final//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      3.2//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      3.2S Draft//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      4.0 Frameset//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      4.0 Transitional//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      Experimental 19960712//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML
+      Experimental 970421//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD W3
+      HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
+      HTML 3.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
+      HTML 3.0//EN//&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3
+      HTML Strict 3.0//EN//&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD
+      Mozilla HTML 2.0//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD
+      Mozilla HTML//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-/W3C/DTD HTML 4.0
+      Transitional/EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
+
+     &lt;li&gt; The system identifier is set to: &quot;&lt;code
+      title=&quot;&quot;&gt;<A HREF="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code">http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code</A>&gt;&quot;
+      
+
+     &lt;li&gt; The system identifier is missing and the public identifier is set
+      to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The system identifier is missing and the public identifier is set
+      to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot;
+    &lt;/ul&gt;
+
+    &lt;p&gt;Otherwise, if the DOCTYPE token matches one of the conditions in the
+     following list, then set the document to &lt;a href=&quot;#limited&quot;&gt;limited
+     quirks mode&lt;/a&gt;:&lt;/p&gt;
+
+    &lt;ul class=brief&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML
+      1.0 Frameset//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML
+      1.0 Transitional//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The system identifier is not missing and the public identifier is
+      set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot;
+
+     &lt;li&gt; The system identifier is not missing and the public identifier is
+      set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot;
+    &lt;/ul&gt;
+
+    &lt;p&gt;The name, system identifier, and public identifier strings must be
+     compared to the values given in the lists above in a
+     case-insensitive&lt;!-- ASCII --&gt; manner.&lt;/p&gt;
+
+    &lt;p&gt;Then, switch to &lt;a href=&quot;#the-root1&quot;&gt;the root element phase&lt;/a&gt; of the
+     tree construction stage.&lt;/p&gt;
+
+   &lt;dt&gt;A start tag token
+
+   &lt;dt&gt;An end tag token
+
+   &lt;dt&gt;A character token that is not one of one of U+0009 CHARACTER
+    TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM
+    FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
+
+   &lt;dt&gt;An end-of-file token
+
+   &lt;dd&gt;
+    &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the document to &lt;a href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Then, switch to &lt;a href=&quot;#the-root1&quot;&gt;the root element phase&lt;/a&gt; of the
+     tree construction stage and reprocess the current token.&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;h5 id=the-root0&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;&lt;dfn id=the-root1&gt;The
+   root element phase&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;After &lt;a href=&quot;#the-initial0&quot;&gt;the initial phase&lt;/a&gt;, as each token is
+   emitted from the &lt;a href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage, it must
+   be processed as described in this section.
+
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;A DOCTYPE token
+
+   &lt;dd&gt;
+    &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
+
+   &lt;dt&gt;A comment token
+
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt; object
+     with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data given in
+     the comment token.&lt;/p&gt;
+
+   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER TABULATION,
+    U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM FEED (FF),
+    &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
+
+   &lt;dd&gt;
+    &lt;p&gt;Ignore the token.&lt;/p&gt;
+
+   &lt;dt&gt;A character token that is &lt;em&gt;not&lt;/em&gt; one of U+0009 CHARACTER
+    TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C FORM
+    FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
+
+   &lt;dt&gt;A start tag token
+
+   &lt;dt&gt;An end tag token
+
+   &lt;dt&gt;An end-of-file token
+
+   &lt;dd&gt;
+    &lt;p id=parser-appcache&gt;If the token is a start tag token with the tag name
+     &quot;html&quot;, and it has an attribute &quot;manifest&quot;, then run the &lt;a
+     href=&quot;#application2&quot;
+     title=concept-appcache-init-with-attribute&gt;application cache selection
+     algorithm&lt;/a&gt; with the value of that attribute as the manifest URI.
+     Otherwise, run the &lt;a href=&quot;#application3&quot;
+     title=concept-appcache-init-no-attribute&gt;application cache selection
+     algorithm&lt;/a&gt; with no manifest.&lt;/p&gt;
+
+    &lt;p&gt;Create an &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; node
+     with the tag name &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt;, in the &lt;a
+     href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;. Append it to the
+     &lt;code&gt;Document&lt;/code&gt; object. Switch to &lt;a href=&quot;#the-main0&quot;&gt;the main
+     phase&lt;/a&gt; and reprocess the current token.&lt;/p&gt;
+
+    &lt;p class=big-issue&gt;Should probably make end tags be ignored, so that
+     &quot;&lt;/head&gt;&lt;!-- --&gt;&lt;html&gt;&quot; puts the comment before the root node
+     (or should we?)&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;The root element can end up being removed from the &lt;code&gt;Document&lt;/code&gt;
+   object, e.g. by scripts; nothing in particular happens in such cases,
+   content continues being appended to the nodes as described in the next
+   section.
+
+  &lt;h5 id=the-before&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;The &lt;dfn id=before4
+   title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
+
   &lt;p&gt;Handle the token as follows:
 
   &lt;dl class=switch&gt;
@@ -41514,8 +41513,8 @@
      after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-inhead&gt;&lt;span class=secno&gt;8.2.4.3.8. &lt;/span&gt;The &lt;dfn
-   id=in-head title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-inhead&gt;&lt;span class=secno&gt;8.2.4.5. &lt;/span&gt;The &lt;dfn
+   id=in-head title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -41765,9 +41764,9 @@
      get put into the head. Do we want to copy that?&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;8.2.4.3.9. &lt;/span&gt;The
+  &lt;h5 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;8.2.4.6. &lt;/span&gt;The
    &lt;dfn id=in-head0 title=&quot;insertion mode: in head noscript&quot;&gt;in head
-   noscript&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+   noscript&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -41833,8 +41832,8 @@
      name &quot;noscript&quot; had been seen and reprocess the current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=the-after&gt;&lt;span class=secno&gt;8.2.4.3.10. &lt;/span&gt;The &lt;dfn id=after4
-   title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=the-after&gt;&lt;span class=secno&gt;8.2.4.7. &lt;/span&gt;The &lt;dfn id=after4
+   title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -41916,8 +41915,8 @@
      had been seen, and then reprocess the current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-inbody&gt;&lt;span class=secno&gt;8.2.4.3.11. &lt;/span&gt;The &lt;dfn
-   id=in-body title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-inbody&gt;&lt;span class=secno&gt;8.2.4.8. &lt;/span&gt;The &lt;dfn
+   id=in-body title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -42872,8 +42871,8 @@
     &lt;/ol&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-intable&gt;&lt;span class=secno&gt;8.2.4.3.12. &lt;/span&gt;The &lt;dfn
-   id=in-table title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-intable&gt;&lt;span class=secno&gt;8.2.4.9. &lt;/span&gt;The &lt;dfn
+   id=in-table title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;dl class=switch&gt;
    &lt;dt&gt;An end-of-file token
@@ -43049,9 +43048,9 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h6 id=parsing-main-incaption&gt;&lt;span class=secno&gt;8.2.4.3.13. &lt;/span&gt;The &lt;dfn
+  &lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;8.2.4.10. &lt;/span&gt;The &lt;dfn
    id=in-caption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;
-   insertion mode&lt;/h6&gt;
+   insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -43109,9 +43108,9 @@
      was &quot;&lt;a href=&quot;#in-body&quot; title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;8.2.4.3.14. &lt;/span&gt;The
-   &lt;dfn id=in-column title=&quot;insertion mode: in column group&quot;&gt;in column
-   group&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;8.2.4.11. &lt;/span&gt;The &lt;dfn
+   id=in-column title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;
+   insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -43185,9 +43184,9 @@
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-intbody&gt;&lt;span class=secno&gt;8.2.4.3.15. &lt;/span&gt;The &lt;dfn
+  &lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;8.2.4.12. &lt;/span&gt;The &lt;dfn
    id=in-table0 title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;
-   insertion mode&lt;/h6&gt;
+   insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -43275,8 +43274,8 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h6 id=parsing-main-intr&gt;&lt;span class=secno&gt;8.2.4.3.16. &lt;/span&gt;The &lt;dfn
-   id=in-row title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;8.2.4.13. &lt;/span&gt;The &lt;dfn
+   id=in-row title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -43364,8 +43363,8 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h6 id=parsing-main-intd&gt;&lt;span class=secno&gt;8.2.4.3.17. &lt;/span&gt;The &lt;dfn
-   id=in-cell title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;8.2.4.14. &lt;/span&gt;The &lt;dfn
+   id=in-cell title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.
 
@@ -43463,9 +43462,9 @@
    neither when the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; is &quot;&lt;a
    href=&quot;#in-cell&quot; title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;.
 
-  &lt;h6 id=parsing-main-inselect&gt;&lt;span class=secno&gt;8.2.4.3.18. &lt;/span&gt;The &lt;dfn
+  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;8.2.4.15. &lt;/span&gt;The &lt;dfn
    id=in-select title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt; insertion
-   mode&lt;/h6&gt;
+   mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -43582,9 +43581,9 @@
     &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;8.2.4.3.19. &lt;/span&gt;The &lt;dfn
+  &lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;8.2.4.16. &lt;/span&gt;The &lt;dfn
    id=after5 title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt; insertion
-   mode&lt;/h6&gt;
+   mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -43644,9 +43643,9 @@
      title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot; and reprocess the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;8.2.4.3.20. &lt;/span&gt;The
-   &lt;dfn id=in-frameset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;
-   insertion mode&lt;/h6&gt;
+  &lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;8.2.4.17. &lt;/span&gt;The &lt;dfn
+   id=in-frameset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;
+   insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -43727,9 +43726,9 @@
     &lt;p&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;8.2.4.3.21. &lt;/span&gt;The
+  &lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;8.2.4.18. &lt;/span&gt;The
    &lt;dfn id=after6 title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;
-   insertion mode&lt;/h6&gt;
+   insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:
 
@@ -43788,7 +43787,7 @@
    that do support frames but want to show the NOFRAMES content. Supporting
    the former is easy; supporting the latter is harder.
 
-  &lt;h5 id=the-trailing&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;&lt;dfn
+  &lt;h5 id=the-trailing&gt;&lt;span class=secno&gt;8.2.4.19. &lt;/span&gt;&lt;dfn
    id=the-trailing0&gt;The trailing end phase&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;After &lt;a href=&quot;#the-main0&quot;&gt;the main phase&lt;/a&gt;, as each token is emitted

Modified: source
===================================================================
--- source	2008-03-03 01:07:54 UTC (rev 1310)
+++ source	2008-03-03 01:11:51 UTC (rev 1311)
@@ -37759,243 +37759,6 @@
   depths.&lt;/p&gt;
 
 
-  &lt;h5&gt;&lt;dfn&gt;The initial phase&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;Initially, the tree construction stage must handle each token
-  emitted from the &lt;span&gt;tokenisation&lt;/span&gt; stage as follows:&lt;/p&gt;
-
-  &lt;dl class=&quot;switch&quot;&gt;
-
-   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
-   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020
-   SPACE&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A comment token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
-    object with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the
-    data given in the comment token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
-    case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;,
-    or if the token's public identifier is not missing, or if the
-    token's system identifier is not missing, then there is a
-    &lt;span&gt;parse error&lt;/span&gt;. Conformance checkers may, instead of
-    reporting this error, switch to a conformance checking mode for
-    another language (e.g. based on the DOCTYPE token a conformance
-    checker could recognise that the document is an HTML4-era
-    document, and defer to an HTML4 conformance checker.)&lt;/p&gt;
-
-    &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the
-    &lt;code&gt;Document&lt;/code&gt; node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt;
-    attribute set to the name given in the DOCTYPE token; the &lt;code
-    title=&quot;&quot;&gt;publicId&lt;/code&gt; attribute set to the public identifier
-    given in the DOCTYPE token, or the empty string if the public
-    identifier was not set; the &lt;code title=&quot;&quot;&gt;systemId&lt;/code&gt;
-    attribute set to the system identifier given in the DOCTYPE token,
-    or the empty string if the system identifier was not set; and the
-    other attributes specific to &lt;code&gt;DocumentType&lt;/code&gt; objects set
-    to null and empty lists as appropriate. Associate the
-    &lt;code&gt;DocumentType&lt;/code&gt; node with the &lt;code&gt;Document&lt;/code&gt;
-    object so that it is returned as the value of the &lt;code
-    title=&quot;&quot;&gt;doctype&lt;/code&gt; attribute of the &lt;code&gt;Document&lt;/code&gt;
-    object.&lt;/p&gt;
-
-    &lt;p id=&quot;quirks-mode-doctypes&quot;&gt;Then, if the DOCTYPE
-    token matches one of the conditions in the following list, then
-    set the document to &lt;span&gt;quirks mode&lt;/span&gt;:&lt;/p&gt;
-
-    &lt;ul class=&quot;brief&quot;&gt;
-     &lt;li&gt; The &lt;i&gt;force-quirks flag&lt;/i&gt; is set to &lt;i&gt;on&lt;/i&gt;. &lt;/li&gt;
-     &lt;li&gt; The name is set to anything other than &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;. &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;+//Silmaril//dtd html Pro v0r11 19970101//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AdvaSoft Ltd//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AS//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.1E//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.2 Final//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 0//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 1//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 2//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 3//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 0//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 1//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 2//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 3//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Metrius//DTD Metrius Presentational//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 Tables//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 Tables//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm. Corp.//DTD HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm. Corp.//DTD Strict HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML Extended 1.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML Extended Relaxed 1.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad//DTD HoTMetaL PRO 4.0::19971010::extensions to HTML 4.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Spyglass//DTD HTML 2.0 Extended//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SQ//DTD HTML 2.0 HoTMetaL + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun Microsystems Corp.//DTD HotJava HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun Microsystems Corp.//DTD HotJava Strict HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3 1995-03-24//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2 Draft//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2 Final//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2S Draft//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.0 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.0 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML Experimental 19960712//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML Experimental 970421//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD W3 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML 3.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML Strict 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD Mozilla HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD Mozilla HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-/W3C/DTD HTML 4.0 Transitional/EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The system identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code">http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code</A>&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The system identifier is missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The system identifier is missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
-    &lt;/ul&gt;
-
-    &lt;p&gt;Otherwise, if the DOCTYPE
-    token matches one of the conditions in the following list, then
-    set the document to &lt;span&gt;limited quirks mode&lt;/span&gt;:&lt;/p&gt;
-
-    &lt;ul class=&quot;brief&quot;&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML 1.0 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML 1.0 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The system identifier is not missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
-     &lt;li&gt; The system identifier is not missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
-    &lt;/ul&gt;
-
-    &lt;p&gt;The name, system identifier, and public identifier strings must
-    be compared to the values given in the lists above in a
-    case-insensitive&lt;!-- ASCII --&gt; manner.&lt;/p&gt;
-
-    &lt;p&gt;Then, switch to &lt;span&gt;the root element phase&lt;/span&gt; of the tree
-    construction stage.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A start tag token&lt;/dt&gt;
-   &lt;dt&gt;An end tag token&lt;/dt&gt;
-   &lt;dt&gt;A character token that is not one of one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
-   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
-   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the document to &lt;span&gt;quirks mode&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Then, switch to &lt;span&gt;the root element phase&lt;/span&gt; of the tree
-    construction stage and reprocess the current token.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-
-  &lt;h5&gt;&lt;dfn&gt;The root element phase&lt;/dfn&gt;&lt;/h5&gt;
-
-  &lt;p&gt;After &lt;span&gt;the initial phase&lt;/span&gt;, as each token is emitted
-  from the &lt;span&gt;tokenisation&lt;/span&gt; stage, it must be processed as
-  described in this section.&lt;/p&gt;
-
-  &lt;dl class=&quot;switch&quot;&gt;
-
-   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A comment token&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
-    object with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the
-    data given in the comment token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
-   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020
-   SPACE&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Ignore the token.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;A character token that is &lt;em&gt;not&lt;/em&gt; one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
-   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
-   &lt;dt&gt;A start tag token&lt;/dt&gt;
-   &lt;dt&gt;An end tag token&lt;/dt&gt;
-   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
-   &lt;dd&gt;
-
-    &lt;p id=&quot;parser-appcache&quot;&gt;If the token is a start tag token with the
-    tag name &quot;html&quot;, and it has an attribute &quot;manifest&quot;, then run
-    the &lt;span title=&quot;concept-appcache-init-with-attribute&quot;&gt;application
-    cache selection algorithm&lt;/span&gt; with the value of that attribute
-    as the manifest URI. Otherwise, run the &lt;span
-    title=&quot;concept-appcache-init-no-attribute&quot;&gt;application cache
-    selection algorithm&lt;/span&gt; with no manifest.&lt;/p&gt;
-
-    &lt;p&gt;Create an &lt;code&gt;HTMLElement&lt;/code&gt; node with the tag name
-    &lt;code&gt;html&lt;/code&gt;, in the &lt;span&gt;HTML namespace&lt;/span&gt;. Append it
-    to the &lt;code&gt;Document&lt;/code&gt; object. Switch to &lt;span&gt;the main
-    phase&lt;/span&gt; and reprocess the current token.&lt;/p&gt;
-
-    &lt;p class=&quot;big-issue&quot;&gt;Should probably make end tags be ignored, so
-    that &quot;&lt;/head&gt;&lt;!-- --&gt;&lt;html&gt;&quot; puts the comment before the
-    root node (or should we?)&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;The root element can end up being removed from the
-  &lt;code&gt;Document&lt;/code&gt; object, e.g. by scripts; nothing in particular
-  happens in such cases, content continues being appended to the nodes
-  as described in the next section.&lt;/p&gt;
-
-
   &lt;h5&gt;&lt;dfn&gt;The main phase&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;After &lt;span&gt;the root element phase&lt;/span&gt;, each token emitted
@@ -38514,10 +38277,247 @@
 
   &lt;/ol&gt;
 --&gt;
+`
 
+  &lt;h5&gt;&lt;dfn&gt;The initial phase&lt;/dfn&gt;&lt;/h5&gt;
 
-  &lt;h6&gt;The &lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;p&gt;Initially, the tree construction stage must handle each token
+  emitted from the &lt;span&gt;tokenisation&lt;/span&gt; stage as follows:&lt;/p&gt;
 
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER
+   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
+   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020
+   SPACE&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A comment token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
+    object with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the
+    data given in the comment token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
+    case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;,
+    or if the token's public identifier is not missing, or if the
+    token's system identifier is not missing, then there is a
+    &lt;span&gt;parse error&lt;/span&gt;. Conformance checkers may, instead of
+    reporting this error, switch to a conformance checking mode for
+    another language (e.g. based on the DOCTYPE token a conformance
+    checker could recognise that the document is an HTML4-era
+    document, and defer to an HTML4 conformance checker.)&lt;/p&gt;
+
+    &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the
+    &lt;code&gt;Document&lt;/code&gt; node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt;
+    attribute set to the name given in the DOCTYPE token; the &lt;code
+    title=&quot;&quot;&gt;publicId&lt;/code&gt; attribute set to the public identifier
+    given in the DOCTYPE token, or the empty string if the public
+    identifier was not set; the &lt;code title=&quot;&quot;&gt;systemId&lt;/code&gt;
+    attribute set to the system identifier given in the DOCTYPE token,
+    or the empty string if the system identifier was not set; and the
+    other attributes specific to &lt;code&gt;DocumentType&lt;/code&gt; objects set
+    to null and empty lists as appropriate. Associate the
+    &lt;code&gt;DocumentType&lt;/code&gt; node with the &lt;code&gt;Document&lt;/code&gt;
+    object so that it is returned as the value of the &lt;code
+    title=&quot;&quot;&gt;doctype&lt;/code&gt; attribute of the &lt;code&gt;Document&lt;/code&gt;
+    object.&lt;/p&gt;
+
+    &lt;p id=&quot;quirks-mode-doctypes&quot;&gt;Then, if the DOCTYPE
+    token matches one of the conditions in the following list, then
+    set the document to &lt;span&gt;quirks mode&lt;/span&gt;:&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt; The &lt;i&gt;force-quirks flag&lt;/i&gt; is set to &lt;i&gt;on&lt;/i&gt;. &lt;/li&gt;
+     &lt;li&gt; The name is set to anything other than &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;. &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;+//Silmaril//dtd html Pro v0r11 19970101//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AdvaSoft Ltd//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//AS//DTD HTML 3.0 asWedit + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0 Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 2.1E//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.2 Final//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3.2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 0//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 1//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 2//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Level 3//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 0//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 1//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 1//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 2//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 3//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict Level 3//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML Strict//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN//2.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//IETF//DTD HTML//EN//3.0&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Metrius//DTD Metrius Presentational//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 2.0 Tables//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 HTML Strict//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Microsoft//DTD Internet Explorer 3.0 Tables//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm. Corp.//DTD HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Netscape Comm. Corp.//DTD Strict HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML Extended 1.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//O'Reilly and Associates//DTD HTML Extended Relaxed 1.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad Software//DTD HoTMetaL PRO 6.0::19990601::extensions to HTML 4.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SoftQuad//DTD HoTMetaL PRO 4.0::19971010::extensions to HTML 4.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Spyglass//DTD HTML 2.0 Extended//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//SQ//DTD HTML 2.0 HoTMetaL + extensions//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun Microsystems Corp.//DTD HotJava HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//Sun Microsystems Corp.//DTD HotJava Strict HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3 1995-03-24//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2 Draft//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2 Final//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 3.2S Draft//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.0 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.0 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML Experimental 19960712//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML Experimental 970421//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD W3 HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML 3.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3O//DTD W3 HTML Strict 3.0//EN//&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD Mozilla HTML 2.0//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//WebTechs//DTD Mozilla HTML//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-/W3C/DTD HTML 4.0 Transitional/EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The system identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code">http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd&lt;/code</A>&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The system identifier is missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The system identifier is missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;Otherwise, if the DOCTYPE
+    token matches one of the conditions in the following list, then
+    set the document to &lt;span&gt;limited quirks mode&lt;/span&gt;:&lt;/p&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML 1.0 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD XHTML 1.0 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The system identifier is not missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Frameset//EN&lt;/code&gt;&quot; &lt;/li&gt;
+     &lt;li&gt; The system identifier is not missing and the public identifier is set to: &quot;&lt;code title=&quot;&quot;&gt;-//W3C//DTD HTML 4.01 Transitional//EN&lt;/code&gt;&quot; &lt;/li&gt;
+    &lt;/ul&gt;
+
+    &lt;p&gt;The name, system identifier, and public identifier strings must
+    be compared to the values given in the lists above in a
+    case-insensitive&lt;!-- ASCII --&gt; manner.&lt;/p&gt;
+
+    &lt;p&gt;Then, switch to &lt;span&gt;the root element phase&lt;/span&gt; of the tree
+    construction stage.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A start tag token&lt;/dt&gt;
+   &lt;dt&gt;An end tag token&lt;/dt&gt;
+   &lt;dt&gt;A character token that is not one of one of U+0009 CHARACTER
+   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
+   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Set the document to &lt;span&gt;quirks mode&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Then, switch to &lt;span&gt;the root element phase&lt;/span&gt; of the tree
+    construction stage and reprocess the current token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;The root element phase&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;After &lt;span&gt;the initial phase&lt;/span&gt;, as each token is emitted
+  from the &lt;span&gt;tokenisation&lt;/span&gt; stage, it must be processed as
+  described in this section.&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;&lt;span&gt;Parse error&lt;/span&gt;. Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A comment token&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
+    object with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the
+    data given in the comment token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A character token that is one of one of U+0009 CHARACTER
+   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
+   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020
+   SPACE&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Ignore the token.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;A character token that is &lt;em&gt;not&lt;/em&gt; one of U+0009 CHARACTER
+   TABULATION, U+000A LINE FEED (LF), U+000B LINE TABULATION, U+000C
+   FORM FEED (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;A start tag token&lt;/dt&gt;
+   &lt;dt&gt;An end tag token&lt;/dt&gt;
+   &lt;dt&gt;An end-of-file token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p id=&quot;parser-appcache&quot;&gt;If the token is a start tag token with the
+    tag name &quot;html&quot;, and it has an attribute &quot;manifest&quot;, then run
+    the &lt;span title=&quot;concept-appcache-init-with-attribute&quot;&gt;application
+    cache selection algorithm&lt;/span&gt; with the value of that attribute
+    as the manifest URI. Otherwise, run the &lt;span
+    title=&quot;concept-appcache-init-no-attribute&quot;&gt;application cache
+    selection algorithm&lt;/span&gt; with no manifest.&lt;/p&gt;
+
+    &lt;p&gt;Create an &lt;code&gt;HTMLElement&lt;/code&gt; node with the tag name
+    &lt;code&gt;html&lt;/code&gt;, in the &lt;span&gt;HTML namespace&lt;/span&gt;. Append it
+    to the &lt;code&gt;Document&lt;/code&gt; object. Switch to &lt;span&gt;the main
+    phase&lt;/span&gt; and reprocess the current token.&lt;/p&gt;
+
+    &lt;p class=&quot;big-issue&quot;&gt;Should probably make end tags be ignored, so
+    that &quot;&lt;/head&gt;&lt;!-- --&gt;&lt;html&gt;&quot; puts the comment before the
+    root node (or should we?)&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The root element can end up being removed from the
+  &lt;code&gt;Document&lt;/code&gt; object, e.g. by scripts; nothing in particular
+  happens in such cases, content continues being appended to the nodes
+  as described in the next section.&lt;/p&gt;
+
+
+  &lt;h5&gt;The &lt;dfn title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
+
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
@@ -38625,7 +38625,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-inhead&quot;&gt;The &lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-inhead&quot;&gt;The &lt;dfn title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -38889,7 +38889,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-inheadnoscript&quot;&gt;The &lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-inheadnoscript&quot;&gt;The &lt;dfn title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -38958,7 +38958,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6&gt;The &lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
@@ -39050,7 +39050,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-inbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-inbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
@@ -40087,7 +40087,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-intable&quot;&gt;The &lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-intable&quot;&gt;The &lt;dfn title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;dl class=&quot;switch&quot;&gt;
 
@@ -40275,7 +40275,7 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-incaption&quot;&gt;The &lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-incaption&quot;&gt;The &lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -40339,7 +40339,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-incolgroup&quot;&gt;The &lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-incolgroup&quot;&gt;The &lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -40421,7 +40421,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-intbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-intbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -40518,7 +40518,7 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-intr&quot;&gt;The &lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-intr&quot;&gt;The &lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -40617,7 +40617,7 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-intd&quot;&gt;The &lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-intd&quot;&gt;The &lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows.&lt;/p&gt;
 
@@ -40724,7 +40724,7 @@
   cell&lt;/span&gt;&quot;.&lt;/p&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-inselect&quot;&gt;The &lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-inselect&quot;&gt;The &lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
@@ -40861,7 +40861,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-afterbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-afterbody&quot;&gt;The &lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
@@ -40928,7 +40928,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-inframeset&quot;&gt;The &lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-inframeset&quot;&gt;The &lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 
@@ -41015,7 +41015,7 @@
   &lt;/dl&gt;
 
 
-  &lt;h6 id=&quot;parsing-main-afterframeset&quot;&gt;The &lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt; insertion mode&lt;/h6&gt;
+  &lt;h5 id=&quot;parsing-main-afterframeset&quot;&gt;The &lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Handle the token as follows:&lt;/p&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008212.html">[html5] r1310 - /
</A></li>
	<LI>Next message: <A HREF="008214.html">[html5] r1312 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8213">[ date ]</a>
              <a href="thread.html#8213">[ thread ]</a>
              <a href="subject.html#8213">[ subject ]</a>
              <a href="author.html#8213">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
