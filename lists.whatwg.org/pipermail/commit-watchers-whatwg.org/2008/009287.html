<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2403 - [gow] (2) Revamp the load() algorithm so that it	tries each possible file in turn.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2403%20-%20%5Bgow%5D%20%282%29%20Revamp%20the%20load%28%29%20algorithm%20so%20that%20it%0A%09tries%20each%20possible%20file%20in%20turn.&In-Reply-To=%3C20081114065024.C566438E063%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009286.html">
   <LINK REL="Next"  HREF="009288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2403 - [gow] (2) Revamp the load() algorithm so that it	tries each possible file in turn.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2403%20-%20%5Bgow%5D%20%282%29%20Revamp%20the%20load%28%29%20algorithm%20so%20that%20it%0A%09tries%20each%20possible%20file%20in%20turn.&In-Reply-To=%3C20081114065024.C566438E063%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2403 - [gow] (2) Revamp the load() algorithm so that it	tries each possible file in turn.">whatwg at whatwg.org
       </A><BR>
    <I>Thu Nov 13 22:50:24 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009286.html">[html5] r2402 - [e] (0) c/p error (credit: mg)
</A></li>
        <LI>Next message: <A HREF="009288.html">[html5] r2404 - [gw] (2) Make &lt;source type&gt; optional. Move	canPlayType from navigator to HTMLMed [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9287">[ date ]</a>
              <a href="thread.html#9287">[ thread ]</a>
              <a href="subject.html#9287">[ subject ]</a>
              <a href="author.html#9287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-11-13 22:50:23 -0800 (Thu, 13 Nov 2008)
New Revision: 2403

Modified:
   index
   source
Log:
[gow] (2) Revamp the load() algorithm so that it tries each possible file in turn.

Modified: index
===================================================================
--- index	2008-11-14 04:03:26 UTC (rev 2402)
+++ index	2008-11-14 06:50:23 UTC (rev 2403)
@@ -16967,6 +16967,7 @@
   const unsigned short &lt;a href=#dom-mediaerror-media_err_aborted title=dom-MediaError-MEDIA_ERR_ABORTED&gt;MEDIA_ERR_ABORTED&lt;/a&gt; = 1;
   const unsigned short &lt;a href=#dom-mediaerror-media_err_network title=dom-MediaError-MEDIA_ERR_NETWORK&gt;MEDIA_ERR_NETWORK&lt;/a&gt; = 2;
   const unsigned short &lt;a href=#dom-mediaerror-media_err_decode title=dom-MediaError-MEDIA_ERR_DECODE&gt;MEDIA_ERR_DECODE&lt;/a&gt; = 3;
+  const unsigned short &lt;a href=#dom-mediaerror-media_err_decode title=dom-MediaError-MEDIA_ERR_DECODE&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/a&gt; = 4;
   readonly attribute unsigned short &lt;a href=#dom-mediaerror-code title=dom-MediaError-code&gt;code&lt;/a&gt;;
 };&lt;/pre&gt;
 
@@ -16982,13 +16983,19 @@
    &lt;dt&gt;&lt;dfn id=dom-mediaerror-media_err_network title=dom-MediaError-MEDIA_ERR_NETWORK&gt;&lt;code&gt;MEDIA_ERR_NETWORK&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
 
    &lt;dd&gt;A network error of some description caused the user agent to
-   stop fetching the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.&lt;/dd&gt;
+   stop fetching the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, after the resource
+   was established to be usable.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=dom-mediaerror-media_err_decode title=dom-MediaError-MEDIA_ERR_DECODE&gt;&lt;code&gt;MEDIA_ERR_DECODE&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
 
    &lt;dd&gt;An error of some description occurred while decoding the
-   &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, after the resource was established to
+   be usable.&lt;/dd&gt;
 
+   &lt;dt&gt;&lt;dfn id=dom-mediaerror-media_err_none_supported title=dom-MediaError-MEDIA_ERR_NONE_SUPPORTED&gt;&lt;code&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/code&gt;&lt;/dfn&gt; (numeric value 4)&lt;/dt&gt;
+
+   &lt;dd&gt;No suitable &lt;a href=#media-resource&gt;media resource&lt;/a&gt; could be found.&lt;/dd&gt;
+
   &lt;/dl&gt;&lt;h5 id=location-of-the-media-resource&gt;&lt;span class=secno&gt;4.8.10.2 &lt;/span&gt;Location of the media resource&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-media-src title=attr-media-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; content
@@ -17017,61 +17024,90 @@
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the respective content attribute of the same
   name.&lt;/p&gt;
 
-  &lt;p&gt;To &lt;dfn id=pick-a-media-resource&gt;pick a media resource&lt;/dfn&gt; for a &lt;a href=#media-element&gt;media
-  element&lt;/a&gt;, a user agent must use the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-media-currentsrc title=dom-media-currentSrc&gt;&lt;code&gt;currentSrc&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute is initially the empty string. Its value is changed by the
+  algorithm for the &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method
+  defined below.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt; be &lt;i&gt;none&lt;/i&gt;.&lt;/li&gt;
+  &lt;p&gt;The &lt;dfn id=pixel-ratio-override&gt;pixel ratio override&lt;/dfn&gt; of a &lt;a href=#media-element&gt;media
+  element&lt;/a&gt; is initially &lt;i&gt;none&lt;/i&gt;. Its value is changed by the
+  algorithm for the &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method
+  defined below.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;code title=attr-media-src&gt;&lt;a href=#attr-media-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, then &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; given in
-   that attribute. If that is successful, then the resulting
-   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is the address of the &lt;a href=#media-resource&gt;media
-   resource&lt;/a&gt;; jump to the last step.&lt;/li&gt;
+  &lt;p&gt;To &lt;dfn id=generate-the-list-of-potential-media-resources&gt;generate the list of potential media resources&lt;/dfn&gt; for
+  a &lt;a href=#media-element&gt;media element&lt;/a&gt;, a user agent must use the following
+  steps. These steps return a list of items, each consisting of an
+  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; giving a resource's address, and the
+  resource's pixel ratio override (either a number or
+  &lt;i&gt;none&lt;/i&gt;).&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the first
+  &lt;ol&gt;&lt;li&gt;
+
+    &lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt; has a &lt;code title=attr-media-src&gt;&lt;a href=#attr-media-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, then run these
+    substeps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the
+     &lt;a href=#url&gt;URL&lt;/a&gt; given in that attribute.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;If that is successful, then return a list consisting of
+     only one entry, with the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; as
+     the resource's address, and with the resource's pixel ratio
+     override being &lt;i&gt;none&lt;/i&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, return the empty list.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Abort the algorithm.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;p&gt;Otherwise, the &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt; elements will be used.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt; has no &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt;
+   element children, then return the empty the list and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an empty list.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the first
    &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt; element child in the &lt;a href=#media-element&gt;media
-   element&lt;/a&gt;, or null if there is no such child.&lt;/li&gt;
+   element&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: this is the start of the loop that looks at the
    &lt;code&gt;&lt;a href=#the-source-element&gt;source&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not null and it has a
-   &lt;code title=attr-source-pixelratio&gt;&lt;a href=#attr-source-pixelratio&gt;pixelratio&lt;/a&gt;&lt;/code&gt; attribute,
-   and the result of applying the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules for parsing floating
-   point number values&lt;/a&gt; to the value of that attribute is not an
-   error, then let the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt; be that result; otherwise, reset it back to
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; has a &lt;code title=attr-source-pixelratio&gt;&lt;a href=#attr-source-pixelratio&gt;pixelratio&lt;/a&gt;&lt;/code&gt; attribute, and the
+   result of applying the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules for parsing floating point
+   number values&lt;/a&gt; to the value of that attribute is not an
+   error, then let the &lt;var title=&quot;&quot;&gt;candidate pixel ratio
+   override&lt;/var&gt; be that result. Otherwise, let it be
    &lt;i&gt;none&lt;/i&gt;.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If either:&lt;/p&gt;
+    &lt;p&gt;If all the following conditions are true:&lt;/p&gt;
 
-    &lt;ul&gt;&lt;li&gt;&lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or&lt;/li&gt;
+    &lt;ul&gt;&lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has no &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, or&lt;/li&gt;
-
-     &lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the
+     &lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolving&lt;/a&gt; the
      &lt;a href=#url&gt;URL&lt;/a&gt; given by the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;
-     element's &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
-     fails, or&lt;/li&gt;
+     element's &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute does
+     not fail&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code title=attr-source-type&gt;&lt;a href=#attr-source-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and that
-     attribute's value, when parsed as a MIME type, does not represent
-     a type that the user agent can render (including any codecs
-     described by the &lt;code title=&quot;&quot;&gt;codec&lt;/code&gt; parameter), or &lt;a href=#refsRFC2046&gt;[RFC2046]&lt;/a&gt; &lt;a href=#refsRFC4281&gt;[RFC4281]&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code title=attr-source-type&gt;&lt;a href=#attr-source-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and that
+     attribute's value, when parsed as a MIME type (including any
+     codecs described by the &lt;code title=&quot;&quot;&gt;codec&lt;/code&gt; parameter),
+     does not represent a type that the user agent knows it cannot
+     render &lt;a href=#refsRFC2046&gt;[RFC2046]&lt;/a&gt; &lt;a href=#refsRFC4281&gt;[RFC4281]&lt;/a&gt;&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code title=attr-source-media&gt;&lt;a href=#attr-source-media&gt;media&lt;/a&gt;&lt;/code&gt; attribute and that
-     attribute's value, when processed according to the rules for &lt;a href=#mq&gt;media queries&lt;/a&gt;, does not match the current
-     environment, &lt;a href=#refsMQ&gt;[MQ]&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code title=attr-source-media&gt;&lt;a href=#attr-source-media&gt;media&lt;/a&gt;&lt;/code&gt; attribute and that
+     attribute's value, when processed according to the rules for &lt;a href=#mq&gt;media queries&lt;/a&gt;, matches the current environment &lt;a href=#refsMQ&gt;[MQ]&lt;/a&gt;&lt;/li&gt;
 
-    &lt;/ul&gt;&lt;p&gt;...then the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not suitable; go
-    to the next step.&lt;/p&gt;
+    &lt;/ul&gt;&lt;p&gt;...then append an item to the &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; list
+    consisting of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; resulting from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; given
+    in that &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element's &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute as the resource's
+    address, and the &lt;var title=&quot;&quot;&gt;candidate pixel ratio
+    override&lt;/var&gt; as the resource's pixel ratio override.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, the result of &lt;a href=#resolve-a-url title=&quot;resolve a
-    url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; given in that &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element's &lt;code title=attr-source-src&gt;&lt;a href=#attr-source-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is the address of the
-    &lt;a href=#media-resource&gt;media resource&lt;/a&gt;; jump to the last step.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the next
@@ -17082,26 +17118,10 @@
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not null, return to the
    step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;There is no &lt;a href=#media-resource&gt;media resource&lt;/a&gt;. Abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let the address of the &lt;dfn id=chosen-media-resource&gt;chosen media resource&lt;/dfn&gt; be
-   the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that was found before jumping to this
-   step, and let its &lt;dfn id=pixel-ratio-override&gt;pixel ratio override&lt;/dfn&gt; be the value of
-   the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt;.&lt;/li&gt;
+  &lt;/ol&gt;&lt;h5 id=network-states&gt;&lt;span class=secno&gt;4.8.10.3 &lt;/span&gt;Network states&lt;/h5&gt;
 
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-media-currentsrc title=dom-media-currentSrc&gt;&lt;code&gt;currentSrc&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must return the empty string if the &lt;a href=#media-element&gt;media
-  element&lt;/a&gt;'s &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; has the value
-  &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, and the
-  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that is the address of the &lt;a href=#chosen-media-resource&gt;chosen
-  media resource&lt;/a&gt; otherwise.&lt;/p&gt;
-
-
-
-  &lt;h5 id=network-states&gt;&lt;span class=secno&gt;4.8.10.3 &lt;/span&gt;Network states&lt;/h5&gt;
-
   &lt;p&gt;As &lt;a href=#media-element title=&quot;media element&quot;&gt;media elements&lt;/a&gt; interact
   with the network, their current network activity is represented by
   the &lt;dfn id=dom-media-networkstate title=dom-media-networkState&gt;&lt;code&gt;networkState&lt;/code&gt;&lt;/dfn&gt;
@@ -17115,14 +17135,13 @@
 
    &lt;dt&gt;&lt;dfn id=dom-media-network_idle title=dom-media-NETWORK_IDLE&gt;&lt;code&gt;NETWORK_IDLE&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
 
-   &lt;dd&gt;The element has a &lt;a href=#chosen-media-resource&gt;chosen media resource&lt;/a&gt;, but the
-   user agent is not using the network to obtain any more of the
-   resource than is already obtained at this time.&lt;/dd&gt;
+   &lt;dd&gt;The element's &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method
+   algorithm is active, but it is not actually using the network at
+   this time.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=dom-media-network_loading title=dom-media-NETWORK_LOADING&gt;&lt;code&gt;NETWORK_LOADING&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
 
-   &lt;dd&gt;The user agent is actively trying to download data for the
-   &lt;a href=#chosen-media-resource&gt;chosen media resource&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;The user agent is actively trying to download data.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=dom-media-network_loaded title=dom-media-NETWORK_LOADED&gt;&lt;code&gt;NETWORK_LOADED&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
 
@@ -17164,314 +17183,370 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Any already-running instance of this algorithm for this
-   element must be aborted. If those method calls have not yet
-   returned, they must finish the step they are on, and then
-   immediately return. This is not blocking; this algorithm must not
-   wait for the earlier instances to abort before continuing.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Abort any already-running instance of this algorithm for
+   this element. If those method calls have not yet returned, they
+   must finish the step they are on, and then immediately return. This
+   is not blocking; this algorithm must not wait for the earlier
+   instances to abort before continuing.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the element's &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; is true, then the
-   &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; must be set to false, the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute must be set to a new
+   &lt;li&gt;&lt;p&gt;If the element's &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; is true, then set
+   the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false, set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute to a new
    &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;code title=dom-MediaError-MEDIA_ERR_ABORTED&gt;&lt;a href=#dom-mediaerror-media_err_aborted&gt;MEDIA_ERR_ABORTED&lt;/a&gt;&lt;/code&gt;,
-   and the user agent must &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called
-   &lt;code title=event-abort&gt;&lt;a href=#event-abort&gt;abort&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+   and &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-abort&gt;&lt;a href=#event-abort&gt;abort&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
    element&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
-   must be set to null and the &lt;a href=#autoplaying-flag&gt;autoplaying flag&lt;/a&gt; must be
-   set to true.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
+   to null and the &lt;a href=#autoplaying-flag&gt;autoplaying flag&lt;/a&gt; to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=dom-media-playbackRate&gt;&lt;a href=#dom-media-playbackrate&gt;playbackRate&lt;/a&gt;&lt;/code&gt;
-   attribute must be set to the value of the &lt;code title=dom-media-defaultPlaybackRate&gt;&lt;a href=#dom-media-defaultplaybackrate&gt;defaultPlaybackRate&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-playbackRate&gt;&lt;a href=#dom-media-playbackrate&gt;playbackRate&lt;/a&gt;&lt;/code&gt; attribute to the
+   value of the &lt;code title=dom-media-defaultPlaybackRate&gt;&lt;a href=#dom-media-defaultplaybackrate&gt;defaultPlaybackRate&lt;/a&gt;&lt;/code&gt;
    attribute.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; is not set to
    &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt;, then
-   the following substeps must be followed:&lt;/p&gt;
+   run these substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;!--&lt;li&gt;Let &lt;var title=&quot;&quot;&gt;events&lt;/var&gt; be a list of event names,
-     initially empty.&lt;/li&gt;--&gt;&lt;li&gt;The &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt;
-     attribute must be set to &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt;&lt;!--, and the
-     user agent must add &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; to
-     the &lt;var title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If a fetching process is in progress for the &lt;a href=#media-element&gt;media
+     element&lt;/a&gt;, the user agent should stop it.&lt;/li&gt;
 
+     &lt;!--&lt;li&gt;Let &lt;var title=&quot;&quot;&gt;events&lt;/var&gt; be a list of event names,
+     initially empty.&lt;/li&gt;--&gt;
+
+     &lt;li&gt;Set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
+     &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt;&lt;!--,
+     and add &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; to the &lt;var
+     title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
+
      &lt;li&gt;If &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is
-     not set to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, it must be
-     set to that state&lt;!-- and the user agent must add &lt;code
+     not set to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then set it
+     to that state&lt;!-- and add &lt;code
      title=&quot;event-dataunavailable&quot;&gt;dataunavailable&lt;/code&gt; to the &lt;var
      title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
 
      &lt;li&gt;If the &lt;code title=dom-media-paused&gt;&lt;a href=#dom-media-paused&gt;paused&lt;/a&gt;&lt;/code&gt; attribute
-     is false, it must be set to true&lt;!--, and the user agent must add
-     &lt;code title=&quot;event-pause&quot;&gt;pause&lt;/code&gt; to the &lt;var
+     is false, then set to true&lt;!--, and add &lt;code
+     title=&quot;event-pause&quot;&gt;pause&lt;/code&gt; to the &lt;var
      title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
 
-     &lt;li&gt;If &lt;code title=dom-media-seeking&gt;&lt;a href=#dom-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt; is true, it
-     must be set to false.&lt;/li&gt;
+     &lt;li&gt;If &lt;code title=dom-media-seeking&gt;&lt;a href=#dom-media-seeking&gt;seeking&lt;/a&gt;&lt;/code&gt; is true,
+     set it to false.&lt;/li&gt;
 
-     &lt;li&gt;The &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; must be set to
-     0.&lt;/li&gt;
+     &lt;li&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to 0.&lt;/li&gt;
 
-     &lt;!--&lt;li&gt;The user agent must &lt;span&gt;fire a simple event&lt;/span&gt; at
-     the &lt;span&gt;media element&lt;/span&gt; for each event name in &lt;var
-     title=&quot;&quot;&gt;events&lt;/var&gt;, in the same order that they were added to
-     that list.&lt;/li&gt;--&gt;
+     &lt;!--&lt;li&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; at the &lt;span&gt;media
+     element&lt;/span&gt; for each event name in &lt;var title=&quot;&quot;&gt;events&lt;/var&gt;,
+     in the same order that they were added to that list.&lt;/li&gt;--&gt;
 
-     &lt;li&gt;The user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called
-     &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+     &lt;li&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
      element&lt;/a&gt;.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must &lt;a href=#pick-a-media-resource&gt;pick a media resource&lt;/a&gt; for
-   the &lt;a href=#media-element&gt;media element&lt;/a&gt;. If that fails, the method must
-   raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception, and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#generate-the-list-of-potential-media-resources&gt;Generate the list of potential media resources&lt;/a&gt;
+   and let the resulting list be &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt;
-   attribute must be set to &lt;a href=#dom-media-network_idle title=dom-media-NETWORK_IDLE&gt;NETWORK_IDLE&lt;/a&gt;.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; to &lt;code title=dom-media-NETWORK_LOADING&gt;&lt;a href=#dom-media-network_loading&gt;NETWORK_LOADING&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-   &lt;p class=note&gt;The &lt;code title=dom-media-currentSrc&gt;&lt;a href=#dom-media-currentsrc&gt;currentSrc&lt;/a&gt;&lt;/code&gt; attribute starts
-   returning the new value.&lt;/li&gt;
+   &lt;li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must then set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to
-   true and &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-loadstart&gt;&lt;a href=#event-loadstart&gt;loadstart&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-   element&lt;/a&gt;.&lt;/li&gt;
+    &lt;p&gt;The method must return, but these steps must continue.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The method must return, but these steps must
-   continue.&lt;/li&gt;
+    &lt;p class=note&gt;Playback of any previously playing &lt;a href=#media-resource&gt;media
+    resource&lt;/a&gt; for this element stops.&lt;/p&gt;
 
+   &lt;/li&gt;
 
+
    &lt;!-- SYNCHRONOUS / ASYNCHRONOUS BOUNDARY FOR EVENT DISPATCH --&gt;
 
 
-   &lt;li&gt;&lt;p class=note&gt;Playback of any previously playing &lt;a href=#media-resource&gt;media
-   resource&lt;/a&gt; for this element stops.&lt;/li&gt;
- 
-   &lt;li&gt;&lt;p&gt;If a fetching process is in progress for the &lt;a href=#media-element&gt;media
-   element&lt;/a&gt;, the user agent should stop it.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to true and &lt;a href=#queue-a-task&gt;queue a
+   task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-loadstart&gt;&lt;a href=#event-loadstart&gt;loadstart&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+   element&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must then begin to &lt;a href=#fetch&gt;fetch&lt;/a&gt; the
-   &lt;a href=#chosen-media-resource&gt;chosen media resource&lt;/a&gt;. The rate of the download may be
-   throttled, however, in response to user preferences (including
-   throttling it to zero until the user indicates that the download
-   can start), or to balance the download with other connections
-   sharing the same bandwidth.&lt;/li&gt;
-
    &lt;li&gt;
 
-    &lt;p&gt;While the fetching process is progressing, the user agent must
-    set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt;
-    to &lt;code title=dom-media-NETWORK_LOADING&gt;&lt;a href=#dom-media-network_loading&gt;NETWORK_LOADING&lt;/a&gt;&lt;/code&gt;
-    and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress
-    event&lt;/a&gt; called &lt;code title=event-progress&gt;&lt;a href=#event-progress&gt;progress&lt;/a&gt;&lt;/code&gt;
-    at the element every 350ms (&plusmn;200ms) or for every byte
-    received, whichever is &lt;em&gt;least&lt;/em&gt; frequent.&lt;/p&gt;
+    &lt;p&gt;&lt;i&gt;Candidate loop&lt;/i&gt;: For each item in &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;, if any, and in the same order as they
+    were added to the list, run the following steps:&lt;/p&gt;
 
-    &lt;p&gt;If at any point the user agent has received no data for more
-    than about three seconds, the user agent must &lt;a href=#queue-a-task&gt;queue a
-    task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-stalled&gt;&lt;a href=#event-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; be the
+     resource given by the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; for the current
+     item in &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;. This is now the element's
+     &lt;a href=#media-resource&gt;media resource&lt;/a&gt;.&lt;/li&gt;
 
-    &lt;p&gt;User agents may allow users to selectively block or slow
-    &lt;a href=#media-data&gt;media data&lt;/a&gt; downloads. When a &lt;a href=#media-element&gt;media
-    element&lt;/a&gt;'s download has been blocked, the user agent must
-    act as if it was stalled (as opposed to acting as if the
-    connection was closed).&lt;/p&gt;
+     &lt;li&gt;&lt;p&gt;Set the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#pixel-ratio-override&gt;pixel ratio
+     override&lt;/a&gt; to the pixel ratio override given for the current
+     item in &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;.&lt;/li&gt;
 
-    &lt;p&gt;User agents may decide to not download more content at any
-    time, e.g. after buffering five minutes of a one hour media
-    resource, while waiting for the user to decide whether to play the
-    resource or not, or while waiting for user input in an interactive
-    resource. When a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s download has been
-    suspended, the user agent must set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; to &lt;code title=dom-media-NETWORK_IDLE&gt;&lt;a href=#dom-media-network_idle&gt;NETWORK_IDLE&lt;/a&gt;&lt;/code&gt; and &lt;a href=#queue-a-task&gt;queue
-    a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-suspend&gt;&lt;a href=#event-suspend&gt;suspend&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
+     &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-currentSrc&gt;&lt;a href=#dom-media-currentsrc&gt;currentSrc&lt;/a&gt;&lt;/code&gt; attribute to the
+     &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;current media
+     resource&lt;/var&gt;.&lt;/li&gt;
 
-    &lt;p&gt;The user agent may use whatever means necessary to fetch the
-    resource (within the constraints put forward by this and other
-    specifications); for example, reconnecting to the server in the
-    face of network errors, using HTTP partial range requests, or
-    switching to a streaming protocol. The user agent must consider a
-    resource erroneous only if it has given up trying to fetch it.&lt;/p&gt;
+     &lt;li&gt;
 
-    &lt;p&gt;The &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; to process the data as it is
-    being fetched must, when appropriate, include the relevant
-    substeps from the following list:&lt;/p&gt;
+      &lt;p&gt;Begin to &lt;a href=#fetch&gt;fetch&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;current media
+      resource&lt;/var&gt;.&lt;/p&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; cannot be fetched at all, due
-     to network errors, causing the user agent to give up trying to
-     fetch the resource&lt;/dt&gt;
+      &lt;p&gt;Every 350ms (&plusmn;200ms) or for every byte received,
+      whichever is &lt;em&gt;least&lt;/em&gt; frequent, &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt;
+      to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-progress&gt;&lt;a href=#event-progress&gt;progress&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
 
-     &lt;dd&gt;
+      &lt;p&gt;If at any point the user agent has received no data for more
+      than about three seconds, then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+      &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-stalled&gt;&lt;a href=#event-stalled&gt;stalled&lt;/a&gt;&lt;/code&gt; at the element.&lt;/p&gt;
 
-      &lt;p&gt;DNS errors and HTTP 4xx and 5xx errors (and equivalents in
-      other protocols) must cause the user agent to execute the
-      following steps. User agents may also follow these steps in
-      response to other network errors of similar severity.&lt;/p&gt;
+      &lt;p&gt;User agents may allow users to selectively block or slow
+      &lt;a href=#media-data&gt;media data&lt;/a&gt; downloads. When a &lt;a href=#media-element&gt;media
+      element&lt;/a&gt;'s download has been blocked altogether, the user
+      agent must act as if it was stalled (as opposed to acting as if
+      the connection was closed). The rate of the download may also be
+      throttled automatically by the user agent, e.g. to balance the
+      download with other connections sharing the same bandwidth.&lt;/p&gt;
 
-      &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+      &lt;p&gt;User agents may decide to not download more content at any
+      time, e.g. after buffering five minutes of a one hour media
+      resource, while waiting for the user to decide whether to play
+      the resource or not, or while waiting for user input in an
+      interactive resource. When a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
+      download has been suspended, the user agent must set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; to &lt;code title=dom-media-NETWORK_IDLE&gt;&lt;a href=#dom-media-network_idle&gt;NETWORK_IDLE&lt;/a&gt;&lt;/code&gt; and
+      &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt;
+      called &lt;code title=event-suspend&gt;&lt;a href=#event-suspend&gt;suspend&lt;/a&gt;&lt;/code&gt; at the
+      element. If and when downloading of the resource resumes, the
+      user agent must set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; to &lt;code title=dom-media-NETWORK_LOADING&gt;&lt;a href=#dom-media-network_loading&gt;NETWORK_LOADING&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-       &lt;li&gt;The &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
-       &lt;code title=dom-MediaError-MEDIA_ERR_NETWORK&gt;&lt;a href=#dom-mediaerror-media_err_network&gt;MEDIA_ERR_NETWORK&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+      &lt;p&gt;The user agent may use whatever means necessary to fetch the
+      resource (within the constraints put forward by this and other
+      specifications); for example, reconnecting to the server in the
+      face of network errors, using HTTP partial range requests, or
+      switching to a streaming protocol. The user agent must consider a
+      resource erroneous only if it has given up trying to fetch it.&lt;/p&gt;
 
-       &lt;li&gt;The &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; must be set to false and the
-       user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a
-       progress event&lt;/a&gt; called &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-       element&lt;/a&gt;.&lt;/li&gt;
+      &lt;p&gt;The &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; to process the data as it is
+      being fetched must, when appropriate, include the relevant
+      substeps from the following list:&lt;/p&gt;
 
-       &lt;li&gt;The element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
-       must be switched to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value and
-       the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
-       simple event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+      &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; cannot be fetched at all, due
+       to network errors, causing the user agent to give up trying to
+       fetch the resource&lt;/dt&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+       &lt;dt&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; can be fetched but is in an
+       unsupported format, or can otherwise not be rendered at
+       all&lt;/dt&gt;
 
-      &lt;/ol&gt;&lt;/dd&gt;
+       &lt;dd&gt;
 
-     &lt;dt id=fatal-decode-error&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; can be
-     fetched but is in an unsupported format, or can otherwise not be
-     rendered at all&lt;/dt&gt;
+        &lt;p&gt;DNS errors, HTTP 4xx and 5xx errors (and equivalents in
+        other protocols), and other fatal network errors that occur
+        before the user agent has established whether the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; is usable, as well as
+        the file using an unsupported container format, or using
+        unsupported codecs for all the data, must cause the user agent
+        to execute the following steps:&lt;/p&gt;
 
-     &lt;dd&gt;
+        &lt;ol&gt;&lt;li&gt;&lt;p&gt;The user agent should cancel the fetching
+         process.&lt;/li&gt;
 
-      &lt;p&gt;The server returning a file of the wrong kind (e.g. one that
-      that turns out to not be pure audio when the &lt;a href=#media-element&gt;media
-      element&lt;/a&gt; is an &lt;code&gt;&lt;a href=#audio&gt;audio&lt;/a&gt;&lt;/code&gt; element), or the file
-      using unsupported codecs for all the data, must cause the user
-      agent to execute the following steps. User agents may also
-      execute these steps in response to other codec-related fatal
-      errors, such as the file requiring more resources to process
-      than the user agent can provide in real time.&lt;/p&gt;
+         &lt;li&gt;&lt;p&gt;If there are more items in the &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt; list, then move on to the next one,
+         jumping back to the top of the &lt;i&gt;candidate loop&lt;/i&gt;;
+         otherwise, jump to the final step in the overall algorithm
+         (the &lt;i&gt;failure step&lt;/i&gt;).&lt;/p&gt;
 
-      &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+        &lt;/ol&gt;&lt;/dd&gt;
 
-       &lt;li&gt;The &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
-       &lt;code title=dom-MediaError-MEDIA_ERR_DECODE&gt;&lt;a href=#dom-mediaerror-media_err_decode&gt;MEDIA_ERR_DECODE&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-       &lt;li&gt;The &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; must be set to false and the
-       user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a
-       progress event&lt;/a&gt; called &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-       element&lt;/a&gt;.&lt;/li&gt;
+       &lt;dt&gt;Once enough of the &lt;a href=#media-data&gt;media data&lt;/a&gt; has been fetched
+       to determine the duration of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, its
+       dimensions, and other metadata&lt;/dt&gt;
 
-       &lt;li&gt;The element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
-       must be switched to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value and
-       the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
-       simple event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
+       &lt;dd&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+        &lt;p&gt;This indicates that the resource is usable. The user agent
+        must follow these substeps:&lt;/p&gt;
 
-      &lt;/ol&gt;&lt;/dd&gt;
+        &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
+         &lt;var&gt;&lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;dt&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; fetching process is aborted by
-     the user&lt;/dt&gt;
+         &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
+         &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-     &lt;dd&gt;
+         &lt;li&gt;&lt;p class=note&gt;A number of attributes, including &lt;code title=dom-media-duration&gt;&lt;a href=#dom-media-duration&gt;duration&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-media-buffered&gt;&lt;a href=#dom-media-buffered&gt;buffered&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-media-played&gt;&lt;a href=#dom-media-played&gt;played&lt;/a&gt;&lt;/code&gt;, become
+         available.&lt;/li&gt;
 
-      &lt;p&gt;The fetching process is aborted by the user, e.g. because the
-      user navigated the browsing context to another page, the user
-      agent must execute the following steps. These steps are not
-      followed if the &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt;
-      method itself is reinvoked, as the steps above handle that
-      particular kind of abort.&lt;/p&gt;
+         &lt;li&gt;&lt;p class=note&gt;The user agent &lt;a href=#durationChange&gt;will&lt;/a&gt; &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+         &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-durationchange&gt;&lt;a href=#event-durationchange&gt;durationchange&lt;/a&gt;&lt;/code&gt; at the
+         element at this point.&lt;/li&gt;
 
-      &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+         &lt;li id=fire-loadedmetadata&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to
+         &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-loadedmetadata&gt;&lt;a href=#event-loadedmetadata&gt;loadedmetadata&lt;/a&gt;&lt;/code&gt; at the
+         element.&lt;/li&gt;
 
-       &lt;li&gt;The &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
-       &lt;code title=dom-MediaError-MEDIA_ERR_ABORT&gt;MEDIA_ERR_ABORT&lt;/code&gt;.&lt;/li&gt;
+         &lt;li&gt;
 
-       &lt;li&gt;The &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; must be set to false and the
-       user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a
-       progress event&lt;/a&gt; called &lt;code title=event-abort&gt;&lt;a href=#event-abort&gt;abort&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
-       element&lt;/a&gt;.&lt;/li&gt;
+          &lt;p&gt;If either the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; or the address
+          of the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; indicate a
+          particular start time, then &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to that time. Ignore any
+          resulting exceptions (if the position is out of range, it is
+          effectively ignored).&lt;/p&gt;
 
-       &lt;li&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute has a
-       value equal to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, the
-       element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
-       must be switched to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value and
-       the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
-       simple event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element. (If the
-       &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute
-       has a value greater than &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then this
-       doesn't happen; the available data, if any, will be
-       playable.)&lt;/li&gt;
+          &lt;p class=example&gt;For example, a fragment identifier could be
+          used to indicate a start position.&lt;/p&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+         &lt;/li&gt;
 
-      &lt;/ol&gt;&lt;/dd&gt;
+        &lt;/ol&gt;&lt;/dd&gt;
 
-     &lt;dt id=non-fatal-media-error&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; can
-     be fetched but has non-fatal errors or uses, in part, codecs that
-     are unsupported, preventing the user agent from rendering the
-     content completely correctly but not preventing playback
-     altogether&lt;/dt&gt;
 
-     &lt;dd&gt;
+       &lt;dt&gt;If the connection is interrupted, causing the user agent to
+       give up trying to fetch the resource&lt;/dt&gt;
 
-      &lt;p&gt;The server returning data that is partially usable but cannot
-      be optimally rendered must cause the user agent to execute the
-      following steps.&lt;/p&gt;
+       &lt;dd&gt;
 
-      &lt;ol&gt;&lt;li class=XXX&gt;Should we fire a 'warning' event? Set the
-       'error' flag to 'MEDIA_ERR_SUBOPTIMAL' or something?&lt;/li&gt;
+        &lt;p&gt;Fatal network errors that occur after the user agent has
+        established whether the &lt;var title=&quot;&quot;&gt;current media
+        resource&lt;/var&gt; is usable must cause the user agent to execute
+        the following steps:&lt;/p&gt;
 
-      &lt;/ol&gt;&lt;/dd&gt;
+        &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-     &lt;dt&gt;Once enough of the &lt;a href=#media-data&gt;media data&lt;/a&gt; has been fetched
-     to determine the duration of the &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, its
-     dimensions, and other metadata&lt;/dt&gt;
+         &lt;li&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
+         attribute to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
+         &lt;code title=dom-MediaError-MEDIA_ERR_NETWORK&gt;&lt;a href=#dom-mediaerror-media_err_network&gt;MEDIA_ERR_NETWORK&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-     &lt;dd&gt;
+         &lt;li&gt;Set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false and &lt;a href=#queue-a-task&gt;queue
+         a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called
+         &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+         element&lt;/a&gt;.&lt;/li&gt;
 
-      &lt;p&gt;The user agent must follow these substeps:&lt;/p&gt;
+         &lt;li&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
+         to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value
+         and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
+         event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
 
-      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt; to the
-       &lt;var&gt;&lt;a href=#earliest-possible-position&gt;earliest possible position&lt;/a&gt;&lt;/var&gt;.&lt;/li&gt;
+         &lt;li&gt;Abort the overall &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method algorithm.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;The &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-       attribute must be set to &lt;code title=dom-media-HAVE_METADATA&gt;&lt;a href=#dom-media-have_metadata&gt;HAVE_METADATA&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+        &lt;/ol&gt;&lt;/dd&gt;
 
-       &lt;li&gt;&lt;p class=note&gt;A number of attributes, including &lt;code title=dom-media-duration&gt;&lt;a href=#dom-media-duration&gt;duration&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-media-buffered&gt;&lt;a href=#dom-media-buffered&gt;buffered&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-media-played&gt;&lt;a href=#dom-media-played&gt;played&lt;/a&gt;&lt;/code&gt;, become
-       available.&lt;/li&gt;
+       &lt;dt id=fatal-decode-error&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; is
+       corrupted&lt;/dt&gt;
 
-       &lt;li&gt;&lt;p class=note&gt;The user agent &lt;a href=#durationChange&gt;will&lt;/a&gt; &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
-       &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-durationchange&gt;&lt;a href=#event-durationchange&gt;durationchange&lt;/a&gt;&lt;/code&gt; at the
-       element at this point.&lt;/li&gt;
+       &lt;dd&gt;
 
-       &lt;li id=fire-loadedmetadata&gt;&lt;p&gt;The user agent must &lt;a href=#queue-a-task&gt;queue
-       a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called &lt;code title=event-loadedmetadata&gt;&lt;a href=#event-loadedmetadata&gt;loadedmetadata&lt;/a&gt;&lt;/code&gt; at the
-       element.&lt;/li&gt;
+        &lt;p&gt;Fatal errors in decoding the &lt;a href=#media-data&gt;media data&lt;/a&gt; that
+        occur after the user agent has established whether the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; is usable must cause the
+        user agent to execute the following steps:&lt;/p&gt;
 
-       &lt;li&gt;
+        &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-        &lt;p&gt;If either the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; or the address of
-        the &lt;a href=#chosen-media-resource&gt;chosen media resource&lt;/a&gt; indicate a particular
-        start time, then &lt;a href=#dom-media-seek title=dom-media-seek&gt;seek&lt;/a&gt; to
-        that time. Ignore any resulting exceptions (if the position is
-        out of range, it is effectively ignored).&lt;/p&gt;
+         &lt;li&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
+         attribute to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
+         &lt;code title=dom-MediaError-MEDIA_ERR_DECODE&gt;&lt;a href=#dom-mediaerror-media_err_decode&gt;MEDIA_ERR_DECODE&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
 
-        &lt;p class=example&gt;For example, a fragment identifier could be
-        used to indicate a start position.&lt;/p&gt;
+         &lt;li&gt;Set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false and &lt;a href=#queue-a-task&gt;queue
+         a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called
+         &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+         element&lt;/a&gt;.&lt;/li&gt;
 
-       &lt;/li&gt;
+         &lt;li&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
+         to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value
+         and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
+         event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element.&lt;/li&gt;
 
-      &lt;/ol&gt;&lt;/dd&gt;
+         &lt;li&gt;Abort the overall &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method algorithm.&lt;/li&gt;
 
-    &lt;/dl&gt;&lt;p&gt;When the user agent has completely fetched of the entire
-    &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, it must move on to the next
-    step. This might never happen, e.g. when streaming an infinite
-    resource such as Web radio.&lt;/p&gt;
+        &lt;/ol&gt;&lt;/dd&gt;
 
-   &lt;/li&gt;
+       &lt;dt&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; fetching process is aborted by
+       the user&lt;/dt&gt;
 
-   &lt;li&gt;&lt;p&gt;If the fetching process completes without errors, the
-   &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; must be set to false, the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute must
-   be set to &lt;code title=dom-media-NETWORK_LOADED&gt;&lt;a href=#dom-media-network_loaded&gt;NETWORK_LOADED&lt;/a&gt;&lt;/code&gt;, and the
-   user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress
-   event&lt;/a&gt; called &lt;code title=event-load&gt;&lt;a href=#event-load&gt;load&lt;/a&gt;&lt;/code&gt; at the
-   element.&lt;/li&gt;
+       &lt;dd&gt;
 
+        &lt;p&gt;The fetching process is aborted by the user, e.g. because
+        the user navigated the browsing context to another page, the
+        user agent must execute the following steps. These steps are
+        not followed if the &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt;
+        method itself is reinvoked, as the steps above handle that
+        particular kind of abort.&lt;/p&gt;
+
+        &lt;ol&gt;&lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+
+         &lt;li&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt;
+         attribute to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to
+         &lt;code title=dom-MediaError-MEDIA_ERR_ABORT&gt;MEDIA_ERR_ABORT&lt;/code&gt;.&lt;/li&gt;
+
+         &lt;li&gt;Set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false and &lt;a href=#queue-a-task&gt;queue
+         a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called
+         &lt;code title=event-abort&gt;&lt;a href=#event-abort&gt;abort&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+         element&lt;/a&gt;.&lt;/li&gt;
+
+         &lt;li&gt;If the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute has
+         a value equal to &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, set the
+         element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute
+         to the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt; value
+         and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
+         event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at the element. (If the
+         &lt;code title=dom-media-readyState&gt;&lt;a href=#dom-media-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
+         attribute has a value greater than &lt;code title=dom-media-HAVE_NOTHING&gt;&lt;a href=#dom-media-have_nothing&gt;HAVE_NOTHING&lt;/a&gt;&lt;/code&gt;, then this
+         doesn't happen; the available data, if any, will be
+         playable.)&lt;/li&gt;
+
+         &lt;li&gt;Abort the overall &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method algorithm.&lt;/li&gt;
+
+        &lt;/ol&gt;&lt;/dd&gt;
+
+       &lt;dt id=non-fatal-media-error&gt;If the &lt;a href=#media-data&gt;media data&lt;/a&gt; can
+       be fetched but has non-fatal errors or uses, in part, codecs that
+       are unsupported, preventing the user agent from rendering the
+       content completely correctly but not preventing playback
+       altogether&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;The server returning data that is partially usable but cannot
+        be optimally rendered must cause the user agent to execute the
+        following steps.&lt;/p&gt;
+
+        &lt;ol&gt;&lt;li class=XXX&gt;Should we fire a 'warning' event? Set the
+         'error' flag to 'MEDIA_ERR_SUBOPTIMAL' or something?&lt;/li&gt;
+
+        &lt;/ol&gt;&lt;/dd&gt;
+
+      &lt;/dl&gt;&lt;p&gt;When the user agent has completely fetched of the entire
+      &lt;a href=#media-resource&gt;media resource&lt;/a&gt;, it must move on to the next
+      step. This might never happen, e.g. when streaming an infinite
+      resource such as Web radio.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the fetching process completes without errors, then set
+     the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false, set the &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
+     &lt;code title=dom-media-NETWORK_LOADED&gt;&lt;a href=#dom-media-network_loaded&gt;NETWORK_LOADED&lt;/a&gt;&lt;/code&gt;, and
+     &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt;
+     called &lt;code title=event-load&gt;&lt;a href=#event-load&gt;load&lt;/a&gt;&lt;/code&gt; at the
+     element.&lt;/li&gt;
+
+     &lt;li&gt;Then, abort the overall &lt;code title=dom-media-load&gt;&lt;a href=#dom-media-load&gt;load()&lt;/a&gt;&lt;/code&gt; method algorithm.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;&lt;i&gt;Failure step&lt;/i&gt;: No usable resource was found. Run the
+    following steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;Set the &lt;code title=dom-media-error&gt;&lt;a href=#dom-media-error&gt;error&lt;/a&gt;&lt;/code&gt; attribute
+     to a new &lt;code&gt;&lt;a href=#mediaerror&gt;MediaError&lt;/a&gt;&lt;/code&gt; object whose &lt;code title=dom-MediaError-code&gt;&lt;a href=#dom-mediaerror-code&gt;code&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;code title=dom-MediaError-MEDIA_ERR_NONE_SUPPORTED&gt;&lt;a href=#dom-mediaerror-media_err_none_supported&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/a&gt;&lt;/code&gt;.&lt;/li&gt;
+
+     &lt;li&gt;Set the &lt;a href=#begun-flag&gt;begun flag&lt;/a&gt; to false and &lt;a href=#queue-a-task&gt;queue a
+     task&lt;/a&gt; to &lt;a href=#fire-a-progress-event&gt;fire a progress event&lt;/a&gt; called &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;a href=#media-element&gt;media
+     element&lt;/a&gt;.&lt;/li&gt;
+
+     &lt;li&gt;Set the element's &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute to
+     the &lt;a href=#dom-media-network_empty title=dom-media-NETWORK_EMPTY&gt;NETWORK_EMPTY&lt;/a&gt;
+     value and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple
+     event&lt;/a&gt; called &lt;code title=event-emptied&gt;&lt;a href=#event-emptied&gt;emptied&lt;/a&gt;&lt;/code&gt; at
+     the element.&lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
   &lt;/ol&gt;&lt;p&gt;If a &lt;a href=#media-element&gt;media element&lt;/a&gt; whose &lt;code title=dom-media-networkState&gt;&lt;a href=#dom-media-networkstate&gt;networkState&lt;/a&gt;&lt;/code&gt; has the value
   &lt;code title=dom-media-NETWORK_EMPTY&gt;&lt;a href=#dom-media-network_empty&gt;NETWORK_EMPTY&lt;/a&gt;&lt;/code&gt; is &lt;a href=#insert-an-element-into-a-document title=&quot;insert an element into a document&quot;&gt;inserted into a
   document&lt;/a&gt;, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; that

Modified: source
===================================================================
--- source	2008-11-14 04:03:26 UTC (rev 2402)
+++ source	2008-11-14 06:50:23 UTC (rev 2403)
@@ -18203,6 +18203,7 @@
   const unsigned short &lt;span title=&quot;dom-MediaError-MEDIA_ERR_ABORTED&quot;&gt;MEDIA_ERR_ABORTED&lt;/span&gt; = 1;
   const unsigned short &lt;span title=&quot;dom-MediaError-MEDIA_ERR_NETWORK&quot;&gt;MEDIA_ERR_NETWORK&lt;/span&gt; = 2;
   const unsigned short &lt;span title=&quot;dom-MediaError-MEDIA_ERR_DECODE&quot;&gt;MEDIA_ERR_DECODE&lt;/span&gt; = 3;
+  const unsigned short &lt;span title=&quot;dom-MediaError-MEDIA_ERR_DECODE&quot;&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/span&gt; = 4;
   readonly attribute unsigned short &lt;span title=&quot;dom-MediaError-code&quot;&gt;code&lt;/span&gt;;
 };&lt;/pre&gt;
 
@@ -18220,13 +18221,19 @@
    &lt;dt&gt;&lt;dfn title=&quot;dom-MediaError-MEDIA_ERR_NETWORK&quot;&gt;&lt;code&gt;MEDIA_ERR_NETWORK&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
 
    &lt;dd&gt;A network error of some description caused the user agent to
-   stop fetching the &lt;span&gt;media resource&lt;/span&gt;.&lt;/dd&gt;
+   stop fetching the &lt;span&gt;media resource&lt;/span&gt;, after the resource
+   was established to be usable.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-MediaError-MEDIA_ERR_DECODE&quot;&gt;&lt;code&gt;MEDIA_ERR_DECODE&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
 
    &lt;dd&gt;An error of some description occurred while decoding the
-   &lt;span&gt;media resource&lt;/span&gt;.&lt;/dd&gt;
+   &lt;span&gt;media resource&lt;/span&gt;, after the resource was established to
+   be usable.&lt;/dd&gt;
 
+   &lt;dt&gt;&lt;dfn title=&quot;dom-MediaError-MEDIA_ERR_NONE_SUPPORTED&quot;&gt;&lt;code&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/code&gt;&lt;/dfn&gt; (numeric value 4)&lt;/dt&gt;
+
+   &lt;dd&gt;No suitable &lt;span&gt;media resource&lt;/span&gt; could be found.&lt;/dd&gt;
+
   &lt;/dl&gt;
 
 
@@ -18260,77 +18267,111 @@
   &lt;span&gt;reflect&lt;/span&gt; the respective content attribute of the same
   name.&lt;/p&gt;
 
-  &lt;p&gt;To &lt;dfn&gt;pick a media resource&lt;/dfn&gt; for a &lt;span&gt;media
-  element&lt;/span&gt;, a user agent must use the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-media-currentSrc&quot;&gt;&lt;code&gt;currentSrc&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute is initially the empty string. Its value is changed by the
+  algorithm for the &lt;code title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method
+  defined below.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn&gt;pixel ratio override&lt;/dfn&gt; of a &lt;span&gt;media
+  element&lt;/span&gt; is initially &lt;i&gt;none&lt;/i&gt;. Its value is changed by the
+  algorithm for the &lt;code title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method
+  defined below.&lt;/p&gt;
+
+  &lt;p&gt;To &lt;dfn&gt;generate the list of potential media resources&lt;/dfn&gt; for
+  a &lt;span&gt;media element&lt;/span&gt;, a user agent must use the following
+  steps. These steps return a list of items, each consisting of an
+  &lt;span&gt;absolute URL&lt;/span&gt; giving a resource's address, and the
+  resource's pixel ratio override (either a number or
+  &lt;i&gt;none&lt;/i&gt;).&lt;/p&gt;
+
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt; be &lt;i&gt;none&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt; has a &lt;code
-   title=&quot;attr-media-src&quot;&gt;src&lt;/code&gt; attribute, then &lt;span
-   title=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; given in
-   that attribute. If that is successful, then the resulting
-   &lt;span&gt;absolute URL&lt;/span&gt; is the address of the &lt;span&gt;media
-   resource&lt;/span&gt;; jump to the last step.&lt;/p&gt;&lt;/li&gt;
+    &lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt; has a &lt;code
+    title=&quot;attr-media-src&quot;&gt;src&lt;/code&gt; attribute, then run these
+    substeps:&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the first
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;span title=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the
+     &lt;span&gt;URL&lt;/span&gt; given in that attribute.&lt;/p&gt;
+
+     &lt;li&gt;&lt;p&gt;If that is successful, then return a list consisting of
+     only one entry, with the resulting &lt;span&gt;absolute URL&lt;/span&gt; as
+     the resource's address, and with the resource's pixel ratio
+     override being &lt;i&gt;none&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Otherwise, return the empty list.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Abort the algorithm.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+    &lt;p&gt;Otherwise, the &lt;code&gt;source&lt;/code&gt; elements will be used.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt; has no &lt;code&gt;source&lt;/code&gt;
+   element children, then return the empty the list and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an empty list.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the first
    &lt;code&gt;source&lt;/code&gt; element child in the &lt;span&gt;media
-   element&lt;/span&gt;, or null if there is no such child.&lt;/p&gt;&lt;/li&gt;
+   element&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop&lt;/i&gt;: this is the start of the loop that looks at the
    &lt;code&gt;source&lt;/code&gt; elements.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not null and it has a
-   &lt;code title=&quot;attr-source-pixelratio&quot;&gt;pixelratio&lt;/code&gt; attribute,
-   and the result of applying the &lt;span&gt;rules for parsing floating
-   point number values&lt;/span&gt; to the value of that attribute is not an
-   error, then let the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt; be that result; otherwise, reset it back to
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; has a &lt;code
+   title=&quot;attr-source-pixelratio&quot;&gt;pixelratio&lt;/code&gt; attribute, and the
+   result of applying the &lt;span&gt;rules for parsing floating point
+   number values&lt;/span&gt; to the value of that attribute is not an
+   error, then let the &lt;var title=&quot;&quot;&gt;candidate pixel ratio
+   override&lt;/var&gt; be that result. Otherwise, let it be
    &lt;i&gt;none&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If either:&lt;/p&gt;
+    &lt;p&gt;If all the following conditions are true:&lt;/p&gt;
 
     &lt;ul&gt;
 
-     &lt;li&gt;&lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or&lt;/li&gt;
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code
+     title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has no &lt;code
-     title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute, or&lt;/li&gt;
-
-     &lt;li&gt;&lt;span title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the
+     &lt;li&gt;&lt;span title=&quot;resolve a url&quot;&gt;Resolving&lt;/span&gt; the
      &lt;span&gt;URL&lt;/span&gt; given by the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;
-     element's &lt;code title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute
-     fails, or&lt;/li&gt;
+     element's &lt;code title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute does
+     not fail&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code
      title=&quot;attr-source-type&quot;&gt;type&lt;/code&gt; attribute and that
-     attribute's value, when parsed as a MIME type, does not represent
-     a type that the user agent can render (including any codecs
-     described by the &lt;code title=&quot;&quot;&gt;codec&lt;/code&gt; parameter), or &lt;a
-     href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt; &lt;a
+     attribute's value, when parsed as a MIME type (including any
+     codecs described by the &lt;code title=&quot;&quot;&gt;codec&lt;/code&gt; parameter),
+     does not represent a type that the user agent knows it cannot
+     render &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt; &lt;a
      href=&quot;#refsRFC4281&quot;&gt;[RFC4281]&lt;/a&gt;&lt;/li&gt;
 
-     &lt;li&gt;the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code
+     &lt;li&gt;The &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element has a &lt;code
      title=&quot;attr-source-media&quot;&gt;media&lt;/code&gt; attribute and that
      attribute's value, when processed according to the rules for &lt;a
-     href=&quot;#mq&quot;&gt;media queries&lt;/a&gt;, does not match the current
-     environment, &lt;a href=&quot;#refsMQ&quot;&gt;[MQ]&lt;/a&gt;&lt;/li&gt;
+     href=&quot;#mq&quot;&gt;media queries&lt;/a&gt;, matches the current environment &lt;a
+     href=&quot;#refsMQ&quot;&gt;[MQ]&lt;/a&gt;&lt;/li&gt;
 
     &lt;/ul&gt;
 
-    &lt;p&gt;...then the &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not suitable; go
-    to the next step.&lt;/p&gt;
+    &lt;p&gt;...then append an item to the &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; list
+    consisting of the &lt;span&gt;absolute URL&lt;/span&gt; resulting from &lt;span
+    title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; given
+    in that &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; element's &lt;code
+    title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute as the resource's
+    address, and the &lt;var title=&quot;&quot;&gt;candidate pixel ratio
+    override&lt;/var&gt; as the resource's pixel ratio override.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, the result of &lt;span title=&quot;resolve a
-    url&quot;&gt;resolving&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; given in that &lt;var
-    title=&quot;&quot;&gt;candidate&lt;/var&gt; element's &lt;code
-    title=&quot;attr-source-src&quot;&gt;src&lt;/code&gt; attribute is the address of the
-    &lt;span&gt;media resource&lt;/span&gt;; jump to the last step.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the next
@@ -18341,28 +18382,12 @@
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not null, return to the
    step labeled &lt;i&gt;loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;There is no &lt;span&gt;media resource&lt;/span&gt;. Abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let the address of the &lt;dfn&gt;chosen media resource&lt;/dfn&gt; be
-   the &lt;span&gt;absolute URL&lt;/span&gt; that was found before jumping to this
-   step, and let its &lt;dfn&gt;pixel ratio override&lt;/dfn&gt; be the value of
-   the &lt;var title=&quot;&quot;&gt;chosen resource's pixel ratio
-   override&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-media-currentSrc&quot;&gt;&lt;code&gt;currentSrc&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must return the empty string if the &lt;span&gt;media
-  element&lt;/span&gt;'s &lt;code
-  title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; has the value
-  &lt;code title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/code&gt;, and the
-  &lt;span&gt;absolute URL&lt;/span&gt; that is the address of the &lt;span&gt;chosen
-  media resource&lt;/span&gt; otherwise.&lt;/p&gt;
 
 
-
   &lt;h5&gt;Network states&lt;/h5&gt;
 
   &lt;p&gt;As &lt;span title=&quot;media element&quot;&gt;media elements&lt;/span&gt; interact
@@ -18381,14 +18406,13 @@
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-media-NETWORK_IDLE&quot;&gt;&lt;code&gt;NETWORK_IDLE&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
 
-   &lt;dd&gt;The element has a &lt;span&gt;chosen media resource&lt;/span&gt;, but the
-   user agent is not using the network to obtain any more of the
-   resource than is already obtained at this time.&lt;/dd&gt;
+   &lt;dd&gt;The element's &lt;code title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method
+   algorithm is active, but it is not actually using the network at
+   this time.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-media-NETWORK_LOADING&quot;&gt;&lt;code&gt;NETWORK_LOADING&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
 
-   &lt;dd&gt;The user agent is actively trying to download data for the
-   &lt;span&gt;chosen media resource&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;The user agent is actively trying to download data.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-media-NETWORK_LOADED&quot;&gt;&lt;code&gt;NETWORK_LOADED&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
 
@@ -18436,389 +18460,472 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Any already-running instance of this algorithm for this
-   element must be aborted. If those method calls have not yet
-   returned, they must finish the step they are on, and then
-   immediately return. This is not blocking; this algorithm must not
-   wait for the earlier instances to abort before continuing.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Abort any already-running instance of this algorithm for
+   this element. If those method calls have not yet returned, they
+   must finish the step they are on, and then immediately return. This
+   is not blocking; this algorithm must not wait for the earlier
+   instances to abort before continuing.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the element's &lt;span&gt;begun flag&lt;/span&gt; is true, then the
-   &lt;span&gt;begun flag&lt;/span&gt; must be set to false, the &lt;code
-   title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute must be set to a new
+   &lt;li&gt;&lt;p&gt;If the element's &lt;span&gt;begun flag&lt;/span&gt; is true, then set
+   the &lt;span&gt;begun flag&lt;/span&gt; to false, set the &lt;code
+   title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute to a new
    &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
    title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to &lt;code
    title=&quot;dom-MediaError-MEDIA_ERR_ABORTED&quot;&gt;MEDIA_ERR_ABORTED&lt;/code&gt;,
-   and the user agent must &lt;span&gt;fire a progress event&lt;/span&gt; called
-   &lt;code title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; at the &lt;span&gt;media
+   and &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
+   title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; at the &lt;span&gt;media
    element&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
-   must be set to null and the &lt;span&gt;autoplaying flag&lt;/span&gt; must be
-   set to true.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
+   to null and the &lt;span&gt;autoplaying flag&lt;/span&gt; to true.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=&quot;dom-media-playbackRate&quot;&gt;playbackRate&lt;/code&gt;
-   attribute must be set to the value of the &lt;code
+   &lt;li&gt;&lt;p&gt;Set the &lt;code
+   title=&quot;dom-media-playbackRate&quot;&gt;playbackRate&lt;/code&gt; attribute to the
+   value of the &lt;code
    title=&quot;dom-media-defaultPlaybackRate&quot;&gt;defaultPlaybackRate&lt;/code&gt;
    attribute.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt;'s &lt;code
    title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; is not set to
    &lt;code title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/code&gt;, then
-   the following substeps must be followed:&lt;/p&gt;
+   run these substeps:&lt;/p&gt;
 
     &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;If a fetching process is in progress for the &lt;span&gt;media
+     element&lt;/span&gt;, the user agent should stop it.&lt;/p&gt;&lt;/li&gt;
+
      &lt;!--&lt;li&gt;Let &lt;var title=&quot;&quot;&gt;events&lt;/var&gt; be a list of event names,
      initially empty.&lt;/li&gt;--&gt;
 
-     &lt;li&gt;The &lt;code title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt;
-     attribute must be set to &lt;span
-     title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt;&lt;!--, and the
-     user agent must add &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; to
-     the &lt;var title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
+     &lt;li&gt;Set the &lt;code
+     title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute to
+     &lt;span title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt;&lt;!--,
+     and add &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; to the &lt;var
+     title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
 
      &lt;li&gt;If &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; is
      not set to &lt;code
-     title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, it must be
-     set to that state&lt;!-- and the user agent must add &lt;code
+     title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, then set it
+     to that state&lt;!-- and add &lt;code
      title=&quot;event-dataunavailable&quot;&gt;dataunavailable&lt;/code&gt; to the &lt;var
      title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
 
      &lt;li&gt;If the &lt;code title=&quot;dom-media-paused&quot;&gt;paused&lt;/code&gt; attribute
-     is false, it must be set to true&lt;!--, and the user agent must add
-     &lt;code title=&quot;event-pause&quot;&gt;pause&lt;/code&gt; to the &lt;var
+     is false, then set to true&lt;!--, and add &lt;code
+     title=&quot;event-pause&quot;&gt;pause&lt;/code&gt; to the &lt;var
      title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.&lt;/li&gt;
 
-     &lt;li&gt;If &lt;code title=&quot;dom-media-seeking&quot;&gt;seeking&lt;/code&gt; is true, it
-     must be set to false.&lt;/li&gt;
+     &lt;li&gt;If &lt;code title=&quot;dom-media-seeking&quot;&gt;seeking&lt;/code&gt; is true,
+     set it to false.&lt;/li&gt;
 
-     &lt;li&gt;The &lt;span&gt;current playback position&lt;/span&gt; must be set to
-     0.&lt;/li&gt;
+     &lt;li&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to 0.&lt;/li&gt;
 
-     &lt;!--&lt;li&gt;The user agent must &lt;span&gt;fire a simple event&lt;/span&gt; at
-     the &lt;span&gt;media element&lt;/span&gt; for each event name in &lt;var
-     title=&quot;&quot;&gt;events&lt;/var&gt;, in the same order that they were added to
-     that list.&lt;/li&gt;--&gt;
+     &lt;!--&lt;li&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; at the &lt;span&gt;media
+     element&lt;/span&gt; for each event name in &lt;var title=&quot;&quot;&gt;events&lt;/var&gt;,
+     in the same order that they were added to that list.&lt;/li&gt;--&gt;
 
-     &lt;li&gt;The user agent must &lt;span&gt;fire a simple event&lt;/span&gt; called
-     &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the &lt;span&gt;media
+     &lt;li&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; called &lt;code
+     title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the &lt;span&gt;media
      element&lt;/span&gt;.&lt;/li&gt;
 
     &lt;/ol&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must &lt;span&gt;pick a media resource&lt;/span&gt; for
-   the &lt;span&gt;media element&lt;/span&gt;. If that fails, the method must
-   raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception, and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Generate the list of potential media resources&lt;/span&gt;
+   and let the resulting list be &lt;var
+   title=&quot;&quot;&gt;candidates&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;code title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt;
-   attribute must be set to &lt;span
-   title=&quot;dom-media-NETWORK_IDLE&quot;&gt;NETWORK_IDLE&lt;/span&gt;.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;code
+   title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; to &lt;code
+   title=&quot;dom-media-NETWORK_LOADING&quot;&gt;NETWORK_LOADING&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;p class=&quot;note&quot;&gt;The &lt;code
-   title=&quot;dom-media-currentSrc&quot;&gt;currentSrc&lt;/code&gt; attribute starts
-   returning the new value.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must then set the &lt;span&gt;begun flag&lt;/span&gt; to
-   true and &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
+    &lt;p&gt;The method must return, but these steps must continue.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;Playback of any previously playing &lt;span&gt;media
+    resource&lt;/span&gt; for this element stops.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+
+   &lt;!-- SYNCHRONOUS / ASYNCHRONOUS BOUNDARY FOR EVENT DISPATCH --&gt;
+
+
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;begun flag&lt;/span&gt; to true and &lt;span&gt;queue a
+   task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
    title=&quot;event-loadstart&quot;&gt;loadstart&lt;/code&gt; at the &lt;span&gt;media
    element&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The method must return, but these steps must
-   continue.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;&lt;i&gt;Candidate loop&lt;/i&gt;: For each item in &lt;var
+    title=&quot;&quot;&gt;candidates&lt;/var&gt;, if any, and in the same order as they
+    were added to the list, run the following steps:&lt;/p&gt;
 
-   &lt;!-- SYNCHRONOUS / ASYNCHRONOUS BOUNDARY FOR EVENT DISPATCH --&gt;
+    &lt;ol&gt;
 
+     &lt;li&gt;&lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; be the
+     resource given by the &lt;span&gt;absolute URL&lt;/span&gt; for the current
+     item in &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;. This is now the element's
+     &lt;span&gt;media resource&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p class=&quot;note&quot;&gt;Playback of any previously playing &lt;span&gt;media
-   resource&lt;/span&gt; for this element stops.&lt;/p&gt;&lt;/li&gt;
- 
-   &lt;li&gt;&lt;p&gt;If a fetching process is in progress for the &lt;span&gt;media
-   element&lt;/span&gt;, the user agent should stop it.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;pixel ratio
+     override&lt;/span&gt; to the pixel ratio override given for the current
+     item in &lt;var title=&quot;&quot;&gt;candidates&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The user agent must then begin to &lt;span&gt;fetch&lt;/span&gt; the
-   &lt;span&gt;chosen media resource&lt;/span&gt;. The rate of the download may be
-   throttled, however, in response to user preferences (including
-   throttling it to zero until the user indicates that the download
-   can start), or to balance the download with other connections
-   sharing the same bandwidth.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Set the &lt;code
+     title=&quot;dom-media-currentSrc&quot;&gt;currentSrc&lt;/code&gt; attribute to the
+     &lt;span&gt;absolute URL&lt;/span&gt; of the &lt;var title=&quot;&quot;&gt;current media
+     resource&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+     &lt;li&gt;
 
-    &lt;p&gt;While the fetching process is progressing, the user agent must
-    set the &lt;code title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt;
-    to &lt;code title=&quot;dom-media-NETWORK_LOADING&quot;&gt;NETWORK_LOADING&lt;/code&gt;
-    and &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a progress
-    event&lt;/span&gt; called &lt;code title=&quot;event-progress&quot;&gt;progress&lt;/code&gt;
-    at the element every 350ms (&amp;#xB1;200ms) or for every byte
-    received, whichever is &lt;em&gt;least&lt;/em&gt; frequent.&lt;/p&gt;
+      &lt;p&gt;Begin to &lt;span&gt;fetch&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;current media
+      resource&lt;/var&gt;.&lt;/p&gt;
 
-    &lt;p&gt;If at any point the user agent has received no data for more
-    than about three seconds, the user agent must &lt;span&gt;queue a
-    task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
-    title=&quot;event-stalled&quot;&gt;stalled&lt;/code&gt; at the element.&lt;/p&gt;
+      &lt;p&gt;Every 350ms (&amp;#xB1;200ms) or for every byte received,
+      whichever is &lt;em&gt;least&lt;/em&gt; frequent, &lt;span&gt;queue a task&lt;/span&gt;
+      to &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
+      title=&quot;event-progress&quot;&gt;progress&lt;/code&gt; at the element.&lt;/p&gt;
 
-    &lt;p&gt;User agents may allow users to selectively block or slow
-    &lt;span&gt;media data&lt;/span&gt; downloads. When a &lt;span&gt;media
-    element&lt;/span&gt;'s download has been blocked, the user agent must
-    act as if it was stalled (as opposed to acting as if the
-    connection was closed).&lt;/p&gt;
+      &lt;p&gt;If at any point the user agent has received no data for more
+      than about three seconds, then &lt;span&gt;queue a task&lt;/span&gt; to
+      &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
+      title=&quot;event-stalled&quot;&gt;stalled&lt;/code&gt; at the element.&lt;/p&gt;
 
-    &lt;p&gt;User agents may decide to not download more content at any
-    time, e.g. after buffering five minutes of a one hour media
-    resource, while waiting for the user to decide whether to play the
-    resource or not, or while waiting for user input in an interactive
-    resource. When a &lt;span&gt;media element&lt;/span&gt;'s download has been
-    suspended, the user agent must set the &lt;code
-    title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; to &lt;code
-    title=&quot;dom-media-NETWORK_IDLE&quot;&gt;NETWORK_IDLE&lt;/code&gt; and &lt;span&gt;queue
-    a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
-    title=&quot;event-suspend&quot;&gt;suspend&lt;/code&gt; at the element.&lt;/p&gt;
+      &lt;p&gt;User agents may allow users to selectively block or slow
+      &lt;span&gt;media data&lt;/span&gt; downloads. When a &lt;span&gt;media
+      element&lt;/span&gt;'s download has been blocked altogether, the user
+      agent must act as if it was stalled (as opposed to acting as if
+      the connection was closed). The rate of the download may also be
+      throttled automatically by the user agent, e.g. to balance the
+      download with other connections sharing the same bandwidth.&lt;/p&gt;
 
-    &lt;p&gt;The user agent may use whatever means necessary to fetch the
-    resource (within the constraints put forward by this and other
-    specifications); for example, reconnecting to the server in the
-    face of network errors, using HTTP partial range requests, or
-    switching to a streaming protocol. The user agent must consider a
-    resource erroneous only if it has given up trying to fetch it.&lt;/p&gt;
+      &lt;p&gt;User agents may decide to not download more content at any
+      time, e.g. after buffering five minutes of a one hour media
+      resource, while waiting for the user to decide whether to play
+      the resource or not, or while waiting for user input in an
+      interactive resource. When a &lt;span&gt;media element&lt;/span&gt;'s
+      download has been suspended, the user agent must set the &lt;code
+      title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; to &lt;code
+      title=&quot;dom-media-NETWORK_IDLE&quot;&gt;NETWORK_IDLE&lt;/code&gt; and
+      &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt;
+      called &lt;code title=&quot;event-suspend&quot;&gt;suspend&lt;/code&gt; at the
+      element. If and when downloading of the resource resumes, the
+      user agent must set the &lt;code
+      title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; to &lt;code
+      title=&quot;dom-media-NETWORK_LOADING&quot;&gt;NETWORK_LOADING&lt;/code&gt;.&lt;/p&gt;
 
-    &lt;p&gt;The &lt;span&gt;networking task source&lt;/span&gt; &lt;span
-    title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; to process the data as it is
-    being fetched must, when appropriate, include the relevant
-    substeps from the following list:&lt;/p&gt;
+      &lt;p&gt;The user agent may use whatever means necessary to fetch the
+      resource (within the constraints put forward by this and other
+      specifications); for example, reconnecting to the server in the
+      face of network errors, using HTTP partial range requests, or
+      switching to a streaming protocol. The user agent must consider a
+      resource erroneous only if it has given up trying to fetch it.&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+      &lt;p&gt;The &lt;span&gt;networking task source&lt;/span&gt; &lt;span
+      title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; to process the data as it is
+      being fetched must, when appropriate, include the relevant
+      substeps from the following list:&lt;/p&gt;
 
-     &lt;dt&gt;If the &lt;span&gt;media data&lt;/span&gt; cannot be fetched at all, due
-     to network errors, causing the user agent to give up trying to
-     fetch the resource&lt;/dt&gt;
+      &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dd&gt;
+       &lt;dt&gt;If the &lt;span&gt;media data&lt;/span&gt; cannot be fetched at all, due
+       to network errors, causing the user agent to give up trying to
+       fetch the resource&lt;/dt&gt;
 
-      &lt;p&gt;DNS errors and HTTP 4xx and 5xx errors (and equivalents in
-      other protocols) must cause the user agent to execute the
-      following steps. User agents may also follow these steps in
-      response to other network errors of similar severity.&lt;/p&gt;
+       &lt;dt&gt;If the &lt;span&gt;media data&lt;/span&gt; can be fetched but is in an
+       unsupported format, or can otherwise not be rendered at
+       all&lt;/dt&gt;
 
-      &lt;ol&gt;
+       &lt;dd&gt;
 
-       &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+        &lt;p&gt;DNS errors, HTTP 4xx and 5xx errors (and equivalents in
+        other protocols), and other fatal network errors that occur
+        before the user agent has established whether the &lt;var
+        title=&quot;&quot;&gt;current media resource&lt;/var&gt; is usable, as well as
+        the file using an unsupported container format, or using
+        unsupported codecs for all the data, must cause the user agent
+        to execute the following steps:&lt;/p&gt;
 
-       &lt;li&gt;The &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
-       title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
-       &lt;code
-       title=&quot;dom-MediaError-MEDIA_ERR_NETWORK&quot;&gt;MEDIA_ERR_NETWORK&lt;/code&gt;.&lt;/li&gt;
+        &lt;ol&gt;
 
-       &lt;li&gt;The &lt;span&gt;begun flag&lt;/span&gt; must be set to false and the
-       user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       progress event&lt;/span&gt; called &lt;code
-       title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;span&gt;media
-       element&lt;/span&gt;.&lt;/li&gt;
+         &lt;li&gt;&lt;p&gt;The user agent should cancel the fetching
+         process.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;The element's &lt;code
-       title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
-       must be switched to the &lt;span
-       title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value and
-       the user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       simple event&lt;/span&gt; called &lt;code
-       title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element.&lt;/li&gt;
+         &lt;li&gt;&lt;p&gt;If there are more items in the &lt;var
+         title=&quot;&quot;&gt;candidates&lt;/var&gt; list, then move on to the next one,
+         jumping back to the top of the &lt;i&gt;candidate loop&lt;/i&gt;;
+         otherwise, jump to the final step in the overall algorithm
+         (the &lt;i&gt;failure step&lt;/i&gt;).&lt;/p&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+        &lt;/ol&gt;
 
-      &lt;/ol&gt;
+       &lt;/dd&gt;
 
-     &lt;/dd&gt;
 
-     &lt;dt id=&quot;fatal-decode-error&quot;&gt;If the &lt;span&gt;media data&lt;/span&gt; can be
-     fetched but is in an unsupported format, or can otherwise not be
-     rendered at all&lt;/dt&gt;
+       &lt;dt&gt;Once enough of the &lt;span&gt;media data&lt;/span&gt; has been fetched
+       to determine the duration of the &lt;span&gt;media resource&lt;/span&gt;, its
+       dimensions, and other metadata&lt;/dt&gt;
 
-     &lt;dd&gt;
+       &lt;dd&gt;
 
-      &lt;p&gt;The server returning a file of the wrong kind (e.g. one that
-      that turns out to not be pure audio when the &lt;span&gt;media
-      element&lt;/span&gt; is an &lt;code&gt;audio&lt;/code&gt; element), or the file
-      using unsupported codecs for all the data, must cause the user
-      agent to execute the following steps. User agents may also
-      execute these steps in response to other codec-related fatal
-      errors, such as the file requiring more resources to process
-      than the user agent can provide in real time.&lt;/p&gt;
+        &lt;p&gt;This indicates that the resource is usable. The user agent
+        must follow these substeps:&lt;/p&gt;
 
-      &lt;ol&gt;
+        &lt;ol&gt;
 
-       &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
+         &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to the
+         &lt;var&gt;earliest possible position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;The &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
-       title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
-       &lt;code
-       title=&quot;dom-MediaError-MEDIA_ERR_DECODE&quot;&gt;MEDIA_ERR_DECODE&lt;/code&gt;.&lt;/li&gt;
+         &lt;li&gt;&lt;p&gt;Set the &lt;code
+         title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute to
+         &lt;code
+         title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;The &lt;span&gt;begun flag&lt;/span&gt; must be set to false and the
-       user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       progress event&lt;/span&gt; called &lt;code
-       title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;span&gt;media
-       element&lt;/span&gt;.&lt;/li&gt;
+         &lt;li&gt;&lt;p class=&quot;note&quot;&gt;A number of attributes, including &lt;code
+         title=&quot;dom-media-duration&quot;&gt;duration&lt;/code&gt;, &lt;code
+         title=&quot;dom-media-buffered&quot;&gt;buffered&lt;/code&gt;, and &lt;code
+         title=&quot;dom-media-played&quot;&gt;played&lt;/code&gt;, become
+         available.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;The element's &lt;code
-       title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
-       must be switched to the &lt;span
-       title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value and
-       the user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       simple event&lt;/span&gt; called &lt;code
-       title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element.&lt;/li&gt;
+         &lt;li&gt;&lt;p class=&quot;note&quot;&gt;The user agent &lt;a
+         href=&quot;#durationChange&quot;&gt;will&lt;/a&gt; &lt;span&gt;queue a task&lt;/span&gt; to
+         &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
+         title=&quot;event-durationchange&quot;&gt;durationchange&lt;/code&gt; at the
+         element at this point.&lt;/li&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+         &lt;li id=&quot;fire-loadedmetadata&quot;&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to
+         &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
+         title=&quot;event-loadedmetadata&quot;&gt;loadedmetadata&lt;/code&gt; at the
+         element.&lt;/li&gt;
 
-      &lt;/ol&gt;
+         &lt;li&gt;
 
-     &lt;/dd&gt;
+          &lt;p&gt;If either the &lt;span&gt;media resource&lt;/span&gt; or the address
+          of the &lt;var title=&quot;&quot;&gt;current media resource&lt;/var&gt; indicate a
+          particular start time, then &lt;span
+          title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; to that time. Ignore any
+          resulting exceptions (if the position is out of range, it is
+          effectively ignored).&lt;/p&gt;
 
-     &lt;dt&gt;If the &lt;span&gt;media data&lt;/span&gt; fetching process is aborted by
-     the user&lt;/dt&gt;
+          &lt;p class=&quot;example&quot;&gt;For example, a fragment identifier could be
+          used to indicate a start position.&lt;/p&gt;
 
-     &lt;dd&gt;
+         &lt;/li&gt;
 
-      &lt;p&gt;The fetching process is aborted by the user, e.g. because the
-      user navigated the browsing context to another page, the user
-      agent must execute the following steps. These steps are not
-      followed if the &lt;code title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt;
-      method itself is reinvoked, as the steps above handle that
-      particular kind of abort.&lt;/p&gt;
+        &lt;/ol&gt;
 
-      &lt;ol&gt;
+       &lt;/dd&gt;
 
-       &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-       &lt;li&gt;The &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
-       must be set to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
-       title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
-       &lt;code
-       title=&quot;dom-MediaError-MEDIA_ERR_ABORT&quot;&gt;MEDIA_ERR_ABORT&lt;/code&gt;.&lt;/li&gt;
+       &lt;dt&gt;If the connection is interrupted, causing the user agent to
+       give up trying to fetch the resource&lt;/dt&gt;
 
-       &lt;li&gt;The &lt;span&gt;begun flag&lt;/span&gt; must be set to false and the
-       user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       progress event&lt;/span&gt; called &lt;code
-       title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; at the &lt;span&gt;media
-       element&lt;/span&gt;.&lt;/li&gt;
+       &lt;dd&gt;
 
-       &lt;li&gt;If the &lt;span&gt;media element&lt;/span&gt;'s &lt;code
-       title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute has a
-       value equal to &lt;code
-       title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, the
-       element's &lt;code
-       title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
-       must be switched to the &lt;span
-       title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value and
-       the user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
-       simple event&lt;/span&gt; called &lt;code
-       title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element. (If the
-       &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute
-       has a value greater than &lt;code
-       title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, then this
-       doesn't happen; the available data, if any, will be
-       playable.)&lt;/li&gt;
+        &lt;p&gt;Fatal network errors that occur after the user agent has
+        established whether the &lt;var title=&quot;&quot;&gt;current media
+        resource&lt;/var&gt; is usable must cause the user agent to execute
+        the following steps:&lt;/p&gt;
 
-       &lt;li&gt;These steps must be aborted.&lt;/li&gt;
+        &lt;ol&gt;
 
-      &lt;/ol&gt;
+         &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-     &lt;/dd&gt;
+         &lt;li&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt;
+         attribute to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
+         title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
+         &lt;code
+         title=&quot;dom-MediaError-MEDIA_ERR_NETWORK&quot;&gt;MEDIA_ERR_NETWORK&lt;/code&gt;.&lt;/li&gt;
 
-     &lt;dt id=&quot;non-fatal-media-error&quot;&gt;If the &lt;span&gt;media data&lt;/span&gt; can
-     be fetched but has non-fatal errors or uses, in part, codecs that
-     are unsupported, preventing the user agent from rendering the
-     content completely correctly but not preventing playback
-     altogether&lt;/dt&gt;
+         &lt;li&gt;Set the &lt;span&gt;begun flag&lt;/span&gt; to false and &lt;span&gt;queue
+         a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called
+         &lt;code title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;span&gt;media
+         element&lt;/span&gt;.&lt;/li&gt;
 
-     &lt;dd&gt;
+         &lt;li&gt;Set the element's &lt;code
+         title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
+         to the &lt;span
+         title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value
+         and &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+         event&lt;/span&gt; called &lt;code
+         title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element.&lt;/li&gt;
 
-      &lt;p&gt;The server returning data that is partially usable but cannot
-      be optimally rendered must cause the user agent to execute the
-      following steps.&lt;/p&gt;
+         &lt;li&gt;Abort the overall &lt;code
+         title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method algorithm.&lt;/li&gt;
 
-      &lt;ol&gt;
+        &lt;/ol&gt;
 
-       &lt;li class=&quot;XXX&quot;&gt;Should we fire a 'warning' event? Set the
-       'error' flag to 'MEDIA_ERR_SUBOPTIMAL' or something?&lt;/li&gt;
+       &lt;/dd&gt;
 
-      &lt;/ol&gt;
+       &lt;dt id=&quot;fatal-decode-error&quot;&gt;If the &lt;span&gt;media data&lt;/span&gt; is
+       corrupted&lt;/dt&gt;
 
-     &lt;/dd&gt;
+       &lt;dd&gt;
 
-     &lt;dt&gt;Once enough of the &lt;span&gt;media data&lt;/span&gt; has been fetched
-     to determine the duration of the &lt;span&gt;media resource&lt;/span&gt;, its
-     dimensions, and other metadata&lt;/dt&gt;
+        &lt;p&gt;Fatal errors in decoding the &lt;span&gt;media data&lt;/span&gt; that
+        occur after the user agent has established whether the &lt;var
+        title=&quot;&quot;&gt;current media resource&lt;/var&gt; is usable must cause the
+        user agent to execute the following steps:&lt;/p&gt;
 
-     &lt;dd&gt;
+        &lt;ol&gt;
 
-      &lt;p&gt;The user agent must follow these substeps:&lt;/p&gt;
+         &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-      &lt;ol&gt;
+         &lt;li&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt;
+         attribute to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
+         title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
+         &lt;code
+         title=&quot;dom-MediaError-MEDIA_ERR_DECODE&quot;&gt;MEDIA_ERR_DECODE&lt;/code&gt;.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;current playback position&lt;/span&gt; to the
-       &lt;var&gt;earliest possible position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+         &lt;li&gt;Set the &lt;span&gt;begun flag&lt;/span&gt; to false and &lt;span&gt;queue
+         a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called
+         &lt;code title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;span&gt;media
+         element&lt;/span&gt;.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;The &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
-       attribute must be set to &lt;code
-       title=&quot;dom-media-HAVE_METADATA&quot;&gt;HAVE_METADATA&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
+         &lt;li&gt;Set the element's &lt;code
+         title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
+         to the &lt;span
+         title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value
+         and &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+         event&lt;/span&gt; called &lt;code
+         title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p class=&quot;note&quot;&gt;A number of attributes, including &lt;code
-       title=&quot;dom-media-duration&quot;&gt;duration&lt;/code&gt;, &lt;code
-       title=&quot;dom-media-buffered&quot;&gt;buffered&lt;/code&gt;, and &lt;code
-       title=&quot;dom-media-played&quot;&gt;played&lt;/code&gt;, become
-       available.&lt;/p&gt;&lt;/li&gt;
+         &lt;li&gt;Abort the overall &lt;code
+         title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method algorithm.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p class=&quot;note&quot;&gt;The user agent &lt;a
-       href=&quot;#durationChange&quot;&gt;will&lt;/a&gt; &lt;span&gt;queue a task&lt;/span&gt; to
-       &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
-       title=&quot;event-durationchange&quot;&gt;durationchange&lt;/code&gt; at the
-       element at this point.&lt;/li&gt;
+        &lt;/ol&gt;
 
-       &lt;li id=&quot;fire-loadedmetadata&quot;&gt;&lt;p&gt;The user agent must &lt;span&gt;queue
-       a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; called &lt;code
-       title=&quot;event-loadedmetadata&quot;&gt;loadedmetadata&lt;/code&gt; at the
-       element.&lt;/li&gt;
+       &lt;/dd&gt;
 
-       &lt;li&gt;
+       &lt;dt&gt;If the &lt;span&gt;media data&lt;/span&gt; fetching process is aborted by
+       the user&lt;/dt&gt;
 
-        &lt;p&gt;If either the &lt;span&gt;media resource&lt;/span&gt; or the address of
-        the &lt;span&gt;chosen media resource&lt;/span&gt; indicate a particular
-        start time, then &lt;span title=&quot;dom-media-seek&quot;&gt;seek&lt;/span&gt; to
-        that time. Ignore any resulting exceptions (if the position is
-        out of range, it is effectively ignored).&lt;/p&gt;
+       &lt;dd&gt;
 
-        &lt;p class=&quot;example&quot;&gt;For example, a fragment identifier could be
-        used to indicate a start position.&lt;/p&gt;
+        &lt;p&gt;The fetching process is aborted by the user, e.g. because
+        the user navigated the browsing context to another page, the
+        user agent must execute the following steps. These steps are
+        not followed if the &lt;code title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt;
+        method itself is reinvoked, as the steps above handle that
+        particular kind of abort.&lt;/p&gt;
 
-       &lt;/li&gt;
+        &lt;ol&gt;
 
-      &lt;/ol&gt;
+         &lt;li&gt;The user agent should cancel the fetching process.&lt;/li&gt;
 
-     &lt;/dd&gt;
+         &lt;li&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt;
+         attribute to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
+         title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to
+         &lt;code
+         title=&quot;dom-MediaError-MEDIA_ERR_ABORT&quot;&gt;MEDIA_ERR_ABORT&lt;/code&gt;.&lt;/li&gt;
 
-    &lt;/dl&gt;
+         &lt;li&gt;Set the &lt;span&gt;begun flag&lt;/span&gt; to false and &lt;span&gt;queue
+         a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called
+         &lt;code title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; at the &lt;span&gt;media
+         element&lt;/span&gt;.&lt;/li&gt;
 
-    &lt;p&gt;When the user agent has completely fetched of the entire
-    &lt;span&gt;media resource&lt;/span&gt;, it must move on to the next
-    step. This might never happen, e.g. when streaming an infinite
-    resource such as Web radio.&lt;/p&gt;
+         &lt;li&gt;If the &lt;span&gt;media element&lt;/span&gt;'s &lt;code
+         title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt; attribute has
+         a value equal to &lt;code
+         title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, set the
+         element's &lt;code
+         title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute
+         to the &lt;span
+         title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt; value
+         and &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+         event&lt;/span&gt; called &lt;code
+         title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at the element. (If the
+         &lt;code title=&quot;dom-media-readyState&quot;&gt;readyState&lt;/code&gt;
+         attribute has a value greater than &lt;code
+         title=&quot;dom-media-HAVE_NOTHING&quot;&gt;HAVE_NOTHING&lt;/code&gt;, then this
+         doesn't happen; the available data, if any, will be
+         playable.)&lt;/li&gt;
 
+         &lt;li&gt;Abort the overall &lt;code
+         title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method algorithm.&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt id=&quot;non-fatal-media-error&quot;&gt;If the &lt;span&gt;media data&lt;/span&gt; can
+       be fetched but has non-fatal errors or uses, in part, codecs that
+       are unsupported, preventing the user agent from rendering the
+       content completely correctly but not preventing playback
+       altogether&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;The server returning data that is partially usable but cannot
+        be optimally rendered must cause the user agent to execute the
+        following steps.&lt;/p&gt;
+
+        &lt;ol&gt;
+
+         &lt;li class=&quot;XXX&quot;&gt;Should we fire a 'warning' event? Set the
+         'error' flag to 'MEDIA_ERR_SUBOPTIMAL' or something?&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+      &lt;p&gt;When the user agent has completely fetched of the entire
+      &lt;span&gt;media resource&lt;/span&gt;, it must move on to the next
+      step. This might never happen, e.g. when streaming an infinite
+      resource such as Web radio.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the fetching process completes without errors, then set
+     the &lt;span&gt;begun flag&lt;/span&gt; to false, set the &lt;code
+     title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute to
+     &lt;code title=&quot;dom-media-NETWORK_LOADED&quot;&gt;NETWORK_LOADED&lt;/code&gt;, and
+     &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt;
+     called &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; at the
+     element.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;Then, abort the overall &lt;code
+     title=&quot;dom-media-load&quot;&gt;load()&lt;/code&gt; method algorithm.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the fetching process completes without errors, the
-   &lt;span&gt;begun flag&lt;/span&gt; must be set to false, the &lt;code
-   title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute must
-   be set to &lt;code
-   title=&quot;dom-media-NETWORK_LOADED&quot;&gt;NETWORK_LOADED&lt;/code&gt;, and the
-   user agent must &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a progress
-   event&lt;/span&gt; called &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; at the
-   element.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;&lt;i&gt;Failure step&lt;/i&gt;: No usable resource was found. Run the
+    following steps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Set the &lt;code title=&quot;dom-media-error&quot;&gt;error&lt;/code&gt; attribute
+     to a new &lt;code&gt;MediaError&lt;/code&gt; object whose &lt;code
+     title=&quot;dom-MediaError-code&quot;&gt;code&lt;/code&gt; attribute is set to &lt;code
+     title=&quot;dom-MediaError-MEDIA_ERR_NONE_SUPPORTED&quot;&gt;MEDIA_ERR_NONE_SUPPORTED&lt;/code&gt;.&lt;/li&gt;
+
+     &lt;li&gt;Set the &lt;span&gt;begun flag&lt;/span&gt; to false and &lt;span&gt;queue a
+     task&lt;/span&gt; to &lt;span&gt;fire a progress event&lt;/span&gt; called &lt;code
+     title=&quot;event-error&quot;&gt;error&lt;/code&gt; at the &lt;span&gt;media
+     element&lt;/span&gt;.&lt;/li&gt;
+
+     &lt;li&gt;Set the element's &lt;code
+     title=&quot;dom-media-networkState&quot;&gt;networkState&lt;/code&gt; attribute to
+     the &lt;span title=&quot;dom-media-NETWORK_EMPTY&quot;&gt;NETWORK_EMPTY&lt;/span&gt;
+     value and &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple
+     event&lt;/span&gt; called &lt;code title=&quot;event-emptied&quot;&gt;emptied&lt;/code&gt; at
+     the element.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
   &lt;/ol&gt;
 
   &lt;p&gt;If a &lt;span&gt;media element&lt;/span&gt; whose &lt;code


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009286.html">[html5] r2402 - [e] (0) c/p error (credit: mg)
</A></li>
	<LI>Next message: <A HREF="009288.html">[html5] r2404 - [gw] (2) Make &lt;source type&gt; optional. Move	canPlayType from navigator to HTMLMed [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9287">[ date ]</a>
              <a href="thread.html#9287">[ thread ]</a>
              <a href="subject.html#9287">[ subject ]</a>
              <a href="author.html#9287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
