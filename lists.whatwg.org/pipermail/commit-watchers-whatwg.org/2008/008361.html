<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1461 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1461%20-%20/&In-Reply-To=%3C20080418234433.DF645139DDE%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008360.html">
   <LINK REL="Next"  HREF="008362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1461 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1461%20-%20/&In-Reply-To=%3C20080418234433.DF645139DDE%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1461 - /">whatwg at whatwg.org
       </A><BR>
    <I>Fri Apr 18 16:44:33 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008360.html">[html5] r1460 - /
</A></li>
        <LI>Next message: <A HREF="008362.html">[html5] r1462 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8361">[ date ]</a>
              <a href="thread.html#8361">[ thread ]</a>
              <a href="subject.html#8361">[ subject ]</a>
              <a href="author.html#8361">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-04-18 16:44:32 -0700 (Fri, 18 Apr 2008)
New Revision: 1461

Modified:
   index
   source
Log:
[] (0) Define document.readyState

Modified: index
===================================================================
--- index	2008-04-18 22:34:05 UTC (rev 1460)
+++ index	2008-04-18 23:44:32 UTC (rev 1461)
@@ -2601,6 +2601,7 @@
            attribute DOMString &lt;a href=&quot;#charset0&quot; title=dom-document-charset&gt;charset&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#characterset&quot; title=dom-document-characterSet&gt;characterSet&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#defaultcharset&quot; title=dom-document-defaultCharset&gt;defaultCharset&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#readystate&quot; title=dom-document-readyState&gt;readyState&lt;/a&gt;;
 
   // &lt;a href=&quot;#dom-tree0&quot;&gt;DOM tree accessors&lt;/a&gt;
            attribute DOMString &lt;a href=&quot;#document.title&quot; title=dom-document-title&gt;title&lt;/a&gt;;
@@ -2645,7 +2646,6 @@
   DOMString &lt;a href=&quot;#querycommandvalue&quot; title=dom-document-queryCommandValue&gt;queryCommandValue&lt;/a&gt;(in DOMString commandId);
   &lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt; &lt;a href=&quot;#getselection0&quot; title=dom-document-getSelection&gt;getSelection&lt;/a&gt;();
 &lt;!-- XXX we're not done here.
- readonly attribute DOMString readyState;
  readonly attribute HTMLCollection scripts;
 --&gt;
 };&lt;/pre&gt;
@@ -2835,6 +2835,22 @@
    with the user's current geographical location, or any arbitrary encoding
    name.
 
+  &lt;p&gt;Each document has a &lt;dfn id=current&gt;current document readiness&lt;/dfn&gt;.
+   When a &lt;code&gt;Document&lt;/code&gt; object is created, it must have its &lt;a
+   href=&quot;#current&quot;&gt;current document readiness&lt;/a&gt; set to the string
+   &quot;loading&quot;. Various algorithms during page loading affect this value. When
+   the value is set, the user agent must &lt;a href=&quot;#firing2&quot;&gt;fire a simple
+   event&lt;/a&gt; called &lt;code
+   title=event-readystatechanged&gt;readystatechanged&lt;/code&gt; at the
+   &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
+  &lt;!-- XXX define
+  document.onreadystatechange --&gt;
+
+  &lt;p&gt;The &lt;dfn id=readystate
+   title=dom-document-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM attribute
+   must, on getting, return the &lt;a href=&quot;#current&quot;&gt;current document
+   readiness&lt;/a&gt;.
+
   &lt;h3 id=elements&gt;&lt;span class=secno&gt;2.2 &lt;/span&gt;Elements&lt;/h3&gt;
 
   &lt;p&gt;The nodes representing &lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in the
@@ -3876,7 +3892,7 @@
     &lt;ol&gt;
      &lt;li&gt;Remove all the entries in the &lt;a href=&quot;#browsing0&quot;&gt;browsing
       context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session history&lt;/a&gt; after the &lt;a
-      href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; in its &lt;code&gt;Document&lt;/code&gt;'s
+      href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in its &lt;code&gt;Document&lt;/code&gt;'s
       &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object
 
      &lt;li&gt;Remove any earlier entries that share the same &lt;code&gt;Document&lt;/code&gt;
@@ -14289,19 +14305,19 @@
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=&quot;#video1&quot;&gt;video&lt;/a&gt;&lt;/code&gt; element is &lt;a
    href=&quot;#actively&quot;&gt;actively playing&lt;/a&gt;, it represents the frame of video at
-   the continuously increasing &lt;a href=&quot;#current&quot; title=&quot;current playback
-   position&quot;&gt;&quot;current&quot; position&lt;/a&gt;. When the &lt;a href=&quot;#current&quot;&gt;current
+   the continuously increasing &lt;a href=&quot;#current0&quot; title=&quot;current playback
+   position&quot;&gt;&quot;current&quot; position&lt;/a&gt;. When the &lt;a href=&quot;#current0&quot;&gt;current
    playback position&lt;/a&gt; changes such that the last frame rendered is no
-   longer the frame corresponding to the &lt;a href=&quot;#current&quot;&gt;current playback
+   longer the frame corresponding to the &lt;a href=&quot;#current0&quot;&gt;current playback
    position&lt;/a&gt; in the video, the new frame must be rendered. Similarly, any
    audio associated with the video must, if played, be played synchronised
-   with the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;, at the
+   with the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;, at the
    specified &lt;a href=&quot;#volume&quot; title=dom-media-volume&gt;volume&lt;/a&gt; with the
    specified &lt;a href=&quot;#muted&quot; title=dom-media-muted&gt;mute state&lt;/a&gt;.
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=&quot;#video1&quot;&gt;video&lt;/a&gt;&lt;/code&gt; element is &lt;a
    href=&quot;#paused&quot; title=dom-media-paused&gt;paused&lt;/a&gt;, the element represents
-   the frame of video corresponding to the &lt;a href=&quot;#current&quot; title=&quot;current
+   the frame of video corresponding to the &lt;a href=&quot;#current0&quot; title=&quot;current
    playback position&quot;&gt;current playback position&lt;/a&gt;, or, if that is not
    available yet (e.g. because the video is seeking or buffering), the last
    rendered frame of video.
@@ -14474,9 +14490,9 @@
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=&quot;#audio1&quot;&gt;audio&lt;/a&gt;&lt;/code&gt; element is &lt;a
    href=&quot;#actively&quot;&gt;actively playing&lt;/a&gt;, it must have its audio data played
-   synchronised with the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;, at
-   the specified &lt;a href=&quot;#volume&quot; title=dom-media-volume&gt;volume&lt;/a&gt; with the
-   specified &lt;a href=&quot;#muted&quot; title=dom-media-muted&gt;mute state&lt;/a&gt;.
+   synchronised with the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;,
+   at the specified &lt;a href=&quot;#volume&quot; title=dom-media-volume&gt;volume&lt;/a&gt; with
+   the specified &lt;a href=&quot;#muted&quot; title=dom-media-muted&gt;mute state&lt;/a&gt;.
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=&quot;#audio1&quot;&gt;audio&lt;/a&gt;&lt;/code&gt; element is not &lt;a
    href=&quot;#actively&quot;&gt;actively playing&lt;/a&gt;, audio must not play for the
@@ -14521,7 +14537,7 @@
   const unsigned short &lt;a href=&quot;#canshowcurrentframe&quot; title=dom-media-CAN_SHOW_CURRENT_FRAME&gt;CAN_SHOW_CURRENT_FRAME&lt;/a&gt; = 1;
   const unsigned short &lt;a href=&quot;#canplay&quot; title=dom-media-CAN_PLAY&gt;CAN_PLAY&lt;/a&gt; = 2;
   const unsigned short &lt;a href=&quot;#canplaythrough&quot; title=dom-media-CAN_PLAY_THROUGH&gt;CAN_PLAY_THROUGH&lt;/a&gt; = 3;
-  readonly attribute unsigned short &lt;a href=&quot;#readystate&quot; title=dom-media-readyState&gt;readyState&lt;/a&gt;;
+  readonly attribute unsigned short &lt;a href=&quot;#readystate0&quot; title=dom-media-readyState&gt;readyState&lt;/a&gt;;
   readonly attribute boolean &lt;a href=&quot;#seeking0&quot; title=dom-media-seeking&gt;seeking&lt;/a&gt;;
 
   // playback state
@@ -14875,7 +14891,7 @@
      title=&quot;&quot;&gt;events&lt;/var&gt; list--&gt;.
 
      &lt;li&gt;If &lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; is not set to &lt;code
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; is not set to &lt;code
       title=dom-media-DATA_UNAVAILABLE&gt;&lt;a
       href=&quot;#dataunavailable&quot;&gt;DATA_UNAVAILABLE&lt;/a&gt;&lt;/code&gt;, it must be set to
       that state&lt;!-- and the user agent must add &lt;code
@@ -14891,7 +14907,7 @@
      &lt;li&gt;If &lt;code title=dom-media-seeking&gt;&lt;a
       href=&quot;#seeking0&quot;&gt;seeking&lt;/a&gt;&lt;/code&gt; is true, it must be set to false.
 
-     &lt;li&gt;The &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; must be set to
+     &lt;li&gt;The &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; must be set to
       0.
 
      &lt;li&gt;The &lt;code title=dom-media-currentLoop&gt;&lt;a
@@ -15115,7 +15131,7 @@
 
       &lt;ol&gt;
        &lt;li&gt;
-        &lt;p&gt;The &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; must be set
+        &lt;p&gt;The &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; must be set
          to the &lt;var&gt;&lt;a href=&quot;#effective&quot;&gt;effective start&lt;/a&gt;&lt;/var&gt;.
 
        &lt;li&gt;
@@ -15161,7 +15177,7 @@
 
        &lt;li&gt;
         &lt;p&gt;The &lt;code title=dom-media-readyState&gt;&lt;a
-         href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute must change to
+         href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute must change to
          &lt;code title=dom-media-CAN_SHOW_CURRENT_FRAME&gt;&lt;a
          href=&quot;#canshowcurrentframe&quot;&gt;CAN_SHOW_CURRENT_FRAME&lt;/a&gt;&lt;/code&gt;.
 
@@ -15244,12 +15260,12 @@
    href=&quot;#media5&quot;&gt;media element&lt;/a&gt;.
 
   &lt;p&gt;&lt;a href=&quot;#media5&quot; title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a &lt;dfn
-   id=current&gt;current playback position&lt;/dfn&gt;, which must initially be zero.
+   id=current0&gt;current playback position&lt;/dfn&gt;, which must initially be zero.
    The current position is a time.
 
   &lt;p&gt;The &lt;dfn id=currenttime
    title=dom-media-currentTime&gt;&lt;code&gt;currentTime&lt;/code&gt;&lt;/dfn&gt; attribute must,
-   on getting, return the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;,
+   on getting, return the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;,
    expressed in seconds. On setting, the user agent must &lt;a href=&quot;#seek&quot;
    title=dom-media-seek&gt;seek&lt;/a&gt; to the new value (which might raise an
    exception).
@@ -15382,7 +15398,7 @@
    &lt;li&gt;
     &lt;p&gt;If the &lt;code title=dom-media-currentLoop&gt;&lt;a
      href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is zero, and the &lt;a
-     href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is before the &lt;var&gt;&lt;a
+     href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is before the &lt;var&gt;&lt;a
      href=&quot;#effective&quot;&gt;effective start&lt;/a&gt;&lt;/var&gt;, the user agent must &lt;a
      href=&quot;#seek&quot; title=dom-media-seek&gt;seek&lt;/a&gt; to the &lt;var&gt;&lt;a
      href=&quot;#effective&quot;&gt;effective start&lt;/a&gt;&lt;/var&gt;.
@@ -15390,7 +15406,7 @@
    &lt;li&gt;
     &lt;p&gt;If the &lt;code title=dom-media-currentLoop&gt;&lt;a
      href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is greater than zero, and the
-     &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is before the &lt;var&gt;&lt;a
+     &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is before the &lt;var&gt;&lt;a
      href=&quot;#effective0&quot;&gt;effective loop start&lt;/a&gt;&lt;/var&gt;, the user agent must
      &lt;a href=&quot;#seek&quot; title=dom-media-seek&gt;seek&lt;/a&gt; to the &lt;var&gt;&lt;a
      href=&quot;#effective0&quot;&gt;effective loop start&lt;/a&gt;&lt;/var&gt;.
@@ -15400,7 +15416,7 @@
      href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is less than &lt;span&gt;&lt;code
      title=dom-media-playCount&gt;&lt;a
      href=&quot;#playcount0&quot;&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt;, and the &lt;a
-     href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is after the &lt;var&gt;&lt;a
+     href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is after the &lt;var&gt;&lt;a
      href=&quot;#effective1&quot;&gt;effective loop end&lt;/a&gt;&lt;/var&gt;, the user agent must &lt;a
      href=&quot;#seek&quot; title=dom-media-seek&gt;seek&lt;/a&gt; to the &lt;var&gt;&lt;a
      href=&quot;#effective0&quot;&gt;effective loop start&lt;/a&gt;&lt;/var&gt;, and increase &lt;code
@@ -15412,7 +15428,7 @@
      href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is equal to &lt;span&gt;&lt;code
      title=dom-media-playCount&gt;&lt;a
      href=&quot;#playcount0&quot;&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt;, and the &lt;a
-     href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is after the &lt;var&gt;&lt;a
+     href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is after the &lt;var&gt;&lt;a
      href=&quot;#effective2&quot;&gt;effective end&lt;/a&gt;&lt;/var&gt;, the user agent must &lt;a
      href=&quot;#seek&quot; title=dom-media-seek&gt;seek&lt;/a&gt; to the &lt;var&gt;&lt;a
      href=&quot;#effective2&quot;&gt;effective end&lt;/a&gt;&lt;/var&gt; and then the looping will
@@ -15423,7 +15439,7 @@
 
   &lt;p&gt;&lt;a href=&quot;#media5&quot; title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a
    &lt;em&gt;ready state&lt;/em&gt;, which describes to what degree they are ready to be
-   rendered at the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;. The
+   rendered at the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;. The
    possible values are as follows; the ready state of a media element at any
    particular time is the greatest value describing the state of the element:
 
@@ -15432,7 +15448,7 @@
     title=dom-media-DATA_UNAVAILABLE&gt;&lt;code&gt;DATA_UNAVAILABLE&lt;/code&gt;&lt;/dfn&gt;
     (numeric value 0)
 
-   &lt;dd&gt;No data for the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is
+   &lt;dd&gt;No data for the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is
     available. &lt;a href=&quot;#media5&quot; title=&quot;media element&quot;&gt;Media elements&lt;/a&gt;
     whose &lt;code title=dom-media-networkState&gt;&lt;a
     href=&quot;#networkstate&quot;&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is less than &lt;code
@@ -15445,42 +15461,42 @@
     title=dom-media-CAN_SHOW_CURRENT_FRAME&gt;&lt;code&gt;CAN_SHOW_CURRENT_FRAME&lt;/code&gt;&lt;/dfn&gt;
     (numeric value 1)
 
-   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current&quot;&gt;current playback
+   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current0&quot;&gt;current playback
     position&lt;/a&gt; is available, but not enough data is available that the user
-    agent could successfully advance the &lt;a href=&quot;#current&quot;&gt;current playback
+    agent could successfully advance the &lt;a href=&quot;#current0&quot;&gt;current playback
     position&lt;/a&gt; at all without immediately reverting to the &lt;code
     title=dom-media-DATA_UNAVAILABLE&gt;&lt;a
     href=&quot;#dataunavailable&quot;&gt;DATA_UNAVAILABLE&lt;/a&gt;&lt;/code&gt; state. In video, this
     corresponds to the user agent having data from the current frame, but not
     the next frame. In audio, this corresponds to the user agent only having
-    audio up to the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;, but no
+    audio up to the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;, but no
     further.
 
    &lt;dt&gt;&lt;dfn id=canplay title=dom-media-CAN_PLAY&gt;&lt;code&gt;CAN_PLAY&lt;/code&gt;&lt;/dfn&gt;
     (numeric value 2)
 
-   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current&quot;&gt;current playback
+   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current0&quot;&gt;current playback
     position&lt;/a&gt; is available, as well as enough data for the user agent to
-    advance the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; at least a
+    advance the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; at least a
     little without immediately reverting to the &lt;code
     title=dom-media-DATA_UNAVAILABLE&gt;&lt;a
     href=&quot;#dataunavailable&quot;&gt;DATA_UNAVAILABLE&lt;/a&gt;&lt;/code&gt; state. In video, this
     corresponds to the user agent having data for the current frame and the
     next frame. In audio, this corresponds ot the user agent having data
-    beyond the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;.
+    beyond the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;.
 
    &lt;dt&gt;&lt;dfn id=canplaythrough
     title=dom-media-CAN_PLAY_THROUGH&gt;&lt;code&gt;CAN_PLAY_THROUGH&lt;/code&gt;&lt;/dfn&gt;
     (numeric value 3)
 
-   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current&quot;&gt;current playback
+   &lt;dd&gt;Data for the immediate &lt;a href=&quot;#current0&quot;&gt;current playback
     position&lt;/a&gt; is available, as well as enough data for the user agent to
-    advance the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; at least a
+    advance the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; at least a
     little without immediately reverting to the &lt;code
     title=dom-media-DATA_UNAVAILABLE&gt;&lt;a
     href=&quot;#dataunavailable&quot;&gt;DATA_UNAVAILABLE&lt;/a&gt;&lt;/code&gt; state, and, in
     addition, the user agent estimates that data is being downloaded at a
-    rate where the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;, if it
+    rate where the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;, if it
     were to advance at the rate given by the &lt;code
     title=dom-media-defaultPlaybackRate&gt;&lt;a
     href=&quot;#defaultplaybackrate&quot;&gt;defaultPlaybackRate&lt;/a&gt;&lt;/code&gt; attribute,
@@ -15566,7 +15582,7 @@
    is reached as part of the &lt;code title=dom-media-load&gt;&lt;a
    href=&quot;#load&quot;&gt;load()&lt;/a&gt;&lt;/code&gt; method's processing.
 
-  &lt;p&gt;The &lt;dfn id=readystate
+  &lt;p&gt;The &lt;dfn id=readystate0
    title=dom-media-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM attribute
    must, on getting, return the value described above that describes the
    current ready state of the &lt;a href=&quot;#media5&quot;&gt;media element&lt;/a&gt;.
@@ -15593,7 +15609,7 @@
    id=actively&gt;actively playing&lt;/dfn&gt; when its &lt;code
    title=dom-media-paused&gt;&lt;a href=&quot;#paused&quot;&gt;paused&lt;/a&gt;&lt;/code&gt; attribute is
    false, the &lt;code title=dom-media-readyState&gt;&lt;a
-   href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code
+   href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code
    title=dom-media-CAN_PLAY&gt;&lt;a href=&quot;#canplay&quot;&gt;CAN_PLAY&lt;/a&gt;&lt;/code&gt; or &lt;code
    title=dom-media-CAN_PLAY_THROUGH&gt;&lt;a
    href=&quot;#canplaythrough&quot;&gt;CAN_PLAY_THROUGH&lt;/a&gt;&lt;/code&gt;, the element has not &lt;a
@@ -15607,7 +15623,7 @@
    href=&quot;#networkstate&quot;&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute is &lt;code
    title=dom-media-LOADED_METADATA&gt;&lt;a
    href=&quot;#loadedmetadata&quot;&gt;LOADED_METADATA&lt;/a&gt;&lt;/code&gt; or greater, the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is equal to the &lt;var&gt;&lt;a
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is equal to the &lt;var&gt;&lt;a
    href=&quot;#effective2&quot;&gt;effective end&lt;/a&gt;&lt;/var&gt; of the &lt;a href=&quot;#media8&quot;&gt;media
    resource&lt;/a&gt;, and the &lt;code title=dom-media-currentLoop&gt;&lt;a
    href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; attribute is equal to
@@ -15623,13 +15639,13 @@
    agent &lt;a href=&quot;#non-fatal-media-error&quot;&gt;encounters a non-fatal error&lt;/a&gt;
    during the processing of the &lt;a href=&quot;#media7&quot;&gt;media data&lt;/a&gt;, and due to
    that error, is not able to play the content at the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;.
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;.
 
   &lt;p&gt;A &lt;a href=&quot;#media5&quot;&gt;media element&lt;/a&gt; is said to have &lt;dfn
    id=paused0&gt;paused for user interaction&lt;/dfn&gt; when its &lt;code
    title=dom-media-paused&gt;&lt;a href=&quot;#paused&quot;&gt;paused&lt;/a&gt;&lt;/code&gt; attribute is
    false, the &lt;code title=dom-media-readyState&gt;&lt;a
-   href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code
+   href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is either &lt;code
    title=dom-media-CAN_PLAY&gt;&lt;a href=&quot;#canplay&quot;&gt;CAN_PLAY&lt;/a&gt;&lt;/code&gt; or &lt;code
    title=dom-media-CAN_PLAY_THROUGH&gt;&lt;a
    href=&quot;#canplaythrough&quot;&gt;CAN_PLAY_THROUGH&lt;/a&gt;&lt;/code&gt; and the user agent has
@@ -15645,7 +15661,7 @@
    title=dom-ownerDocument&gt;owner &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt;&lt;!-- XXX
   xref --&gt;
    is an &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt;, its &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; must increase monotonically
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; must increase monotonically
    at &lt;code title=dom-media-playbackRate&gt;&lt;a
    href=&quot;#playbackrate&quot;&gt;playbackRate&lt;/a&gt;&lt;/code&gt; units of media time per unit
    time of wall clock time. If this value is not 1, the user agent may apply
@@ -15657,12 +15673,12 @@
    element&lt;/a&gt; could play in a non-linear fashion. If this happens, the user
    agent must act as if the algorithm for &lt;a href=&quot;#seek&quot;
    title=dom-media-seek&gt;seeking&lt;/a&gt; was used whenever the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; changes in a discontinuous
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; changes in a discontinuous
    fashion (so that the relevant events fire).
 
   &lt;p&gt;When a &lt;a href=&quot;#media5&quot;&gt;media element&lt;/a&gt; that is &lt;a
    href=&quot;#actively&quot;&gt;actively playing&lt;/a&gt; stops playing because its &lt;code
-   title=dom-media-readyState&gt;&lt;a href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt;
+   title=dom-media-readyState&gt;&lt;a href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt;
    attribute changes to a value lower than &lt;code title=dom-media-CAN_PLAY&gt;&lt;a
    href=&quot;#canplay&quot;&gt;CAN_PLAY&lt;/a&gt;&lt;/code&gt;, without the element having &lt;a
    href=&quot;#ended&quot;&gt;ended playback&lt;/a&gt;, or playback having &lt;a
@@ -15685,7 +15701,7 @@
    href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is less than &lt;span&gt;&lt;code
    title=dom-media-playCount&gt;&lt;a
    href=&quot;#playcount0&quot;&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt; and the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; reaches the &lt;var&gt;&lt;a
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; reaches the &lt;var&gt;&lt;a
    href=&quot;#effective1&quot;&gt;effective loop end&lt;/a&gt;&lt;/var&gt;, then the user agent must
    &lt;a href=&quot;#seek&quot; title=dom-media-seek&gt;seek&lt;/a&gt; to the &lt;var&gt;&lt;a
    href=&quot;#effective0&quot;&gt;effective loop start&lt;/a&gt;&lt;/var&gt;, increase &lt;code
@@ -15697,7 +15713,7 @@
    href=&quot;#currentloop&quot;&gt;currentLoop&lt;/a&gt;&lt;/code&gt; is equal to the &lt;span&gt;&lt;code
    title=dom-media-playCount&gt;&lt;a
    href=&quot;#playcount0&quot;&gt;playCount&lt;/a&gt;&lt;/code&gt;-1&lt;/span&gt; and the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; reaches the &lt;var&gt;&lt;a
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; reaches the &lt;var&gt;&lt;a
    href=&quot;#effective2&quot;&gt;effective end&lt;/a&gt;&lt;/var&gt;, then the user agent must
    follow these steps:
 
@@ -15929,7 +15945,7 @@
      of a DOM attribute), and abort these steps.
 
    &lt;li&gt;
-    &lt;p&gt;The &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; must be set to
+    &lt;p&gt;The &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; must be set to
      the given &lt;var title=&quot;&quot;&gt;new playback position&lt;/var&gt;.
 
    &lt;li&gt;
@@ -15994,13 +16010,13 @@
 
    &lt;dt&gt;An &quot;enter&quot; callback
 
-   &lt;dd&gt;A callback that is called when the &lt;a href=&quot;#current&quot;&gt;current playback
-    position&lt;/a&gt; enters the range.
+   &lt;dd&gt;A callback that is called when the &lt;a href=&quot;#current0&quot;&gt;current
+    playback position&lt;/a&gt; enters the range.
 
    &lt;dt&gt;An &quot;exit&quot; callback
 
-   &lt;dd&gt;A callback that is called when the &lt;a href=&quot;#current&quot;&gt;current playback
-    position&lt;/a&gt; exits the range.
+   &lt;dd&gt;A callback that is called when the &lt;a href=&quot;#current0&quot;&gt;current
+    playback position&lt;/a&gt; exits the range.
 
    &lt;dt&gt;An &quot;active&quot; boolean
 
@@ -16020,7 +16036,7 @@
    boolean with the same value as &lt;var title=&quot;&quot;&gt;pauseOnExit&lt;/var&gt;, the
    &quot;enter&quot; callback &lt;var title=&quot;&quot;&gt;enterCallback&lt;/var&gt;, the &quot;exit&quot; callback
    &lt;var title=&quot;&quot;&gt;exitCallback&lt;/var&gt;, and an &quot;active&quot; boolean that is true if
-   the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is equal to or
+   the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is equal to or
    greater than the start time and less than the end time, and false
    otherwise.
 
@@ -16031,10 +16047,10 @@
    href=&quot;#media5&quot;&gt;media element&lt;/a&gt; which have the class name &lt;var
    title=&quot;&quot;&gt;className&lt;/var&gt;.
 
-  &lt;p&gt;When the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; of a &lt;a
+  &lt;p&gt;When the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; of a &lt;a
    href=&quot;#media5&quot;&gt;media element&lt;/a&gt; changes (e.g. due to playback or
    seeking), the user agent must run the following steps. If the &lt;a
-   href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; changes while the steps are
+   href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; changes while the steps are
    running, then the user agent must wait for the steps to complete, and then
    must immediately rerun the steps. (These steps are thus run as often as
    possible or needed &mdash; if one iteration takes a long time, this can
@@ -16047,8 +16063,8 @@
      href=&quot;#cue-ranges0&quot; title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;, initialised to
      contain all the &lt;a href=&quot;#cue-ranges0&quot; title=&quot;cue range&quot;&gt;cue ranges&lt;/a&gt;
      of the &lt;a href=&quot;#media5&quot;&gt;media element&lt;/a&gt; whose start times are less
-     than or equal to the &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt;
-     and whose end times are greater than the &lt;a href=&quot;#current&quot;&gt;current
+     than or equal to the &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt;
+     and whose end times are greater than the &lt;a href=&quot;#current0&quot;&gt;current
      playback position&lt;/a&gt;, in the order they were added to the element.
 
    &lt;li&gt;
@@ -16426,7 +16442,7 @@
       the user agent expects that frame to become available in due course.
 
      &lt;td&gt;&lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; is either &lt;code
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; is either &lt;code
       title=dom-media-DATA_UNAVAILABLE&gt;&lt;a
       href=&quot;#dataunavailable&quot;&gt;DATA_UNAVAILABLE&lt;/a&gt;&lt;/code&gt; or &lt;code
       title=dom-media-CAN_SHOW_CURRENT_FRAME&gt;&lt;a
@@ -16434,7 +16450,7 @@
       &lt;code title=dom-media-paused&gt;&lt;a href=&quot;#paused&quot;&gt;paused&lt;/a&gt;&lt;/code&gt; is
       false. Either &lt;code title=dom-media-seeking&gt;&lt;a
       href=&quot;#seeking0&quot;&gt;seeking&lt;/a&gt;&lt;/code&gt; is true, or the &lt;a
-      href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; is not contained in any
+      href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; is not contained in any
       of the ranges in &lt;code title=dom-media-buffered&gt;&lt;a
       href=&quot;#buffered&quot;&gt;buffered&lt;/a&gt;&lt;/code&gt;. It is possible for playback to
       stop for two other reasons without &lt;code title=dom-media-paused&gt;&lt;a
@@ -16449,7 +16465,7 @@
 
      &lt;td&gt;&lt;code&gt;Event&lt;/code&gt;
 
-     &lt;td&gt;The &lt;a href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; changed in an
+     &lt;td&gt;The &lt;a href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; changed in an
       interesting way, for example discontinuously.
 
      &lt;td&gt;
@@ -16474,11 +16490,11 @@
      &lt;td&gt;&lt;code&gt;Event&lt;/code&gt;
 
      &lt;td&gt;The user agent cannot render the data at the &lt;a
-      href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; because data for the
+      href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; because data for the
       current frame is not immediately available.
 
      &lt;td&gt;The &lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
       &lt;code title=DATA_UNAVAILABLE&gt;DATA_UNAVAILABLE&lt;/code&gt;.
 
     &lt;tr&gt;
@@ -16488,11 +16504,11 @@
      &lt;td&gt;&lt;code&gt;Event&lt;/code&gt;
 
      &lt;td&gt;The user agent cannot render the data after the &lt;a
-      href=&quot;#current&quot;&gt;current playback position&lt;/a&gt; because data for the next
-      frame is not immediately available.
+      href=&quot;#current0&quot;&gt;current playback position&lt;/a&gt; because data for the
+      next frame is not immediately available.
 
      &lt;td&gt;The &lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
       &lt;code title=dom-media-CAN_SHOW_CURRENT_FRAME&gt;&lt;a
       href=&quot;#canshowcurrentframe&quot;&gt;CAN_SHOW_CURRENT_FRAME&lt;/a&gt;&lt;/code&gt;.
 
@@ -16508,7 +16524,7 @@
       buffering of content.
 
      &lt;td&gt;The &lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
       &lt;code title=dom-media-CAN_PLAY&gt;&lt;a href=&quot;#canplay&quot;&gt;CAN_PLAY&lt;/a&gt;&lt;/code&gt;.
 
     &lt;tr&gt;
@@ -16523,7 +16539,7 @@
       further buffering.
 
      &lt;td&gt;The &lt;code title=dom-media-readyState&gt;&lt;a
-      href=&quot;#readystate&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
+      href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is newly equal to
       &lt;code title=dom-media-CAN_PLAY_THROUGH&gt;&lt;a
       href=&quot;#canplaythrough&quot;&gt;CAN_PLAY_THROUGH&lt;/a&gt;&lt;/code&gt;.
 
@@ -29460,9 +29476,9 @@
    activated.
 
   &lt;p&gt;At any point, one of the entries in the session history is the &lt;dfn
-   id=current0&gt;current entry&lt;/dfn&gt;. This is the entry representing the &lt;a
+   id=current1&gt;current entry&lt;/dfn&gt;. This is the entry representing the &lt;a
    href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
-   context&lt;/a&gt;. The &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; is usually an entry
+   context&lt;/a&gt;. The &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is usually an entry
    for the &lt;a href=&quot;#href5&quot; title=dom-location-href&gt;location&lt;/a&gt; of the
    &lt;code&gt;Document&lt;/code&gt;. However, it can also be one of the entries for &lt;a
    href=&quot;#state&quot; title=&quot;state object&quot;&gt;state objects&lt;/a&gt; added to the history
@@ -29480,7 +29496,7 @@
    contiguous by definition.
 
   &lt;p&gt;User agents may &lt;dfn id=discard&gt;discard&lt;/dfn&gt; the DOMs of entries other
-   than the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; that are not referenced
+   than the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; that are not referenced
    from any script, reloading the pages afresh when the user or script
    navigates back to such pages. This specification does not specify when
    user agents should discard pages' DOMs and when they should cache them.
@@ -29534,7 +29550,7 @@
    title=&quot;&quot;&gt;delta&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method causes the UA to move the number
    of steps specified by &lt;var title=&quot;&quot;&gt;delta&lt;/var&gt; in the session history.
 
-  &lt;p&gt;If the index of the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; plus &lt;var
+  &lt;p&gt;If the index of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; plus &lt;var
    title=&quot;&quot;&gt;delta&lt;/var&gt; is less than zero or greater than or equal to the &lt;a
    href=&quot;#length7&quot; title=dom-history-length&gt;number of items in the session
    history&lt;/a&gt;, then the user agent must do nothing.
@@ -29547,7 +29563,7 @@
    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to &lt;a href=&quot;#traverse&quot;&gt;traverse the
    history&lt;/a&gt; to the specified entry, as described below. The &lt;dfn
    id=specified&gt;specified entry&lt;/dfn&gt; is the one whose index equals the index
-   of the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; plus &lt;var
+   of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; plus &lt;var
    title=&quot;&quot;&gt;delta&lt;/var&gt;.
 
   &lt;p&gt;When a user agent is required to &lt;dfn id=traverse&gt;traverse the
@@ -29565,7 +29581,7 @@
      &lt;code&gt;Document&lt;/code&gt; object and so this step gets skipped.
 
    &lt;li&gt;
-    &lt;p&gt;If appropriate, update the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; in
+    &lt;p&gt;If appropriate, update the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in
      the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;
      object's &lt;code&gt;&lt;a href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object to reflect
      any state that the user agent wishes to persist.&lt;/p&gt;
@@ -29575,7 +29591,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; has a different
-     &lt;code&gt;Document&lt;/code&gt; object than the &lt;a href=&quot;#current0&quot;&gt;current
+     &lt;code&gt;Document&lt;/code&gt; object than the &lt;a href=&quot;#current1&quot;&gt;current
      entry&lt;/a&gt; then the user agent must run the following substeps:&lt;/p&gt;
 
     &lt;ol&gt;
@@ -29590,7 +29606,7 @@
       context&lt;/a&gt;), and the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
       &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;
       is not the same as the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the
-      &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt;,
+      &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;,
       then the following sub-sub-steps must be run:
       &lt;ol&gt;
        &lt;li&gt;The current &lt;a href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be
@@ -29598,7 +29614,7 @@
         &lt;code&gt;Document&lt;/code&gt; objects with the same &lt;a
         href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the &lt;a href=&quot;#active&quot;&gt;active
         document&lt;/a&gt; &lt;em&gt;and&lt;/em&gt; that are contiguous with the &lt;a
-        href=&quot;#current0&quot;&gt;current entry&lt;/a&gt;.
+        href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;.
 
        &lt;li id=resetBCName&gt;The browsing context's &lt;a
         href=&quot;#browsing1&quot;&gt;browsing context name&lt;/a&gt; must be unset.
@@ -29640,7 +29656,7 @@
      then the user agent must iterate through every entry between that &lt;a
      href=&quot;#last-activated&quot;&gt;last activated entry&lt;/a&gt; and the &lt;a
      href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;, starting with the entry closest
-     to the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt;, and ending with the one
+     to the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;, and ending with the one
      closest to the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;. For each entry,
      if the entry is a state object, the user agent must &lt;a
      href=&quot;#activating0&quot;&gt;activate the state object&lt;/a&gt;.
@@ -29653,7 +29669,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;a href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt; has a URI that differs
-     from the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt;'s only by its fragment
+     from the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;'s only by its fragment
      identifier, and the two share the same &lt;code&gt;Document&lt;/code&gt; object,
      then &lt;a href=&quot;#firing2&quot;&gt;fire a simple event&lt;/a&gt; with the name
      &lt;code&gt;hashchanged&lt;/code&gt; at &lt;a href=&quot;#the-body1&quot;&gt;the &lt;code&gt;body&lt;/code&gt;
@@ -29666,7 +29682,7 @@
      values of form fields, etc.
 
    &lt;li&gt;
-    &lt;p&gt;The &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; is now the &lt;a
+    &lt;p&gt;The &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is now the &lt;a
      href=&quot;#specified&quot;&gt;specified entry&lt;/a&gt;.
   &lt;/ol&gt;
 
@@ -29734,16 +29750,16 @@
   &lt;p&gt;If the third argument passes its verification step, or if the third
    argument was omitted, then the user agent must remove from the &lt;a
    href=&quot;#session&quot;&gt;session history&lt;/a&gt; any entries for that
-   &lt;code&gt;Document&lt;/code&gt; from the entry after the &lt;a href=&quot;#current0&quot;&gt;current
+   &lt;code&gt;Document&lt;/code&gt; from the entry after the &lt;a href=&quot;#current1&quot;&gt;current
    entry&lt;/a&gt; up to the last entry in the session history that references the
    same &lt;code&gt;Document&lt;/code&gt; object, if any. If the &lt;a
-   href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; is the last entry in the session
-   history, or if there are no entries after the &lt;a href=&quot;#current0&quot;&gt;current
+   href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; is the last entry in the session
+   history, or if there are no entries after the &lt;a href=&quot;#current1&quot;&gt;current
    entry&lt;/a&gt; that reference the same &lt;code&gt;Document&lt;/code&gt; object, then no
    entries are removed.
 
   &lt;p&gt;Then, the user agent must add a state object entry to the session
-   history, after the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt;, with the
+   history, after the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt;, with the
    specified &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; as the state object, the given &lt;var
    title=&quot;&quot;&gt;title&lt;/var&gt; as the title, and, if the third argument is present,
    the given &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as the URI of the entry.
@@ -29752,7 +29768,7 @@
    href=&quot;#last-activated&quot;&gt;last activated entry&lt;/a&gt; for the
    &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;p&gt;Finally, the user agent must update the &lt;a href=&quot;#current0&quot;&gt;current
+  &lt;p&gt;Finally, the user agent must update the &lt;a href=&quot;#current1&quot;&gt;current
    entry&lt;/a&gt; to be the this newly added entry.
 
   &lt;p class=note&gt;The &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; is purely advisory. User agents
@@ -29775,8 +29791,8 @@
    &lt;code&gt;Document&lt;/code&gt; object up to the last entry that references that
    same &lt;code&gt;Document&lt;/code&gt; object, if any.
 
-  &lt;p&gt;Then, if the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; was removed in the
-   previous step, the &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; must be set to
+  &lt;p&gt;Then, if the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; was removed in the
+   previous step, the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; must be set to
    the last entry for that &lt;code&gt;Document&lt;/code&gt; object in the session
    history.
 
@@ -29851,7 +29867,7 @@
 
   &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; objects provide a
    representation of the URI of their document, and allow the &lt;a
-   href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
    context&lt;/a&gt;'s session history to be changed, by adding or replacing
    entries in the &lt;code title=dom-history&gt;&lt;a
    href=&quot;#history0&quot;&gt;history&lt;/a&gt;&lt;/code&gt; object.
@@ -30238,7 +30254,7 @@
      &lt;dd&gt;
       &lt;ol&gt;
        &lt;li&gt;
-        &lt;p&gt;Remove all the entries after the &lt;a href=&quot;#current0&quot;&gt;current
+        &lt;p&gt;Remove all the entries after the &lt;a href=&quot;#current1&quot;&gt;current
          entry&lt;/a&gt; in the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s
          &lt;code&gt;Document&lt;/code&gt; object's &lt;code&gt;&lt;a
          href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
@@ -30258,7 +30274,7 @@
        &lt;li&gt;
         &lt;p&gt;If the navigation was initiated with &lt;dfn
          id=replacement&gt;replacement enabled&lt;/dfn&gt;, remove the entry
-         immediately before the new &lt;a href=&quot;#current0&quot;&gt;current entry&lt;/a&gt; in
+         immediately before the new &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in
          the session history.
       &lt;/ol&gt;
     &lt;/dl&gt;
@@ -30368,7 +30384,7 @@
   &lt;p&gt;The rules for how to convert the bytes of the plain text document into
    actual characters are defined in RFC 2046, RFC 2646, and subsequent
    versions thereof. &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt; &lt;a
-   href=&quot;#refsRFC2046&quot;&gt;[RFC2646]&lt;/a&gt;
+   href=&quot;#refsRFC2646&quot;&gt;[RFC2646]&lt;/a&gt;
 
   &lt;p&gt;The &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must be set
    to the character encoding used to decode the document.
@@ -34667,13 +34683,13 @@
       &lt;code&gt;effectAllowed&lt;/code&gt; value&lt;/a&gt;
 
      &lt;td&gt;Reject &lt;a href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; as
-      potential &lt;a href=&quot;#current1&quot; title=&quot;current target element&quot;&gt;target
+      potential &lt;a href=&quot;#current2&quot; title=&quot;current target element&quot;&gt;target
       element&lt;/a&gt;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=dragleave title=event-dragleave&gt;&lt;code&gt;dragleave&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#current1&quot; title=&quot;current target element&quot;&gt;Previous target
+     &lt;td&gt;&lt;a href=&quot;#current2&quot; title=&quot;current target element&quot;&gt;Previous target
       element&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
@@ -34691,7 +34707,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=dragover title=event-dragover&gt;&lt;code&gt;dragover&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#current1&quot;&gt;Current target element&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#current2&quot;&gt;Current target element&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
 
@@ -34704,12 +34720,12 @@
      &lt;td&gt;&lt;a href=&quot;#dropEffect-initialisation&quot;&gt;Based on
       &lt;code&gt;effectAllowed&lt;/code&gt; value&lt;/a&gt;
 
-     &lt;td&gt;Reset the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; to &quot;none&quot;
+     &lt;td&gt;Reset the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; to &quot;none&quot;
 
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=drop title=event-drop&gt;&lt;code&gt;drop&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#current1&quot;&gt;Current target element&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#current2&quot;&gt;Current target element&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
 
@@ -34720,7 +34736,7 @@
 
      &lt;td&gt;&lt;a href=&quot;#effectAllowed-initialisation&quot;&gt;Same as last event&lt;/a&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#current2&quot;&gt;Current drag operation&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#current3&quot;&gt;Current drag operation&lt;/a&gt;
 
      &lt;td&gt;Varies
 
@@ -34737,7 +34753,7 @@
 
      &lt;td&gt;&lt;a href=&quot;#effectAllowed-initialisation&quot;&gt;Same as last event&lt;/a&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#current2&quot;&gt;Current drag operation&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#current3&quot;&gt;Current drag operation&lt;/a&gt;
 
      &lt;td&gt;Varies
   &lt;/table&gt;
@@ -34766,7 +34782,7 @@
    href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt;, and &lt;code title=event-dragleave&gt;&lt;a
    href=&quot;#dragleave&quot;&gt;dragleave&lt;/a&gt;&lt;/code&gt; events (except when stated
    otherwise in the algorithms given in the sections below), to the value
-   corresponding to the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; for
+   corresponding to the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; for
    &lt;code title=event-drop&gt;&lt;a href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=event-dragend&gt;&lt;a href=&quot;#dragend&quot;&gt;dragend&lt;/a&gt;&lt;/code&gt; events, and to a
    value based on the &lt;code title=dom-DataTransfer-effectAllowed&gt;&lt;a
@@ -34960,23 +34976,23 @@
    selection&lt;/dfn&gt;. (Only elements can be selected by the user; other nodes
    must not be made available as drop targets.) However, the &lt;a
    href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; is not necessarily the &lt;dfn
-   id=current1&gt;current target element&lt;/dfn&gt;, which is the element currently
+   id=current2&gt;current target element&lt;/dfn&gt;, which is the element currently
    selected for the drop part of the drag-and-drop operation. The &lt;a
    href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; changes as the user selects
    different elements (either by pointing at them with a pointing device, or
-   by selecting them in some other way). The &lt;a href=&quot;#current1&quot;&gt;current
+   by selecting them in some other way). The &lt;a href=&quot;#current2&quot;&gt;current
    target element&lt;/a&gt; changes when the &lt;a href=&quot;#immediate&quot;&gt;immediate user
    selection&lt;/a&gt; changes, based on the results of event handlers in the
    document, as described below.
 
-  &lt;p&gt;Both the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; and the &lt;a
+  &lt;p&gt;Both the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; and the &lt;a
    href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; can be null, which means no
    target element is selected. They can also both be elements in other
    (DOM-based) documents, or other (non-Web) programs altogether. (For
    example, a user could drag text to a word-processor.) The &lt;a
-   href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is initially null.
+   href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is initially null.
 
-  &lt;p&gt;In addition, there is also a &lt;dfn id=current2&gt;current drag
+  &lt;p&gt;In addition, there is also a &lt;dfn id=current3&gt;current drag
    operation&lt;/dfn&gt;, which can take on the values &quot;none&quot;, &quot;copy&quot;, &quot;link&quot;, and
    &quot;move&quot;. Initially it has the value &quot;none&quot;. It is updated by the user agent
    as described in the steps below.
@@ -34992,7 +35008,7 @@
     &lt;p&gt;First, the user agent must fire a &lt;code title=event-drag&gt;&lt;a
      href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt; event at the &lt;a href=&quot;#source1&quot;&gt;source
      node&lt;/a&gt;. If this event is canceled, the user agent must set the &lt;a
-     href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; to none (no drag operation).&lt;/p&gt;
+     href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; to none (no drag operation).&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;Next, if the &lt;code title=event-drag&gt;&lt;a href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt;
@@ -35006,15 +35022,15 @@
        href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; than during the last
        iteration (or if this is the first iteration), and if this &lt;a
        href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; is not the same as the
-       &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt;, then the &lt;a
-       href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; must be updated, as
+       &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt;, then the &lt;a
+       href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; must be updated, as
        follows:&lt;/p&gt;
 
       &lt;ol&gt;
        &lt;li&gt;
         &lt;p&gt;If the new &lt;a href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt; is
          null, or is in a non-DOM document or application, then set the &lt;a
-         href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; to the same value.&lt;/p&gt;
+         href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; to the same value.&lt;/p&gt;
 
        &lt;li&gt;
         &lt;p&gt;Otherwise, the user agent must fire a &lt;code
@@ -35022,42 +35038,42 @@
          event at the &lt;a href=&quot;#immediate&quot;&gt;immediate user selection&lt;/a&gt;.&lt;/p&gt;
 
        &lt;li&gt;
-        &lt;p&gt;If the event is canceled, then the &lt;a href=&quot;#current1&quot;&gt;current
+        &lt;p&gt;If the event is canceled, then the &lt;a href=&quot;#current2&quot;&gt;current
          target element&lt;/a&gt; must be set to the &lt;a href=&quot;#immediate&quot;&gt;immediate
          user selection&lt;/a&gt;.&lt;/p&gt;
 
        &lt;li&gt;
-        &lt;p&gt;Otherwise, if the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt;
+        &lt;p&gt;Otherwise, if the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt;
          is not &lt;a href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt;, the user agent
          must fire a &lt;code title=event-dragenter&gt;&lt;a
          href=&quot;#dragenter&quot;&gt;dragenter&lt;/a&gt;&lt;/code&gt; event at &lt;a
          href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt;, and the &lt;a
-         href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; must be set to &lt;a
+         href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; must be set to &lt;a
          href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt;, regardless of whether that
          event was canceled or not. (If &lt;a href=&quot;#the-body1&quot;&gt;the body
-         element&lt;/a&gt; is null, then the &lt;a href=&quot;#current1&quot;&gt;current target
+         element&lt;/a&gt; is null, then the &lt;a href=&quot;#current2&quot;&gt;current target
          element&lt;/a&gt; would be set to null too in this case, it wouldn't be
          set to the &lt;code&gt;Document&lt;/code&gt; object.)&lt;/p&gt;
       &lt;/ol&gt;
 
      &lt;li&gt;
-      &lt;p&gt;If the previous step caused the &lt;a href=&quot;#current1&quot;&gt;current target
+      &lt;p&gt;If the previous step caused the &lt;a href=&quot;#current2&quot;&gt;current target
        element&lt;/a&gt; to change, and if the previous target element was not null
        or a part of a non-DOM document, the user agent must fire a &lt;code
        title=event-dragleave&gt;&lt;a href=&quot;#dragleave&quot;&gt;dragleave&lt;/a&gt;&lt;/code&gt; event
        at the previous target element.&lt;/p&gt;
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is a DOM
+      &lt;p&gt;If the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is a DOM
        element, the user agent must fire a &lt;code title=event-dragover&gt;&lt;a
        href=&quot;#dragover&quot;&gt;dragover&lt;/a&gt;&lt;/code&gt; event at this &lt;a
-       href=&quot;#current1&quot;&gt;current target element&lt;/a&gt;.&lt;/p&gt;
+       href=&quot;#current2&quot;&gt;current target element&lt;/a&gt;.&lt;/p&gt;
 
       &lt;p&gt;If the &lt;code title=event-dragover&gt;&lt;a
        href=&quot;#dragover&quot;&gt;dragover&lt;/a&gt;&lt;/code&gt; event is canceled, the &lt;a
-       href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; must be reset to &quot;none&quot;.&lt;/p&gt;
+       href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; must be reset to &quot;none&quot;.&lt;/p&gt;
 
-      &lt;p&gt;Otherwise, the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; must
+      &lt;p&gt;Otherwise, the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; must
        be set based on the values the &lt;code
        title=dom-DataTransfer-effectAllowed&gt;&lt;a
        href=&quot;#effectallowed&quot;&gt;effectAllowed&lt;/a&gt;&lt;/code&gt; and &lt;code
@@ -35115,7 +35131,7 @@
       &lt;p&gt;Then, regardless of whether the &lt;code title=event-dragover&gt;&lt;a
        href=&quot;#dragover&quot;&gt;dragover&lt;/a&gt;&lt;/code&gt; event was canceled or not, the
        drag feedback (e.g. the mouse cursor) must be updated to match the &lt;a
-       href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt;, as follows:&lt;/p&gt;
+       href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt;, as follows:&lt;/p&gt;
 
       &lt;table&gt;
        &lt;thead&gt;
@@ -35148,10 +35164,10 @@
       &lt;/table&gt;
 
      &lt;li&gt;
-      &lt;p&gt;Otherwise, if the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is
+      &lt;p&gt;Otherwise, if the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is
        not a DOM element, the user agent must use platform-specific
        mechanisms to determine what drag operation is being performed (none,
-       copy, link, or move). This sets the &lt;em&gt;&lt;a href=&quot;#current2&quot;&gt;current
+       copy, link, or move). This sets the &lt;em&gt;&lt;a href=&quot;#current3&quot;&gt;current
        drag operation&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
     &lt;/ol&gt;
 
@@ -35164,11 +35180,11 @@
 
     &lt;ol&gt;
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; is none (no
+      &lt;p&gt;If the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; is none (no
        drag operation), or, if the user ended the drag-and-drop operation by
        canceling it (e.g. by hitting the &lt;kbd&gt;Escape&lt;/kbd&gt; key), or if the &lt;a
-       href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is null, then the drag
-       operation failed. If the &lt;a href=&quot;#current1&quot;&gt;current target
+       href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is null, then the drag
+       operation failed. If the &lt;a href=&quot;#current2&quot;&gt;current target
        element&lt;/a&gt; is a DOM element, the user agent must fire a &lt;code
        title=event-dragleave&gt;&lt;a href=&quot;#dragleave&quot;&gt;dragleave&lt;/a&gt;&lt;/code&gt; event
        at it; otherwise, if it is not null, it must use platform-specific
@@ -35176,7 +35192,7 @@
 
      &lt;li&gt;
       &lt;p&gt;Otherwise, the drag operation was as success. If the &lt;a
-       href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is a DOM element, the user
+       href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is a DOM element, the user
        agent must fire a &lt;code title=event-drop&gt;&lt;a
        href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event at it; otherwise, it must use
        platform-specific conventions for indicating a drop.&lt;/p&gt;
@@ -35186,14 +35202,14 @@
        href=&quot;#dropeffect&quot;&gt;dropEffect&lt;/a&gt;&lt;/code&gt; attribute of the event's
        &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a
        href=&quot;#datatransfer&quot;&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; object must be given the
-       value representing the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt;
+       value representing the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt;
        (&lt;code title=&quot;&quot;&gt;copy&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;link&lt;/code&gt;, or &lt;code
        title=&quot;&quot;&gt;move&lt;/code&gt;), and the object must be set up so that the &lt;code
        title=dom-DataTransfer-getData&gt;&lt;a href=&quot;#getdata&quot;&gt;getData()&lt;/a&gt;&lt;/code&gt;
        method will return the data that was added during the &lt;code
        title=event-dragstart&gt;&lt;a href=&quot;#dragstart&quot;&gt;dragstart&lt;/a&gt;&lt;/code&gt; event.&lt;/p&gt;
 
-      &lt;p&gt;If the event is canceled, the &lt;a href=&quot;#current2&quot;&gt;current drag
+      &lt;p&gt;If the event is canceled, the &lt;a href=&quot;#current3&quot;&gt;current drag
        operation&lt;/a&gt; must be set to the value of the &lt;code
        title=dom-DataTransfer-dropEffect&gt;&lt;a
        href=&quot;#dropeffect&quot;&gt;dropEffect&lt;/a&gt;&lt;/code&gt; attribute of the event's
@@ -35206,7 +35222,7 @@
        as follows:&lt;/p&gt;
 
       &lt;dl class=switch&gt;
-       &lt;dt&gt;If the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is a text
+       &lt;dt&gt;If the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is a text
         field (e.g. &lt;code&gt;textarea&lt;/code&gt;, or an &lt;code&gt;input&lt;/code&gt; element
         with &lt;code title=&quot;&quot;&gt;type=&quot;text&quot;&lt;/code&gt;&lt;!--XXX xref--&gt;)
 
@@ -35218,7 +35234,7 @@
 
        &lt;dt&gt;Otherwise
 
-       &lt;dd&gt;Reset the &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; to
+       &lt;dd&gt;Reset the &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; to
         &quot;none&quot;.
       &lt;/dl&gt;
 
@@ -35230,10 +35246,10 @@
        href=&quot;#dropeffect&quot;&gt;dropEffect&lt;/a&gt;&lt;/code&gt; attribute of the event's
        &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a
        href=&quot;#datatransfer&quot;&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; object being set to the
-       value corresponding to the &lt;a href=&quot;#current2&quot;&gt;current drag
+       value corresponding to the &lt;a href=&quot;#current3&quot;&gt;current drag
        operation&lt;/a&gt;.&lt;/p&gt;
 
-      &lt;p class=note&gt;The &lt;a href=&quot;#current2&quot;&gt;current drag operation&lt;/a&gt; can
+      &lt;p class=note&gt;The &lt;a href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; can
        change during the processing of the &lt;code title=event-drop&gt;&lt;a
        href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event, if one was fired.&lt;/p&gt;
 
@@ -35241,22 +35257,22 @@
        user agent must act as follows:&lt;/p&gt;
 
       &lt;dl class=switch&gt;
-       &lt;dt&gt;If the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is a text
+       &lt;dt&gt;If the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is a text
         field (e.g. &lt;code&gt;textarea&lt;/code&gt;, or an &lt;code&gt;input&lt;/code&gt; element
         with &lt;code title=&quot;&quot;&gt;type=&quot;text&quot;&lt;/code&gt;&lt;!--XXX xref--&gt;), and a &lt;code
         title=event-drop&gt;&lt;a href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event was fired in
-        the previous step, and the &lt;a href=&quot;#current2&quot;&gt;current drag
+        the previous step, and the &lt;a href=&quot;#current3&quot;&gt;current drag
         operation&lt;/a&gt; is &quot;move&quot;, and the source of the drag-and-drop
         operation is a selection in the DOM
 
        &lt;dd&gt;The user agent should delete the range representing the dragged
         selection from the DOM.
 
-       &lt;dt&gt;If the &lt;a href=&quot;#current1&quot;&gt;current target element&lt;/a&gt; is a text
+       &lt;dt&gt;If the &lt;a href=&quot;#current2&quot;&gt;current target element&lt;/a&gt; is a text
         field (e.g. &lt;code&gt;textarea&lt;/code&gt;, or an &lt;code&gt;input&lt;/code&gt; element
         with &lt;code title=&quot;&quot;&gt;type=&quot;text&quot;&lt;/code&gt;&lt;!--XXX xref--&gt;), and a &lt;code
         title=event-drop&gt;&lt;a href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event was fired in
-        the previous step, and the &lt;a href=&quot;#current2&quot;&gt;current drag
+        the previous step, and the &lt;a href=&quot;#current3&quot;&gt;current drag
         operation&lt;/a&gt; is &quot;move&quot;, and the source of the drag-and-drop
         operation is a selection in a text field
 
@@ -35538,7 +35554,7 @@
    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;.
 
   &lt;p&gt;The &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt; has a &lt;dfn
-   id=current3 title=&quot;undo position&quot;&gt;current position&lt;/dfn&gt;. This is the
+   id=current4 title=&quot;undo position&quot;&gt;current position&lt;/dfn&gt;. This is the
    position between two entries in the &lt;a href=&quot;#undo-transaction&quot;&gt;undo
    transaction history&lt;/a&gt;'s list where the previous entry represents what
    needs to happen if the user invokes the &quot;undo&quot; command (the &quot;undo&quot; side,
@@ -35548,12 +35564,12 @@
   &lt;p&gt;The &lt;dfn id=position0
    title=dom-UndoManager-position&gt;&lt;code&gt;position&lt;/code&gt;&lt;/dfn&gt; attribute must
    return the index of the &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry
-   nearest to the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, on the &quot;redo&quot; side.
+   nearest to the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;, on the &quot;redo&quot; side.
    If there are no &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entries on the
    &quot;redo&quot; side, then the attribute must return the same as the &lt;code
    title=dom-UndoManager-length&gt;&lt;a href=&quot;#length10&quot;&gt;length&lt;/a&gt;&lt;/code&gt;
    attribute. If there are no &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entries
-   on the &quot;undo&quot; side of the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, the &lt;code
+   on the &quot;undo&quot; side of the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;, the &lt;code
    title=dom-UndoManager-position&gt;&lt;a href=&quot;#position0&quot;&gt;position&lt;/a&gt;&lt;/code&gt;
    attribute returns zero.
 
@@ -35572,17 +35588,17 @@
    behavior depends on the current state. Normally, it must insert the &lt;var
    title=&quot;&quot;&gt;data&lt;/var&gt; object passed as an argument into the &lt;a
    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt; immediately before
-   the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, optionally remembering the
+   the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;, optionally remembering the
    given &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; to use in the UI. If the method is called
    &lt;a href=&quot;#undo-moving0&quot; title=do-undo&gt;during an undo operation&lt;/a&gt;,
    however, the object must instead be added immediately &lt;em&gt;after&lt;/em&gt; the
-   &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;.
+   &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;.
 
   &lt;p&gt;If the method is called and there is neither &lt;a href=&quot;#undo-moving0&quot;
    title=do-undo&gt;an undo operation in progress&lt;/a&gt; nor &lt;a
    href=&quot;#redo-moving0&quot; title=do-redo&gt;a redo operation in progress&lt;/a&gt; then
    any entries in the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-   history&lt;/a&gt; after the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; must be
+   history&lt;/a&gt; after the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt; must be
    removed (as if &lt;code title=dom-UndoManager-clearRedo&gt;&lt;a
    href=&quot;#clearredo&quot;&gt;clearRedo()&lt;/a&gt;&lt;/code&gt; had been called).
 
@@ -35605,14 +35621,14 @@
   &lt;p&gt;The &lt;dfn id=clearundo
    title=dom-UndoManager-clearUndo&gt;&lt;code&gt;clearUndo()&lt;/code&gt;&lt;/dfn&gt; method must
    remove all entries in the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-   history&lt;/a&gt; before the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, be they &lt;a
+   history&lt;/a&gt; before the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;, be they &lt;a
    href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entries or &lt;a href=&quot;#undo-object&quot;&gt;undo
    object&lt;/a&gt; entries.
 
   &lt;p&gt;The &lt;dfn id=clearredo
    title=dom-UndoManager-clearRedo&gt;&lt;code&gt;clearRedo()&lt;/code&gt;&lt;/dfn&gt; method must
    remove all entries in the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-   history&lt;/a&gt; after the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, be they &lt;a
+   history&lt;/a&gt; after the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;, be they &lt;a
    href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entries or &lt;a href=&quot;#undo-object&quot;&gt;undo
    object&lt;/a&gt; entries.
 
@@ -35629,18 +35645,18 @@
    &lt;code title=command-undo&gt;&lt;a href=&quot;#undo1&quot;&gt;undo&lt;/a&gt;&lt;/code&gt; command, the
    user agent must perform an undo operation.
 
-  &lt;p&gt;If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the start of the &lt;a
+  &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt; is at the start of the &lt;a
    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, then the user agent
    must do nothing.
 
-  &lt;p&gt;If the entry immediately before the &lt;a href=&quot;#current3&quot;&gt;undo
+  &lt;p&gt;If the entry immediately before the &lt;a href=&quot;#current4&quot;&gt;undo
    position&lt;/a&gt; is a &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entry, then the
    user agent must remove that &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entry,
    reverse the DOM changes that were listed in that entry, and, if the
    changes were reversed with no problems, add a new &lt;a
    href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entry (consisting of the opposite of
    those DOM changes) to the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
-   history&lt;/a&gt; on the other side of the &lt;a href=&quot;#current3&quot;&gt;undo
+   history&lt;/a&gt; on the other side of the &lt;a href=&quot;#current4&quot;&gt;undo
    position&lt;/a&gt;.
 
   &lt;p&gt;If the DOM changes cannot be undone (e.g. because the DOM state is no
@@ -35648,7 +35664,7 @@
    user agent must simply remove the &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt;
    entry, without doing anything else.
 
-  &lt;p&gt;If the entry immediately before the &lt;a href=&quot;#current3&quot;&gt;undo
+  &lt;p&gt;If the entry immediately before the &lt;a href=&quot;#current4&quot;&gt;undo
    position&lt;/a&gt; is an &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry, then the
    user agent must first remove that &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt;
    entry from the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;,
@@ -35675,25 +35691,25 @@
    title=do-undo&gt;undo operation&lt;/a&gt;, but the full definition is included here
    for completeness.
 
-  &lt;p&gt;If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the end of the &lt;a
+  &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt; is at the end of the &lt;a
    href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, then the user agent
    must do nothing.
 
-  &lt;p&gt;If the entry immediately after the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;
+  &lt;p&gt;If the entry immediately after the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;
    is a &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entry, then the user agent
    must remove that &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt; entry, reverse the
    DOM changes that were listed in that entry, and, if the changes were
    reversed with no problems, add a new &lt;a href=&quot;#dom-changes&quot;&gt;DOM
    changes&lt;/a&gt; entry (consisting of the opposite of those DOM changes) to the
    &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt; on the other side
-   of the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;.
+   of the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;.
 
   &lt;p&gt;If the DOM changes cannot be redone (e.g. because the DOM state is no
    longer consistent with the changes represented in the entry), then the
    user agent must simply remove the &lt;a href=&quot;#dom-changes&quot;&gt;DOM changes&lt;/a&gt;
    entry, without doing anything else.
 
-  &lt;p&gt;If the entry immediately after the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;
+  &lt;p&gt;If the entry immediately after the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt;
    is an &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry, then the user agent
    must first remove that &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry from
    the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, and then
@@ -36473,12 +36489,12 @@
    &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;a href=&quot;#redo-moving0&quot;
     title=do-redo&gt;move forward one step&lt;/a&gt; in its &lt;a
     href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, restoring the
-    associated state. If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the
+    associated state. If the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt; is at the
     end of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, the
     user agent must do nothing. See the &lt;a href=&quot;#undo-history&quot;&gt;undo
     history&lt;/a&gt;.
 
-   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current3&quot;&gt;undo
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current4&quot;&gt;undo
     position&lt;/a&gt; is not at the end of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo
     transaction history&lt;/a&gt;.
 
@@ -36554,12 +36570,12 @@
    &lt;dd&gt;&lt;strong&gt;Action:&lt;/strong&gt; The user agent must &lt;a href=&quot;#undo-moving0&quot;
     title=do-undo&gt;move back one step&lt;/a&gt; in its &lt;a
     href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;, restoring the
-    associated state. If the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt; is at the
+    associated state. If the &lt;a href=&quot;#current4&quot;&gt;undo position&lt;/a&gt; is at the
     start of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;,
     the user agent must do nothing. See the &lt;a href=&quot;#undo-history&quot;&gt;undo
     history&lt;/a&gt;.
 
-   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current3&quot;&gt;undo
+   &lt;dd&gt;&lt;strong&gt;Enabled When:&lt;/strong&gt; The &lt;a href=&quot;#current4&quot;&gt;undo
     position&lt;/a&gt; is not at the start of the &lt;a href=&quot;#undo-transaction&quot;&gt;undo
     transaction history&lt;/a&gt;.
 
@@ -37204,7 +37220,7 @@
   &lt;pre class=idl&gt;interface &lt;dfn id=connection0&gt;Connection&lt;/dfn&gt; {
   readonly attribute DOMString &lt;a href=&quot;#network1&quot; title=dom-Connection-network&gt;network&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#peer&quot; title=dom-Connection-peer&gt;peer&lt;/a&gt;;
-  readonly attribute int &lt;a href=&quot;#readystate0&quot; title=dom-Connection-readyState&gt;readyState&lt;/a&gt;;
+  readonly attribute int &lt;a href=&quot;#readystate1&quot; title=dom-Connection-readyState&gt;readyState&lt;/a&gt;;
            attribute EventListener &lt;a href=&quot;#onopen&quot; title=dom-Connection-onopen&gt;onopen&lt;/a&gt;;
            attribute EventListener &lt;a href=&quot;#onread&quot; title=dom-Connection-onread&gt;onread&lt;/a&gt;;
            attribute EventListener &lt;a href=&quot;#onclose&quot; title=dom-Connection-onclose&gt;onclose&lt;/a&gt;;
@@ -37236,7 +37252,7 @@
    connection is established, after which point it must keep the same value
    for the lifetime of the object.
 
-  &lt;p&gt;The &lt;dfn id=readystate0
+  &lt;p&gt;The &lt;dfn id=readystate1
    title=dom-Connection-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; attribute
    represents the state of the connection. When the object is created it must
    be set to 0. It can have the following values:
@@ -37257,7 +37273,7 @@
 
   &lt;p id=openConnection&gt;Once a connection is established, the &lt;code
    title=dom-Connection-readyState&gt;&lt;a
-   href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value must be
+   href=&quot;#readystate1&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value must be
    changed to 1, and the &lt;code title=event-connection-open&gt;&lt;a
    href=&quot;#open3&quot;&gt;open&lt;/a&gt;&lt;/code&gt; event must be fired on the &lt;code&gt;&lt;a
    href=&quot;#connection0&quot;&gt;Connection&lt;/a&gt;&lt;/code&gt; object.
@@ -37270,7 +37286,7 @@
 
   &lt;p id=closeConnection&gt;When the connection is closed, the &lt;code
    title=dom-Connection-readyState&gt;&lt;a
-   href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value must be
+   href=&quot;#readystate1&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value must be
    changed to 2, and the &lt;code title=event-connection-close&gt;&lt;a
    href=&quot;#close0&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event must be fired on the &lt;code&gt;&lt;a
    href=&quot;#connection0&quot;&gt;Connection&lt;/a&gt;&lt;/code&gt; object.
@@ -37298,7 +37314,7 @@
    closed, it must do nothing. Closing the connection causes a &lt;code
    title=event-connection-close&gt;&lt;a href=&quot;#close0&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event to
    be fired and the &lt;code title=dom-Connection-readyState&gt;&lt;a
-   href=&quot;#readystate0&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to change, as
+   href=&quot;#readystate1&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to change, as
    &lt;a href=&quot;#closeConnection&quot;&gt;described above&lt;/a&gt;.
 
   &lt;h4 id=connection&gt;&lt;span class=secno&gt;6.3.3 &lt;/span&gt;Connection Events&lt;/h4&gt;
@@ -39822,15 +39838,15 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; node, however it is created,
    is the topmost node of the stack. It never gets popped off the stack.
 
-  &lt;p&gt;The &lt;dfn id=current4&gt;current node&lt;/dfn&gt; is the bottommost node in this
+  &lt;p&gt;The &lt;dfn id=current5&gt;current node&lt;/dfn&gt; is the bottommost node in this
    stack.
 
-  &lt;p&gt;The &lt;dfn id=current5&gt;current table&lt;/dfn&gt; is the last &lt;code&gt;&lt;a
+  &lt;p&gt;The &lt;dfn id=current6&gt;current table&lt;/dfn&gt; is the last &lt;code&gt;&lt;a
    href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=&quot;#stack&quot;&gt;stack of
    open elements&lt;/a&gt;, if there is one. If there is no &lt;code&gt;&lt;a
    href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=&quot;#stack&quot;&gt;stack of
    open elements&lt;/a&gt; (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), then the &lt;a
-   href=&quot;#current5&quot;&gt;current table&lt;/a&gt; is the first element in the &lt;a
+   href=&quot;#current6&quot;&gt;current table&lt;/a&gt; is the first element in the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt; (the &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element).
 
@@ -39924,7 +39940,7 @@
   &lt;ol&gt;
    &lt;li&gt;
     &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
 
    &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is the target node, terminate in a match
@@ -40032,9 +40048,9 @@
    &lt;li&gt;Perform a shallow clone of the element &lt;var title=&quot;&quot;&gt;entry&lt;/var&gt; to
     obtain &lt;var title=&quot;&quot;&gt;clone&lt;/var&gt;. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;
 
-   &lt;li&gt;Append &lt;var title=&quot;&quot;&gt;clone&lt;/var&gt; to the &lt;a href=&quot;#current4&quot;&gt;current
+   &lt;li&gt;Append &lt;var title=&quot;&quot;&gt;clone&lt;/var&gt; to the &lt;a href=&quot;#current5&quot;&gt;current
     node&lt;/a&gt; and push it onto the &lt;a href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;
-    so that it is the new &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.
+    so that it is the new &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.
 
    &lt;li&gt;Replace the entry for &lt;var title=&quot;&quot;&gt;entry&lt;/var&gt; in the list with an
     entry for &lt;var title=&quot;&quot;&gt;clone&lt;/var&gt;.
@@ -40873,7 +40889,7 @@
 
     &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a
      href=&quot;#in-foreign&quot; title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-     content&lt;/a&gt;&quot; and the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an
+     content&lt;/a&gt;&quot; and the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an
      element in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and the
      next seven characters are a
      &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
@@ -41983,22 +41999,22 @@
    element&lt;/dfn&gt; for a token, the UA must first &lt;a href=&quot;#create&quot;&gt;create an
    element for the token&lt;/a&gt; in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML
    namespace&lt;/a&gt;, and then append this node to the &lt;a
-   href=&quot;#current4&quot;&gt;current node&lt;/a&gt;, and push it onto the &lt;a
+   href=&quot;#current5&quot;&gt;current node&lt;/a&gt;, and push it onto the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt; so that it is the new &lt;a
-   href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.
+   href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.
 
   &lt;p&gt;The steps below may also require that the UA insert an HTML element in a
    particular place, in which case the UA must follow the same steps except
    that it must insert or append the new node in the location specified
-   insead of appending it to the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;. (This
+   insead of appending it to the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;. (This
    happens in particular during the parsing of tables with invalid content.)
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=insert1&gt;insert a foreign
    element&lt;/dfn&gt; for a token, the UA must first &lt;a href=&quot;#create&quot;&gt;create an
    element for the token&lt;/a&gt; in the given namespace, and then append this
-   node to the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;, and push it onto the &lt;a
+   node to the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;, and push it onto the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt; so that it is the new &lt;a
-   href=&quot;#current4&quot;&gt;current node&lt;/a&gt;. If the newly created element has an
+   href=&quot;#current5&quot;&gt;current node&lt;/a&gt;. If the newly created element has an
    &lt;code title=&quot;&quot;&gt;xmlns&lt;/code&gt; attribute in the &lt;a href=&quot;#xmlns&quot;&gt;XMLNS
    namespace&lt;/a&gt; whose value is not exactly the same as the element's
    namespace, that is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.&lt;/p&gt;
@@ -42223,7 +42239,7 @@
     &lt;p&gt;&lt;a href=&quot;#create&quot;&gt;Create an element for the token&lt;/a&gt;.
 
    &lt;li&gt;
-    &lt;p&gt;Append the new element to the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.
+    &lt;p&gt;Append the new element to the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.
 
    &lt;li&gt;
     &lt;p&gt;If the algorithm that was invoked is the &lt;a href=&quot;#generic&quot;&gt;generic
@@ -42257,11 +42273,11 @@
    implied end tags&lt;/h5&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=generate&gt;generate implied
-   end tags&lt;/dfn&gt;, then, while the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is a
+   end tags&lt;/dfn&gt;, then, while the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is a
    &lt;code&gt;&lt;a href=&quot;#dd&quot;&gt;dd&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;&lt;a
    href=&quot;#dt&quot;&gt;dt&lt;/a&gt;&lt;/code&gt; element, an &lt;code&gt;&lt;a href=&quot;#li&quot;&gt;li&lt;/a&gt;&lt;/code&gt;
    element, or a &lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; element, the UA must pop the
-   &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of
+   &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of
    open elements&lt;/a&gt;.
 
   &lt;p&gt;If a step requires the UA to generate implied end tags but lists an
@@ -42682,7 +42698,7 @@
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -42749,12 +42765,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the character&lt;/a&gt;
-     into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -42774,7 +42790,7 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -42785,7 +42801,7 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -42887,7 +42903,7 @@
      href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; be just before the &lt;a
      href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Append the new element to the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;. &lt;a
+    &lt;p&gt;Append the new element to the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;. &lt;a
      href=&quot;#running0&quot; title=&quot;running a script&quot;&gt;Special processing occurs when
      a &lt;code&gt;script&lt;/code&gt; element is inserted into a document&lt;/a&gt; that might
      cause some script to execute, which might cause &lt;a
@@ -42955,7 +42971,7 @@
    &lt;dt&gt;An end tag whose tag name is &quot;head&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;Pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (which will be the
+    &lt;p&gt;Pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (which will be the
      &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element) off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
@@ -43010,10 +43026,10 @@
    &lt;dt&gt;An end tag whose tag name is &quot;noscript&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;Pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (which will be a &lt;code&gt;&lt;a
+    &lt;p&gt;Pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (which will be a &lt;code&gt;&lt;a
      href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element) from the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;; the new &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; will be a &lt;code&gt;&lt;a
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; will be a &lt;code&gt;&lt;a
      href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
     &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#in-head&quot;
@@ -43065,12 +43081,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the character&lt;/a&gt;
-     into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -43116,7 +43132,7 @@
      href=&quot;#in-head&quot; title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot;
      &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (which will be the node
+    &lt;p&gt;Pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (which will be the node
      pointed to by the &lt;a href=&quot;#head-element&quot;&gt;&lt;code title=&quot;&quot;&gt;head&lt;/code&gt;
      element pointer&lt;/a&gt;) off the &lt;a href=&quot;#stack&quot;&gt;stack of open
      elements&lt;/a&gt;.&lt;/p&gt;
@@ -43143,12 +43159,12 @@
      if any.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the token's
-     character&lt;/a&gt; into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     character&lt;/a&gt; into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -43319,11 +43335,11 @@
     &lt;ol&gt;
      &lt;li&gt;
       &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a
-       href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
+       href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
 
      &lt;li&gt;
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is an &lt;code&gt;&lt;a href=&quot;#li&quot;&gt;li&lt;/a&gt;&lt;/code&gt;
-       element, then pop all the nodes from the &lt;a href=&quot;#current4&quot;&gt;current
+       element, then pop all the nodes from the &lt;a href=&quot;#current5&quot;&gt;current
        node&lt;/a&gt; up to &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, including &lt;var
        title=&quot;&quot;&gt;node&lt;/var&gt;, then stop this algorithm. If more than one node
        is popped, then this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
@@ -43364,12 +43380,12 @@
     &lt;ol&gt;
      &lt;li&gt;
       &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a
-       href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
+       href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
 
      &lt;li&gt;
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is a &lt;code&gt;&lt;a href=&quot;#dd&quot;&gt;dd&lt;/a&gt;&lt;/code&gt;
        or &lt;code&gt;&lt;a href=&quot;#dt&quot;&gt;dt&lt;/a&gt;&lt;/code&gt; element, then pop all the nodes
-       from the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; up to &lt;var
+       from the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; up to &lt;var
        title=&quot;&quot;&gt;node&lt;/var&gt;, including &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, then stop
        this algorithm. If more than one node is popped, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
@@ -43432,7 +43448,7 @@
       &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element with
+      &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element with
        the same tag name as that of the token, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
@@ -43460,7 +43476,7 @@
       &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element with
+      &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element with
        the same tag name as that of the token, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
@@ -43473,7 +43489,7 @@
    &lt;dt&gt;An end tag whose tag name is &quot;p&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
      href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a href=&quot;#parse1&quot;&gt;parse
      error&lt;/a&gt;.&lt;/p&gt;
 
@@ -43502,7 +43518,7 @@
        elements with the same tag name as the token.
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element with
+      &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element with
        the same tag name as that of the token, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
@@ -43531,7 +43547,7 @@
       &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element with
+      &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element with
        the same tag name as that of the token, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
@@ -43638,7 +43654,7 @@
       &lt;p&gt;Otherwise, there is a &lt;var title=&quot;&quot;&gt;formatting element&lt;/var&gt; and
        that element is in &lt;a href=&quot;#stack&quot; title=&quot;stack of open elements&quot;&gt;the
        stack&lt;/a&gt; and is &lt;a href=&quot;#have-an&quot; title=&quot;has an element in scope&quot;&gt;in
-       scope&lt;/a&gt;. If the element is not the &lt;a href=&quot;#current4&quot;&gt;current
+       scope&lt;/a&gt;. If the element is not the &lt;a href=&quot;#current5&quot;&gt;current
        node&lt;/a&gt;, this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;. In any case,
        proceed with the algorithm as written in the following steps.&lt;/p&gt;
 
@@ -43653,7 +43669,7 @@
       &lt;p&gt;If there is no &lt;var title=&quot;&quot;&gt;furthest block&lt;/var&gt;, then the UA must
        skip the subsequent steps and instead just pop all the nodes from the
        bottom of the &lt;a href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;, from the &lt;a
-       href=&quot;#current4&quot;&gt;current node&lt;/a&gt; up to and including the &lt;var
+       href=&quot;#current5&quot;&gt;current node&lt;/a&gt; up to and including the &lt;var
        title=&quot;&quot;&gt;formatting element&lt;/var&gt;, and remove the &lt;var
        title=&quot;&quot;&gt;formatting element&lt;/var&gt; from the &lt;a href=&quot;#list-of4&quot;&gt;list of
        active formatting elements&lt;/a&gt;.
@@ -43831,7 +43847,7 @@
       &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.
 
      &lt;li&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element with
+      &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element with
        the same tag name as that of the token, then this is a &lt;a
        href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
@@ -43873,7 +43889,7 @@
      if any.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -43889,7 +43905,7 @@
      href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; had been seen.&lt;/p&gt;
     &lt;!-- XXX quirks: don't do this --&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -43913,7 +43929,7 @@
      if any.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -43994,7 +44010,7 @@
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#create&quot;&gt;Create an element for the token&lt;/a&gt;, in the &lt;a
      href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;. Append the new element to
-     the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If the &lt;a href=&quot;#form-element&quot;&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt; element
      pointer&lt;/a&gt; is not null, then &lt;span&gt;associate&lt;/span&gt;&lt;!--XXX xref! --&gt;
@@ -44076,7 +44092,7 @@
      &lt;a href=&quot;#mathml0&quot;&gt;MathML namespace&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of open
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of open
      elements&lt;/a&gt; and &lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
      flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
 
@@ -44157,7 +44173,7 @@
     &lt;ol&gt;
      &lt;li&gt;
       &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; to be the &lt;a
-       href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
+       href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (the bottommost node of the stack).
 
      &lt;li&gt;
       &lt;p&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; has the same tag name as the end tag
@@ -44169,11 +44185,11 @@
 
        &lt;li&gt;
         &lt;p&gt;If the tag name of the end tag token does not match the tag name
-         of the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;, this is a &lt;a
+         of the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;, this is a &lt;a
          href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
        &lt;li&gt;
-        &lt;p&gt;Pop all the nodes from the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; up
+        &lt;p&gt;Pop all the nodes from the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; up
          to &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, including &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;,
          then stop this algorithm.
       &lt;/ol&gt;
@@ -44208,17 +44224,17 @@
     &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current table&lt;/a&gt; is &lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current6&quot;&gt;current table&lt;/a&gt; is &lt;a
      href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt;, then act as described in the &quot;anything
      else&quot; entry below.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, &lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;insert the
-     character&lt;/a&gt; into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     character&lt;/a&gt; into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -44307,7 +44323,7 @@
    &lt;dt&gt;A start tag whose tag name is one of: &quot;style&quot;, &quot;script&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current table&lt;/a&gt; is &lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current6&quot;&gt;current table&lt;/a&gt; is &lt;a
      href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt; then act as described in the &quot;anything else&quot;
      entry below.&lt;/p&gt;
 
@@ -44321,7 +44337,7 @@
     &lt;p&gt;If the token does not have an attribute with the name &quot;type&quot;, or if it
      does, but that attribute's value is not a case-insensitive
      &lt;!-- XXX ASCII --&gt; match for the string &quot;hidden&quot;, or, if the &lt;a
-     href=&quot;#current5&quot;&gt;current table&lt;/a&gt; is &lt;a href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt;,
+     href=&quot;#current6&quot;&gt;current table&lt;/a&gt; is &lt;a href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt;,
      then: act as described in the &quot;anything else&quot; entry below.&lt;/p&gt;
 
     &lt;p&gt;Otherwise:&lt;/p&gt;
@@ -44343,11 +44359,11 @@
    &lt;dt&gt;An end-of-file token
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error.&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; in
+    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; in
      the &lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#stops&quot;&gt;Stop parsing.&lt;/a&gt;&lt;/p&gt;
@@ -44360,18 +44376,18 @@
      title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot; &lt;span&gt;insertion
      mode&lt;/span&gt;, with the following exception:&lt;/p&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is a &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is a &lt;code&gt;&lt;a
      href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#tbody&quot;&gt;tbody&lt;/a&gt;&lt;/code&gt;,
      &lt;code&gt;&lt;a href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
      href=&quot;#thead0&quot;&gt;thead&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt;
      element, then, whenever a node would be inserted into the &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt;, it must instead be inserted into the
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt;, it must instead be inserted into the
      &lt;i&gt;&lt;a href=&quot;#foster&quot;&gt;foster parent element&lt;/a&gt;&lt;/i&gt;, and the &lt;a
-     href=&quot;#current5&quot;&gt;current table&lt;/a&gt; must be marked as &lt;dfn
-     id=tainted&gt;tainted&lt;/dfn&gt;. (Once the &lt;a href=&quot;#current5&quot;&gt;current
+     href=&quot;#current6&quot;&gt;current table&lt;/a&gt; must be marked as &lt;dfn
+     id=tainted&gt;tainted&lt;/dfn&gt;. (Once the &lt;a href=&quot;#current6&quot;&gt;current
      table&lt;/a&gt; has been &lt;a href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt;, whitespace characters
      are inserted into the &lt;i&gt;&lt;a href=&quot;#foster&quot;&gt;foster parent element&lt;/a&gt;&lt;/i&gt;
-     instead of the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.)&lt;/p&gt;
+     instead of the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.)&lt;/p&gt;
 
     &lt;p&gt;The &lt;dfn id=foster&gt;foster parent element&lt;/dfn&gt; is the parent element
      of the last &lt;code&gt;&lt;a href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt; element in the &lt;a
@@ -44402,12 +44418,12 @@
 
   &lt;p&gt;When the steps above require the UA to &lt;dfn id=clear1&gt;clear the stack
    back to a table context&lt;/dfn&gt;, it means that the UA must, while the &lt;a
-   href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
+   href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
    href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, pop elements from the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.
 
-  &lt;p class=note&gt;The &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
+  &lt;p class=note&gt;The &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
@@ -44433,7 +44449,7 @@
 
     &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Now, if the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
+    &lt;p&gt;Now, if the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
      href=&quot;#caption0&quot;&gt;caption&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.&lt;/p&gt;
 
@@ -44489,12 +44505,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the character&lt;/a&gt;
-     into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -44514,7 +44530,7 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -44524,12 +44540,12 @@
    &lt;dt&gt;An end tag whose tag name is &quot;colgroup&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;, ignore the token. (&lt;a
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (which will be
+    &lt;p&gt;Otherwise, pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (which will be
      a &lt;code&gt;&lt;a href=&quot;#colgroup&quot;&gt;colgroup&lt;/a&gt;&lt;/code&gt; element) from the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;. Switch the &lt;span&gt;insertion
      mode&lt;/span&gt; to &quot;&lt;a href=&quot;#in-table&quot; title=&quot;insertion mode: in table&quot;&gt;in
@@ -44543,7 +44559,7 @@
    &lt;dt&gt;An end-of-file token
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then &lt;a href=&quot;#stops&quot;&gt;stop
      parsing&lt;/a&gt;. (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
 
@@ -44597,7 +44613,7 @@
     &lt;p&gt;&lt;a href=&quot;#clear2&quot;&gt;Clear the stack back to a table body context&lt;/a&gt;.
      (See below.)&lt;/p&gt;
 
-    &lt;p&gt;Pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; from the &lt;a
+    &lt;p&gt;Pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; from the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;. Switch the &lt;span&gt;insertion
      mode&lt;/span&gt; to &quot;&lt;a href=&quot;#in-table&quot; title=&quot;insertion mode: in table&quot;&gt;in
      table&lt;/a&gt;&quot;.&lt;/p&gt;
@@ -44620,7 +44636,7 @@
      (See below.)&lt;/p&gt;
 
     &lt;p&gt;Act as if an end tag with the same tag name as the &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (&quot;tbody&quot;, &quot;tfoot&quot;, or &quot;thead&quot;) had
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (&quot;tbody&quot;, &quot;tfoot&quot;, or &quot;thead&quot;) had
      been seen, then reprocess the current token.&lt;/p&gt;
 
    &lt;dt&gt;An end tag whose tag name is one of: &quot;body&quot;, &quot;caption&quot;, &quot;col&quot;,
@@ -44639,13 +44655,13 @@
 
   &lt;p&gt;When the steps above require the UA to &lt;dfn id=clear2&gt;clear the stack
    back to a table body context&lt;/dfn&gt;, it means that the UA must, while the
-   &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
+   &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
    href=&quot;#tbody&quot;&gt;tbody&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=&quot;#thead0&quot;&gt;thead&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, pop elements from the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.
 
-  &lt;p class=note&gt;The &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
+  &lt;p class=note&gt;The &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
@@ -44684,7 +44700,7 @@
     &lt;p&gt;&lt;a href=&quot;#clear3&quot;&gt;Clear the stack back to a table row context&lt;/a&gt;.
      (See below.)&lt;/p&gt;
 
-    &lt;p&gt;Pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; (which will be a &lt;code&gt;&lt;a
+    &lt;p&gt;Pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; (which will be a &lt;code&gt;&lt;a
      href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; element) from the &lt;a href=&quot;#stack&quot;&gt;stack of
      open elements&lt;/a&gt;. Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a
      href=&quot;#in-table0&quot; title=&quot;insertion mode: in table body&quot;&gt;in table
@@ -44729,12 +44745,12 @@
 
   &lt;p&gt;When the steps above require the UA to &lt;dfn id=clear3&gt;clear the stack
    back to a table row context&lt;/dfn&gt;, it means that the UA must, while the &lt;a
-   href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
+   href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not a &lt;code&gt;&lt;a
    href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, pop elements from the &lt;a
    href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.
 
-  &lt;p class=note&gt;The &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
+  &lt;p class=note&gt;The &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; being an &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
@@ -44759,7 +44775,7 @@
 
     &lt;p&gt;&lt;a href=&quot;#generate&quot;&gt;Generate implied end tags&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Now, if the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not an element
+    &lt;p&gt;Now, if the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element
      with the same tag name as the token, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.&lt;/p&gt;
 
@@ -44771,7 +44787,7 @@
 
     &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#in-row&quot;
      title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;. (The &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; will be a &lt;code&gt;&lt;a
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; will be a &lt;code&gt;&lt;a
      href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; element at this point.)&lt;/p&gt;
 
    &lt;dt&gt;A start tag whose tag name is one of: &quot;caption&quot;, &quot;col&quot;, &quot;colgroup&quot;,
@@ -44852,12 +44868,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the token's
-     character&lt;/a&gt; into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     character&lt;/a&gt; into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -44876,7 +44892,7 @@
    &lt;dt&gt;A start tag whose tag name is &quot;option&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
      element, act as if an end tag with the tag name &quot;option&quot; had been seen.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.&lt;/p&gt;
@@ -44884,10 +44900,10 @@
    &lt;dt&gt;A start tag whose tag name is &quot;optgroup&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
      element, act as if an end tag with the tag name &quot;option&quot; had been seen.&lt;/p&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an
      &lt;code&gt;optgroup&lt;/code&gt; element, act as if an end tag with the tag name
      &quot;optgroup&quot; had been seen.&lt;/p&gt;
 
@@ -44896,13 +44912,13 @@
    &lt;dt&gt;An end tag whose tag name is &quot;optgroup&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;First, if the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an
+    &lt;p&gt;First, if the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an
      &lt;code&gt;option&lt;/code&gt; element, and the node immediately before it in the
      &lt;a href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt; is an &lt;code&gt;optgroup&lt;/code&gt;
      element, then act as if an end tag with the tag name &quot;option&quot; had been
      seen.&lt;/p&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an
      &lt;code&gt;optgroup&lt;/code&gt; element, then pop that node from the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;. Otherwise, this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;, ignore the token.&lt;/p&gt;
@@ -44910,7 +44926,7 @@
    &lt;dt&gt;An end tag whose tag name is &quot;option&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code&gt;option&lt;/code&gt;
      element, then pop that node from the &lt;a href=&quot;#stack&quot;&gt;stack of open
      elements&lt;/a&gt;. Otherwise, this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;,
      ignore the token.&lt;/p&gt;
@@ -44946,11 +44962,11 @@
    &lt;dt&gt;An end-of-file token
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error.&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; in
+    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; in
      the &lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#stops&quot;&gt;Stop parsing.&lt;/a&gt;&lt;/p&gt;
@@ -45010,12 +45026,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the token's
-     character&lt;/a&gt; into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     character&lt;/a&gt; into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -45025,23 +45041,23 @@
     &lt;p&gt;&lt;a href=&quot;#parse1&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
 
    &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if
-    the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt;
+    the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mi&lt;/code&gt;
     element in the &lt;a href=&quot;#mathml0&quot;&gt;MathML namespace&lt;/a&gt;.
 
    &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if
-    the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt;
+    the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mo&lt;/code&gt;
     element in the &lt;a href=&quot;#mathml0&quot;&gt;MathML namespace&lt;/a&gt;.
 
    &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if
-    the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt;
+    the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;mn&lt;/code&gt;
     element in the &lt;a href=&quot;#mathml0&quot;&gt;MathML namespace&lt;/a&gt;.
 
    &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if
-    the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt;
+    the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code title=&quot;&quot;&gt;ms&lt;/code&gt;
     element in the &lt;a href=&quot;#mathml0&quot;&gt;MathML namespace&lt;/a&gt;.
 
    &lt;dt&gt;A start tag whose tag name is neither &quot;mglyph&quot; nor &quot;malignmark&quot;, if
-    the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an &lt;code
+    the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an &lt;code
     title=&quot;&quot;&gt;mtext&lt;/code&gt; element in the &lt;a href=&quot;#mathml0&quot;&gt;MathML
     namespace&lt;/a&gt;.&lt;/dt&gt;
    &lt;!--XXXSVG
@@ -45051,7 +45067,7 @@
    &lt;dt&gt;A start tag, if the &lt;span&gt;current node&lt;/span&gt; is a &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;span&gt;SVG namespace&lt;/span&gt;.&lt;/dt&gt;
 --&gt;
 
-   &lt;dt&gt;A start tag, if the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is an element
+   &lt;dt&gt;A start tag, if the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is an element
     in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.
 
    &lt;dt&gt;An end tag
@@ -45081,7 +45097,7 @@
     &lt;p&gt;&lt;a href=&quot;#parse1&quot;&gt;Parse error&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Pop elements from the &lt;a href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;
-     until the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is in the &lt;a
+     until the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is in the &lt;a
      href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to the &lt;a
@@ -45151,10 +45167,10 @@
      fixes the use of namespaced attributes, in particular XLink in SVG.)&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#insert1&quot;&gt;Insert a foreign element&lt;/a&gt; for the token, in the
-     same namespace as the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     same namespace as the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If the token has its &lt;i&gt;self-closing flag&lt;/i&gt; set, pop the &lt;a
-     href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of open
+     href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a href=&quot;#stack&quot;&gt;stack of open
      elements&lt;/a&gt; and &lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
      flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
   &lt;/dl&gt;
@@ -45238,12 +45254,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the character&lt;/a&gt;
-     into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -45267,17 +45283,17 @@
    &lt;dt&gt;An end tag whose tag name is &quot;frameset&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;; ignore the token. (&lt;a
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; from the &lt;a
+    &lt;p&gt;Otherwise, pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; from the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If the parser was &lt;em&gt;not&lt;/em&gt; originally created as part of the &lt;a
      href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing algorithm&lt;/a&gt; (&lt;a
-     href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), and the &lt;a href=&quot;#current4&quot;&gt;current
+     href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), and the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; is no longer a &lt;code&gt;frameset&lt;/code&gt; element, then switch the
      &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after6&quot; title=&quot;insertion mode:
      after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;.&lt;/p&gt;
@@ -45286,7 +45302,7 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.
-     Immediately pop the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; off the &lt;a
+     Immediately pop the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#acknowledged&quot; title=&quot;acknowledge self-closing
@@ -45303,11 +45319,11 @@
    &lt;dt&gt;An end-of-file token
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
+    &lt;p&gt;If the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not the root &lt;code&gt;&lt;a
      href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then this is a &lt;a
      href=&quot;#parse1&quot;&gt;parse error.&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt; in
+    &lt;p class=note&gt;It can only be the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; in
      the &lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;a href=&quot;#stops&quot;&gt;Stop parsing.&lt;/a&gt;&lt;/p&gt;
@@ -45334,12 +45350,12 @@
 
    &lt;dd&gt;
     &lt;p&gt;&lt;a href=&quot;#insert&quot; title=&quot;insert a character&quot;&gt;Insert the character&lt;/a&gt;
-     into the &lt;a href=&quot;#current4&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     into the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;.&lt;/p&gt;
 
    &lt;dt&gt;A comment token
 
    &lt;dd&gt;
-    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current4&quot;&gt;current
+    &lt;p&gt;Append a &lt;code&gt;Comment&lt;/code&gt; node to the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; with the &lt;code title=&quot;&quot;&gt;data&lt;/code&gt; attribute set to the data
      given in the comment token.&lt;/p&gt;
 
@@ -45468,14 +45484,12 @@
    parsing&lt;/dfn&gt; the document, the user agent must follow the steps in this
    section.
 
-  &lt;p&gt;First, &lt;!--the user agent must &lt;span title=&quot;fire a DOMContentLoaded
-  event&quot;&gt;fire a &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/span&gt;
-  at &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;First, the &lt;a href=&quot;#current&quot;&gt;current document readiness&lt;/a&gt; must be set
+   to &quot;interactive&quot;.
 
-  &lt;p&gt;Then, --&gt;the
-   rules for &lt;a href=&quot;#when-a&quot;&gt;when a script completes loading&lt;/a&gt; start
-   applying (script execution is no longer managed by the parser).
+  &lt;p&gt;Then, the rules for &lt;a href=&quot;#when-a&quot;&gt;when a script completes
+   loading&lt;/a&gt; start applying (script execution is no longer managed by the
+   parser).
 
   &lt;p&gt;If any of the scripts in the &lt;a href=&quot;#list-of1&quot;&gt;list of scripts that
    will execute as soon as possible&lt;/a&gt; have &lt;span&gt;completed
@@ -45501,9 +45515,11 @@
    &lt;code&gt;Document&lt;/code&gt;.
 
   &lt;p&gt;Once everything that &lt;dfn id=delays title=&quot;delay the load event&quot;&gt;delays
-   the load event&lt;/dfn&gt; has completed, the user agent must &lt;a href=&quot;#firing4&quot;
-   title=&quot;fire a load event&quot;&gt;fire a &lt;code title=event-load&gt;load&lt;/code&gt;
-   event&lt;/a&gt; at &lt;a href=&quot;#the-body1&quot;&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;.&lt;/p&gt;
+   the load event&lt;/dfn&gt; has completed, the user agent must set the &lt;a
+   href=&quot;#current&quot;&gt;current document readiness&lt;/a&gt; to &quot;complete&quot;, and then &lt;a
+   href=&quot;#firing4&quot; title=&quot;fire a load event&quot;&gt;fire a &lt;code
+   title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt; at &lt;a href=&quot;#the-body1&quot;&gt;the
+   &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;.&lt;/p&gt;
   &lt;!-- XXX make sure things &quot;delay the load event&quot; --&gt;
 
   &lt;p class=big-issue&gt;delaying the load event for things like image loads
@@ -48552,7 +48568,8 @@
   &lt;h2 class=no-num id=references&gt;References&lt;/h2&gt;
 
   &lt;p class=big-issue&gt;This section will be written in a future
-   draft.&lt;!--XXX--&gt;
+   draft.&lt;!--XXX--&gt;&lt;/p&gt;
+  &lt;!-- XXX check that #refsRFC([0-9]+) is always for [RFC\1] --&gt;
 
   &lt;h2 class=no-num id=acknowledgements&gt;Acknowledgements&lt;/h2&gt;
   &lt;!-- ACKS --&gt;

Modified: source
===================================================================
--- source	2008-04-18 22:34:05 UTC (rev 1460)
+++ source	2008-04-18 23:44:32 UTC (rev 1461)
@@ -907,6 +907,7 @@
            attribute DOMString &lt;span title=&quot;dom-document-charset&quot;&gt;charset&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-document-characterSet&quot;&gt;characterSet&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-document-defaultCharset&quot;&gt;defaultCharset&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-readyState&quot;&gt;readyState&lt;/span&gt;;
 
   // &lt;span&gt;DOM tree accessors&lt;/span&gt;
            attribute DOMString &lt;span title=&quot;dom-document-title&quot;&gt;title&lt;/span&gt;;
@@ -951,7 +952,6 @@
   DOMString &lt;span title=&quot;dom-document-queryCommandValue&quot;&gt;queryCommandValue&lt;/span&gt;(in DOMString commandId);
   &lt;span&gt;Selection&lt;/span&gt; &lt;span title=&quot;dom-document-getSelection&quot;&gt;getSelection&lt;/span&gt;();
 &lt;!-- XXX we're not done here.
- readonly attribute DOMString readyState;
  readonly attribute HTMLCollection scripts;
 --&gt;
 };&lt;/pre&gt;
@@ -1155,8 +1155,23 @@
   encoding associated with the user's current geographical location,
   or any arbitrary encoding name.&lt;/p&gt;
 
+  &lt;p&gt;Each document has a &lt;dfn&gt;current document readiness&lt;/dfn&gt;. When a
+  &lt;code&gt;Document&lt;/code&gt; object is created, it must have its
+  &lt;span&gt;current document readiness&lt;/span&gt; set to the string
+  &quot;loading&quot;. Various algorithms during page loading affect this
+  value. When the value is set, the user agent must &lt;span&gt;fire a
+  simple event&lt;/span&gt; called &lt;code
+  title=&quot;event-readystatechanged&quot;&gt;readystatechanged&lt;/code&gt; at the
+  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt; &lt;!-- XXX define
+  document.onreadystatechange --&gt;
 
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-readyState&quot;&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute must, on getting, return the &lt;span&gt;current document
+  readiness&lt;/span&gt;.&lt;/p&gt;
 
+
+
   &lt;h3&gt;Elements&lt;/h3&gt;
 
   &lt;p&gt;The nodes representing &lt;span&gt;HTML elements&lt;/span&gt; in the DOM must
@@ -28133,7 +28148,7 @@
   &lt;p&gt;The rules for how to convert the bytes of the plain text document
   into actual characters are defined in RFC 2046, RFC 2646, and
   subsequent versions thereof. &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC2046&quot;&gt;[RFC2646]&lt;/a&gt;&lt;/p&gt;
+  href=&quot;#refsRFC2646&quot;&gt;[RFC2646]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;span&gt;document's character encoding&lt;/span&gt; must be set to the
   character encoding used to decode the document.&lt;/p&gt;
@@ -42686,14 +42701,12 @@
   the document, the user agent must follow the steps in this
   section.&lt;/p&gt;
 
-  &lt;p&gt;First, &lt;!--the user agent must &lt;span title=&quot;fire a DOMContentLoaded
-  event&quot;&gt;fire a &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/span&gt;
-  at &lt;span&gt;the &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;First, the &lt;span&gt;current document readiness&lt;/span&gt; must be set to
+  &quot;interactive&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Then, --&gt;the rules for &lt;span&gt;when a script completes
-  loading&lt;/span&gt; start applying (script execution is no longer managed
-  by the parser).&lt;/p&gt;
+  &lt;p&gt;Then, the rules for &lt;span&gt;when a script completes loading&lt;/span&gt;
+  start applying (script execution is no longer managed by the
+  parser).&lt;/p&gt;
 
   &lt;p&gt;If any of the scripts in the &lt;span&gt;list of scripts that will
   execute as soon as possible&lt;/span&gt; have &lt;span&gt;completed
@@ -42718,8 +42731,9 @@
   &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;Once everything that &lt;dfn title=&quot;delay the load event&quot;&gt;delays the
-  load event&lt;/dfn&gt; has completed, the user agent must &lt;span
-  title=&quot;fire a load event&quot;&gt;fire a &lt;code
+  load event&lt;/dfn&gt; has completed, the user agent must set the
+  &lt;span&gt;current document readiness&lt;/span&gt; to &quot;complete&quot;, and then
+  &lt;span title=&quot;fire a load event&quot;&gt;fire a &lt;code
   title=&quot;event-load&quot;&gt;load&lt;/code&gt; event&lt;/span&gt; at &lt;span&gt;the
   &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;.&lt;/p&gt;
 
@@ -43709,6 +43723,7 @@
   &lt;p class=&quot;big-issue&quot;&gt;This section will be written in a future
   draft.&lt;!--XXX--&gt;&lt;/p&gt;
 
+  &lt;!-- XXX check that #refsRFC([0-9]+) is always for [RFC\1] --&gt;
 
 
   &lt;h2 class=&quot;no-num&quot;&gt;Acknowledgements&lt;/h2&gt; &lt;!-- ACKS --&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008360.html">[html5] r1460 - /
</A></li>
	<LI>Next message: <A HREF="008362.html">[html5] r1462 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8361">[ date ]</a>
              <a href="thread.html#8361">[ thread ]</a>
              <a href="subject.html#8361">[ subject ]</a>
              <a href="author.html#8361">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
