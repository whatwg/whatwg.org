<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1790 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1790%20-%20/&In-Reply-To=%3C20080619092729.A8D6438E0A4%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008687.html">
   <LINK REL="Next"  HREF="008689.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1790 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1790%20-%20/&In-Reply-To=%3C20080619092729.A8D6438E0A4%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1790 - /">whatwg at whatwg.org
       </A><BR>
    <I>Thu Jun 19 02:27:29 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008687.html">[html5] r1789 - /
</A></li>
        <LI>Next message: <A HREF="008689.html">[html5] r1791 - [acgiowrt] (2) Define 'URL' and 'valid U [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8688">[ date ]</a>
              <a href="thread.html#8688">[ thread ]</a>
              <a href="subject.html#8688">[ subject ]</a>
              <a href="author.html#8688">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-06-19 02:27:25 -0700 (Thu, 19 Jun 2008)
New Revision: 1790

Modified:
   index
   source
Log:
[e] (0) Giant reorg to move things to more appropriate places so that there's a logical place for a URLs section. Please let me know what you think.

Modified: index
===================================================================
--- index	2008-06-18 23:31:17 UTC (rev 1789)
+++ index	2008-06-19 09:27:25 UTC (rev 1790)
@@ -25,7 +25,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 18 June
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 19 June
     2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
@@ -159,1684 +159,1694 @@
   &lt;ul class=toc&gt;
    &lt;li&gt;&lt;a href=&quot;#introduction&quot;&gt;&lt;span class=secno&gt;1. &lt;/span&gt;Introduction&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#scope&quot;&gt;&lt;span class=secno&gt;1.1 &lt;/span&gt;Scope&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#background&quot;&gt;&lt;span class=secno&gt;1.1 &lt;/span&gt;Background&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#scope&quot;&gt;&lt;span class=secno&gt;1.2 &lt;/span&gt;Scope&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#relationships&quot;&gt;&lt;span class=secno&gt;1.3 &lt;/span&gt;Relationships
+      to other specifications&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#relationship&quot;&gt;&lt;span class=secno&gt;1.1.1
+       &lt;li&gt;&lt;a href=&quot;#relationship&quot;&gt;&lt;span class=secno&gt;1.3.1
         &lt;/span&gt;Relationship to HTML 4.01 and DOM2 HTML&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#relationship0&quot;&gt;&lt;span class=secno&gt;1.1.2
+       &lt;li&gt;&lt;a href=&quot;#relationship0&quot;&gt;&lt;span class=secno&gt;1.3.2
         &lt;/span&gt;Relationship to XHTML 1.x&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#relationship1&quot;&gt;&lt;span class=secno&gt;1.1.3
+       &lt;li&gt;&lt;a href=&quot;#relationship1&quot;&gt;&lt;span class=secno&gt;1.3.3
         &lt;/span&gt;Relationship to XHTML2&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#relationship2&quot;&gt;&lt;span class=secno&gt;1.1.4
+       &lt;li&gt;&lt;a href=&quot;#relationship2&quot;&gt;&lt;span class=secno&gt;1.3.4
         &lt;/span&gt;Relationship to Web Forms 2.0 and XForms&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#relationship3&quot;&gt;&lt;span class=secno&gt;1.1.5
+       &lt;li&gt;&lt;a href=&quot;#relationship3&quot;&gt;&lt;span class=secno&gt;1.3.5
         &lt;/span&gt;Relationship to XUL, Flash, Silverlight, and other proprietary
         UI languages&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#structure&quot;&gt;&lt;span class=secno&gt;1.2 &lt;/span&gt;Structure of this
+     &lt;li&gt;&lt;a href=&quot;#html-vs&quot;&gt;&lt;span class=secno&gt;1.4 &lt;/span&gt;HTML vs XHTML&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#structure&quot;&gt;&lt;span class=secno&gt;1.5 &lt;/span&gt;Structure of this
       specification&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#how-to&quot;&gt;&lt;span class=secno&gt;1.2.1 &lt;/span&gt;How to read this
+       &lt;li&gt;&lt;a href=&quot;#how-to&quot;&gt;&lt;span class=secno&gt;1.5.1 &lt;/span&gt;How to read this
         specification&lt;/a&gt;
       &lt;/ul&gt;
+    &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#conformance&quot;&gt;&lt;span class=secno&gt;1.3 &lt;/span&gt;Conformance
+   &lt;li&gt;&lt;a href=&quot;#infrastructure&quot;&gt;&lt;span class=secno&gt;2. &lt;/span&gt;Common
+    infrastructure&lt;/a&gt;
+    &lt;ul class=toc&gt;
+     &lt;li&gt;&lt;a href=&quot;#conformance&quot;&gt;&lt;span class=secno&gt;2.1 &lt;/span&gt;Conformance
       requirements&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#common&quot;&gt;&lt;span class=secno&gt;1.3.1 &lt;/span&gt;Common
-        conformance requirements for APIs exposed to JavaScript&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#dependencies&quot;&gt;&lt;span class=secno&gt;1.3.2
+       &lt;li&gt;&lt;a href=&quot;#dependencies&quot;&gt;&lt;span class=secno&gt;2.1.1
         &lt;/span&gt;Dependencies&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#features&quot;&gt;&lt;span class=secno&gt;1.3.3 &lt;/span&gt;Features
+       &lt;li&gt;&lt;a href=&quot;#features&quot;&gt;&lt;span class=secno&gt;2.1.2 &lt;/span&gt;Features
         defined in other specifications&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#common&quot;&gt;&lt;span class=secno&gt;2.1.3 &lt;/span&gt;Common
+        conformance requirements for APIs exposed to JavaScript&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#terminology&quot;&gt;&lt;span class=secno&gt;1.4 &lt;/span&gt;Terminology&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#terminology&quot;&gt;&lt;span class=secno&gt;2.2 &lt;/span&gt;Terminology&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#urls&quot;&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;URLs&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#html-vs&quot;&gt;&lt;span class=secno&gt;1.4.1 &lt;/span&gt;HTML vs
-        XHTML&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;2.3.1 &lt;/span&gt;Interfaces
+        for URI manipulation&lt;/a&gt;
       &lt;/ul&gt;
-    &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#dom&quot;&gt;&lt;span class=secno&gt;2. &lt;/span&gt;The Document Object
-    Model&lt;/a&gt;
-    &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#documents&quot;&gt;&lt;span class=secno&gt;2.1 &lt;/span&gt;Documents&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#common0&quot;&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common
+      microsyntaxes&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#security&quot;&gt;&lt;span class=secno&gt;2.1.1 &lt;/span&gt;Security&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#common1&quot;&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser
+        idioms&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#resource&quot;&gt;&lt;span class=secno&gt;2.1.2 &lt;/span&gt;Resource
-        metadata management&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#boolean&quot;&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean
+        attributes&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#numbers&quot;&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Numbers&lt;/a&gt;
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#unsigned&quot;&gt;&lt;span class=secno&gt;2.4.3.1. &lt;/span&gt;Unsigned
+          integers&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#signed&quot;&gt;&lt;span class=secno&gt;2.4.3.2. &lt;/span&gt;Signed
+          integers&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#real-numbers&quot;&gt;&lt;span class=secno&gt;2.4.3.3. &lt;/span&gt;Real
+          numbers&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#ratios&quot;&gt;&lt;span class=secno&gt;2.4.3.4. &lt;/span&gt;Ratios&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#percentages-and-dimensions&quot;&gt;&lt;span class=secno&gt;2.4.3.5.
+          &lt;/span&gt;Percentages and dimensions&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#lists&quot;&gt;&lt;span class=secno&gt;2.4.3.6. &lt;/span&gt;Lists of
+          integers&lt;/a&gt;
+        &lt;/ul&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#dates&quot;&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dates and
+        times&lt;/a&gt;
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#specific&quot;&gt;&lt;span class=secno&gt;2.4.4.1. &lt;/span&gt;Specific
+          moments in time&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#vaguer&quot;&gt;&lt;span class=secno&gt;2.4.4.2. &lt;/span&gt;Vaguer
+          moments in time&lt;/a&gt;
+        &lt;/ul&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#time-offsets&quot;&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Time
+        offsets&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#tokens&quot;&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Tokens&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#keywords&quot;&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Keywords and
+        enumerated attributes&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#syntax-references&quot;&gt;&lt;span class=secno&gt;2.4.8
+        &lt;/span&gt;References&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#elements&quot;&gt;&lt;span class=secno&gt;2.2 &lt;/span&gt;Elements&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#common2&quot;&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common DOM
+      interfaces&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#reflecting&quot;&gt;&lt;span class=secno&gt;2.2.1 &lt;/span&gt;Reflecting
+       &lt;li&gt;&lt;a href=&quot;#reflecting&quot;&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Reflecting
         content attributes in DOM attributes&lt;/a&gt;
-      &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#common0&quot;&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;Common DOM
-      interfaces&lt;/a&gt;
-      &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#collections&quot;&gt;&lt;span class=secno&gt;2.3.1
+       &lt;li&gt;&lt;a href=&quot;#collections&quot;&gt;&lt;span class=secno&gt;2.5.2
         &lt;/span&gt;Collections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#htmlcollection&quot;&gt;&lt;span class=secno&gt;2.3.1.1.
+         &lt;li&gt;&lt;a href=&quot;#htmlcollection&quot;&gt;&lt;span class=secno&gt;2.5.2.1.
           &lt;/span&gt;HTMLCollection&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#htmlformcontrolscollection&quot;&gt;&lt;span class=secno&gt;2.3.1.2.
+         &lt;li&gt;&lt;a href=&quot;#htmlformcontrolscollection&quot;&gt;&lt;span class=secno&gt;2.5.2.2.
           &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#htmloptionscollection&quot;&gt;&lt;span class=secno&gt;2.3.1.3.
+         &lt;li&gt;&lt;a href=&quot;#htmloptionscollection&quot;&gt;&lt;span class=secno&gt;2.5.2.3.
           &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#domtokenlist&quot;&gt;&lt;span class=secno&gt;2.3.2
+       &lt;li&gt;&lt;a href=&quot;#domtokenlist&quot;&gt;&lt;span class=secno&gt;2.5.3
         &lt;/span&gt;DOMTokenList&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#domstringmap&quot;&gt;&lt;span class=secno&gt;2.3.3
+       &lt;li&gt;&lt;a href=&quot;#domstringmap&quot;&gt;&lt;span class=secno&gt;2.5.4
         &lt;/span&gt;DOMStringMap&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dom-feature&quot;&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;DOM feature
+       &lt;li&gt;&lt;a href=&quot;#dom-feature&quot;&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;DOM feature
         strings&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#dom-tree&quot;&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;DOM tree
-      accessors&lt;/a&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#dynamic&quot;&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Dynamic markup
-      insertion&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;2.6
+      &lt;/span&gt;Determining the type of a resource&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#controlling&quot;&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Controlling
-        the input stream&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;2.6.1
+        &lt;/span&gt;Content-Type metadata&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dynamic0&quot;&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic markup
-        insertion in HTML&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;2.6.2
+        &lt;/span&gt;Content-Type sniffing: Web pages&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dynamic1&quot;&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Dynamic markup
-        insertion in XML&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;2.6.3
+        &lt;/span&gt;Content-Type sniffing: text or binary&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;2.6.4
+        &lt;/span&gt;Content-Type sniffing: unknown type&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;2.6.5
+        &lt;/span&gt;Content-Type sniffing: image&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#content-type4&quot;&gt;&lt;span class=secno&gt;2.6.6
+        &lt;/span&gt;Content-Type sniffing: feed or HTML&lt;/a&gt;
       &lt;/ul&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#apis-in&quot;&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;APIs in HTML
-      documents&lt;/a&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#semantics&quot;&gt;&lt;span class=secno&gt;3. &lt;/span&gt;Semantics and
-    structure of HTML elements&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#dom&quot;&gt;&lt;span class=secno&gt;3. &lt;/span&gt;Semantics and structure of
+    HTML documents&lt;/a&gt;
     &lt;ul class=toc&gt;
      &lt;li&gt;&lt;a href=&quot;#semantics-intro&quot;&gt;&lt;span class=secno&gt;3.1
       &lt;/span&gt;Introduction&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#common1&quot;&gt;&lt;span class=secno&gt;3.2 &lt;/span&gt;Common
-      microsyntaxes&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#documents&quot;&gt;&lt;span class=secno&gt;3.2 &lt;/span&gt;Documents&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#common2&quot;&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Common parser
-        idioms&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#documents0&quot;&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Documents in
+        the DOM&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#boolean&quot;&gt;&lt;span class=secno&gt;3.2.2 &lt;/span&gt;Boolean
-        attributes&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#security&quot;&gt;&lt;span class=secno&gt;3.2.2 &lt;/span&gt;Security&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#numbers&quot;&gt;&lt;span class=secno&gt;3.2.3 &lt;/span&gt;Numbers&lt;/a&gt;
-        &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#unsigned&quot;&gt;&lt;span class=secno&gt;3.2.3.1. &lt;/span&gt;Unsigned
-          integers&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#resource&quot;&gt;&lt;span class=secno&gt;3.2.3 &lt;/span&gt;Resource
+        metadata management&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#signed&quot;&gt;&lt;span class=secno&gt;3.2.3.2. &lt;/span&gt;Signed
-          integers&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#dom-tree&quot;&gt;&lt;span class=secno&gt;3.2.4 &lt;/span&gt;DOM tree
+        accessors&lt;/a&gt;
+      &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#real-numbers&quot;&gt;&lt;span class=secno&gt;3.2.3.3. &lt;/span&gt;Real
-          numbers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#elements&quot;&gt;&lt;span class=secno&gt;3.3 &lt;/span&gt;Elements&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#semantics0&quot;&gt;&lt;span class=secno&gt;3.3.1 &lt;/span&gt;Semantics&lt;/a&gt;
+        
 
-         &lt;li&gt;&lt;a href=&quot;#ratios&quot;&gt;&lt;span class=secno&gt;3.2.3.4. &lt;/span&gt;Ratios&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#elements0&quot;&gt;&lt;span class=secno&gt;3.3.2 &lt;/span&gt;Elements in
+        the DOM&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#percentages-and-dimensions&quot;&gt;&lt;span class=secno&gt;3.2.3.5.
-          &lt;/span&gt;Percentages and dimensions&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#global&quot;&gt;&lt;span class=secno&gt;3.3.3 &lt;/span&gt;Global
+        attributes&lt;/a&gt;
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-id&quot;&gt;&lt;span class=secno&gt;3.3.3.1. &lt;/span&gt;The
+          &lt;code&gt;id&lt;/code&gt; attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#lists&quot;&gt;&lt;span class=secno&gt;3.2.3.6. &lt;/span&gt;Lists of
-          integers&lt;/a&gt;
-        &lt;/ul&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-title&quot;&gt;&lt;span class=secno&gt;3.3.3.2. &lt;/span&gt;The
+          &lt;code&gt;title&lt;/code&gt; attribute&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dates&quot;&gt;&lt;span class=secno&gt;3.2.4 &lt;/span&gt;Dates and
-        times&lt;/a&gt;
-        &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#specific&quot;&gt;&lt;span class=secno&gt;3.2.4.1. &lt;/span&gt;Specific
-          moments in time&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-lang&quot;&gt;&lt;span class=secno&gt;3.3.3.3. &lt;/span&gt;The
+          &lt;code&gt;lang&lt;/code&gt; (HTML only) and &lt;code&gt;xml:lang&lt;/code&gt; (XML only)
+          attributes&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#vaguer&quot;&gt;&lt;span class=secno&gt;3.2.4.2. &lt;/span&gt;Vaguer
-          moments in time&lt;/a&gt;
-        &lt;/ul&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-xmlbase&quot;&gt;&lt;span class=secno&gt;3.3.3.4. &lt;/span&gt;The
+          &lt;code&gt;xml:base&lt;/code&gt; attribute (XML only)&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#time-offsets&quot;&gt;&lt;span class=secno&gt;3.2.5 &lt;/span&gt;Time
-        offsets&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-dir&quot;&gt;&lt;span class=secno&gt;3.3.3.5. &lt;/span&gt;The
+          &lt;code&gt;dir&lt;/code&gt; attribute&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#tokens&quot;&gt;&lt;span class=secno&gt;3.2.6 &lt;/span&gt;Tokens&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#classes&quot;&gt;&lt;span class=secno&gt;3.3.3.6. &lt;/span&gt;The
+          &lt;code&gt;class&lt;/code&gt; attribute&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#keywords&quot;&gt;&lt;span class=secno&gt;3.2.7 &lt;/span&gt;Keywords and
-        enumerated attributes&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#the-style&quot;&gt;&lt;span class=secno&gt;3.3.3.7. &lt;/span&gt;The
+          &lt;code&gt;style&lt;/code&gt; attribute&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#syntax-references&quot;&gt;&lt;span class=secno&gt;3.2.8
-        &lt;/span&gt;References&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#urls&quot;&gt;&lt;span class=secno&gt;3.2.9 &lt;/span&gt;URLs&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#embedding&quot;&gt;&lt;span class=secno&gt;3.3.3.8. &lt;/span&gt;Embedding
+          custom non-visible data&lt;/a&gt;
+        &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#documents0&quot;&gt;&lt;span class=secno&gt;3.3 &lt;/span&gt;Documents and
-      document fragments&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#content&quot;&gt;&lt;span class=secno&gt;3.4 &lt;/span&gt;Content models&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#semantics0&quot;&gt;&lt;span class=secno&gt;3.3.1 &lt;/span&gt;Semantics&lt;/a&gt;
-        
-
-       &lt;li&gt;&lt;a href=&quot;#structure0&quot;&gt;&lt;span class=secno&gt;3.3.2 &lt;/span&gt;Structure&lt;/a&gt;
-        
-
-       &lt;li&gt;&lt;a href=&quot;#kinds&quot;&gt;&lt;span class=secno&gt;3.3.3 &lt;/span&gt;Kinds of
+       &lt;li&gt;&lt;a href=&quot;#kinds&quot;&gt;&lt;span class=secno&gt;3.4.1 &lt;/span&gt;Kinds of
         content&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#metadata&quot;&gt;&lt;span class=secno&gt;3.3.3.1. &lt;/span&gt;Metadata
+         &lt;li&gt;&lt;a href=&quot;#metadata&quot;&gt;&lt;span class=secno&gt;3.4.1.1. &lt;/span&gt;Metadata
           content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#flow-content&quot;&gt;&lt;span class=secno&gt;3.3.3.2. &lt;/span&gt;Flow
+         &lt;li&gt;&lt;a href=&quot;#flow-content&quot;&gt;&lt;span class=secno&gt;3.4.1.2. &lt;/span&gt;Flow
           content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sectioning&quot;&gt;&lt;span class=secno&gt;3.3.3.3.
+         &lt;li&gt;&lt;a href=&quot;#sectioning&quot;&gt;&lt;span class=secno&gt;3.4.1.3.
           &lt;/span&gt;Sectioning content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#heading&quot;&gt;&lt;span class=secno&gt;3.3.3.4. &lt;/span&gt;Heading
+         &lt;li&gt;&lt;a href=&quot;#heading&quot;&gt;&lt;span class=secno&gt;3.4.1.4. &lt;/span&gt;Heading
           content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#phrasing&quot;&gt;&lt;span class=secno&gt;3.3.3.5. &lt;/span&gt;Phrasing
+         &lt;li&gt;&lt;a href=&quot;#phrasing&quot;&gt;&lt;span class=secno&gt;3.4.1.5. &lt;/span&gt;Phrasing
           content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#embedded&quot;&gt;&lt;span class=secno&gt;3.3.3.6. &lt;/span&gt;Embedded
+         &lt;li&gt;&lt;a href=&quot;#embedded&quot;&gt;&lt;span class=secno&gt;3.4.1.6. &lt;/span&gt;Embedded
           content&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#interactive0&quot;&gt;&lt;span class=secno&gt;3.3.3.7.
+         &lt;li&gt;&lt;a href=&quot;#interactive0&quot;&gt;&lt;span class=secno&gt;3.4.1.7.
           &lt;/span&gt;Interactive content&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#transparent&quot;&gt;&lt;span class=secno&gt;3.3.4 &lt;/span&gt;Transparent
+       &lt;li&gt;&lt;a href=&quot;#transparent&quot;&gt;&lt;span class=secno&gt;3.4.2 &lt;/span&gt;Transparent
         content models&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#paragraphs&quot;&gt;&lt;span class=secno&gt;3.3.5
-        &lt;/span&gt;Paragraphs&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#global&quot;&gt;&lt;span class=secno&gt;3.4 &lt;/span&gt;Global attributes&lt;/a&gt;
-      
-      &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-id&quot;&gt;&lt;span class=secno&gt;3.4.1 &lt;/span&gt;The
-        &lt;code&gt;id&lt;/code&gt; attribute&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#paragraphs&quot;&gt;&lt;span class=secno&gt;3.5 &lt;/span&gt;Paragraphs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-title&quot;&gt;&lt;span class=secno&gt;3.4.2 &lt;/span&gt;The
-        &lt;code&gt;title&lt;/code&gt; attribute&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#apis-in&quot;&gt;&lt;span class=secno&gt;3.6 &lt;/span&gt;APIs in HTML
+      documents&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-lang&quot;&gt;&lt;span class=secno&gt;3.4.3 &lt;/span&gt;The
-        &lt;code&gt;lang&lt;/code&gt; (HTML only) and &lt;code&gt;xml:lang&lt;/code&gt; (XML only)
-        attributes&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#dynamic&quot;&gt;&lt;span class=secno&gt;3.7 &lt;/span&gt;Dynamic markup
+      insertion&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#controlling&quot;&gt;&lt;span class=secno&gt;3.7.1 &lt;/span&gt;Controlling
+        the input stream&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-xmlbase&quot;&gt;&lt;span class=secno&gt;3.4.4 &lt;/span&gt;The
-        &lt;code&gt;xml:base&lt;/code&gt; attribute (XML only)&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#dynamic0&quot;&gt;&lt;span class=secno&gt;3.7.2 &lt;/span&gt;Dynamic markup
+        insertion in HTML&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dir&quot;&gt;&lt;span class=secno&gt;3.4.5 &lt;/span&gt;The
-        &lt;code&gt;dir&lt;/code&gt; attribute&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#classes&quot;&gt;&lt;span class=secno&gt;3.4.6 &lt;/span&gt;The
-        &lt;code&gt;class&lt;/code&gt; attribute&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#the-style&quot;&gt;&lt;span class=secno&gt;3.4.7 &lt;/span&gt;The
-        &lt;code&gt;style&lt;/code&gt; attribute&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#embedding&quot;&gt;&lt;span class=secno&gt;3.4.8 &lt;/span&gt;Embedding
-        custom non-visible data&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#dynamic1&quot;&gt;&lt;span class=secno&gt;3.7.3 &lt;/span&gt;Dynamic markup
+        insertion in XML&lt;/a&gt;
       &lt;/ul&gt;
+    &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#the-root&quot;&gt;&lt;span class=secno&gt;3.5 &lt;/span&gt;The root
+   &lt;li&gt;&lt;a href=&quot;#semantics&quot;&gt;&lt;span class=secno&gt;4. &lt;/span&gt;The elements of
+    HTML&lt;/a&gt;
+    &lt;ul class=toc&gt;
+     &lt;li&gt;&lt;a href=&quot;#the-root&quot;&gt;&lt;span class=secno&gt;4.1 &lt;/span&gt;The root
       element&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-html&quot;&gt;&lt;span class=secno&gt;3.5.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-html&quot;&gt;&lt;span class=secno&gt;4.1.1 &lt;/span&gt;The
         &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#document&quot;&gt;&lt;span class=secno&gt;3.6 &lt;/span&gt;Document
+     &lt;li&gt;&lt;a href=&quot;#document&quot;&gt;&lt;span class=secno&gt;4.2 &lt;/span&gt;Document
       metadata&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-head&quot;&gt;&lt;span class=secno&gt;3.6.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-head&quot;&gt;&lt;span class=secno&gt;4.2.1 &lt;/span&gt;The
         &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-title0&quot;&gt;&lt;span class=secno&gt;3.6.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-title0&quot;&gt;&lt;span class=secno&gt;4.2.2 &lt;/span&gt;The
         &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-base&quot;&gt;&lt;span class=secno&gt;3.6.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-base&quot;&gt;&lt;span class=secno&gt;4.2.3 &lt;/span&gt;The
         &lt;code&gt;base&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-link&quot;&gt;&lt;span class=secno&gt;3.6.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-link&quot;&gt;&lt;span class=secno&gt;4.2.4 &lt;/span&gt;The
         &lt;code&gt;link&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#meta&quot;&gt;&lt;span class=secno&gt;3.6.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#meta&quot;&gt;&lt;span class=secno&gt;4.2.5 &lt;/span&gt;The
         &lt;code&gt;meta&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#standard&quot;&gt;&lt;span class=secno&gt;3.6.5.1. &lt;/span&gt;Standard
+         &lt;li&gt;&lt;a href=&quot;#standard&quot;&gt;&lt;span class=secno&gt;4.2.5.1. &lt;/span&gt;Standard
           metadata names&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#other&quot;&gt;&lt;span class=secno&gt;3.6.5.2. &lt;/span&gt;Other
+         &lt;li&gt;&lt;a href=&quot;#other&quot;&gt;&lt;span class=secno&gt;4.2.5.2. &lt;/span&gt;Other
           metadata names&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#pragma&quot;&gt;&lt;span class=secno&gt;3.6.5.3. &lt;/span&gt;Pragma
+         &lt;li&gt;&lt;a href=&quot;#pragma&quot;&gt;&lt;span class=secno&gt;4.2.5.3. &lt;/span&gt;Pragma
           directives&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#charset&quot;&gt;&lt;span class=secno&gt;3.6.5.4. &lt;/span&gt;Specifying
+         &lt;li&gt;&lt;a href=&quot;#charset&quot;&gt;&lt;span class=secno&gt;4.2.5.4. &lt;/span&gt;Specifying
           the document's character encoding&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-style0&quot;&gt;&lt;span class=secno&gt;3.6.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-style0&quot;&gt;&lt;span class=secno&gt;4.2.6 &lt;/span&gt;The
         &lt;code&gt;style&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#styling&quot;&gt;&lt;span class=secno&gt;3.6.7 &lt;/span&gt;Styling&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#styling&quot;&gt;&lt;span class=secno&gt;4.2.7 &lt;/span&gt;Styling&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#sections&quot;&gt;&lt;span class=secno&gt;3.7 &lt;/span&gt;Sections&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#sections&quot;&gt;&lt;span class=secno&gt;4.3 &lt;/span&gt;Sections&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-body&quot;&gt;&lt;span class=secno&gt;3.7.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-body&quot;&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;The
         &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-section&quot;&gt;&lt;span class=secno&gt;3.7.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-section&quot;&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The
         &lt;code&gt;section&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-nav&quot;&gt;&lt;span class=secno&gt;3.7.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-nav&quot;&gt;&lt;span class=secno&gt;4.3.3 &lt;/span&gt;The
         &lt;code&gt;nav&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-article&quot;&gt;&lt;span class=secno&gt;3.7.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-article&quot;&gt;&lt;span class=secno&gt;4.3.4 &lt;/span&gt;The
         &lt;code&gt;article&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-aside&quot;&gt;&lt;span class=secno&gt;3.7.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-aside&quot;&gt;&lt;span class=secno&gt;4.3.5 &lt;/span&gt;The
         &lt;code&gt;aside&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-h1&quot;&gt;&lt;span class=secno&gt;3.7.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-h1&quot;&gt;&lt;span class=secno&gt;4.3.6 &lt;/span&gt;The
         &lt;code&gt;h1&lt;/code&gt;, &lt;code&gt;h2&lt;/code&gt;, &lt;code&gt;h3&lt;/code&gt;, &lt;code&gt;h4&lt;/code&gt;,
         &lt;code&gt;h5&lt;/code&gt;, and &lt;code&gt;h6&lt;/code&gt; elements&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-header&quot;&gt;&lt;span class=secno&gt;3.7.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-header&quot;&gt;&lt;span class=secno&gt;4.3.7 &lt;/span&gt;The
         &lt;code&gt;header&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-footer&quot;&gt;&lt;span class=secno&gt;3.7.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-footer&quot;&gt;&lt;span class=secno&gt;4.3.8 &lt;/span&gt;The
         &lt;code&gt;footer&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-address&quot;&gt;&lt;span class=secno&gt;3.7.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-address&quot;&gt;&lt;span class=secno&gt;4.3.9 &lt;/span&gt;The
         &lt;code&gt;address&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#headings&quot;&gt;&lt;span class=secno&gt;3.7.10 &lt;/span&gt;Headings and
+       &lt;li&gt;&lt;a href=&quot;#headings&quot;&gt;&lt;span class=secno&gt;4.3.10 &lt;/span&gt;Headings and
         sections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#outlines&quot;&gt;&lt;span class=secno&gt;3.7.10.1. &lt;/span&gt;Creating
+         &lt;li&gt;&lt;a href=&quot;#outlines&quot;&gt;&lt;span class=secno&gt;4.3.10.1. &lt;/span&gt;Creating
           an outline&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#distinguishing&quot;&gt;&lt;span class=secno&gt;3.7.10.2.
+         &lt;li&gt;&lt;a href=&quot;#distinguishing&quot;&gt;&lt;span class=secno&gt;4.3.10.2.
           &lt;/span&gt;Distinguishing site-wide headings from page headings&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#grouping&quot;&gt;&lt;span class=secno&gt;3.8 &lt;/span&gt;Grouping
+     &lt;li&gt;&lt;a href=&quot;#grouping&quot;&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Grouping
       content&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-p&quot;&gt;&lt;span class=secno&gt;3.8.1 &lt;/span&gt;The &lt;code&gt;p&lt;/code&gt;
+       &lt;li&gt;&lt;a href=&quot;#the-p&quot;&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;The &lt;code&gt;p&lt;/code&gt;
         element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-hr&quot;&gt;&lt;span class=secno&gt;3.8.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-hr&quot;&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;The
         &lt;code&gt;hr&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-br&quot;&gt;&lt;span class=secno&gt;3.8.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-br&quot;&gt;&lt;span class=secno&gt;4.4.3 &lt;/span&gt;The
         &lt;code&gt;br&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-pre&quot;&gt;&lt;span class=secno&gt;3.8.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-pre&quot;&gt;&lt;span class=secno&gt;4.4.4 &lt;/span&gt;The
         &lt;code&gt;pre&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dialog&quot;&gt;&lt;span class=secno&gt;3.8.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dialog&quot;&gt;&lt;span class=secno&gt;4.4.5 &lt;/span&gt;The
         &lt;code&gt;dialog&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-blockquote&quot;&gt;&lt;span class=secno&gt;3.8.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-blockquote&quot;&gt;&lt;span class=secno&gt;4.4.6 &lt;/span&gt;The
         &lt;code&gt;blockquote&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-ol&quot;&gt;&lt;span class=secno&gt;3.8.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-ol&quot;&gt;&lt;span class=secno&gt;4.4.7 &lt;/span&gt;The
         &lt;code&gt;ol&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-ul&quot;&gt;&lt;span class=secno&gt;3.8.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-ul&quot;&gt;&lt;span class=secno&gt;4.4.8 &lt;/span&gt;The
         &lt;code&gt;ul&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-li&quot;&gt;&lt;span class=secno&gt;3.8.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-li&quot;&gt;&lt;span class=secno&gt;4.4.9 &lt;/span&gt;The
         &lt;code&gt;li&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dl&quot;&gt;&lt;span class=secno&gt;3.8.10 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dl&quot;&gt;&lt;span class=secno&gt;4.4.10 &lt;/span&gt;The
         &lt;code&gt;dl&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dt&quot;&gt;&lt;span class=secno&gt;3.8.11 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dt&quot;&gt;&lt;span class=secno&gt;4.4.11 &lt;/span&gt;The
         &lt;code&gt;dt&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dd&quot;&gt;&lt;span class=secno&gt;3.8.12 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dd&quot;&gt;&lt;span class=secno&gt;4.4.12 &lt;/span&gt;The
         &lt;code&gt;dd&lt;/code&gt; element&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#text-level&quot;&gt;&lt;span class=secno&gt;3.9 &lt;/span&gt;Text-level
+     &lt;li&gt;&lt;a href=&quot;#text-level&quot;&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;Text-level
       semantics&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-a&quot;&gt;&lt;span class=secno&gt;3.9.1 &lt;/span&gt;The &lt;code&gt;a&lt;/code&gt;
+       &lt;li&gt;&lt;a href=&quot;#the-a&quot;&gt;&lt;span class=secno&gt;4.5.1 &lt;/span&gt;The &lt;code&gt;a&lt;/code&gt;
         element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-q&quot;&gt;&lt;span class=secno&gt;3.9.2 &lt;/span&gt;The &lt;code&gt;q&lt;/code&gt;
+       &lt;li&gt;&lt;a href=&quot;#the-q&quot;&gt;&lt;span class=secno&gt;4.5.2 &lt;/span&gt;The &lt;code&gt;q&lt;/code&gt;
         element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-cite&quot;&gt;&lt;span class=secno&gt;3.9.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-cite&quot;&gt;&lt;span class=secno&gt;4.5.3 &lt;/span&gt;The
         &lt;code&gt;cite&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-em&quot;&gt;&lt;span class=secno&gt;3.9.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-em&quot;&gt;&lt;span class=secno&gt;4.5.4 &lt;/span&gt;The
         &lt;code&gt;em&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-strong&quot;&gt;&lt;span class=secno&gt;3.9.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-strong&quot;&gt;&lt;span class=secno&gt;4.5.5 &lt;/span&gt;The
         &lt;code&gt;strong&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-small&quot;&gt;&lt;span class=secno&gt;3.9.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-small&quot;&gt;&lt;span class=secno&gt;4.5.6 &lt;/span&gt;The
         &lt;code&gt;small&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-mark&quot;&gt;&lt;span class=secno&gt;3.9.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-mark&quot;&gt;&lt;span class=secno&gt;4.5.7 &lt;/span&gt;The
         &lt;code&gt;mark&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dfn&quot;&gt;&lt;span class=secno&gt;3.9.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dfn&quot;&gt;&lt;span class=secno&gt;4.5.8 &lt;/span&gt;The
         &lt;code&gt;dfn&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-abbr&quot;&gt;&lt;span class=secno&gt;3.9.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-abbr&quot;&gt;&lt;span class=secno&gt;4.5.9 &lt;/span&gt;The
         &lt;code&gt;abbr&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-time&quot;&gt;&lt;span class=secno&gt;3.9.10 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-time&quot;&gt;&lt;span class=secno&gt;4.5.10 &lt;/span&gt;The
         &lt;code&gt;time&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-progress&quot;&gt;&lt;span class=secno&gt;3.9.11 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-progress&quot;&gt;&lt;span class=secno&gt;4.5.11 &lt;/span&gt;The
         &lt;code&gt;progress&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-meter&quot;&gt;&lt;span class=secno&gt;3.9.12 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-meter&quot;&gt;&lt;span class=secno&gt;4.5.12 &lt;/span&gt;The
         &lt;code&gt;meter&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-code&quot;&gt;&lt;span class=secno&gt;3.9.13 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-code&quot;&gt;&lt;span class=secno&gt;4.5.13 &lt;/span&gt;The
         &lt;code&gt;code&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-var&quot;&gt;&lt;span class=secno&gt;3.9.14 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-var&quot;&gt;&lt;span class=secno&gt;4.5.14 &lt;/span&gt;The
         &lt;code&gt;var&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-samp&quot;&gt;&lt;span class=secno&gt;3.9.15 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-samp&quot;&gt;&lt;span class=secno&gt;4.5.15 &lt;/span&gt;The
         &lt;code&gt;samp&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-kbd&quot;&gt;&lt;span class=secno&gt;3.9.16 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-kbd&quot;&gt;&lt;span class=secno&gt;4.5.16 &lt;/span&gt;The
         &lt;code&gt;kbd&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-sub&quot;&gt;&lt;span class=secno&gt;3.9.17 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-sub&quot;&gt;&lt;span class=secno&gt;4.5.17 &lt;/span&gt;The
         &lt;code&gt;sub&lt;/code&gt; and &lt;code&gt;sup&lt;/code&gt; elements&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-span&quot;&gt;&lt;span class=secno&gt;3.9.18 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-span&quot;&gt;&lt;span class=secno&gt;4.5.18 &lt;/span&gt;The
         &lt;code&gt;span&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-i&quot;&gt;&lt;span class=secno&gt;3.9.19 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-i&quot;&gt;&lt;span class=secno&gt;4.5.19 &lt;/span&gt;The
         &lt;code&gt;i&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-b&quot;&gt;&lt;span class=secno&gt;3.9.20 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-b&quot;&gt;&lt;span class=secno&gt;4.5.20 &lt;/span&gt;The
         &lt;code&gt;b&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-bdo&quot;&gt;&lt;span class=secno&gt;3.9.21 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-bdo&quot;&gt;&lt;span class=secno&gt;4.5.21 &lt;/span&gt;The
         &lt;code&gt;bdo&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-ruby&quot;&gt;&lt;span class=secno&gt;3.9.22 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-ruby&quot;&gt;&lt;span class=secno&gt;4.5.22 &lt;/span&gt;The
         &lt;code&gt;ruby&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-rt&quot;&gt;&lt;span class=secno&gt;3.9.23 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-rt&quot;&gt;&lt;span class=secno&gt;4.5.23 &lt;/span&gt;The
         &lt;code&gt;rt&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-rp&quot;&gt;&lt;span class=secno&gt;3.9.24 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-rp&quot;&gt;&lt;span class=secno&gt;4.5.24 &lt;/span&gt;The
         &lt;code&gt;rp&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#usage&quot;&gt;&lt;span class=secno&gt;3.9.25 &lt;/span&gt;Usage summary&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#usage&quot;&gt;&lt;span class=secno&gt;4.5.25 &lt;/span&gt;Usage summary&lt;/a&gt;
         
 
-       &lt;li&gt;&lt;a href=&quot;#footnotes&quot;&gt;&lt;span class=secno&gt;3.9.26 &lt;/span&gt;Footnotes&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#footnotes&quot;&gt;&lt;span class=secno&gt;4.5.26 &lt;/span&gt;Footnotes&lt;/a&gt;
         
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#edits&quot;&gt;&lt;span class=secno&gt;3.10 &lt;/span&gt;Edits&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#edits&quot;&gt;&lt;span class=secno&gt;4.6 &lt;/span&gt;Edits&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-ins&quot;&gt;&lt;span class=secno&gt;3.10.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-ins&quot;&gt;&lt;span class=secno&gt;4.6.1 &lt;/span&gt;The
         &lt;code&gt;ins&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-del&quot;&gt;&lt;span class=secno&gt;3.10.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-del&quot;&gt;&lt;span class=secno&gt;4.6.2 &lt;/span&gt;The
         &lt;code&gt;del&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#attributes&quot;&gt;&lt;span class=secno&gt;3.10.3 &lt;/span&gt;Attributes
+       &lt;li&gt;&lt;a href=&quot;#attributes&quot;&gt;&lt;span class=secno&gt;4.6.3 &lt;/span&gt;Attributes
         common to &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#edits0&quot;&gt;&lt;span class=secno&gt;3.10.4 &lt;/span&gt;Edits and
+       &lt;li&gt;&lt;a href=&quot;#edits0&quot;&gt;&lt;span class=secno&gt;4.6.4 &lt;/span&gt;Edits and
         paragraphs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#edits1&quot;&gt;&lt;span class=secno&gt;3.10.5 &lt;/span&gt;Edits and
+       &lt;li&gt;&lt;a href=&quot;#edits1&quot;&gt;&lt;span class=secno&gt;4.6.5 &lt;/span&gt;Edits and
         lists&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#embedded0&quot;&gt;&lt;span class=secno&gt;3.11 &lt;/span&gt;Embedded
+     &lt;li&gt;&lt;a href=&quot;#embedded0&quot;&gt;&lt;span class=secno&gt;4.7 &lt;/span&gt;Embedded
       content&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-figure&quot;&gt;&lt;span class=secno&gt;3.11.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-figure&quot;&gt;&lt;span class=secno&gt;4.7.1 &lt;/span&gt;The
         &lt;code&gt;figure&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-img&quot;&gt;&lt;span class=secno&gt;3.11.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-img&quot;&gt;&lt;span class=secno&gt;4.7.2 &lt;/span&gt;The
         &lt;code&gt;img&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-iframe&quot;&gt;&lt;span class=secno&gt;3.11.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-iframe&quot;&gt;&lt;span class=secno&gt;4.7.3 &lt;/span&gt;The
         &lt;code&gt;iframe&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-embed&quot;&gt;&lt;span class=secno&gt;3.11.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-embed&quot;&gt;&lt;span class=secno&gt;4.7.4 &lt;/span&gt;The
         &lt;code&gt;embed&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-object&quot;&gt;&lt;span class=secno&gt;3.11.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-object&quot;&gt;&lt;span class=secno&gt;4.7.5 &lt;/span&gt;The
         &lt;code&gt;object&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-param&quot;&gt;&lt;span class=secno&gt;3.11.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-param&quot;&gt;&lt;span class=secno&gt;4.7.6 &lt;/span&gt;The
         &lt;code&gt;param&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#video&quot;&gt;&lt;span class=secno&gt;3.11.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#video&quot;&gt;&lt;span class=secno&gt;4.7.7 &lt;/span&gt;The
         &lt;code&gt;video&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#video0&quot;&gt;&lt;span class=secno&gt;3.11.7.1. &lt;/span&gt;Video and
+         &lt;li&gt;&lt;a href=&quot;#video0&quot;&gt;&lt;span class=secno&gt;4.7.7.1. &lt;/span&gt;Video and
           audio codecs for &lt;code&gt;video&lt;/code&gt; elements&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#audio&quot;&gt;&lt;span class=secno&gt;3.11.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#audio&quot;&gt;&lt;span class=secno&gt;4.7.8 &lt;/span&gt;The
         &lt;code&gt;audio&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#audio0&quot;&gt;&lt;span class=secno&gt;3.11.8.1. &lt;/span&gt;Audio
-          codecs for &lt;code&gt;audio&lt;/code&gt; elements&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#audio0&quot;&gt;&lt;span class=secno&gt;4.7.8.1. &lt;/span&gt;Audio codecs
+          for &lt;code&gt;audio&lt;/code&gt; elements&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-source&quot;&gt;&lt;span class=secno&gt;3.11.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-source&quot;&gt;&lt;span class=secno&gt;4.7.9 &lt;/span&gt;The
         &lt;code&gt;source&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#media&quot;&gt;&lt;span class=secno&gt;3.11.10 &lt;/span&gt;Media
+       &lt;li&gt;&lt;a href=&quot;#media&quot;&gt;&lt;span class=secno&gt;4.7.10 &lt;/span&gt;Media
         elements&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#error&quot;&gt;&lt;span class=secno&gt;3.11.10.1. &lt;/span&gt;Error
+         &lt;li&gt;&lt;a href=&quot;#error&quot;&gt;&lt;span class=secno&gt;4.7.10.1. &lt;/span&gt;Error
           codes&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#location&quot;&gt;&lt;span class=secno&gt;3.11.10.2. &lt;/span&gt;Location
+         &lt;li&gt;&lt;a href=&quot;#location&quot;&gt;&lt;span class=secno&gt;4.7.10.2. &lt;/span&gt;Location
           of the media resource&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#network0&quot;&gt;&lt;span class=secno&gt;3.11.10.3. &lt;/span&gt;Network
+         &lt;li&gt;&lt;a href=&quot;#network0&quot;&gt;&lt;span class=secno&gt;4.7.10.3. &lt;/span&gt;Network
           states&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#loading&quot;&gt;&lt;span class=secno&gt;3.11.10.4. &lt;/span&gt;Loading
+         &lt;li&gt;&lt;a href=&quot;#loading&quot;&gt;&lt;span class=secno&gt;4.7.10.4. &lt;/span&gt;Loading
           the media resource&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#offsets&quot;&gt;&lt;span class=secno&gt;3.11.10.5. &lt;/span&gt;Offsets
+         &lt;li&gt;&lt;a href=&quot;#offsets&quot;&gt;&lt;span class=secno&gt;4.7.10.5. &lt;/span&gt;Offsets
           into the media resource&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-ready&quot;&gt;&lt;span class=secno&gt;3.11.10.6. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-ready&quot;&gt;&lt;span class=secno&gt;4.7.10.6. &lt;/span&gt;The
           ready states&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#playing&quot;&gt;&lt;span class=secno&gt;3.11.10.7. &lt;/span&gt;Playing
+         &lt;li&gt;&lt;a href=&quot;#playing&quot;&gt;&lt;span class=secno&gt;4.7.10.7. &lt;/span&gt;Playing
           the media resource&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#seeking&quot;&gt;&lt;span class=secno&gt;3.11.10.8.
+         &lt;li&gt;&lt;a href=&quot;#seeking&quot;&gt;&lt;span class=secno&gt;4.7.10.8.
           &lt;/span&gt;Seeking&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#cue-ranges&quot;&gt;&lt;span class=secno&gt;3.11.10.9. &lt;/span&gt;Cue
+         &lt;li&gt;&lt;a href=&quot;#cue-ranges&quot;&gt;&lt;span class=secno&gt;4.7.10.9. &lt;/span&gt;Cue
           ranges&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#user-interface&quot;&gt;&lt;span class=secno&gt;3.11.10.10.
+         &lt;li&gt;&lt;a href=&quot;#user-interface&quot;&gt;&lt;span class=secno&gt;4.7.10.10.
           &lt;/span&gt;User interface&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#time-ranges&quot;&gt;&lt;span class=secno&gt;3.11.10.11. &lt;/span&gt;Time
+         &lt;li&gt;&lt;a href=&quot;#time-ranges&quot;&gt;&lt;span class=secno&gt;4.7.10.11. &lt;/span&gt;Time
           ranges&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#byte-ranges&quot;&gt;&lt;span class=secno&gt;3.11.10.12. &lt;/span&gt;Byte
+         &lt;li&gt;&lt;a href=&quot;#byte-ranges&quot;&gt;&lt;span class=secno&gt;4.7.10.12. &lt;/span&gt;Byte
           ranges&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#mediaevents&quot;&gt;&lt;span class=secno&gt;3.11.10.13.
-          &lt;/span&gt;Event summary&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#mediaevents&quot;&gt;&lt;span class=secno&gt;4.7.10.13. &lt;/span&gt;Event
+          summary&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#security0&quot;&gt;&lt;span class=secno&gt;3.11.10.14.
+         &lt;li&gt;&lt;a href=&quot;#security0&quot;&gt;&lt;span class=secno&gt;4.7.10.14.
           &lt;/span&gt;Security and privacy considerations&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-canvas&quot;&gt;&lt;span class=secno&gt;3.11.11 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-canvas&quot;&gt;&lt;span class=secno&gt;4.7.11 &lt;/span&gt;The
         &lt;code&gt;canvas&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-2d&quot;&gt;&lt;span class=secno&gt;3.11.11.1. &lt;/span&gt;The 2D
+         &lt;li&gt;&lt;a href=&quot;#the-2d&quot;&gt;&lt;span class=secno&gt;4.7.11.1. &lt;/span&gt;The 2D
           context&lt;/a&gt;
           &lt;ul class=toc&gt;
-           &lt;li&gt;&lt;a href=&quot;#the-canvas0&quot;&gt;&lt;span class=secno&gt;3.11.11.1.1.
+           &lt;li&gt;&lt;a href=&quot;#the-canvas0&quot;&gt;&lt;span class=secno&gt;4.7.11.1.1.
             &lt;/span&gt;The canvas state&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#transformations&quot;&gt;&lt;span class=secno&gt;3.11.11.1.2.
+           &lt;li&gt;&lt;a href=&quot;#transformations&quot;&gt;&lt;span class=secno&gt;4.7.11.1.2.
             &lt;/span&gt;Transformations&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#compositing&quot;&gt;&lt;span class=secno&gt;3.11.11.1.3.
+           &lt;li&gt;&lt;a href=&quot;#compositing&quot;&gt;&lt;span class=secno&gt;4.7.11.1.3.
             &lt;/span&gt;Compositing&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#colors&quot;&gt;&lt;span class=secno&gt;3.11.11.1.4. &lt;/span&gt;Colors
+           &lt;li&gt;&lt;a href=&quot;#colors&quot;&gt;&lt;span class=secno&gt;4.7.11.1.4. &lt;/span&gt;Colors
             and styles&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#line-styles&quot;&gt;&lt;span class=secno&gt;3.11.11.1.5.
+           &lt;li&gt;&lt;a href=&quot;#line-styles&quot;&gt;&lt;span class=secno&gt;4.7.11.1.5.
             &lt;/span&gt;Line styles&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#shadows&quot;&gt;&lt;span class=secno&gt;3.11.11.1.6.
+           &lt;li&gt;&lt;a href=&quot;#shadows&quot;&gt;&lt;span class=secno&gt;4.7.11.1.6.
             &lt;/span&gt;Shadows&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#simple&quot;&gt;&lt;span class=secno&gt;3.11.11.1.7. &lt;/span&gt;Simple
+           &lt;li&gt;&lt;a href=&quot;#simple&quot;&gt;&lt;span class=secno&gt;4.7.11.1.7. &lt;/span&gt;Simple
             shapes (rectangles)&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#complex&quot;&gt;&lt;span class=secno&gt;3.11.11.1.8.
+           &lt;li&gt;&lt;a href=&quot;#complex&quot;&gt;&lt;span class=secno&gt;4.7.11.1.8.
             &lt;/span&gt;Complex shapes (paths)&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#text&quot;&gt;&lt;span class=secno&gt;3.11.11.1.9. &lt;/span&gt;Text&lt;/a&gt;
-            
+           &lt;li&gt;&lt;a href=&quot;#text&quot;&gt;&lt;span class=secno&gt;4.7.11.1.9. &lt;/span&gt;Text&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#images&quot;&gt;&lt;span class=secno&gt;3.11.11.1.10.
+           &lt;li&gt;&lt;a href=&quot;#images&quot;&gt;&lt;span class=secno&gt;4.7.11.1.10.
             &lt;/span&gt;Images&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#pixel&quot;&gt;&lt;span class=secno&gt;3.11.11.1.11. &lt;/span&gt;Pixel
+           &lt;li&gt;&lt;a href=&quot;#pixel&quot;&gt;&lt;span class=secno&gt;4.7.11.1.11. &lt;/span&gt;Pixel
             manipulation&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#drawing&quot;&gt;&lt;span class=secno&gt;3.11.11.1.12.
+           &lt;li&gt;&lt;a href=&quot;#drawing&quot;&gt;&lt;span class=secno&gt;4.7.11.1.12.
             &lt;/span&gt;Drawing model&lt;/a&gt;
           &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#color&quot;&gt;&lt;span class=secno&gt;3.11.11.2. &lt;/span&gt;Color
-          spaces and color correction&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#color&quot;&gt;&lt;span class=secno&gt;4.7.11.2. &lt;/span&gt;Color spaces
+          and color correction&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#security1&quot;&gt;&lt;span class=secno&gt;3.11.11.3.
-          &lt;/span&gt;Security with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#security1&quot;&gt;&lt;span class=secno&gt;4.7.11.3. &lt;/span&gt;Security
+          with &lt;code&gt;canvas&lt;/code&gt; elements&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-map&quot;&gt;&lt;span class=secno&gt;3.11.12 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-map&quot;&gt;&lt;span class=secno&gt;4.7.12 &lt;/span&gt;The
         &lt;code&gt;map&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-area&quot;&gt;&lt;span class=secno&gt;3.11.13 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-area&quot;&gt;&lt;span class=secno&gt;4.7.13 &lt;/span&gt;The
         &lt;code&gt;area&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#image-maps&quot;&gt;&lt;span class=secno&gt;3.11.14 &lt;/span&gt;Image
+       &lt;li&gt;&lt;a href=&quot;#image-maps&quot;&gt;&lt;span class=secno&gt;4.7.14 &lt;/span&gt;Image
         maps&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#mathml&quot;&gt;&lt;span class=secno&gt;3.11.15 &lt;/span&gt;MathML&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#mathml&quot;&gt;&lt;span class=secno&gt;4.7.15 &lt;/span&gt;MathML&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#svg&quot;&gt;&lt;span class=secno&gt;3.11.16 &lt;/span&gt;SVG&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#svg&quot;&gt;&lt;span class=secno&gt;4.7.16 &lt;/span&gt;SVG&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dimension&quot;&gt;&lt;span class=secno&gt;3.11.17 &lt;/span&gt;Dimension
+       &lt;li&gt;&lt;a href=&quot;#dimension&quot;&gt;&lt;span class=secno&gt;4.7.17 &lt;/span&gt;Dimension
         attributes&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#tabular&quot;&gt;&lt;span class=secno&gt;3.12 &lt;/span&gt;Tabular data&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#tabular&quot;&gt;&lt;span class=secno&gt;4.8 &lt;/span&gt;Tabular data&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#table-intro&quot;&gt;&lt;span class=secno&gt;3.12.1
+       &lt;li&gt;&lt;a href=&quot;#table-intro&quot;&gt;&lt;span class=secno&gt;4.8.1
         &lt;/span&gt;Introduction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-table&quot;&gt;&lt;span class=secno&gt;3.12.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-table&quot;&gt;&lt;span class=secno&gt;4.8.2 &lt;/span&gt;The
         &lt;code&gt;table&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-caption&quot;&gt;&lt;span class=secno&gt;3.12.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-caption&quot;&gt;&lt;span class=secno&gt;4.8.3 &lt;/span&gt;The
         &lt;code&gt;caption&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-colgroup&quot;&gt;&lt;span class=secno&gt;3.12.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-colgroup&quot;&gt;&lt;span class=secno&gt;4.8.4 &lt;/span&gt;The
         &lt;code&gt;colgroup&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-col&quot;&gt;&lt;span class=secno&gt;3.12.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-col&quot;&gt;&lt;span class=secno&gt;4.8.5 &lt;/span&gt;The
         &lt;code&gt;col&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-tbody&quot;&gt;&lt;span class=secno&gt;3.12.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-tbody&quot;&gt;&lt;span class=secno&gt;4.8.6 &lt;/span&gt;The
         &lt;code&gt;tbody&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-thead&quot;&gt;&lt;span class=secno&gt;3.12.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-thead&quot;&gt;&lt;span class=secno&gt;4.8.7 &lt;/span&gt;The
         &lt;code&gt;thead&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-tfoot&quot;&gt;&lt;span class=secno&gt;3.12.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-tfoot&quot;&gt;&lt;span class=secno&gt;4.8.8 &lt;/span&gt;The
         &lt;code&gt;tfoot&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-tr&quot;&gt;&lt;span class=secno&gt;3.12.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-tr&quot;&gt;&lt;span class=secno&gt;4.8.9 &lt;/span&gt;The
         &lt;code&gt;tr&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-td&quot;&gt;&lt;span class=secno&gt;3.12.10 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-td&quot;&gt;&lt;span class=secno&gt;4.8.10 &lt;/span&gt;The
         &lt;code&gt;td&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-th&quot;&gt;&lt;span class=secno&gt;3.12.11 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-th&quot;&gt;&lt;span class=secno&gt;4.8.11 &lt;/span&gt;The
         &lt;code&gt;th&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#attributes0&quot;&gt;&lt;span class=secno&gt;3.12.12 &lt;/span&gt;Attributes
+       &lt;li&gt;&lt;a href=&quot;#attributes0&quot;&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;Attributes
         common to &lt;code&gt;td&lt;/code&gt; and &lt;code&gt;th&lt;/code&gt; elements&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#processing&quot;&gt;&lt;span class=secno&gt;3.12.13 &lt;/span&gt;Processing
+       &lt;li&gt;&lt;a href=&quot;#processing&quot;&gt;&lt;span class=secno&gt;4.8.13 &lt;/span&gt;Processing
         model&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#forming&quot;&gt;&lt;span class=secno&gt;3.12.13.1. &lt;/span&gt;Forming a
+         &lt;li&gt;&lt;a href=&quot;#forming&quot;&gt;&lt;span class=secno&gt;4.8.13.1. &lt;/span&gt;Forming a
           table&lt;/a&gt;
 
          &lt;li&gt;&lt;a href=&quot;#header-and-data-cell-semantics&quot;&gt;&lt;span
-          class=secno&gt;3.12.13.2. &lt;/span&gt;Forming relationships between data
+          class=secno&gt;4.8.13.2. &lt;/span&gt;Forming relationships between data
           cells and header cells&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#forms&quot;&gt;&lt;span class=secno&gt;3.13 &lt;/span&gt;Forms&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#forms&quot;&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Forms&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-form&quot;&gt;&lt;span class=secno&gt;3.13.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-form&quot;&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;The
         &lt;code&gt;form&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-fieldset&quot;&gt;&lt;span class=secno&gt;3.13.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-fieldset&quot;&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;The
         &lt;code&gt;fieldset&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-input&quot;&gt;&lt;span class=secno&gt;3.13.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-input&quot;&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;The
         &lt;code&gt;input&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-button&quot;&gt;&lt;span class=secno&gt;3.13.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-button&quot;&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;The
         &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-label&quot;&gt;&lt;span class=secno&gt;3.13.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-label&quot;&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;The
         &lt;code&gt;label&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-select&quot;&gt;&lt;span class=secno&gt;3.13.6 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-select&quot;&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;The
         &lt;code&gt;select&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-datalist&quot;&gt;&lt;span class=secno&gt;3.13.7 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-datalist&quot;&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;The
         &lt;code&gt;datalist&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-optgroup&quot;&gt;&lt;span class=secno&gt;3.13.8 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-optgroup&quot;&gt;&lt;span class=secno&gt;4.9.8 &lt;/span&gt;The
         &lt;code&gt;optgroup&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-option&quot;&gt;&lt;span class=secno&gt;3.13.9 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-option&quot;&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;The
         &lt;code&gt;option&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-textarea&quot;&gt;&lt;span class=secno&gt;3.13.10 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-textarea&quot;&gt;&lt;span class=secno&gt;4.9.10 &lt;/span&gt;The
         &lt;code&gt;textarea&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-output&quot;&gt;&lt;span class=secno&gt;3.13.11 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-output&quot;&gt;&lt;span class=secno&gt;4.9.11 &lt;/span&gt;The
         &lt;code&gt;output&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#processing0&quot;&gt;&lt;span class=secno&gt;3.13.12 &lt;/span&gt;Processing
+       &lt;li&gt;&lt;a href=&quot;#processing0&quot;&gt;&lt;span class=secno&gt;4.9.12 &lt;/span&gt;Processing
         model&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#form-submission&quot;&gt;&lt;span class=secno&gt;3.13.12.1.
+         &lt;li&gt;&lt;a href=&quot;#form-submission&quot;&gt;&lt;span class=secno&gt;4.9.12.1.
           &lt;/span&gt;Form submission&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#scripting0&quot;&gt;&lt;span class=secno&gt;3.14 &lt;/span&gt;Scripting&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#scripting0&quot;&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Scripting&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#script&quot;&gt;&lt;span class=secno&gt;3.14.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#script&quot;&gt;&lt;span class=secno&gt;4.10.1 &lt;/span&gt;The
         &lt;code&gt;script&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#scriptingLanguages&quot;&gt;&lt;span class=secno&gt;3.14.1.1.
+         &lt;li&gt;&lt;a href=&quot;#scriptingLanguages&quot;&gt;&lt;span class=secno&gt;4.10.1.1.
           &lt;/span&gt;Scripting languages&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-noscript&quot;&gt;&lt;span class=secno&gt;3.14.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-noscript&quot;&gt;&lt;span class=secno&gt;4.10.2 &lt;/span&gt;The
         &lt;code&gt;noscript&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-event-source&quot;&gt;&lt;span class=secno&gt;3.14.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-event-source&quot;&gt;&lt;span class=secno&gt;4.10.3 &lt;/span&gt;The
         &lt;code&gt;event-source&lt;/code&gt; element&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#interactive-elements&quot;&gt;&lt;span class=secno&gt;3.15
+     &lt;li&gt;&lt;a href=&quot;#interactive-elements&quot;&gt;&lt;span class=secno&gt;4.11
       &lt;/span&gt;Interactive elements&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-details&quot;&gt;&lt;span class=secno&gt;3.15.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-details&quot;&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;The
         &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#datagrid&quot;&gt;&lt;span class=secno&gt;3.15.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#datagrid&quot;&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;The
         &lt;code&gt;datagrid&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-datagrid&quot;&gt;&lt;span class=secno&gt;3.15.2.1. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-datagrid&quot;&gt;&lt;span class=secno&gt;4.11.2.1. &lt;/span&gt;The
           &lt;code&gt;datagrid&lt;/code&gt; data model&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#how-rows&quot;&gt;&lt;span class=secno&gt;3.15.2.2. &lt;/span&gt;How rows
+         &lt;li&gt;&lt;a href=&quot;#how-rows&quot;&gt;&lt;span class=secno&gt;4.11.2.2. &lt;/span&gt;How rows
           are identified&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-data&quot;&gt;&lt;span class=secno&gt;3.15.2.3. &lt;/span&gt;The data
+         &lt;li&gt;&lt;a href=&quot;#the-data&quot;&gt;&lt;span class=secno&gt;4.11.2.3. &lt;/span&gt;The data
           provider interface&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-default&quot;&gt;&lt;span class=secno&gt;3.15.2.4. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-default&quot;&gt;&lt;span class=secno&gt;4.11.2.4. &lt;/span&gt;The
           default data provider&lt;/a&gt;
           &lt;ul class=toc&gt;
            &lt;li&gt;&lt;a href=&quot;#commonDefaultDataGridMethodDefinitions&quot;&gt;&lt;span
-            class=secno&gt;3.15.2.4.1. &lt;/span&gt;Common default data provider
+            class=secno&gt;4.11.2.4.1. &lt;/span&gt;Common default data provider
             method definitions for cells&lt;/a&gt;
           &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#populating&quot;&gt;&lt;span class=secno&gt;3.15.2.5.
+         &lt;li&gt;&lt;a href=&quot;#populating&quot;&gt;&lt;span class=secno&gt;4.11.2.5.
           &lt;/span&gt;Populating the &lt;code&gt;datagrid&lt;/code&gt; element&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#updating&quot;&gt;&lt;span class=secno&gt;3.15.2.6. &lt;/span&gt;Updating
+         &lt;li&gt;&lt;a href=&quot;#updating&quot;&gt;&lt;span class=secno&gt;4.11.2.6. &lt;/span&gt;Updating
           the &lt;code&gt;datagrid&lt;/code&gt;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#requirements&quot;&gt;&lt;span class=secno&gt;3.15.2.7.
+         &lt;li&gt;&lt;a href=&quot;#requirements&quot;&gt;&lt;span class=secno&gt;4.11.2.7.
           &lt;/span&gt;Requirements for interactive user agents&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-selection&quot;&gt;&lt;span class=secno&gt;3.15.2.8. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-selection&quot;&gt;&lt;span class=secno&gt;4.11.2.8. &lt;/span&gt;The
           selection&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#columns&quot;&gt;&lt;span class=secno&gt;3.15.2.9. &lt;/span&gt;Columns
+         &lt;li&gt;&lt;a href=&quot;#columns&quot;&gt;&lt;span class=secno&gt;4.11.2.9. &lt;/span&gt;Columns
           and captions&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-command&quot;&gt;&lt;span class=secno&gt;3.15.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-command&quot;&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The
         &lt;code&gt;command&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#menus&quot;&gt;&lt;span class=secno&gt;3.15.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#menus&quot;&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The
         &lt;code&gt;menu&lt;/code&gt; element&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#menus-intro&quot;&gt;&lt;span class=secno&gt;3.15.4.1.
+         &lt;li&gt;&lt;a href=&quot;#menus-intro&quot;&gt;&lt;span class=secno&gt;4.11.4.1.
           &lt;/span&gt;Introduction&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#building&quot;&gt;&lt;span class=secno&gt;3.15.4.2. &lt;/span&gt;Building
+         &lt;li&gt;&lt;a href=&quot;#building&quot;&gt;&lt;span class=secno&gt;4.11.4.2. &lt;/span&gt;Building
           menus and tool bars&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#context&quot;&gt;&lt;span class=secno&gt;3.15.4.3. &lt;/span&gt;Context
+         &lt;li&gt;&lt;a href=&quot;#context&quot;&gt;&lt;span class=secno&gt;4.11.4.3. &lt;/span&gt;Context
           menus&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#toolbars&quot;&gt;&lt;span class=secno&gt;3.15.4.4.
+         &lt;li&gt;&lt;a href=&quot;#toolbars&quot;&gt;&lt;span class=secno&gt;4.11.4.4.
           &lt;/span&gt;Toolbars&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#commands&quot;&gt;&lt;span class=secno&gt;3.15.5 &lt;/span&gt;Commands&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#commands&quot;&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#using&quot;&gt;&lt;span class=secno&gt;3.15.5.1. &lt;/span&gt;Using the
+         &lt;li&gt;&lt;a href=&quot;#using&quot;&gt;&lt;span class=secno&gt;4.11.5.1. &lt;/span&gt;Using the
           &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#using0&quot;&gt;&lt;span class=secno&gt;3.15.5.2. &lt;/span&gt;Using the
+         &lt;li&gt;&lt;a href=&quot;#using0&quot;&gt;&lt;span class=secno&gt;4.11.5.2. &lt;/span&gt;Using the
           &lt;code&gt;button&lt;/code&gt; element to define a command&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#using1&quot;&gt;&lt;span class=secno&gt;3.15.5.3. &lt;/span&gt;Using the
+         &lt;li&gt;&lt;a href=&quot;#using1&quot;&gt;&lt;span class=secno&gt;4.11.5.3. &lt;/span&gt;Using the
           &lt;code&gt;input&lt;/code&gt; element to define a command&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#using2&quot;&gt;&lt;span class=secno&gt;3.15.5.4. &lt;/span&gt;Using the
+         &lt;li&gt;&lt;a href=&quot;#using2&quot;&gt;&lt;span class=secno&gt;4.11.5.4. &lt;/span&gt;Using the
           &lt;code&gt;option&lt;/code&gt; element to define a command&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#using3&quot;&gt;&lt;span class=secno&gt;3.15.5.5. &lt;/span&gt;Using the
+         &lt;li&gt;&lt;a href=&quot;#using3&quot;&gt;&lt;span class=secno&gt;4.11.5.5. &lt;/span&gt;Using the
           &lt;code&gt;command&lt;/code&gt; element to define a command&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#datatemplate&quot;&gt;&lt;span class=secno&gt;3.16 &lt;/span&gt;Data
+     &lt;li&gt;&lt;a href=&quot;#datatemplate&quot;&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Data
       Templates&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#introduction0&quot;&gt;&lt;span class=secno&gt;3.16.1
+       &lt;li&gt;&lt;a href=&quot;#introduction0&quot;&gt;&lt;span class=secno&gt;4.12.1
         &lt;/span&gt;Introduction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-datatemplate&quot;&gt;&lt;span class=secno&gt;3.16.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-datatemplate&quot;&gt;&lt;span class=secno&gt;4.12.2 &lt;/span&gt;The
         &lt;code&gt;datatemplate&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-rule&quot;&gt;&lt;span class=secno&gt;3.16.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-rule&quot;&gt;&lt;span class=secno&gt;4.12.3 &lt;/span&gt;The
         &lt;code&gt;rule&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-nest&quot;&gt;&lt;span class=secno&gt;3.16.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-nest&quot;&gt;&lt;span class=secno&gt;4.12.4 &lt;/span&gt;The
         &lt;code&gt;nest&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#global0&quot;&gt;&lt;span class=secno&gt;3.16.5 &lt;/span&gt;Global
+       &lt;li&gt;&lt;a href=&quot;#global0&quot;&gt;&lt;span class=secno&gt;4.12.5 &lt;/span&gt;Global
         attributes for data templates&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#processing1&quot;&gt;&lt;span class=secno&gt;3.16.6 &lt;/span&gt;Processing
+       &lt;li&gt;&lt;a href=&quot;#processing1&quot;&gt;&lt;span class=secno&gt;4.12.6 &lt;/span&gt;Processing
         model&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-originalcontent&quot;&gt;&lt;span class=secno&gt;3.16.6.1.
+         &lt;li&gt;&lt;a href=&quot;#the-originalcontent&quot;&gt;&lt;span class=secno&gt;4.12.6.1.
           &lt;/span&gt;The &lt;code title=dom-originalContent&gt;originalContent&lt;/code&gt;
           DOM attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-template&quot;&gt;&lt;span class=secno&gt;3.16.6.2. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-template&quot;&gt;&lt;span class=secno&gt;4.12.6.2. &lt;/span&gt;The
           &lt;code title=attr-template&gt;template&lt;/code&gt; attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-ref&quot;&gt;&lt;span class=secno&gt;3.16.6.3. &lt;/span&gt;The &lt;code
+         &lt;li&gt;&lt;a href=&quot;#the-ref&quot;&gt;&lt;span class=secno&gt;4.12.6.3. &lt;/span&gt;The &lt;code
           title=attr-ref&gt;ref&lt;/code&gt; attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-nodedatatemplate&quot;&gt;&lt;span class=secno&gt;3.16.6.4.
+         &lt;li&gt;&lt;a href=&quot;#the-nodedatatemplate&quot;&gt;&lt;span class=secno&gt;4.12.6.4.
           &lt;/span&gt;The &lt;code&gt;NodeDataTemplate&lt;/code&gt; interface&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#mutations&quot;&gt;&lt;span class=secno&gt;3.16.6.5.
+         &lt;li&gt;&lt;a href=&quot;#mutations&quot;&gt;&lt;span class=secno&gt;4.12.6.5.
           &lt;/span&gt;Mutations&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#updating0&quot;&gt;&lt;span class=secno&gt;3.16.6.6. &lt;/span&gt;Updating
+         &lt;li&gt;&lt;a href=&quot;#updating0&quot;&gt;&lt;span class=secno&gt;4.12.6.6. &lt;/span&gt;Updating
           the generated content&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#miscellaneous&quot;&gt;&lt;span class=secno&gt;3.17 &lt;/span&gt;Miscellaneous
+     &lt;li&gt;&lt;a href=&quot;#miscellaneous&quot;&gt;&lt;span class=secno&gt;4.13 &lt;/span&gt;Miscellaneous
       elements&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-legend&quot;&gt;&lt;span class=secno&gt;3.17.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-legend&quot;&gt;&lt;span class=secno&gt;4.13.1 &lt;/span&gt;The
         &lt;code&gt;legend&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-div&quot;&gt;&lt;span class=secno&gt;3.17.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-div&quot;&gt;&lt;span class=secno&gt;4.13.2 &lt;/span&gt;The
         &lt;code&gt;div&lt;/code&gt; element&lt;/a&gt;
       &lt;/ul&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#web-browsers&quot;&gt;&lt;span class=secno&gt;4. &lt;/span&gt;Web browsers&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#browsers&quot;&gt;&lt;span class=secno&gt;5. &lt;/span&gt;Web browsers&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#windows&quot;&gt;&lt;span class=secno&gt;4.1 &lt;/span&gt;Browsing
+     &lt;li&gt;&lt;a href=&quot;#windows&quot;&gt;&lt;span class=secno&gt;5.1 &lt;/span&gt;Browsing
       contexts&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#nested&quot;&gt;&lt;span class=secno&gt;4.1.1 &lt;/span&gt;Nested browsing
+       &lt;li&gt;&lt;a href=&quot;#nested&quot;&gt;&lt;span class=secno&gt;5.1.1 &lt;/span&gt;Nested browsing
         contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#auxiliary&quot;&gt;&lt;span class=secno&gt;4.1.2 &lt;/span&gt;Auxiliary
+       &lt;li&gt;&lt;a href=&quot;#auxiliary&quot;&gt;&lt;span class=secno&gt;5.1.2 &lt;/span&gt;Auxiliary
         browsing contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#secondary&quot;&gt;&lt;span class=secno&gt;4.1.3 &lt;/span&gt;Secondary
+       &lt;li&gt;&lt;a href=&quot;#secondary&quot;&gt;&lt;span class=secno&gt;5.1.3 &lt;/span&gt;Secondary
         browsing contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#security2&quot;&gt;&lt;span class=secno&gt;4.1.4 &lt;/span&gt;Security&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#security2&quot;&gt;&lt;span class=secno&gt;5.1.4 &lt;/span&gt;Security&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#threads&quot;&gt;&lt;span class=secno&gt;4.1.5 &lt;/span&gt;Threads&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#threads&quot;&gt;&lt;span class=secno&gt;5.1.5 &lt;/span&gt;Threads&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#browsing&quot;&gt;&lt;span class=secno&gt;4.1.6 &lt;/span&gt;Browsing
+       &lt;li&gt;&lt;a href=&quot;#browsing&quot;&gt;&lt;span class=secno&gt;5.1.6 &lt;/span&gt;Browsing
         context names&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#the-default0&quot;&gt;&lt;span class=secno&gt;4.2 &lt;/span&gt;The default
+     &lt;li&gt;&lt;a href=&quot;#the-default0&quot;&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The default
       view&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#security3&quot;&gt;&lt;span class=secno&gt;4.2.1 &lt;/span&gt;Security&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#security3&quot;&gt;&lt;span class=secno&gt;5.2.1 &lt;/span&gt;Security&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#constructors&quot;&gt;&lt;span class=secno&gt;4.2.2
+       &lt;li&gt;&lt;a href=&quot;#constructors&quot;&gt;&lt;span class=secno&gt;5.2.2
         &lt;/span&gt;Constructors&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#apis-for&quot;&gt;&lt;span class=secno&gt;4.2.3 &lt;/span&gt;APIs for
+       &lt;li&gt;&lt;a href=&quot;#apis-for&quot;&gt;&lt;span class=secno&gt;5.2.3 &lt;/span&gt;APIs for
         creating and navigating browsing contexts by name&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#accessing&quot;&gt;&lt;span class=secno&gt;4.2.4 &lt;/span&gt;Accessing
+       &lt;li&gt;&lt;a href=&quot;#accessing&quot;&gt;&lt;span class=secno&gt;5.2.4 &lt;/span&gt;Accessing
         other browsing contexts&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#origin&quot;&gt;&lt;span class=secno&gt;4.3 &lt;/span&gt;Origin&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#origin&quot;&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Origin&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#relaxing&quot;&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;Relaxing the
+       &lt;li&gt;&lt;a href=&quot;#relaxing&quot;&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Relaxing the
         same-origin restriction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-string&quot;&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The string
+       &lt;li&gt;&lt;a href=&quot;#the-string&quot;&gt;&lt;span class=secno&gt;5.3.2 &lt;/span&gt;The string
         representing the script's domain in IDNA format&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#scripting&quot;&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Scripting&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#scripting&quot;&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scripting&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#script0&quot;&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Script execution
+       &lt;li&gt;&lt;a href=&quot;#script0&quot;&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Script execution
         contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#security4&quot;&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Security
+       &lt;li&gt;&lt;a href=&quot;#security4&quot;&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;Security
         exceptions&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#javascript-protocol&quot;&gt;&lt;span class=secno&gt;4.4.3 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#javascript-protocol&quot;&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;The
         &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#events&quot;&gt;&lt;span class=secno&gt;4.4.4 &lt;/span&gt;Events&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#events&quot;&gt;&lt;span class=secno&gt;5.4.4 &lt;/span&gt;Events&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#event-handler-attributes&quot;&gt;&lt;span class=secno&gt;4.4.4.1.
+         &lt;li&gt;&lt;a href=&quot;#event-handler-attributes&quot;&gt;&lt;span class=secno&gt;5.4.4.1.
           &lt;/span&gt;Event handler attributes&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#event&quot;&gt;&lt;span class=secno&gt;4.4.4.2. &lt;/span&gt;Event
+         &lt;li&gt;&lt;a href=&quot;#event&quot;&gt;&lt;span class=secno&gt;5.4.4.2. &lt;/span&gt;Event
           firing&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#events0&quot;&gt;&lt;span class=secno&gt;4.4.4.3. &lt;/span&gt;Events and
+         &lt;li&gt;&lt;a href=&quot;#events0&quot;&gt;&lt;span class=secno&gt;5.4.4.3. &lt;/span&gt;Events and
           the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#runtime-script-errors&quot;&gt;&lt;span class=secno&gt;4.4.4.4.
+         &lt;li&gt;&lt;a href=&quot;#runtime-script-errors&quot;&gt;&lt;span class=secno&gt;5.4.4.4.
           &lt;/span&gt;Runtime script errors&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#user-prompts&quot;&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;User
+     &lt;li&gt;&lt;a href=&quot;#user-prompts&quot;&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;User
       prompts&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#simple0&quot;&gt;&lt;span class=secno&gt;4.5.1 &lt;/span&gt;Simple
+       &lt;li&gt;&lt;a href=&quot;#simple0&quot;&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Simple
         dialogs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#printing&quot;&gt;&lt;span class=secno&gt;4.5.2 &lt;/span&gt;Printing&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#printing&quot;&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Printing&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dialogs&quot;&gt;&lt;span class=secno&gt;4.5.3 &lt;/span&gt;Dialogs
+       &lt;li&gt;&lt;a href=&quot;#dialogs&quot;&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Dialogs
         implemented using separate documents&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#notifications&quot;&gt;&lt;span class=secno&gt;4.5.4
+       &lt;li&gt;&lt;a href=&quot;#notifications&quot;&gt;&lt;span class=secno&gt;5.5.4
         &lt;/span&gt;Notifications&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#browser&quot;&gt;&lt;span class=secno&gt;4.6 &lt;/span&gt;Browser state&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#browser&quot;&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;Browser state&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#custom-handlers&quot;&gt;&lt;span class=secno&gt;4.6.1 &lt;/span&gt;Custom
+       &lt;li&gt;&lt;a href=&quot;#custom-handlers&quot;&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Custom
         protocol and content handlers&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#security5&quot;&gt;&lt;span class=secno&gt;4.6.1.1. &lt;/span&gt;Security
+         &lt;li&gt;&lt;a href=&quot;#security5&quot;&gt;&lt;span class=secno&gt;5.6.1.1. &lt;/span&gt;Security
           and privacy&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sample-handler-impl&quot;&gt;&lt;span class=secno&gt;4.6.1.2.
+         &lt;li&gt;&lt;a href=&quot;#sample-handler-impl&quot;&gt;&lt;span class=secno&gt;5.6.1.2.
           &lt;/span&gt;Sample user interface&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#offline&quot;&gt;&lt;span class=secno&gt;4.7 &lt;/span&gt;Offline Web
+     &lt;li&gt;&lt;a href=&quot;#offline&quot;&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;Offline Web
       applications&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#introduction1&quot;&gt;&lt;span class=secno&gt;4.7.1
+       &lt;li&gt;&lt;a href=&quot;#introduction1&quot;&gt;&lt;span class=secno&gt;5.7.1
         &lt;/span&gt;Introduction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#appcache&quot;&gt;&lt;span class=secno&gt;4.7.2 &lt;/span&gt;Application
+       &lt;li&gt;&lt;a href=&quot;#appcache&quot;&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Application
         caches&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#manifests&quot;&gt;&lt;span class=secno&gt;4.7.3 &lt;/span&gt;The cache
+       &lt;li&gt;&lt;a href=&quot;#manifests&quot;&gt;&lt;span class=secno&gt;5.7.3 &lt;/span&gt;The cache
         manifest syntax&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#writing&quot;&gt;&lt;span class=secno&gt;4.7.3.1. &lt;/span&gt;Writing
+         &lt;li&gt;&lt;a href=&quot;#writing&quot;&gt;&lt;span class=secno&gt;5.7.3.1. &lt;/span&gt;Writing
           cache manifests&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;4.7.3.2. &lt;/span&gt;Parsing
+         &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing
           cache manifests&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#updating1&quot;&gt;&lt;span class=secno&gt;4.7.4 &lt;/span&gt;Updating an
+       &lt;li&gt;&lt;a href=&quot;#updating1&quot;&gt;&lt;span class=secno&gt;5.7.4 &lt;/span&gt;Updating an
         application cache&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#processing2&quot;&gt;&lt;span class=secno&gt;4.7.5 &lt;/span&gt;Processing
+       &lt;li&gt;&lt;a href=&quot;#processing2&quot;&gt;&lt;span class=secno&gt;5.7.5 &lt;/span&gt;Processing
         model&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#changes&quot;&gt;&lt;span class=secno&gt;4.7.5.1. &lt;/span&gt;Changes to
+         &lt;li&gt;&lt;a href=&quot;#changes&quot;&gt;&lt;span class=secno&gt;5.7.5.1. &lt;/span&gt;Changes to
           the networking model&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#application&quot;&gt;&lt;span class=secno&gt;4.7.6 &lt;/span&gt;Application
+       &lt;li&gt;&lt;a href=&quot;#application&quot;&gt;&lt;span class=secno&gt;5.7.6 &lt;/span&gt;Application
         cache API&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#browser0&quot;&gt;&lt;span class=secno&gt;4.7.7 &lt;/span&gt;Browser
+       &lt;li&gt;&lt;a href=&quot;#browser0&quot;&gt;&lt;span class=secno&gt;5.7.7 &lt;/span&gt;Browser
         state&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#history&quot;&gt;&lt;span class=secno&gt;4.8 &lt;/span&gt;Session history and
+     &lt;li&gt;&lt;a href=&quot;#history&quot;&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Session history and
       navigation&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-session&quot;&gt;&lt;span class=secno&gt;4.8.1 &lt;/span&gt;The session
+       &lt;li&gt;&lt;a href=&quot;#the-session&quot;&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;The session
         history of browsing contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-history&quot;&gt;&lt;span class=secno&gt;4.8.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-history&quot;&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The
         &lt;code&gt;History&lt;/code&gt; interface&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#activating&quot;&gt;&lt;span class=secno&gt;4.8.3 &lt;/span&gt;Activating
+       &lt;li&gt;&lt;a href=&quot;#activating&quot;&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;Activating
         state object entries&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-location&quot;&gt;&lt;span class=secno&gt;4.8.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-location&quot;&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;The
         &lt;code&gt;Location&lt;/code&gt; interface&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#security6&quot;&gt;&lt;span class=secno&gt;4.8.4.1.
+         &lt;li&gt;&lt;a href=&quot;#security6&quot;&gt;&lt;span class=secno&gt;5.8.4.1.
           &lt;/span&gt;Security&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#history-notes&quot;&gt;&lt;span class=secno&gt;4.8.5
+       &lt;li&gt;&lt;a href=&quot;#history-notes&quot;&gt;&lt;span class=secno&gt;5.8.5
         &lt;/span&gt;Implementation notes for session history&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#browsing0&quot;&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Browsing the
+     &lt;li&gt;&lt;a href=&quot;#browsing0&quot;&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Browsing the
       Web&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;Navigating
+       &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;Navigating
         across documents&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;Page load
         processing model for HTML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;Page load
         processing model for XML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;Page load
         processing model for text files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;Page load
         processing model for images&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;5.9.6 &lt;/span&gt;Page load
         processing model for content that uses plugins&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-ua-inline&quot;&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-ua-inline&quot;&gt;&lt;span class=secno&gt;5.9.7 &lt;/span&gt;Page load
         processing model for inline content that doesn't have a DOM&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;4.9.8
+       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;5.9.8
         &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#history0&quot;&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;History
+       &lt;li&gt;&lt;a href=&quot;#history0&quot;&gt;&lt;span class=secno&gt;5.9.9 &lt;/span&gt;History
         traversal&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;4.10
-      &lt;/span&gt;Determining the type of a new resource in a browsing context&lt;/a&gt;
-      
-      &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;4.10.1
-        &lt;/span&gt;Content-Type sniffing: text or binary&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;4.10.2
-        &lt;/span&gt;Content-Type sniffing: unknown type&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;4.10.3
-        &lt;/span&gt;Content-Type sniffing: image&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;4.10.4
-        &lt;/span&gt;Content-Type sniffing: feed or HTML&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;4.10.5
-        &lt;/span&gt;Content-Type metadata&lt;/a&gt;
-      &lt;/ul&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#structured&quot;&gt;&lt;span class=secno&gt;4.11 &lt;/span&gt;Structured
+     &lt;li&gt;&lt;a href=&quot;#structured&quot;&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Structured
       client-side storage&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#storage&quot;&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;Storing
+       &lt;li&gt;&lt;a href=&quot;#storage&quot;&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Storing
         name/value pairs&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#introduction2&quot;&gt;&lt;span class=secno&gt;4.11.1.1.
+         &lt;li&gt;&lt;a href=&quot;#introduction2&quot;&gt;&lt;span class=secno&gt;5.10.1.1.
           &lt;/span&gt;Introduction&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-storage&quot;&gt;&lt;span class=secno&gt;4.11.1.2. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-storage&quot;&gt;&lt;span class=secno&gt;5.10.1.2. &lt;/span&gt;The
           &lt;code&gt;Storage&lt;/code&gt; interface&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-sessionstorage&quot;&gt;&lt;span class=secno&gt;4.11.1.3.
+         &lt;li&gt;&lt;a href=&quot;#the-sessionstorage&quot;&gt;&lt;span class=secno&gt;5.10.1.3.
           &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;sessionStorage&lt;/code&gt;
           attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-localstorage&quot;&gt;&lt;span class=secno&gt;4.11.1.4.
+         &lt;li&gt;&lt;a href=&quot;#the-localstorage&quot;&gt;&lt;span class=secno&gt;5.10.1.4.
           &lt;/span&gt;The &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt;
           attribute&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-storage0&quot;&gt;&lt;span class=secno&gt;4.11.1.5. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-storage0&quot;&gt;&lt;span class=secno&gt;5.10.1.5. &lt;/span&gt;The
           &lt;code title=event-storage&gt;storage&lt;/code&gt; event&lt;/a&gt;
           &lt;ul class=toc&gt;
-           &lt;li&gt;&lt;a href=&quot;#event0&quot;&gt;&lt;span class=secno&gt;4.11.1.5.1. &lt;/span&gt;Event
+           &lt;li&gt;&lt;a href=&quot;#event0&quot;&gt;&lt;span class=secno&gt;5.10.1.5.1. &lt;/span&gt;Event
             definition&lt;/a&gt;
           &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#threads0&quot;&gt;&lt;span class=secno&gt;4.11.1.6.
+         &lt;li&gt;&lt;a href=&quot;#threads0&quot;&gt;&lt;span class=secno&gt;5.10.1.6.
           &lt;/span&gt;Threads&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#sql&quot;&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;Database
+       &lt;li&gt;&lt;a href=&quot;#sql&quot;&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;Database
         storage&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#introduction3&quot;&gt;&lt;span class=secno&gt;4.11.2.1.
+         &lt;li&gt;&lt;a href=&quot;#introduction3&quot;&gt;&lt;span class=secno&gt;5.10.2.1.
           &lt;/span&gt;Introduction&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#databases&quot;&gt;&lt;span class=secno&gt;4.11.2.2.
+         &lt;li&gt;&lt;a href=&quot;#databases&quot;&gt;&lt;span class=secno&gt;5.10.2.2.
           &lt;/span&gt;Databases&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#executing&quot;&gt;&lt;span class=secno&gt;4.11.2.3.
+         &lt;li&gt;&lt;a href=&quot;#executing&quot;&gt;&lt;span class=secno&gt;5.10.2.3.
           &lt;/span&gt;Executing SQL statements&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#database&quot;&gt;&lt;span class=secno&gt;4.11.2.4. &lt;/span&gt;Database
+         &lt;li&gt;&lt;a href=&quot;#database&quot;&gt;&lt;span class=secno&gt;5.10.2.4. &lt;/span&gt;Database
           query results&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#errors&quot;&gt;&lt;span class=secno&gt;4.11.2.5. &lt;/span&gt;Errors&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#errors&quot;&gt;&lt;span class=secno&gt;5.10.2.5. &lt;/span&gt;Errors&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#processing3&quot;&gt;&lt;span class=secno&gt;4.11.2.6.
+         &lt;li&gt;&lt;a href=&quot;#processing3&quot;&gt;&lt;span class=secno&gt;5.10.2.6.
           &lt;/span&gt;Processing model&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#disk-space&quot;&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;Disk
+       &lt;li&gt;&lt;a href=&quot;#disk-space&quot;&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;Disk
         space&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#privacy&quot;&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;Privacy&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#privacy&quot;&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;Privacy&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#user-tracking&quot;&gt;&lt;span class=secno&gt;4.11.4.1. &lt;/span&gt;User
+         &lt;li&gt;&lt;a href=&quot;#user-tracking&quot;&gt;&lt;span class=secno&gt;5.10.4.1. &lt;/span&gt;User
           tracking&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#cookie&quot;&gt;&lt;span class=secno&gt;4.11.4.2. &lt;/span&gt;Cookie
+         &lt;li&gt;&lt;a href=&quot;#cookie&quot;&gt;&lt;span class=secno&gt;5.10.4.2. &lt;/span&gt;Cookie
           resurrection&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#security7&quot;&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Security&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#security7&quot;&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;Security&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#dns-spoofing&quot;&gt;&lt;span class=secno&gt;4.11.5.1. &lt;/span&gt;DNS
+         &lt;li&gt;&lt;a href=&quot;#dns-spoofing&quot;&gt;&lt;span class=secno&gt;5.10.5.1. &lt;/span&gt;DNS
           spoofing attacks&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#cross-directory&quot;&gt;&lt;span class=secno&gt;4.11.5.2.
+         &lt;li&gt;&lt;a href=&quot;#cross-directory&quot;&gt;&lt;span class=secno&gt;5.10.5.2.
           &lt;/span&gt;Cross-directory attacks&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#implementation&quot;&gt;&lt;span class=secno&gt;4.11.5.3.
+         &lt;li&gt;&lt;a href=&quot;#implementation&quot;&gt;&lt;span class=secno&gt;5.10.5.3.
           &lt;/span&gt;Implementation risks&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sql-and&quot;&gt;&lt;span class=secno&gt;4.11.5.4. &lt;/span&gt;SQL and
+         &lt;li&gt;&lt;a href=&quot;#sql-and&quot;&gt;&lt;span class=secno&gt;5.10.5.4. &lt;/span&gt;SQL and
           user agents&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sql-injection&quot;&gt;&lt;span class=secno&gt;4.11.5.5. &lt;/span&gt;SQL
+         &lt;li&gt;&lt;a href=&quot;#sql-injection&quot;&gt;&lt;span class=secno&gt;5.10.5.5. &lt;/span&gt;SQL
           injection&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#links&quot;&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#links&quot;&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#hyperlink&quot;&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Hyperlink
+       &lt;li&gt;&lt;a href=&quot;#hyperlink&quot;&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink
         elements&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#following&quot;&gt;&lt;span class=secno&gt;4.12.2 &lt;/span&gt;Following
+       &lt;li&gt;&lt;a href=&quot;#following&quot;&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Following
         hyperlinks&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#hyperlink0&quot;&gt;&lt;span class=secno&gt;4.12.2.1.
+         &lt;li&gt;&lt;a href=&quot;#hyperlink0&quot;&gt;&lt;span class=secno&gt;5.11.2.1.
           &lt;/span&gt;Hyperlink auditing&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#linkTypes&quot;&gt;&lt;span class=secno&gt;4.12.3 &lt;/span&gt;Link
+       &lt;li&gt;&lt;a href=&quot;#linkTypes&quot;&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link
         types&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#link-type&quot;&gt;&lt;span class=secno&gt;4.12.3.1. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type&quot;&gt;&lt;span class=secno&gt;5.11.3.1. &lt;/span&gt;Link
           type &quot;&lt;code&gt;alternate&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type0&quot;&gt;&lt;span class=secno&gt;4.12.3.2. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type0&quot;&gt;&lt;span class=secno&gt;5.11.3.2. &lt;/span&gt;Link
           type &quot;&lt;code&gt;archives&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type1&quot;&gt;&lt;span class=secno&gt;4.12.3.3. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type1&quot;&gt;&lt;span class=secno&gt;5.11.3.3. &lt;/span&gt;Link
           type &quot;&lt;code&gt;author&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type2&quot;&gt;&lt;span class=secno&gt;4.12.3.4. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type2&quot;&gt;&lt;span class=secno&gt;5.11.3.4. &lt;/span&gt;Link
           type &quot;&lt;code&gt;bookmark&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type3&quot;&gt;&lt;span class=secno&gt;4.12.3.5. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type3&quot;&gt;&lt;span class=secno&gt;5.11.3.5. &lt;/span&gt;Link
           type &quot;&lt;code&gt;external&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type4&quot;&gt;&lt;span class=secno&gt;4.12.3.6. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type4&quot;&gt;&lt;span class=secno&gt;5.11.3.6. &lt;/span&gt;Link
           type &quot;&lt;code&gt;feed&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type5&quot;&gt;&lt;span class=secno&gt;4.12.3.7. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type5&quot;&gt;&lt;span class=secno&gt;5.11.3.7. &lt;/span&gt;Link
           type &quot;&lt;code&gt;help&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#rel-icon&quot;&gt;&lt;span class=secno&gt;4.12.3.8. &lt;/span&gt;Link type
+         &lt;li&gt;&lt;a href=&quot;#rel-icon&quot;&gt;&lt;span class=secno&gt;5.11.3.8. &lt;/span&gt;Link type
           &quot;&lt;code&gt;icon&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type6&quot;&gt;&lt;span class=secno&gt;4.12.3.9. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type6&quot;&gt;&lt;span class=secno&gt;5.11.3.9. &lt;/span&gt;Link
           type &quot;&lt;code&gt;license&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type7&quot;&gt;&lt;span class=secno&gt;4.12.3.10. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type7&quot;&gt;&lt;span class=secno&gt;5.11.3.10. &lt;/span&gt;Link
           type &quot;&lt;code&gt;nofollow&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type8&quot;&gt;&lt;span class=secno&gt;4.12.3.11. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type8&quot;&gt;&lt;span class=secno&gt;5.11.3.11. &lt;/span&gt;Link
           type &quot;&lt;code&gt;noreferrer&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type9&quot;&gt;&lt;span class=secno&gt;4.12.3.12. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type9&quot;&gt;&lt;span class=secno&gt;5.11.3.12. &lt;/span&gt;Link
           type &quot;&lt;code&gt;pingback&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type10&quot;&gt;&lt;span class=secno&gt;4.12.3.13. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type10&quot;&gt;&lt;span class=secno&gt;5.11.3.13. &lt;/span&gt;Link
           type &quot;&lt;code&gt;prefetch&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type11&quot;&gt;&lt;span class=secno&gt;4.12.3.14. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type11&quot;&gt;&lt;span class=secno&gt;5.11.3.14. &lt;/span&gt;Link
           type &quot;&lt;code&gt;search&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type12&quot;&gt;&lt;span class=secno&gt;4.12.3.15. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type12&quot;&gt;&lt;span class=secno&gt;5.11.3.15. &lt;/span&gt;Link
           type &quot;&lt;code&gt;stylesheet&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type13&quot;&gt;&lt;span class=secno&gt;4.12.3.16. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type13&quot;&gt;&lt;span class=secno&gt;5.11.3.16. &lt;/span&gt;Link
           type &quot;&lt;code&gt;sidebar&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#link-type14&quot;&gt;&lt;span class=secno&gt;4.12.3.17. &lt;/span&gt;Link
+         &lt;li&gt;&lt;a href=&quot;#link-type14&quot;&gt;&lt;span class=secno&gt;5.11.3.17. &lt;/span&gt;Link
           type &quot;&lt;code&gt;tag&lt;/code&gt;&quot;&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#hierarchical&quot;&gt;&lt;span class=secno&gt;4.12.3.18.
+         &lt;li&gt;&lt;a href=&quot;#hierarchical&quot;&gt;&lt;span class=secno&gt;5.11.3.18.
           &lt;/span&gt;Hierarchical link types&lt;/a&gt;
           &lt;ul class=toc&gt;
-           &lt;li&gt;&lt;a href=&quot;#link-type15&quot;&gt;&lt;span class=secno&gt;4.12.3.18.1.
+           &lt;li&gt;&lt;a href=&quot;#link-type15&quot;&gt;&lt;span class=secno&gt;5.11.3.18.1.
             &lt;/span&gt;Link type &quot;&lt;code&gt;index&lt;/code&gt;&quot;&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#link-type16&quot;&gt;&lt;span class=secno&gt;4.12.3.18.2.
+           &lt;li&gt;&lt;a href=&quot;#link-type16&quot;&gt;&lt;span class=secno&gt;5.11.3.18.2.
             &lt;/span&gt;Link type &quot;&lt;code&gt;up&lt;/code&gt;&quot;&lt;/a&gt;
           &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sequential&quot;&gt;&lt;span class=secno&gt;4.12.3.19.
+         &lt;li&gt;&lt;a href=&quot;#sequential&quot;&gt;&lt;span class=secno&gt;5.11.3.19.
           &lt;/span&gt;Sequential link types&lt;/a&gt;
           &lt;ul class=toc&gt;
-           &lt;li&gt;&lt;a href=&quot;#link-type17&quot;&gt;&lt;span class=secno&gt;4.12.3.19.1.
+           &lt;li&gt;&lt;a href=&quot;#link-type17&quot;&gt;&lt;span class=secno&gt;5.11.3.19.1.
             &lt;/span&gt;Link type &quot;&lt;code&gt;first&lt;/code&gt;&quot;&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#link-type18&quot;&gt;&lt;span class=secno&gt;4.12.3.19.2.
+           &lt;li&gt;&lt;a href=&quot;#link-type18&quot;&gt;&lt;span class=secno&gt;5.11.3.19.2.
             &lt;/span&gt;Link type &quot;&lt;code&gt;last&lt;/code&gt;&quot;&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#link-type19&quot;&gt;&lt;span class=secno&gt;4.12.3.19.3.
+           &lt;li&gt;&lt;a href=&quot;#link-type19&quot;&gt;&lt;span class=secno&gt;5.11.3.19.3.
             &lt;/span&gt;Link type &quot;&lt;code&gt;next&lt;/code&gt;&quot;&lt;/a&gt;
 
-           &lt;li&gt;&lt;a href=&quot;#link-type20&quot;&gt;&lt;span class=secno&gt;4.12.3.19.4.
+           &lt;li&gt;&lt;a href=&quot;#link-type20&quot;&gt;&lt;span class=secno&gt;5.11.3.19.4.
             &lt;/span&gt;Link type &quot;&lt;code&gt;prev&lt;/code&gt;&quot;&lt;/a&gt;
           &lt;/ul&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#other0&quot;&gt;&lt;span class=secno&gt;4.12.3.20. &lt;/span&gt;Other link
+         &lt;li&gt;&lt;a href=&quot;#other0&quot;&gt;&lt;span class=secno&gt;5.11.3.20. &lt;/span&gt;Other link
           types&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;4.13 &lt;/span&gt;Interfaces for
-      URI manipulation&lt;/a&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#editing&quot;&gt;&lt;span class=secno&gt;5. &lt;/span&gt;User Interaction&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#editing&quot;&gt;&lt;span class=secno&gt;6. &lt;/span&gt;User Interaction&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#editing-intro&quot;&gt;&lt;span class=secno&gt;5.1
+     &lt;li&gt;&lt;a href=&quot;#editing-intro&quot;&gt;&lt;span class=secno&gt;6.1
       &lt;/span&gt;Introduction&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#the-irrelevant&quot;&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The
+     &lt;li&gt;&lt;a href=&quot;#the-irrelevant&quot;&gt;&lt;span class=secno&gt;6.2 &lt;/span&gt;The
       &lt;code&gt;irrelevant&lt;/code&gt; attribute&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#activation&quot;&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Activation&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#activation&quot;&gt;&lt;span class=secno&gt;6.3 &lt;/span&gt;Activation&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#scrolling&quot;&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scrolling elements
+     &lt;li&gt;&lt;a href=&quot;#scrolling&quot;&gt;&lt;span class=secno&gt;6.4 &lt;/span&gt;Scrolling elements
       into view&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#focus&quot;&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;Focus&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#focus&quot;&gt;&lt;span class=secno&gt;6.5 &lt;/span&gt;Focus&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#focus-management&quot;&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Focus
+       &lt;li&gt;&lt;a href=&quot;#focus-management&quot;&gt;&lt;span class=secno&gt;6.5.1 &lt;/span&gt;Focus
         management&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#sequential0&quot;&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Sequential
+       &lt;li&gt;&lt;a href=&quot;#sequential0&quot;&gt;&lt;span class=secno&gt;6.5.2 &lt;/span&gt;Sequential
         focus navigation&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#selection&quot;&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;The text selection
+     &lt;li&gt;&lt;a href=&quot;#selection&quot;&gt;&lt;span class=secno&gt;6.6 &lt;/span&gt;The text selection
       APIs&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#documentSelection&quot;&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;APIs
+       &lt;li&gt;&lt;a href=&quot;#documentSelection&quot;&gt;&lt;span class=secno&gt;6.6.1 &lt;/span&gt;APIs
         for the browsing context selection&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#textFieldSelection&quot;&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;APIs
+       &lt;li&gt;&lt;a href=&quot;#textFieldSelection&quot;&gt;&lt;span class=secno&gt;6.6.2 &lt;/span&gt;APIs
         for the text field selections&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#contenteditable&quot;&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;The &lt;code
+     &lt;li&gt;&lt;a href=&quot;#contenteditable&quot;&gt;&lt;span class=secno&gt;6.7 &lt;/span&gt;The &lt;code
       title=attr-contenteditable&gt;contenteditable&lt;/code&gt; attribute&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#user-editing&quot;&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;User
+       &lt;li&gt;&lt;a href=&quot;#user-editing&quot;&gt;&lt;span class=secno&gt;6.7.1 &lt;/span&gt;User
         editing actions&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#making&quot;&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Making entire
+       &lt;li&gt;&lt;a href=&quot;#making&quot;&gt;&lt;span class=secno&gt;6.7.2 &lt;/span&gt;Making entire
         documents editable&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#dnd&quot;&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Drag and drop&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#dnd&quot;&gt;&lt;span class=secno&gt;6.8 &lt;/span&gt;Drag and drop&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#introduction4&quot;&gt;&lt;span class=secno&gt;5.8.1
+       &lt;li&gt;&lt;a href=&quot;#introduction4&quot;&gt;&lt;span class=secno&gt;6.8.1
         &lt;/span&gt;Introduction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-dragevent&quot;&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-dragevent&quot;&gt;&lt;span class=secno&gt;6.8.2 &lt;/span&gt;The
         &lt;code&gt;DragEvent&lt;/code&gt; and &lt;code&gt;DataTransfer&lt;/code&gt; interfaces&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#events1&quot;&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;Events fired
+       &lt;li&gt;&lt;a href=&quot;#events1&quot;&gt;&lt;span class=secno&gt;6.8.3 &lt;/span&gt;Events fired
         during a drag-and-drop action&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#drag-and-drop&quot;&gt;&lt;span class=secno&gt;5.8.4
+       &lt;li&gt;&lt;a href=&quot;#drag-and-drop&quot;&gt;&lt;span class=secno&gt;6.8.4
         &lt;/span&gt;Drag-and-drop processing model&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#when-the&quot;&gt;&lt;span class=secno&gt;5.8.4.1. &lt;/span&gt;When the
+         &lt;li&gt;&lt;a href=&quot;#when-the&quot;&gt;&lt;span class=secno&gt;6.8.4.1. &lt;/span&gt;When the
           drag-and-drop operation starts or ends in another document&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#when-the0&quot;&gt;&lt;span class=secno&gt;5.8.4.2. &lt;/span&gt;When the
+         &lt;li&gt;&lt;a href=&quot;#when-the0&quot;&gt;&lt;span class=secno&gt;6.8.4.2. &lt;/span&gt;When the
           drag-and-drop operation starts or ends in another application&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-draggable&quot;&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-draggable&quot;&gt;&lt;span class=secno&gt;6.8.5 &lt;/span&gt;The
         &lt;code&gt;draggable&lt;/code&gt; attribute&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#copy-and&quot;&gt;&lt;span class=secno&gt;5.8.6 &lt;/span&gt;Copy and
+       &lt;li&gt;&lt;a href=&quot;#copy-and&quot;&gt;&lt;span class=secno&gt;6.8.6 &lt;/span&gt;Copy and
         paste&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#copy-to&quot;&gt;&lt;span class=secno&gt;5.8.6.1. &lt;/span&gt;Copy to
+         &lt;li&gt;&lt;a href=&quot;#copy-to&quot;&gt;&lt;span class=secno&gt;6.8.6.1. &lt;/span&gt;Copy to
           clipboard&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#cut-to&quot;&gt;&lt;span class=secno&gt;5.8.6.2. &lt;/span&gt;Cut to
+         &lt;li&gt;&lt;a href=&quot;#cut-to&quot;&gt;&lt;span class=secno&gt;6.8.6.2. &lt;/span&gt;Cut to
           clipboard&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#paste&quot;&gt;&lt;span class=secno&gt;5.8.6.3. &lt;/span&gt;Paste from
+         &lt;li&gt;&lt;a href=&quot;#paste&quot;&gt;&lt;span class=secno&gt;6.8.6.3. &lt;/span&gt;Paste from
           clipboard&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#paste0&quot;&gt;&lt;span class=secno&gt;5.8.6.4. &lt;/span&gt;Paste from
+         &lt;li&gt;&lt;a href=&quot;#paste0&quot;&gt;&lt;span class=secno&gt;6.8.6.4. &lt;/span&gt;Paste from
           selection&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#security8&quot;&gt;&lt;span class=secno&gt;5.8.7 &lt;/span&gt;Security risks
+       &lt;li&gt;&lt;a href=&quot;#security8&quot;&gt;&lt;span class=secno&gt;6.8.7 &lt;/span&gt;Security risks
         in the drag-and-drop model&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#undo&quot;&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Undo history&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#undo&quot;&gt;&lt;span class=secno&gt;6.9 &lt;/span&gt;Undo history&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-undomanager&quot;&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-undomanager&quot;&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;The
         &lt;code&gt;UndoManager&lt;/code&gt; interface&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#undo-moving&quot;&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;Undo: moving
+       &lt;li&gt;&lt;a href=&quot;#undo-moving&quot;&gt;&lt;span class=secno&gt;6.9.2 &lt;/span&gt;Undo: moving
         back in the undo transaction history&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#redo-moving&quot;&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;Redo: moving
+       &lt;li&gt;&lt;a href=&quot;#redo-moving&quot;&gt;&lt;span class=secno&gt;6.9.3 &lt;/span&gt;Redo: moving
         forward in the undo transaction history&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-undomanagerevent&quot;&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-undomanagerevent&quot;&gt;&lt;span class=secno&gt;6.9.4 &lt;/span&gt;The
         &lt;code&gt;UndoManagerEvent&lt;/code&gt; interface and the &lt;code
         title=event-undo&gt;undo&lt;/code&gt; and &lt;code title=event-redo&gt;redo&lt;/code&gt;
         events&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#implementation0&quot;&gt;&lt;span class=secno&gt;5.9.5
+       &lt;li&gt;&lt;a href=&quot;#implementation0&quot;&gt;&lt;span class=secno&gt;6.9.5
         &lt;/span&gt;Implementation notes&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#command&quot;&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Command APIs&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#command&quot;&gt;&lt;span class=secno&gt;6.10 &lt;/span&gt;Command APIs&lt;/a&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#comms&quot;&gt;&lt;span class=secno&gt;6. &lt;/span&gt;Communication&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#comms&quot;&gt;&lt;span class=secno&gt;7. &lt;/span&gt;Communication&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#event1&quot;&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Event definitions&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#event1&quot;&gt;&lt;span class=secno&gt;7.1 &lt;/span&gt;Event definitions&lt;/a&gt;
       
 
-     &lt;li&gt;&lt;a href=&quot;#server-sent-events&quot;&gt;&lt;span class=secno&gt;6.2
+     &lt;li&gt;&lt;a href=&quot;#server-sent-events&quot;&gt;&lt;span class=secno&gt;7.2
       &lt;/span&gt;Server-sent DOM events&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-remoteeventtarget&quot;&gt;&lt;span class=secno&gt;6.2.1
+       &lt;li&gt;&lt;a href=&quot;#the-remoteeventtarget&quot;&gt;&lt;span class=secno&gt;7.2.1
         &lt;/span&gt;The &lt;code&gt;RemoteEventTarget&lt;/code&gt; interface&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#connecting&quot;&gt;&lt;span class=secno&gt;6.2.2 &lt;/span&gt;Connecting to
+       &lt;li&gt;&lt;a href=&quot;#connecting&quot;&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;Connecting to
         an event stream&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#parsing1&quot;&gt;&lt;span class=secno&gt;6.2.3 &lt;/span&gt;Parsing an
+       &lt;li&gt;&lt;a href=&quot;#parsing1&quot;&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an
         event stream&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#event-stream-interpretation&quot;&gt;&lt;span class=secno&gt;6.2.4
+       &lt;li&gt;&lt;a href=&quot;#event-stream-interpretation&quot;&gt;&lt;span class=secno&gt;7.2.4
         &lt;/span&gt;Interpreting an event stream&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#notes&quot;&gt;&lt;span class=secno&gt;6.2.5 &lt;/span&gt;Notes&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#notes&quot;&gt;&lt;span class=secno&gt;7.2.5 &lt;/span&gt;Notes&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#network&quot;&gt;&lt;span class=secno&gt;6.3 &lt;/span&gt;Network
+     &lt;li&gt;&lt;a href=&quot;#network&quot;&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Network
       connections&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#network-intro&quot;&gt;&lt;span class=secno&gt;6.3.1
+       &lt;li&gt;&lt;a href=&quot;#network-intro&quot;&gt;&lt;span class=secno&gt;7.3.1
         &lt;/span&gt;Introduction&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-connection&quot;&gt;&lt;span class=secno&gt;6.3.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-connection&quot;&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;The
         &lt;code&gt;Connection&lt;/code&gt; interface&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#connection&quot;&gt;&lt;span class=secno&gt;6.3.3 &lt;/span&gt;Connection
+       &lt;li&gt;&lt;a href=&quot;#connection&quot;&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Connection
         Events&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#tcp-connections&quot;&gt;&lt;span class=secno&gt;6.3.4 &lt;/span&gt;TCP
+       &lt;li&gt;&lt;a href=&quot;#tcp-connections&quot;&gt;&lt;span class=secno&gt;7.3.4 &lt;/span&gt;TCP
         connections&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#broadcast&quot;&gt;&lt;span class=secno&gt;6.3.5 &lt;/span&gt;Broadcast
+       &lt;li&gt;&lt;a href=&quot;#broadcast&quot;&gt;&lt;span class=secno&gt;7.3.5 &lt;/span&gt;Broadcast
         connections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#broadcasting&quot;&gt;&lt;span class=secno&gt;6.3.5.1.
+         &lt;li&gt;&lt;a href=&quot;#broadcasting&quot;&gt;&lt;span class=secno&gt;7.3.5.1.
           &lt;/span&gt;Broadcasting over TCP/IP&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#bluetooth-broadcast&quot;&gt;&lt;span class=secno&gt;6.3.5.2.
+         &lt;li&gt;&lt;a href=&quot;#bluetooth-broadcast&quot;&gt;&lt;span class=secno&gt;7.3.5.2.
           &lt;/span&gt;Broadcasting over Bluetooth&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#irda-broadcast&quot;&gt;&lt;span class=secno&gt;6.3.5.3.
+         &lt;li&gt;&lt;a href=&quot;#irda-broadcast&quot;&gt;&lt;span class=secno&gt;7.3.5.3.
           &lt;/span&gt;Broadcasting over IrDA&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#peer-to-peer&quot;&gt;&lt;span class=secno&gt;6.3.6
+       &lt;li&gt;&lt;a href=&quot;#peer-to-peer&quot;&gt;&lt;span class=secno&gt;7.3.6
         &lt;/span&gt;Peer-to-peer connections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#peer-to-peer0&quot;&gt;&lt;span class=secno&gt;6.3.6.1.
+         &lt;li&gt;&lt;a href=&quot;#peer-to-peer0&quot;&gt;&lt;span class=secno&gt;7.3.6.1.
           &lt;/span&gt;Peer-to-peer connections over TCP/IP&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#bluetooth-peer&quot;&gt;&lt;span class=secno&gt;6.3.6.2.
+         &lt;li&gt;&lt;a href=&quot;#bluetooth-peer&quot;&gt;&lt;span class=secno&gt;7.3.6.2.
           &lt;/span&gt;Peer-to-peer connections over Bluetooth&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#irda-peer&quot;&gt;&lt;span class=secno&gt;6.3.6.3.
+         &lt;li&gt;&lt;a href=&quot;#irda-peer&quot;&gt;&lt;span class=secno&gt;7.3.6.3.
           &lt;/span&gt;Peer-to-peer connections over IrDA&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-common&quot;&gt;&lt;span class=secno&gt;6.3.7 &lt;/span&gt;The common
+       &lt;li&gt;&lt;a href=&quot;#the-common&quot;&gt;&lt;span class=secno&gt;7.3.7 &lt;/span&gt;The common
         protocol for TCP-based connections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#clients&quot;&gt;&lt;span class=secno&gt;6.3.7.1. &lt;/span&gt;Clients
+         &lt;li&gt;&lt;a href=&quot;#clients&quot;&gt;&lt;span class=secno&gt;7.3.7.1. &lt;/span&gt;Clients
           connecting over TCP&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#servers&quot;&gt;&lt;span class=secno&gt;6.3.7.2. &lt;/span&gt;Servers
+         &lt;li&gt;&lt;a href=&quot;#servers&quot;&gt;&lt;span class=secno&gt;7.3.7.2. &lt;/span&gt;Servers
           accepting connections over TCP&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#sending&quot;&gt;&lt;span class=secno&gt;6.3.7.3. &lt;/span&gt;Sending and
+         &lt;li&gt;&lt;a href=&quot;#sending&quot;&gt;&lt;span class=secno&gt;7.3.7.3. &lt;/span&gt;Sending and
           receiving data over TCP&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#network-security&quot;&gt;&lt;span class=secno&gt;6.3.8
+       &lt;li&gt;&lt;a href=&quot;#network-security&quot;&gt;&lt;span class=secno&gt;7.3.8
         &lt;/span&gt;Security&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#network-other-specs&quot;&gt;&lt;span class=secno&gt;6.3.9
+       &lt;li&gt;&lt;a href=&quot;#network-other-specs&quot;&gt;&lt;span class=secno&gt;7.3.9
         &lt;/span&gt;Relationship to other standards&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#crossDocumentMessages&quot;&gt;&lt;span class=secno&gt;6.4
+     &lt;li&gt;&lt;a href=&quot;#crossDocumentMessages&quot;&gt;&lt;span class=secno&gt;7.4
       &lt;/span&gt;Cross-document messaging&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#processing4&quot;&gt;&lt;span class=secno&gt;6.4.1 &lt;/span&gt;Processing
+       &lt;li&gt;&lt;a href=&quot;#processing4&quot;&gt;&lt;span class=secno&gt;7.4.1 &lt;/span&gt;Processing
         model&lt;/a&gt;
       &lt;/ul&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#repetition&quot;&gt;&lt;span class=secno&gt;7. &lt;/span&gt;Repetition
+   &lt;li&gt;&lt;a href=&quot;#repetition&quot;&gt;&lt;span class=secno&gt;8. &lt;/span&gt;Repetition
     templates&lt;/a&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#syntax&quot;&gt;&lt;span class=secno&gt;8. &lt;/span&gt;The HTML syntax&lt;/a&gt;
+   &lt;li&gt;&lt;a href=&quot;#syntax&quot;&gt;&lt;span class=secno&gt;9. &lt;/span&gt;The HTML syntax&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#writing0&quot;&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;Writing HTML
+     &lt;li&gt;&lt;a href=&quot;#writing0&quot;&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Writing HTML
       documents&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-doctype&quot;&gt;&lt;span class=secno&gt;8.1.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-doctype&quot;&gt;&lt;span class=secno&gt;9.1.1 &lt;/span&gt;The
         DOCTYPE&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#elements0&quot;&gt;&lt;span class=secno&gt;8.1.2 &lt;/span&gt;Elements&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#elements1&quot;&gt;&lt;span class=secno&gt;9.1.2 &lt;/span&gt;Elements&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#start&quot;&gt;&lt;span class=secno&gt;8.1.2.1. &lt;/span&gt;Start
+         &lt;li&gt;&lt;a href=&quot;#start&quot;&gt;&lt;span class=secno&gt;9.1.2.1. &lt;/span&gt;Start
           tags&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#end-tags&quot;&gt;&lt;span class=secno&gt;8.1.2.2. &lt;/span&gt;End
+         &lt;li&gt;&lt;a href=&quot;#end-tags&quot;&gt;&lt;span class=secno&gt;9.1.2.2. &lt;/span&gt;End
           tags&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#attributes1&quot;&gt;&lt;span class=secno&gt;8.1.2.3.
+         &lt;li&gt;&lt;a href=&quot;#attributes1&quot;&gt;&lt;span class=secno&gt;9.1.2.3.
           &lt;/span&gt;Attributes&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#optional&quot;&gt;&lt;span class=secno&gt;8.1.2.4. &lt;/span&gt;Optional
+         &lt;li&gt;&lt;a href=&quot;#optional&quot;&gt;&lt;span class=secno&gt;9.1.2.4. &lt;/span&gt;Optional
           tags&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#element-restrictions&quot;&gt;&lt;span class=secno&gt;8.1.2.5.
+         &lt;li&gt;&lt;a href=&quot;#element-restrictions&quot;&gt;&lt;span class=secno&gt;9.1.2.5.
           &lt;/span&gt;Restrictions on content models&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#cdata-rcdata-restrictions&quot;&gt;&lt;span class=secno&gt;8.1.2.6.
+         &lt;li&gt;&lt;a href=&quot;#cdata-rcdata-restrictions&quot;&gt;&lt;span class=secno&gt;9.1.2.6.
           &lt;/span&gt;Restrictions on the contents of CDATA and RCDATA
           elements&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#text0&quot;&gt;&lt;span class=secno&gt;8.1.3 &lt;/span&gt;Text&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#text0&quot;&gt;&lt;span class=secno&gt;9.1.3 &lt;/span&gt;Text&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#newlines&quot;&gt;&lt;span class=secno&gt;8.1.3.1.
+         &lt;li&gt;&lt;a href=&quot;#newlines&quot;&gt;&lt;span class=secno&gt;9.1.3.1.
           &lt;/span&gt;Newlines&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#character&quot;&gt;&lt;span class=secno&gt;8.1.4 &lt;/span&gt;Character
+       &lt;li&gt;&lt;a href=&quot;#character&quot;&gt;&lt;span class=secno&gt;9.1.4 &lt;/span&gt;Character
         references&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#cdata&quot;&gt;&lt;span class=secno&gt;8.1.5 &lt;/span&gt;CDATA blocks&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#cdata&quot;&gt;&lt;span class=secno&gt;9.1.5 &lt;/span&gt;CDATA blocks&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#comments&quot;&gt;&lt;span class=secno&gt;8.1.6 &lt;/span&gt;Comments&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#comments&quot;&gt;&lt;span class=secno&gt;9.1.6 &lt;/span&gt;Comments&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#parsing&quot;&gt;&lt;span class=secno&gt;8.2 &lt;/span&gt;Parsing HTML
+     &lt;li&gt;&lt;a href=&quot;#parsing&quot;&gt;&lt;span class=secno&gt;9.2 &lt;/span&gt;Parsing HTML
       documents&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#overview&quot;&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Overview of the
+       &lt;li&gt;&lt;a href=&quot;#overview&quot;&gt;&lt;span class=secno&gt;9.2.1 &lt;/span&gt;Overview of the
         parsing model&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-input0&quot;&gt;&lt;span class=secno&gt;8.2.2 &lt;/span&gt;The input
+       &lt;li&gt;&lt;a href=&quot;#the-input0&quot;&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The input
         stream&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#determining&quot;&gt;&lt;span class=secno&gt;8.2.2.1.
+         &lt;li&gt;&lt;a href=&quot;#determining&quot;&gt;&lt;span class=secno&gt;9.2.2.1.
           &lt;/span&gt;Determining the character encoding&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#character0&quot;&gt;&lt;span class=secno&gt;8.2.2.2.
+         &lt;li&gt;&lt;a href=&quot;#character0&quot;&gt;&lt;span class=secno&gt;9.2.2.2.
           &lt;/span&gt;Character encoding requirements&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#preprocessing&quot;&gt;&lt;span class=secno&gt;8.2.2.3.
+         &lt;li&gt;&lt;a href=&quot;#preprocessing&quot;&gt;&lt;span class=secno&gt;9.2.2.3.
           &lt;/span&gt;Preprocessing the input stream&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#changing&quot;&gt;&lt;span class=secno&gt;8.2.2.4. &lt;/span&gt;Changing
+         &lt;li&gt;&lt;a href=&quot;#changing&quot;&gt;&lt;span class=secno&gt;9.2.2.4. &lt;/span&gt;Changing
           the encoding while parsing&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#parse&quot;&gt;&lt;span class=secno&gt;8.2.3 &lt;/span&gt;Parse state&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#parse&quot;&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;Parse state&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#the-insertion&quot;&gt;&lt;span class=secno&gt;8.2.3.1. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-insertion&quot;&gt;&lt;span class=secno&gt;9.2.3.1. &lt;/span&gt;The
           insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-stack&quot;&gt;&lt;span class=secno&gt;8.2.3.2. &lt;/span&gt;The stack
+         &lt;li&gt;&lt;a href=&quot;#the-stack&quot;&gt;&lt;span class=secno&gt;9.2.3.2. &lt;/span&gt;The stack
           of open elements&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-list&quot;&gt;&lt;span class=secno&gt;8.2.3.3. &lt;/span&gt;The list
+         &lt;li&gt;&lt;a href=&quot;#the-list&quot;&gt;&lt;span class=secno&gt;9.2.3.3. &lt;/span&gt;The list
           of active formatting elements&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-element&quot;&gt;&lt;span class=secno&gt;8.2.3.4. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-element&quot;&gt;&lt;span class=secno&gt;9.2.3.4. &lt;/span&gt;The
           element pointers&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-scripting&quot;&gt;&lt;span class=secno&gt;8.2.3.5. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-scripting&quot;&gt;&lt;span class=secno&gt;9.2.3.5. &lt;/span&gt;The
           scripting state&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#tokenisation&quot;&gt;&lt;span class=secno&gt;8.2.4
+       &lt;li&gt;&lt;a href=&quot;#tokenisation&quot;&gt;&lt;span class=secno&gt;9.2.4
         &lt;/span&gt;Tokenisation&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#tokenising&quot;&gt;&lt;span class=secno&gt;8.2.4.1.
+         &lt;li&gt;&lt;a href=&quot;#tokenising&quot;&gt;&lt;span class=secno&gt;9.2.4.1.
           &lt;/span&gt;Tokenising character references&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#tree-construction&quot;&gt;&lt;span class=secno&gt;8.2.5 &lt;/span&gt;Tree
+       &lt;li&gt;&lt;a href=&quot;#tree-construction&quot;&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Tree
         construction&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#creating&quot;&gt;&lt;span class=secno&gt;8.2.5.1. &lt;/span&gt;Creating
+         &lt;li&gt;&lt;a href=&quot;#creating&quot;&gt;&lt;span class=secno&gt;9.2.5.1. &lt;/span&gt;Creating
           and inserting elements&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;&lt;span class=secno&gt;8.2.5.2. &lt;/span&gt;Closing
+         &lt;li&gt;&lt;a href=&quot;#closing&quot;&gt;&lt;span class=secno&gt;9.2.5.2. &lt;/span&gt;Closing
           elements that have implied end tags&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#foster&quot;&gt;&lt;span class=secno&gt;8.2.5.3. &lt;/span&gt;Foster
+         &lt;li&gt;&lt;a href=&quot;#foster&quot;&gt;&lt;span class=secno&gt;9.2.5.3. &lt;/span&gt;Foster
           parenting&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-initial&quot;&gt;&lt;span class=secno&gt;8.2.5.4. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-initial&quot;&gt;&lt;span class=secno&gt;9.2.5.4. &lt;/span&gt;The
           &quot;initial&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-before&quot;&gt;&lt;span class=secno&gt;8.2.5.5. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-before&quot;&gt;&lt;span class=secno&gt;9.2.5.5. &lt;/span&gt;The
           &quot;before html&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-before0&quot;&gt;&lt;span class=secno&gt;8.2.5.6. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-before0&quot;&gt;&lt;span class=secno&gt;9.2.5.6. &lt;/span&gt;The
           &quot;before head&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-inhead&quot;&gt;&lt;span class=secno&gt;8.2.5.7.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inhead&quot;&gt;&lt;span class=secno&gt;9.2.5.7.
           &lt;/span&gt;The &quot;in head&quot; insertion mode&lt;/a&gt;
 
          &lt;li&gt;&lt;a href=&quot;#parsing-main-inheadnoscript&quot;&gt;&lt;span
-          class=secno&gt;8.2.5.8. &lt;/span&gt;The &quot;in head noscript&quot; insertion
+          class=secno&gt;9.2.5.8. &lt;/span&gt;The &quot;in head noscript&quot; insertion
           mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-after&quot;&gt;&lt;span class=secno&gt;8.2.5.9. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-after&quot;&gt;&lt;span class=secno&gt;9.2.5.9. &lt;/span&gt;The
           &quot;after head&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-inbody&quot;&gt;&lt;span class=secno&gt;8.2.5.10.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inbody&quot;&gt;&lt;span class=secno&gt;9.2.5.10.
           &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-intable&quot;&gt;&lt;span class=secno&gt;8.2.5.11.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intable&quot;&gt;&lt;span class=secno&gt;9.2.5.11.
           &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-incaption&quot;&gt;&lt;span class=secno&gt;8.2.5.12.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-incaption&quot;&gt;&lt;span class=secno&gt;9.2.5.12.
           &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-incolgroup&quot;&gt;&lt;span class=secno&gt;8.2.5.13.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-incolgroup&quot;&gt;&lt;span class=secno&gt;9.2.5.13.
           &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-intbody&quot;&gt;&lt;span class=secno&gt;8.2.5.14.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intbody&quot;&gt;&lt;span class=secno&gt;9.2.5.14.
           &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-intr&quot;&gt;&lt;span class=secno&gt;8.2.5.15.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intr&quot;&gt;&lt;span class=secno&gt;9.2.5.15.
           &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-intd&quot;&gt;&lt;span class=secno&gt;8.2.5.16.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-intd&quot;&gt;&lt;span class=secno&gt;9.2.5.16.
           &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-inselect&quot;&gt;&lt;span class=secno&gt;8.2.5.17.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inselect&quot;&gt;&lt;span class=secno&gt;9.2.5.17.
           &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;
 
          &lt;li&gt;&lt;a href=&quot;#parsing-main-inselectintable&quot;&gt;&lt;span
-          class=secno&gt;8.2.5.18. &lt;/span&gt;The &quot;in select in table&quot; insertion
+          class=secno&gt;9.2.5.18. &lt;/span&gt;The &quot;in select in table&quot; insertion
           mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-inforeign&quot;&gt;&lt;span class=secno&gt;8.2.5.19.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inforeign&quot;&gt;&lt;span class=secno&gt;9.2.5.19.
           &lt;/span&gt;The &quot;in foreign content&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-afterbody&quot;&gt;&lt;span class=secno&gt;8.2.5.20.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-afterbody&quot;&gt;&lt;span class=secno&gt;9.2.5.20.
           &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#parsing-main-inframeset&quot;&gt;&lt;span class=secno&gt;8.2.5.21.
+         &lt;li&gt;&lt;a href=&quot;#parsing-main-inframeset&quot;&gt;&lt;span class=secno&gt;9.2.5.21.
           &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;
 
          &lt;li&gt;&lt;a href=&quot;#parsing-main-afterframeset&quot;&gt;&lt;span
-          class=secno&gt;8.2.5.22. &lt;/span&gt;The &quot;after frameset&quot; insertion
+          class=secno&gt;9.2.5.22. &lt;/span&gt;The &quot;after frameset&quot; insertion
           mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-after0&quot;&gt;&lt;span class=secno&gt;8.2.5.23. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-after0&quot;&gt;&lt;span class=secno&gt;9.2.5.23. &lt;/span&gt;The
           &quot;after after body&quot; insertion mode&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#the-after1&quot;&gt;&lt;span class=secno&gt;8.2.5.24. &lt;/span&gt;The
+         &lt;li&gt;&lt;a href=&quot;#the-after1&quot;&gt;&lt;span class=secno&gt;9.2.5.24. &lt;/span&gt;The
           &quot;after after frameset&quot; insertion mode&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-end&quot;&gt;&lt;span class=secno&gt;8.2.6 &lt;/span&gt;The end&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#the-end&quot;&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;The end&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#namespaces&quot;&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;Namespaces&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#namespaces&quot;&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;Namespaces&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#serializing&quot;&gt;&lt;span class=secno&gt;8.4 &lt;/span&gt;Serializing HTML
+     &lt;li&gt;&lt;a href=&quot;#serializing&quot;&gt;&lt;span class=secno&gt;9.4 &lt;/span&gt;Serializing HTML
       fragments&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#parsing2&quot;&gt;&lt;span class=secno&gt;8.5 &lt;/span&gt;Parsing HTML
+     &lt;li&gt;&lt;a href=&quot;#parsing2&quot;&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML
       fragments&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#named&quot;&gt;&lt;span class=secno&gt;8.6 &lt;/span&gt;Named character
+     &lt;li&gt;&lt;a href=&quot;#named&quot;&gt;&lt;span class=secno&gt;9.6 &lt;/span&gt;Named character
       references&lt;/a&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#rendering&quot;&gt;&lt;span class=secno&gt;9. &lt;/span&gt;Rendering and
+   &lt;li&gt;&lt;a href=&quot;#rendering&quot;&gt;&lt;span class=secno&gt;10. &lt;/span&gt;Rendering and
     user-agent behavior&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#rendering0&quot;&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Rendering and the
-      DOM&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#rendering0&quot;&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Rendering and
+      the DOM&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#rendering1&quot;&gt;&lt;span class=secno&gt;9.2 &lt;/span&gt;Rendering and
+     &lt;li&gt;&lt;a href=&quot;#rendering1&quot;&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Rendering and
       menus/toolbars&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-icon&quot;&gt;&lt;span class=secno&gt;9.2.1 &lt;/span&gt;The 'icon'
+       &lt;li&gt;&lt;a href=&quot;#the-icon&quot;&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;The 'icon'
         property&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#obsolete&quot;&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;Obsolete elements,
+     &lt;li&gt;&lt;a href=&quot;#obsolete&quot;&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;Obsolete elements,
       attributes, and APIs&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-body0&quot;&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-body0&quot;&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;The
         &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-applet&quot;&gt;&lt;span class=secno&gt;9.3.2 &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-applet&quot;&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;The
         &lt;code&gt;applet&lt;/code&gt; element&lt;/a&gt;
       &lt;/ul&gt;
     &lt;/ul&gt;
 
-   &lt;li&gt;&lt;a href=&quot;#no&quot;&gt;&lt;span class=secno&gt;10. &lt;/span&gt;Things that you can't do
+   &lt;li&gt;&lt;a href=&quot;#no&quot;&gt;&lt;span class=secno&gt;11. &lt;/span&gt;Things that you can't do
     with this specification because they are better handled using other
     technologies that are further described herein&lt;/a&gt;
     &lt;ul class=toc&gt;
-     &lt;li&gt;&lt;a href=&quot;#localization&quot;&gt;&lt;span class=secno&gt;10.1
+     &lt;li&gt;&lt;a href=&quot;#localization&quot;&gt;&lt;span class=secno&gt;11.1
       &lt;/span&gt;Localization&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#declarative&quot;&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Declarative 2D
+     &lt;li&gt;&lt;a href=&quot;#declarative&quot;&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;Declarative 2D
       vector graphics and animation&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#declarative0&quot;&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;Declarative 3D
+     &lt;li&gt;&lt;a href=&quot;#declarative0&quot;&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Declarative 3D
       scenes&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#timers&quot;&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Timers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#timers&quot;&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Timers&lt;/a&gt;
     &lt;/ul&gt;
 
    &lt;li class=no-num&gt;&lt;a href=&quot;#index&quot;&gt;Index&lt;/a&gt;
@@ -1851,6 +1861,8 @@
 
   &lt;h2 id=introduction&gt;&lt;span class=secno&gt;1. &lt;/span&gt;Introduction&lt;/h2&gt;
 
+  &lt;h3 id=background&gt;&lt;span class=secno&gt;1.1 &lt;/span&gt;Background&lt;/h3&gt;
+
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p&gt;The World Wide Web's markup language has always been HTML. HTML was
@@ -1863,7 +1875,7 @@
    rectify this, while at the same time updating the HTML specifications to
    address issues raised in the past few years.
 
-  &lt;h3 id=scope&gt;&lt;span class=secno&gt;1.1 &lt;/span&gt;Scope&lt;/h3&gt;
+  &lt;h3 id=scope&gt;&lt;span class=secno&gt;1.2 &lt;/span&gt;Scope&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -1907,7 +1919,10 @@
    solutions for such sophisticated applications (for example the MacOS X
    Core APIs) are even further ahead.
 
-  &lt;h4 id=relationship&gt;&lt;span class=secno&gt;1.1.1 &lt;/span&gt;Relationship to HTML
+  &lt;h3 id=relationships&gt;&lt;span class=secno&gt;1.3 &lt;/span&gt;Relationships to other
+   specifications&lt;/h3&gt;
+
+  &lt;h4 id=relationship&gt;&lt;span class=secno&gt;1.3.1 &lt;/span&gt;Relationship to HTML
    4.01 and DOM2 HTML&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -1919,7 +1934,7 @@
    backwards-compatibility is retained. &lt;a href=&quot;#refsHTML4&quot;&gt;[HTML4]&lt;/a&gt; &lt;a
    href=&quot;#refsDOM2HTML&quot;&gt;[DOM2HTML]&lt;/a&gt;
 
-  &lt;h4 id=relationship0&gt;&lt;span class=secno&gt;1.1.2 &lt;/span&gt;Relationship to XHTML
+  &lt;h4 id=relationship0&gt;&lt;span class=secno&gt;1.3.2 &lt;/span&gt;Relationship to XHTML
    1.x&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -1940,7 +1955,7 @@
    those who do need such a mechanism are encouraged to continue using the
    XHTML 1.1 line of specifications.
 
-  &lt;h4 id=relationship1&gt;&lt;span class=secno&gt;1.1.3 &lt;/span&gt;Relationship to XHTML2&lt;/h4&gt;
+  &lt;h4 id=relationship1&gt;&lt;span class=secno&gt;1.3.3 &lt;/span&gt;Relationship to XHTML2&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -1961,7 +1976,7 @@
   &lt;p&gt;XHTML2 and this specification use different namespaces and therefore can
    both be implemented in the same XML processor.
 
-  &lt;h4 id=relationship2&gt;&lt;span class=secno&gt;1.1.4 &lt;/span&gt;Relationship to Web
+  &lt;h4 id=relationship2&gt;&lt;span class=secno&gt;1.3.4 &lt;/span&gt;Relationship to Web
    Forms 2.0 and XForms&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -1977,7 +1992,7 @@
    in the Web Forms 2.0 draft will apply to this specification. &lt;a
    href=&quot;#refsXForms&quot;&gt;[XForms]&lt;/a&gt;
 
-  &lt;h4 id=relationship3&gt;&lt;span class=secno&gt;1.1.5 &lt;/span&gt;Relationship to XUL,
+  &lt;h4 id=relationship3&gt;&lt;span class=secno&gt;1.3.5 &lt;/span&gt;Relationship to XUL,
    Flash, Silverlight, and other proprietary UI languages&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -1987,46 +2002,91 @@
    language, HTML provides for a solution to the same problems without the
    risk of vendor lock-in.
 
-  &lt;h3 id=structure&gt;&lt;span class=secno&gt;1.2 &lt;/span&gt;Structure of this
+  &lt;h3 id=html-vs&gt;&lt;span class=secno&gt;1.4 &lt;/span&gt;HTML vs XHTML&lt;/h3&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
+
+  &lt;p&gt;This specification defines an abstract language for describing documents
+   and applications, and some APIs for interacting with in-memory
+   representations of resources that use this language.
+
+  &lt;p&gt;The in-memory representation is known as &quot;DOM5 HTML&quot;, or &quot;the DOM&quot; for
+   short.
+
+  &lt;p&gt;There are various concrete syntaxes that can be used to transmit
+   resources that use this abstract language, two of which are defined in
+   this specification.
+
+  &lt;p&gt;The first such concrete syntax is &quot;HTML5&quot;. This is the format
+   recommended for most authors. It is compatible with all legacy Web
+   browsers. If a document is transmitted with the MIME type &lt;code
+   title=&quot;&quot;&gt;text/html&lt;/code&gt;, then it will be processed as an &quot;HTML5&quot;
+   document by Web browsers.
+
+  &lt;p&gt;The second concrete syntax uses XML, and is known as &quot;XHTML5&quot;. When a
+   document is transmitted with an XML MIME type, such as &lt;code
+   title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;, then it is processed by an XML
+   processor by Web browsers, and treated as an &quot;XHTML5&quot; document. Authors
+   are reminded that the processing for XML and HTML differs; in particular,
+   even minor syntax errors will prevent an XML document from being rendered
+   fully, whereas they would be ignored in the &quot;HTML5&quot; syntax.
+
+  &lt;p&gt;The &quot;DOM5 HTML&quot;, &quot;HTML5&quot;, and &quot;XHTML5&quot; representations cannot all
+   represent the same content. For example, namespaces cannot be represented
+   using &quot;HTML5&quot;, but they are supported in &quot;DOM5 HTML&quot; and &quot;XHTML5&quot;.
+   Similarly, documents that use the &lt;code&gt;&lt;a
+   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; feature can be represented using
+   &quot;HTML5&quot;, but cannot be represented with &quot;XHTML5&quot; and &quot;DOM5 HTML&quot;. Comments
+   that contain the string &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; can be represented
+   in &quot;DOM5 HTML&quot; but not in &quot;HTML5&quot; and &quot;XHTML5&quot;. And so forth.
+
+  &lt;h3 id=structure&gt;&lt;span class=secno&gt;1.5 &lt;/span&gt;Structure of this
    specification&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
-  &lt;p&gt;This specification is divided into the following important sections:
+  &lt;p&gt;This specification is divided into the following major sections:
 
   &lt;dl&gt;
-   &lt;dt&gt;&lt;a href=&quot;#dom&quot;&gt;The DOM&lt;/a&gt;
+   &lt;dt&gt;&lt;a href=&quot;#infrastructure&quot;&gt;Common Infrastructure&lt;/a&gt;
 
-   &lt;dd&gt;The DOM, or Document Object Model, provides a base for the rest of the
-    specification.
+   &lt;dd&gt;The conformance classes, algorithms, definitions, and the common
+    underpinnings of the rest of the specification.
 
-   &lt;dt&gt;&lt;a href=&quot;#semantics&quot;&gt;The Semantics&lt;/a&gt;
+   &lt;dt&gt;&lt;a href=&quot;#dom&quot;&gt;The DOM&lt;/a&gt;
 
    &lt;dd&gt;Documents are built from elements. These elements form a tree using
-    the DOM. Each element also has a predefined meaning, which is explained
-    in this section. User agent requirements for how to handle each element
-    are also given, along with rules for authors on how to use the element.
+    the DOM. This section defines the features of this DOM, as well as
+    introducing the features common to all elements, and the concepts used in
+    defining elements.
 
-   &lt;dt&gt;&lt;a href=&quot;#windows&quot;&gt;Browsing Contexts&lt;/a&gt;
+   &lt;dt&gt;&lt;a href=&quot;#semantics&quot;&gt;Elements&lt;/a&gt;
 
+   &lt;dd&gt;Each element has a predefined meaning, which is explained in this
+    section. User agent requirements for how to handle each element are also
+    given, along with rules for authors on how to use the element.
+
+   &lt;dt&gt;&lt;a href=&quot;#browsers&quot;&gt;Web Browsers&lt;/a&gt;
+
    &lt;dd&gt;HTML documents do not exist in a vacuum &mdash; this section defines
     many of the features that affect environments that deal with multiple
     pages, links between pages, and running scripts.
 
-   &lt;dt&gt;APIs
+   &lt;dt&gt;&lt;a href=&quot;#editing&quot;&gt;User Interaction&lt;/a&gt;
 
-   &lt;dd&gt;&lt;a href=&quot;#editing&quot;&gt;User interaction&lt;/a&gt;: HTML documents can provide a
-    number of mechanisms for users to interact with and modify content, which
-    are described in this section.
+   &lt;dd&gt;HTML documents can provide a number of mechanisms for users to
+    interact with and modify content, which are described in this section.
 
-   &lt;dd&gt;&lt;a href=&quot;#comms&quot;&gt;The Communication APIs&lt;/a&gt;: Applications written in
-    HTML often require mechanisms to communicate with remote servers, as well
-    as communicating with other applications from different domains running
-    on the same client.
+   &lt;dt&gt;&lt;a href=&quot;#comms&quot;&gt;The Communication APIs&lt;/a&gt;
 
-   &lt;dd&gt;&lt;a href=&quot;#repetition&quot;&gt;Repetition Templates&lt;/a&gt;: A mechanism to support
-    repeating sections in forms.
+   &lt;dd&gt;Applications written in HTML often require mechanisms to communicate
+    with remote servers, as well as communicating with other applications
+    from different domains running on the same client.
 
+   &lt;dt&gt;&lt;a href=&quot;#repetition&quot;&gt;Repetition Templates&lt;/a&gt;
+
+   &lt;dd&gt;A mechanism to support repeating sections in forms.
+
    &lt;dt&gt;&lt;a href=&quot;#syntax&quot;&gt;The Language Syntax&lt;/a&gt;
 
    &lt;dd&gt;All of these features would be for naught if they couldn't be
@@ -2039,15 +2099,17 @@
    href=&quot;#rendering&quot;&gt;rendering rules&lt;/a&gt; for Web browsers and listing &lt;a
    href=&quot;#no&quot;&gt;areas that are out of scope&lt;/a&gt; for this specification.
 
-  &lt;h4 id=how-to&gt;&lt;span class=secno&gt;1.2.1 &lt;/span&gt;How to read this specification&lt;/h4&gt;
+  &lt;h4 id=how-to&gt;&lt;span class=secno&gt;1.5.1 &lt;/span&gt;How to read this specification&lt;/h4&gt;
 
   &lt;p&gt;This specification should be read like all other specifications. First,
    it should be read cover-to-cover, multiple times. Then, it should be read
    backwards at least once. Then it should be read by picking random sections
    from the contents list and following all the cross-references.
 
-  &lt;h3 id=conformance&gt;&lt;span class=secno&gt;1.3 &lt;/span&gt;Conformance requirements&lt;/h3&gt;
+  &lt;h2 id=infrastructure&gt;&lt;span class=secno&gt;2. &lt;/span&gt;Common infrastructure&lt;/h2&gt;
 
+  &lt;h3 id=conformance&gt;&lt;span class=secno&gt;2.1 &lt;/span&gt;Conformance requirements&lt;/h3&gt;
+
   &lt;p&gt;All diagrams, examples, and notes in this specification are
    non-normative, as are all sections explicitly marked non-normative.
    Everything else in this specification is normative.
@@ -2320,40 +2382,8 @@
    be treated as if they contained just an empty text node for the purposes
    of the algorithms defined in this specification.
 
-  &lt;h4 id=common&gt;&lt;span class=secno&gt;1.3.1 &lt;/span&gt;Common conformance
-   requirements for APIs exposed to JavaScript&lt;/h4&gt;
+  &lt;h4 id=dependencies&gt;&lt;span class=secno&gt;2.1.1 &lt;/span&gt;Dependencies&lt;/h4&gt;
 
-  &lt;p class=big-issue&gt;A lot of arrays/lists/&lt;a href=&quot;#collections0&quot;
-   title=collections&gt;collection&lt;/a&gt;s in this spec assume zero-based indexes
-   but use the term &quot;&lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th&quot; liberally. We should define
-   those to be zero-based and be clearer about this.
-
-  &lt;p&gt;Unless otherwise specified, if a DOM attribute that is a floating point
-   number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is assigned an Infinity or
-   Not-a-Number value, a &lt;code title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt;
-   exception must be raised.
-
-  &lt;p&gt;Unless otherwise specified, if a method with an argument that is a
-   floating point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is passed an
-   Infinity or Not-a-Number value, a &lt;code
-   title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
-  &lt;!-- XXX DOMB --&gt;
-
-  &lt;p&gt;Unless otherwise specified, if a method is passed fewer arguments than
-   is defined for that method in its IDL definition, a &lt;code
-   title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
-  &lt;!-- XXX DOMB --&gt;
-
-  &lt;p&gt;Unless otherwise specified, if a method is passed more arguments than is
-   defined for that method in its IDL definition, the excess arguments must
-   be ignored.&lt;/p&gt;
-  &lt;!-- XXX When updating this spec for
-  Bindings-For-DOM-compliance, also remove or consider the equivalent
-  requirement in the canvas section for toDataURL() and
-  getContext(). --&gt;
-
-  &lt;h4 id=dependencies&gt;&lt;span class=secno&gt;1.3.2 &lt;/span&gt;Dependencies&lt;/h4&gt;
-
   &lt;p&gt;This specification relies on several other underlying specifications.
 
   &lt;dl&gt;
@@ -2383,6 +2413,12 @@
    &lt;dt&gt;DOM
 
    &lt;dd&gt;
+    &lt;p&gt;The Document Object Model (DOM) is a representation &mdash; a model
+     &mdash; of a document and its content. The DOM is not just an API; the
+     conformance criteria of HTML implementations are defined, in this
+     specification, in terms of operations on the DOM. &lt;a
+     href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
+
     &lt;p&gt;Implementations must support some version of DOM Core and DOM Events,
      because this specification is defined in terms of the DOM, and some of
      the features are defined as extensions to the DOM Core interfaces. &lt;a
@@ -2417,9 +2453,11 @@
    on character encodings, image formats, audio formats, and video formats in
    the respective sections.
 
-  &lt;h4 id=features&gt;&lt;span class=secno&gt;1.3.3 &lt;/span&gt;Features defined in other
+  &lt;h4 id=features&gt;&lt;span class=secno&gt;2.1.2 &lt;/span&gt;Features defined in other
    specifications&lt;/h4&gt;
 
+  &lt;p class=big-issue&gt;this section will be removed at some point
+
   &lt;p&gt;Some elements are defined in terms of their DOM &lt;dfn
    id=textcontent&gt;&lt;code&gt;textContent&lt;/code&gt;&lt;/dfn&gt; attribute. This is an
    attribute defined on the &lt;code&gt;Node&lt;/code&gt; interface in DOM3 Core. &lt;a
@@ -2450,11 +2488,46 @@
   &lt;p class=big-issue&gt;See &lt;a
    href=&quot;<A HREF="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8">http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8</A>&quot;&gt;<A HREF="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8&lt;/a">http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8&lt;/a</A>&gt;
 
-  &lt;h3 id=terminology&gt;&lt;span class=secno&gt;1.4 &lt;/span&gt;Terminology&lt;/h3&gt;
+  &lt;h4 id=common&gt;&lt;span class=secno&gt;2.1.3 &lt;/span&gt;Common conformance
+   requirements for APIs exposed to JavaScript&lt;/h4&gt;
 
+  &lt;p class=big-issue&gt;This section will eventually be removed in favour of
+   WebIDL.
+
+  &lt;p class=big-issue&gt;A lot of arrays/lists/&lt;a href=&quot;#collections0&quot;
+   title=collections&gt;collection&lt;/a&gt;s in this spec assume zero-based indexes
+   but use the term &quot;&lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th&quot; liberally. We should define
+   those to be zero-based and be clearer about this.
+
+  &lt;p&gt;Unless otherwise specified, if a DOM attribute that is a floating point
+   number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is assigned an Infinity or
+   Not-a-Number value, a &lt;code title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt;
+   exception must be raised.
+
+  &lt;p&gt;Unless otherwise specified, if a method with an argument that is a
+   floating point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is passed an
+   Infinity or Not-a-Number value, a &lt;code
+   title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
+  &lt;!-- XXX DOMB --&gt;
+
+  &lt;p&gt;Unless otherwise specified, if a method is passed fewer arguments than
+   is defined for that method in its IDL definition, a &lt;code
+   title=big-issue&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
+  &lt;!-- XXX DOMB --&gt;
+
+  &lt;p&gt;Unless otherwise specified, if a method is passed more arguments than is
+   defined for that method in its IDL definition, the excess arguments must
+   be ignored.&lt;/p&gt;
+  &lt;!-- XXX When updating this spec for
+  Bindings-For-DOM-compliance, also remove or consider the equivalent
+  requirement in the canvas section for toDataURL() and
+  getContext(). --&gt;
+
+  &lt;h3 id=terminology&gt;&lt;span class=secno&gt;2.2 &lt;/span&gt;Terminology&lt;/h3&gt;
+
   &lt;p&gt;This specification refers to both HTML and XML attributes and DOM
    attributes, often in the same context. When it is not clear which is being
-   referred to, they are referred to as &lt;dfn id=content&gt;content
+   referred to, they are referred to as &lt;dfn id=content0&gt;content
    attributes&lt;/dfn&gt; for HTML and XML attributes, and &lt;dfn
    id=dom-attributes&gt;DOM attributes&lt;/dfn&gt; for those from the DOM. Similarly,
    the term &quot;properties&quot; is used for both ECMAScript object properties and
@@ -2464,7 +2537,7 @@
   &lt;p id=html-namespace&gt;To ease migration from HTML to XHTML, UAs conforming
    to this specification will place elements in HTML in the
    &lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt; namespace, at least for the
-   purposes of the DOM and CSS. The term &quot;&lt;dfn id=elements1&gt;elements in the
+   purposes of the DOM and CSS. The term &quot;&lt;dfn id=elements2&gt;elements in the
    HTML namespace&lt;/dfn&gt;&quot;, or &quot;&lt;dfn id=html-elements&gt;HTML elements&lt;/dfn&gt;&quot; for
    short, when used in this specification, thus refers to both HTML and XHTML
    elements.
@@ -2474,6 +2547,27 @@
    namespace, and all attributes defined or mentioned in this specification
    have no namespace (they are in the per-element partition).
 
+  &lt;p&gt;When an XML name, such as an attribute or element name, is referred to
+   in the form &lt;code&gt;&lt;var title=&quot;&quot;&gt;prefix&lt;/var&gt;:&lt;var
+   title=&quot;&quot;&gt;localName&lt;/var&gt;&lt;/code&gt;, as in &lt;code&gt;xml:id&lt;/code&gt; or
+   &lt;code&gt;svg:rect&lt;/code&gt;, it refers to a name with the local name &lt;var
+   title=&quot;&quot;&gt;localName&lt;/var&gt; and the namespace given by the prefix, as defined
+   by the following table:
+
+  &lt;dl&gt;
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;
+
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/XML/1998/namespace&lt;/code">http://www.w3.org/XML/1998/namespace&lt;/code</A>&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;
+
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;svg&lt;/code&gt;
+
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;
+  &lt;/dl&gt;
+
   &lt;p&gt;The term &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt; is sometimes used in
    contrast with &lt;a href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt; to specifically
    mean documents that were parsed using an &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;
@@ -2520,37 +2614,12 @@
    after it is in the DOM. A user agent must not mutate the DOM in such
    situations.
 
-  &lt;p&gt;When an XML name, such as an attribute or element name, is referred to
-   in the form &lt;code&gt;&lt;var title=&quot;&quot;&gt;prefix&lt;/var&gt;:&lt;var
-   title=&quot;&quot;&gt;localName&lt;/var&gt;&lt;/code&gt;, as in &lt;code&gt;xml:id&lt;/code&gt; or
-   &lt;code&gt;svg:rect&lt;/code&gt;, it refers to a name with the local name &lt;var
-   title=&quot;&quot;&gt;localName&lt;/var&gt; and the namespace given by the prefix, as defined
-   by the following table:
-
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;
-
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/XML/1998/namespace&lt;/code">http://www.w3.org/XML/1998/namespace&lt;/code</A>&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;
-
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;svg&lt;/code&gt;
-
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;
-  &lt;/dl&gt;
-
   &lt;p&gt;For simplicity, terms such as &lt;em&gt;shown&lt;/em&gt;, &lt;em&gt;displayed&lt;/em&gt;, and
    &lt;em&gt;visible&lt;/em&gt; might sometimes be used when referring to the way a
    document is rendered to the user. These terms are not meant to imply a
    visual medium; they must be considered to apply to other media in
    equivalent ways.
 
-  &lt;p&gt;DOM interfaces defined in this specification use Web IDL. User agents
-   must implement these interfaces as defined by the Web IDL specification.
-   &lt;a href=&quot;#refsWEBIDL&quot;&gt;[WEBIDL]&lt;/a&gt;
-
   &lt;p&gt;The construction &quot;a &lt;code&gt;Foo&lt;/code&gt; object&quot;, where &lt;code&gt;Foo&lt;/code&gt; is
    actually an interface, is sometimes used instead of the more accurate &quot;an
    object implementing the interface &lt;code&gt;Foo&lt;/code&gt;&quot;.
@@ -2609,1896 +2678,335 @@
    letting the user interact with Web pages where that would involve invoking
    any script.
 
-  &lt;h4 id=html-vs&gt;&lt;span class=secno&gt;1.4.1 &lt;/span&gt;HTML vs XHTML&lt;/h4&gt;
+  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;URLs&lt;/h3&gt;
+  &lt;!-- XXXURL --&gt;
 
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
-
-  &lt;p&gt;This specification defines an abstract language for describing documents
-   and applications, and some APIs for interacting with in-memory
-   representations of resources that use this language.
-
-  &lt;p&gt;The in-memory representation is known as &quot;DOM5 HTML&quot;, or &quot;the DOM&quot; for
-   short.
-
-  &lt;p&gt;There are various concrete syntaxes that can be used to transmit
-   resources that use this abstract language, two of which are defined in
-   this specification.
-
-  &lt;p&gt;The first such concrete syntax is &quot;HTML5&quot;. This is the format
-   recommended for most authors. It is compatible with all legacy Web
-   browsers. If a document is transmitted with the MIME type &lt;code
-   title=&quot;&quot;&gt;text/html&lt;/code&gt;, then it will be processed as an &quot;HTML5&quot;
-   document by Web browsers.
-
-  &lt;p&gt;The second concrete syntax uses XML, and is known as &quot;XHTML5&quot;. When a
-   document is transmitted with an XML MIME type, such as &lt;code
-   title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;, then it is processed by an XML
-   processor by Web browsers, and treated as an &quot;XHTML5&quot; document. Authors
-   are reminded that the processing for XML and HTML differs; in particular,
-   even minor syntax errors will prevent an XML document from being rendered
-   fully, whereas they would be ignored in the &quot;HTML5&quot; syntax.
-
-  &lt;p&gt;The &quot;DOM5 HTML&quot;, &quot;HTML5&quot;, and &quot;XHTML5&quot; representations cannot all
-   represent the same content. For example, namespaces cannot be represented
-   using &quot;HTML5&quot;, but they are supported in &quot;DOM5 HTML&quot; and &quot;XHTML5&quot;.
-   Similarly, documents that use the &lt;code&gt;&lt;a
-   href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; feature can be represented using
-   &quot;HTML5&quot;, but cannot be represented with &quot;XHTML5&quot; and &quot;DOM5 HTML&quot;. Comments
-   that contain the string &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; can be represented
-   in &quot;DOM5 HTML&quot; but not in &quot;HTML5&quot; and &quot;XHTML5&quot;. And so forth.
-
-  &lt;h2 id=dom&gt;&lt;span class=secno&gt;2. &lt;/span&gt;The Document Object Model&lt;/h2&gt;
-
-  &lt;p&gt;The Document Object Model (DOM) is a representation &mdash; a model
-   &mdash; of a document and its content. &lt;a
-   href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt; The DOM is not just an API; the
-   conformance criteria of HTML implementations are defined, in this
-   specification, in terms of operations on the DOM.
-
-  &lt;p&gt;This specification defines the language represented in the DOM by
-   features together called DOM5 HTML. DOM5 HTML consists of DOM Core
-   &lt;code&gt;Document&lt;/code&gt; nodes and DOM Core &lt;code&gt;Element&lt;/code&gt; nodes, along
-   with text nodes and other content.
-
-  &lt;p&gt;Elements in the DOM represent things; that is, they have intrinsic
-   &lt;em&gt;meaning&lt;/em&gt;, also known as semantics.
-
-  &lt;p class=example&gt;For example, an &lt;code&gt;&lt;a href=&quot;#ol&quot;&gt;ol&lt;/a&gt;&lt;/code&gt; element
-   represents an ordered list.
-
-  &lt;p&gt;In addition, documents and elements in the DOM host APIs that extend the
-   DOM Core APIs, providing new features to application developers using DOM5
-   HTML.
-
-  &lt;h3 id=documents&gt;&lt;span class=secno&gt;2.1 &lt;/span&gt;Documents&lt;/h3&gt;
-
-  &lt;p&gt;Every XML and HTML document in an HTML UA is represented by a
-   &lt;code&gt;Document&lt;/code&gt; object. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;
-
-  &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn
-   id=xml-documents&gt;XML documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn
-   id=html-&gt;HTML documents&lt;/dfn&gt; when they are created. Whether a document is
-   an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt; or an &lt;a
-   href=&quot;#xml-documents&quot; title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt; affects the
-   behavior of certain APIs, as well as a few CSS rendering rules. &lt;a
-   href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;
-
-  &lt;p class=note&gt;A &lt;code&gt;Document&lt;/code&gt; object created by the &lt;code
-   title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API on the &lt;code&gt;DOMImplementation&lt;/code&gt;
-   object is initially an &lt;a href=&quot;#xml-documents&quot; title=&quot;XML documents&quot;&gt;XML
-   document&lt;/a&gt;, but can be made into an &lt;a href=&quot;#html-&quot; title=&quot;HTML
-   documents&quot;&gt;HTML document&lt;/a&gt; by calling &lt;code title=dom-document-open&gt;&lt;a
-   href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; on it.
-
-  &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing this
-   specification) must also implement the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface, available using
-   binding-specific methods. (This is the case whether or not the document in
-   question is an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;
-   or indeed whether it contains any &lt;a href=&quot;#html-elements&quot;&gt;HTML
-   elements&lt;/a&gt; at all.) &lt;code&gt;Document&lt;/code&gt; objects must also implement
-   the document-level interface of any other namespaces found in the document
-   that the UA supports. For example, if an HTML implementation also supports
-   SVG, then the &lt;code&gt;Document&lt;/code&gt; object must implement &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;SVGDocument&lt;/code&gt;.
-
-  &lt;p class=note&gt;Because the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface is now obtained
-   using binding-specific casting methods instead of simply being the primary
-   interface of the document object, it is no longer defined as inheriting
-   from &lt;code&gt;Document&lt;/code&gt;.
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=htmldocument&gt;HTMLDocument&lt;/dfn&gt; {
-  // &lt;a href=&quot;#resource0&quot;&gt;resource metadata management&lt;/a&gt;
-  [PutForwards=href] readonly attribute &lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt; &lt;a href=&quot;#location0&quot; title=dom-document-location&gt;location&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#url&quot; title=dom-document-URL&gt;URL&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#domain&quot; title=dom-document-domain&gt;domain&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#referrer&quot; title=dom-document-referrer&gt;referrer&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#cookie0&quot; title=dom-document-cookie&gt;cookie&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#lastmodified&quot; title=dom-document-lastModified&gt;lastModified&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#compatmode&quot; title=dom-document-compatMode&gt;compatMode&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#charset0&quot; title=dom-document-charset&gt;charset&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#characterset&quot; title=dom-document-characterSet&gt;characterSet&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#defaultcharset&quot; title=dom-document-defaultCharset&gt;defaultCharset&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#readystate&quot; title=dom-document-readyState&gt;readyState&lt;/a&gt;;
-
-  // &lt;a href=&quot;#dom-tree0&quot;&gt;DOM tree accessors&lt;/a&gt;
-           attribute DOMString &lt;a href=&quot;#document.title&quot; title=dom-document-title&gt;title&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#dir1&quot; title=dom-document-dir&gt;dir&lt;/a&gt;;
-           attribute &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; &lt;a href=&quot;#body&quot; title=dom-document-body&gt;body&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#images0&quot; title=dom-document-images&gt;images&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#embeds&quot; title=dom-document-embeds&gt;embeds&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#plugins&quot; title=dom-document-plugins&gt;plugins&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#links0&quot; title=dom-document-links&gt;links&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#forms0&quot; title=dom-document-forms&gt;forms&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#anchors&quot; title=dom-document-anchors&gt;anchors&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#scripts&quot; title=dom-document-scripts&gt;scripts&lt;/a&gt;;
-  NodeList &lt;a href=&quot;#getelementsbyname&quot; title=dom-document-getElementsByName&gt;getElementsByName&lt;/a&gt;(in DOMString elementName);
-  NodeList &lt;a href=&quot;#getelementsbyclassname&quot; title=dom-document-getElementsByClassName&gt;getElementsByClassName&lt;/a&gt;(in DOMString classNames);
-
-  // &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup insertion&lt;/a&gt;
-           attribute DOMString &lt;a href=&quot;#innerhtml&quot; title=dom-innerHTML&gt;innerHTML&lt;/a&gt;;
-  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;();
-  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString type);
-  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString type, in DOMString replace);
-  &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features);
-  &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features, in boolean replace);
-  void &lt;a href=&quot;#close&quot; title=dom-document-close&gt;close&lt;/a&gt;();
-  void &lt;a href=&quot;#document.write&quot; title=dom-document-write&gt;write&lt;/a&gt;(in DOMString text);
-  void &lt;a href=&quot;#document.writeln...&quot; title=dom-document-writeln&gt;writeln&lt;/a&gt;(in DOMString text);
-
-  // &lt;a href=&quot;#user-interaction&quot;&gt;user interaction&lt;/a&gt;
-  &lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt; &lt;a href=&quot;#getselection0&quot; title=dom-document-getSelection&gt;getSelection&lt;/a&gt;();
-  readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;a href=&quot;#activeelement&quot; title=dom-document-activeElement&gt;activeElement&lt;/a&gt;;
-  boolean &lt;a href=&quot;#hasfocus&quot; title=dom-document-hasFocus&gt;hasFocus&lt;/a&gt;();
-           attribute boolean &lt;a href=&quot;#designMode&quot; title=dom-document-designMode&gt;designMode&lt;/a&gt;;
-  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId);
-  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean showUI);
-  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean showUI, in DOMString value);
-  boolean &lt;a href=&quot;#querycommandenabled&quot; title=dom-document-queryCommandEnabled&gt;queryCommandEnabled&lt;/a&gt;(in DOMString commandId);
-  boolean &lt;a href=&quot;#querycommandindeterm&quot; title=dom-document-queryCommandIndeterm&gt;queryCommandIndeterm&lt;/a&gt;(in DOMString commandId);
-  boolean &lt;a href=&quot;#querycommandstate&quot; title=dom-document-queryCommandState&gt;queryCommandState&lt;/a&gt;(in DOMString commandId);
-  boolean &lt;a href=&quot;#querycommandsupported&quot; title=dom-document-queryCommandSupported&gt;queryCommandSupported&lt;/a&gt;(in DOMString commandId);
-  DOMString &lt;a href=&quot;#querycommandvalue&quot; title=dom-document-queryCommandValue&gt;queryCommandValue&lt;/a&gt;(in DOMString commandId);
-  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#commands0&quot; title=dom-document-commands&gt;commands&lt;/a&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;Since the &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;
-   interface holds methods and attributes related to a number of disparate
-   features, the members of this interface are described in various different
-   sections.
-
-  &lt;h4 id=security&gt;&lt;span class=secno&gt;2.1.1 &lt;/span&gt;Security&lt;/h4&gt;
-
-  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;
-   whenever any of the members of an &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object are accessed by
-   scripts whose &lt;a href=&quot;#effective3&quot;&gt;effective script origin&lt;/a&gt; is not the
-   &lt;a href=&quot;#same-origin&quot; title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
-   &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=&quot;#effective3&quot;&gt;effective script origin&lt;/a&gt;.
-
-  &lt;h4 id=resource&gt;&lt;span class=secno&gt;2.1.2 &lt;/span&gt;&lt;dfn id=resource0&gt;Resource
-   metadata management&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn id=url title=dom-document-URL&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt; attribute
-   must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-  XXXDOCURL xref --&gt;.
-
-  &lt;p&gt;The &lt;dfn id=referrer
-   title=dom-document-referrer&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return either the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;a
-   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#source0&quot;&gt;source
-   browsing context&lt;/a&gt; at the time the navigation was started (that is, the
-   page which &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; the &lt;a
-   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to the current document), or the
-   empty string if there is no such originating page, or if the UA has been
-   configured not to report referrers in this case, or if the navigation was
-   initiated for a &lt;a href=&quot;#hyperlinks&quot;&gt;hyperlink&lt;/a&gt; with a &lt;code
-   title=rel-noreferrer&gt;&lt;a href=&quot;#noreferrer&quot;&gt;noreferrer&lt;/a&gt;&lt;/code&gt; keyword.
-
-  &lt;p class=note&gt;In the case of HTTP, the &lt;code title=dom-document-referrer&gt;&lt;a
-   href=&quot;#referrer&quot;&gt;referrer&lt;/a&gt;&lt;/code&gt; DOM attribute will match the &lt;code
-   title=&quot;&quot;&gt;Referer&lt;/code&gt; (sic) header that was sent when fetching the
-   current page.
-
-  &lt;p class=note&gt;Typically user agents are configured to not report referrers
-   in the case where the referrer uses an encrypted protocol and the current
-   page does not (e.g. when navigating from an &lt;code title=&quot;&quot;&gt;https:&lt;/code&gt;
-   page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt; page).
-
-  &lt;hr&gt;
-
-  &lt;p&gt;The &lt;dfn id=cookie0 title=dom-document-cookie&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
-   attribute represents the cookies of the resource.&lt;/p&gt;
-  &lt;!-- XXX this needs work; e.g. document.open() should return the
-  cookies of the document that called document.open(), not of
-  about:blank or the document that had .open() called on, as I
-  understand it. --&gt;
-
-  &lt;p id=sandboxCookies&gt;On getting, if the &lt;a href=&quot;#sandboxed2&quot;&gt;sandboxed
-   origin browsing context flag&lt;/a&gt; is set on the &lt;a
-   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the document, the user agent
-   must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;. Otherwise, it
-   must return the same string as the value of the &lt;code
-   title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header it would include if fetching the
-   resource indicated by &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, as per RFC 2109 section 4.3.4.
-   &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;
-
-  &lt;p&gt;On setting, if the &lt;a href=&quot;#sandboxed2&quot;&gt;sandboxed origin browsing
-   context flag&lt;/a&gt; is set on the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
-   of the document, the user agent must raise a &lt;a href=&quot;#security9&quot;&gt;security
-   exception&lt;/a&gt;. Otherwise, the user agent must act as it would when
-   processing cookies if it had just attempted to fetch &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, and had received a response
-   with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the specified value,
-   as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3. &lt;a
-   href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;
-
-  &lt;p class=note&gt;Since the &lt;code title=dom-document-cookie&gt;&lt;a
-   href=&quot;#cookie0&quot;&gt;cookie&lt;/a&gt;&lt;/code&gt; attribute is accessible across frames,
-   the path restrictions on cookies are only a tool to help manage which
-   cookies are sent to which parts of the site, and are not in any way a
-   security feature.
-
-  &lt;hr&gt;
-
-  &lt;p&gt;The &lt;dfn id=lastmodified
-   title=dom-document-lastModified&gt;&lt;code&gt;lastModified&lt;/code&gt;&lt;/dfn&gt; attribute,
-   on getting, must return the date and time of the &lt;code&gt;Document&lt;/code&gt;'s
-   source file's last modification, in the user's local timezone, in the
-   following format:
-
-  &lt;ol&gt;
-   &lt;li&gt; The month component of the date.
-
-   &lt;li&gt; A U+002F SOLIDUS character ('/').
-
-   &lt;li&gt; The day component of the date.
-
-   &lt;li&gt; A U+002F SOLIDUS character ('/').
-
-   &lt;li&gt; The year component of the date.
-
-   &lt;li&gt; A U+0020 SPACE character.
-
-   &lt;li&gt; The hours component of the time.
-
-   &lt;li&gt; A U+003A COLON character (':').
-
-   &lt;li&gt; The minutes component of the time.
-
-   &lt;li&gt; A U+003A COLON character (':').
-
-   &lt;li&gt; The seconds component of the time.
-  &lt;/ol&gt;
-
-  &lt;p&gt;All the numeric components above, other than the year, must be given as
-   two digits in the range U+0030 DIGIT ZERO to U+0039 DIGIT NINE
-   representing the number in base ten, zero-padded if necessary.
-
-  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt;'s source file's last modification date and
-   time must be derived from relevant features of the networking protocols
-   used, e.g. from the value of the HTTP &lt;code title=&quot;&quot;&gt;Last-Modified&lt;/code&gt;
-   header of the document, or from metadata in the file system for local
-   files. If the last modification date and time are not known, the attribute
-   must return the string &lt;code title=&quot;&quot;&gt;01/01/1970 00:00:00&lt;/code&gt;.
-
-  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; is always set to one of three modes: &lt;dfn
-   id=no-quirks&gt;no quirks mode&lt;/dfn&gt;, the default; &lt;dfn id=quirks&gt;quirks
-   mode&lt;/dfn&gt;, used typically for legacy documents; and &lt;dfn
-   id=limited&gt;limited quirks mode&lt;/dfn&gt;, also known as &quot;almost standards&quot;
-   mode. The mode is only ever changed from the default by the &lt;a
-   href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, based on the presence, absence, or value
-   of the DOCTYPE string.
-
-  &lt;p&gt;The &lt;dfn id=compatmode
-   title=dom-document-compatMode&gt;&lt;code&gt;compatMode&lt;/code&gt;&lt;/dfn&gt; DOM attribute
-   must return the literal string &quot;&lt;code title=&quot;&quot;&gt;CSS1Compat&lt;/code&gt;&quot; unless
-   the document has been set to &lt;a href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt; by the &lt;a
-   href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in which case it must instead return the
-   literal string &quot;&lt;code title=&quot;&quot;&gt;BackCompat&lt;/code&gt;&quot;.
-
   &lt;div class=big-issue&gt;
-   &lt;p&gt;As far as parsing goes, the quirks I know of are:&lt;/p&gt;
+   &lt;p&gt;This section will do the following:&lt;/p&gt;
 
    &lt;ul&gt;
-    &lt;li&gt;Comment parsing is different.
+    &lt;li&gt;define URL as IRI and replace all uses of URIs and IRIs in the rest
+     of the spec with URL
 
-    &lt;li&gt;&lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; can contain &lt;code&gt;&lt;a
-     href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt;
+    &lt;li&gt;define &quot;valid URL&quot; in terms of valid URIs and IRIs and replace that
+     concept through the spec to a pointer here, getting rid of references to
+     &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+     href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section
 
-    &lt;li&gt;Safari and IE have special parsing rules for &lt;% ... %&gt; (even in
-     standards mode, though clearly this should be quirks-only).
-   &lt;/ul&gt;
-  &lt;/div&gt;
+    &lt;li&gt;define &quot;valid URL reference&quot; in terms of valid URI references and IRI
+     references and replace that concept through the spec to a pointer here,
+     getting rid of references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+     href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section
 
-  &lt;p&gt;Documents have an associated &lt;dfn id=character1 title=&quot;document's
-   character encoding&quot;&gt;character encoding&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt;
-   object is created, the &lt;a href=&quot;#character1&quot;&gt;document's character
-   encoding&lt;/a&gt; must be initialized to UTF-16. Various algorithms during page
-   loading affect this value, as does the &lt;code title=dom-document-charset&gt;&lt;a
-   href=&quot;#charset0&quot;&gt;charset&lt;/a&gt;&lt;/code&gt; setter. &lt;a
-   href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt; &lt;!-- XXX
-  <A HREF="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</A> --&gt;
+    &lt;li&gt;define how to parse URLs (maybe by deferring to RFCs)
 
-  &lt;p&gt;The &lt;dfn id=charset0
-   title=dom-document-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt; DOM attribute must,
-   on getting, return the preferred MIME name of the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;. On setting, if the
-   new value is an IANA-registered alias for a character encoding, the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must be set to that
-   character encoding. (Otherwise, nothing happens.)
+    &lt;li&gt;
+     &lt;p&gt;define how to handle URIs that contain non-ascii characters (and it's
+      not the same as handling as IRIs, especially if the character encoding
+      of the document isn't UTF-8)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=characterset
-   title=dom-document-characterSet&gt;&lt;code&gt;characterSet&lt;/code&gt;&lt;/dfn&gt; DOM
-   attribute must, on getting, return the preferred MIME name of the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;.
+     &lt;p&gt;First parse it (we need to define that. For some schemes it's not per
+      spec -- e.g. apparently for ftp: we should split from hosts on ';').
+      Then handle each bit as follows:&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=defaultcharset
-   title=dom-document-defaultCharset&gt;&lt;code&gt;defaultCharset&lt;/code&gt;&lt;/dfn&gt; DOM
-   attribute must, on getting, return the preferred MIME name of a character
-   encoding, possibly the user's default encoding, or an encoding associated
-   with the user's current geographical location, or any arbitrary encoding
-   name.
+     &lt;p&gt;scheme: no further processing (treat %-escaped characters literally,
+      treat unicode characters as unicode characters).&lt;/p&gt;
 
-  &lt;p&gt;Each document has a &lt;dfn id=current&gt;current document readiness&lt;/dfn&gt;.
-   When a &lt;code&gt;Document&lt;/code&gt; object is created, it must have its &lt;a
-   href=&quot;#current&quot;&gt;current document readiness&lt;/a&gt; set to the string
-   &quot;loading&quot;. Various algorithms during page loading affect this value. When
-   the value is set, the user agent must &lt;a href=&quot;#firing2&quot;&gt;fire a simple
-   event&lt;/a&gt; called &lt;code
-   title=event-readystatechanged&gt;readystatechanged&lt;/code&gt; at the
-   &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
-  &lt;!-- XXX define
-  document.onreadystatechange --&gt;
+     &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode
+      characters as per IDN.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=readystate
-   title=dom-document-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM attribute
-   must, on getting, return the &lt;a href=&quot;#current&quot;&gt;current document
-   readiness&lt;/a&gt;.
+     &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and
+      percent-encode.&lt;/p&gt;
 
-  &lt;h3 id=elements&gt;&lt;span class=secno&gt;2.2 &lt;/span&gt;Elements&lt;/h3&gt;
+     &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's
+      encoding. Do not percent-encode.&lt;/p&gt;
 
-  &lt;p&gt;The nodes representing &lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in the
-   DOM must implement, and expose to scripts, the interfaces listed for them
-   in the relevant sections of this specification. This includes &lt;a
-   href=&quot;#xhtml5&quot;&gt;XHTML&lt;/a&gt; elements in &lt;a href=&quot;#xml-documents&quot;&gt;XML
-   documents&lt;/a&gt;, even when those documents are in another context (e.g.
-   inside an XSLT transform).
+    &lt;li&gt;define how to resolve relative URLs in markup attributes (using
+     XMLBase as defined elsewhere right now)
 
-  &lt;p&gt;The basic interface, from which all the &lt;a href=&quot;#html-elements&quot;&gt;HTML
-   elements&lt;/a&gt;' interfaces inherit, and which must be used by elements that
-   have no additional requirements, is the &lt;code&gt;&lt;a
-   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; interface.
+    &lt;li&gt;define how to resolve relative URLs in APIs, using the &lt;dfn
+     id=scripts&gt;script's base URI&lt;/dfn&gt; maybe
 
-  &lt;pre
-   class=idl&gt;interface &lt;dfn id=htmlelement&gt;HTMLElement&lt;/dfn&gt; : &lt;span&gt;Element&lt;/span&gt; {
-  // &lt;a href=&quot;#dom-tree0&quot;&gt;DOM tree accessors&lt;/a&gt;
-  NodeList &lt;a href=&quot;#getelementsbyclassname0&quot; title=dom-getElementsByClassName&gt;getElementsByClassName&lt;/a&gt;(in DOMString classNames);
+    &lt;li&gt;define what it means to resolve a relative URL when the base URL
+     doesn't have a path hierarchy (e.g. data:, javascript:, about:blank
+     URLs)
 
-  // &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup insertion&lt;/a&gt;
-           attribute DOMString &lt;a href=&quot;#innerhtml&quot; title=dom-innerHTML&gt;innerHTML&lt;/a&gt;;
+    &lt;li&gt;define &quot;an &lt;dfn id=elements3&gt;element's base URI&lt;/dfn&gt;&quot; and make the
+     various places that talk about a base URI in the context of an element
+     use that definition
 
-  // &lt;span&gt;metadata attributes&lt;/span&gt;
-           attribute DOMString &lt;a href=&quot;#id0&quot; title=dom-id&gt;id&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#title0&quot; title=dom-title&gt;title&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#lang0&quot; title=dom-lang&gt;lang&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#dir0&quot; title=dom-dir&gt;dir&lt;/a&gt;;
-           attribute &lt;span&gt;DOMString&lt;/span&gt; &lt;a href=&quot;#classname&quot; title=dom-className&gt;className&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt; &lt;a href=&quot;#classlist&quot; title=dom-classList&gt;classList&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt; &lt;a href=&quot;#dataset&quot; title=dom-dataset&gt;dataset&lt;/a&gt;;
+    &lt;li&gt;make the language used to refer to resolving a base URI consistent
+     throughout, maybe make it hyperlink to a definition each time
 
-  // &lt;a href=&quot;#user-interaction&quot;&gt;user interaction&lt;/a&gt;
-           attribute boolean &lt;a href=&quot;#irrelevant0&quot; title=dom-irrelevant&gt;irrelevant&lt;/a&gt;;
-  void &lt;a href=&quot;#click1&quot; title=dom-click&gt;click&lt;/a&gt;();
-  void &lt;a href=&quot;#scrollintoview&quot; title=dom-scrollIntoView&gt;scrollIntoView&lt;/a&gt;();
-  void &lt;a href=&quot;#scrollintoview&quot; title=dom-scrollIntoView&gt;scrollIntoView&lt;/a&gt;(in boolean top);
-           attribute long &lt;a href=&quot;#tabindex0&quot; title=dom-tabindex&gt;tabIndex&lt;/a&gt;;
-  void &lt;a href=&quot;#focus0&quot; title=dom-focus&gt;focus&lt;/a&gt;();
-  void &lt;a href=&quot;#blur&quot; title=dom-blur&gt;blur&lt;/a&gt;();
-           attribute boolean &lt;a href=&quot;#draggable0&quot; title=dom-draggable&gt;draggable&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#contenteditable1&quot; title=dom-contentEditable&gt;contentEditable&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#iscontenteditable&quot; title=dom-isContentEditable&gt;isContentEditable&lt;/a&gt;;
-           attribute &lt;a href=&quot;#htmlmenuelement&quot;&gt;HTMLMenuElement&lt;/a&gt; &lt;a href=&quot;#contextmenu0&quot; title=dom-contextMenu&gt;contextMenu&lt;/a&gt;;
+    &lt;li&gt;define a cheap, interoperable mechanism for URL attributes and
+     anything else that relies on xml:base and the base element to handle
+     dynamic changes to those attributes and elements, possibly by defining
+     some mechanism which causes changes to be ignored in some reliable way.
+     &lt;!--
+On Sat, 1 Mar 2008, Anne van Kesteren wrote:
+&gt;
+&gt; Note that the new base URI would only take effect once you actually did
+&gt; something with a potentially affected object. For instance, &lt;img&gt; would
+&gt; not start loading a new image if the base URI changes. &lt;img&gt;.src =
+&gt; &lt;img&gt;.getAttribute(&quot;src&quot;) could start loading a new resource however if
+&gt; the base URI changed since the initial load.
 
-  // &lt;span&gt;styling&lt;/span&gt;
-  readonly attribute &lt;span&gt;CSSStyleDeclaration&lt;/span&gt; &lt;a href=&quot;#style0&quot; title=dom-style&gt;style&lt;/a&gt;;
+On Sat, 1 Mar 2008, Jonas Sicking wrote:
+&gt; 
+&gt; Well, that was my intention with the initial proposal. But Hixie pointed    
+&gt; out that &quot;did something&quot; is a very hard thing to define. For example on 
+&gt; a &lt;a href=&quot;...&quot;&gt;, does the user hovering the node count? Does resizing
+&gt; the window count? Does removing the node from the DOM and reinserting it
+&gt; count?
 
-  // &lt;span&gt;data templates&lt;/span&gt;
-           attribute DOMString &lt;a href=&quot;#template0&quot; title=dom-template&gt;template&lt;/a&gt;;
-  readonly attribute HTMLDataTemplateElement &lt;a href=&quot;#templateelement&quot; title=dom-templateElement&gt;templateElement&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#ref0&quot; title=dom-ref&gt;ref&lt;/a&gt;;
-  readonly attribute Node &lt;a href=&quot;#refnode&quot; title=dom-refNode&gt;refNode&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#registrationmark0&quot; title=dom-registrationMark&gt;registrationMark&lt;/a&gt;;
-  readonly attribute DocumentFragment &lt;a href=&quot;#originalcontent&quot; title=dom-originalContent&gt;originalContent&lt;/a&gt;;
+On Sat, 1 Mar 2008, Maciej Stachowiak wrote:
+&gt; 
+&gt; How about requiring that the base used is the one in effect when a given
+&gt; relative URI is resolved, and define that URIs for resource-loading 
+&gt; elements are resolved at the time the relevant attribute is set or
+&gt; parsed (but for hyperlinks, at the time it is dereferenced). That is        
+&gt; easy to implement, interoperable, and reasonably predictable. It makes
+&gt; sense that changing &lt;base&gt; would affect future loads but not trigger
+&gt; reloads of already loaded or already in progress resources.
 
-  // &lt;a href=&quot;#event4&quot;&gt;event handler DOM attributes&lt;/a&gt;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onabort&quot; title=handler-onabort&gt;onabort&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onbeforeunload&quot; title=handler-onbeforeunload&gt;onbeforeunload&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onblur&quot; title=handler-onblur&gt;onblur&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onchange&quot; title=handler-onchange&gt;onchange&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onclick&quot; title=handler-onclick&gt;onclick&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#oncontextmenu&quot; title=handler-oncontextmenu&gt;oncontextmenu&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondblclick&quot; title=handler-ondblclick&gt;ondblclick&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondrag&quot; title=handler-ondrag&gt;ondrag&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragend&quot; title=handler-ondragend&gt;ondragend&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragenter&quot; title=handler-ondragenter&gt;ondragenter&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragleave&quot; title=handler-ondragleave&gt;ondragleave&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragover&quot; title=handler-ondragover&gt;ondragover&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragstart&quot; title=handler-ondragstart&gt;ondragstart&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondrop&quot; title=handler-ondrop&gt;ondrop&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onerror&quot; title=handler-onerror&gt;onerror&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onfocus&quot; title=handler-onfocus&gt;onfocus&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeydown&quot; title=handler-onkeydown&gt;onkeydown&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeypress&quot; title=handler-onkeypress&gt;onkeypress&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeyup&quot; title=handler-onkeyup&gt;onkeyup&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onload&quot; title=handler-onload&gt;onload&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmessage&quot; title=handler-onmessage&gt;onmessage&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousedown&quot; title=handler-onmousedown&gt;onmousedown&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousemove&quot; title=handler-onmousemove&gt;onmousemove&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseout&quot; title=handler-onmouseout&gt;onmouseout&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseover&quot; title=handler-onmouseover&gt;onmouseover&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseup&quot; title=handler-onmouseup&gt;onmouseup&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousewheel&quot; title=handler-onmousewheel&gt;onmousewheel&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onresize&quot; title=handler-onresize&gt;onresize&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onscroll&quot; title=handler-onscroll&gt;onscroll&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onselect&quot; title=handler-onselect&gt;onselect&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onstorage&quot; title=handler-onstorage&gt;onstorage&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onsubmit&quot; title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onunload&quot; title=handler-onunload&gt;onunload&lt;/a&gt;;
+possibly &quot;in the event that the xml:base or base href attribute is
+changed, user agents may, whenever convenient, pretend, for the sake
+of url resolution, that it has not changed&quot;
 
-};&lt;/pre&gt;
-
-  &lt;p&gt;As with the &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;
-   interface, the &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
-   interface holds methods and attributes related to a number of disparate
-   features, and the members of this interface are therefore described in
-   various different sections of this specification.
-
-  &lt;h4 id=reflecting&gt;&lt;span class=secno&gt;2.2.1 &lt;/span&gt;Reflecting content
-   attributes in DOM attributes&lt;/h4&gt;
-
-  &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are defined to
-   &lt;dfn id=reflect&gt;reflect&lt;/dfn&gt; a particular &lt;span&gt;content attribute&lt;/span&gt;.
-   This means that on getting, the DOM attribute returns the current value of
-   the content attribute, and on setting, the DOM attribute changes the value
-   of the content attribute to the given value.&lt;/p&gt;
-  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
-  algorithm --&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; attribute
-   whose content attribute is defined to contain a URI, then on getting, the
-   DOM attribute must return the value of the content attribute, resolved to
-   an absolute URI, and on setting, must set the content attribute to the
-   specified literal value. If the content attribute is absent, the DOM
-   attribute must return the default value, if the content attribute has one,
-   or else the empty string.&lt;/p&gt;
-  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
-  algorithm --&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; attribute
-   whose content attribute is defined to contain one or more URIs, then on
-   getting, the DOM attribute must &lt;span title=&quot;split the string on
-   spaces&quot;&gt;split the content attribute on spaces&lt;/span&gt; and return the
-   concatenation of each token URI, resolved to an absolute URI, with a
-   single U+0020 SPACE character between each URI; if the content attribute
-   is absent, the DOM attribute must return the default value, if the content
-   attribute has one, or else the empty string. On setting, the DOM attribute
-   must set the content attribute to the specified literal value.
-
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; whose content
-   attribute is an &lt;a href=&quot;#enumerated&quot;&gt;enumerated attribute&lt;/a&gt;, and the
-   DOM attribute is &lt;dfn id=limited0&gt;limited to only known values&lt;/dfn&gt;,
-   then, on getting, the DOM attribute must return the conforming value
-   associated with the state the attribute is in (in its canonical case), or
-   the empty string if the attribute is in a state that has no associated
-   keyword value; and on setting, if the new value case-insensitively matches
-   one of the keywords given for that attribute, then the content attribute
-   must be set to the conforming value associated with the state that the
-   attribute would be in if set to the given new value, otherwise, if the new
-   value is the empty string, then the content attribute must be removed,
-   otherwise, the setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
-
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but doesn't
-   fall into any of the above categories, then the getting and setting must
-   be done in a transparent, case-preserving manner.
-
-  &lt;p&gt;If a reflecting DOM attribute is a boolean attribute, then on getting
-   the DOM attribute must return true if the attribute is set, and false if
-   it is absent. On setting, the content attribute must be removed if the DOM
-   attribute is set to false, and must be set to have the same value as its
-   name if the DOM attribute is set to true. (This corresponds to the rules
-   for &lt;a href=&quot;#boolean0&quot; title=&quot;boolean attribute&quot;&gt;boolean content
-   attributes&lt;/a&gt;.)
-
-  &lt;p&gt;If a reflecting DOM attribute is a signed integer type
-   (&lt;code&gt;long&lt;/code&gt;) then, on getting, the content attribute must be parsed
-   according to &lt;a href=&quot;#rules0&quot; title=&quot;rules for parsing integers&quot;&gt;the
-   rules for parsing signed integers&lt;/a&gt;, and if that is successful, the
-   resulting value must be returned. If, on the other hand, it fails, or if
-   the attribute is absent, then the default value must be returned instead,
-   or 0 if there is no default value. On setting, the given value must be
-   converted to the shortest possible string representing the number as a &lt;a
-   href=&quot;#valid0&quot;&gt;valid integer&lt;/a&gt; in base ten and then that string must be
-   used as the new content attribute value.
-
-  &lt;p&gt;If a reflecting DOM attribute is an &lt;em&gt;unsigned&lt;/em&gt; integer type
-   (&lt;code&gt;unsigned long&lt;/code&gt;) then, on getting, the content attribute must
-   be parsed according to &lt;a href=&quot;#rules&quot; title=&quot;rules for parsing
-   non-negative integers&quot;&gt;the rules for parsing unsigned integers&lt;/a&gt;, and if
-   that is successful, the resulting value must be returned. If, on the other
-   hand, it fails, or if the attribute is absent, the default value must be
-   returned instead, or 0 if there is no default value. On setting, the given
-   value must be converted to the shortest possible string representing the
-   number as a &lt;a href=&quot;#valid&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten
-   and then that string must be used as the new content attribute value.
-
-  &lt;p&gt;If a reflecting DOM attribute is an unsigned integer type
-   (&lt;code&gt;unsigned long&lt;/code&gt;) that is &lt;dfn id=limited1&gt;limited to only
-   positive non-zero numbers&lt;/dfn&gt;, then the behavior is similar to the
-   previous case, but zero is not allowed. On getting, the content attribute
-   must first be parsed according to &lt;a href=&quot;#rules&quot; title=&quot;rules for
-   parsing non-negative integers&quot;&gt;the rules for parsing unsigned
-   integers&lt;/a&gt;, and if that is successful, the resulting value must be
-   returned. If, on the other hand, it fails, or if the attribute is absent,
-   the default value must be returned instead, or 1 if there is no default
-   value. On setting, if the value is zero, the user agent must fire an
-   &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. Otherwise, the given value must be
-   converted to the shortest possible string representing the number as a &lt;a
-   href=&quot;#valid&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten and then that
-   string must be used as the new content attribute value.
-
-  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
-   (&lt;code&gt;float&lt;/code&gt;) and the content attribute is defined to contain a
-   time offset, then, on getting, the content attribute must be parsed
-   according to &lt;a href=&quot;#rules4&quot; title=&quot;rules for parsing time offsets&quot;&gt;the
-   rules for parsing time offsets&lt;/a&gt;, and if that is successful, the
-   resulting value, in seconds, must be returned. If that fails, or if the
-   attribute is absent, the default value must be returned, or the
-   not-a-number value (NaN) if there is no default value. On setting, the
-   given value, interpreted as a time offset in seconds, must be converted to
-   a string using the &lt;a href=&quot;#time-offset&quot;&gt;time offset serialization
-   rules&lt;/a&gt;, and that string must be used as the new content attribute
-   value.
-
-  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
-   (&lt;code&gt;float&lt;/code&gt;) and it doesn't fall into one of the earlier
-   categories, then, on getting, the content attribute must be parsed
-   according to &lt;a href=&quot;#rules1&quot; title=&quot;rules for parsing floating point
-   number values&quot;&gt;the rules for parsing floating point number values&lt;/a&gt;, and
-   if that is successful, the resulting value must be returned. If, on the
-   other hand, it fails, or if the attribute is absent, the default value
-   must be returned instead, or 0.0 if there is no default value. On setting,
-   the given value must be converted to the shortest possible string
-   representing the number as a &lt;a href=&quot;#valid1&quot;&gt;valid floating point
-   number&lt;/a&gt; in base ten and then that string must be used as the new
-   content attribute value.
-
-  &lt;p&gt;If a reflecting DOM attribute is of the type &lt;code&gt;&lt;a
-   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;, then on getting it must
-   return a &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object
-   whose underlying string is the element's corresponding content attribute.
-   When the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object
-   mutates its underlying string, the content attribute must itself be
-   immediately mutated. When the attribute is absent, then the string
-   represented by the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;
-   object is the empty string; when the object mutates this empty string, the
-   user agent must first add the corresponding content attribute, and then
-   mutate that attribute instead. &lt;code&gt;&lt;a
-   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; attributes are always
-   read-only. The same &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;
-   object must be returned every time for each attribute.
-
-  &lt;p&gt;If a reflecting DOM attribute has the type &lt;code&gt;&lt;a
-   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;, or an interface that descends
-   from &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;, then, on
-   getting, it must run the following algorithm (stopping at the first point
-   where a value is returned):
-
-  &lt;ol&gt;
-   &lt;li&gt;If the corresponding content attribute is absent, then the DOM
-    attribute must return null.
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the element that the &lt;code
-    title=&quot;&quot;&gt;document.getElementById()&lt;/code&gt; method would find if it was
-    passed as its argument the current value of the corresponding content
-    attribute.
-
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or if it is not
-    type-compatible with the DOM attribute, then the DOM attribute must
-    return null.
-
-   &lt;li&gt;Otherwise, it must return &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;.
-  &lt;/ol&gt;
-
-  &lt;p&gt;On setting, if the given element has an &lt;code title=attr-id&gt;&lt;a
-   href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute, then the content attribute must be set
-   to the value of that &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt;
-   attribute. Otherwise, the DOM attribute must be set to the empty string.&lt;/p&gt;
-  &lt;!-- XXX or raise an exception? --&gt;
-
-  &lt;h3 id=common0&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
-
-  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.3.1 &lt;/span&gt;Collections&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-   href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;,
-   and &lt;code&gt;&lt;a
-   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interfaces
-   represent various lists of DOM nodes. Collectively, objects implementing
-   these interfaces are called &lt;dfn id=collections0&gt;collections&lt;/dfn&gt;.
-
-  &lt;p&gt;When a &lt;a href=&quot;#collections0&quot; title=collections&gt;collection&lt;/a&gt; is
-   created, a filter and a root are associated with the collection.
-
-  &lt;p class=example&gt;For example, when the &lt;code&gt;&lt;a
-   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; object for the &lt;code
-   title=dom-document-images&gt;&lt;a href=&quot;#images0&quot;&gt;document.images&lt;/a&gt;&lt;/code&gt;
-   attribute is created, it is associated with a filter that selects only
-   &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, and rooted at the root of
-   the document.
-
-  &lt;p&gt;The &lt;a href=&quot;#collections0&quot; title=collections&gt;collection&lt;/a&gt; then &lt;dfn
-   id=represents title=&quot;represented by the collection&quot;&gt;represents&lt;/dfn&gt; a &lt;a
-   href=&quot;#live&quot;&gt;live&lt;/a&gt; view of the subtree rooted at the collection's root,
-   containing only nodes that match the given filter. The view is linear. In
-   the absence of specific requirements to the contrary, the nodes within the
-   collection must be sorted in &lt;a href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
-
-  &lt;p class=note&gt;The &lt;code title=dom-table-rows&gt;&lt;a
-   href=&quot;#rows&quot;&gt;rows&lt;/a&gt;&lt;/code&gt; list is not in tree order.
-
-  &lt;p&gt;An attribute that returns a collection must return the same object every
-   time it is retrieved.
-
-  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.3.1.1. &lt;/span&gt;HTMLCollection&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface
-   represents a generic &lt;a href=&quot;#collections0&quot;
-   title=collections&gt;collection&lt;/a&gt; of elements.
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=htmlcollection0&gt;HTMLCollection&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=&quot;#length&quot; title=dom-HTMLCollection-length&gt;length&lt;/a&gt;;
-  [IndexGetter] Element &lt;a href=&quot;#itemindex&quot; title=dom-HTMLCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
-  [NameGetter] Element &lt;a href=&quot;#nameditem&quot; title=dom-HTMLCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=length
-   title=dom-HTMLCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return the number of nodes &lt;a href=&quot;#represents&quot;&gt;represented by the
-   collection&lt;/a&gt;.
-
-  &lt;p&gt;The &lt;dfn id=itemindex title=dom-HTMLCollection-item&gt;&lt;code&gt;item(&lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
-   null.
-
-  &lt;p&gt;The &lt;dfn id=nameditem
-   title=dom-HTMLCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the first node in the
-   collection that matches the following requirements:
-
-  &lt;ul&gt;
-   &lt;li&gt;It is an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-    href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt;,
-    &lt;code&gt;form&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a
-    href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element with a &lt;code
-    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
-    or,
-
-   &lt;li&gt;It is an &lt;a href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML
-    element&lt;/a&gt; of any kind with an &lt;code title=attr-id&gt;&lt;a
-    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;.
-    (Non-HTML elements, even if they have IDs, are not searched for the
-    purposes of &lt;code title=dom-HTMLCollection-namedItem&gt;&lt;a
-    href=&quot;#nameditem&quot;&gt;namedItem()&lt;/a&gt;&lt;/code&gt;.)
-  &lt;/ul&gt;
-
-  &lt;p&gt;If no such elements are found, then the method must return null.
-
-  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.3.1.2.
-   &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a
-   href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;
-   interface represents a &lt;a href=&quot;#collections0&quot;
-   title=collections&gt;collection&lt;/a&gt; of form controls.
-
-  &lt;pre
-   class=idl&gt;interface &lt;dfn id=htmlformcontrolscollection0&gt;HTMLFormControlsCollection&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=&quot;#length0&quot; title=dom-HTMLFormControlsCollection-length&gt;length&lt;/a&gt;;
-  [IndexGetter] &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; &lt;a href=&quot;#itemindex0&quot; title=dom-HTMLFormControlsCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
-  [NameGetter] Object &lt;a href=&quot;#nameditem0&quot; title=dom-HTMLFormControlsCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=length0
-   title=dom-HTMLFormControlsCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return the number of nodes &lt;a
-   href=&quot;#represents&quot;&gt;represented by the collection&lt;/a&gt;.
-
-  &lt;p&gt;The &lt;dfn id=itemindex0
-   title=dom-HTMLFormControlsCollection-item&gt;&lt;code&gt;item(&lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
-   null.
-
-  &lt;p&gt;The &lt;dfn id=nameditem0
-   title=dom-HTMLFormControlsCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must act according to the
-   following algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;If, at the time the method is called, there is exactly one node in the
-    collection that has either an &lt;code title=attr-id&gt;&lt;a
-    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-name&gt;name&lt;/code&gt;
-    attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and
-    stop the algorithm.
-
-   &lt;li&gt;Otherwise, if there are no nodes in the collection that have either an
-    &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
-    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
-    then return null and stop the algorithm.
-
-   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a live
-    view of the &lt;code&gt;&lt;a
-    href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;
-    object, further filtered so that the only nodes in the
-    &lt;code&gt;NodeList&lt;/code&gt; object are those that have either an &lt;code
-    title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
-    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;.
-    The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object must be sorted in &lt;a
-    href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
-
-   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.
-  &lt;/ol&gt;
-  &lt;!--
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
+possibly define &quot;base uri change notification behaviour&quot; for all
+elements with URI attributes, and then define changing base href and
+xml:base to activate that behaviour on all elements in the affected
+subtree. Also make this algorithm get called when a node from another
+document is inserted into an HTML document. (we could define that
+you're allowed to do that, in the absence of a DOM Core update)
 --&gt;
+     
+   &lt;/ul&gt;
+  &lt;/div&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.3.1.3.
-   &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
+  &lt;h4 id=interfaces&gt;&lt;span class=secno&gt;2.3.1 &lt;/span&gt;Interfaces for URI
+   manipulation&lt;/h4&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a
-   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interface
-   represents a list of &lt;code&gt;option&lt;/code&gt; elements.
+  &lt;p&gt;An interface that has a complement of &lt;dfn id=uri-decomposition&gt;URI
+   decomposition attributes&lt;/dfn&gt; will have seven attributes with the
+   following definitions:
 
-  &lt;pre
-   class=idl&gt;interface &lt;dfn id=htmloptionscollection0&gt;HTMLOptionsCollection&lt;/dfn&gt; {
-           attribute unsigned long &lt;a href=&quot;#length1&quot; title=dom-HTMLOptionsCollection-length&gt;length&lt;/a&gt;;
-  [IndexGetter] HTMLOptionElement &lt;a href=&quot;#itemindex1&quot; title=dom-HTMLOptionsCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
-  [NameGetter] Object &lt;a href=&quot;#nameditem1&quot; title=dom-HTMLOptionsCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
-};&lt;/pre&gt;
+  &lt;pre class=idl&gt;
+           attribute DOMString &lt;a href=&quot;#protocol&quot; title=dom-uda-protocol&gt;protocol&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#host&quot; title=dom-uda-host&gt;host&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#hostname&quot; title=dom-uda-hostname&gt;hostname&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#port&quot; title=dom-uda-port&gt;port&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#pathname&quot; title=dom-uda-pathname&gt;pathname&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#search&quot; title=dom-uda-search&gt;search&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#hash&quot; title=dom-uda-hash&gt;hash&lt;/a&gt;;
+&lt;/pre&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;p&gt;On getting, the &lt;dfn id=length1
-   title=dom-HTMLOptionsCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; attribute
-   must return the number of nodes &lt;a href=&quot;#represents&quot;&gt;represented by the
-   collection&lt;/a&gt;.
+  &lt;p&gt;The attributes defined to be URI decomposition attributes must act as
+   described for the attributes with the same corresponding names in this
+   section.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;p&gt;On setting, the behavior depends on whether the new value is equal to,
-   greater than, or less than the number of nodes &lt;a
-   href=&quot;#represents&quot;&gt;represented by the collection&lt;/a&gt; at that time. If the
-   number is the same, then setting the attribute must do nothing. If the new
-   value is greater, then &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; new &lt;code&gt;option&lt;/code&gt;
-   elements with no attributes and no child nodes must be appended to the
-   &lt;code&gt;select&lt;/code&gt; element on which the &lt;code&gt;&lt;a
-   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; is rooted,
-   where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two numbers (new
-   value minus old value). If the new value is lower, then the last &lt;var
-   title=&quot;&quot;&gt;n&lt;/var&gt; nodes in the collection must be removed from their parent
-   nodes, where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two
-   numbers (old value minus new value).
+  &lt;p&gt;In addition, an interface with a complement of URI decomposition
+   attributes will define an &lt;dfn id=input
+   title=concept-uda-input&gt;input&lt;/dfn&gt;, which is a URI that the attributes
+   act on, and a &lt;dfn id=common3 title=concept-uda-setter&gt;common setter
+   action&lt;/dfn&gt;, which is a set of steps invoked when any of the attributes'
+   setters are invoked.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;p class=note&gt;Setting &lt;code title=dom-HTMLOptionsCollection-length&gt;&lt;a
-   href=&quot;#length1&quot;&gt;length&lt;/a&gt;&lt;/code&gt; never removes or adds any
-   &lt;code&gt;optgroup&lt;/code&gt; elements, and never adds new children to existing
-   &lt;code&gt;optgroup&lt;/code&gt; elements (though it can remove children from them).
+  &lt;p&gt;The seven URI decomposition attributes have similar requirements.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;p&gt;The &lt;dfn id=itemindex1
-   title=dom-HTMLOptionsCollection-item&gt;&lt;code&gt;item(&lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
-   null.
+  &lt;p&gt;On getting, if the &lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;
+   fulfills the condition given in the &quot;getter condition&quot; column
+   corresponding to the attribute in the table below, the user agent must
+   return the part of the &lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;
+   URI given in the &quot;component&quot; column, with any prefixes specified in the
+   &quot;prefix&quot; column appropriately added to the start of the string and any
+   suffixes specified in the &quot;suffix&quot; column appropriately added to the end
+   of the string. Otherwise, the attribute must return the empty string.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL; algorithms or something? --&gt;
 
-  &lt;p&gt;The &lt;dfn id=nameditem1
-   title=dom-HTMLOptionsCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must act according to the
-   following algorithm:
+  &lt;p&gt;On setting, the new value must first be mutated as described by the
+   &quot;setter preprocessor&quot; column, then mutated by %-escaping any characters in
+   the new value that are not valid in the relevant component as given by the
+   &quot;component&quot; column. Then, if the resulting new value fulfills the
+   condition given in the &quot;setter condition&quot; column, the user agent must make
+   a new string &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; by replacing the component of the
+   URI given by the &quot;component&quot; column in the &lt;a href=&quot;#input&quot;
+   title=concept-uda-input&gt;input&lt;/a&gt; URI with the new value; otherwise, the
+   user agent must let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be equal to the &lt;a
+   href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;. Finally, the user agent
+   must invoke the &lt;a href=&quot;#common3&quot; title=concept-uda-setter&gt;common setter
+   action&lt;/a&gt; with the value of &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
 
-  &lt;ol&gt;
-   &lt;li&gt;If, at the time the method is called, there is exactly one node in the
-    collection that has either an &lt;code title=attr-id&gt;&lt;a
-    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-name&gt;name&lt;/code&gt;
-    attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and
-    stop the algorithm.
+  &lt;p&gt;When replacing a component in the URI, if the component is part of an
+   optional group in the URI syntax consisting of a character followed by the
+   component, the component (including its prefix character) must be included
+   even if the new value is the empty string.
 
-   &lt;li&gt;Otherwise, if there are no nodes in the collection that have either an
-    &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
-    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
-    then return null and stop the algorithm.
+  &lt;p class=note&gt;The previous paragraph applies in particular to the &quot;&lt;code
+   title=&quot;&quot;&gt;:&lt;/code&gt;&quot; before a &lt;port&gt; component, the &quot;&lt;code
+   title=&quot;&quot;&gt;?&lt;/code&gt;&quot; before a &lt;query&gt; component, and the &quot;&lt;code
+   title=&quot;&quot;&gt;#&lt;/code&gt;&quot; before a &lt;fragment&gt; component.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL; algorithms --&gt;
 
-   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a live
-    view of the &lt;code&gt;&lt;a
-    href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; object,
-    further filtered so that the only nodes in the &lt;code&gt;NodeList&lt;/code&gt;
-    object are those that have either an &lt;code title=attr-id&gt;&lt;a
-    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
-    title=attr-option-name&gt;name&lt;/code&gt; attribute equal to &lt;var
-    title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object must be
-    sorted in &lt;a href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
+  &lt;p&gt;The rules for parsing and constructing URIs are described in RFC 3986
+   and RFC 3987. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+   href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
 
-   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.
-  &lt;/ol&gt;
-  &lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;
-
-  &lt;p class=big-issue&gt;We may want to add &lt;code&gt;add()&lt;/code&gt; and
-   &lt;code&gt;remove()&lt;/code&gt; methods here too because IE implements
-   HTMLSelectElement and HTMLOptionsCollection on the same object, and so
-   people use them almost interchangeably in the wild.
-
-  &lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface
-   represents an interface to an underlying string that consists of an &lt;a
-   href=&quot;#unordered&quot;&gt;unordered set of unique space-separated tokens&lt;/a&gt;.
-
-  &lt;p&gt;Which string underlies a particular &lt;code&gt;&lt;a
-   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object is defined when the
-   object is created. It might be a content attribute (e.g. the string that
-   underlies the &lt;code title=dom-classList&gt;&lt;a
-   href=&quot;#classlist&quot;&gt;classList&lt;/a&gt;&lt;/code&gt; object is the &lt;code
-   title=attr-class&gt;&lt;a href=&quot;#class&quot;&gt;class&lt;/a&gt;&lt;/code&gt; attribute), or it might
-   be an anonymous string (e.g. when a &lt;code&gt;&lt;a
-   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object is passed to an
-   author-implemented callback in the &lt;code&gt;&lt;a
-   href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt; APIs).
-
-  &lt;pre
-   class=idl&gt;[&lt;a href=&quot;#stringify&quot; title=dom-tokenlist-toString&gt;Stringifies&lt;/a&gt;] interface &lt;dfn id=domtokenlist0&gt;DOMTokenList&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=&quot;#length2&quot; title=dom-tokenlist-length&gt;length&lt;/a&gt;;
-  [IndexGetter] DOMString &lt;a href=&quot;#itemindex2&quot; title=dom-tokenlist-item&gt;item&lt;/a&gt;(in unsigned long index);
-  boolean &lt;a href=&quot;#hastoken&quot; title=dom-tokenlist-has&gt;has&lt;/a&gt;(in DOMString token);
-  void &lt;a href=&quot;#addtoken&quot; title=dom-tokenlist-add&gt;add&lt;/a&gt;(in DOMString token);
-  void &lt;a href=&quot;#remove&quot; title=dom-tokenlist-remove&gt;remove&lt;/a&gt;(in DOMString token);
-  boolean &lt;a href=&quot;#toggle&quot; title=dom-tokenlist-toggle&gt;toggle&lt;/a&gt;(in DOMString token);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=length2 title=dom-tokenlist-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return the number of &lt;em&gt;unique&lt;/em&gt; tokens that result
-   from &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;splitting the
-   underlying string on spaces&lt;/a&gt;.
-
-  &lt;p&gt;The &lt;dfn id=itemindex2 title=dom-tokenlist-item&gt;&lt;code&gt;item(&lt;var
-   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must &lt;a href=&quot;#split&quot;
-   title=&quot;split a string on spaces&quot;&gt;split the underlying string on
-   spaces&lt;/a&gt;, sort the resulting list of tokens by Unicode
-   codepoint&lt;!-- XXX that's
-  basically nonsense. What sort order do we want here? It should be
-  the cheapest one possible that is well-defined for all Unicode. --&gt;,
-   remove exact duplicates, and then return the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th
-   item in this list. If &lt;var title=&quot;&quot;&gt;index&lt;/var&gt; is equal to or greater
-   than the number of tokens, then the method must return null.
-
-  &lt;p&gt;The &lt;dfn id=hastoken title=dom-tokenlist-has&gt;&lt;code&gt;has(&lt;var
-   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-   algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
-    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
-    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
-
-   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
-    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
-    underlying string.
-
-   &lt;li&gt;If the token indicated by &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is one of the
-    tokens in the object's underlying string then return true and stop this
-    algorithm.
-
-   &lt;li&gt;Otherwise, return false.
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn id=addtoken title=dom-tokenlist-add&gt;&lt;code&gt;add(&lt;var
-   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-   algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
-    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
-    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
-
-   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
-    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
-    underlying string.
-
-   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the tokens in
-    the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
-    underlying string then stop the algorithm.
-
-   &lt;li&gt;Otherwise, if the &lt;code&gt;&lt;a
-    href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's underlying string
-    is not the empty string and the last character of that string is not a &lt;a
-    href=&quot;#space&quot;&gt;space character&lt;/a&gt;, then append a U+0020 SPACE character
-    to the end of that string.
-
-   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
-    &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
-    underlying string.
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn id=remove title=dom-tokenlist-remove&gt;&lt;code&gt;remove(&lt;var
-   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-   algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
-    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
-    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
-
-   &lt;li&gt;Otherwise, &lt;a href=&quot;#remove0&quot; title=&quot;remove a token from a
-    string&quot;&gt;remove the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
-    string&lt;/a&gt;.
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn id=toggle title=dom-tokenlist-toggle&gt;&lt;code&gt;toggle(&lt;var
-   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-   algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
-    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
-    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
-
-   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
-    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
-    underlying string.
-
-   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the tokens in
-    the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
-    underlying string then &lt;a href=&quot;#remove0&quot; title=&quot;remove a token from a
-    string&quot;&gt;remove the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
-    string&lt;/a&gt;, and stop the algorithm, returning false.
-
-   &lt;li&gt;Otherwise, if the &lt;code&gt;&lt;a
-    href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's underlying string
-    is not the empty string and the last character of that string is not a &lt;a
-    href=&quot;#space&quot;&gt;space character&lt;/a&gt;, then append a U+0020 SPACE character
-    to the end of that string.
-
-   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
-    &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
-    underlying string.
-
-   &lt;li&gt;Return true.
-  &lt;/ol&gt;
-
-  &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a
-   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface must &lt;dfn
-   id=stringify title=dom-tokenlist-toString&gt;stringify&lt;/dfn&gt; to the object's
-   underlying string representation.
-
-  &lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface
-   represents a set of name-value pairs. When a &lt;code&gt;&lt;a
-   href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; object is instanced, it is
-   associated with three algorithms, one for getting values from names, one
-   for setting names to certain values, and one for deleting names.
-
-  &lt;p class=big-issue&gt;The names of the methods on this interface are temporary
-   and will be fixed when the Web IDL / &quot;Language Bindings for DOM
-   Specifications&quot; spec is ready to handle this case.
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=domstringmap0&gt;DOMStringMap&lt;/dfn&gt; {
-  [NameGetter] DOMString &lt;a href=&quot;#xxx1name&quot; title=dom-stringmap-XXX1&gt;XXX1&lt;/a&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
-  [NameSetter] void &lt;a href=&quot;#xxx2name&quot; title=dom-stringmap-XXX2&gt;XXX2&lt;/a&gt;(in DOMString name, in DOMString value); &lt;!-- XXX DOMB --&gt;
-  [XXX] boolean &lt;a href=&quot;#xxx3name&quot; title=dom-stringmap-XXX3&gt;XXX3&lt;/a&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=xxx1name title=dom-stringmap-XXX1&gt;&lt;code&gt;XXX1(&lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
-   getting values from names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name,
-   and must return the corresponding value, or null if &lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt; has no corresponding value.
-
-  &lt;p&gt;The &lt;dfn id=xxx2name title=dom-stringmap-XXX2&gt;&lt;code&gt;XXX2(&lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must
-   call the algorithm for setting names to certain values, passing &lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt; as the name and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as the
-   value.
-
-  &lt;p&gt;The &lt;dfn id=xxx3name title=dom-stringmap-XXX3&gt;&lt;code&gt;XXX3(&lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
-   deleting names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name, and must
-   return true.
-
-  &lt;h4 id=dom-feature&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
-
-  &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support, and for
-   obtaining implementations of interfaces, using &lt;a
-   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&quot;&gt;feature
-   strings&lt;/a&gt;. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;
-
-  &lt;p&gt;A DOM application can use the &lt;dfn id=hasfeature
-   title=hasFeature&gt;&lt;code&gt;hasFeature(&lt;var title=&quot;&quot;&gt;feature&lt;/var&gt;, &lt;var
-   title=&quot;&quot;&gt;version&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the
-   &lt;code&gt;DOMImplementation&lt;/code&gt; interface with parameter values &quot;&lt;code
-   title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; (respectively) to determine
-   whether or not this module is supported by the implementation. In addition
-   to the feature string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, the feature string
-   &quot;&lt;code title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (with version string &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) can
-   be used to check if the implementation supports XHTML. User agents should
-   respond with a true value when the &lt;code&gt;&lt;a
-   href=&quot;#hasfeature&quot;&gt;hasFeature&lt;/a&gt;&lt;/code&gt; method is queried with these
-   values. Authors are cautioned, however, that UAs returning true might not
-   be perfectly compliant, and that UAs returning false might well have
-   support for features in this specification; in general, therefore, use of
-   this method is discouraged.
-
-  &lt;p&gt;The values &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code
-   title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (both with version &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) should also
-   be supported in the context of the &lt;code&gt;getFeature()&lt;/code&gt; and
-   &lt;code&gt;isSupported()&lt;/code&gt; methods, as defined by DOM3 Core.
-
-  &lt;p class=note&gt;The interfaces defined in this specification are not always
-   supersets of the interfaces defined in DOM2 HTML; some features that were
-   formerly deprecated, poorly supported, rarely used or considered
-   unnecessary have been removed. Therefore it is not guaranteed that an
-   implementation that supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
-   &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
-   &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.
-
-  &lt;h3 id=dom-tree&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;&lt;dfn id=dom-tree0&gt;DOM tree
-   accessors&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;&lt;dfn id=the-html0&gt;The &lt;code&gt;html&lt;/code&gt; element&lt;/dfn&gt; of a document is
-   the document's root element, if there is one and it's an &lt;code&gt;&lt;a
-   href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, or null otherwise.
-
-  &lt;p&gt;&lt;dfn id=the-head0&gt;The &lt;code&gt;head&lt;/code&gt; element&lt;/dfn&gt; of a document is
-   the first &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element that is a child of
-   &lt;a href=&quot;#the-html0&quot;&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt;, if there is one,
-   or null otherwise.
-
-  &lt;p&gt;&lt;dfn id=the-title1&gt;The &lt;code&gt;title&lt;/code&gt; element&lt;/dfn&gt; of a document is
-   the first &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; element in the document
-   (in tree order), if there is one, or null otherwise.
-
-  &lt;p&gt;The &lt;dfn id=document.title
-   title=dom-document-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute must, on
-   getting, run the following algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; is an &lt;code&gt;svg&lt;/code&gt;
-     element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
-     namespace, and the user agent supports SVG, then the getter must return
-     the value that would have been returned by the DOM attribute of the same
-     name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface.
-
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, it must return a concatenation of the data of all the child
-     &lt;a href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; of &lt;a
-     href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt;, in tree order, or
-     the empty string if &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
-     element&lt;/a&gt; is null.
-  &lt;/ol&gt;
-
-  &lt;p&gt;On setting, the following algorithm must be run:
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; is an &lt;code&gt;svg&lt;/code&gt;
-     element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
-     namespace, and the user agent supports SVG, then the setter must defer
-     to the setter for the DOM attribute of the same name on the
-     &lt;code&gt;SVGDocument&lt;/code&gt; interface. Stop the algorithm here.
-
-   &lt;li&gt;If &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt; is null
-    and &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt; is null, then
-    the attribute must do nothing. Stop the algorithm here.
-
-   &lt;li&gt;If &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt; is null,
-    then a new &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; element must be
-    created and appended to &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt;
-    element&lt;/a&gt;.
-
-   &lt;li&gt;The children of &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
-    element&lt;/a&gt; (if any) must all be removed.
-
-   &lt;li&gt;A single &lt;code&gt;Text&lt;/code&gt; node whose data is the new value being
-    assigned must be appended to &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
-    element&lt;/a&gt;.
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;code title=dom-document-title&gt;&lt;a
-   href=&quot;#document.title&quot;&gt;title&lt;/a&gt;&lt;/code&gt; attribute on the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface should shadow the
-   attribute of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface when
-   the user agent supports both HTML and SVG.
-
-  &lt;p&gt;&lt;dfn id=the-body1&gt;The body element&lt;/dfn&gt; of a document is the first
-   child of &lt;a href=&quot;#the-html0&quot;&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt; that is
-   either a &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element or a
-   &lt;code&gt;frameset&lt;/code&gt; element. If there is no such element, it is null. If
-   the body element is null, then when the specification requires that events
-   be fired at &quot;the body element&quot;, they must instead be fired at the
-   &lt;code&gt;Document&lt;/code&gt; object.
-
-  &lt;p&gt;The &lt;dfn id=body title=dom-document-body&gt;&lt;code&gt;body&lt;/code&gt;&lt;/dfn&gt;
-   attribute, on getting, must return &lt;a href=&quot;#the-body1&quot;&gt;the body
-   element&lt;/a&gt; of the document (either a &lt;code&gt;&lt;a
-   href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;frameset&lt;/code&gt; element, or
-   null). On setting, the following algorithm must be run:
-
-  &lt;ol&gt;
-   &lt;li&gt;If the new value is not a &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; or
-    &lt;code&gt;frameset&lt;/code&gt; element, then raise a
-    &lt;code&gt;HIERARCHY_REQUEST_ERR&lt;/code&gt; exception and abort these steps.
-
-   &lt;li&gt;Otherwise, if the new value is the same as &lt;a href=&quot;#the-body1&quot;&gt;the
-    body element&lt;/a&gt;, do nothing. Abort these steps.
-
-   &lt;li&gt;Otherwise, if &lt;a href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt; is not null,
-    then replace that element with the new value in the DOM, as if the root
-    element's &lt;code title=&quot;&quot;&gt;replaceChild()&lt;/code&gt; method had been called
-    with the new value and &lt;a href=&quot;#the-body1&quot; title=&quot;the body element&quot;&gt;the
-    incumbent body element&lt;/a&gt; as its two arguments respectively, then abort
-    these steps.
-
-   &lt;li&gt;Otherwise, the &lt;a href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt; is null.
-    Append the new value to the root element.
-  &lt;/ol&gt;
-  &lt;!--XXX
-    <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp">http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp</A>
-    search for ::GetBody ::SetBody
-    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp</A>
-    search for ::setBody
-    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp</A>
-    search for ::body
-  --&gt;
-
-  &lt;p&gt;The &lt;dfn id=images0 title=dom-document-images&gt;&lt;code&gt;images&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return an &lt;code&gt;&lt;a
-   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
-   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
-   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements.
-
-  &lt;p&gt;The &lt;dfn id=embeds title=dom-document-embeds&gt;&lt;code&gt;embeds&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return an &lt;code&gt;&lt;a
-   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
-   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
-   href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt; elements.
-
-  &lt;p&gt;The &lt;dfn id=plugins
-   title=dom-document-plugins&gt;&lt;code&gt;plugins&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return the same object as that returned by the &lt;code
-   title=dom-document-embeds&gt;&lt;a href=&quot;#embeds&quot;&gt;embeds&lt;/a&gt;&lt;/code&gt; attribute.
-
-  &lt;p&gt;The &lt;dfn id=links0 title=dom-document-links&gt;&lt;code&gt;links&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return an &lt;code&gt;&lt;a
-   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
-   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
-   href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements with &lt;code title=attr-hyperlink-href&gt;&lt;a
-   href=&quot;#href6&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attributes and &lt;code&gt;&lt;a
-   href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; elements with &lt;code
-   title=attr-hyperlink-href&gt;&lt;a href=&quot;#href6&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attributes.
-
-  &lt;p&gt;The &lt;dfn id=forms0 title=dom-document-forms&gt;&lt;code&gt;forms&lt;/code&gt;&lt;/dfn&gt;
-   attribute must return an &lt;code&gt;&lt;a
-   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
-   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;form&lt;/code&gt;
-   elements.
-
-  &lt;p&gt;The &lt;dfn id=anchors
-   title=dom-document-anchors&gt;&lt;code&gt;anchors&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
-   rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-   &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements with &lt;code
-   title=attr-a-name&gt;name&lt;/code&gt; attributes.&lt;/p&gt;
-  &lt;!-- XXX note that such elements are
-  non-conforming --&gt;
-
-  &lt;p&gt;The &lt;dfn id=scripts
-   title=dom-document-scripts&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
-   rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
-
-  &lt;p&gt;The &lt;dfn id=getelementsbyname
-   title=dom-document-getElementsByName&gt;&lt;code&gt;getElementsByName(&lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
-   containing all the &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-   href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;,
-   &lt;!-- frame? frameset?
-  XXX--&gt;&lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;, &lt;code&gt;&lt;a
-   href=&quot;#map&quot;&gt;map&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt;,&lt;!-- param?
-  XXX--&gt;
-   &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in that document
-   that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is
-   equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;
-   argument.&lt;/p&gt;
-  &lt;!-- XXX what about XHTML? --&gt;
-
-  &lt;p&gt;The &lt;dfn id=getelementsbyclassname
-   title=dom-document-getElementsByClassName&gt;&lt;code&gt;getElementsByClassName(&lt;var
-   title=&quot;&quot;&gt;classNames&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string that
-   contains an &lt;a href=&quot;#unordered&quot;&gt;unordered set of unique space-separated
-   tokens&lt;/a&gt; representing classes. When called, the method must return a
-   live &lt;code&gt;NodeList&lt;/code&gt; object containing all the elements in the
-   document that have all the classes specified in that argument, having
-   obtained the classes by &lt;a href=&quot;#split&quot; title=&quot;split a string on
-   spaces&quot;&gt;splitting a string on spaces&lt;/a&gt;. If there are no tokens specified
-   in the argument, then the method must return an empty
-   &lt;code&gt;NodeList&lt;/code&gt;.
-
-  &lt;p&gt;The &lt;dfn id=getelementsbyclassname0
-   title=dom-getElementsByClassName&gt;&lt;code&gt;getElementsByClassName()&lt;/code&gt;&lt;/dfn&gt;
-   method on the &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
-   interface must return a live &lt;code&gt;NodeList&lt;/code&gt; with the nodes that the
-   &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; &lt;code
-   title=dom-document-getElementsByClassName&gt;&lt;a
-   href=&quot;#getelementsbyclassname&quot;&gt;getElementsByClassName()&lt;/a&gt;&lt;/code&gt; method
-   would return when passed the same argument(s), excluding any elements that
-   are not descendants of the &lt;code&gt;&lt;a
-   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; object on which the method was
-   invoked.
-
-  &lt;p&gt;HTML, SVG, and MathML elements define which classes they are in by
-   having an attribute in the per-element partition with the name &lt;code
-   title=&quot;&quot;&gt;class&lt;/code&gt; containing a space-separated list of classes to
-   which the element belongs. Other specifications may also allow elements in
-   their namespaces to be labeled as being in specific classes. UAs must not
-   assume that all attributes of the name &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; for
-   elements in any namespace work in this way, however, and must not assume
-   that such attributes, when used as global attributes, label other elements
-   as being in specific classes.
-
-  &lt;div class=example&gt;
-   &lt;p&gt;Given the following XHTML fragment:&lt;/p&gt;
-
-   &lt;pre&gt;&lt;div id=&quot;example&quot;&gt;
- &lt;p id=&quot;p1&quot; class=&quot;aaa bbb&quot;/&gt;
- &lt;p id=&quot;p2&quot; class=&quot;aaa ccc&quot;/&gt;
- &lt;p id=&quot;p3&quot; class=&quot;bbb ccc&quot;/&gt;
-&lt;/div&gt;&lt;/pre&gt;
-
-   &lt;p&gt;A call to
-    &lt;code&gt;document.getElementById('example').getElementsByClassName('aaa')&lt;/code&gt;
-    would return a &lt;code&gt;NodeList&lt;/code&gt; with the two paragraphs
-    &lt;code&gt;p1&lt;/code&gt; and &lt;code&gt;p2&lt;/code&gt; in it.&lt;/p&gt;
-
-   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('ccc&nbsp;bbb')&lt;/code&gt; would
-    only return one node, however, namely &lt;code&gt;p3&lt;/code&gt;. A call to
-    &lt;code&gt;document.getElementById('example').getElementsByClassName('bbb&nbsp;&nbsp;ccc&nbsp;')&lt;/code&gt;
-    would return the same thing.&lt;/p&gt;
-
-   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('aaa,bbb')&lt;/code&gt; would return
-    no nodes; none of the elements above are in the &quot;aaa,bbb&quot; class.&lt;/p&gt;
-  &lt;/div&gt;
-  &lt;!-- XXX
-&gt;         * xGetParentElementByClassName(rootElement, className, tagName) -
-&gt; Navigates upwards until we hit a parent element with the given class name and
-&gt; optional tag name.
---&gt;
-
-  &lt;p class=note&gt;The &lt;code title=dom-document-dir&gt;&lt;a
-   href=&quot;#dir1&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; attribute on the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface is defined along
-   with the &lt;code title=attr-dir&gt;&lt;a href=&quot;#dir&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; content
-   attribute.
-
-  &lt;h3 id=dynamic&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;&lt;dfn id=dynamic2&gt;Dynamic markup
-   insertion&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;code title=dom-document-write&gt;&lt;a
-   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; family of methods and
-   the &lt;code title=dom-innerHTML&gt;&lt;a href=&quot;#innerhtml&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-   family of DOM attributes enable script authors to dynamically insert
-   markup into the document.
-
-  &lt;p class=issue&gt;bz argues that innerHTML should be called something else on
-   XML documents and XML elements. Is the sanity worth the migration pain?
-
-  &lt;p&gt;Because these APIs interact with the parser, their behavior varies
-   depending on whether they are used with &lt;a href=&quot;#html-&quot;&gt;HTML
-   documents&lt;/a&gt; (and the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;) or XHTML in &lt;a
-   href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt; (and the &lt;span&gt;XML parser&lt;/span&gt;).
-   The following table cross-references the various versions of these APIs.
-
   &lt;table&gt;
    &lt;thead&gt;
     &lt;tr&gt;
-     &lt;td&gt;
+     &lt;th&gt;Attribute
 
-     &lt;th&gt;&lt;dfn id=document.write
-      title=dom-document-write&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;
+     &lt;th&gt;Component
 
-     &lt;th&gt;&lt;dfn id=innerhtml title=dom-innerHTML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt;
+     &lt;th&gt;Getter Condition
 
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;th&gt;For documents that are &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;
+     &lt;th&gt;Prefix
 
-     &lt;td&gt;&lt;a href=&quot;#document.write...&quot;
-      title=dom-document-write-HTML&gt;&lt;code&gt;document.write()&lt;/code&gt; in HTML&lt;/a&gt;
+     &lt;th&gt;Suffix
 
-     &lt;td&gt;&lt;a href=&quot;#innerhtml0&quot;
-      title=dom-innerHTML-HTML&gt;&lt;code&gt;innerHTML&lt;/code&gt; in HTML&lt;/a&gt;
+     &lt;th&gt;Setter Preprocessor
 
+     &lt;th&gt;Setter Condition
+
+   &lt;tbody&gt;
     &lt;tr&gt;
-     &lt;th&gt;For documents that are &lt;a href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt;
+     &lt;td&gt;&lt;dfn id=protocol title=dom-uda-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#document.write0&quot;
-      title=dom-document-write-XML&gt;&lt;code&gt;document.write()&lt;/code&gt; in XML&lt;/a&gt;
+     &lt;td&gt;&lt;scheme&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#innerhtml1&quot; title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;
-      in XML&lt;/a&gt;
-  &lt;/table&gt;
+     &lt;td&gt;&mdash;
 
-  &lt;p&gt;Regardless of the parsing mode, the &lt;dfn id=document.writeln...
-   title=dom-document-writeln&gt;&lt;code&gt;document.writeln(...)&lt;/code&gt;&lt;/dfn&gt; method
-   must call the &lt;code title=dom-document-write&gt;&lt;a
-   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method with the same
-   argument(s), and then call the &lt;code title=dom-document-write&gt;&lt;a
-   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method with, as its
-   argument, a string consisting of a single line feed character (U+000A).
+     &lt;td&gt;&mdash;
 
-  &lt;h4 id=controlling&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Controlling the input
-   stream&lt;/h4&gt;
+     &lt;td&gt;U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
 
-  &lt;p&gt;The &lt;dfn id=open title=dom-document-open&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt;
-   method comes in several variants with different numbers of arguments.
+     &lt;td&gt;Remove all trailing U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
+      characters
 
-  &lt;p&gt;When called with two or fewer arguments, the method must act as follows:
+     &lt;td&gt;The new value is not the empty string
 
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; be the value of the first argument, if
-     there is one, or &quot;&lt;code&gt;text/html&lt;/code&gt;&quot; otherwise.
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=host title=dom-uda-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second argument
-     and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
-   --&gt;, and
-     false otherwise.
+     &lt;td&gt;&lt;a href=&quot;#lthostportgt&quot;&gt;&lt;hostport&gt;&lt;/a&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!-- XXX xref
-    --&gt;
-     that isn't a &lt;a href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt;, and
-     the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; associated with that
-     parser's &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; is not undefined (that is,
-     it &lt;em&gt;does&lt;/em&gt; point to somewhere in the input stream), then the
-     method does nothing. Abort these steps and return the
-     &lt;code&gt;Document&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
+     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
+      and uses a server-based naming authority
 
-    &lt;p class=note&gt;This basically causes &lt;code title=dom-document-open&gt;&lt;a
-     href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; to be ignored when it's called
-     in an inline script found during the parsing of data sent over the
-     network, while still letting it have an effect when called
-     asynchronously or on a document that is itself being spoon-fed using
-     these APIs.&lt;/p&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p class=big-issue&gt;onbeforeunload, onunload, reset timers, empty event
-     queue, kill any pending transactions, XMLHttpRequests, etc
-   &lt;/li&gt;
-   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20{%20f%20%3D%20document.getElementsByTagName(%27iframe%27)[0]%3B%20d%20%3D%20f.contentDocument%3B%20}%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.body.bgColor%3D%27red%27%22%20value%3D%22color%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22f.style.border%3D%27lime%20solid%27%22%20value%3D%22color%20frame%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3Etest%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setInterval(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%20500)%3C%2Fscript%3E%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E%0A --&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
-   xref--&gt;,
-     then stop that parser, and throw away any pending content in the input
-     stream. &lt;span class=big-issue&gt;what about if it doesn't, because it's
-     either like a text/plain, or Atom, or PDF, or XHTML, or image document,
-     or something?&lt;/span&gt;
-   &lt;/li&gt;
-   &lt;!-- XXX see
-   also innerHTML in HTML --&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;Remove all child nodes of the document.
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;Change the &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; to
-     UTF-16.
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=hostname title=dom-uda-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; and associate it with
-     the document. This is a &lt;dfn id=script-created&gt;script-created
-     parser&lt;/dfn&gt; (meaning that it can be closed by the &lt;code
-     title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; and
-     &lt;code title=dom-document-close&gt;&lt;a
-     href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt; methods, and that the
-     tokeniser will wait for an explicit call to &lt;code
-     title=dom-document-close&gt;&lt;a href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
-     before emitting an end-of-file token).
+     &lt;td&gt;&lt;host&gt;/&lt;ihost&gt;
 
-   &lt;li&gt;Mark the document as being an &lt;a href=&quot;#html-&quot; title=&quot;HTML
-    documents&quot;&gt;HTML document&lt;/a&gt; (it might already be so-marked).&lt;/li&gt;
-   &lt;!-- text/plain handling --&gt;
+     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
+      and uses a server-based naming authority
 
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; does not have the value
-     &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;&lt;!-- XXX matched how?
-   --&gt;, then act as if the
-     tokeniser had emitted a &lt;code&gt;&lt;a href=&quot;#pre&quot;&gt;pre&lt;/a&gt;&lt;/code&gt; element
-     start tag, then set the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;'s &lt;a
-     href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage's &lt;a
-     href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;PLAINTEXT&lt;/em&gt;.
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
+     &lt;td&gt;&mdash;
 
-    &lt;ol&gt;
-     &lt;li&gt;Remove all the entries in the &lt;a href=&quot;#browsing1&quot;&gt;browsing
-      context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session history&lt;/a&gt; after the &lt;a
-      href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in its &lt;code&gt;Document&lt;/code&gt;'s
-      &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object
+     &lt;td&gt;Remove all leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
+      characters
 
-     &lt;li&gt;Remove any earlier entries that share the same &lt;code&gt;Document&lt;/code&gt;
+     &lt;td&gt;&mdash;
 
-     &lt;li&gt;Add a new entry just before the last entry that is associated with
-      the text that was parsed by the previous parser associated with the
-      &lt;code&gt;Document&lt;/code&gt; object, as well as the state of the document at
-      the start of these steps. (This allows the user to step backwards in
-      the session history to see the page before it was blown away by the
-      &lt;code title=dom-document-open&gt;&lt;a
-      href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; call.)
-    &lt;/ol&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=port title=dom-uda-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Finally, set the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; to point at
-     just before the end of the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; (which at
-     this point will be empty).
+     &lt;td&gt;&lt;port&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; on which the method was invoked.
-  &lt;/ol&gt;
+     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
+      and uses a server-based naming authority
 
-  &lt;p class=big-issue&gt;We shouldn't hard-code &lt;code&gt;text/plain&lt;/code&gt; there. We
-   should do it some other way, e.g. hand off to the section on
-   content-sniffing and handling of incoming data streams, the part that
-   defines how this all works when stuff comes over the network.&lt;/p&gt;
-  &lt;!-- XXX Should we support XML/XHTML as a type to that method? --&gt;
+     &lt;td&gt;&mdash;
 
-  &lt;p&gt;When called with three or more arguments, the &lt;code
-   title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method on the
-   &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object must call the
-   &lt;code title=dom-open&gt;&lt;a href=&quot;#open2&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method on the
-   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface of the object returned
-   by the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt; attribute
-   of the &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object, with the same
-   arguments as the original call to the &lt;code title=dom-document-open&gt;&lt;a
-   href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method, and return whatever that method
-   returned. If the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt;
-   attribute of the &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object is null, then the
-   method must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.
+     &lt;td&gt;&mdash;
 
-  &lt;p&gt;The &lt;dfn id=close title=dom-document-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
-   method must do nothing if there is no &lt;a
-   href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt; associated with the
-   document. If there is such a parser, then, when the method is called, the
-   user agent must insert an &lt;a href=&quot;#explicit0&quot;&gt;explicit &quot;EOF&quot;
-   character&lt;/a&gt; at the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; of the
-   parser's &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.
+     &lt;td&gt;Remove any characters in the new value that are not in the range
+      U+0030 DIGIT ZERO .. U+0039 DIGIT NINE. If the resulting string is
+      empty, set it to a single U+0030 DIGIT ZERO character ('0').
 
-  &lt;h4 id=dynamic0&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic markup insertion in
-   HTML&lt;/h4&gt;
+     &lt;td&gt;&mdash;
 
-  &lt;p&gt;In HTML, the &lt;dfn id=document.write...
-   title=dom-document-write-HTML&gt;&lt;code&gt;document.write(...)&lt;/code&gt;&lt;/dfn&gt;
-   method must act as follows:
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=pathname title=dom-uda-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;
 
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; is undefined, the
-     &lt;code title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method
-     must be called (with no arguments) on the &lt;code
-     title=Document&gt;document&lt;/code&gt; object. The &lt;a
-     href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; will point at just before the end
-     of the (empty) &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.&lt;/p&gt;
+     &lt;td&gt;&lt;abs_path&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;The string consisting of the concatenation of all the arguments to the
-     method must be inserted into the &lt;a href=&quot;#input0&quot;&gt;input
-     stream&lt;/a&gt;&lt;!-- XXX xref --&gt; just before the &lt;a
-     href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt;.&lt;/p&gt;
+     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
 
-   &lt;li&gt;
-    &lt;p&gt;If there is &lt;a href=&quot;#the-script&quot; title=&quot;the script that will execute
-     as soon as the parser resumes&quot;&gt;a script that will execute as soon as the
-     parser resumes&lt;/a&gt;, then the method must now return without further
-     processing of the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.&lt;/p&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, the tokeniser must process the characters that were
-     inserted, one at a time, processing resulting tokens as they are
-     emitted, and stopping when the tokeniser reaches the insertion point or
-     when the processing of the tokeniser is aborted by the tree construction
-     stage (this can happen if a &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
-     start tag token is emitted by the tokeniser).
+     &lt;td&gt;&mdash;
 
-    &lt;p class=note&gt;If the &lt;code title=dom-document-write-HTML&gt;&lt;a
-     href=&quot;#document.write...&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method was called
-     from script executing inline (i.e. executing because the parser parsed a
-     set of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; tags), then this is a
-     &lt;a href=&quot;#nestedParsing&quot;&gt;reentrant invocation of the parser&lt;/a&gt;.&lt;/p&gt;
+     &lt;td&gt;If it has no leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
+      character, prepend a U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
+      character to the new value
 
-   &lt;li&gt;
-    &lt;p&gt;Finally, the method must return.&lt;/p&gt;
-  &lt;/ol&gt;
+     &lt;td&gt;&mdash;
 
-  &lt;p&gt;In HTML, the &lt;dfn id=innerhtml0
-   title=dom-innerHTML-HTML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; DOM attribute of all
-   &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; nodes returns a serialization
-   of the node's children using the &lt;span&gt;HTML syntax&lt;/span&gt;&lt;!-- XXX xref
-  --&gt;.
-   On setting, it replaces the node's children with new nodes that result
-   from parsing the given value. The formal definitions follow.
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=search title=dom-uda-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;
 
-  &lt;p&gt;On getting, the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute must return the
-   result of running the &lt;a href=&quot;#html-fragment&quot;&gt;HTML fragment serialization
-   algorithm&lt;/a&gt; on the node.
+     &lt;td&gt;&lt;query&gt;
 
-  &lt;p&gt;On setting, if the node is a document, the &lt;code
-   title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM
-   attribute must run the following algorithm:
+     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
 
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
-    xref--&gt;,
-     then stop that parser, and throw away any pending content in the input
-     stream. &lt;span class=big-issue&gt;what about if it doesn't, because it's
-     either like a text/plain, or Atom, or PDF, or XHTML, or image document,
-     or something?&lt;/span&gt;&lt;/p&gt;
-    &lt;!-- XXX see
-    also document.open() --&gt;
+     &lt;td&gt;U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
 
-   &lt;li&gt;
-    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose &lt;code
-     title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-     attribute is being set.&lt;/p&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;Create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in its initial state,
-     and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
-   &lt;/li&gt;
-   &lt;!-- redundant, the document is forcibly already so labeled if we get here
-   &lt;li&gt;
+     &lt;td&gt;Remove one leading U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
+      character, if any
 
-    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
-    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;/li&gt;
---&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn id=hash title=dom-uda-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Place into the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; for the &lt;a
-     href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; just created the string being assigned
-     into the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+     &lt;td&gt;&lt;fragment&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Start the parser and let it run until it has consumed all the
-     characters just inserted into the input stream. (The
-     &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements and a
-     &lt;code title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event will have
-     fired on &lt;a href=&quot;#the-body1&quot; title=&quot;the body element&quot;&gt;its body
-     element&lt;/a&gt;.)&lt;/p&gt;
-  &lt;/ol&gt;
+     &lt;td&gt;Fragment identifier is longer than zero characters
 
-  &lt;p&gt;Otherwise, if the node is an element, then setting the &lt;code
-   title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM
-   attribute must cause the following algorithm to run instead:
+     &lt;td&gt;U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
 
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;Invoke the &lt;a href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing
-     algorithm&lt;/a&gt;, with the element whose &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set as the
-     &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; element, and the string being assigned into
-     the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute as the &lt;var
-     title=&quot;&quot;&gt;input&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the result
-     of this algorithm.&lt;/p&gt;
+     &lt;td&gt;&mdash;
 
-   &lt;li&gt;
-    &lt;p&gt;Remove the children of the element whose &lt;code
-     title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-     attribute is being set.&lt;/p&gt;
+     &lt;td&gt;Remove one leading U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
+      character, if any
 
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
-     title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of the &lt;code&gt;Element&lt;/code&gt; node whose
-     &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set.&lt;/p&gt;
+     &lt;td&gt;&mdash;
+  &lt;/table&gt;
 
-   &lt;li&gt;
-    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in &lt;var
-     title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the node
-     whose &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set,
-     preserving their order.&lt;/p&gt;
-  &lt;/ol&gt;
-
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
-   using &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
-   inserted.&lt;/p&gt;
-  &lt;!-- XXX must make sure we spec that innerHTML causes mutation
-  events to fire, but document.write() doesn't. (the latter is already
-  req-stated in the parser section, btw) --&gt;
-  &lt;!-- <A HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp">http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp</A> --&gt;
-  &lt;!-- <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879">http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879</A>
-       note script execution disabled
-       <A HREF="http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308">http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742</A>
-   --&gt;
-
-  &lt;h4 id=dynamic1&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Dynamic markup insertion in
-   XML&lt;/h4&gt;
-
-  &lt;p&gt;In an XML context, the &lt;dfn id=document.write0
-   title=dom-document-write-XML&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt; method
-   must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=lthostportgt&gt;&lt;hostport&gt;&lt;/dfn&gt; component is defined as
+   being the &lt;host&gt;/&lt;ihost&gt; component, followed by a colon and
+   the &lt;port&gt; component, but with the colon and &lt;port&gt; component
+   omitted if the given port matches the default port for the protocol given
+   by the &lt;scheme&gt; component.&lt;/p&gt;
   &lt;!--
-  For XHTML: content must be well-formed. Where does
-  it insert? Immediately after the script that called document.write()?&lt;/p&gt;
-  how do we handle async scripts vs sync scripts?
-
-Consider:
-data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ document.write('&lt;foo&gt;Test&lt;/foo&gt;'); ]]&gt;&lt;/script&gt;
-data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ alert('test'); alert(document.write); try { document.write('&lt;foo&gt;Test&lt;/foo&gt;'); alert(document.childNodes.length); } catch (e) { alert(e); } ]]&gt;&lt;/script&gt;
-
+  <A HREF="http://www.hixie.ch/tests/adhoc/dom/level0/location/components/">http://www.hixie.ch/tests/adhoc/dom/level0/location/components/</A>
+  <A HREF="http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp">http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp</A>
+  <A HREF="http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722">http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722</A>
 --&gt;
 
-  &lt;p&gt;On the other hand, however, the &lt;dfn id=innerhtml1
-   title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is indeed
-   usable in an XML context.
+  &lt;h3 id=common0&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
 
-  &lt;p&gt;In an XML context, the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
-   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;s must return a string in the
-   form of an &lt;a href=&quot;<A HREF="http://www.w3.org/TR/xml/#wf-entities">http://www.w3.org/TR/xml/#wf-entities</A>&quot;&gt;internal
-   general parsed entity&lt;/a&gt;, and on &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;s must return a string in the
-   form of a &lt;a href=&quot;<A HREF="http://www.w3.org/TR/xml/#sec-well-formed">http://www.w3.org/TR/xml/#sec-well-formed</A>&quot;&gt;document
-   entity&lt;/a&gt;. The string returned must be XML namespace-well-formed and must
-   be an isomorphic serialization of all of that node's child nodes, in
-   document order. User agents may adjust prefixes and namespace declarations
-   in the serialization (and indeed might be forced to do so in some cases to
-   obtain namespace-well-formed XML). For the &lt;code
-   title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-   attribute on &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; objects,
-   if any of the elements in the serialization are in no namespace, the
-   default namespace in scope for those elements must be explicitly declared
-   as the empty string.&lt;!-- because otherwise round-tripping might break
-  since it'll pick up the surrounding default ns when setting --&gt;
-   (This doesn't apply to the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute on &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; objects.) &lt;a
-   href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt; &lt;a href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;
-
-  &lt;p&gt;If any of the following cases are found in the DOM being serialized, the
-   user agent must raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception:
-
-  &lt;ul&gt;
-   &lt;li&gt;A &lt;code&gt;Document&lt;/code&gt; node with no child element nodes.
-
-   &lt;li&gt;A &lt;code&gt;DocumentType&lt;/code&gt; node that has an external subset public
-    identifier or an external subset system identifier that contains both a
-    U+0022 QUOTATION MARK ('&quot;') and a U+0027 APOSTROPHE (&quot;'&quot;).
-
-   &lt;li&gt;A node with a prefix or local name containing a U+003A COLON (&quot;:&quot;).
-
-   &lt;li&gt;An &lt;code&gt;Attr&lt;/code&gt; node, &lt;code&gt;Text&lt;/code&gt; node,
-    &lt;code&gt;CDATASection&lt;/code&gt; node, &lt;code&gt;Comment&lt;/code&gt; node, or
-    &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains characters
-    that are not matched by the XML &lt;code title=&quot;&quot;&gt;Char&lt;/code&gt; production. &lt;a
-    href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;
-
-   &lt;li&gt;A &lt;code&gt;CDATASection&lt;/code&gt; node whose data contains the string &quot;&lt;code
-    title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;&quot;.
-
-   &lt;li&gt;A &lt;code&gt;Comment&lt;/code&gt; node whose data contains two adjacent U+002D
-    HYPHEN-MINUS (-) characters or ends with such a character.
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is the
-    string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
-   ASCII --&gt;.
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name contains a
-    U+003A COLON (&quot;:&quot;).
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains the
-    string &quot;&lt;code title=&quot;&quot;&gt;?&gt;&lt;/code&gt;&quot;.
-  &lt;/ul&gt;
-
-  &lt;p class=note&gt;These are the only ways to make a DOM unserializable. The DOM
-   enforces all the other XML constraints; for example, trying to set an
-   attribute with a name that contains an equals sign (=) will raised an
-   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception.
-
-  &lt;p&gt;On setting, in an XML context, the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
-   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;s and &lt;code&gt;&lt;a
-   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;s must run the following
-   algorithm:
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;The user agent must create a new &lt;span&gt;XML parser&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set on an
-     element, the user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created
-     the string corresponding to the start tag of that element, declaring all
-     the namespace prefixes that are in scope on that element in the DOM, as
-     well as declaring the default namespace (if any) that is in scope on
-     that element in the DOM.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;The user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created the
-     string being assigned into the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the &lt;code title=dom-innerHTML-XML&gt;&lt;a
-     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set on an
-     element, the user agent must &lt;span&gt;feed the parser&lt;/span&gt; the string
-     corresponding to the end tag of that element.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the parser found a well-formedness error, the attribute's setter
-     must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;The user agent must remove the children nodes of the node whose &lt;code
-     title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
-     attribute is being set.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node, let
-     &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the document,
-     preserving their order. Otherwise, the attribute is being set on an
-     &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the
-     children of the document's root element, preserving their order.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node, let
-     &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be that &lt;code&gt;Document&lt;/code&gt; node.
-     Otherwise, the attribute is being set on an &lt;code&gt;Element&lt;/code&gt; node;
-     let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
-     title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of that &lt;code&gt;Element&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in &lt;var
-     title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the node
-     whose &lt;code title=dom-innerHTML-XML&gt;&lt;a
-     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set,
-     preserving their order.&lt;/p&gt;
-  &lt;/ol&gt;
-
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
-   using &lt;code title=dom-innerHTML-XML&gt;&lt;a
-   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
-   inserted.
-
-  &lt;h3 id=apis-in&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;APIs in HTML documents&lt;/h3&gt;
-  &lt;!-- XXX case-sensitivity training required here. --&gt;
-
-  &lt;p&gt;For &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;, and for &lt;a
-   href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in &lt;a href=&quot;#html-&quot;&gt;HTML
-   documents&lt;/a&gt;, certain APIs defined in DOM3 Core become case-insensitive
-   or case-changing, as sometimes defined in DOM3 Core, and as summarized or
-   required below. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;.
-
-  &lt;p&gt;This does not apply to &lt;a href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt; or to
-   elements that are not in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;
-   despite being in &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;.
-
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.tagName&lt;/code&gt;, &lt;code
-    title=&quot;&quot;&gt;Node.nodeName&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;Node.localName&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
-    xref--&gt;
-     and attribute names in all lowercase&lt;!-- XXX xref --&gt;, regardless of the
-     case with which they were created.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.createElement()&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this method
-     will lowercase&lt;!-- XXX xref --&gt; the argument before creating the
-     requisite element. Also, the element created must be in the &lt;a
-     href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p class=note&gt;This doesn't apply to &lt;code
-     title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible, by
-     passing this last method a tag name in the wrong case, to create an
-     element that claims to have the tag name of an element defined in this
-     specification, but doesn't support its interfaces, because it really has
-     another tag name not accessible from the DOM APIs.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttributeNode()&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;a href=&quot;#html-elements&quot;
-     title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt;, it must have its name
-     lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
-
-    &lt;p class=note&gt;This doesn't apply to &lt;code
-     title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttribute()&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;When an attribute is set on an &lt;a href=&quot;#html-elements&quot; title=&quot;HTML
-     elements&quot;&gt;HTML element&lt;/a&gt;, the name argument must be
-     lowercased&lt;!-- XXX xref
-    --&gt; before the element is affected.&lt;/p&gt;
-
-    &lt;p class=note&gt;This doesn't apply to &lt;code
-     title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.getElementsByTagName()&lt;/code&gt; and &lt;code
-    title=&quot;&quot;&gt;Element.getElementsByTagName()&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;These methods (but not their namespaced counterparts) must compare the
-     given argument case-insensitively&lt;!-- XXX xref --&gt; when looking at &lt;a
-     href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML elements&lt;/a&gt;, and
-     case-sensitively otherwise.&lt;/p&gt;
-
-    &lt;p class=note&gt;Thus, in an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML
-     document&lt;/a&gt; with nodes in multiple namespaces, these methods will be
-     both case-sensitive and case-insensitive at the same time.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.renameNode()&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;If the new namespace is the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML
-     namespace&lt;/a&gt;, then the new qualified name must be lowercased before the
-     rename takes place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
-  &lt;/dl&gt;
-
-  &lt;h2 id=semantics&gt;&lt;span class=secno&gt;3. &lt;/span&gt;Semantics and structure of
-   HTML elements&lt;/h2&gt;
-
-  &lt;h3 id=semantics-intro&gt;&lt;span class=secno&gt;3.1 &lt;/span&gt;Introduction&lt;/h3&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
-
-  &lt;p class=big-issue&gt;An introduction to marking up a document.
-
-  &lt;h3 id=common1&gt;&lt;span class=secno&gt;3.2 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
-
   &lt;p&gt;There are various places in HTML that accept particular data types, such
    as dates or numbers. This section describes what the conformance criteria
    for content in those formats is, and how to parse them.&lt;/p&gt;
@@ -4509,7 +3017,7 @@
    attribute values are clearly defined either in terms of microsyntaxes or
    in terms of other specs, or as &quot;Text&quot; or some such.
 
-  &lt;h4 id=common2&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
+  &lt;h4 id=common1&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=space title=&quot;space character&quot;&gt;space characters&lt;/dfn&gt;, for
    the purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
@@ -4555,7 +3063,7 @@
    the Unicode character class Zs. In both cases, the collected characters
    are not used. &lt;a href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;
 
-  &lt;h4 id=boolean&gt;&lt;span class=secno&gt;3.2.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
+  &lt;h4 id=boolean&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
 
   &lt;p&gt;A number of attributes in HTML5 are &lt;dfn id=boolean0 title=&quot;boolean
    attribute&quot;&gt;boolean attributes&lt;/dfn&gt;. The presence of a boolean attribute
@@ -4566,9 +3074,9 @@
    or a value that is a case-insensitive &lt;!-- XXX ASCII --&gt; match for the
    attribute's canonical name, with no leading or trailing whitespace.
 
-  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;3.2.3 &lt;/span&gt;Numbers&lt;/h4&gt;
+  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Numbers&lt;/h4&gt;
 
-  &lt;h5 id=unsigned&gt;&lt;span class=secno&gt;3.2.3.1. &lt;/span&gt;Unsigned integers&lt;/h5&gt;
+  &lt;h5 id=unsigned&gt;&lt;span class=secno&gt;2.4.3.1. &lt;/span&gt;Unsigned integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid&gt;valid non-negative integer&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
@@ -4629,7 +3137,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=signed&gt;&lt;span class=secno&gt;3.2.3.2. &lt;/span&gt;Signed integers&lt;/h5&gt;
+  &lt;h5 id=signed&gt;&lt;span class=secno&gt;2.4.3.2. &lt;/span&gt;Signed integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid0&gt;valid integer&lt;/dfn&gt; if it consists of one
    of more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
@@ -4707,7 +3215,7 @@
      title=&quot;&quot;&gt;value&lt;/var&gt;, otherwise return 0-&lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;3.2.3.3. &lt;/span&gt;Real numbers&lt;/h5&gt;
+  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.4.3.3. &lt;/span&gt;Real numbers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid1&gt;valid floating point number&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
@@ -4829,7 +3337,7 @@
      title=&quot;&quot;&gt;value&lt;/var&gt;, otherwise return 0-&lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=ratios&gt;&lt;span class=secno&gt;3.2.3.4. &lt;/span&gt;Ratios&lt;/h5&gt;
+  &lt;h5 id=ratios&gt;&lt;span class=secno&gt;2.4.3.4. &lt;/span&gt;Ratios&lt;/h5&gt;
 
   &lt;p class=note&gt;The algorithms described in this section are used by the
    &lt;code&gt;&lt;a href=&quot;#progress&quot;&gt;progress&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
@@ -4977,7 +3485,7 @@
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;3.2.3.5.
+  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.3.5.
    &lt;/span&gt;Percentages and dimensions&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;&lt;dfn id=valid3&gt;valid positive non-zero integers&lt;/dfn&gt;
@@ -4985,7 +3493,7 @@
    height/width on img, embed, object &mdash; lengths in css pixels or
    percentages)
 
-  &lt;h5 id=lists&gt;&lt;span class=secno&gt;3.2.3.6. &lt;/span&gt;Lists of integers&lt;/h5&gt;
+  &lt;h5 id=lists&gt;&lt;span class=secno&gt;2.4.3.6. &lt;/span&gt;Lists of integers&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=valid4&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a
    href=&quot;#valid0&quot; title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by
@@ -5266,7 +3774,7 @@
     &lt;p&gt;Return the &lt;var title=&quot;&quot;&gt;numbers&lt;/var&gt; list and abort.
   &lt;/ol&gt;
 
-  &lt;h4 id=dates&gt;&lt;span class=secno&gt;3.2.4 &lt;/span&gt;Dates and times&lt;/h4&gt;
+  &lt;h4 id=dates&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dates and times&lt;/h4&gt;
 
   &lt;p&gt;In the algorithms below, the &lt;dfn id=number&gt;number of days in month &lt;var
    title=&quot;&quot;&gt;month&lt;/var&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/dfn&gt; is:
@@ -5277,7 +3785,7 @@
    4 but not by 100; and &lt;em&gt;28&lt;/em&gt; otherwise. This takes into account leap
    years in the Gregorian calendar. &lt;a href=&quot;#refsGREGORIAN&quot;&gt;[GREGORIAN]&lt;/a&gt;
 
-  &lt;h5 id=specific&gt;&lt;span class=secno&gt;3.2.4.1. &lt;/span&gt;Specific moments in time&lt;/h5&gt;
+  &lt;h5 id=specific&gt;&lt;span class=secno&gt;2.4.4.1. &lt;/span&gt;Specific moments in time&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid5&gt;valid datetime&lt;/dfn&gt; if it has four digits
    (representing the year), a literal hyphen, two digits (representing the
@@ -5593,7 +4101,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;time&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;timezone&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=vaguer&gt;&lt;span class=secno&gt;3.2.4.2. &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+  &lt;h5 id=vaguer&gt;&lt;span class=secno&gt;2.4.4.2. &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
 
   &lt;p&gt;This section defines &lt;dfn id=date-or title=&quot;date or time string&quot;&gt;date or
    time strings&lt;/dfn&gt;. There are two kinds, &lt;dfn id=date-or0 title=&quot;date or
@@ -5975,14 +4483,14 @@
     &lt;p&gt;Abort these steps (the string is parsed).
   &lt;/ol&gt;
 
-  &lt;h4 id=time-offsets&gt;&lt;span class=secno&gt;3.2.5 &lt;/span&gt;Time offsets&lt;/h4&gt;
+  &lt;h4 id=time-offsets&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Time offsets&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;&lt;dfn id=valid6&gt;valid time offset&lt;/dfn&gt;, &lt;dfn
    id=rules4&gt;rules for parsing time offsets&lt;/dfn&gt;, &lt;dfn id=time-offset&gt;time
    offset serialization rules&lt;/dfn&gt;; in the format &quot;5d4h3m2s1ms&quot; or &quot;3m 9.2s&quot;
    or &quot;00:00:00.00&quot; or similar.
 
-  &lt;h4 id=tokens&gt;&lt;span class=secno&gt;3.2.6 &lt;/span&gt;Tokens&lt;/h4&gt;
+  &lt;h4 id=tokens&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of&gt;set of space-separated tokens&lt;/dfn&gt; is a set of zero or
    more words separated by one or more &lt;a href=&quot;#space&quot; title=&quot;space
@@ -6046,7 +4554,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;tokens&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;p&gt;When a user agent has to &lt;dfn id=remove0&gt;remove a token from a
+  &lt;p&gt;When a user agent has to &lt;dfn id=remove&gt;remove a token from a
    string&lt;/dfn&gt;, it must use the following algorithm:
 
   &lt;ol&gt;
@@ -6126,7 +4634,7 @@
    to a single space, except at the start and end of the string, where such
    spaces are removed.
 
-  &lt;h4 id=keywords&gt;&lt;span class=secno&gt;3.2.7 &lt;/span&gt;Keywords and enumerated
+  &lt;h4 id=keywords&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Keywords and enumerated
    attributes&lt;/h4&gt;
 
   &lt;p&gt;Some attributes are defined as taking one of a finite set of keywords.
@@ -6172,7 +4680,7 @@
    &lt;em&gt;missing value default&lt;/em&gt;), but for various reasons that isn't the
    way this specification actually defines it.
 
-  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;3.2.8 &lt;/span&gt;References&lt;/h4&gt;
+  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;References&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=valid7&gt;valid hash-name reference&lt;/dfn&gt; to an element of type
    &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is a string consisting of a U+0023 NUMBER SIGN
@@ -6204,122 +4712,1954 @@
      case-insensitively matches &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h4 id=urls&gt;&lt;span class=secno&gt;3.2.9 &lt;/span&gt;URLs&lt;/h4&gt;
-  &lt;!-- XXXURL --&gt;
+  &lt;h3 id=common2&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
 
-  &lt;div class=big-issue&gt;
-   &lt;p&gt;This section will do the following:&lt;/p&gt;
+  &lt;h4 id=reflecting&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Reflecting content
+   attributes in DOM attributes&lt;/h4&gt;
 
-   &lt;ul&gt;
-    &lt;li&gt;define URL as IRI and replace all uses of URIs and IRIs in the rest
-     of the spec with URL
+  &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are defined to
+   &lt;dfn id=reflect&gt;reflect&lt;/dfn&gt; a particular &lt;span&gt;content attribute&lt;/span&gt;.
+   This means that on getting, the DOM attribute returns the current value of
+   the content attribute, and on setting, the DOM attribute changes the value
+   of the content attribute to the given value.&lt;/p&gt;
+  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
+  algorithm --&gt;
 
-    &lt;li&gt;define &quot;valid URL&quot; in terms of valid URIs and IRIs and replace that
-     concept through the spec to a pointer here, getting rid of references to
-     &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-     href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; attribute
+   whose content attribute is defined to contain a URI, then on getting, the
+   DOM attribute must return the value of the content attribute, resolved to
+   an absolute URI, and on setting, must set the content attribute to the
+   specified literal value. If the content attribute is absent, the DOM
+   attribute must return the default value, if the content attribute has one,
+   or else the empty string.&lt;/p&gt;
+  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
+  algorithm --&gt;
 
-    &lt;li&gt;define &quot;valid URL reference&quot; in terms of valid URI references and IRI
-     references and replace that concept through the spec to a pointer here,
-     getting rid of references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-     href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; attribute
+   whose content attribute is defined to contain one or more URIs, then on
+   getting, the DOM attribute must &lt;span title=&quot;split the string on
+   spaces&quot;&gt;split the content attribute on spaces&lt;/span&gt; and return the
+   concatenation of each token URI, resolved to an absolute URI, with a
+   single U+0020 SPACE character between each URI; if the content attribute
+   is absent, the DOM attribute must return the default value, if the content
+   attribute has one, or else the empty string. On setting, the DOM attribute
+   must set the content attribute to the specified literal value.
 
-    &lt;li&gt;define how to parse URLs (maybe by deferring to RFCs)
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; whose content
+   attribute is an &lt;a href=&quot;#enumerated&quot;&gt;enumerated attribute&lt;/a&gt;, and the
+   DOM attribute is &lt;dfn id=limited&gt;limited to only known values&lt;/dfn&gt;, then,
+   on getting, the DOM attribute must return the conforming value associated
+   with the state the attribute is in (in its canonical case), or the empty
+   string if the attribute is in a state that has no associated keyword
+   value; and on setting, if the new value case-insensitively matches one of
+   the keywords given for that attribute, then the content attribute must be
+   set to the conforming value associated with the state that the attribute
+   would be in if set to the given new value, otherwise, if the new value is
+   the empty string, then the content attribute must be removed, otherwise,
+   the setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
 
-    &lt;li&gt;
-     &lt;p&gt;define how to handle URIs that contain non-ascii characters (and it's
-      not the same as handling as IRIs, especially if the character encoding
-      of the document isn't UTF-8)&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but doesn't
+   fall into any of the above categories, then the getting and setting must
+   be done in a transparent, case-preserving manner.
 
-     &lt;p&gt;First parse it (we need to define that. For some schemes it's not per
-      spec -- e.g. apparently for ftp: we should split from hosts on ';').
-      Then handle each bit as follows:&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a boolean attribute, then on getting
+   the DOM attribute must return true if the attribute is set, and false if
+   it is absent. On setting, the content attribute must be removed if the DOM
+   attribute is set to false, and must be set to have the same value as its
+   name if the DOM attribute is set to true. (This corresponds to the rules
+   for &lt;a href=&quot;#boolean0&quot; title=&quot;boolean attribute&quot;&gt;boolean content
+   attributes&lt;/a&gt;.)
 
-     &lt;p&gt;scheme: no further processing (treat %-escaped characters literally,
-      treat unicode characters as unicode characters).&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a signed integer type
+   (&lt;code&gt;long&lt;/code&gt;) then, on getting, the content attribute must be parsed
+   according to &lt;a href=&quot;#rules0&quot; title=&quot;rules for parsing integers&quot;&gt;the
+   rules for parsing signed integers&lt;/a&gt;, and if that is successful, the
+   resulting value must be returned. If, on the other hand, it fails, or if
+   the attribute is absent, then the default value must be returned instead,
+   or 0 if there is no default value. On setting, the given value must be
+   converted to the shortest possible string representing the number as a &lt;a
+   href=&quot;#valid0&quot;&gt;valid integer&lt;/a&gt; in base ten and then that string must be
+   used as the new content attribute value.
 
-     &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode
-      characters as per IDN.&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is an &lt;em&gt;unsigned&lt;/em&gt; integer type
+   (&lt;code&gt;unsigned long&lt;/code&gt;) then, on getting, the content attribute must
+   be parsed according to &lt;a href=&quot;#rules&quot; title=&quot;rules for parsing
+   non-negative integers&quot;&gt;the rules for parsing unsigned integers&lt;/a&gt;, and if
+   that is successful, the resulting value must be returned. If, on the other
+   hand, it fails, or if the attribute is absent, the default value must be
+   returned instead, or 0 if there is no default value. On setting, the given
+   value must be converted to the shortest possible string representing the
+   number as a &lt;a href=&quot;#valid&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten
+   and then that string must be used as the new content attribute value.
 
-     &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and
-      percent-encode.&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is an unsigned integer type
+   (&lt;code&gt;unsigned long&lt;/code&gt;) that is &lt;dfn id=limited0&gt;limited to only
+   positive non-zero numbers&lt;/dfn&gt;, then the behavior is similar to the
+   previous case, but zero is not allowed. On getting, the content attribute
+   must first be parsed according to &lt;a href=&quot;#rules&quot; title=&quot;rules for
+   parsing non-negative integers&quot;&gt;the rules for parsing unsigned
+   integers&lt;/a&gt;, and if that is successful, the resulting value must be
+   returned. If, on the other hand, it fails, or if the attribute is absent,
+   the default value must be returned instead, or 1 if there is no default
+   value. On setting, if the value is zero, the user agent must fire an
+   &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. Otherwise, the given value must be
+   converted to the shortest possible string representing the number as a &lt;a
+   href=&quot;#valid&quot;&gt;valid non-negative integer&lt;/a&gt; in base ten and then that
+   string must be used as the new content attribute value.
 
-     &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's
-      encoding. Do not percent-encode.&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
+   (&lt;code&gt;float&lt;/code&gt;) and the content attribute is defined to contain a
+   time offset, then, on getting, the content attribute must be parsed
+   according to &lt;a href=&quot;#rules4&quot; title=&quot;rules for parsing time offsets&quot;&gt;the
+   rules for parsing time offsets&lt;/a&gt;, and if that is successful, the
+   resulting value, in seconds, must be returned. If that fails, or if the
+   attribute is absent, the default value must be returned, or the
+   not-a-number value (NaN) if there is no default value. On setting, the
+   given value, interpreted as a time offset in seconds, must be converted to
+   a string using the &lt;a href=&quot;#time-offset&quot;&gt;time offset serialization
+   rules&lt;/a&gt;, and that string must be used as the new content attribute
+   value.
 
-    &lt;li&gt;define how to resolve relative URLs in markup attributes (using
-     XMLBase as defined elsewhere right now)
+  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
+   (&lt;code&gt;float&lt;/code&gt;) and it doesn't fall into one of the earlier
+   categories, then, on getting, the content attribute must be parsed
+   according to &lt;a href=&quot;#rules1&quot; title=&quot;rules for parsing floating point
+   number values&quot;&gt;the rules for parsing floating point number values&lt;/a&gt;, and
+   if that is successful, the resulting value must be returned. If, on the
+   other hand, it fails, or if the attribute is absent, the default value
+   must be returned instead, or 0.0 if there is no default value. On setting,
+   the given value must be converted to the shortest possible string
+   representing the number as a &lt;a href=&quot;#valid1&quot;&gt;valid floating point
+   number&lt;/a&gt; in base ten and then that string must be used as the new
+   content attribute value.
 
-    &lt;li&gt;define how to resolve relative URLs in APIs, using the &lt;dfn
-     id=scripts0&gt;script's base URI&lt;/dfn&gt; maybe
+  &lt;p&gt;If a reflecting DOM attribute is of the type &lt;code&gt;&lt;a
+   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;, then on getting it must
+   return a &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object
+   whose underlying string is the element's corresponding content attribute.
+   When the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object
+   mutates its underlying string, the content attribute must itself be
+   immediately mutated. When the attribute is absent, then the string
+   represented by the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;
+   object is the empty string; when the object mutates this empty string, the
+   user agent must first add the corresponding content attribute, and then
+   mutate that attribute instead. &lt;code&gt;&lt;a
+   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; attributes are always
+   read-only. The same &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt;
+   object must be returned every time for each attribute.
 
-    &lt;li&gt;define what it means to resolve a relative URL when the base URL
-     doesn't have a path hierarchy (e.g. data:, javascript:, about:blank
-     URLs)
+  &lt;p&gt;If a reflecting DOM attribute has the type &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;, or an interface that descends
+   from &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;, then, on
+   getting, it must run the following algorithm (stopping at the first point
+   where a value is returned):
 
-    &lt;li&gt;define &quot;an &lt;dfn id=elements2&gt;element's base URI&lt;/dfn&gt;&quot; and make the
-     various places that talk about a base URI in the context of an element
-     use that definition
+  &lt;ol&gt;
+   &lt;li&gt;If the corresponding content attribute is absent, then the DOM
+    attribute must return null.
 
-    &lt;li&gt;make the language used to refer to resolving a base URI consistent
-     throughout, maybe make it hyperlink to a definition each time
+   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the element that the &lt;code
+    title=&quot;&quot;&gt;document.getElementById()&lt;/code&gt; method would find if it was
+    passed as its argument the current value of the corresponding content
+    attribute.
 
-    &lt;li&gt;define a cheap, interoperable mechanism for URL attributes and
-     anything else that relies on xml:base and the base element to handle
-     dynamic changes to those attributes and elements, possibly by defining
-     some mechanism which causes changes to be ignored in some reliable way.
-     &lt;!--
-On Sat, 1 Mar 2008, Anne van Kesteren wrote:
-&gt;
-&gt; Note that the new base URI would only take effect once you actually did
-&gt; something with a potentially affected object. For instance, &lt;img&gt; would
-&gt; not start loading a new image if the base URI changes. &lt;img&gt;.src =
-&gt; &lt;img&gt;.getAttribute(&quot;src&quot;) could start loading a new resource however if
-&gt; the base URI changed since the initial load.
+   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or if it is not
+    type-compatible with the DOM attribute, then the DOM attribute must
+    return null.
 
-On Sat, 1 Mar 2008, Jonas Sicking wrote:
-&gt; 
-&gt; Well, that was my intention with the initial proposal. But Hixie pointed    
-&gt; out that &quot;did something&quot; is a very hard thing to define. For example on 
-&gt; a &lt;a href=&quot;...&quot;&gt;, does the user hovering the node count? Does resizing
-&gt; the window count? Does removing the node from the DOM and reinserting it
-&gt; count?
+   &lt;li&gt;Otherwise, it must return &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;.
+  &lt;/ol&gt;
 
-On Sat, 1 Mar 2008, Maciej Stachowiak wrote:
-&gt; 
-&gt; How about requiring that the base used is the one in effect when a given
-&gt; relative URI is resolved, and define that URIs for resource-loading 
-&gt; elements are resolved at the time the relevant attribute is set or
-&gt; parsed (but for hyperlinks, at the time it is dereferenced). That is        
-&gt; easy to implement, interoperable, and reasonably predictable. It makes
-&gt; sense that changing &lt;base&gt; would affect future loads but not trigger
-&gt; reloads of already loaded or already in progress resources.
+  &lt;p&gt;On setting, if the given element has an &lt;code title=attr-id&gt;&lt;a
+   href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute, then the content attribute must be set
+   to the value of that &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt;
+   attribute. Otherwise, the DOM attribute must be set to the empty string.&lt;/p&gt;
+  &lt;!-- XXX or raise an exception? --&gt;
 
-possibly &quot;in the event that the xml:base or base href attribute is
-changed, user agents may, whenever convenient, pretend, for the sake
-of url resolution, that it has not changed&quot;
+  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Collections&lt;/h4&gt;
 
-possibly define &quot;base uri change notification behaviour&quot; for all
-elements with URI attributes, and then define changing base href and
-xml:base to activate that behaviour on all elements in the affected
-subtree. Also make this algorithm get called when a node from another
-document is inserted into an HTML document. (we could define that
-you're allowed to do that, in the absence of a DOM Core update)
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
+   href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;,
+   and &lt;code&gt;&lt;a
+   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interfaces
+   represent various lists of DOM nodes. Collectively, objects implementing
+   these interfaces are called &lt;dfn id=collections0&gt;collections&lt;/dfn&gt;.
+
+  &lt;p&gt;When a &lt;a href=&quot;#collections0&quot; title=collections&gt;collection&lt;/a&gt; is
+   created, a filter and a root are associated with the collection.
+
+  &lt;p class=example&gt;For example, when the &lt;code&gt;&lt;a
+   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; object for the &lt;code
+   title=dom-document-images&gt;&lt;a href=&quot;#images0&quot;&gt;document.images&lt;/a&gt;&lt;/code&gt;
+   attribute is created, it is associated with a filter that selects only
+   &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, and rooted at the root of
+   the document.
+
+  &lt;p&gt;The &lt;a href=&quot;#collections0&quot; title=collections&gt;collection&lt;/a&gt; then &lt;dfn
+   id=represents title=&quot;represented by the collection&quot;&gt;represents&lt;/dfn&gt; a &lt;a
+   href=&quot;#live&quot;&gt;live&lt;/a&gt; view of the subtree rooted at the collection's root,
+   containing only nodes that match the given filter. The view is linear. In
+   the absence of specific requirements to the contrary, the nodes within the
+   collection must be sorted in &lt;a href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
+
+  &lt;p class=note&gt;The &lt;code title=dom-table-rows&gt;&lt;a
+   href=&quot;#rows&quot;&gt;rows&lt;/a&gt;&lt;/code&gt; list is not in tree order.
+
+  &lt;p&gt;An attribute that returns a collection must return the same object every
+   time it is retrieved.
+
+  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.5.2.1. &lt;/span&gt;HTMLCollection&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface
+   represents a generic &lt;a href=&quot;#collections0&quot;
+   title=collections&gt;collection&lt;/a&gt; of elements.
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=htmlcollection0&gt;HTMLCollection&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;a href=&quot;#length&quot; title=dom-HTMLCollection-length&gt;length&lt;/a&gt;;
+  [IndexGetter] Element &lt;a href=&quot;#itemindex&quot; title=dom-HTMLCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
+  [NameGetter] Element &lt;a href=&quot;#nameditem&quot; title=dom-HTMLCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=length
+   title=dom-HTMLCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return the number of nodes &lt;a href=&quot;#represents&quot;&gt;represented by the
+   collection&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;dfn id=itemindex title=dom-HTMLCollection-item&gt;&lt;code&gt;item(&lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
+   null.
+
+  &lt;p&gt;The &lt;dfn id=nameditem
+   title=dom-HTMLCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the first node in the
+   collection that matches the following requirements:
+
+  &lt;ul&gt;
+   &lt;li&gt;It is an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
+    href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt;,
+    &lt;code&gt;form&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a
+    href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element with a &lt;code
+    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
+    or,
+
+   &lt;li&gt;It is an &lt;a href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML
+    element&lt;/a&gt; of any kind with an &lt;code title=attr-id&gt;&lt;a
+    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;.
+    (Non-HTML elements, even if they have IDs, are not searched for the
+    purposes of &lt;code title=dom-HTMLCollection-namedItem&gt;&lt;a
+    href=&quot;#nameditem&quot;&gt;namedItem()&lt;/a&gt;&lt;/code&gt;.)
+  &lt;/ul&gt;
+
+  &lt;p&gt;If no such elements are found, then the method must return null.
+
+  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.5.2.2.
+   &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a
+   href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;
+   interface represents a &lt;a href=&quot;#collections0&quot;
+   title=collections&gt;collection&lt;/a&gt; of form controls.
+
+  &lt;pre
+   class=idl&gt;interface &lt;dfn id=htmlformcontrolscollection0&gt;HTMLFormControlsCollection&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;a href=&quot;#length0&quot; title=dom-HTMLFormControlsCollection-length&gt;length&lt;/a&gt;;
+  [IndexGetter] &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; &lt;a href=&quot;#itemindex0&quot; title=dom-HTMLFormControlsCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
+  [NameGetter] Object &lt;a href=&quot;#nameditem0&quot; title=dom-HTMLFormControlsCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=length0
+   title=dom-HTMLFormControlsCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return the number of nodes &lt;a
+   href=&quot;#represents&quot;&gt;represented by the collection&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;dfn id=itemindex0
+   title=dom-HTMLFormControlsCollection-item&gt;&lt;code&gt;item(&lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
+   null.
+
+  &lt;p&gt;The &lt;dfn id=nameditem0
+   title=dom-HTMLFormControlsCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must act according to the
+   following algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If, at the time the method is called, there is exactly one node in the
+    collection that has either an &lt;code title=attr-id&gt;&lt;a
+    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-name&gt;name&lt;/code&gt;
+    attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and
+    stop the algorithm.
+
+   &lt;li&gt;Otherwise, if there are no nodes in the collection that have either an
+    &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
+    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
+    then return null and stop the algorithm.
+
+   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a live
+    view of the &lt;code&gt;&lt;a
+    href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;
+    object, further filtered so that the only nodes in the
+    &lt;code&gt;NodeList&lt;/code&gt; object are those that have either an &lt;code
+    title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
+    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;.
+    The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object must be sorted in &lt;a
+    href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
+
+   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.
+  &lt;/ol&gt;
+  &lt;!--
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
 --&gt;
-     
+
+  &lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.5.2.3.
+   &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a
+   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interface
+   represents a list of &lt;code&gt;option&lt;/code&gt; elements.
+
+  &lt;pre
+   class=idl&gt;interface &lt;dfn id=htmloptionscollection0&gt;HTMLOptionsCollection&lt;/dfn&gt; {
+           attribute unsigned long &lt;a href=&quot;#length1&quot; title=dom-HTMLOptionsCollection-length&gt;length&lt;/a&gt;;
+  [IndexGetter] HTMLOptionElement &lt;a href=&quot;#itemindex1&quot; title=dom-HTMLOptionsCollection-item&gt;item&lt;/a&gt;(in unsigned long index);
+  [NameGetter] Object &lt;a href=&quot;#nameditem1&quot; title=dom-HTMLOptionsCollection-namedItem&gt;namedItem&lt;/a&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;On getting, the &lt;dfn id=length1
+   title=dom-HTMLOptionsCollection-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; attribute
+   must return the number of nodes &lt;a href=&quot;#represents&quot;&gt;represented by the
+   collection&lt;/a&gt;.
+
+  &lt;p&gt;On setting, the behavior depends on whether the new value is equal to,
+   greater than, or less than the number of nodes &lt;a
+   href=&quot;#represents&quot;&gt;represented by the collection&lt;/a&gt; at that time. If the
+   number is the same, then setting the attribute must do nothing. If the new
+   value is greater, then &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; new &lt;code&gt;option&lt;/code&gt;
+   elements with no attributes and no child nodes must be appended to the
+   &lt;code&gt;select&lt;/code&gt; element on which the &lt;code&gt;&lt;a
+   href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; is rooted,
+   where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two numbers (new
+   value minus old value). If the new value is lower, then the last &lt;var
+   title=&quot;&quot;&gt;n&lt;/var&gt; nodes in the collection must be removed from their parent
+   nodes, where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two
+   numbers (old value minus new value).
+
+  &lt;p class=note&gt;Setting &lt;code title=dom-HTMLOptionsCollection-length&gt;&lt;a
+   href=&quot;#length1&quot;&gt;length&lt;/a&gt;&lt;/code&gt; never removes or adds any
+   &lt;code&gt;optgroup&lt;/code&gt; elements, and never adds new children to existing
+   &lt;code&gt;optgroup&lt;/code&gt; elements (though it can remove children from them).
+
+  &lt;p&gt;The &lt;dfn id=itemindex1
+   title=dom-HTMLOptionsCollection-item&gt;&lt;code&gt;item(&lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must return
+   null.
+
+  &lt;p&gt;The &lt;dfn id=nameditem1
+   title=dom-HTMLOptionsCollection-namedItem&gt;&lt;code&gt;namedItem(&lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must act according to the
+   following algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If, at the time the method is called, there is exactly one node in the
+    collection that has either an &lt;code title=attr-id&gt;&lt;a
+    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code title=attr-name&gt;name&lt;/code&gt;
+    attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and
+    stop the algorithm.
+
+   &lt;li&gt;Otherwise, if there are no nodes in the collection that have either an
+    &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
+    title=attr-name&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
+    then return null and stop the algorithm.
+
+   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a live
+    view of the &lt;code&gt;&lt;a
+    href=&quot;#htmloptionscollection0&quot;&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; object,
+    further filtered so that the only nodes in the &lt;code&gt;NodeList&lt;/code&gt;
+    object are those that have either an &lt;code title=attr-id&gt;&lt;a
+    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute or a &lt;code
+    title=attr-option-name&gt;name&lt;/code&gt; attribute equal to &lt;var
+    title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object must be
+    sorted in &lt;a href=&quot;#tree-order&quot;&gt;tree order&lt;/a&gt;.
+
+   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.
+  &lt;/ol&gt;
+  &lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;
+
+  &lt;p class=big-issue&gt;We may want to add &lt;code&gt;add()&lt;/code&gt; and
+   &lt;code&gt;remove()&lt;/code&gt; methods here too because IE implements
+   HTMLSelectElement and HTMLOptionsCollection on the same object, and so
+   people use them almost interchangeably in the wild.
+
+  &lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface
+   represents an interface to an underlying string that consists of an &lt;a
+   href=&quot;#unordered&quot;&gt;unordered set of unique space-separated tokens&lt;/a&gt;.
+
+  &lt;p&gt;Which string underlies a particular &lt;code&gt;&lt;a
+   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object is defined when the
+   object is created. It might be a content attribute (e.g. the string that
+   underlies the &lt;code title=dom-classList&gt;&lt;a
+   href=&quot;#classlist&quot;&gt;classList&lt;/a&gt;&lt;/code&gt; object is the &lt;code
+   title=attr-class&gt;&lt;a href=&quot;#class&quot;&gt;class&lt;/a&gt;&lt;/code&gt; attribute), or it might
+   be an anonymous string (e.g. when a &lt;code&gt;&lt;a
+   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object is passed to an
+   author-implemented callback in the &lt;code&gt;&lt;a
+   href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt; APIs).
+
+  &lt;pre
+   class=idl&gt;[&lt;a href=&quot;#stringify&quot; title=dom-tokenlist-toString&gt;Stringifies&lt;/a&gt;] interface &lt;dfn id=domtokenlist0&gt;DOMTokenList&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;a href=&quot;#length2&quot; title=dom-tokenlist-length&gt;length&lt;/a&gt;;
+  [IndexGetter] DOMString &lt;a href=&quot;#itemindex2&quot; title=dom-tokenlist-item&gt;item&lt;/a&gt;(in unsigned long index);
+  boolean &lt;a href=&quot;#hastoken&quot; title=dom-tokenlist-has&gt;has&lt;/a&gt;(in DOMString token);
+  void &lt;a href=&quot;#addtoken&quot; title=dom-tokenlist-add&gt;add&lt;/a&gt;(in DOMString token);
+  void &lt;a href=&quot;#remove0&quot; title=dom-tokenlist-remove&gt;remove&lt;/a&gt;(in DOMString token);
+  boolean &lt;a href=&quot;#toggle&quot; title=dom-tokenlist-toggle&gt;toggle&lt;/a&gt;(in DOMString token);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=length2 title=dom-tokenlist-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return the number of &lt;em&gt;unique&lt;/em&gt; tokens that result
+   from &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;splitting the
+   underlying string on spaces&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;dfn id=itemindex2 title=dom-tokenlist-item&gt;&lt;code&gt;item(&lt;var
+   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must &lt;a href=&quot;#split&quot;
+   title=&quot;split a string on spaces&quot;&gt;split the underlying string on
+   spaces&lt;/a&gt;, sort the resulting list of tokens by Unicode
+   codepoint&lt;!-- XXX that's
+  basically nonsense. What sort order do we want here? It should be
+  the cheapest one possible that is well-defined for all Unicode. --&gt;,
+   remove exact duplicates, and then return the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th
+   item in this list. If &lt;var title=&quot;&quot;&gt;index&lt;/var&gt; is equal to or greater
+   than the number of tokens, then the method must return null.
+
+  &lt;p&gt;The &lt;dfn id=hastoken title=dom-tokenlist-has&gt;&lt;code&gt;has(&lt;var
+   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+   algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
+    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
+    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
+
+   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
+    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
+    underlying string.
+
+   &lt;li&gt;If the token indicated by &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is one of the
+    tokens in the object's underlying string then return true and stop this
+    algorithm.
+
+   &lt;li&gt;Otherwise, return false.
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn id=addtoken title=dom-tokenlist-add&gt;&lt;code&gt;add(&lt;var
+   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+   algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
+    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
+    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
+
+   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
+    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
+    underlying string.
+
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the tokens in
+    the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
+    underlying string then stop the algorithm.
+
+   &lt;li&gt;Otherwise, if the &lt;code&gt;&lt;a
+    href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's underlying string
+    is not the empty string and the last character of that string is not a &lt;a
+    href=&quot;#space&quot;&gt;space character&lt;/a&gt;, then append a U+0020 SPACE character
+    to the end of that string.
+
+   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
+    &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
+    underlying string.
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn id=remove0 title=dom-tokenlist-remove&gt;&lt;code&gt;remove(&lt;var
+   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+   algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
+    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
+    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
+
+   &lt;li&gt;Otherwise, &lt;a href=&quot;#remove&quot; title=&quot;remove a token from a
+    string&quot;&gt;remove the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
+    string&lt;/a&gt;.
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn id=toggle title=dom-tokenlist-toggle&gt;&lt;code&gt;toggle(&lt;var
+   title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+   algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;a
+    href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, then raise an
+    &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the algorithm.
+
+   &lt;li&gt;Otherwise, &lt;a href=&quot;#split&quot; title=&quot;split a string on spaces&quot;&gt;split the
+    underlying string on spaces&lt;/a&gt; to get the list of tokens in the object's
+    underlying string.
+
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the tokens in
+    the &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
+    underlying string then &lt;a href=&quot;#remove&quot; title=&quot;remove a token from a
+    string&quot;&gt;remove the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
+    string&lt;/a&gt;, and stop the algorithm, returning false.
+
+   &lt;li&gt;Otherwise, if the &lt;code&gt;&lt;a
+    href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's underlying string
+    is not the empty string and the last character of that string is not a &lt;a
+    href=&quot;#space&quot;&gt;space character&lt;/a&gt;, then append a U+0020 SPACE character
+    to the end of that string.
+
+   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
+    &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; object's
+    underlying string.
+
+   &lt;li&gt;Return true.
+  &lt;/ol&gt;
+
+  &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a
+   href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface must &lt;dfn
+   id=stringify title=dom-tokenlist-toString&gt;stringify&lt;/dfn&gt; to the object's
+   underlying string representation.
+
+  &lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface
+   represents a set of name-value pairs. When a &lt;code&gt;&lt;a
+   href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; object is instanced, it is
+   associated with three algorithms, one for getting values from names, one
+   for setting names to certain values, and one for deleting names.
+
+  &lt;p class=big-issue&gt;The names of the methods on this interface are temporary
+   and will be fixed when the Web IDL / &quot;Language Bindings for DOM
+   Specifications&quot; spec is ready to handle this case.
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=domstringmap0&gt;DOMStringMap&lt;/dfn&gt; {
+  [NameGetter] DOMString &lt;a href=&quot;#xxx1name&quot; title=dom-stringmap-XXX1&gt;XXX1&lt;/a&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
+  [NameSetter] void &lt;a href=&quot;#xxx2name&quot; title=dom-stringmap-XXX2&gt;XXX2&lt;/a&gt;(in DOMString name, in DOMString value); &lt;!-- XXX DOMB --&gt;
+  [XXX] boolean &lt;a href=&quot;#xxx3name&quot; title=dom-stringmap-XXX3&gt;XXX3&lt;/a&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn id=xxx1name title=dom-stringmap-XXX1&gt;&lt;code&gt;XXX1(&lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
+   getting values from names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name,
+   and must return the corresponding value, or null if &lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt; has no corresponding value.
+
+  &lt;p&gt;The &lt;dfn id=xxx2name title=dom-stringmap-XXX2&gt;&lt;code&gt;XXX2(&lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must
+   call the algorithm for setting names to certain values, passing &lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt; as the name and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as the
+   value.
+
+  &lt;p&gt;The &lt;dfn id=xxx3name title=dom-stringmap-XXX3&gt;&lt;code&gt;XXX3(&lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
+   deleting names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name, and must
+   return true.
+
+  &lt;h4 id=dom-feature&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
+
+  &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support, and for
+   obtaining implementations of interfaces, using &lt;a
+   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&quot;&gt;feature
+   strings&lt;/a&gt;. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;
+
+  &lt;p&gt;A DOM application can use the &lt;dfn id=hasfeature
+   title=hasFeature&gt;&lt;code&gt;hasFeature(&lt;var title=&quot;&quot;&gt;feature&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;version&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the
+   &lt;code&gt;DOMImplementation&lt;/code&gt; interface with parameter values &quot;&lt;code
+   title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; (respectively) to determine
+   whether or not this module is supported by the implementation. In addition
+   to the feature string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, the feature string
+   &quot;&lt;code title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (with version string &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) can
+   be used to check if the implementation supports XHTML. User agents should
+   respond with a true value when the &lt;code&gt;&lt;a
+   href=&quot;#hasfeature&quot;&gt;hasFeature&lt;/a&gt;&lt;/code&gt; method is queried with these
+   values. Authors are cautioned, however, that UAs returning true might not
+   be perfectly compliant, and that UAs returning false might well have
+   support for features in this specification; in general, therefore, use of
+   this method is discouraged.
+
+  &lt;p&gt;The values &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code
+   title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (both with version &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) should also
+   be supported in the context of the &lt;code&gt;getFeature()&lt;/code&gt; and
+   &lt;code&gt;isSupported()&lt;/code&gt; methods, as defined by DOM3 Core.
+
+  &lt;p class=note&gt;The interfaces defined in this specification are not always
+   supersets of the interfaces defined in DOM2 HTML; some features that were
+   formerly deprecated, poorly supported, rarely used or considered
+   unnecessary have been removed. Therefore it is not guaranteed that an
+   implementation that supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
+   &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
+   &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.
+
+  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Determining the
+   type of a resource&lt;/h3&gt;
+
+  &lt;p class=warning&gt;It is imperative that the rules in this section be
+   followed exactly. When a user agent uses different heuristics for content
+   type detection than the server expects, security problems can occur. For
+   example, if a server believes that the client will treat a contributed
+   file as an image (and thus treat it as benign), but a Web browser believes
+   the content to be HTML (and thus execute any scripts contained therein),
+   the end user can be exposed to malicious content, making the user
+   vulnerable to cookie theft attacks and other cross-site scripting attacks.
+
+  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
+
+  &lt;p&gt;What explicit &lt;dfn id=content-type5 title=Content-Type&gt;Content-Type
+   metadata&lt;/dfn&gt; is associated with the resource (the resource's type
+   information) depends on the protocol that was used to fetch the resource.
+
+  &lt;p&gt;For HTTP resources, only the first Content-Type HTTP header, if any,
+   contributes any type information; the explicit type of the resource is
+   then the value of that header, interpreted as described by the HTTP
+   specifications. If the Content-Type HTTP header is present but the value
+   of the first such header cannot be interpreted as described by the HTTP
+   specifications (e.g. because its value doesn't contain a U+002F SOLIDUS
+   ('/') character), then the resource has no type information (even if there
+   are multiple Content-Type HTTP headers and one of the other ones is
+   syntactically correct). &lt;a href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt;
+
+  &lt;p&gt;For resources fetched from the file system, user agents should use
+   platform-specific conventions, e.g. operating system extension/type
+   mappings.
+
+  &lt;p&gt;Extensions must not be used for determining resource types for resources
+   fetched over HTTP.
+
+  &lt;p&gt;For resources fetched over most other protocols, e.g. FTP, there is no
+   type information.
+
+  &lt;p&gt;The &lt;dfn id=algorithm&gt;algorithm for extracting an encoding from a
+   Content-Type&lt;/dfn&gt;, given a string &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, is as follows.
+   It either returns an encoding or nothing.
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; that are a
+     case-insensitive&lt;!-- XXX ASCII--&gt; match for the word 'charset'. If no
+     such match is found, return nothing.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020 characters that
+     immediately follow the word 'charset' (there might not be any).
+
+   &lt;li&gt;
+    &lt;p&gt;If the next character is not a U+003D EQUALS SIGN ('='), return
+     nothing.
+
+   &lt;li&gt;
+    &lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020 characters that
+     immediately follow the equals sign (there might not be any).
+
+   &lt;li&gt;
+    &lt;p&gt;Process the next character as follows:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;
+     &lt;dt&gt;If it is a U+0022 QUOTATION MARK ('&quot;') and there is a later U+0022
+      QUOTATION MARK ('&quot;') in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+
+     &lt;dt&gt;If it is a U+0027 APOSTROPHE (&quot;'&quot;) and there is a later U+0027
+      APOSTROPHE (&quot;'&quot;) in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+
+     &lt;dd&gt;
+      &lt;p&gt;Return the string between this character and the next earliest
+       occurrence of this character.
+
+     &lt;dt&gt;If it is an unmatched U+0022 QUOTATION MARK ('&quot;')
+
+     &lt;dt&gt;If it is an unmatched U+0027 APOSTROPHE (&quot;'&quot;)
+
+     &lt;dt&gt;If there is no next character
+
+     &lt;dd&gt;
+      &lt;p&gt;Return nothing.
+
+     &lt;dt&gt;Otherwise
+
+     &lt;dd&gt;
+      &lt;p&gt;Return the string from this character to the first U+0009, U+000A,
+       U+000C, U+000D, U+0020, or U+003B character or the end of &lt;var
+       title=&quot;&quot;&gt;s&lt;/var&gt;, whichever comes first.
+    &lt;/dl&gt;
+  &lt;/ol&gt;
+
+  &lt;p class=note&gt;The above algorithm is a willful violation of the HTTP
+   specification. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;
+
+  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Content-Type sniffing:
+   Web pages&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=sniffed title=&quot;Content-Type sniffing&quot;&gt;sniffed type of a
+   resource&lt;/dfn&gt; must be found as follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by the &lt;a
+     href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt; for
+     the resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
+     parameters). If there is no such type, jump to the &lt;em
+     title=&quot;content-type sniffing: unknown type&quot;&gt;&lt;a
+     href=&quot;#content-type7&quot;&gt;unknown type&lt;/a&gt;&lt;/em&gt; step below.
+
+   &lt;li&gt;
+    &lt;p&gt;If the user agent is configured to strictly obey Content-Type headers
+     for this resource, then jump to the last step in this set of steps.
+
+   &lt;li&gt;
+    &lt;p&gt;If the resource was fetched over an HTTP protocol and there is an HTTP
+     Content-Type header and the value of the first such header has bytes
+     that exactly match one of the following lines:&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+
+       &lt;th&gt;Textual representation
+
+     &lt;tbody&gt;
+      &lt;tr&gt;&lt;!-- Very old Apache default --&gt;
+
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e
+
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
+
+      &lt;tr&gt;&lt;!-- Old Apache default --&gt;
+
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 49 53
+        4f 2d 38 38 35 39 2d 31
+
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=ISO-8859-1&lt;/code&gt;
+
+      &lt;tr&gt;&lt;!-- Debian's arbitrarily different Apache default --&gt;
+
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 69 73
+        6f 2d 38 38 35 39 2d 31
+
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=iso-8859-1&lt;/code&gt;
+
+      &lt;tr&gt;&lt;!-- Someone else's arbitrarily different Apache default (who?) --&gt;
+
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 55 54
+        46 2d 38
+
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=UTF-8&lt;/code&gt;
+    &lt;/table&gt;
+
+    &lt;p&gt;...then jump to the &lt;em title=&quot;content-type sniffing: text or
+     binary&quot;&gt;&lt;a href=&quot;#content-type6&quot;&gt;text or binary&lt;/a&gt;&lt;/em&gt; section below.&lt;/p&gt;
+    &lt;!-- while IE sniffs all text/plain, this will continue to grow as
+    people add new defaults. Hopefully IE will stop the madness in due
+    course and stop sniffing anything but the above... --&gt;
+    
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
+     &quot;application/unknown&quot;, jump to the &lt;em title=&quot;content-type sniffing:
+     unknown type&quot;&gt;&lt;a href=&quot;#content-type7&quot;&gt;unknown type&lt;/a&gt;&lt;/em&gt; step below.&lt;/p&gt;
+    &lt;!-- In a study looking at many billions of pages whose first five
+   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
+   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
+   &quot;application/unknown&quot; was used about once for every 35000 pages
+   labeled &quot;text/html&quot;. --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if it is
+     either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed type of the
+     resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return that and abort
+     these steps.
+   &lt;/li&gt;
+   &lt;!-- we don't want
+   image/svg+xml going through the next step --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type supported by the
+     user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;, &quot;image/jpeg&quot;, etc), then jump
+     to the &lt;em title=&quot;content-type sniffing: image&quot;&gt;&lt;a
+     href=&quot;#content-type8&quot;&gt;images&lt;/a&gt;&lt;/em&gt; section below.
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then jump to the
+     &lt;em title=&quot;content-type sniffing: feed or html&quot;&gt;&lt;a
+     href=&quot;#content-type9&quot;&gt;feed or HTML&lt;/a&gt;&lt;/em&gt; section below.
+
+   &lt;li&gt;
+    &lt;p&gt;The sniffed type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.
+  &lt;/ol&gt;
+
+  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;&lt;dfn
+   id=content-type6&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
+     available.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the smaller of either 512 or the number
+     of bytes already available.
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is 4 or more, and the first bytes of the file
+     match one of the following byte sets:&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+
+       &lt;th&gt;Description
+
+     &lt;tbody&gt;
+      &lt;tr&gt;
+       &lt;td&gt;FE FF
+
+       &lt;td&gt;UTF-16BE BOM
+        &lt;!-- followed by a character --&gt;&lt;!-- nobody uses this: or UTF-32LE BOM --&gt;
+        
+
+      &lt;tr&gt;
+       &lt;td&gt;FF FE
+
+       &lt;td&gt;UTF-16LE BOM &lt;!-- followed by a character --&gt;
+        &lt;!-- nobody uses this
+      &lt;tr&gt;
+       &lt;td&gt;00 00 FE FF
+       &lt;td&gt;UTF-32BE BOM
+--&gt;
+        &lt;!-- this one is redundant with the one above
+      &lt;tr&gt;
+       &lt;td&gt;FF FE 00 00
+       &lt;td&gt;UTF-32LE BOM
+--&gt;
+        
+
+      &lt;tr&gt;
+       &lt;td&gt;EF BB BF
+
+       &lt;td&gt;UTF-8 BOM
+        &lt;!-- followed by a character, or the first byte of a multiple character sequence --&gt;
+        &lt;!-- nobody uses this
+      &lt;tr&gt;
+       &lt;td&gt;DD 73 66 73
+       &lt;td&gt;UTF-EBCDIC BOM
+--&gt;
+        
+    &lt;/table&gt;
+
+    &lt;p&gt;...then the sniffed type of the resource is &quot;text/plain&quot;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, if any of the first &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; bytes of the
+     resource are in one of the following byte ranges:&lt;/p&gt;
+    &lt;!-- This byte list is based on RFC 2046 Section 4.1.2. Characters
+    in the range 0x00-0x1F, with the exception of 0x09, 0x0A, 0x0C,
+    0x0D (ASCII for TAB, LF, FF, and CR), and character 0x1B
+    (reportedly used by some encodings as a shift escape), are
+    invalid. Thus, if we see them, we assume it's not text. --&gt;
+    
+    &lt;ul class=brief&gt;
+     &lt;li&gt; 0x00 - 0x08
+
+     &lt;li&gt; 0x0B
+
+     &lt;li&gt; 0x0E - 0x1A
+
+     &lt;li&gt; 0x1C - 0x1F
+    &lt;/ul&gt;
+
+    &lt;p&gt;...then the sniffed type of the resource is
+     &quot;application/octet-stream&quot;.&lt;/p&gt;
+
+    &lt;p class=big-issue&gt;maybe we should invoke the &quot;Content-Type sniffing:
+     image&quot; section now, falling back on &quot;application/octet-stream&quot;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, the sniffed type of the resource is &quot;text/plain&quot;.
+  &lt;/ol&gt;
+
+  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;2.6.4 &lt;/span&gt;&lt;dfn
+   id=content-type7&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
+     available.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;stream length&lt;/var&gt; be the smaller of either 512 or
+     the number of bytes already available.
+
+   &lt;li&gt;
+    &lt;p&gt;For each row in the table below:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;
+     &lt;dt&gt;If the row has no &quot;&lt;em&gt;WS&lt;/em&gt;&quot; bytes:
+
+     &lt;dd&gt;
+      &lt;ol&gt;
+       &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; be the length of the
+        pattern (number of bytes described by the cell in the second column
+        of the row).
+
+       &lt;li&gt;If &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; is smaller than &lt;var
+        title=&quot;&quot;&gt;stream length&lt;/var&gt; then skip this row.
+
+       &lt;li&gt;Apply the &quot;and&quot; operator to the first &lt;var title=&quot;&quot;&gt;pattern
+        length&lt;/var&gt; bytes of the resource and the given mask (the bytes in
+        the cell of first column of that row), and let the result be the &lt;var
+        title=&quot;&quot;&gt;data&lt;/var&gt;.
+
+       &lt;li&gt;If the bytes of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; matches the given
+        pattern bytes exactly, then the sniffed type of the resource is the
+        type given in the cell of the third column in that row; abort these
+        steps.
+      &lt;/ol&gt;
+
+     &lt;dt&gt;If the row has a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
+
+     &lt;dd&gt;
+      &lt;ol&gt;
+       &lt;li&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; be an index into
+         the mask and pattern byte strings of the row.
+
+       &lt;li&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; be an index into
+         the byte stream being examined.
+
+       &lt;li&gt;
+        &lt;p&gt;&lt;em&gt;Loop&lt;/em&gt;: If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;
+         points beyond the end of the byte stream, then this row doesn't
+         match, skip this row.
+
+       &lt;li&gt;
+        &lt;p&gt;Examine the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of
+         the byte stream as follows:&lt;/p&gt;
+
+        &lt;dl class=switch&gt;
+         &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the
+          pattern is a normal hexadecimal byte and not a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
+
+         &lt;dd&gt;
+          &lt;p&gt;If the &quot;and&quot; operator, applied to the &lt;var
+           title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the stream and the
+           &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the mask,
+           yield a value different that the &lt;var
+           title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the pattern, then
+           skip this row.&lt;/p&gt;
+
+          &lt;p&gt;Otherwise, increment &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;
+           to the next byte in the mask and pattern and &lt;var
+           title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in the byte
+           stream.&lt;/p&gt;
+
+         &lt;dt&gt;Otherwise, if the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th
+          byte of the pattern is a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
+
+         &lt;dd&gt;
+          &lt;p&gt;&quot;&lt;em&gt;WS&lt;/em&gt;&quot; means &quot;whitespace&quot;, and allows insignificant
+           whitespace to be skipped when sniffing for a type signature.&lt;/p&gt;
+
+          &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the
+           stream is one of 0x09 (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII
+           FF), 0x0D (ASCII CR), or 0x20 (ASCII space), then increment only
+           the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
+           the byte stream.&lt;/p&gt;
+
+          &lt;p&gt;Otherwise, increment only the &lt;var
+           title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in the
+           mask and pattern.&lt;/p&gt;
+        &lt;/dl&gt;
+
+       &lt;li&gt;
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; does not point
+         beyond the end of the mask and pattern byte strings, then jump back
+         to the &lt;em&gt;loop&lt;/em&gt; step in this algorithm.
+
+       &lt;li&gt;
+        &lt;p&gt;Otherwise, the sniffed type of the resource is the type given in
+         the cell of the third column in that row; abort these steps.
+      &lt;/ol&gt;
+    &lt;/dl&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;As a last-ditch effort, jump to the &lt;a href=&quot;#content-type6&quot;
+     title=&quot;content-type sniffing: text or binary&quot;&gt;text or binary&lt;/a&gt;
+     section.
+  &lt;/ol&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;th colspan=2&gt;Bytes in Hexadecimal
+
+     &lt;th rowspan=2&gt;Sniffed type
+
+     &lt;th rowspan=2&gt;Comment
+
+    &lt;tr&gt;
+     &lt;th&gt;Mask
+
+     &lt;th&gt;Pattern
+
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF DF DF DF FF DF DF DF DF
+
+     &lt;td&gt;3C 21 44 4F 43 54 59 50 45 20 48 54 4D 4C &lt;!-- &quot;&lt;!DOCTYPE HTML&quot; --&gt;
+      &lt;!-- common in static data --&gt;
+
+     &lt;td&gt;text/html
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;!DOCTYPE HTML&lt;/code&gt;&quot; in US-ASCII or
+      compatible encodings, case-insensitively.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF
+
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 54 4D 4C &lt;!-- &quot;&lt;HTML&quot; --&gt;
+      &lt;!-- common in static data --&gt;
+
+     &lt;td&gt;text/html
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HTML&lt;/code&gt;&quot; in US-ASCII or
+      compatible encodings, case-insensitively, possibly with leading spaces.
+      
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF
+
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 45 41 44 &lt;!-- &quot;&lt;HEAD&quot; --&gt;
+      &lt;!-- common in static data --&gt;
+
+     &lt;td&gt;text/html
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HEAD&lt;/code&gt;&quot; in US-ASCII or
+      compatible encodings, case-insensitively, possibly with leading spaces.
+      
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF DF DF
+
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 53 43 52 49 50 54 &lt;!-- &quot;&lt;SCRIPT&quot; --&gt;
+      &lt;!-- common in dynamic data --&gt;
+
+     &lt;td&gt;text/html
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;SCRIPT&lt;/code&gt;&quot; in US-ASCII or
+      compatible encodings, case-insensitively, possibly with leading spaces.
+      
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF
+
+     &lt;td&gt;25 50 44 46 2D
+      &lt;!-- &quot;%PDF-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
+      
+
+     &lt;td&gt;application/pdf
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%PDF-&lt;/code&gt;&quot;, the PDF signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF FF FF FF FF FF
+
+     &lt;td&gt;25 21 50 53 2D 41 64 6F 62 65 2D
+      &lt;!-- &quot;%!PS-Adobe-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
+      
+
+     &lt;td&gt;application/postscript
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%!PS-Adobe-&lt;/code&gt;&quot;, the PostScript
+      signature. &lt;!-- copied from the section below --&gt;
+
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF
+
+     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
+
+     &lt;td&gt;image/gif
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF
+
+     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
+
+     &lt;td&gt;image/gif
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF FF FF
+
+     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A
+      &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
+
+     &lt;td&gt;image/png
+
+     &lt;td&gt;The PNG signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF
+
+     &lt;td&gt;FF D8 FF
+      &lt;!-- SOI marker followed by the first byte of another marker --&gt;
+
+     &lt;td&gt;image/jpeg
+
+     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF
+
+     &lt;td&gt;42 4D
+
+     &lt;td&gt;image/bmp
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF
+
+     &lt;td&gt;00 00 01 00
+
+     &lt;td&gt;image/vnd.microsoft.icon
+
+     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format
+      signature.
+  &lt;/table&gt;
+
+  &lt;p&gt;User agents may support further types if desired, by implicitly adding
+   to the above table. However, user agents should not use any other patterns
+   for types already mentioned in the table above, as this could then be used
+   for privilege escalation (where, e.g., a server uses the above table to
+   determine that content is not HTML and thus safe from XSS attacks, but
+   then a user agent detects it as HTML anyway and allows script to execute).
+
+  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;2.6.5 &lt;/span&gt;&lt;dfn
+   id=content-type8&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;If the first bytes of the file match one of the byte sequences in the
+   first columns of the following table, then the sniffed type of the
+   resource is the type given in the corresponding cell in the second column
+   on the same row:
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;th&gt;Bytes in Hexadecimal
+
+     &lt;th&gt;Sniffed type
+
+     &lt;th&gt;Comment &lt;!-- update the table above if you change this! --&gt;
+
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
+
+     &lt;td&gt;image/gif
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
+
+     &lt;td&gt;image/gif
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A
+      &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
+
+     &lt;td&gt;image/png
+
+     &lt;td&gt;The PNG signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;FF D8 FF
+      &lt;!-- SOI marker followed by the first byte of another marker --&gt;
+
+     &lt;td&gt;image/jpeg
+
+     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
+
+    &lt;tr&gt;
+     &lt;td&gt;42 4D
+
+     &lt;td&gt;image/bmp
+
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
+
+    &lt;tr&gt;
+     &lt;td&gt;00 00 01 00
+
+     &lt;td&gt;image/vnd.microsoft.icon
+
+     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format
+      signature.
+      &lt;!-- XXX Mozilla also detects ART (AOL proprietary format) and Windows Cursor files --&gt;
+      
+  &lt;/table&gt;
+
+  &lt;p&gt;User agents must ignore any rows for image types that they do not
+   support.
+
+  &lt;p&gt;Otherwise, the sniffed type of the resource is the same as its &lt;var
+   title=&quot;&quot;&gt;official type&lt;/var&gt;.
+
+  &lt;h4 id=content-type4&gt;&lt;span class=secno&gt;2.6.6 &lt;/span&gt;&lt;dfn
+   id=content-type9&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;!-- mostly based on:
+   <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
+   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192</A>
+   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127</A>
+  --&gt;
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
+     available.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; be the stream of bytes, and let &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;i&lt;/var&gt;]&lt;/span&gt; represent the byte in
+     &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; with position &lt;var title=&quot;&quot;&gt;i&lt;/var&gt;, treating &lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt; as zero-indexed (so the first byte is at &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;i&lt;/var&gt;=0&lt;/span&gt;).
+
+   &lt;li&gt;
+    &lt;p&gt;If at any point this algorithm requires the user agent to determine
+     the value of a byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; which is not yet available,
+     or which is past the first 512 bytes of the resource, or which is beyond
+     the end of the resource, the user agent must stop this algorithm, and
+     assume that the sniffed type of the resource is &quot;text/html&quot;.&lt;/p&gt;
+
+    &lt;p class=note&gt;User agents are allowed, by the first step of this
+     algorithm, to wait until the first 512 bytes of the resource are
+     available.
+
+   &lt;li&gt;
+    &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to 0.
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[0]&lt;/span&gt; is 0xEF, &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt;[1]&lt;/span&gt; is 0xBB, and &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt;[2]&lt;/span&gt; is 0xBF, then set &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to
+     3. (This skips over a leading UTF-8 BOM, if any.)
+
+   &lt;li&gt;
+    &lt;p&gt;&lt;i&gt;Loop start:&lt;/i&gt; Examine &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;dl
+     class=switch&gt;&lt;!-- skip whitespace (S token as defined in XML 1.0 section 2.3; production [3] --&gt;
+
+     &lt;dt&gt;If it is 0x09 (ASCII tab), 0x20 (ASCII space), 0x0A (ASCII LF), or
+      0x0D (ASCII CR)
+
+     &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and repeat this step.
+
+     &lt;dt&gt;If it is 0x3C (ASCII &quot;&lt;code title=&quot;&quot;&gt;&lt;&lt;/code&gt;&quot;)
+
+     &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and go to the next step.
+
+     &lt;dt&gt;If it is anything else
+
+     &lt;dd&gt;The sniffed type of the resource is &quot;text/html&quot;. Abort these steps.
+    &lt;/dl&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the bytes with positions &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are exactly equal
+     to 0x21, 0x2D, 0x2D respectively (ASCII for &quot;&lt;code
+     title=&quot;&quot;&gt;!--&lt;/code&gt;&quot;), then:&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3.&lt;/li&gt;
+     &lt;!-- skips past the &quot; ! - - &quot; --&gt;
+
+     &lt;li&gt;If the bytes with positions &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;&lt;/span&gt; to
+      &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are
+      exactly equal to 0x2D, 0x2D, 0x3E respectively (ASCII for &quot;&lt;code
+      title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot;), then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3
+      and jump back to the previous step (the step labeled &lt;i&gt;loop start&lt;/i&gt;)
+      in the overall algorithm in this section.
+
+     &lt;li&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
+
+     &lt;li&gt;Return to step 2 in these substeps.
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x21
+     (ASCII &quot;&lt;code title=&quot;&quot;&gt;!&lt;/code&gt;&quot;):&lt;/p&gt;
+    &lt;!-- this skips past a DOCTYPE if there is one. It is brain-dead
+    because we don't have to be clever to parse the Atom and RSS x.y
+    DOCTYPEs, as they don't do anything clever like have internal
+    subsets or quoted &quot;&gt;&quot; characters. If this fails, then that's ok,
+    we'll treat it as HTML which is fine since we know it's not a feed
+    in that case. --&gt;
+    
+    &lt;ol&gt;
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
+
+     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; equal
+      0x3E, then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the
+      step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this
+      section.
+
+     &lt;li&gt;Otherwise, return to step 1 in these substeps.
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x3F
+     (ASCII &quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;):&lt;/p&gt;
+
+    &lt;ol&gt;
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
+
+     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; and
+      &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+1]&lt;/span&gt; equal
+      0x3F and 0x3E respectively, then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1
+      and jump back to the step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall
+      algorithm in this section.
+
+     &lt;li&gt;Otherwise, return to step 1 in these substeps.
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, if the bytes in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt; match any of the sequences of bytes in the first
+     column of the following table, then the user agent must follow the steps
+     given in the corresponding cell in the second column of the same row.&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+
+       &lt;th&gt;Requirement
+
+       &lt;th&gt;Comment
+
+     &lt;tbody&gt;
+      &lt;tr&gt;
+       &lt;td&gt;72 73 73
+
+       &lt;td&gt;The sniffed type of the resource is &quot;application/rss+xml&quot;; abort
+        these steps
+
+       &lt;td&gt;The three ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rss&lt;/code&gt;&quot;
+
+      &lt;tr&gt;
+       &lt;td&gt;66 65 65 64
+
+       &lt;td&gt;The sniffed type of the resource is &quot;application/atom+xml&quot;; abort
+        these steps
+
+       &lt;td&gt;The four ASCII characters &quot;&lt;code title=&quot;&quot;&gt;feed&lt;/code&gt;&quot;
+
+      &lt;tr&gt;
+       &lt;td&gt;72 64 66 3A 52 44 46
+
+       &lt;td&gt;Continue to the next step in this algorithm
+
+       &lt;td&gt;The ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rdf:RDF&lt;/code&gt;&quot;
+    &lt;/table&gt;
+
+    &lt;p&gt;If none of the byte sequences above match the bytes in &lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;, then the sniffed
+     type of the resource is &quot;text/html&quot;. Abort these steps.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p class=big-issue&gt;If, before the next &quot;&gt;&quot;, you find two xmlns*
+     attributes with <A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A> and
+     <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> as the namespaces, then the sniffed type of the
+     resource is &quot;application/rss+xml&quot;, abort these steps. (maybe we only
+     need to check for <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> actually)
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, the sniffed type of the resource is &quot;text/html&quot;.
+  &lt;/ol&gt;
+
+  &lt;p class=note&gt;For efficiency reasons, implementations may wish to implement
+   this algorithm and the algorithm for detecting the character encoding of
+   HTML documents in parallel.
+
+  &lt;h2 id=dom&gt;&lt;span class=secno&gt;3. &lt;/span&gt;Semantics and structure of HTML
+   documents&lt;/h2&gt;
+
+  &lt;h3 id=semantics-intro&gt;&lt;span class=secno&gt;3.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
+
+  &lt;p class=big-issue&gt;An introduction to marking up a document.
+
+  &lt;h3 id=documents&gt;&lt;span class=secno&gt;3.2 &lt;/span&gt;Documents&lt;/h3&gt;
+
+  &lt;p&gt;Every XML and HTML document in an HTML UA is represented by a
+   &lt;code&gt;Document&lt;/code&gt; object. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;
+
+  &lt;h4 id=documents0&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Documents in the DOM&lt;/h4&gt;
+
+  &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn
+   id=xml-documents&gt;XML documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn
+   id=html-&gt;HTML documents&lt;/dfn&gt; when they are created. Whether a document is
+   an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt; or an &lt;a
+   href=&quot;#xml-documents&quot; title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt; affects the
+   behavior of certain APIs, as well as a few CSS rendering rules. &lt;a
+   href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;
+
+  &lt;p class=note&gt;A &lt;code&gt;Document&lt;/code&gt; object created by the &lt;code
+   title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API on the &lt;code&gt;DOMImplementation&lt;/code&gt;
+   object is initially an &lt;a href=&quot;#xml-documents&quot; title=&quot;XML documents&quot;&gt;XML
+   document&lt;/a&gt;, but can be made into an &lt;a href=&quot;#html-&quot; title=&quot;HTML
+   documents&quot;&gt;HTML document&lt;/a&gt; by calling &lt;code title=dom-document-open&gt;&lt;a
+   href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; on it.
+
+  &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing this
+   specification) must also implement the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface, available using
+   binding-specific methods. (This is the case whether or not the document in
+   question is an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;
+   or indeed whether it contains any &lt;a href=&quot;#html-elements&quot;&gt;HTML
+   elements&lt;/a&gt; at all.) &lt;code&gt;Document&lt;/code&gt; objects must also implement
+   the document-level interface of any other namespaces found in the document
+   that the UA supports. For example, if an HTML implementation also supports
+   SVG, then the &lt;code&gt;Document&lt;/code&gt; object must implement &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;SVGDocument&lt;/code&gt;.
+
+  &lt;p class=note&gt;Because the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface is now obtained
+   using binding-specific casting methods instead of simply being the primary
+   interface of the document object, it is no longer defined as inheriting
+   from &lt;code&gt;Document&lt;/code&gt;.
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=htmldocument&gt;HTMLDocument&lt;/dfn&gt; {
+  // &lt;a href=&quot;#resource0&quot;&gt;resource metadata management&lt;/a&gt;
+  [PutForwards=href] readonly attribute &lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt; &lt;a href=&quot;#location0&quot; title=dom-document-location&gt;location&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#url&quot; title=dom-document-URL&gt;URL&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#domain&quot; title=dom-document-domain&gt;domain&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#referrer&quot; title=dom-document-referrer&gt;referrer&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#cookie0&quot; title=dom-document-cookie&gt;cookie&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#lastmodified&quot; title=dom-document-lastModified&gt;lastModified&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#compatmode&quot; title=dom-document-compatMode&gt;compatMode&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#charset0&quot; title=dom-document-charset&gt;charset&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#characterset&quot; title=dom-document-characterSet&gt;characterSet&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#defaultcharset&quot; title=dom-document-defaultCharset&gt;defaultCharset&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#readystate&quot; title=dom-document-readyState&gt;readyState&lt;/a&gt;;
+
+  // &lt;a href=&quot;#dom-tree0&quot;&gt;DOM tree accessors&lt;/a&gt;
+           attribute DOMString &lt;a href=&quot;#document.title&quot; title=dom-document-title&gt;title&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#dir1&quot; title=dom-document-dir&gt;dir&lt;/a&gt;;
+           attribute &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; &lt;a href=&quot;#body&quot; title=dom-document-body&gt;body&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#images0&quot; title=dom-document-images&gt;images&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#embeds&quot; title=dom-document-embeds&gt;embeds&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#plugins&quot; title=dom-document-plugins&gt;plugins&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#links0&quot; title=dom-document-links&gt;links&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#forms0&quot; title=dom-document-forms&gt;forms&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#anchors&quot; title=dom-document-anchors&gt;anchors&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#scripts0&quot; title=dom-document-scripts&gt;scripts&lt;/a&gt;;
+  NodeList &lt;a href=&quot;#getelementsbyname&quot; title=dom-document-getElementsByName&gt;getElementsByName&lt;/a&gt;(in DOMString elementName);
+  NodeList &lt;a href=&quot;#getelementsbyclassname&quot; title=dom-document-getElementsByClassName&gt;getElementsByClassName&lt;/a&gt;(in DOMString classNames);
+
+  // &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup insertion&lt;/a&gt;
+           attribute DOMString &lt;a href=&quot;#innerhtml&quot; title=dom-innerHTML&gt;innerHTML&lt;/a&gt;;
+  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;();
+  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString type);
+  &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString type, in DOMString replace);
+  &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features);
+  &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features, in boolean replace);
+  void &lt;a href=&quot;#close&quot; title=dom-document-close&gt;close&lt;/a&gt;();
+  void &lt;a href=&quot;#document.write&quot; title=dom-document-write&gt;write&lt;/a&gt;(in DOMString text);
+  void &lt;a href=&quot;#document.writeln...&quot; title=dom-document-writeln&gt;writeln&lt;/a&gt;(in DOMString text);
+
+  // &lt;a href=&quot;#user-interaction&quot;&gt;user interaction&lt;/a&gt;
+  &lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt; &lt;a href=&quot;#getselection0&quot; title=dom-document-getSelection&gt;getSelection&lt;/a&gt;();
+  readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;a href=&quot;#activeelement&quot; title=dom-document-activeElement&gt;activeElement&lt;/a&gt;;
+  boolean &lt;a href=&quot;#hasfocus&quot; title=dom-document-hasFocus&gt;hasFocus&lt;/a&gt;();
+           attribute boolean &lt;a href=&quot;#designMode&quot; title=dom-document-designMode&gt;designMode&lt;/a&gt;;
+  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean showUI);
+  boolean &lt;a href=&quot;#execCommand&quot; title=dom-document-execCommand&gt;execCommand&lt;/a&gt;(in DOMString commandId, in boolean showUI, in DOMString value);
+  boolean &lt;a href=&quot;#querycommandenabled&quot; title=dom-document-queryCommandEnabled&gt;queryCommandEnabled&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandindeterm&quot; title=dom-document-queryCommandIndeterm&gt;queryCommandIndeterm&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandstate&quot; title=dom-document-queryCommandState&gt;queryCommandState&lt;/a&gt;(in DOMString commandId);
+  boolean &lt;a href=&quot;#querycommandsupported&quot; title=dom-document-queryCommandSupported&gt;queryCommandSupported&lt;/a&gt;(in DOMString commandId);
+  DOMString &lt;a href=&quot;#querycommandvalue&quot; title=dom-document-queryCommandValue&gt;queryCommandValue&lt;/a&gt;(in DOMString commandId);
+  readonly attribute &lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt; &lt;a href=&quot;#commands0&quot; title=dom-document-commands&gt;commands&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;Since the &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;
+   interface holds methods and attributes related to a number of disparate
+   features, the members of this interface are described in various different
+   sections.
+
+  &lt;h4 id=security&gt;&lt;span class=secno&gt;3.2.2 &lt;/span&gt;Security&lt;/h4&gt;
+
+  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;
+   whenever any of the members of an &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object are accessed by
+   scripts whose &lt;a href=&quot;#effective3&quot;&gt;effective script origin&lt;/a&gt; is not the
+   &lt;a href=&quot;#same-origin&quot; title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+   &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=&quot;#effective3&quot;&gt;effective script origin&lt;/a&gt;.
+
+  &lt;h4 id=resource&gt;&lt;span class=secno&gt;3.2.3 &lt;/span&gt;&lt;dfn id=resource0&gt;Resource
+   metadata management&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=url title=dom-document-URL&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt; attribute
+   must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
+  XXXDOCURL xref --&gt;.
+
+  &lt;p&gt;The &lt;dfn id=referrer
+   title=dom-document-referrer&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return either the &lt;span title=&quot;the document's
+   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;a
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#source0&quot;&gt;source
+   browsing context&lt;/a&gt; at the time the navigation was started (that is, the
+   page which &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to the current document), or the
+   empty string if there is no such originating page, or if the UA has been
+   configured not to report referrers in this case, or if the navigation was
+   initiated for a &lt;a href=&quot;#hyperlinks&quot;&gt;hyperlink&lt;/a&gt; with a &lt;code
+   title=rel-noreferrer&gt;&lt;a href=&quot;#noreferrer&quot;&gt;noreferrer&lt;/a&gt;&lt;/code&gt; keyword.
+
+  &lt;p class=note&gt;In the case of HTTP, the &lt;code title=dom-document-referrer&gt;&lt;a
+   href=&quot;#referrer&quot;&gt;referrer&lt;/a&gt;&lt;/code&gt; DOM attribute will match the &lt;code
+   title=&quot;&quot;&gt;Referer&lt;/code&gt; (sic) header that was sent when fetching the
+   current page.
+
+  &lt;p class=note&gt;Typically user agents are configured to not report referrers
+   in the case where the referrer uses an encrypted protocol and the current
+   page does not (e.g. when navigating from an &lt;code title=&quot;&quot;&gt;https:&lt;/code&gt;
+   page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt; page).
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn id=cookie0 title=dom-document-cookie&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
+   attribute represents the cookies of the resource.&lt;/p&gt;
+  &lt;!-- XXX this needs work; e.g. document.open() should return the
+  cookies of the document that called document.open(), not of
+  about:blank or the document that had .open() called on, as I
+  understand it. --&gt;
+
+  &lt;p id=sandboxCookies&gt;On getting, if the &lt;a href=&quot;#sandboxed2&quot;&gt;sandboxed
+   origin browsing context flag&lt;/a&gt; is set on the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the document, the user agent
+   must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;. Otherwise, it
+   must return the same string as the value of the &lt;code
+   title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header it would include if fetching the
+   resource indicated by &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, as per RFC 2109 section 4.3.4.
+   &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;
+
+  &lt;p&gt;On setting, if the &lt;a href=&quot;#sandboxed2&quot;&gt;sandboxed origin browsing
+   context flag&lt;/a&gt; is set on the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
+   of the document, the user agent must raise a &lt;a href=&quot;#security9&quot;&gt;security
+   exception&lt;/a&gt;. Otherwise, the user agent must act as it would when
+   processing cookies if it had just attempted to fetch &lt;span&gt;the document's
+   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, and had received a response
+   with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the specified value,
+   as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3. &lt;a
+   href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;
+
+  &lt;p class=note&gt;Since the &lt;code title=dom-document-cookie&gt;&lt;a
+   href=&quot;#cookie0&quot;&gt;cookie&lt;/a&gt;&lt;/code&gt; attribute is accessible across frames,
+   the path restrictions on cookies are only a tool to help manage which
+   cookies are sent to which parts of the site, and are not in any way a
+   security feature.
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn id=lastmodified
+   title=dom-document-lastModified&gt;&lt;code&gt;lastModified&lt;/code&gt;&lt;/dfn&gt; attribute,
+   on getting, must return the date and time of the &lt;code&gt;Document&lt;/code&gt;'s
+   source file's last modification, in the user's local timezone, in the
+   following format:
+
+  &lt;ol&gt;
+   &lt;li&gt; The month component of the date.
+
+   &lt;li&gt; A U+002F SOLIDUS character ('/').
+
+   &lt;li&gt; The day component of the date.
+
+   &lt;li&gt; A U+002F SOLIDUS character ('/').
+
+   &lt;li&gt; The year component of the date.
+
+   &lt;li&gt; A U+0020 SPACE character.
+
+   &lt;li&gt; The hours component of the time.
+
+   &lt;li&gt; A U+003A COLON character (':').
+
+   &lt;li&gt; The minutes component of the time.
+
+   &lt;li&gt; A U+003A COLON character (':').
+
+   &lt;li&gt; The seconds component of the time.
+  &lt;/ol&gt;
+
+  &lt;p&gt;All the numeric components above, other than the year, must be given as
+   two digits in the range U+0030 DIGIT ZERO to U+0039 DIGIT NINE
+   representing the number in base ten, zero-padded if necessary.
+
+  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt;'s source file's last modification date and
+   time must be derived from relevant features of the networking protocols
+   used, e.g. from the value of the HTTP &lt;code title=&quot;&quot;&gt;Last-Modified&lt;/code&gt;
+   header of the document, or from metadata in the file system for local
+   files. If the last modification date and time are not known, the attribute
+   must return the string &lt;code title=&quot;&quot;&gt;01/01/1970 00:00:00&lt;/code&gt;.
+
+  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; is always set to one of three modes: &lt;dfn
+   id=no-quirks&gt;no quirks mode&lt;/dfn&gt;, the default; &lt;dfn id=quirks&gt;quirks
+   mode&lt;/dfn&gt;, used typically for legacy documents; and &lt;dfn
+   id=limited1&gt;limited quirks mode&lt;/dfn&gt;, also known as &quot;almost standards&quot;
+   mode. The mode is only ever changed from the default by the &lt;a
+   href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, based on the presence, absence, or value
+   of the DOCTYPE string.
+
+  &lt;p&gt;The &lt;dfn id=compatmode
+   title=dom-document-compatMode&gt;&lt;code&gt;compatMode&lt;/code&gt;&lt;/dfn&gt; DOM attribute
+   must return the literal string &quot;&lt;code title=&quot;&quot;&gt;CSS1Compat&lt;/code&gt;&quot; unless
+   the document has been set to &lt;a href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt; by the &lt;a
+   href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in which case it must instead return the
+   literal string &quot;&lt;code title=&quot;&quot;&gt;BackCompat&lt;/code&gt;&quot;.
+
+  &lt;div class=big-issue&gt;
+   &lt;p&gt;As far as parsing goes, the quirks I know of are:&lt;/p&gt;
+
+   &lt;ul&gt;
+    &lt;li&gt;Comment parsing is different.
+
+    &lt;li&gt;&lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; can contain &lt;code&gt;&lt;a
+     href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt;
+
+    &lt;li&gt;Safari and IE have special parsing rules for &lt;% ... %&gt; (even in
+     standards mode, though clearly this should be quirks-only).
    &lt;/ul&gt;
   &lt;/div&gt;
 
-  &lt;h3 id=documents0&gt;&lt;span class=secno&gt;3.3 &lt;/span&gt;Documents and document
-   fragments&lt;/h3&gt;
+  &lt;p&gt;Documents have an associated &lt;dfn id=character1 title=&quot;document's
+   character encoding&quot;&gt;character encoding&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt;
+   object is created, the &lt;a href=&quot;#character1&quot;&gt;document's character
+   encoding&lt;/a&gt; must be initialized to UTF-16. Various algorithms during page
+   loading affect this value, as does the &lt;code title=dom-document-charset&gt;&lt;a
+   href=&quot;#charset0&quot;&gt;charset&lt;/a&gt;&lt;/code&gt; setter. &lt;a
+   href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt; &lt;!-- XXX
+  <A HREF="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</A> --&gt;
 
+  &lt;p&gt;The &lt;dfn id=charset0
+   title=dom-document-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt; DOM attribute must,
+   on getting, return the preferred MIME name of the &lt;a
+   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;. On setting, if the
+   new value is an IANA-registered alias for a character encoding, the &lt;a
+   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must be set to that
+   character encoding. (Otherwise, nothing happens.)
+
+  &lt;p&gt;The &lt;dfn id=characterset
+   title=dom-document-characterSet&gt;&lt;code&gt;characterSet&lt;/code&gt;&lt;/dfn&gt; DOM
+   attribute must, on getting, return the preferred MIME name of the &lt;a
+   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;dfn id=defaultcharset
+   title=dom-document-defaultCharset&gt;&lt;code&gt;defaultCharset&lt;/code&gt;&lt;/dfn&gt; DOM
+   attribute must, on getting, return the preferred MIME name of a character
+   encoding, possibly the user's default encoding, or an encoding associated
+   with the user's current geographical location, or any arbitrary encoding
+   name.
+
+  &lt;p&gt;Each document has a &lt;dfn id=current&gt;current document readiness&lt;/dfn&gt;.
+   When a &lt;code&gt;Document&lt;/code&gt; object is created, it must have its &lt;a
+   href=&quot;#current&quot;&gt;current document readiness&lt;/a&gt; set to the string
+   &quot;loading&quot;. Various algorithms during page loading affect this value. When
+   the value is set, the user agent must &lt;a href=&quot;#firing2&quot;&gt;fire a simple
+   event&lt;/a&gt; called &lt;code
+   title=event-readystatechanged&gt;readystatechanged&lt;/code&gt; at the
+   &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
+  &lt;!-- XXX define
+  document.onreadystatechange --&gt;
+
+  &lt;p&gt;The &lt;dfn id=readystate
+   title=dom-document-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM attribute
+   must, on getting, return the &lt;a href=&quot;#current&quot;&gt;current document
+   readiness&lt;/a&gt;.
+
+  &lt;h4 id=dom-tree&gt;&lt;span class=secno&gt;3.2.4 &lt;/span&gt;&lt;dfn id=dom-tree0&gt;DOM tree
+   accessors&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;&lt;dfn id=the-html0&gt;The &lt;code&gt;html&lt;/code&gt; element&lt;/dfn&gt; of a document is
+   the document's root element, if there is one and it's an &lt;code&gt;&lt;a
+   href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, or null otherwise.
+
+  &lt;p&gt;&lt;dfn id=the-head0&gt;The &lt;code&gt;head&lt;/code&gt; element&lt;/dfn&gt; of a document is
+   the first &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element that is a child of
+   &lt;a href=&quot;#the-html0&quot;&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt;, if there is one,
+   or null otherwise.
+
+  &lt;p&gt;&lt;dfn id=the-title1&gt;The &lt;code&gt;title&lt;/code&gt; element&lt;/dfn&gt; of a document is
+   the first &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; element in the document
+   (in tree order), if there is one, or null otherwise.
+
+  &lt;p&gt;The &lt;dfn id=document.title
+   title=dom-document-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute must, on
+   getting, run the following algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; is an &lt;code&gt;svg&lt;/code&gt;
+     element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
+     namespace, and the user agent supports SVG, then the getter must return
+     the value that would have been returned by the DOM attribute of the same
+     name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface.
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, it must return a concatenation of the data of all the child
+     &lt;a href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; of &lt;a
+     href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt;, in tree order, or
+     the empty string if &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
+     element&lt;/a&gt; is null.
+  &lt;/ol&gt;
+
+  &lt;p&gt;On setting, the following algorithm must be run:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#root-element&quot;&gt;root element&lt;/a&gt; is an &lt;code&gt;svg&lt;/code&gt;
+     element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
+     namespace, and the user agent supports SVG, then the setter must defer
+     to the setter for the DOM attribute of the same name on the
+     &lt;code&gt;SVGDocument&lt;/code&gt; interface. Stop the algorithm here.
+
+   &lt;li&gt;If &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt; is null
+    and &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt; is null, then
+    the attribute must do nothing. Stop the algorithm here.
+
+   &lt;li&gt;If &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/a&gt; is null,
+    then a new &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; element must be
+    created and appended to &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt;
+    element&lt;/a&gt;.
+
+   &lt;li&gt;The children of &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
+    element&lt;/a&gt; (if any) must all be removed.
+
+   &lt;li&gt;A single &lt;code&gt;Text&lt;/code&gt; node whose data is the new value being
+    assigned must be appended to &lt;a href=&quot;#the-title1&quot;&gt;the &lt;code&gt;title&lt;/code&gt;
+    element&lt;/a&gt;.
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;code title=dom-document-title&gt;&lt;a
+   href=&quot;#document.title&quot;&gt;title&lt;/a&gt;&lt;/code&gt; attribute on the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface should shadow the
+   attribute of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface when
+   the user agent supports both HTML and SVG.
+
+  &lt;p&gt;&lt;dfn id=the-body1&gt;The body element&lt;/dfn&gt; of a document is the first
+   child of &lt;a href=&quot;#the-html0&quot;&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt; that is
+   either a &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element or a
+   &lt;code&gt;frameset&lt;/code&gt; element. If there is no such element, it is null. If
+   the body element is null, then when the specification requires that events
+   be fired at &quot;the body element&quot;, they must instead be fired at the
+   &lt;code&gt;Document&lt;/code&gt; object.
+
+  &lt;p&gt;The &lt;dfn id=body title=dom-document-body&gt;&lt;code&gt;body&lt;/code&gt;&lt;/dfn&gt;
+   attribute, on getting, must return &lt;a href=&quot;#the-body1&quot;&gt;the body
+   element&lt;/a&gt; of the document (either a &lt;code&gt;&lt;a
+   href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element, a &lt;code&gt;frameset&lt;/code&gt; element, or
+   null). On setting, the following algorithm must be run:
+
+  &lt;ol&gt;
+   &lt;li&gt;If the new value is not a &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; or
+    &lt;code&gt;frameset&lt;/code&gt; element, then raise a
+    &lt;code&gt;HIERARCHY_REQUEST_ERR&lt;/code&gt; exception and abort these steps.
+
+   &lt;li&gt;Otherwise, if the new value is the same as &lt;a href=&quot;#the-body1&quot;&gt;the
+    body element&lt;/a&gt;, do nothing. Abort these steps.
+
+   &lt;li&gt;Otherwise, if &lt;a href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt; is not null,
+    then replace that element with the new value in the DOM, as if the root
+    element's &lt;code title=&quot;&quot;&gt;replaceChild()&lt;/code&gt; method had been called
+    with the new value and &lt;a href=&quot;#the-body1&quot; title=&quot;the body element&quot;&gt;the
+    incumbent body element&lt;/a&gt; as its two arguments respectively, then abort
+    these steps.
+
+   &lt;li&gt;Otherwise, the &lt;a href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt; is null.
+    Append the new value to the root element.
+  &lt;/ol&gt;
+  &lt;!--XXX
+    <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp">http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp</A>
+    search for ::GetBody ::SetBody
+    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp</A>
+    search for ::setBody
+    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp</A>
+    search for ::body
+  --&gt;
+
+  &lt;p&gt;The &lt;dfn id=images0 title=dom-document-images&gt;&lt;code&gt;images&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return an &lt;code&gt;&lt;a
+   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
+   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
+   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements.
+
+  &lt;p&gt;The &lt;dfn id=embeds title=dom-document-embeds&gt;&lt;code&gt;embeds&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return an &lt;code&gt;&lt;a
+   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
+   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
+   href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt; elements.
+
+  &lt;p&gt;The &lt;dfn id=plugins
+   title=dom-document-plugins&gt;&lt;code&gt;plugins&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return the same object as that returned by the &lt;code
+   title=dom-document-embeds&gt;&lt;a href=&quot;#embeds&quot;&gt;embeds&lt;/a&gt;&lt;/code&gt; attribute.
+
+  &lt;p&gt;The &lt;dfn id=links0 title=dom-document-links&gt;&lt;code&gt;links&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return an &lt;code&gt;&lt;a
+   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
+   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;&lt;a
+   href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements with &lt;code title=attr-hyperlink-href&gt;&lt;a
+   href=&quot;#href6&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attributes and &lt;code&gt;&lt;a
+   href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; elements with &lt;code
+   title=attr-hyperlink-href&gt;&lt;a href=&quot;#href6&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attributes.
+
+  &lt;p&gt;The &lt;dfn id=forms0 title=dom-document-forms&gt;&lt;code&gt;forms&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return an &lt;code&gt;&lt;a
+   href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; rooted at the
+   &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;form&lt;/code&gt;
+   elements.
+
+  &lt;p&gt;The &lt;dfn id=anchors
+   title=dom-document-anchors&gt;&lt;code&gt;anchors&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
+   rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+   &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements with &lt;code
+   title=attr-a-name&gt;name&lt;/code&gt; attributes.&lt;/p&gt;
+  &lt;!-- XXX note that such elements are
+  non-conforming --&gt;
+
+  &lt;p&gt;The &lt;dfn id=scripts0
+   title=dom-document-scripts&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
+   rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+
+  &lt;p&gt;The &lt;dfn id=getelementsbyname
+   title=dom-document-getElementsByName&gt;&lt;code&gt;getElementsByName(&lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
+   containing all the &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
+   href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;,
+   &lt;!-- frame? frameset?
+  XXX--&gt;&lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;, &lt;code&gt;&lt;a
+   href=&quot;#map&quot;&gt;map&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt;,&lt;!-- param?
+  XXX--&gt;
+   &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in that document
+   that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is
+   equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;
+   argument.&lt;/p&gt;
+  &lt;!-- XXX what about XHTML? --&gt;
+
+  &lt;p&gt;The &lt;dfn id=getelementsbyclassname
+   title=dom-document-getElementsByClassName&gt;&lt;code&gt;getElementsByClassName(&lt;var
+   title=&quot;&quot;&gt;classNames&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string that
+   contains an &lt;a href=&quot;#unordered&quot;&gt;unordered set of unique space-separated
+   tokens&lt;/a&gt; representing classes. When called, the method must return a
+   live &lt;code&gt;NodeList&lt;/code&gt; object containing all the elements in the
+   document that have all the classes specified in that argument, having
+   obtained the classes by &lt;a href=&quot;#split&quot; title=&quot;split a string on
+   spaces&quot;&gt;splitting a string on spaces&lt;/a&gt;. If there are no tokens specified
+   in the argument, then the method must return an empty
+   &lt;code&gt;NodeList&lt;/code&gt;.
+
+  &lt;p&gt;The &lt;dfn id=getelementsbyclassname0
+   title=dom-getElementsByClassName&gt;&lt;code&gt;getElementsByClassName()&lt;/code&gt;&lt;/dfn&gt;
+   method on the &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
+   interface must return a live &lt;code&gt;NodeList&lt;/code&gt; with the nodes that the
+   &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; &lt;code
+   title=dom-document-getElementsByClassName&gt;&lt;a
+   href=&quot;#getelementsbyclassname&quot;&gt;getElementsByClassName()&lt;/a&gt;&lt;/code&gt; method
+   would return when passed the same argument(s), excluding any elements that
+   are not descendants of the &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; object on which the method was
+   invoked.
+
+  &lt;p&gt;HTML, SVG, and MathML elements define which classes they are in by
+   having an attribute in the per-element partition with the name &lt;code
+   title=&quot;&quot;&gt;class&lt;/code&gt; containing a space-separated list of classes to
+   which the element belongs. Other specifications may also allow elements in
+   their namespaces to be labeled as being in specific classes. UAs must not
+   assume that all attributes of the name &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; for
+   elements in any namespace work in this way, however, and must not assume
+   that such attributes, when used as global attributes, label other elements
+   as being in specific classes.
+
+  &lt;div class=example&gt;
+   &lt;p&gt;Given the following XHTML fragment:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;div id=&quot;example&quot;&gt;
+ &lt;p id=&quot;p1&quot; class=&quot;aaa bbb&quot;/&gt;
+ &lt;p id=&quot;p2&quot; class=&quot;aaa ccc&quot;/&gt;
+ &lt;p id=&quot;p3&quot; class=&quot;bbb ccc&quot;/&gt;
+&lt;/div&gt;&lt;/pre&gt;
+
+   &lt;p&gt;A call to
+    &lt;code&gt;document.getElementById('example').getElementsByClassName('aaa')&lt;/code&gt;
+    would return a &lt;code&gt;NodeList&lt;/code&gt; with the two paragraphs
+    &lt;code&gt;p1&lt;/code&gt; and &lt;code&gt;p2&lt;/code&gt; in it.&lt;/p&gt;
+
+   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('ccc&nbsp;bbb')&lt;/code&gt; would
+    only return one node, however, namely &lt;code&gt;p3&lt;/code&gt;. A call to
+    &lt;code&gt;document.getElementById('example').getElementsByClassName('bbb&nbsp;&nbsp;ccc&nbsp;')&lt;/code&gt;
+    would return the same thing.&lt;/p&gt;
+
+   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('aaa,bbb')&lt;/code&gt; would return
+    no nodes; none of the elements above are in the &quot;aaa,bbb&quot; class.&lt;/p&gt;
+  &lt;/div&gt;
+  &lt;!-- XXX
+&gt;         * xGetParentElementByClassName(rootElement, className, tagName) -
+&gt; Navigates upwards until we hit a parent element with the given class name and
+&gt; optional tag name.
+--&gt;
+
+  &lt;p class=note&gt;The &lt;code title=dom-document-dir&gt;&lt;a
+   href=&quot;#dir1&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; attribute on the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface is defined along
+   with the &lt;code title=attr-dir&gt;&lt;a href=&quot;#dir&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; content
+   attribute.
+
+  &lt;h3 id=elements&gt;&lt;span class=secno&gt;3.3 &lt;/span&gt;Elements&lt;/h3&gt;
+
   &lt;h4 id=semantics0&gt;&lt;span class=secno&gt;3.3.1 &lt;/span&gt;Semantics&lt;/h4&gt;
 
   &lt;p&gt;Elements, attributes, and attribute values in HTML are defined (by this
    specification) to have certain meanings (semantics). For example, the
    &lt;code&gt;&lt;a href=&quot;#ol&quot;&gt;ol&lt;/a&gt;&lt;/code&gt; element represents an ordered list, and
-   the &lt;code title=lang&gt;lang&lt;/code&gt; attribute represents the language of the
-   content.
+   the &lt;code title=attr-lang&gt;&lt;a href=&quot;#lang&quot;&gt;lang&lt;/a&gt;&lt;/code&gt; attribute
+   represents the language of the content.
 
   &lt;p&gt;Authors must not use elements, attributes, and attribute values for
    purposes other than their appropriate intended semantic purpose.
@@ -6396,359 +6736,111 @@
    dynamically updated by a script, the UA would update the rendering to show
    the progress changing.
 
-  &lt;h4 id=structure0&gt;&lt;span class=secno&gt;3.3.2 &lt;/span&gt;Structure&lt;/h4&gt;
+  &lt;h4 id=elements0&gt;&lt;span class=secno&gt;3.3.2 &lt;/span&gt;Elements in the DOM&lt;/h4&gt;
 
-  &lt;p&gt;All the elements in this specification have a defined content model,
-   which describes what nodes are allowed inside the elements, and thus what
-   the structure of an HTML document or fragment must look like.
+  &lt;p&gt;The nodes representing &lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in the
+   DOM must implement, and expose to scripts, the interfaces listed for them
+   in the relevant sections of this specification. This includes &lt;a
+   href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in &lt;a href=&quot;#xml-documents&quot;&gt;XML
+   documents&lt;/a&gt;, even when those documents are in another context (e.g.
+   inside an XSLT transform).
 
-  &lt;p class=note&gt;As noted in the conformance and terminology sections, for the
-   purposes of determining if an element matches its content model or not, &lt;a
-   href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;&lt;code&gt;CDATASection&lt;/code&gt; nodes in the
-   DOM are treated as equivalent to &lt;code&gt;Text&lt;/code&gt; nodes&lt;/a&gt;, and &lt;a
-   href=&quot;#entity-references&quot;&gt;entity reference nodes are treated as if they
-   were expanded in place&lt;/a&gt;.
+  &lt;p&gt;Elements in the DOM represent things; that is, they have intrinsic
+   &lt;em&gt;meaning&lt;/em&gt;, also known as semantics.
 
-  &lt;p&gt;The &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt; are
-   always allowed between elements. User agents represent these characters
-   between elements in the source markup as text nodes in the
-   DOM.&lt;!-- not a conf criteria since the parser now requires this
-  --&gt;
-   Empty &lt;a href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; and &lt;a
-   href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; consisting of just
-   sequences of those characters are considered &lt;dfn
-   id=inter-element&gt;inter-element whitespace&lt;/dfn&gt;.
+  &lt;p class=example&gt;For example, an &lt;code&gt;&lt;a href=&quot;#ol&quot;&gt;ol&lt;/a&gt;&lt;/code&gt; element
+   represents an ordered list.
 
-  &lt;p&gt;&lt;a href=&quot;#inter-element&quot;&gt;Inter-element whitespace&lt;/a&gt;, comment nodes,
-   and processing instruction nodes must be ignored when establishing whether
-   an element matches its content model or not, and must be ignored when
-   following algorithms that define document and element semantics.
+  &lt;p&gt;The basic interface, from which all the &lt;a href=&quot;#html-elements&quot;&gt;HTML
+   elements&lt;/a&gt;' interfaces inherit, and which must be used by elements that
+   have no additional requirements, is the &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; interface.
 
-  &lt;p&gt;An element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is said to be &lt;dfn id=preceded&gt;preceded
-   or followed&lt;/dfn&gt; by a second element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var
-   title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; have the same parent node and
-   there are no other element nodes or text nodes (other than &lt;a
-   href=&quot;#inter-element&quot;&gt;inter-element whitespace&lt;/a&gt;) between them.
+  &lt;pre
+   class=idl&gt;interface &lt;dfn id=htmlelement&gt;HTMLElement&lt;/dfn&gt; : &lt;span&gt;Element&lt;/span&gt; {
+  // &lt;a href=&quot;#dom-tree0&quot;&gt;DOM tree accessors&lt;/a&gt;
+  NodeList &lt;a href=&quot;#getelementsbyclassname0&quot; title=dom-getElementsByClassName&gt;getElementsByClassName&lt;/a&gt;(in DOMString classNames);
 
-  &lt;p&gt;Authors must not use &lt;a href=&quot;#elements1&quot;&gt;elements in the HTML
-   namespace&lt;/a&gt; anywhere except where they are explicitly allowed, as
-   defined for each element, or as explicitly required by other
-   specifications. For XML compound documents, these contexts could be inside
-   elements from other namespaces, if those elements are defined as providing
-   the relevant contexts.
+  // &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup insertion&lt;/a&gt;
+           attribute DOMString &lt;a href=&quot;#innerhtml&quot; title=dom-innerHTML&gt;innerHTML&lt;/a&gt;;
 
-  &lt;div class=example&gt;
-   &lt;p&gt;The SVG specification defines the SVG &lt;code&gt;foreignObject&lt;/code&gt;
-    element as allowing foreign namespaces to be included, thus allowing
-    compound documents to be created by inserting subdocument content under
-    that element. &lt;em&gt;This&lt;/em&gt; specification defines the XHTML &lt;code&gt;&lt;a
-    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element as being allowed where subdocument
-    fragments are allowed in a compound document. Together, these two
-    definitions mean that placing an XHTML &lt;code&gt;&lt;a
-    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element as a child of an SVG
-    &lt;code&gt;foreignObject&lt;/code&gt; element is conforming. &lt;a
-    href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
-  &lt;/div&gt;
+  // &lt;span&gt;metadata attributes&lt;/span&gt;
+           attribute DOMString &lt;a href=&quot;#id0&quot; title=dom-id&gt;id&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#title0&quot; title=dom-title&gt;title&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#lang0&quot; title=dom-lang&gt;lang&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#dir0&quot; title=dom-dir&gt;dir&lt;/a&gt;;
+           attribute &lt;span&gt;DOMString&lt;/span&gt; &lt;a href=&quot;#classname&quot; title=dom-className&gt;className&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt; &lt;a href=&quot;#classlist&quot; title=dom-classList&gt;classList&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt; &lt;a href=&quot;#dataset&quot; title=dom-dataset&gt;dataset&lt;/a&gt;;
 
-  &lt;div class=example&gt;
-   &lt;p&gt;The Atom specification defines the Atom &lt;code title=&quot;&quot;&gt;content&lt;/code&gt;
-    element, when its &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute has the value
-    &lt;code title=&quot;&quot;&gt;xhtml&lt;/code&gt;, as requiring that it contains a single HTML
-    &lt;code&gt;&lt;a href=&quot;#div&quot;&gt;div&lt;/a&gt;&lt;/code&gt; element. Thus, a &lt;code&gt;&lt;a
-    href=&quot;#div&quot;&gt;div&lt;/a&gt;&lt;/code&gt; element is allowed in that context, even
-    though this is not explicitly normatively stated by this specification.
-    &lt;a href=&quot;#refsATOM&quot;&gt;[ATOM]&lt;/a&gt;&lt;/p&gt;
-  &lt;/div&gt;
+  // &lt;a href=&quot;#user-interaction&quot;&gt;user interaction&lt;/a&gt;
+           attribute boolean &lt;a href=&quot;#irrelevant0&quot; title=dom-irrelevant&gt;irrelevant&lt;/a&gt;;
+  void &lt;a href=&quot;#click1&quot; title=dom-click&gt;click&lt;/a&gt;();
+  void &lt;a href=&quot;#scrollintoview&quot; title=dom-scrollIntoView&gt;scrollIntoView&lt;/a&gt;();
+  void &lt;a href=&quot;#scrollintoview&quot; title=dom-scrollIntoView&gt;scrollIntoView&lt;/a&gt;(in boolean top);
+           attribute long &lt;a href=&quot;#tabindex0&quot; title=dom-tabindex&gt;tabIndex&lt;/a&gt;;
+  void &lt;a href=&quot;#focus0&quot; title=dom-focus&gt;focus&lt;/a&gt;();
+  void &lt;a href=&quot;#blur&quot; title=dom-blur&gt;blur&lt;/a&gt;();
+           attribute boolean &lt;a href=&quot;#draggable0&quot; title=dom-draggable&gt;draggable&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#contenteditable1&quot; title=dom-contentEditable&gt;contentEditable&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#iscontenteditable&quot; title=dom-isContentEditable&gt;isContentEditable&lt;/a&gt;;
+           attribute &lt;a href=&quot;#htmlmenuelement&quot;&gt;HTMLMenuElement&lt;/a&gt; &lt;a href=&quot;#contextmenu0&quot; title=dom-contextMenu&gt;contextMenu&lt;/a&gt;;
 
-  &lt;p&gt;In addition, &lt;a href=&quot;#elements1&quot;&gt;elements in the HTML namespace&lt;/a&gt; may
-   be orphan nodes (i.e. without a parent node).
+  // &lt;span&gt;styling&lt;/span&gt;
+  readonly attribute &lt;span&gt;CSSStyleDeclaration&lt;/span&gt; &lt;a href=&quot;#style0&quot; title=dom-style&gt;style&lt;/a&gt;;
 
-  &lt;div class=example&gt;
-   &lt;p&gt;For example, creating a &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; element and
-    storing it in a global variable in a script is conforming, even though
-    &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; elements are otherwise only supposed to
-    be used inside &lt;code&gt;&lt;a href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+  // &lt;span&gt;data templates&lt;/span&gt;
+           attribute DOMString &lt;a href=&quot;#template0&quot; title=dom-template&gt;template&lt;/a&gt;;
+  readonly attribute HTMLDataTemplateElement &lt;a href=&quot;#templateelement&quot; title=dom-templateElement&gt;templateElement&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#ref0&quot; title=dom-ref&gt;ref&lt;/a&gt;;
+  readonly attribute Node &lt;a href=&quot;#refnode&quot; title=dom-refNode&gt;refNode&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#registrationmark0&quot; title=dom-registrationMark&gt;registrationMark&lt;/a&gt;;
+  readonly attribute DocumentFragment &lt;a href=&quot;#originalcontent&quot; title=dom-originalContent&gt;originalContent&lt;/a&gt;;
 
-   &lt;pre&gt;var data = {
-  name: &quot;Banana&quot;,
-  cell: document.createElement('td'), 
+  // &lt;a href=&quot;#event4&quot;&gt;event handler DOM attributes&lt;/a&gt;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onabort&quot; title=handler-onabort&gt;onabort&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onbeforeunload&quot; title=handler-onbeforeunload&gt;onbeforeunload&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onblur&quot; title=handler-onblur&gt;onblur&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onchange&quot; title=handler-onchange&gt;onchange&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onclick&quot; title=handler-onclick&gt;onclick&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#oncontextmenu&quot; title=handler-oncontextmenu&gt;oncontextmenu&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondblclick&quot; title=handler-ondblclick&gt;ondblclick&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondrag&quot; title=handler-ondrag&gt;ondrag&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragend&quot; title=handler-ondragend&gt;ondragend&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragenter&quot; title=handler-ondragenter&gt;ondragenter&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragleave&quot; title=handler-ondragleave&gt;ondragleave&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragover&quot; title=handler-ondragover&gt;ondragover&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondragstart&quot; title=handler-ondragstart&gt;ondragstart&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#ondrop&quot; title=handler-ondrop&gt;ondrop&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onerror&quot; title=handler-onerror&gt;onerror&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onfocus&quot; title=handler-onfocus&gt;onfocus&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeydown&quot; title=handler-onkeydown&gt;onkeydown&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeypress&quot; title=handler-onkeypress&gt;onkeypress&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onkeyup&quot; title=handler-onkeyup&gt;onkeyup&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onload&quot; title=handler-onload&gt;onload&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmessage&quot; title=handler-onmessage&gt;onmessage&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousedown&quot; title=handler-onmousedown&gt;onmousedown&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousemove&quot; title=handler-onmousemove&gt;onmousemove&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseout&quot; title=handler-onmouseout&gt;onmouseout&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseover&quot; title=handler-onmouseover&gt;onmouseover&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmouseup&quot; title=handler-onmouseup&gt;onmouseup&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmousewheel&quot; title=handler-onmousewheel&gt;onmousewheel&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onresize&quot; title=handler-onresize&gt;onresize&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onscroll&quot; title=handler-onscroll&gt;onscroll&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onselect&quot; title=handler-onselect&gt;onselect&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onstorage&quot; title=handler-onstorage&gt;onstorage&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onsubmit&quot; title=handler-onsubmit&gt;onsubmit&lt;/a&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onunload&quot; title=handler-onunload&gt;onunload&lt;/a&gt;;
+
 };&lt;/pre&gt;
-  &lt;/div&gt;
 
-  &lt;h4 id=kinds&gt;&lt;span class=secno&gt;3.3.3 &lt;/span&gt;Kinds of content&lt;/h4&gt;
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; interface holds
+   methods and attributes related to a number of disparate features, and the
+   members of this interface are therefore described in various different
+   sections of this specification.
 
-  &lt;p&gt;Each element in HTML falls into zero or more categories that group
-   elements with similar characteristics together. The following categories
-   are used in this specification:
+  &lt;h4 id=global&gt;&lt;span class=secno&gt;3.3.3 &lt;/span&gt;Global attributes&lt;/h4&gt;
 
-  &lt;ul class=brief&gt;
-   &lt;li&gt;&lt;a href=&quot;#metadata0&quot;&gt;Metadata content&lt;/a&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#flow-content0&quot;&gt;Flow content&lt;/a&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#sectioning0&quot;&gt;Sectioning content&lt;/a&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#heading0&quot;&gt;Heading content&lt;/a&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#phrasing0&quot;&gt;Phrasing content&lt;/a&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#embedded1&quot;&gt;Embedded content&lt;/a&gt;
-
-   &lt;li&gt;&lt;span&gt;Form control content&lt;/span&gt;
-
-   &lt;li&gt;&lt;a href=&quot;#interactive1&quot;&gt;Interactive content&lt;/a&gt;&lt;/li&gt;
-   &lt;!--
-   &lt;li&gt;&lt;span&gt;Form content&lt;/span&gt;&lt;/li&gt; XXX &quot;Form control elements&quot;
---&gt;
-  &lt;/ul&gt;
-  &lt;!-- XXX xref check that all the above got a section defining them,
-  however briefly --&gt;
-  &lt;!-- XXX check that the element definitions also link to those
-  sections --&gt;
-  &lt;!-- XXX list all the elements for each kind of element in the
-  sections below. --&gt;
-
-  &lt;p&gt;Some elements have unique requirements and do not fit into any
-   particular category.
-
-  &lt;h5 id=metadata&gt;&lt;span class=secno&gt;3.3.3.1. &lt;/span&gt;Metadata content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn id=metadata0&gt;Metadata content&lt;/dfn&gt; is content that sets up the
-   presentation or behavior of the rest of the content, or that sets up the
-   relationship of the document with other documents, or that conveys other
-   &quot;out of band&quot; information.
-
-  &lt;p&gt;Elements from other namespaces whose semantics are primarily
-   metadata-related (e.g. RDF) are also &lt;a href=&quot;#metadata0&quot;&gt;metadata
-   content&lt;/a&gt;.
-
-  &lt;h5 id=flow-content&gt;&lt;span class=secno&gt;3.3.3.2. &lt;/span&gt;Flow content&lt;/h5&gt;
-
-  &lt;p&gt;Most elements that are used in the body of documents and applications
-   are categorized as &lt;dfn id=flow-content0&gt;flow content&lt;/dfn&gt;.
-
-  &lt;p&gt;As a general rule, elements whose content model allows any &lt;a
-   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; should have either at least one
-   descendant text node that is not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
-   whitespace&lt;/a&gt;, or at least one descendant element node that is &lt;a
-   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;. For the purposes of this
-   requirement, &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements and their
-   descendants must not be counted as contributing to the ancestors of the
-   &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; element.
-
-  &lt;p&gt;This requirement is not a hard requirement, however, as there are many
-   cases where an element can be empty legitimately, for example when it is
-   used as a placeholder which will later be filled in by a script, or when
-   the element is part of a template and would on most pages be filled in but
-   on some pages is not relevant.
-
-  &lt;h5 id=sectioning&gt;&lt;span class=secno&gt;3.3.3.3. &lt;/span&gt;Sectioning content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn id=sectioning0&gt;Sectioning content&lt;/dfn&gt; is content that defines the
-   scope of &lt;a href=&quot;#heading0&quot; title=&quot;heading content&quot;&gt;headers&lt;/a&gt;, &lt;a
-   href=&quot;#footer&quot; title=footer&gt;footers&lt;/a&gt;, and &lt;a href=&quot;#address&quot;
-   title=address&gt;contact information&lt;/a&gt;.
-
-  &lt;p&gt;Each &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; element potentially
-   has a heading. See the section on &lt;a href=&quot;#headings0&quot;&gt;headings and
-   sections&lt;/a&gt; for further details.
-
-  &lt;h5 id=heading&gt;&lt;span class=secno&gt;3.3.3.4. &lt;/span&gt;Heading content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn id=heading0&gt;Heading content&lt;/dfn&gt; defines the header of a section
-   (whether explicitly marked up using &lt;a href=&quot;#sectioning0&quot;&gt;sectioning
-   content&lt;/a&gt; elements, or implied by the heading content itself).
-
-  &lt;h5 id=phrasing&gt;&lt;span class=secno&gt;3.3.3.5. &lt;/span&gt;Phrasing content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn id=phrasing0&gt;Phrasing content&lt;/dfn&gt; is the text of the document, as
-   well as elements that mark up that text at the intra-paragraph level. Runs
-   of &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; form &lt;a href=&quot;#paragraph&quot;
-   title=paragraph&gt;paragraphs&lt;/a&gt;.
-
-  &lt;p&gt;All &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; is also &lt;a
-   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;. Any content model that expects &lt;a
-   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; also expects &lt;a
-   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;.
-
-  &lt;p&gt;As a general rule, elements whose content model allows any &lt;a
-   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; should have either at least one
-   descendant text node that is not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
-   whitespace&lt;/a&gt;, or at least one descendant element node that is &lt;a
-   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;. For the purposes of this
-   requirement, nodes that are descendants of &lt;code&gt;&lt;a
-   href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements must not be counted as contributing to
-   the ancestors of the &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; element.
-
-  &lt;p class=note&gt;Most elements that are categorized as phrasing content can
-   only contain elements that are themselves categorized as phrasing content,
-   not any flow content.
-
-  &lt;p&gt;Text nodes that are not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
-   whitespace&lt;/a&gt; are &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;.
-
-  &lt;h5 id=embedded&gt;&lt;span class=secno&gt;3.3.3.6. &lt;/span&gt;Embedded content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn id=embedded1&gt;Embedded content&lt;/dfn&gt; is content that imports another
-   resource into the document, or content from another vocabulary that is
-   inserted into the document.
-
-  &lt;p&gt;All &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt; is also &lt;a
-   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; (and &lt;a href=&quot;#flow-content0&quot;&gt;flow
-   content&lt;/a&gt;). Any content model that expects &lt;a href=&quot;#phrasing0&quot;&gt;phrasing
-   content&lt;/a&gt; (or &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;) also expects &lt;a
-   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;.
-
-  &lt;p&gt;Elements that are from namespaces other than the &lt;a
-   href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and that convey content but not
-   metadata, are &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt; for the purposes
-   of the content models defined in this specification. (For example, MathML,
-   or SVG.)
-
-  &lt;p&gt;Some embedded content elements can have &lt;dfn id=fallback&gt;fallback
-   content&lt;/dfn&gt;: content that is to be used when the external resource
-   cannot be used (e.g. because it is of an unsupported format). The element
-   definitions state what the fallback is, if any.
-
-  &lt;h5 id=interactive0&gt;&lt;span class=secno&gt;3.3.3.7. &lt;/span&gt;Interactive content&lt;/h5&gt;
-  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
-  all cross-references. Some of them refer specifically to the
-  activation behavior stuff. --&gt;
-
-  &lt;p class=big-issue&gt;Parts of this section should eventually be moved to DOM3
-   Events.&lt;/p&gt;
-  &lt;!-- but see comment above --&gt;
-  &lt;!--
-TESTS:
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E</A>
---&gt;
-
-  &lt;p&gt;&lt;dfn id=interactive1&gt;Interactive content&lt;/dfn&gt; is content that is
-   specifically intended for user interaction.
-
-  &lt;p&gt;Certain elements in HTML can be activated, for instance &lt;code&gt;&lt;a
-   href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, or
-   &lt;code&gt;input&lt;/code&gt; elements when their &lt;code&gt;type&lt;/code&gt; attribute is set
-   to &lt;code&gt;radio&lt;/code&gt;. Activation of those elements can happen in various
-   (UA-defined) ways, for instance via the mouse or keyboard.
-
-  &lt;p&gt;When activation is performed via some method other than clicking the
-   pointing device, the default action of the event that triggers the
-   activation must, instead of being activating the element directly, be to
-   &lt;a href=&quot;#firing&quot;&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt; event&lt;/a&gt; on the same
-   element.
-
-  &lt;p&gt;The default action of this &lt;code title=event-click&gt;click&lt;/code&gt; event,
-   or of the real &lt;code title=event-click&gt;click&lt;/code&gt; event if the element
-   was activated by clicking a pointing device, must be to &lt;span title=&quot;fire
-   a DOMActivate event&quot;&gt;fire a further &lt;code
-   title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the same
-   element, whose own default action is to go through all the elements the
-   &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event bubbled through
-   (starting at the target node and going towards the &lt;code&gt;Document&lt;/code&gt;
-   node), looking for an element with an &lt;a href=&quot;#activation0&quot;&gt;activation
-   behavior&lt;/a&gt;; the first element, in reverse tree order, to have one, must
-   have its activation behavior executed.
-
-  &lt;p class=note&gt;The above doesn't happen for arbitrary synthetic events
-   dispatched by author script. However, the &lt;code title=dom-click&gt;&lt;a
-   href=&quot;#click1&quot;&gt;click()&lt;/a&gt;&lt;/code&gt; method can be used to make it happen
-   programmatically.
-
-  &lt;p&gt;For certain form controls, this process is complicated further by &lt;a
-   href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&quot;&gt;changes
-   that must happen around the click event&lt;/a&gt;. &lt;a href=&quot;#refsWF2&quot;&gt;[WF2]&lt;/a&gt;&lt;/p&gt;
-  &lt;!-- XXX WF2: when this is merged into
-  this spec, update xrefs --&gt;
-
-  &lt;p class=note&gt;Most interactive elements have content models that disallow
-   nesting interactive elements.
-
-  &lt;h4 id=transparent&gt;&lt;span class=secno&gt;3.3.4 &lt;/span&gt;Transparent content
-   models&lt;/h4&gt;
-
-  &lt;p&gt;Some elements are described as &lt;dfn id=transparent0&gt;transparent&lt;/dfn&gt;;
-   they have &quot;transparent&quot; as their content model. Some elements are
-   described as &lt;dfn id=semi-transparent&gt;semi-transparent&lt;/dfn&gt;; this means
-   that part of their content model is &quot;transparent&quot; but that is not the only
-   part of the content model that must be satisfied.
-
-  &lt;p&gt;When a content model includes a part that is &quot;transparent&quot;, those parts
-   must not contain content that would not be conformant if all transparent
-   and semi-transparent elements in the tree were replaced, in their parent
-   element, by the children in the &quot;transparent&quot; part of their content model,
-   retaining order.
-
-  &lt;p&gt;When a transparent or semi-transparent element has no parent, then the
-   part of its content model that is &quot;transparent&quot; must instead be treated as
-   accepting any &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;.
-
-  &lt;h4 id=paragraphs&gt;&lt;span class=secno&gt;3.3.5 &lt;/span&gt;Paragraphs&lt;/h4&gt;
-
-  &lt;p&gt;A &lt;dfn id=paragraph&gt;paragraph&lt;/dfn&gt; is typically a block of text with
-   one or more sentences that discuss a particular topic, as in typography,
-   but can also be used for more general thematic grouping. For instance, an
-   address is also a paragraph, as is a part of a form, a byline, or a stanza
-   in a poem.
-
-  &lt;p&gt;Paragraphs in &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; are defined
-   relative to what the document looks like without the &lt;code&gt;&lt;a
-   href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
-   elements complicating matters. Let &lt;var title=&quot;&quot;&gt;view&lt;/var&gt; be a view of
-   the DOM that replaces all &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
-   href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements in the document with their contents.
-   Then, in &lt;var title=&quot;&quot;&gt;view&lt;/var&gt;, for each run of &lt;a
-   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; uninterrupted by other types of
-   content, in an element that accepts content other than &lt;a
-   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; be
-   the first node of the run, and let &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; be the last
-   node of the run. For each run, a paragraph exists in the original DOM from
-   immediately before &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; to immediately after &lt;var
-   title=&quot;&quot;&gt;last&lt;/var&gt;. (Paragraphs can thus span across &lt;code&gt;&lt;a
-   href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
-   elements.)
-
-  &lt;p&gt;A &lt;a href=&quot;#paragraph&quot;&gt;paragraph&lt;/a&gt; is also formed by &lt;code&gt;&lt;a
-   href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; elements.
-
-  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; element can be used to
-   wrap individual paragraphs when there would otherwise not be any content
-   other than phrasing content to separate the paragraphs from each other.
-
-  &lt;div class=example&gt;
-   &lt;p&gt;In the following example, there are two paragraphs in a section. There
-    is also a header, which contains phrasing content that is not a
-    paragraph. Note how the comments and &lt;span&gt;intra-element
-    whitespace&lt;/span&gt; do not form paragraphs.&lt;/p&gt;
-
-   &lt;pre&gt;&lt;section&gt;
-  &lt;h1&gt;Example of paragraphs&lt;/h1&gt;
-  This is the &lt;em&gt;first&lt;/em&gt; paragraph in this example.
-  &lt;p&gt;This is the second.&lt;/p&gt;
-  &lt;!-- This is not a paragraph. --&gt;
-&lt;/section&gt;&lt;/pre&gt;
-
-   &lt;p&gt;The following example takes that markup and puts &lt;code&gt;&lt;a
-    href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
-    elements around some of the markup to show that the text was changed
-    (though in this case, the changes don't really make much sense,
-    admittedly). Notice how this example has exactly the same paragraphs as
-    the previous one, despite the &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and
-    &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
-
-   &lt;pre&gt;&lt;section&gt;
-  &lt;ins&gt;&lt;h1&gt;Example of paragraphs&lt;/h1&gt;
-  This is the &lt;em&gt;first&lt;/em&gt; paragraph in&lt;/ins&gt; this example&lt;del&gt;.
-  &lt;p&gt;This is the second.&lt;/p&gt;&lt;/del&gt;
-  &lt;!-- This is not a paragraph. --&gt;
-&lt;/section&gt;&lt;/pre&gt;
-  &lt;/div&gt;
-
-  &lt;h3 id=global&gt;&lt;span class=secno&gt;3.4 &lt;/span&gt;Global attributes&lt;/h3&gt;
-
   &lt;p&gt;The following attributes are common to and may be specified on all &lt;a
    href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; (even those not defined in this
    specification):
@@ -6904,8 +6996,8 @@
    the namespace declaration mechanism, and an element cannot actually have
    an &lt;code title=&quot;&quot;&gt;xmlns&lt;/code&gt; attribute in no namespace specified.
 
-  &lt;h4 id=the-id&gt;&lt;span class=secno&gt;3.4.1 &lt;/span&gt;The &lt;dfn id=id
-   title=attr-id&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=the-id&gt;&lt;span class=secno&gt;3.3.3.1. &lt;/span&gt;The &lt;dfn id=id
+   title=attr-id&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; attribute represents
    its element's unique identifier. The value must be unique in the subtree
@@ -6934,8 +7026,8 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-id&gt;&lt;a
    href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-title&gt;&lt;span class=secno&gt;3.4.2 &lt;/span&gt;The &lt;dfn id=title
-   title=attr-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=the-title&gt;&lt;span class=secno&gt;3.3.3.2. &lt;/span&gt;The &lt;dfn id=title
+   title=attr-title&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=attr-title&gt;&lt;a href=&quot;#title&quot;&gt;title&lt;/a&gt;&lt;/code&gt; attribute
    represents advisory information for the element, such as would be
@@ -6969,9 +7061,9 @@
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code
    title=attr-title&gt;&lt;a href=&quot;#title&quot;&gt;title&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-lang&gt;&lt;span class=secno&gt;3.4.3 &lt;/span&gt;The &lt;dfn id=lang
+  &lt;h5 id=the-lang&gt;&lt;span class=secno&gt;3.3.3.3. &lt;/span&gt;The &lt;dfn id=lang
    title=attr-lang&gt;&lt;code&gt;lang&lt;/code&gt;&lt;/dfn&gt; (HTML only) and &lt;dfn id=xmllang
-   title=attr-xml-lang&gt;&lt;code&gt;xml:lang&lt;/code&gt;&lt;/dfn&gt; (XML only) attributes&lt;/h4&gt;
+   title=attr-xml-lang&gt;&lt;code&gt;xml:lang&lt;/code&gt;&lt;/dfn&gt; (XML only) attributes&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=attr-lang&gt;&lt;a href=&quot;#lang&quot;&gt;lang&lt;/a&gt;&lt;/code&gt; attribute
    specifies the primary &lt;dfn id=language&gt;language&lt;/dfn&gt; for the element's
@@ -7034,8 +7126,8 @@
    must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-lang&gt;&lt;a
    href=&quot;#lang&quot;&gt;lang&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-xmlbase&gt;&lt;span class=secno&gt;3.4.4 &lt;/span&gt;The &lt;dfn id=xmlbase
-   title=attr-xml-base&gt;&lt;code&gt;xml:base&lt;/code&gt;&lt;/dfn&gt; attribute (XML only)&lt;/h4&gt;
+  &lt;h5 id=the-xmlbase&gt;&lt;span class=secno&gt;3.3.3.4. &lt;/span&gt;The &lt;dfn id=xmlbase
+   title=attr-xml-base&gt;&lt;code&gt;xml:base&lt;/code&gt;&lt;/dfn&gt; attribute (XML only)&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=attr-xml-base&gt;&lt;a href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt;
    attribute is defined in XML Base. &lt;a href=&quot;#refsXMLBASE&quot;&gt;[XMLBASE]&lt;/a&gt;
@@ -7046,8 +7138,8 @@
    href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt; attribute in &lt;a href=&quot;#html-&quot;&gt;HTML
    documents&lt;/a&gt;.
 
-  &lt;h4 id=the-dir&gt;&lt;span class=secno&gt;3.4.5 &lt;/span&gt;The &lt;dfn id=dir
-   title=attr-dir&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=the-dir&gt;&lt;span class=secno&gt;3.3.3.5. &lt;/span&gt;The &lt;dfn id=dir
+   title=attr-dir&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=attr-dir&gt;&lt;a href=&quot;#dir&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; attribute
    specifies the element's text directionality. The attribute is an &lt;a
@@ -7071,18 +7163,18 @@
   &lt;p&gt;The &lt;dfn id=dir0 title=dom-dir&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; DOM attribute on
    an element must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-dir&gt;&lt;a
    href=&quot;#dir&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; content attribute of that element, &lt;a
-   href=&quot;#limited0&quot;&gt;limited to only known values&lt;/a&gt;.
+   href=&quot;#limited&quot;&gt;limited to only known values&lt;/a&gt;.
 
   &lt;p&gt;The &lt;dfn id=dir1 title=dom-document-dir&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute on &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; objects
    must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-dir&gt;&lt;a
    href=&quot;#dir&quot;&gt;dir&lt;/a&gt;&lt;/code&gt; content attribute of &lt;a href=&quot;#the-html0&quot;&gt;the
-   &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt;, if any, &lt;a href=&quot;#limited0&quot;&gt;limited to only
+   &lt;code&gt;html&lt;/code&gt; element&lt;/a&gt;, if any, &lt;a href=&quot;#limited&quot;&gt;limited to only
    known values&lt;/a&gt;. If there is no such element, then the attribute must
    return the empty string and do nothing on setting.
 
-  &lt;h4 id=classes&gt;&lt;span class=secno&gt;3.4.6 &lt;/span&gt;The &lt;dfn id=class
-   title=attr-class&gt;&lt;code&gt;class&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=classes&gt;&lt;span class=secno&gt;3.3.3.6. &lt;/span&gt;The &lt;dfn id=class
+   title=attr-class&gt;&lt;code&gt;class&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;Every &lt;a href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt;
    may have a &lt;code title=attr-class&gt;&lt;a href=&quot;#class&quot;&gt;class&lt;/a&gt;&lt;/code&gt;
@@ -7113,8 +7205,8 @@
    attributes must both &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code
    title=attr-class&gt;&lt;a href=&quot;#class&quot;&gt;class&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-style&gt;&lt;span class=secno&gt;3.4.7 &lt;/span&gt;The &lt;dfn id=style
-   title=attr-style&gt;&lt;code&gt;style&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=the-style&gt;&lt;span class=secno&gt;3.3.3.7. &lt;/span&gt;The &lt;dfn id=style
+   title=attr-style&gt;&lt;code&gt;style&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;All elements may have the &lt;code title=attr-style&gt;&lt;a
    href=&quot;#style&quot;&gt;style&lt;/a&gt;&lt;/code&gt; content attribute set. If specified, the
@@ -7156,8 +7248,8 @@
 background: transparent&quot;&gt;blue&lt;/span&gt;.&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=embedding&gt;&lt;span class=secno&gt;3.4.8 &lt;/span&gt;&lt;dfn
-   id=embedding0&gt;Embedding custom non-visible data&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h5 id=embedding&gt;&lt;span class=secno&gt;3.3.3.8. &lt;/span&gt;&lt;dfn
+   id=embedding0&gt;Embedding custom non-visible data&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=custom&gt;custom data attribute&lt;/dfn&gt; is an attribute whose name
    starts with the string &quot;&lt;dfn id=data-
@@ -7252,9 +7344,954 @@
    attributes or values. Specifications intended for user agents must not
    define these attributes to have any meaningful values.
 
-  &lt;h3 id=the-root&gt;&lt;span class=secno&gt;3.5 &lt;/span&gt;The root element&lt;/h3&gt;
+  &lt;h3 id=content&gt;&lt;span class=secno&gt;3.4 &lt;/span&gt;Content models&lt;/h3&gt;
 
-  &lt;h4 id=the-html&gt;&lt;span class=secno&gt;3.5.1 &lt;/span&gt;The &lt;dfn
+  &lt;p&gt;All the elements in this specification have a defined content model,
+   which describes what nodes are allowed inside the elements, and thus what
+   the structure of an HTML document or fragment must look like.
+
+  &lt;p class=note&gt;As noted in the conformance and terminology sections, for the
+   purposes of determining if an element matches its content model or not, &lt;a
+   href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;&lt;code&gt;CDATASection&lt;/code&gt; nodes in the
+   DOM are treated as equivalent to &lt;code&gt;Text&lt;/code&gt; nodes&lt;/a&gt;, and &lt;a
+   href=&quot;#entity-references&quot;&gt;entity reference nodes are treated as if they
+   were expanded in place&lt;/a&gt;.
+
+  &lt;p&gt;The &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt; are
+   always allowed between elements. User agents represent these characters
+   between elements in the source markup as text nodes in the
+   DOM.&lt;!-- not a conf criteria since the parser now requires this
+  --&gt;
+   Empty &lt;a href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; and &lt;a
+   href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text nodes&lt;/a&gt; consisting of just
+   sequences of those characters are considered &lt;dfn
+   id=inter-element&gt;inter-element whitespace&lt;/dfn&gt;.
+
+  &lt;p&gt;&lt;a href=&quot;#inter-element&quot;&gt;Inter-element whitespace&lt;/a&gt;, comment nodes,
+   and processing instruction nodes must be ignored when establishing whether
+   an element matches its content model or not, and must be ignored when
+   following algorithms that define document and element semantics.
+
+  &lt;p&gt;An element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is said to be &lt;dfn id=preceded&gt;preceded
+   or followed&lt;/dfn&gt; by a second element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var
+   title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; have the same parent node and
+   there are no other element nodes or text nodes (other than &lt;a
+   href=&quot;#inter-element&quot;&gt;inter-element whitespace&lt;/a&gt;) between them.
+
+  &lt;p&gt;Authors must not use &lt;a href=&quot;#elements2&quot;&gt;elements in the HTML
+   namespace&lt;/a&gt; anywhere except where they are explicitly allowed, as
+   defined for each element, or as explicitly required by other
+   specifications. For XML compound documents, these contexts could be inside
+   elements from other namespaces, if those elements are defined as providing
+   the relevant contexts.
+
+  &lt;div class=example&gt;
+   &lt;p&gt;The SVG specification defines the SVG &lt;code&gt;foreignObject&lt;/code&gt;
+    element as allowing foreign namespaces to be included, thus allowing
+    compound documents to be created by inserting subdocument content under
+    that element. &lt;em&gt;This&lt;/em&gt; specification defines the XHTML &lt;code&gt;&lt;a
+    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element as being allowed where subdocument
+    fragments are allowed in a compound document. Together, these two
+    definitions mean that placing an XHTML &lt;code&gt;&lt;a
+    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element as a child of an SVG
+    &lt;code&gt;foreignObject&lt;/code&gt; element is conforming. &lt;a
+    href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
+  &lt;/div&gt;
+
+  &lt;div class=example&gt;
+   &lt;p&gt;The Atom specification defines the Atom &lt;code title=&quot;&quot;&gt;content&lt;/code&gt;
+    element, when its &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute has the value
+    &lt;code title=&quot;&quot;&gt;xhtml&lt;/code&gt;, as requiring that it contains a single HTML
+    &lt;code&gt;&lt;a href=&quot;#div&quot;&gt;div&lt;/a&gt;&lt;/code&gt; element. Thus, a &lt;code&gt;&lt;a
+    href=&quot;#div&quot;&gt;div&lt;/a&gt;&lt;/code&gt; element is allowed in that context, even
+    though this is not explicitly normatively stated by this specification.
+    &lt;a href=&quot;#refsATOM&quot;&gt;[ATOM]&lt;/a&gt;&lt;/p&gt;
+  &lt;/div&gt;
+
+  &lt;p&gt;In addition, &lt;a href=&quot;#elements2&quot;&gt;elements in the HTML namespace&lt;/a&gt; may
+   be orphan nodes (i.e. without a parent node).
+
+  &lt;div class=example&gt;
+   &lt;p&gt;For example, creating a &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; element and
+    storing it in a global variable in a script is conforming, even though
+    &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; elements are otherwise only supposed to
+    be used inside &lt;code&gt;&lt;a href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+
+   &lt;pre&gt;var data = {
+  name: &quot;Banana&quot;,
+  cell: document.createElement('td'), 
+};&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;h4 id=kinds&gt;&lt;span class=secno&gt;3.4.1 &lt;/span&gt;Kinds of content&lt;/h4&gt;
+
+  &lt;p&gt;Each element in HTML falls into zero or more categories that group
+   elements with similar characteristics together. The following categories
+   are used in this specification:
+
+  &lt;ul class=brief&gt;
+   &lt;li&gt;&lt;a href=&quot;#metadata0&quot;&gt;Metadata content&lt;/a&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#flow-content0&quot;&gt;Flow content&lt;/a&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#sectioning0&quot;&gt;Sectioning content&lt;/a&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#heading0&quot;&gt;Heading content&lt;/a&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#phrasing0&quot;&gt;Phrasing content&lt;/a&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#embedded1&quot;&gt;Embedded content&lt;/a&gt;
+
+   &lt;li&gt;&lt;span&gt;Form control content&lt;/span&gt;
+
+   &lt;li&gt;&lt;a href=&quot;#interactive1&quot;&gt;Interactive content&lt;/a&gt;&lt;/li&gt;
+   &lt;!--
+   &lt;li&gt;&lt;span&gt;Form content&lt;/span&gt;&lt;/li&gt; XXX &quot;Form control elements&quot;
+--&gt;
+  &lt;/ul&gt;
+  &lt;!-- XXX xref check that all the above got a section defining them,
+  however briefly --&gt;
+  &lt;!-- XXX check that the element definitions also link to those
+  sections --&gt;
+  &lt;!-- XXX list all the elements for each kind of element in the
+  sections below. --&gt;
+
+  &lt;p&gt;Some elements have unique requirements and do not fit into any
+   particular category.
+
+  &lt;h5 id=metadata&gt;&lt;span class=secno&gt;3.4.1.1. &lt;/span&gt;Metadata content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn id=metadata0&gt;Metadata content&lt;/dfn&gt; is content that sets up the
+   presentation or behavior of the rest of the content, or that sets up the
+   relationship of the document with other documents, or that conveys other
+   &quot;out of band&quot; information.
+
+  &lt;p&gt;Elements from other namespaces whose semantics are primarily
+   metadata-related (e.g. RDF) are also &lt;a href=&quot;#metadata0&quot;&gt;metadata
+   content&lt;/a&gt;.
+
+  &lt;h5 id=flow-content&gt;&lt;span class=secno&gt;3.4.1.2. &lt;/span&gt;Flow content&lt;/h5&gt;
+
+  &lt;p&gt;Most elements that are used in the body of documents and applications
+   are categorized as &lt;dfn id=flow-content0&gt;flow content&lt;/dfn&gt;.
+
+  &lt;p&gt;As a general rule, elements whose content model allows any &lt;a
+   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; should have either at least one
+   descendant text node that is not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
+   whitespace&lt;/a&gt;, or at least one descendant element node that is &lt;a
+   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;. For the purposes of this
+   requirement, &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements and their
+   descendants must not be counted as contributing to the ancestors of the
+   &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; element.
+
+  &lt;p&gt;This requirement is not a hard requirement, however, as there are many
+   cases where an element can be empty legitimately, for example when it is
+   used as a placeholder which will later be filled in by a script, or when
+   the element is part of a template and would on most pages be filled in but
+   on some pages is not relevant.
+
+  &lt;h5 id=sectioning&gt;&lt;span class=secno&gt;3.4.1.3. &lt;/span&gt;Sectioning content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn id=sectioning0&gt;Sectioning content&lt;/dfn&gt; is content that defines the
+   scope of &lt;a href=&quot;#heading0&quot; title=&quot;heading content&quot;&gt;headers&lt;/a&gt;, &lt;a
+   href=&quot;#footer&quot; title=footer&gt;footers&lt;/a&gt;, and &lt;a href=&quot;#address&quot;
+   title=address&gt;contact information&lt;/a&gt;.
+
+  &lt;p&gt;Each &lt;a href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; element potentially
+   has a heading. See the section on &lt;a href=&quot;#headings0&quot;&gt;headings and
+   sections&lt;/a&gt; for further details.
+
+  &lt;h5 id=heading&gt;&lt;span class=secno&gt;3.4.1.4. &lt;/span&gt;Heading content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn id=heading0&gt;Heading content&lt;/dfn&gt; defines the header of a section
+   (whether explicitly marked up using &lt;a href=&quot;#sectioning0&quot;&gt;sectioning
+   content&lt;/a&gt; elements, or implied by the heading content itself).
+
+  &lt;h5 id=phrasing&gt;&lt;span class=secno&gt;3.4.1.5. &lt;/span&gt;Phrasing content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn id=phrasing0&gt;Phrasing content&lt;/dfn&gt; is the text of the document, as
+   well as elements that mark up that text at the intra-paragraph level. Runs
+   of &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; form &lt;a href=&quot;#paragraph&quot;
+   title=paragraph&gt;paragraphs&lt;/a&gt;.
+
+  &lt;p&gt;All &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; is also &lt;a
+   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;. Any content model that expects &lt;a
+   href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; also expects &lt;a
+   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;.
+
+  &lt;p&gt;As a general rule, elements whose content model allows any &lt;a
+   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; should have either at least one
+   descendant text node that is not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
+   whitespace&lt;/a&gt;, or at least one descendant element node that is &lt;a
+   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;. For the purposes of this
+   requirement, nodes that are descendants of &lt;code&gt;&lt;a
+   href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements must not be counted as contributing to
+   the ancestors of the &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; element.
+
+  &lt;p class=note&gt;Most elements that are categorized as phrasing content can
+   only contain elements that are themselves categorized as phrasing content,
+   not any flow content.
+
+  &lt;p&gt;Text nodes that are not &lt;a href=&quot;#inter-element&quot;&gt;inter-element
+   whitespace&lt;/a&gt; are &lt;a href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;.
+
+  &lt;h5 id=embedded&gt;&lt;span class=secno&gt;3.4.1.6. &lt;/span&gt;Embedded content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn id=embedded1&gt;Embedded content&lt;/dfn&gt; is content that imports another
+   resource into the document, or content from another vocabulary that is
+   inserted into the document.
+
+  &lt;p&gt;All &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt; is also &lt;a
+   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; (and &lt;a href=&quot;#flow-content0&quot;&gt;flow
+   content&lt;/a&gt;). Any content model that expects &lt;a href=&quot;#phrasing0&quot;&gt;phrasing
+   content&lt;/a&gt; (or &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;) also expects &lt;a
+   href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;.
+
+  &lt;p&gt;Elements that are from namespaces other than the &lt;a
+   href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and that convey content but not
+   metadata, are &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt; for the purposes
+   of the content models defined in this specification. (For example, MathML,
+   or SVG.)
+
+  &lt;p&gt;Some embedded content elements can have &lt;dfn id=fallback&gt;fallback
+   content&lt;/dfn&gt;: content that is to be used when the external resource
+   cannot be used (e.g. because it is of an unsupported format). The element
+   definitions state what the fallback is, if any.
+
+  &lt;h5 id=interactive0&gt;&lt;span class=secno&gt;3.4.1.7. &lt;/span&gt;Interactive content&lt;/h5&gt;
+  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
+  all cross-references. Some of them refer specifically to the
+  activation behavior stuff. --&gt;
+
+  &lt;p class=big-issue&gt;Parts of this section should eventually be moved to DOM3
+   Events.&lt;/p&gt;
+  &lt;!-- but see comment above --&gt;
+  &lt;!--
+TESTS:
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E</A>
+--&gt;
+
+  &lt;p&gt;&lt;dfn id=interactive1&gt;Interactive content&lt;/dfn&gt; is content that is
+   specifically intended for user interaction.
+
+  &lt;p&gt;Certain elements in HTML can be activated, for instance &lt;code&gt;&lt;a
+   href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, or
+   &lt;code&gt;input&lt;/code&gt; elements when their &lt;code&gt;type&lt;/code&gt; attribute is set
+   to &lt;code&gt;radio&lt;/code&gt;. Activation of those elements can happen in various
+   (UA-defined) ways, for instance via the mouse or keyboard.
+
+  &lt;p&gt;When activation is performed via some method other than clicking the
+   pointing device, the default action of the event that triggers the
+   activation must, instead of being activating the element directly, be to
+   &lt;a href=&quot;#firing&quot;&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt; event&lt;/a&gt; on the same
+   element.
+
+  &lt;p&gt;The default action of this &lt;code title=event-click&gt;click&lt;/code&gt; event,
+   or of the real &lt;code title=event-click&gt;click&lt;/code&gt; event if the element
+   was activated by clicking a pointing device, must be to &lt;span title=&quot;fire
+   a DOMActivate event&quot;&gt;fire a further &lt;code
+   title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the same
+   element, whose own default action is to go through all the elements the
+   &lt;code title=event-DOMActivate&gt;DOMActivate&lt;/code&gt; event bubbled through
+   (starting at the target node and going towards the &lt;code&gt;Document&lt;/code&gt;
+   node), looking for an element with an &lt;a href=&quot;#activation0&quot;&gt;activation
+   behavior&lt;/a&gt;; the first element, in reverse tree order, to have one, must
+   have its activation behavior executed.
+
+  &lt;p class=note&gt;The above doesn't happen for arbitrary synthetic events
+   dispatched by author script. However, the &lt;code title=dom-click&gt;&lt;a
+   href=&quot;#click1&quot;&gt;click()&lt;/a&gt;&lt;/code&gt; method can be used to make it happen
+   programmatically.
+
+  &lt;p&gt;For certain form controls, this process is complicated further by &lt;a
+   href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&quot;&gt;changes
+   that must happen around the click event&lt;/a&gt;. &lt;a href=&quot;#refsWF2&quot;&gt;[WF2]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXX WF2: when this is merged into
+  this spec, update xrefs --&gt;
+
+  &lt;p class=note&gt;Most interactive elements have content models that disallow
+   nesting interactive elements.
+
+  &lt;h4 id=transparent&gt;&lt;span class=secno&gt;3.4.2 &lt;/span&gt;Transparent content
+   models&lt;/h4&gt;
+
+  &lt;p&gt;Some elements are described as &lt;dfn id=transparent0&gt;transparent&lt;/dfn&gt;;
+   they have &quot;transparent&quot; as their content model. Some elements are
+   described as &lt;dfn id=semi-transparent&gt;semi-transparent&lt;/dfn&gt;; this means
+   that part of their content model is &quot;transparent&quot; but that is not the only
+   part of the content model that must be satisfied.
+
+  &lt;p&gt;When a content model includes a part that is &quot;transparent&quot;, those parts
+   must not contain content that would not be conformant if all transparent
+   and semi-transparent elements in the tree were replaced, in their parent
+   element, by the children in the &quot;transparent&quot; part of their content model,
+   retaining order.
+
+  &lt;p&gt;When a transparent or semi-transparent element has no parent, then the
+   part of its content model that is &quot;transparent&quot; must instead be treated as
+   accepting any &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;.
+
+  &lt;h3 id=paragraphs&gt;&lt;span class=secno&gt;3.5 &lt;/span&gt;Paragraphs&lt;/h3&gt;
+
+  &lt;p&gt;A &lt;dfn id=paragraph&gt;paragraph&lt;/dfn&gt; is typically a block of text with
+   one or more sentences that discuss a particular topic, as in typography,
+   but can also be used for more general thematic grouping. For instance, an
+   address is also a paragraph, as is a part of a form, a byline, or a stanza
+   in a poem.
+
+  &lt;p&gt;Paragraphs in &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt; are defined
+   relative to what the document looks like without the &lt;code&gt;&lt;a
+   href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
+   elements complicating matters. Let &lt;var title=&quot;&quot;&gt;view&lt;/var&gt; be a view of
+   the DOM that replaces all &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
+   href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements in the document with their contents.
+   Then, in &lt;var title=&quot;&quot;&gt;view&lt;/var&gt;, for each run of &lt;a
+   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt; uninterrupted by other types of
+   content, in an element that accepts content other than &lt;a
+   href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; be
+   the first node of the run, and let &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; be the last
+   node of the run. For each run, a paragraph exists in the original DOM from
+   immediately before &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; to immediately after &lt;var
+   title=&quot;&quot;&gt;last&lt;/var&gt;. (Paragraphs can thus span across &lt;code&gt;&lt;a
+   href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
+   elements.)
+
+  &lt;p&gt;A &lt;a href=&quot;#paragraph&quot;&gt;paragraph&lt;/a&gt; is also formed by &lt;code&gt;&lt;a
+   href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; elements.
+
+  &lt;p class=note&gt;The &lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; element can be used to
+   wrap individual paragraphs when there would otherwise not be any content
+   other than phrasing content to separate the paragraphs from each other.
+
+  &lt;div class=example&gt;
+   &lt;p&gt;In the following example, there are two paragraphs in a section. There
+    is also a header, which contains phrasing content that is not a
+    paragraph. Note how the comments and &lt;span&gt;intra-element
+    whitespace&lt;/span&gt; do not form paragraphs.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;section&gt;
+  &lt;h1&gt;Example of paragraphs&lt;/h1&gt;
+  This is the &lt;em&gt;first&lt;/em&gt; paragraph in this example.
+  &lt;p&gt;This is the second.&lt;/p&gt;
+  &lt;!-- This is not a paragraph. --&gt;
+&lt;/section&gt;&lt;/pre&gt;
+
+   &lt;p&gt;The following example takes that markup and puts &lt;code&gt;&lt;a
+    href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt;
+    elements around some of the markup to show that the text was changed
+    (though in this case, the changes don't really make much sense,
+    admittedly). Notice how this example has exactly the same paragraphs as
+    the previous one, despite the &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and
+    &lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;section&gt;
+  &lt;ins&gt;&lt;h1&gt;Example of paragraphs&lt;/h1&gt;
+  This is the &lt;em&gt;first&lt;/em&gt; paragraph in&lt;/ins&gt; this example&lt;del&gt;.
+  &lt;p&gt;This is the second.&lt;/p&gt;&lt;/del&gt;
+  &lt;!-- This is not a paragraph. --&gt;
+&lt;/section&gt;&lt;/pre&gt;
+  &lt;/div&gt;
+
+  &lt;h3 id=apis-in&gt;&lt;span class=secno&gt;3.6 &lt;/span&gt;APIs in HTML documents&lt;/h3&gt;
+  &lt;!-- XXX case-sensitivity training required here. --&gt;
+
+  &lt;p&gt;For &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;, and for &lt;a
+   href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in &lt;a href=&quot;#html-&quot;&gt;HTML
+   documents&lt;/a&gt;, certain APIs defined in DOM3 Core become case-insensitive
+   or case-changing, as sometimes defined in DOM3 Core, and as summarized or
+   required below. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;.
+
+  &lt;p&gt;This does not apply to &lt;a href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt; or to
+   elements that are not in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;
+   despite being in &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;.
+
+  &lt;dl&gt;
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.tagName&lt;/code&gt;, &lt;code
+    title=&quot;&quot;&gt;Node.nodeName&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;Node.localName&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
+    xref--&gt;
+     and attribute names in all lowercase&lt;!-- XXX xref --&gt;, regardless of the
+     case with which they were created.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.createElement()&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this method
+     will lowercase&lt;!-- XXX xref --&gt; the argument before creating the
+     requisite element. Also, the element created must be in the &lt;a
+     href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p class=note&gt;This doesn't apply to &lt;code
+     title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible, by
+     passing this last method a tag name in the wrong case, to create an
+     element that claims to have the tag name of an element defined in this
+     specification, but doesn't support its interfaces, because it really has
+     another tag name not accessible from the DOM APIs.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttributeNode()&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;a href=&quot;#html-elements&quot;
+     title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt;, it must have its name
+     lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
+
+    &lt;p class=note&gt;This doesn't apply to &lt;code
+     title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttribute()&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;When an attribute is set on an &lt;a href=&quot;#html-elements&quot; title=&quot;HTML
+     elements&quot;&gt;HTML element&lt;/a&gt;, the name argument must be
+     lowercased&lt;!-- XXX xref
+    --&gt; before the element is affected.&lt;/p&gt;
+
+    &lt;p class=note&gt;This doesn't apply to &lt;code
+     title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.getElementsByTagName()&lt;/code&gt; and &lt;code
+    title=&quot;&quot;&gt;Element.getElementsByTagName()&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;These methods (but not their namespaced counterparts) must compare the
+     given argument case-insensitively&lt;!-- XXX xref --&gt; when looking at &lt;a
+     href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML elements&lt;/a&gt;, and
+     case-sensitively otherwise.&lt;/p&gt;
+
+    &lt;p class=note&gt;Thus, in an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML
+     document&lt;/a&gt; with nodes in multiple namespaces, these methods will be
+     both case-sensitive and case-insensitive at the same time.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.renameNode()&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;If the new namespace is the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML
+     namespace&lt;/a&gt;, then the new qualified name must be lowercased before the
+     rename takes place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;h3 id=dynamic&gt;&lt;span class=secno&gt;3.7 &lt;/span&gt;&lt;dfn id=dynamic2&gt;Dynamic markup
+   insertion&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;code title=dom-document-write&gt;&lt;a
+   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; family of methods and
+   the &lt;code title=dom-innerHTML&gt;&lt;a href=&quot;#innerhtml&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+   family of DOM attributes enable script authors to dynamically insert
+   markup into the document.
+
+  &lt;p class=issue&gt;bz argues that innerHTML should be called something else on
+   XML documents and XML elements. Is the sanity worth the migration pain?
+
+  &lt;p&gt;Because these APIs interact with the parser, their behavior varies
+   depending on whether they are used with &lt;a href=&quot;#html-&quot;&gt;HTML
+   documents&lt;/a&gt; (and the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;) or XHTML in &lt;a
+   href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt; (and the &lt;span&gt;XML parser&lt;/span&gt;).
+   The following table cross-references the various versions of these APIs.
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;td&gt;
+
+     &lt;th&gt;&lt;dfn id=document.write
+      title=dom-document-write&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;
+
+     &lt;th&gt;&lt;dfn id=innerhtml title=dom-innerHTML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;th&gt;For documents that are &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;
+
+     &lt;td&gt;&lt;a href=&quot;#document.write...&quot;
+      title=dom-document-write-HTML&gt;&lt;code&gt;document.write()&lt;/code&gt; in HTML&lt;/a&gt;
+
+     &lt;td&gt;&lt;a href=&quot;#innerhtml0&quot;
+      title=dom-innerHTML-HTML&gt;&lt;code&gt;innerHTML&lt;/code&gt; in HTML&lt;/a&gt;
+
+    &lt;tr&gt;
+     &lt;th&gt;For documents that are &lt;a href=&quot;#xml-documents&quot;&gt;XML documents&lt;/a&gt;
+
+     &lt;td&gt;&lt;a href=&quot;#document.write0&quot;
+      title=dom-document-write-XML&gt;&lt;code&gt;document.write()&lt;/code&gt; in XML&lt;/a&gt;
+
+     &lt;td&gt;&lt;a href=&quot;#innerhtml1&quot; title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;
+      in XML&lt;/a&gt;
+  &lt;/table&gt;
+
+  &lt;p&gt;Regardless of the parsing mode, the &lt;dfn id=document.writeln...
+   title=dom-document-writeln&gt;&lt;code&gt;document.writeln(...)&lt;/code&gt;&lt;/dfn&gt; method
+   must call the &lt;code title=dom-document-write&gt;&lt;a
+   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method with the same
+   argument(s), and then call the &lt;code title=dom-document-write&gt;&lt;a
+   href=&quot;#document.write&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method with, as its
+   argument, a string consisting of a single line feed character (U+000A).
+
+  &lt;h4 id=controlling&gt;&lt;span class=secno&gt;3.7.1 &lt;/span&gt;Controlling the input
+   stream&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=open title=dom-document-open&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt;
+   method comes in several variants with different numbers of arguments.
+
+  &lt;p&gt;When called with two or fewer arguments, the method must act as follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; be the value of the first argument, if
+     there is one, or &quot;&lt;code&gt;text/html&lt;/code&gt;&quot; otherwise.
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second argument
+     and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
+   --&gt;, and
+     false otherwise.
+
+   &lt;li&gt;
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!-- XXX xref
+    --&gt;
+     that isn't a &lt;a href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt;, and
+     the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; associated with that
+     parser's &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; is not undefined (that is,
+     it &lt;em&gt;does&lt;/em&gt; point to somewhere in the input stream), then the
+     method does nothing. Abort these steps and return the
+     &lt;code&gt;Document&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
+
+    &lt;p class=note&gt;This basically causes &lt;code title=dom-document-open&gt;&lt;a
+     href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; to be ignored when it's called
+     in an inline script found during the parsing of data sent over the
+     network, while still letting it have an effect when called
+     asynchronously or on a document that is itself being spoon-fed using
+     these APIs.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p class=big-issue&gt;onbeforeunload, onunload, reset timers, empty event
+     queue, kill any pending transactions, XMLHttpRequests, etc
+   &lt;/li&gt;
+   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20{%20f%20%3D%20document.getElementsByTagName(%27iframe%27)[0]%3B%20d%20%3D%20f.contentDocument%3B%20}%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.body.bgColor%3D%27red%27%22%20value%3D%22color%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22f.style.border%3D%27lime%20solid%27%22%20value%3D%22color%20frame%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3Etest%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setInterval(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%20500)%3C%2Fscript%3E%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E%0A --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+   xref--&gt;,
+     then stop that parser, and throw away any pending content in the input
+     stream. &lt;span class=big-issue&gt;what about if it doesn't, because it's
+     either like a text/plain, or Atom, or PDF, or XHTML, or image document,
+     or something?&lt;/span&gt;
+   &lt;/li&gt;
+   &lt;!-- XXX see
+   also innerHTML in HTML --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Remove all child nodes of the document.
+
+   &lt;li&gt;
+    &lt;p&gt;Change the &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; to
+     UTF-16.
+
+   &lt;li&gt;
+    &lt;p&gt;Create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; and associate it with
+     the document. This is a &lt;dfn id=script-created&gt;script-created
+     parser&lt;/dfn&gt; (meaning that it can be closed by the &lt;code
+     title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; and
+     &lt;code title=dom-document-close&gt;&lt;a
+     href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt; methods, and that the
+     tokeniser will wait for an explicit call to &lt;code
+     title=dom-document-close&gt;&lt;a href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
+     before emitting an end-of-file token).
+
+   &lt;li&gt;Mark the document as being an &lt;a href=&quot;#html-&quot; title=&quot;HTML
+    documents&quot;&gt;HTML document&lt;/a&gt; (it might already be so-marked).&lt;/li&gt;
+   &lt;!-- text/plain handling --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; does not have the value
+     &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;&lt;!-- XXX matched how?
+   --&gt;, then act as if the
+     tokeniser had emitted a &lt;code&gt;&lt;a href=&quot;#pre&quot;&gt;pre&lt;/a&gt;&lt;/code&gt; element
+     start tag, then set the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;'s &lt;a
+     href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage's &lt;a
+     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;PLAINTEXT&lt;/em&gt;.
+
+   &lt;li&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
+
+    &lt;ol&gt;
+     &lt;li&gt;Remove all the entries in the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+      context&lt;/a&gt;'s &lt;a href=&quot;#session&quot;&gt;session history&lt;/a&gt; after the &lt;a
+      href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in its &lt;code&gt;Document&lt;/code&gt;'s
+      &lt;code&gt;&lt;a href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; object
+
+     &lt;li&gt;Remove any earlier entries that share the same &lt;code&gt;Document&lt;/code&gt;
+
+     &lt;li&gt;Add a new entry just before the last entry that is associated with
+      the text that was parsed by the previous parser associated with the
+      &lt;code&gt;Document&lt;/code&gt; object, as well as the state of the document at
+      the start of these steps. (This allows the user to step backwards in
+      the session history to see the page before it was blown away by the
+      &lt;code title=dom-document-open&gt;&lt;a
+      href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; call.)
+    &lt;/ol&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Finally, set the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; to point at
+     just before the end of the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; (which at
+     this point will be empty).
+
+   &lt;li&gt;
+    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; on which the method was invoked.
+  &lt;/ol&gt;
+
+  &lt;p class=big-issue&gt;We shouldn't hard-code &lt;code&gt;text/plain&lt;/code&gt; there. We
+   should do it some other way, e.g. hand off to the section on
+   content-sniffing and handling of incoming data streams, the part that
+   defines how this all works when stuff comes over the network.&lt;/p&gt;
+  &lt;!-- XXX Should we support XML/XHTML as a type to that method? --&gt;
+
+  &lt;p&gt;When called with three or more arguments, the &lt;code
+   title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method on the
+   &lt;code&gt;&lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object must call the
+   &lt;code title=dom-open&gt;&lt;a href=&quot;#open2&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method on the
+   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface of the object returned
+   by the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt; attribute
+   of the &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object, with the same
+   arguments as the original call to the &lt;code title=dom-document-open&gt;&lt;a
+   href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method, and return whatever that method
+   returned. If the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt;
+   attribute of the &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object is null, then the
+   method must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.
+
+  &lt;p&gt;The &lt;dfn id=close title=dom-document-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+   method must do nothing if there is no &lt;a
+   href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt; associated with the
+   document. If there is such a parser, then, when the method is called, the
+   user agent must insert an &lt;a href=&quot;#explicit0&quot;&gt;explicit &quot;EOF&quot;
+   character&lt;/a&gt; at the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; of the
+   parser's &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.
+
+  &lt;h4 id=dynamic0&gt;&lt;span class=secno&gt;3.7.2 &lt;/span&gt;Dynamic markup insertion in
+   HTML&lt;/h4&gt;
+
+  &lt;p&gt;In HTML, the &lt;dfn id=document.write...
+   title=dom-document-write-HTML&gt;&lt;code&gt;document.write(...)&lt;/code&gt;&lt;/dfn&gt;
+   method must act as follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; is undefined, the
+     &lt;code title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;open()&lt;/a&gt;&lt;/code&gt; method
+     must be called (with no arguments) on the &lt;code
+     title=Document&gt;document&lt;/code&gt; object. The &lt;a
+     href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt; will point at just before the end
+     of the (empty) &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;The string consisting of the concatenation of all the arguments to the
+     method must be inserted into the &lt;a href=&quot;#input0&quot;&gt;input
+     stream&lt;/a&gt;&lt;!-- XXX xref --&gt; just before the &lt;a
+     href=&quot;#insertion&quot;&gt;insertion point&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If there is &lt;a href=&quot;#the-script&quot; title=&quot;the script that will execute
+     as soon as the parser resumes&quot;&gt;a script that will execute as soon as the
+     parser resumes&lt;/a&gt;, then the method must now return without further
+     processing of the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Otherwise, the tokeniser must process the characters that were
+     inserted, one at a time, processing resulting tokens as they are
+     emitted, and stopping when the tokeniser reaches the insertion point or
+     when the processing of the tokeniser is aborted by the tree construction
+     stage (this can happen if a &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     start tag token is emitted by the tokeniser).
+
+    &lt;p class=note&gt;If the &lt;code title=dom-document-write-HTML&gt;&lt;a
+     href=&quot;#document.write...&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method was called
+     from script executing inline (i.e. executing because the parser parsed a
+     set of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; tags), then this is a
+     &lt;a href=&quot;#nestedParsing&quot;&gt;reentrant invocation of the parser&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Finally, the method must return.&lt;/p&gt;
+  &lt;/ol&gt;
+
+  &lt;p&gt;In HTML, the &lt;dfn id=innerhtml0
+   title=dom-innerHTML-HTML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; DOM attribute of all
+   &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; nodes returns a serialization
+   of the node's children using the &lt;span&gt;HTML syntax&lt;/span&gt;&lt;!-- XXX xref
+  --&gt;.
+   On setting, it replaces the node's children with new nodes that result
+   from parsing the given value. The formal definitions follow.
+
+  &lt;p&gt;On getting, the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute must return the
+   result of running the &lt;a href=&quot;#html-fragment&quot;&gt;HTML fragment serialization
+   algorithm&lt;/a&gt; on the node.
+
+  &lt;p&gt;On setting, if the node is a document, the &lt;code
+   title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM
+   attribute must run the following algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+    xref--&gt;,
+     then stop that parser, and throw away any pending content in the input
+     stream. &lt;span class=big-issue&gt;what about if it doesn't, because it's
+     either like a text/plain, or Atom, or PDF, or XHTML, or image document,
+     or something?&lt;/span&gt;&lt;/p&gt;
+    &lt;!-- XXX see
+    also document.open() --&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose &lt;code
+     title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+     attribute is being set.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in its initial state,
+     and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
+   &lt;/li&gt;
+   &lt;!-- redundant, the document is forcibly already so labeled if we get here
+   &lt;li&gt;
+
+    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
+    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Place into the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; for the &lt;a
+     href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; just created the string being assigned
+     into the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Start the parser and let it run until it has consumed all the
+     characters just inserted into the input stream. (The
+     &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements and a
+     &lt;code title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event will have
+     fired on &lt;a href=&quot;#the-body1&quot; title=&quot;the body element&quot;&gt;its body
+     element&lt;/a&gt;.)&lt;/p&gt;
+  &lt;/ol&gt;
+
+  &lt;p&gt;Otherwise, if the node is an element, then setting the &lt;code
+   title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM
+   attribute must cause the following algorithm to run instead:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Invoke the &lt;a href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing
+     algorithm&lt;/a&gt;, with the element whose &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set as the
+     &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; element, and the string being assigned into
+     the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute as the &lt;var
+     title=&quot;&quot;&gt;input&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the result
+     of this algorithm.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Remove the children of the element whose &lt;code
+     title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+     attribute is being set.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
+     title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of the &lt;code&gt;Element&lt;/code&gt; node whose
+     &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in &lt;var
+     title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the node
+     whose &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set,
+     preserving their order.&lt;/p&gt;
+  &lt;/ol&gt;
+
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+   using &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
+   inserted.&lt;/p&gt;
+  &lt;!-- XXX must make sure we spec that innerHTML causes mutation
+  events to fire, but document.write() doesn't. (the latter is already
+  req-stated in the parser section, btw) --&gt;
+  &lt;!-- <A HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp">http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp</A> --&gt;
+  &lt;!-- <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879">http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879</A>
+       note script execution disabled
+       <A HREF="http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308">http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742</A>
+   --&gt;
+
+  &lt;h4 id=dynamic1&gt;&lt;span class=secno&gt;3.7.3 &lt;/span&gt;Dynamic markup insertion in
+   XML&lt;/h4&gt;
+
+  &lt;p&gt;In an XML context, the &lt;dfn id=document.write0
+   title=dom-document-write-XML&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt; method
+   must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
+  &lt;!--
+  For XHTML: content must be well-formed. Where does
+  it insert? Immediately after the script that called document.write()?&lt;/p&gt;
+  how do we handle async scripts vs sync scripts?
+
+Consider:
+data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ document.write('&lt;foo&gt;Test&lt;/foo&gt;'); ]]&gt;&lt;/script&gt;
+data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ alert('test'); alert(document.write); try { document.write('&lt;foo&gt;Test&lt;/foo&gt;'); alert(document.childNodes.length); } catch (e) { alert(e); } ]]&gt;&lt;/script&gt;
+
+--&gt;
+
+  &lt;p&gt;On the other hand, however, the &lt;dfn id=innerhtml1
+   title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is indeed
+   usable in an XML context.
+
+  &lt;p&gt;In an XML context, the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;s must return a string in the
+   form of an &lt;a href=&quot;<A HREF="http://www.w3.org/TR/xml/#wf-entities">http://www.w3.org/TR/xml/#wf-entities</A>&quot;&gt;internal
+   general parsed entity&lt;/a&gt;, and on &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;s must return a string in the
+   form of a &lt;a href=&quot;<A HREF="http://www.w3.org/TR/xml/#sec-well-formed">http://www.w3.org/TR/xml/#sec-well-formed</A>&quot;&gt;document
+   entity&lt;/a&gt;. The string returned must be XML namespace-well-formed and must
+   be an isomorphic serialization of all of that node's child nodes, in
+   document order. User agents may adjust prefixes and namespace declarations
+   in the serialization (and indeed might be forced to do so in some cases to
+   obtain namespace-well-formed XML). For the &lt;code
+   title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+   attribute on &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; objects,
+   if any of the elements in the serialization are in no namespace, the
+   default namespace in scope for those elements must be explicitly declared
+   as the empty string.&lt;!-- because otherwise round-tripping might break
+  since it'll pick up the surrounding default ns when setting --&gt;
+   (This doesn't apply to the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute on &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; objects.) &lt;a
+   href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt; &lt;a href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;
+
+  &lt;p&gt;If any of the following cases are found in the DOM being serialized, the
+   user agent must raise an &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception:
+
+  &lt;ul&gt;
+   &lt;li&gt;A &lt;code&gt;Document&lt;/code&gt; node with no child element nodes.
+
+   &lt;li&gt;A &lt;code&gt;DocumentType&lt;/code&gt; node that has an external subset public
+    identifier or an external subset system identifier that contains both a
+    U+0022 QUOTATION MARK ('&quot;') and a U+0027 APOSTROPHE (&quot;'&quot;).
+
+   &lt;li&gt;A node with a prefix or local name containing a U+003A COLON (&quot;:&quot;).
+
+   &lt;li&gt;An &lt;code&gt;Attr&lt;/code&gt; node, &lt;code&gt;Text&lt;/code&gt; node,
+    &lt;code&gt;CDATASection&lt;/code&gt; node, &lt;code&gt;Comment&lt;/code&gt; node, or
+    &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains characters
+    that are not matched by the XML &lt;code title=&quot;&quot;&gt;Char&lt;/code&gt; production. &lt;a
+    href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;
+
+   &lt;li&gt;A &lt;code&gt;CDATASection&lt;/code&gt; node whose data contains the string &quot;&lt;code
+    title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;&quot;.
+
+   &lt;li&gt;A &lt;code&gt;Comment&lt;/code&gt; node whose data contains two adjacent U+002D
+    HYPHEN-MINUS (-) characters or ends with such a character.
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is the
+    string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
+   ASCII --&gt;.
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name contains a
+    U+003A COLON (&quot;:&quot;).
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains the
+    string &quot;&lt;code title=&quot;&quot;&gt;?&gt;&lt;/code&gt;&quot;.
+  &lt;/ul&gt;
+
+  &lt;p class=note&gt;These are the only ways to make a DOM unserializable. The DOM
+   enforces all the other XML constraints; for example, trying to set an
+   attribute with a name that contains an equals sign (=) will raised an
+   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception.
+
+  &lt;p&gt;On setting, in an XML context, the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;s and &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;s must run the following
+   algorithm:
+
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;The user agent must create a new &lt;span&gt;XML parser&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set on an
+     element, the user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created
+     the string corresponding to the start tag of that element, declaring all
+     the namespace prefixes that are in scope on that element in the DOM, as
+     well as declaring the default namespace (if any) that is in scope on
+     that element in the DOM.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;The user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created the
+     string being assigned into the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the &lt;code title=dom-innerHTML-XML&gt;&lt;a
+     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set on an
+     element, the user agent must &lt;span&gt;feed the parser&lt;/span&gt; the string
+     corresponding to the end tag of that element.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the parser found a well-formedness error, the attribute's setter
+     must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;The user agent must remove the children nodes of the node whose &lt;code
+     title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+     attribute is being set.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node, let
+     &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the document,
+     preserving their order. Otherwise, the attribute is being set on an
+     &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the
+     children of the document's root element, preserving their order.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node, let
+     &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be that &lt;code&gt;Document&lt;/code&gt; node.
+     Otherwise, the attribute is being set on an &lt;code&gt;Element&lt;/code&gt; node;
+     let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
+     title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of that &lt;code&gt;Element&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in &lt;var
+     title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the node
+     whose &lt;code title=dom-innerHTML-XML&gt;&lt;a
+     href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set,
+     preserving their order.&lt;/p&gt;
+  &lt;/ol&gt;
+
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+   using &lt;code title=dom-innerHTML-XML&gt;&lt;a
+   href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
+   inserted.
+
+  &lt;h2 id=semantics&gt;&lt;span class=secno&gt;4. &lt;/span&gt;The elements of HTML&lt;/h2&gt;
+
+  &lt;h3 id=the-root&gt;&lt;span class=secno&gt;4.1 &lt;/span&gt;The root element&lt;/h3&gt;
+
+  &lt;h4 id=the-html&gt;&lt;span class=secno&gt;4.1.1 &lt;/span&gt;The &lt;dfn
    id=html&gt;&lt;code&gt;html&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7311,9 +8348,9 @@
    href=&quot;#manifest&quot;&gt;manifest&lt;/a&gt;&lt;/code&gt; attributes, as the attributes are
    processed before those elements are seen.
 
-  &lt;h3 id=document&gt;&lt;span class=secno&gt;3.6 &lt;/span&gt;Document metadata&lt;/h3&gt;
+  &lt;h3 id=document&gt;&lt;span class=secno&gt;4.2 &lt;/span&gt;Document metadata&lt;/h3&gt;
 
-  &lt;h4 id=the-head&gt;&lt;span class=secno&gt;3.6.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-head&gt;&lt;span class=secno&gt;4.2.1 &lt;/span&gt;The &lt;dfn
    id=head&gt;&lt;code&gt;head&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7343,7 +8380,7 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element collects the
    document's metadata.
 
-  &lt;h4 id=the-title0&gt;&lt;span class=secno&gt;3.6.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-title0&gt;&lt;span class=secno&gt;4.2.2 &lt;/span&gt;The &lt;dfn
    id=title1&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7409,7 +8446,7 @@
    agents should use the document's title when referring to the document in
    their user interface.
 
-  &lt;h4 id=the-base&gt;&lt;span class=secno&gt;3.6.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-base&gt;&lt;span class=secno&gt;4.2.3 &lt;/span&gt;The &lt;dfn
    id=base&gt;&lt;code&gt;base&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7509,7 +8546,7 @@
    must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attributes of the same
    name.
 
-  &lt;h4 id=the-link&gt;&lt;span class=secno&gt;3.6.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-link&gt;&lt;span class=secno&gt;4.2.4 &lt;/span&gt;The &lt;dfn
    id=link&gt;&lt;code&gt;link&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7710,14 +8747,14 @@
    type.
 
   &lt;p id=concept-link-type-sniffing&gt;If the resource is expected to be an
-   image, user agents may apply the &lt;a href=&quot;#content-type6&quot;
+   image, user agents may apply the &lt;a href=&quot;#content-type8&quot;
    title=&quot;Content-Type sniffing: image&quot;&gt;image sniffing rules&lt;/a&gt;, with the
    &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; being the type determined from the
-   resource's &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type
+   resource's &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type
    metadata&lt;/a&gt;, and use the resulting sniffed type of the resource as if it
    was the actual type. Otherwise, if the resource is not expected to be an
    image, or if the user agent opts not to apply those rules, then the user
-   agent must use the resource's &lt;a href=&quot;#content-type8&quot;
+   agent must use the resource's &lt;a href=&quot;#content-type5&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt; to determine the type of the
    resource. If there is no type metadata, but the external resource link
    type has a default type defined, then the user agent must assume that the
@@ -7744,7 +8781,7 @@
     other type, it would not.&lt;/p&gt;
 
    &lt;p&gt;If one the two files was returned without a &lt;a
-    href=&quot;#content-type8&quot;&gt;Content-Type&lt;/a&gt; metadata, or with a syntactically
+    href=&quot;#content-type5&quot;&gt;Content-Type&lt;/a&gt; metadata, or with a syntactically
     incorrect type like &lt;code title=&quot;&quot;&gt;Content-Type:&nbsp;&quot;null&quot;&lt;/code&gt;, then
     the default type for &lt;code title=rel-stylesheet&gt;&lt;a
     href=&quot;#stylesheet&quot;&gt;stylesheet&lt;/a&gt;&lt;/code&gt; links would kick in. Since that
@@ -7814,7 +8851,7 @@
   &lt;!-- that is
   normatively required in the definition of dom-linkstyle-disabled --&gt;
 
-  &lt;h4 id=meta&gt;&lt;span class=secno&gt;3.6.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=meta&gt;&lt;span class=secno&gt;4.2.5 &lt;/span&gt;The &lt;dfn
    id=meta0&gt;&lt;code&gt;meta&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -7858,7 +8895,7 @@
    &lt;dd&gt;&lt;code title=attr-meta-http-equiv&gt;&lt;a
     href=&quot;#http-equiv0&quot;&gt;http-equiv&lt;/a&gt;&lt;/code&gt;
 
-   &lt;dd&gt;&lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+   &lt;dd&gt;&lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
 
    &lt;dd&gt;&lt;code title=attr-meta-charset&gt;&lt;a href=&quot;#charset1&quot;&gt;charset&lt;/a&gt;&lt;/code&gt;
     (&lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML&lt;/a&gt; only)
@@ -7868,7 +8905,7 @@
    &lt;dd&gt;
     &lt;pre
      class=idl&gt;interface &lt;dfn id=htmlmetaelement&gt;HTMLMetaElement&lt;/dfn&gt; : &lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt; {
-           attribute DOMString &lt;a href=&quot;#content1&quot; title=dom-meta-content&gt;content&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#content2&quot; title=dom-meta-content&gt;content&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#name0&quot; title=dom-meta-name&gt;name&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#httpequiv&quot; title=dom-meta-httpEquiv&gt;httpEquiv&lt;/a&gt;;
 };&lt;/pre&gt;
@@ -7899,7 +8936,7 @@
   &lt;p&gt;If either &lt;code title=attr-meta-name&gt;&lt;a href=&quot;#name&quot;&gt;name&lt;/a&gt;&lt;/code&gt; or
    &lt;code title=attr-meta-http-equiv&gt;&lt;a
    href=&quot;#http-equiv0&quot;&gt;http-equiv&lt;/a&gt;&lt;/code&gt; is specified, then the &lt;code
-   title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute
+   title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute
    must also be specified. Otherwise, it must be omitted.
 
   &lt;p&gt;The &lt;dfn id=charset1 title=attr-meta-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt;
@@ -7914,7 +8951,7 @@
    must be the first element in &lt;a href=&quot;#the-head0&quot;&gt;the &lt;code&gt;head&lt;/code&gt;
    element&lt;/a&gt; of the file.
 
-  &lt;p&gt;The &lt;dfn id=content0 title=attr-meta-content&gt;&lt;code&gt;content&lt;/code&gt;&lt;/dfn&gt;
+  &lt;p&gt;The &lt;dfn id=content1 title=attr-meta-content&gt;&lt;code&gt;content&lt;/code&gt;&lt;/dfn&gt;
    attribute gives the value of the document metadata or pragma directive
    when the element is used for those purposes. The allowed values depend on
    the exact context, as described in subsequent sections of this
@@ -7925,12 +8962,12 @@
    metadata. Document metadata is expressed in terms of name/value pairs, the
    &lt;code title=attr-meta-name&gt;&lt;a href=&quot;#name&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute on
    the &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element giving the name, and
-   the &lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+   the &lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
    attribute on the same element giving the value. The name specifies what
    aspect of metadata is being set; valid names and the meaning of their
    values are described in the following sections. If a &lt;code&gt;&lt;a
    href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element has no &lt;code
-   title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute,
+   title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute,
    then the value part of the metadata name/value pair is the empty string.
 
   &lt;p&gt;If a &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element has the &lt;code
@@ -7945,7 +8982,7 @@
    element.
 
   &lt;p&gt;The DOM attributes &lt;dfn id=name0
-   title=dom-meta-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=content1
+   title=dom-meta-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=content2
    title=dom-meta-content&gt;&lt;code&gt;content&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the respective content attributes of the same
    name. The DOM attribute &lt;dfn id=httpequiv
@@ -7953,7 +8990,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute &lt;code
    title=attr-meta-http-equiv&gt;&lt;a href=&quot;#http-equiv0&quot;&gt;http-equiv&lt;/a&gt;&lt;/code&gt;.
 
-  &lt;h5 id=standard&gt;&lt;span class=secno&gt;3.6.5.1. &lt;/span&gt;Standard metadata names&lt;/h5&gt;
+  &lt;h5 id=standard&gt;&lt;span class=secno&gt;4.2.5.1. &lt;/span&gt;Standard metadata names&lt;/h5&gt;
 
   &lt;p&gt;This specification defines a few names for the &lt;code
    title=attr-meta-name&gt;&lt;a href=&quot;#name&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute of the
@@ -7989,7 +9026,7 @@
      pages.
   &lt;/dl&gt;
 
-  &lt;h5 id=other&gt;&lt;span class=secno&gt;3.6.5.2. &lt;/span&gt;Other metadata names&lt;/h5&gt;
+  &lt;h5 id=other&gt;&lt;span class=secno&gt;4.2.5.2. &lt;/span&gt;Other metadata names&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=extensions title=concept-meta-extensions&gt;Extensions to the
    predefined set of metadata names&lt;/dfn&gt; may be registered in the &lt;a
@@ -8073,7 +9110,7 @@
    href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; element, not the &lt;code&gt;&lt;a
    href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element.
 
-  &lt;h5 id=pragma&gt;&lt;span class=secno&gt;3.6.5.3. &lt;/span&gt;Pragma directives&lt;/h5&gt;
+  &lt;h5 id=pragma&gt;&lt;span class=secno&gt;4.2.5.3. &lt;/span&gt;Pragma directives&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;dfn id=http-equiv
    title=attr-meta-http-equiv&gt;&lt;code&gt;http-equiv&lt;/code&gt;&lt;/dfn&gt; attribute is
@@ -8191,7 +9228,7 @@
     &lt;p&gt;For &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements in the &lt;a
      href=&quot;#encoding&quot; title=attr-meta-http-equiv-content-type&gt;Encoding
      declaration state&lt;/a&gt;, the &lt;code title=attr-meta-content&gt;&lt;a
-     href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute must have a value that is
+     href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute must have a value that is
      a case-insensitive&lt;!-- ASCII
     XXX--&gt; match of a string that consists
      of the literal string &quot;&lt;code title=&quot;&quot;&gt;text/html;&lt;/code&gt;&quot;, optionally
@@ -8238,13 +9275,13 @@
 
      &lt;li&gt;
       &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element has no &lt;code
-       title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+       title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
        attribute, or if that attribute's value is the empty string, then
        abort these steps.
 
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the value of the element's &lt;code
-       title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+       title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
        attribute.
 
      &lt;li&gt;
@@ -8331,7 +9368,7 @@
 
      &lt;li&gt;
       &lt;p&gt;Resolve the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; value to an absolute URI using
-       &lt;a href=&quot;#elements2&quot; title=&quot;element's base URI&quot;&gt;the base URI&lt;/a&gt; of
+       &lt;a href=&quot;#elements3&quot; title=&quot;element's base URI&quot;&gt;the base URI&lt;/a&gt; of
        the &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element.
 
      &lt;li&gt;
@@ -8364,7 +9401,7 @@
 
     &lt;p&gt;For &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements in the &lt;a
      href=&quot;#refresh&quot; title=attr-meta-http-equiv-refresh&gt;Refresh state&lt;/a&gt;,
-     the &lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content0&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
+     the &lt;code title=attr-meta-content&gt;&lt;a href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt;
      attribute must have a value consisting either of:
 
     &lt;ul&gt;
@@ -8390,7 +9427,7 @@
   &lt;p&gt;There must not be more than one &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt;
    element with any particular state in the document at a time.
 
-  &lt;h5 id=charset&gt;&lt;span class=secno&gt;3.6.5.4. &lt;/span&gt;Specifying the document's
+  &lt;h5 id=charset&gt;&lt;span class=secno&gt;4.2.5.4. &lt;/span&gt;Specifying the document's
    character encoding&lt;/h5&gt;
   &lt;!-- XXX maybe the rest should move to &quot;writing html&quot; section,
   though if we do then we have to duplicate the requirements in the
@@ -8417,7 +9454,7 @@
   &lt;/ul&gt;
 
   &lt;p&gt;If the document does not start with a BOM, and if its encoding is not
-   explicitly given by &lt;a href=&quot;#content-type8&quot;
+   explicitly given by &lt;a href=&quot;#content-type5&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt;, then the character encoding
    used must be an &lt;a href=&quot;#ascii-compatible&quot;&gt;ASCII-compatible character
    encoding&lt;/a&gt;, and, in addition, if that encoding isn't US-ASCII itself,
@@ -8457,7 +9494,7 @@
   &lt;p&gt;In XHTML, the XML declaration should be used for inline character
    encoding information, if necessary.
 
-  &lt;h4 id=the-style0&gt;&lt;span class=secno&gt;3.6.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-style0&gt;&lt;span class=secno&gt;4.2.6 &lt;/span&gt;The &lt;dfn
    id=style1&gt;&lt;code&gt;style&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8603,7 +9640,7 @@
    defined &lt;a href=&quot;#disabled1&quot; title=dom-linkstyle-disabled&gt;for the
    alternative style sheets DOM&lt;/a&gt;.
 
-  &lt;h4 id=styling&gt;&lt;span class=secno&gt;3.6.7 &lt;/span&gt;&lt;dfn id=styling0
+  &lt;h4 id=styling&gt;&lt;span class=secno&gt;4.2.7 &lt;/span&gt;&lt;dfn id=styling0
    title=&quot;styling processing model&quot;&gt;Styling&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
@@ -8645,7 +9682,7 @@
      the &lt;code title=attr-style-type&gt;&lt;a href=&quot;#type1&quot;&gt;type&lt;/a&gt;&lt;/code&gt; content
      attribute's value, or &lt;code title=&quot;&quot;&gt;text/css&lt;/code&gt; if that is omitted.
      For &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; elements, this is the &lt;a
-     href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type metadata of the
+     href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type metadata of the
      specified resource&lt;/a&gt;.
 
    &lt;dt&gt;The location (&lt;code title=dom-stylesheet-href&gt;href&lt;/code&gt; DOM
@@ -8690,7 +9727,7 @@
   .styleSheets, HTTP Link: headers, and the stuff about the alternative
   stylesheet API.&lt;/p&gt; XXX that will all be covered by Anne's spec --&gt;
 
-  &lt;h3 id=sections&gt;&lt;span class=secno&gt;3.7 &lt;/span&gt;Sections&lt;/h3&gt;
+  &lt;h3 id=sections&gt;&lt;span class=secno&gt;4.3 &lt;/span&gt;Sections&lt;/h3&gt;
 
   &lt;p id=applyToSection&gt;Some elements, for example &lt;code&gt;&lt;a
    href=&quot;#address&quot;&gt;address&lt;/a&gt;&lt;/code&gt; elements, are scoped to their nearest
@@ -8701,7 +9738,7 @@
    href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; ancestor is &lt;var
    title=&quot;&quot;&gt;e&lt;/var&gt;.
 
-  &lt;h4 id=the-body&gt;&lt;span class=secno&gt;3.7.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-body&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;The &lt;dfn
    id=body0&gt;&lt;code&gt;body&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8744,7 +9781,7 @@
    element in the DOM, as per the definition of the term, and not any
    arbitrary &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element.
 
-  &lt;h4 id=the-section&gt;&lt;span class=secno&gt;3.7.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-section&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The &lt;dfn
    id=section&gt;&lt;code&gt;section&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8781,7 +9818,7 @@
    site's home page could be split into sections for an introduction, news
    items, contact information.
 
-  &lt;h4 id=the-nav&gt;&lt;span class=secno&gt;3.7.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-nav&gt;&lt;span class=secno&gt;4.3.3 &lt;/span&gt;The &lt;dfn
    id=nav&gt;&lt;code&gt;nav&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8849,7 +9886,7 @@
 &lt;/body&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-article&gt;&lt;span class=secno&gt;3.7.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-article&gt;&lt;span class=secno&gt;4.3.4 &lt;/span&gt;The &lt;dfn
    id=article&gt;&lt;code&gt;article&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8909,7 +9946,7 @@
    href=&quot;#address&quot;&gt;address&lt;/a&gt;&lt;/code&gt; element) does not apply to nested
    &lt;code&gt;&lt;a href=&quot;#article&quot;&gt;article&lt;/a&gt;&lt;/code&gt; elements.
 
-  &lt;h4 id=the-aside&gt;&lt;span class=secno&gt;3.7.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-aside&gt;&lt;span class=secno&gt;4.3.5 &lt;/span&gt;The &lt;dfn
    id=aside&gt;&lt;code&gt;aside&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -8979,7 +10016,7 @@
 ...&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-h1&gt;&lt;span class=secno&gt;3.7.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-h1&gt;&lt;span class=secno&gt;4.3.6 &lt;/span&gt;The &lt;dfn
    id=h1&gt;&lt;code&gt;h1&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=h2&gt;&lt;code&gt;h2&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
    id=h3&gt;&lt;code&gt;h3&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=h4&gt;&lt;code&gt;h4&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
    id=h5&gt;&lt;code&gt;h5&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=h6&gt;&lt;code&gt;h6&lt;/code&gt;&lt;/dfn&gt; elements&lt;/h4&gt;
@@ -9018,7 +10055,7 @@
    the highest rank, the &lt;code&gt;&lt;a href=&quot;#h6&quot;&gt;h6&lt;/a&gt;&lt;/code&gt; element has the
    lowest rank, and two elements with the same name have equal rank.
 
-  &lt;h4 id=the-header&gt;&lt;span class=secno&gt;3.7.7 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-header&gt;&lt;span class=secno&gt;4.3.7 &lt;/span&gt;The &lt;dfn
    id=header&gt;&lt;code&gt;header&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9117,7 +10154,7 @@
 &lt;/header&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-footer&gt;&lt;span class=secno&gt;3.7.8 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-footer&gt;&lt;span class=secno&gt;4.3.8 &lt;/span&gt;The &lt;dfn
    id=footer&gt;&lt;code&gt;footer&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9175,7 +10212,7 @@
 &lt;/body&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-address&gt;&lt;span class=secno&gt;3.7.9 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-address&gt;&lt;span class=secno&gt;4.3.9 &lt;/span&gt;The &lt;dfn
    id=address&gt;&lt;code&gt;address&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9258,7 +10295,7 @@
    element, does not apply to its ancestor elements, e.g. the page's &lt;code&gt;&lt;a
    href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt;.
 
-  &lt;h4 id=headings&gt;&lt;span class=secno&gt;3.7.10 &lt;/span&gt;&lt;dfn id=headings0&gt;Headings
+  &lt;h4 id=headings&gt;&lt;span class=secno&gt;4.3.10 &lt;/span&gt;&lt;dfn id=headings0&gt;Headings
    and sections&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#h1&quot;&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a
@@ -9370,7 +10407,7 @@
     produce the same outline in compliant user agents.&lt;/p&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=outlines&gt;&lt;span class=secno&gt;3.7.10.1. &lt;/span&gt;Creating an outline&lt;/h5&gt;
+  &lt;h5 id=outlines&gt;&lt;span class=secno&gt;4.3.10.1. &lt;/span&gt;Creating an outline&lt;/h5&gt;
 
   &lt;p&gt;This section defines an algorithm for creating an outline for a &lt;a
    href=&quot;#sectioning0&quot;&gt;sectioning content&lt;/a&gt; element or a &lt;a
@@ -9705,7 +10742,7 @@
 }&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=distinguishing&gt;&lt;span class=secno&gt;3.7.10.2. &lt;/span&gt;Distinguishing
+  &lt;h5 id=distinguishing&gt;&lt;span class=secno&gt;4.3.10.2. &lt;/span&gt;Distinguishing
    site-wide headings from page headings&lt;/h5&gt;
 
   &lt;p&gt;Given the &lt;a href=&quot;#outline&quot;&gt;outline&lt;/a&gt; of a document, but ignoring any
@@ -9748,10 +10785,10 @@
    original single page becomes the heading of the site, repeated on every
    page.
 
-  &lt;h3 id=grouping&gt;&lt;span class=secno&gt;3.8 &lt;/span&gt;Grouping content&lt;/h3&gt;
+  &lt;h3 id=grouping&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Grouping content&lt;/h3&gt;
   &lt;!-- XXX ew, find a better section name --&gt;
 
-  &lt;h4 id=the-p&gt;&lt;span class=secno&gt;3.8.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-p&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;The &lt;dfn
    id=p&gt;&lt;code&gt;p&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9833,7 +10870,7 @@
 &lt;/section&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-hr&gt;&lt;span class=secno&gt;3.8.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-hr&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;The &lt;dfn
    id=hr&gt;&lt;code&gt;hr&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9863,7 +10900,7 @@
    in a story, or a transition to another topic within a section of a
    reference book.
 
-  &lt;h4 id=the-br&gt;&lt;span class=secno&gt;3.8.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-br&gt;&lt;span class=secno&gt;4.4.3 &lt;/span&gt;The &lt;dfn
    id=br&gt;&lt;code&gt;br&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -9938,7 +10975,7 @@
   content shouldn't go over the wire, though. We need to make it
   illegal while still defining what it means. Maybe. --&gt;
 
-  &lt;h4 id=the-pre&gt;&lt;span class=secno&gt;3.8.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-pre&gt;&lt;span class=secno&gt;4.4.4 &lt;/span&gt;The &lt;dfn
    id=pre&gt;&lt;code&gt;pre&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10044,7 +11081,7 @@
 ~cdr 11dec07&lt;/pre&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-dialog&gt;&lt;span class=secno&gt;3.8.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-dialog&gt;&lt;span class=secno&gt;4.4.5 &lt;/span&gt;The &lt;dfn
    id=dialog&gt;&lt;code&gt;dialog&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10111,7 +11148,7 @@
    and &lt;code&gt;&lt;a href=&quot;#blockquote&quot;&gt;blockquote&lt;/a&gt;&lt;/code&gt; elements for other
    ways to cite or quote.
 
-  &lt;h4 id=the-blockquote&gt;&lt;span class=secno&gt;3.8.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-blockquote&gt;&lt;span class=secno&gt;4.4.6 &lt;/span&gt;The &lt;dfn
    id=blockquote&gt;&lt;code&gt;blockquote&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10179,7 +11216,7 @@
    href=&quot;#blockquote&quot;&gt;blockquote&lt;/a&gt;&lt;/code&gt; elements, but with the &lt;code&gt;&lt;a
    href=&quot;#dialog&quot;&gt;dialog&lt;/a&gt;&lt;/code&gt; element.
 
-  &lt;h4 id=the-ol&gt;&lt;span class=secno&gt;3.8.7 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-ol&gt;&lt;span class=secno&gt;4.4.7 &lt;/span&gt;The &lt;dfn
    id=ol&gt;&lt;code&gt;ol&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10295,7 +11332,7 @@
 &lt;/ol&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-ul&gt;&lt;span class=secno&gt;3.8.8 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-ul&gt;&lt;span class=secno&gt;4.4.8 &lt;/span&gt;The &lt;dfn
    id=ul&gt;&lt;code&gt;ul&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10361,7 +11398,7 @@
 &lt;/ul&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-li&gt;&lt;span class=secno&gt;3.8.9 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-li&gt;&lt;span class=secno&gt;4.4.9 &lt;/span&gt;The &lt;dfn
    id=li&gt;&lt;code&gt;li&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10475,7 +11512,7 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-dl&gt;&lt;span class=secno&gt;3.8.10 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-dl&gt;&lt;span class=secno&gt;4.4.10 &lt;/span&gt;The &lt;dfn
    id=dl&gt;&lt;code&gt;dl&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10636,7 +11673,7 @@
    speaker/line pair comes after the next). For an example of how to mark up
    dialogue, see the &lt;code&gt;&lt;a href=&quot;#dialog&quot;&gt;dialog&lt;/a&gt;&lt;/code&gt; element.
 
-  &lt;h4 id=the-dt&gt;&lt;span class=secno&gt;3.8.11 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-dt&gt;&lt;span class=secno&gt;4.4.11 &lt;/span&gt;The &lt;dfn
    id=dt&gt;&lt;code&gt;dt&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10700,7 +11737,7 @@
 &lt;/dialog&gt;&lt;/pre&gt;
    &lt;!-- with thanks to <A HREF="http://bash.org/?854262">http://bash.org/?854262</A> --&gt;&lt;/div&gt;
 
-  &lt;h4 id=the-dd&gt;&lt;span class=secno&gt;3.8.12 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-dd&gt;&lt;span class=secno&gt;4.4.12 &lt;/span&gt;The &lt;dfn
    id=dd&gt;&lt;code&gt;dd&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10736,10 +11773,10 @@
    discourse, or quote, part in a conversation (&lt;code&gt;&lt;a
    href=&quot;#dialog&quot;&gt;dialog&lt;/a&gt;&lt;/code&gt; element).
 
-  &lt;h3 id=text-level&gt;&lt;span class=secno&gt;3.9 &lt;/span&gt;Text-level semantics&lt;/h3&gt;
+  &lt;h3 id=text-level&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;Text-level semantics&lt;/h3&gt;
   &lt;!-- XXX ew, find a better section name --&gt;
 
-  &lt;h4 id=the-a&gt;&lt;span class=secno&gt;3.9.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-a&gt;&lt;span class=secno&gt;4.5.1 &lt;/span&gt;The &lt;dfn
    id=a&gt;&lt;code&gt;a&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10912,7 +11949,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-hyperlink-rel&gt;&lt;a
    href=&quot;#rel3&quot;&gt;rel&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-q&gt;&lt;span class=secno&gt;3.9.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-q&gt;&lt;span class=secno&gt;4.5.2 &lt;/span&gt;The &lt;dfn
    id=q&gt;&lt;code&gt;q&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -10995,7 +12032,7 @@
    &lt;pre&gt;&lt;p&gt;His best argument: &lt;q&gt;I disagree!&lt;/q&gt;&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-cite&gt;&lt;span class=secno&gt;3.9.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-cite&gt;&lt;span class=secno&gt;4.5.3 &lt;/span&gt;The &lt;dfn
    id=cite2&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11121,7 +12158,7 @@
   ...&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-em&gt;&lt;span class=secno&gt;3.9.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-em&gt;&lt;span class=secno&gt;4.5.4 &lt;/span&gt;The &lt;dfn
    id=em&gt;&lt;code&gt;em&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11200,7 +12237,7 @@
 
   --&gt;
 
-  &lt;h4 id=the-strong&gt;&lt;span class=secno&gt;3.9.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-strong&gt;&lt;span class=secno&gt;4.5.5 &lt;/span&gt;The &lt;dfn
    id=strong&gt;&lt;code&gt;strong&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11248,7 +12285,7 @@
 ten meters.&lt;/strong&gt;&lt;/strong&gt; You have been warned.&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-small&gt;&lt;span class=secno&gt;3.9.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-small&gt;&lt;span class=secno&gt;4.5.6 &lt;/span&gt;The &lt;dfn
    id=small&gt;&lt;code&gt;small&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11308,7 +12345,7 @@
    &lt;pre&gt;&lt;p&gt;&lt;strong&gt;&lt;small&gt;Continued use of this service will result in a kiss.&lt;/small&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-mark&gt;&lt;span class=secno&gt;3.9.7 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-mark&gt;&lt;span class=secno&gt;4.5.7 &lt;/span&gt;The &lt;dfn
    id=mark&gt;&lt;code&gt;mark&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11455,7 +12492,7 @@
 wormhole connection.&lt;/mark&gt;&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-dfn&gt;&lt;span class=secno&gt;3.9.8 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-dfn&gt;&lt;span class=secno&gt;4.5.8 &lt;/span&gt;The &lt;dfn
    id=dfn&gt;&lt;code&gt;dfn&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11552,7 +12589,7 @@
 - mpt
 --&gt;
 
-  &lt;h4 id=the-abbr&gt;&lt;span class=secno&gt;3.9.9 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-abbr&gt;&lt;span class=secno&gt;4.5.9 &lt;/span&gt;The &lt;dfn
    id=abbr&gt;&lt;code&gt;abbr&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11644,7 +12681,7 @@
 &lt;abbr&gt;HTMLWG&lt;/abbr&gt;.&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-time&gt;&lt;span class=secno&gt;3.9.10 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-time&gt;&lt;span class=secno&gt;4.5.10 &lt;/span&gt;The &lt;dfn
    id=time&gt;&lt;code&gt;time&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11794,7 +12831,7 @@
    for marking event dates in hCalendar markup. Thus the DOM APIs are likely
    to be used as ways to generate interactive calendar widgets or some such.
 
-  &lt;h4 id=the-progress&gt;&lt;span class=secno&gt;3.9.11 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-progress&gt;&lt;span class=secno&gt;4.5.11 &lt;/span&gt;The &lt;dfn
    id=progress&gt;&lt;code&gt;progress&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -11986,7 +13023,7 @@
    attribute must return &amp;#x2212;1. Otherwise, it must return the result of
    dividing the current value by the maximum value.
 
-  &lt;h4 id=the-meter&gt;&lt;span class=secno&gt;3.9.12 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-meter&gt;&lt;span class=secno&gt;4.5.12 &lt;/span&gt;The &lt;dfn
    id=meter&gt;&lt;code&gt;meter&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
   &lt;!-- Keep this after &lt;progress&gt; and NOT close to &lt;time&gt; --&gt;
 
@@ -12383,7 +13420,7 @@
 should we make the contents accessible in some way, e.g. as a tooltip?
 --&gt;
 
-  &lt;h4 id=the-code&gt;&lt;span class=secno&gt;3.9.13 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-code&gt;&lt;span class=secno&gt;4.5.13 &lt;/span&gt;The &lt;dfn
    id=code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12450,7 +13487,7 @@
   &lt;p class=note&gt;See the &lt;code&gt;&lt;a href=&quot;#pre&quot;&gt;pre&lt;/a&gt;&lt;/code&gt; element for more
    details.
 
-  &lt;h4 id=the-var&gt;&lt;span class=secno&gt;3.9.14 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-var&gt;&lt;span class=secno&gt;4.5.14 &lt;/span&gt;The &lt;dfn
    id=var&gt;&lt;code&gt;var&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12489,7 +13526,7 @@
 flavours of ice cream to be available for purchase!&lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-samp&gt;&lt;span class=secno&gt;3.9.15 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-samp&gt;&lt;span class=secno&gt;4.5.15 &lt;/span&gt;The &lt;dfn
    id=samp&gt;&lt;code&gt;samp&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12539,7 +13576,7 @@
 &lt;samp class=&quot;prompt&quot;&gt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">jdoe at demo</A>:~$&lt;/samp&gt; &lt;samp class=&quot;cursor&quot;&gt;_&lt;/samp&gt;&lt;/samp&gt;&lt;/pre&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-kbd&gt;&lt;span class=secno&gt;3.9.16 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-kbd&gt;&lt;span class=secno&gt;4.5.16 &lt;/span&gt;The &lt;dfn
    id=kbd&gt;&lt;code&gt;kbd&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12600,7 +13637,7 @@
 &lt;/p&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-sub&gt;&lt;span class=secno&gt;3.9.17 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-sub&gt;&lt;span class=secno&gt;4.5.17 &lt;/span&gt;The &lt;dfn
    id=sub&gt;&lt;code&gt;sub&lt;/code&gt;&lt;/dfn&gt; and &lt;dfn id=sup&gt;&lt;code&gt;sup&lt;/code&gt;&lt;/dfn&gt;
    elements&lt;/h4&gt;
 
@@ -12671,7 +13708,7 @@
    &lt;pre&gt;f(&lt;var&gt;x&lt;/var&gt;, &lt;var&gt;n&lt;/var&gt;) = log&lt;sub&gt;4&lt;/sub&gt;&lt;var&gt;x&lt;/var&gt;&lt;sup&gt;&lt;var&gt;n&lt;/var&gt;&lt;/sup&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-span&gt;&lt;span class=secno&gt;3.9.18 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-span&gt;&lt;span class=secno&gt;4.5.18 &lt;/span&gt;The &lt;dfn
    id=span&gt;&lt;code&gt;span&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12716,7 +13753,7 @@
   &lt;/div&gt;
 --&gt;
 
-  &lt;h4 id=the-i&gt;&lt;span class=secno&gt;3.9.19 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-i&gt;&lt;span class=secno&gt;4.5.19 &lt;/span&gt;The &lt;dfn
    id=i&gt;&lt;code&gt;i&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12795,7 +13832,7 @@
    restyled. Thus, it is not the case that content in &lt;code&gt;&lt;a
    href=&quot;#i&quot;&gt;i&lt;/a&gt;&lt;/code&gt; elements will necessarily be italicized.
 
-  &lt;h4 id=the-b&gt;&lt;span class=secno&gt;3.9.20 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-b&gt;&lt;span class=secno&gt;4.5.20 &lt;/span&gt;The &lt;dfn
    id=b&gt;&lt;code&gt;b&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12882,7 +13919,7 @@
    restyled. Thus, it is not the case that content in &lt;code&gt;&lt;a
    href=&quot;#b&quot;&gt;b&lt;/a&gt;&lt;/code&gt; elements will necessarily be boldened.
 
-  &lt;h4 id=the-bdo&gt;&lt;span class=secno&gt;3.9.21 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-bdo&gt;&lt;span class=secno&gt;4.5.21 &lt;/span&gt;The &lt;dfn
    id=bdo&gt;&lt;code&gt;bdo&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12938,7 +13975,7 @@
    &lt;a href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;&lt;/p&gt;
   &lt;!-- XXX need examples --&gt;
 
-  &lt;h4 id=the-ruby&gt;&lt;span class=secno&gt;3.9.22 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-ruby&gt;&lt;span class=secno&gt;4.5.22 &lt;/span&gt;The &lt;dfn
    id=ruby&gt;&lt;code&gt;ruby&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -12994,7 +14031,7 @@
     rendered in a smaller font above it.&quot; src=&quot;images/sample-ruby.png&quot;&gt;&lt;/p&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-rt&gt;&lt;span class=secno&gt;3.9.23 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-rt&gt;&lt;span class=secno&gt;4.5.23 &lt;/span&gt;The &lt;dfn
    id=rt&gt;&lt;code&gt;rt&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -13032,7 +14069,7 @@
    &lt;code&gt;&lt;a href=&quot;#ruby&quot;&gt;ruby&lt;/a&gt;&lt;/code&gt; element represents the same thing as
    its children.
 
-  &lt;h4 id=the-rp&gt;&lt;span class=secno&gt;3.9.24 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-rp&gt;&lt;span class=secno&gt;4.5.24 &lt;/span&gt;The &lt;dfn
    id=rp&gt;&lt;code&gt;rp&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -13095,14 +14132,14 @@
     lang=ja&gt;... &amp;#x658e; (&amp;#x3055;&amp;#x3044;) &amp;#x85e4; (&amp;#x3068;&amp;#x3046;) &amp;#x4fe1; (&amp;#x306e;&amp;#x3076;) &amp;#x7537; (&amp;#x304a;) ...&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=usage&gt;&lt;span class=secno&gt;3.9.25 &lt;/span&gt;Usage summary&lt;/h4&gt;
+  &lt;h4 id=usage&gt;&lt;span class=secno&gt;4.5.25 &lt;/span&gt;Usage summary&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;We need to summarize the various elements, in particular
    to distinguish b/i/em/strong/var/q/mark/cite.&lt;/p&gt;
   &lt;!-- XXX when you do this, also reorder the elements in this section
   to bring the related ones closer together. --&gt;
 
-  &lt;h4 id=footnotes&gt;&lt;span class=secno&gt;3.9.26 &lt;/span&gt;Footnotes&lt;/h4&gt;
+  &lt;h4 id=footnotes&gt;&lt;span class=secno&gt;4.5.26 &lt;/span&gt;Footnotes&lt;/h4&gt;
 
   &lt;p&gt;HTML does not have a dedicated mechanism for marking up footnotes. Here
    are the recommended alternatives.
@@ -13183,12 +14220,12 @@
 &lt;/aside&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h3 id=edits&gt;&lt;span class=secno&gt;3.10 &lt;/span&gt;Edits&lt;/h3&gt;
+  &lt;h3 id=edits&gt;&lt;span class=secno&gt;4.6 &lt;/span&gt;Edits&lt;/h3&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements represent edits to the document.
 
-  &lt;h4 id=the-ins&gt;&lt;span class=secno&gt;3.10.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-ins&gt;&lt;span class=secno&gt;4.6.1 &lt;/span&gt;The &lt;dfn
    id=ins&gt;&lt;code&gt;ins&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -13287,7 +14324,7 @@
    something. Can you guess what? --&gt;
    &lt;/div&gt;
 
-  &lt;h4 id=the-del&gt;&lt;span class=secno&gt;3.10.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-del&gt;&lt;span class=secno&gt;4.6.2 &lt;/span&gt;The &lt;dfn
    id=del&gt;&lt;code&gt;del&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -13328,7 +14365,7 @@
   &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements should not cross &lt;a
    href=&quot;#paragraph&quot; title=paragraph&gt;implied paragraph&lt;/a&gt; boundaries.
 
-  &lt;h4 id=attributes&gt;&lt;span class=secno&gt;3.10.3 &lt;/span&gt;Attributes common to
+  &lt;h4 id=attributes&gt;&lt;span class=secno&gt;4.6.3 &lt;/span&gt;Attributes common to
    &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements&lt;/h4&gt;
 
@@ -13377,7 +14414,7 @@
    DOM attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the element's &lt;code
    title=&quot;&quot;&gt;datetime&lt;/code&gt; content attribute.
 
-  &lt;h4 id=edits0&gt;&lt;span class=secno&gt;3.10.4 &lt;/span&gt;Edits and paragraphs&lt;/h4&gt;
+  &lt;h4 id=edits0&gt;&lt;span class=secno&gt;4.6.4 &lt;/span&gt;Edits and paragraphs&lt;/h4&gt;
 
   &lt;p&gt;Since the &lt;code&gt;&lt;a href=&quot;#ins&quot;&gt;ins&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#del&quot;&gt;del&lt;/a&gt;&lt;/code&gt; elements do not affect &lt;a href=&quot;#paragraph&quot;
@@ -13440,7 +14477,7 @@
    that cross across any &lt;a href=&quot;#paragraph&quot; title=paragraph&gt;implied
    paragraphs&lt;/a&gt;.
 
-  &lt;h4 id=edits1&gt;&lt;span class=secno&gt;3.10.5 &lt;/span&gt;Edits and lists&lt;/h4&gt;
+  &lt;h4 id=edits1&gt;&lt;span class=secno&gt;4.6.5 &lt;/span&gt;Edits and lists&lt;/h4&gt;
 
   &lt;p&gt;The content models of the &lt;code&gt;&lt;a href=&quot;#ol&quot;&gt;ol&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#ul&quot;&gt;ul&lt;/a&gt;&lt;/code&gt; elements do not allow &lt;code&gt;&lt;a
@@ -13493,9 +14530,9 @@
 &lt;/ul&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h3 id=embedded0&gt;&lt;span class=secno&gt;3.11 &lt;/span&gt;Embedded content&lt;/h3&gt;
+  &lt;h3 id=embedded0&gt;&lt;span class=secno&gt;4.7 &lt;/span&gt;Embedded content&lt;/h3&gt;
 
-  &lt;h4 id=the-figure&gt;&lt;span class=secno&gt;3.11.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-figure&gt;&lt;span class=secno&gt;4.7.1 &lt;/span&gt;The &lt;dfn
    id=figure&gt;&lt;code&gt;figure&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -13633,7 +14670,7 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-img&gt;&lt;span class=secno&gt;3.11.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-img&gt;&lt;span class=secno&gt;4.7.2 &lt;/span&gt;The &lt;dfn
    id=img&gt;&lt;code&gt;img&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -14137,7 +15174,7 @@
    the &lt;code&gt;&lt;a href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; element.
 
   &lt;p&gt;The remote server's response metadata (e.g. an HTTP 404 status code, or
-   &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;associated Content-Type
+   &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;associated Content-Type
    headers&lt;/a&gt;) must be ignored when determining whether the resource
    obtained is a valid image or not.
 
@@ -14281,7 +15318,7 @@
 &lt;/article&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-iframe&gt;&lt;span class=secno&gt;3.11.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-iframe&gt;&lt;span class=secno&gt;4.7.3 &lt;/span&gt;The &lt;dfn
    id=iframe&gt;&lt;code&gt;iframe&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -14710,7 +15747,7 @@
    title=dom-iframe-seamless&gt;&lt;code&gt;seamless&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attributes of the same name.
 
-  &lt;h4 id=the-embed&gt;&lt;span class=secno&gt;3.11.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-embed&gt;&lt;span class=secno&gt;4.7.4 &lt;/span&gt;The &lt;dfn
    id=embed&gt;&lt;code&gt;embed&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -14825,7 +15862,7 @@
     title=attr-embed-type&gt;&lt;a href=&quot;#type4&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute is the
     &lt;span&gt;content's type&lt;/span&gt;.
 
-   &lt;li&gt;Otherwise, if the specified resource has &lt;a href=&quot;#content-type8&quot;
+   &lt;li&gt;Otherwise, if the specified resource has &lt;a href=&quot;#content-type5&quot;
     title=Content-Type&gt;explicit Content-Type metadata&lt;/a&gt;, then that is the
     &lt;span&gt;content's type&lt;/span&gt;.
 
@@ -14851,7 +15888,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the respective content attributes of the same
    name.
 
-  &lt;h4 id=the-object&gt;&lt;span class=secno&gt;3.11.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-object&gt;&lt;span class=secno&gt;4.7.5 &lt;/span&gt;The &lt;dfn
    id=object&gt;&lt;code&gt;object&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -15012,10 +16049,10 @@
         &lt;p&gt;Let the &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; be unknown.&lt;/p&gt;
 
        &lt;li&gt;
-        &lt;p&gt;If the resource has &lt;a href=&quot;#content-type8&quot;
+        &lt;p&gt;If the resource has &lt;a href=&quot;#content-type5&quot;
          title=Content-Type&gt;associated Content-Type metadata&lt;/a&gt;, then let
          the &lt;var title=&quot;&quot;&gt;resource type&lt;/var&gt; be the type specified in &lt;a
-         href=&quot;#content-type8&quot; title=Content-Type&gt;the resource's Content-Type
+         href=&quot;#content-type5&quot; title=Content-Type&gt;the resource's Content-Type
          metadata&lt;/a&gt;.&lt;/p&gt;
 
        &lt;li&gt;
@@ -15087,7 +16124,7 @@
         &quot;&lt;code&gt;image/&lt;/code&gt;&quot;, and support for images has not been disabled
 
        &lt;dd&gt;
-        &lt;p&gt;Apply the &lt;a href=&quot;#content-type6&quot; title=&quot;content-type sniffing:
+        &lt;p&gt;Apply the &lt;a href=&quot;#content-type8&quot; title=&quot;content-type sniffing:
          image&quot;&gt;image sniffing&lt;/a&gt; rules to determine the type of the image.&lt;/p&gt;
 
         &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element represents
@@ -15219,7 +16256,7 @@
 &lt;/figure&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-param&gt;&lt;span class=secno&gt;3.11.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-param&gt;&lt;span class=secno&gt;4.7.6 &lt;/span&gt;The &lt;dfn
    id=param&gt;&lt;code&gt;param&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -15275,7 +16312,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the respective content attributes of the same
    name.
 
-  &lt;h4 id=video&gt;&lt;span class=secno&gt;3.11.7 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=video&gt;&lt;span class=secno&gt;4.7.7 &lt;/span&gt;The &lt;dfn
    id=video1&gt;&lt;code&gt;video&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -15554,7 +16591,7 @@
    experience. So far, browsers seem to be making the controls overlay-only,
    thus somewhat sidestepping the issue.
 
-  &lt;h5 id=video0&gt;&lt;span class=secno&gt;3.11.7.1. &lt;/span&gt;Video and audio codecs for
+  &lt;h5 id=video0&gt;&lt;span class=secno&gt;4.7.7.1. &lt;/span&gt;Video and audio codecs for
    &lt;code&gt;&lt;a href=&quot;#video1&quot;&gt;video&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
 
   &lt;p&gt;User agents may support any video and audio codecs and container
@@ -15574,7 +16611,7 @@
   &lt;p class=note&gt;Certain user agents might support no codecs at all, e.g. text
    browsers running over SSH connections.
 
-  &lt;h4 id=audio&gt;&lt;span class=secno&gt;3.11.8 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=audio&gt;&lt;span class=secno&gt;4.7.8 &lt;/span&gt;The &lt;dfn
    id=audio1&gt;&lt;code&gt;audio&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -15670,7 +16707,7 @@
    href=&quot;#actively&quot;&gt;actively playing&lt;/a&gt;, audio must not play for the
    element.
 
-  &lt;h5 id=audio0&gt;&lt;span class=secno&gt;3.11.8.1. &lt;/span&gt;Audio codecs for &lt;code&gt;&lt;a
+  &lt;h5 id=audio0&gt;&lt;span class=secno&gt;4.7.8.1. &lt;/span&gt;Audio codecs for &lt;code&gt;&lt;a
    href=&quot;#audio1&quot;&gt;audio&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
 
   &lt;p&gt;User agents may support any audio codecs and container formats.
@@ -15680,7 +16717,7 @@
   &lt;!-- XXX mention that this spec doesn't require native support or
   plugin support, either is fine --&gt;
 
-  &lt;h4 id=the-source&gt;&lt;span class=secno&gt;3.11.9 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-source&gt;&lt;span class=secno&gt;4.7.9 &lt;/span&gt;The &lt;dfn
    id=source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -15909,7 +16946,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-source-pixelratio&gt;&lt;a
    href=&quot;#pixelratio&quot;&gt;pixelratio&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=media&gt;&lt;span class=secno&gt;3.11.10 &lt;/span&gt;Media elements&lt;/h4&gt;
+  &lt;h4 id=media&gt;&lt;span class=secno&gt;4.7.10 &lt;/span&gt;Media elements&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=media7 title=&quot;media element&quot;&gt;Media elements&lt;/dfn&gt; implement the
    following interface:
@@ -16026,7 +17063,7 @@
    resource&lt;/dfn&gt; is used to refer to the complete set of media data, e.g.
    the complete video file, or complete audio file.
 
-  &lt;h5 id=error&gt;&lt;span class=secno&gt;3.11.10.1. &lt;/span&gt;Error codes&lt;/h5&gt;
+  &lt;h5 id=error&gt;&lt;span class=secno&gt;4.7.10.1. &lt;/span&gt;Error codes&lt;/h5&gt;
 
   &lt;p&gt;All &lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;media elements&lt;/a&gt; have an
    associated error status, which records the last error the element
@@ -16070,7 +17107,7 @@
     href=&quot;#media10&quot;&gt;media resource&lt;/a&gt;.
   &lt;/dl&gt;
 
-  &lt;h5 id=location&gt;&lt;span class=secno&gt;3.11.10.2. &lt;/span&gt;Location of the media
+  &lt;h5 id=location&gt;&lt;span class=secno&gt;4.7.10.2. &lt;/span&gt;Location of the media
    resource&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=src7 title=attr-media-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; content
@@ -16196,7 +17233,7 @@
    href=&quot;#empty&quot; title=dom-media-EMPTY&gt;EMPTY&lt;/a&gt;, and the address of the &lt;a
    href=&quot;#chosen&quot;&gt;chosen media resource&lt;/a&gt; otherwise.
 
-  &lt;h5 id=network0&gt;&lt;span class=secno&gt;3.11.10.3. &lt;/span&gt;Network states&lt;/h5&gt;
+  &lt;h5 id=network0&gt;&lt;span class=secno&gt;4.7.10.3. &lt;/span&gt;Network states&lt;/h5&gt;
 
   &lt;p&gt;As &lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;media elements&lt;/a&gt; interact
    with the network, they go through several states. The &lt;dfn id=networkstate
@@ -16250,7 +17287,7 @@
    the &lt;code title=dom-media-networkState&gt;&lt;a
    href=&quot;#networkstate&quot;&gt;networkState&lt;/a&gt;&lt;/code&gt; attribute changes value.
 
-  &lt;h5 id=loading&gt;&lt;span class=secno&gt;3.11.10.4. &lt;/span&gt;Loading the media
+  &lt;h5 id=loading&gt;&lt;span class=secno&gt;4.7.10.4. &lt;/span&gt;Loading the media
    resource&lt;/h5&gt;
 
   &lt;p&gt;All &lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;media elements&lt;/a&gt; have a
@@ -16692,7 +17729,7 @@
    end up being not included in the range(s) of objects returned by the same
    attributes at a later time.
 
-  &lt;h5 id=offsets&gt;&lt;span class=secno&gt;3.11.10.5. &lt;/span&gt;Offsets into the media
+  &lt;h5 id=offsets&gt;&lt;span class=secno&gt;4.7.10.5. &lt;/span&gt;Offsets into the media
    resource&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=duration
@@ -16812,7 +17849,7 @@
    &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-media-playcount&gt;&lt;a
    href=&quot;#playcount&quot;&gt;playcount&lt;/a&gt;&lt;/code&gt; content attribute on the &lt;a
    href=&quot;#media7&quot;&gt;media element&lt;/a&gt;. The value must be &lt;a
-   href=&quot;#limited1&quot;&gt;limited to only positive non-zero numbers&lt;/a&gt;.
+   href=&quot;#limited0&quot;&gt;limited to only positive non-zero numbers&lt;/a&gt;.
 
   &lt;p&gt;The &lt;dfn id=currentloop
    title=dom-media-currentLoop&gt;&lt;code&gt;currentLoop&lt;/code&gt;&lt;/dfn&gt; attribute must
@@ -16891,7 +17928,7 @@
      end.
   &lt;/ol&gt;
 
-  &lt;h5 id=the-ready&gt;&lt;span class=secno&gt;3.11.10.6. &lt;/span&gt;The ready states&lt;/h5&gt;
+  &lt;h5 id=the-ready&gt;&lt;span class=secno&gt;4.7.10.6. &lt;/span&gt;The ready states&lt;/h5&gt;
 
   &lt;p&gt;&lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a
    &lt;em&gt;ready state&lt;/em&gt;, which describes to what degree they are ready to be
@@ -17054,7 +18091,7 @@
    title=dom-media-autoplay&gt;&lt;code&gt;autoplay&lt;/code&gt;&lt;/dfn&gt; DOM attribute must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the same name.
 
-  &lt;h5 id=playing&gt;&lt;span class=secno&gt;3.11.10.7. &lt;/span&gt;Playing the media
+  &lt;h5 id=playing&gt;&lt;span class=secno&gt;4.7.10.7. &lt;/span&gt;Playing the media
    resource&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=paused title=dom-media-paused&gt;&lt;code&gt;paused&lt;/code&gt;&lt;/dfn&gt;
@@ -17369,7 +18406,7 @@
    href=&quot;#media10&quot;&gt;media resource&lt;/a&gt;, if any, that the user agent has so far
    rendered, at the time the attribute is evaluated.
 
-  &lt;h5 id=seeking&gt;&lt;span class=secno&gt;3.11.10.8. &lt;/span&gt;Seeking&lt;/h5&gt;
+  &lt;h5 id=seeking&gt;&lt;span class=secno&gt;4.7.10.8. &lt;/span&gt;Seeking&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=seeking0 title=dom-media-seeking&gt;&lt;code&gt;seeking&lt;/code&gt;&lt;/dfn&gt;
    attribute must initially have the value false.
@@ -17497,7 +18534,7 @@
    href=&quot;#duration&quot;&gt;duration&lt;/a&gt;&lt;/code&gt; attribute's value (which would equal
    the time of the last frame).
 
-  &lt;h5 id=cue-ranges&gt;&lt;span class=secno&gt;3.11.10.9. &lt;/span&gt;Cue ranges&lt;/h5&gt;
+  &lt;h5 id=cue-ranges&gt;&lt;span class=secno&gt;4.7.10.9. &lt;/span&gt;Cue ranges&lt;/h5&gt;
 
   &lt;p&gt;&lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;Media elements&lt;/a&gt; have a set of
    &lt;dfn id=cue-ranges0 title=&quot;cue range&quot;&gt;cue ranges&lt;/dfn&gt;. Each cue range is
@@ -17655,7 +18692,7 @@
    href=&quot;#voidcallback&quot;&gt;VoidCallback&lt;/a&gt;&lt;/code&gt; interface is the entry point
    for the callback represented by the object.
 
-  &lt;h5 id=user-interface&gt;&lt;span class=secno&gt;3.11.10.10. &lt;/span&gt;User interface&lt;/h5&gt;
+  &lt;h5 id=user-interface&gt;&lt;span class=secno&gt;4.7.10.10. &lt;/span&gt;User interface&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=controls
    title=attr-media-controls&gt;&lt;code&gt;controls&lt;/code&gt;&lt;/dfn&gt; attribute is a &lt;a
@@ -17721,7 +18758,7 @@
    title=event-volumechange&gt;&lt;a href=&quot;#volumechange&quot;&gt;volumechange&lt;/a&gt;&lt;/code&gt;
    at the &lt;a href=&quot;#media7&quot;&gt;media element&lt;/a&gt;.
 
-  &lt;h5 id=time-ranges&gt;&lt;span class=secno&gt;3.11.10.11. &lt;/span&gt;Time ranges&lt;/h5&gt;
+  &lt;h5 id=time-ranges&gt;&lt;span class=secno&gt;4.7.10.11. &lt;/span&gt;Time ranges&lt;/h5&gt;
 
   &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a
    href=&quot;#timeranges&quot;&gt;TimeRanges&lt;/a&gt;&lt;/code&gt; interface represent a list of
@@ -17773,7 +18810,7 @@
    of &lt;a href=&quot;#media7&quot; title=&quot;media element&quot;&gt;media elements&lt;/a&gt; must be the
    same as that element's &lt;a href=&quot;#media10&quot;&gt;media resource&lt;/a&gt;'s timeline.
 
-  &lt;h5 id=byte-ranges&gt;&lt;span class=secno&gt;3.11.10.12. &lt;/span&gt;Byte ranges&lt;/h5&gt;
+  &lt;h5 id=byte-ranges&gt;&lt;span class=secno&gt;4.7.10.12. &lt;/span&gt;Byte ranges&lt;/h5&gt;
 
   &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a
    href=&quot;#byteranges&quot;&gt;ByteRanges&lt;/a&gt;&lt;/code&gt; interface represent a list of
@@ -17822,7 +18859,7 @@
    aren't empty, and don't touch (adjacent ranges are folded into one bigger
    range).
 
-  &lt;h5 id=mediaevents&gt;&lt;span class=secno&gt;3.11.10.13. &lt;/span&gt;Event summary&lt;/h5&gt;
+  &lt;h5 id=mediaevents&gt;&lt;span class=secno&gt;4.7.10.13. &lt;/span&gt;Event summary&lt;/h5&gt;
 
   &lt;p&gt;The following events fire on &lt;a href=&quot;#media7&quot; title=&quot;media
    element&quot;&gt;media elements&lt;/a&gt; as part of the processing model described
@@ -18168,7 +19205,7 @@
      &lt;td&gt;
   &lt;/table&gt;
 
-  &lt;h5 id=security0&gt;&lt;span class=secno&gt;3.11.10.14. &lt;/span&gt;Security and privacy
+  &lt;h5 id=security0&gt;&lt;span class=secno&gt;4.7.10.14. &lt;/span&gt;Security and privacy
    considerations&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Talk about making sure interactive media files (e.g.
@@ -18176,7 +19213,7 @@
    not exposing any sensitive data like metadata from tracks in the media
    files (intranet snooping risk)
 
-  &lt;h4 id=the-canvas&gt;&lt;span class=secno&gt;3.11.11 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-canvas&gt;&lt;span class=secno&gt;4.7.11 &lt;/span&gt;The &lt;dfn
    id=canvas&gt;&lt;code&gt;canvas&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -18412,7 +19449,7 @@
    allow authors to more carefully control compression settings, image
    metadata, etc.
 
-  &lt;h5 id=the-2d&gt;&lt;span class=secno&gt;3.11.11.1. &lt;/span&gt;The 2D context&lt;/h5&gt;
+  &lt;h5 id=the-2d&gt;&lt;span class=secno&gt;4.7.11.1. &lt;/span&gt;The 2D context&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;code title=dom-canvas-getContext&gt;&lt;a
    href=&quot;#getcontext&quot;&gt;getContext()&lt;/a&gt;&lt;/code&gt; method of a &lt;code&gt;&lt;a
@@ -18585,7 +19622,7 @@
    value of the &lt;code title=&quot;&quot;&gt;currentColor&lt;/code&gt; keyword is fully opaque
    black. &lt;a href=&quot;#refsCSS3COLOR&quot;&gt;[CSS3COLOR]&lt;/a&gt;
 
-  &lt;h6 id=the-canvas0&gt;&lt;span class=secno&gt;3.11.11.1.1. &lt;/span&gt;The canvas state&lt;/h6&gt;
+  &lt;h6 id=the-canvas0&gt;&lt;span class=secno&gt;4.7.11.1.1. &lt;/span&gt;The canvas state&lt;/h6&gt;
 
   &lt;p&gt;Each context maintains a stack of drawing states. &lt;dfn id=drawing0
    title=&quot;drawing state&quot;&gt;Drawing states&lt;/dfn&gt; consist of:
@@ -18657,7 +19694,7 @@
 &gt; But how would it interact with normal calls to ctx.restore()?
   --&gt;
 
-  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;3.11.11.1.2. &lt;/span&gt;&lt;dfn
+  &lt;h6 id=transformations&gt;&lt;span class=secno&gt;4.7.11.1.2. &lt;/span&gt;&lt;dfn
    id=transformations0
    title=dom-context-2d-transformation&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
 
@@ -18740,7 +19777,7 @@
    title=&quot;&quot;&gt;dx&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;dy&lt;/var&gt;)&lt;/code&gt; method with the same
    arguments.
 
-  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;3.11.11.1.3. &lt;/span&gt;Compositing&lt;/h6&gt;
+  &lt;h6 id=compositing&gt;&lt;span class=secno&gt;4.7.11.1.3. &lt;/span&gt;Compositing&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the global compositing
    attributes, &lt;code title=dom-context-2d-globalAlpha&gt;&lt;a
@@ -18880,7 +19917,7 @@
    href=&quot;#globalcompositeoperation&quot;&gt;globalCompositeOperation&lt;/a&gt;&lt;/code&gt;
    attribute must initially have the value &lt;code&gt;source-over&lt;/code&gt;.
 
-  &lt;h6 id=colors&gt;&lt;span class=secno&gt;3.11.11.1.4. &lt;/span&gt;Colors and styles&lt;/h6&gt;
+  &lt;h6 id=colors&gt;&lt;span class=secno&gt;4.7.11.1.4. &lt;/span&gt;Colors and styles&lt;/h6&gt;
 
   &lt;p&gt;The &lt;dfn id=strokestyle
    title=dom-context-2d-strokeStyle&gt;&lt;code&gt;strokeStyle&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -19160,7 +20197,7 @@
       canvas then using that canvas as the pattern.
   --&gt;
 
-  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;3.11.11.1.5. &lt;/span&gt;Line styles&lt;/h6&gt;
+  &lt;h6 id=line-styles&gt;&lt;span class=secno&gt;4.7.11.1.5. &lt;/span&gt;Line styles&lt;/h6&gt;
 
   &lt;p&gt;The &lt;dfn id=linewidth
    title=dom-context-2d-lineWidth&gt;&lt;code&gt;lineWidth&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -19277,7 +20314,7 @@
 &gt; allowing whatever behavior the graphics library has.)
   --&gt;
 
-  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;3.11.11.1.6. &lt;/span&gt;&lt;dfn
+  &lt;h6 id=shadows&gt;&lt;span class=secno&gt;4.7.11.1.6. &lt;/span&gt;&lt;dfn
    id=shadows0&gt;Shadows&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;All drawing operations are affected by the four global shadow
@@ -19395,7 +20432,7 @@
      part of the drawing model described below.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;h6 id=simple&gt;&lt;span class=secno&gt;3.11.11.1.7. &lt;/span&gt;Simple shapes
+  &lt;h6 id=simple&gt;&lt;span class=secno&gt;4.7.11.1.7. &lt;/span&gt;Simple shapes
    (rectangles)&lt;/h6&gt;
 
   &lt;p&gt;There are three methods that immediately draw rectangles to the bitmap.
@@ -19456,7 +20493,7 @@
    will draw a line instead (the path for the outline is just a straight line
    along the non-zero dimension).
 
-  &lt;h6 id=complex&gt;&lt;span class=secno&gt;3.11.11.1.8. &lt;/span&gt;Complex shapes (paths)&lt;/h6&gt;
+  &lt;h6 id=complex&gt;&lt;span class=secno&gt;4.7.11.1.8. &lt;/span&gt;Complex shapes (paths)&lt;/h6&gt;
 
   &lt;p&gt;The context always has a current path. There is only one current path,
    it is not part of the &lt;span title=dom-context-2d-&gt;drawing state&lt;/span&gt;.
@@ -19721,7 +20758,7 @@
    If either of the arguments is infinite or NaN, then the method must return
    false.
 
-  &lt;h6 id=text&gt;&lt;span class=secno&gt;3.11.11.1.9. &lt;/span&gt;Text&lt;/h6&gt;
+  &lt;h6 id=text&gt;&lt;span class=secno&gt;4.7.11.1.9. &lt;/span&gt;Text&lt;/h6&gt;
   &lt;!-- a v3 feature --&gt;
 
   &lt;p&gt;The &lt;dfn id=font title=dom-context-2d-font&gt;&lt;code&gt;font&lt;/code&gt;&lt;/dfn&gt; DOM
@@ -20222,7 +21259,7 @@
    This would be provided in preference to a dedicated way of doing multiline
    layout.
 
-  &lt;h6 id=images&gt;&lt;span class=secno&gt;3.11.11.1.10. &lt;/span&gt;Images&lt;/h6&gt;
+  &lt;h6 id=images&gt;&lt;span class=secno&gt;4.7.11.1.10. &lt;/span&gt;Images&lt;/h6&gt;
 
   &lt;p&gt;To draw images onto the canvas, the &lt;dfn id=drawimage
    title=dom-context-2d-drawImage&gt;&lt;code&gt;drawImage&lt;/code&gt;&lt;/dfn&gt; method can be
@@ -20325,7 +21362,7 @@
   of the target element, not the rendered image (e.g. height/width
   attributes don't affect it --&gt;
 
-  &lt;h6 id=pixel&gt;&lt;span class=secno&gt;3.11.11.1.11. &lt;/span&gt;&lt;dfn id=pixel1&gt;Pixel
+  &lt;h6 id=pixel&gt;&lt;span class=secno&gt;4.7.11.1.11. &lt;/span&gt;&lt;dfn id=pixel1&gt;Pixel
    manipulation&lt;/dfn&gt;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;dfn id=createimagedata
@@ -20647,7 +21684,7 @@
 &lt;/html&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h6 id=drawing&gt;&lt;span class=secno&gt;3.11.11.1.12. &lt;/span&gt;Drawing model&lt;/h6&gt;
+  &lt;h6 id=drawing&gt;&lt;span class=secno&gt;4.7.11.1.12. &lt;/span&gt;Drawing model&lt;/h6&gt;
 
   &lt;p&gt;When a shape or image is painted, user agents must follow these steps,
    in the order given (or act as if they do):
@@ -20688,7 +21725,7 @@
   &lt;p class=&quot;big-issue&quot;&gt;Well, one day.&lt;/p&gt;
 --&gt;
 
-  &lt;h5 id=color&gt;&lt;span class=secno&gt;3.11.11.2. &lt;/span&gt;Color spaces and color
+  &lt;h5 id=color&gt;&lt;span class=secno&gt;4.7.11.2. &lt;/span&gt;Color spaces and color
    correction&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; APIs must perform color
@@ -20733,7 +21770,7 @@
    href=&quot;#todataurl&quot;&gt;toDataURL()&lt;/a&gt;&lt;/code&gt; method to the canvas, given the
    appropriate dimensions, has no visible effect.
 
-  &lt;h5 id=security1&gt;&lt;span class=secno&gt;3.11.11.3. &lt;/span&gt;Security with &lt;code&gt;&lt;a
+  &lt;h5 id=security1&gt;&lt;span class=secno&gt;4.7.11.3. &lt;/span&gt;Security with &lt;code&gt;&lt;a
    href=&quot;#canvas&quot;&gt;canvas&lt;/a&gt;&lt;/code&gt; elements&lt;/h5&gt;
 
   &lt;p&gt;&lt;strong&gt;Information leakage&lt;/strong&gt; can occur if scripts from one &lt;a
@@ -20817,7 +21854,7 @@
    title=attr-canvas-height&gt;&lt;a href=&quot;#height0&quot;&gt;height&lt;/a&gt;&lt;/code&gt; attributes
    doesn't reset the &lt;i&gt;origin-clean&lt;/i&gt; flag.
 
-  &lt;h4 id=the-map&gt;&lt;span class=secno&gt;3.11.12 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-map&gt;&lt;span class=secno&gt;4.7.12 &lt;/span&gt;The &lt;dfn
    id=map&gt;&lt;code&gt;map&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -20875,7 +21912,7 @@
    title=dom-map-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the same name.
 
-  &lt;h4 id=the-area&gt;&lt;span class=secno&gt;3.11.13 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-area&gt;&lt;span class=secno&gt;4.7.13 &lt;/span&gt;The &lt;dfn
    id=area&gt;&lt;code&gt;area&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -21127,14 +22164,14 @@
    title=dom-area-shape&gt;&lt;code&gt;shape&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-area-shape&gt;&lt;a
    href=&quot;#shape&quot;&gt;shape&lt;/a&gt;&lt;/code&gt; content attribute, &lt;a
-   href=&quot;#limited0&quot;&gt;limited to only known values&lt;/a&gt;.
+   href=&quot;#limited&quot;&gt;limited to only known values&lt;/a&gt;.
 
   &lt;p&gt;The DOM attribute &lt;dfn id=rellist1
    title=dom-area-rellist&gt;&lt;code&gt;relList&lt;/code&gt;&lt;/dfn&gt; must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-hyperlink-rel&gt;&lt;a
    href=&quot;#rel3&quot;&gt;rel&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=image-maps&gt;&lt;span class=secno&gt;3.11.14 &lt;/span&gt;Image maps&lt;/h4&gt;
+  &lt;h4 id=image-maps&gt;&lt;span class=secno&gt;4.7.14 &lt;/span&gt;Image maps&lt;/h4&gt;
   &lt;!-- TESTS
   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/smallcats%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%3E%0A%3Cmap%20name%3Da%3E%0A%20%3Carea%20onclick%3Dw%28%271%27%29%20coords%3D%270%25%200%25%20100%25%20100%25%27%20href%3Djavascript%3A%3E%0A%3C/map%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/smallcats%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%3E%0A%3Cmap%20name%3Da%3E%0A%20%3Carea%20onclick%3Dw%28%271%27%29%20coords%3D%270%25%200%25%20100%25%20100%25%27%20href%3Djavascript%3A%3E%0A%3C/map%3E</A>
   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cbody%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/smallcats%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/sample%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cmap%20name%3Da%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%20%3Carea%20onclick%3Dw%28%271%27%29%20coords%3D%270%200%2050%2050%27%20href%3Djavascript%3A%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3C/map%3E%0A%3Cscript%3E%0A%20var%20x%20%3D%20document.getElementsByTagName%28%27img%27%29%5B0%5D%3B%0A%20x.parentNode.appendChild%28x%29%3B%0A%20document.getElementsByTagName%28%27area%27%29%5B0%5D.focus%28%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cbody%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/smallcats%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cimg%20src%3D%22http%3A//hixie.ch/resources/images/sample%22%20usemap%3D%23a%20onclick%3Dw%28%27img%27%29%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3Cmap%20name%3Da%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%20%3Carea%20onclick%3Dw%28%271%27%29%20coords%3D%270%200%2050%2050%27%20href%3Djavascript%3A%20onfocus%3D%22w%28document.activeElement.tagName%29%22%3E%0A%3C/map%3E%0A%3Cscript%3E%0A%20var%20x%20%3D%20document.getElementsByTagName%28%27img%27%29%5B0%5D%3B%0A%20x.parentNode.appendChild%28x%29%3B%0A%20document.getElementsByTagName%28%27area%27%29%5B0%5D.focus%28%29%3B%0A%3C/script%3E</A>
@@ -21429,7 +22466,7 @@
    then the user agent must act as if it had rerun the algorithms for image
    maps.
 
-  &lt;h4 id=mathml&gt;&lt;span class=secno&gt;3.11.15 &lt;/span&gt;MathML&lt;/h4&gt;
+  &lt;h4 id=mathml&gt;&lt;span class=secno&gt;4.7.15 &lt;/span&gt;MathML&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;math&lt;/code&gt; element from the &lt;a href=&quot;#mathml0&quot;&gt;MathML
    namespace&lt;/a&gt; falls into the &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;
@@ -21454,7 +22491,7 @@
    form, interactive HTML user agents are encouraged to provide a way to
    export any MathML fragment as a namespace-well-formed XML fragment.
 
-  &lt;h4 id=svg&gt;&lt;span class=secno&gt;3.11.16 &lt;/span&gt;SVG&lt;/h4&gt;
+  &lt;h4 id=svg&gt;&lt;span class=secno&gt;4.7.16 &lt;/span&gt;SVG&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;svg&lt;/code&gt; element from the &lt;a href=&quot;#svg-namespace&quot;&gt;SVG
    namespace&lt;/a&gt; falls into the &lt;a href=&quot;#embedded1&quot;&gt;embedded content&lt;/a&gt;
@@ -21464,7 +22501,7 @@
    interactive HTML user agents are encouraged to provide a way to export any
    SVG fragment as a namespace-well-formed XML fragment.
 
-  &lt;h4 id=dimension&gt;&lt;span class=secno&gt;3.11.17 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=dimension&gt;&lt;span class=secno&gt;4.7.17 &lt;/span&gt;&lt;dfn
    id=dimension0&gt;Dimension attributes&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=width4 title=attr-dim-width&gt;&lt;code&gt;width&lt;/code&gt;&lt;/dfn&gt; and
@@ -21503,16 +22540,16 @@
    href=&quot;#video1&quot;&gt;video&lt;/a&gt;&lt;/code&gt; elements must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attributes of the same name.
 
-  &lt;h3 id=tabular&gt;&lt;span class=secno&gt;3.12 &lt;/span&gt;Tabular data&lt;/h3&gt;
+  &lt;h3 id=tabular&gt;&lt;span class=secno&gt;4.8 &lt;/span&gt;Tabular data&lt;/h3&gt;
 
-  &lt;h4 id=table-intro&gt;&lt;span class=secno&gt;3.12.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=table-intro&gt;&lt;span class=secno&gt;4.8.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p class=big-issue&gt;...examples, how to write tables accessibly, a brief
    mention of the table model, etc...
 
-  &lt;h4 id=the-table&gt;&lt;span class=secno&gt;3.12.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-table&gt;&lt;span class=secno&gt;4.8.2 &lt;/span&gt;The &lt;dfn
    id=table&gt;&lt;code&gt;table&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -21812,7 +22849,7 @@
      href=&quot;#rows&quot;&gt;rows&lt;/a&gt;&lt;/code&gt; collection from its parent.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;h4 id=the-caption&gt;&lt;span class=secno&gt;3.12.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-caption&gt;&lt;span class=secno&gt;4.8.3 &lt;/span&gt;The &lt;dfn
    id=caption0&gt;&lt;code&gt;caption&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -21846,7 +22883,7 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#caption0&quot;&gt;caption&lt;/a&gt;&lt;/code&gt; element takes part in
    the &lt;a href=&quot;#table0&quot;&gt;table model&lt;/a&gt;.
 
-  &lt;h4 id=the-colgroup&gt;&lt;span class=secno&gt;3.12.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-colgroup&gt;&lt;span class=secno&gt;4.8.4 &lt;/span&gt;The &lt;dfn
    id=colgroup&gt;&lt;code&gt;colgroup&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -21897,10 +22934,10 @@
 
   &lt;p&gt;The &lt;dfn id=span1 title=dom-colgroup-span&gt;&lt;code&gt;span&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
-   same name. The value must be &lt;a href=&quot;#limited1&quot;&gt;limited to only positive
+   same name. The value must be &lt;a href=&quot;#limited0&quot;&gt;limited to only positive
    non-zero numbers&lt;/a&gt;.
 
-  &lt;h4 id=the-col&gt;&lt;span class=secno&gt;3.12.5 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-col&gt;&lt;span class=secno&gt;4.8.5 &lt;/span&gt;The &lt;dfn
    id=col&gt;&lt;code&gt;col&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -21951,10 +22988,10 @@
 
   &lt;p&gt;The &lt;dfn id=span3 title=dom-col-span&gt;&lt;code&gt;span&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
-   same name. The value must be &lt;a href=&quot;#limited1&quot;&gt;limited to only positive
+   same name. The value must be &lt;a href=&quot;#limited0&quot;&gt;limited to only positive
    non-zero numbers&lt;/a&gt;.
 
-  &lt;h4 id=the-tbody&gt;&lt;span class=secno&gt;3.12.6 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-tbody&gt;&lt;span class=secno&gt;4.8.6 &lt;/span&gt;The &lt;dfn
    id=tbody&gt;&lt;code&gt;tbody&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22042,7 +23079,7 @@
    href=&quot;#rows0&quot;&gt;rows&lt;/a&gt;&lt;/code&gt; collection, the method must instead raise an
    &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception.
 
-  &lt;h4 id=the-thead&gt;&lt;span class=secno&gt;3.12.7 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-thead&gt;&lt;span class=secno&gt;4.8.7 &lt;/span&gt;The &lt;dfn
    id=thead0&gt;&lt;code&gt;thead&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22085,7 +23122,7 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#thead0&quot;&gt;thead&lt;/a&gt;&lt;/code&gt; element takes part in the
    &lt;a href=&quot;#table0&quot;&gt;table model&lt;/a&gt;.
 
-  &lt;h4 id=the-tfoot&gt;&lt;span class=secno&gt;3.12.8 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-tfoot&gt;&lt;span class=secno&gt;4.8.8 &lt;/span&gt;The &lt;dfn
    id=tfoot0&gt;&lt;code&gt;tfoot&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22137,7 +23174,7 @@
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt; element takes part in the
    &lt;a href=&quot;#table0&quot;&gt;table model&lt;/a&gt;.
 
-  &lt;h4 id=the-tr&gt;&lt;span class=secno&gt;3.12.9 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-tr&gt;&lt;span class=secno&gt;4.8.9 &lt;/span&gt;The &lt;dfn
    id=tr&gt;&lt;code&gt;tr&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22254,7 +23291,7 @@
    href=&quot;#cells&quot;&gt;cells&lt;/a&gt;&lt;/code&gt; collection, the method must instead raise
    an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception.
 
-  &lt;h4 id=the-td&gt;&lt;span class=secno&gt;3.12.10 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-td&gt;&lt;span class=secno&gt;4.8.10 &lt;/span&gt;The &lt;dfn
    id=td&gt;&lt;code&gt;td&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22303,7 +23340,7 @@
    href=&quot;#table0&quot;&gt;table model&lt;/a&gt;).
 
   &lt;p&gt;The exact effect of the attribute is described in detail in the &lt;a
-   href=&quot;#algorithm3&quot;&gt;algorithm for assigning header cells to data cells&lt;/a&gt;,
+   href=&quot;#algorithm4&quot;&gt;algorithm for assigning header cells to data cells&lt;/a&gt;,
    which user agents must apply to determine the relationships between data
    cells and header cells.
 
@@ -22316,7 +23353,7 @@
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
    same name.
 
-  &lt;h4 id=the-th&gt;&lt;span class=secno&gt;3.12.11 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-th&gt;&lt;span class=secno&gt;4.8.11 &lt;/span&gt;The &lt;dfn
    id=th&gt;&lt;code&gt;th&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -22395,7 +23432,7 @@
    attribute's &lt;em&gt;missing value default&lt;/em&gt; is the &lt;em&gt;auto&lt;/em&gt; state.
 
   &lt;p&gt;The exact effect of these values is described in detail in the &lt;a
-   href=&quot;#algorithm3&quot;&gt;algorithm for assigning header cells to data cells&lt;/a&gt;,
+   href=&quot;#algorithm4&quot;&gt;algorithm for assigning header cells to data cells&lt;/a&gt;,
    which user agents must apply to determine the relationships between data
    cells and header cells.
 
@@ -22408,7 +23445,7 @@
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
    same name.
 
-  &lt;h4 id=attributes0&gt;&lt;span class=secno&gt;3.12.12 &lt;/span&gt;Attributes common to
+  &lt;h4 id=attributes0&gt;&lt;span class=secno&gt;4.8.12 &lt;/span&gt;Attributes common to
    &lt;code&gt;&lt;a href=&quot;#td&quot;&gt;td&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=&quot;#th&quot;&gt;th&lt;/a&gt;&lt;/code&gt;
    elements&lt;/h4&gt;
 
@@ -22438,7 +23475,7 @@
 
   &lt;p&gt;The &lt;dfn id=colspan0 title=dom-tdth-colSpan&gt;&lt;code&gt;colSpan&lt;/code&gt;&lt;/dfn&gt;
    DOM attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of
-   the same name. The value must be &lt;a href=&quot;#limited1&quot;&gt;limited to only
+   the same name. The value must be &lt;a href=&quot;#limited0&quot;&gt;limited to only
    positive non-zero numbers&lt;/a&gt;.
 
   &lt;p&gt;The &lt;dfn id=rowspan0 title=dom-tdth-rowSpan&gt;&lt;code&gt;rowSpan&lt;/code&gt;&lt;/dfn&gt;
@@ -22454,7 +23491,7 @@
    title=dom-tr-cells&gt;&lt;a href=&quot;#cells&quot;&gt;cells&lt;/a&gt;&lt;/code&gt; collection. If there
    is no such parent element, then the attribute must return 0.
 
-  &lt;h4 id=processing&gt;&lt;span class=secno&gt;3.12.13 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing&gt;&lt;span class=secno&gt;4.8.13 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;The various table elements and their content attributes together define
    the &lt;dfn id=table0&gt;table model&lt;/dfn&gt;.
@@ -22558,7 +23595,7 @@
    represented by &lt;code&gt;&lt;a href=&quot;#table&quot;&gt;table&lt;/a&gt;&lt;/code&gt; elements and their
    descendants. Documents must not have table model errors.
 
-  &lt;h5 id=forming&gt;&lt;span class=secno&gt;3.12.13.1. &lt;/span&gt;Forming a table&lt;/h5&gt;
+  &lt;h5 id=forming&gt;&lt;span class=secno&gt;4.8.13.1. &lt;/span&gt;Forming a table&lt;/h5&gt;
 
   &lt;p&gt;To determine which elements correspond to which slots in a &lt;a
    href=&quot;#table1&quot; title=concept-table&gt;table&lt;/a&gt; associated with a &lt;code&gt;&lt;a
@@ -22800,7 +23837,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;current element&lt;/var&gt; is a &lt;code&gt;&lt;a
-     href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt;, then run the &lt;a href=&quot;#algorithm1&quot;&gt;algorithm
+     href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt;, then run the &lt;a href=&quot;#algorithm2&quot;&gt;algorithm
      for processing rows&lt;/a&gt;, &lt;a href=&quot;#advanced&quot;
      title=concept-table-advance&gt;advance&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;current
      element&lt;/var&gt; to the next child of the &lt;code&gt;&lt;a
@@ -22808,7 +23845,7 @@
      &lt;i&gt;rows&lt;/i&gt;.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;Run the &lt;a href=&quot;#algorithm0&quot;&gt;algorithm for ending a row group&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Run the &lt;a href=&quot;#algorithm1&quot;&gt;algorithm for ending a row group&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;current element&lt;/var&gt; is a &lt;code&gt;&lt;a
@@ -22825,7 +23862,7 @@
      href=&quot;#thead0&quot;&gt;thead&lt;/a&gt;&lt;/code&gt; or a &lt;code&gt;&lt;a
      href=&quot;#tbody&quot;&gt;tbody&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Run the &lt;a href=&quot;#algorithm&quot;&gt;algorithm for processing row groups&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Run the &lt;a href=&quot;#algorithm0&quot;&gt;algorithm for processing row groups&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;&lt;a href=&quot;#advanced&quot; title=concept-table-advance&gt;Advance&lt;/a&gt; the &lt;var
@@ -22839,7 +23876,7 @@
     &lt;p&gt;&lt;i&gt;End&lt;/i&gt;: For each &lt;code&gt;&lt;a href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt; element
      in the list of &lt;var title=&quot;&quot;&gt;pending &lt;code&gt;&lt;a
      href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt; elements&lt;/var&gt;, in tree order, run the
-     &lt;a href=&quot;#algorithm&quot;&gt;algorithm for processing row groups&lt;/a&gt;.&lt;/p&gt;
+     &lt;a href=&quot;#algorithm0&quot;&gt;algorithm for processing row groups&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;If there exists a &lt;a href=&quot;#row0&quot; title=concept-row&gt;row&lt;/a&gt; or &lt;a
@@ -22853,7 +23890,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;the table&lt;/var&gt;.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn id=algorithm&gt;algorithm for processing row groups&lt;/dfn&gt;, which
+  &lt;p&gt;The &lt;dfn id=algorithm0&gt;algorithm for processing row groups&lt;/dfn&gt;, which
    is invoked by the set of steps above for processing &lt;code&gt;&lt;a
    href=&quot;#thead0&quot;&gt;thead&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#tbody&quot;&gt;tbody&lt;/a&gt;&lt;/code&gt;,
    and &lt;code&gt;&lt;a href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt; elements, is:
@@ -22866,7 +23903,7 @@
    &lt;li&gt;
     &lt;p&gt;For each &lt;code&gt;&lt;a href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; element that is a child of
      the element being processed, in tree order, run the &lt;a
-     href=&quot;#algorithm1&quot;&gt;algorithm for processing rows&lt;/a&gt;.&lt;/p&gt;
+     href=&quot;#algorithm2&quot;&gt;algorithm for processing rows&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt; &lt;!-- if we added any rows, make them part of a row group --&gt;
     &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;y&lt;sub
@@ -22883,10 +23920,10 @@
      title=&quot;&quot;&gt;current element&lt;/var&gt;.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;Run the &lt;a href=&quot;#algorithm0&quot;&gt;algorithm for ending a row group&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Run the &lt;a href=&quot;#algorithm1&quot;&gt;algorithm for ending a row group&lt;/a&gt;.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn id=algorithm0&gt;algorithm for ending a row group&lt;/dfn&gt;, which is
+  &lt;p&gt;The &lt;dfn id=algorithm1&gt;algorithm for ending a row group&lt;/dfn&gt;, which is
    invoked by the set of steps above when starting and ending a block of
    rows, is:
 
@@ -22897,7 +23934,7 @@
 
     &lt;ol&gt;
      &lt;li&gt;
-      &lt;p&gt;Run the &lt;a href=&quot;#algorithm2&quot;&gt;algorithm for growing downward-growing
+      &lt;p&gt;Run the &lt;a href=&quot;#algorithm3&quot;&gt;algorithm for growing downward-growing
        cells&lt;/a&gt;.&lt;/p&gt;
 
      &lt;li&gt;
@@ -22908,7 +23945,7 @@
     &lt;p&gt;Empty the &lt;var title=&quot;&quot;&gt;list of downward-growing cells&lt;/var&gt;.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn id=algorithm1&gt;algorithm for processing rows&lt;/dfn&gt;, which is
+  &lt;p&gt;The &lt;dfn id=algorithm2&gt;algorithm for processing rows&lt;/dfn&gt;, which is
    invoked by the set of steps above for processing &lt;code&gt;&lt;a
    href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; elements, is:
 
@@ -22929,7 +23966,7 @@
      the &lt;code&gt;&lt;a href=&quot;#tr&quot;&gt;tr&lt;/a&gt;&lt;/code&gt; element being processed.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;Run the &lt;a href=&quot;#algorithm2&quot;&gt;algorithm for growing downward-growing
+    &lt;p&gt;Run the &lt;a href=&quot;#algorithm3&quot;&gt;algorithm for growing downward-growing
      cells&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
@@ -23008,7 +24045,7 @@
      href=&quot;#th&quot;&gt;th&lt;/a&gt;&lt;/code&gt; element, let this new cell &lt;var
      title=&quot;&quot;&gt;c&lt;/var&gt; be a header cell; otherwise, let it be a data cell. To
      establish what header cells apply to a data cell, use the &lt;a
-     href=&quot;#algorithm3&quot;&gt;algorithm for assigning header cells to data
+     href=&quot;#algorithm4&quot;&gt;algorithm for assigning header cells to data
      cells&lt;/a&gt; described in the next section.&lt;/p&gt;
 
     &lt;p&gt;If any of the slots involved already had a &lt;a href=&quot;#cell&quot;
@@ -23043,7 +24080,7 @@
   &lt;/ol&gt;
 
   &lt;p&gt;When the algorithms above require the user agent to run the &lt;dfn
-   id=algorithm2&gt;algorithm for growing downward-growing cells&lt;/dfn&gt;, the user
+   id=algorithm3&gt;algorithm for growing downward-growing cells&lt;/dfn&gt;, the user
    agent must, for each {&lt;var title=&quot;&quot;&gt;cell&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;cell&lt;sub
    title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;} tuple in the &lt;var
    title=&quot;&quot;&gt;list of downward-growing cells&lt;/var&gt;, if any, extend the &lt;a
@@ -23054,11 +24091,11 @@
    title=&quot;&quot;&gt;x&lt;/var&gt;&nbsp;&lt;&nbsp;&lt;var title=&quot;&quot;&gt;cell&lt;sub
    title=&quot;&quot;&gt;x&lt;/sub&gt;&lt;/var&gt;+&lt;var title=&quot;&quot;&gt;width&lt;/var&gt;&lt;/span&gt;.
 
-  &lt;h5 id=header-and-data-cell-semantics&gt;&lt;span class=secno&gt;3.12.13.2.
+  &lt;h5 id=header-and-data-cell-semantics&gt;&lt;span class=secno&gt;4.8.13.2.
    &lt;/span&gt;Forming relationships between data cells and header cells&lt;/h5&gt;
 
   &lt;p&gt;Each data cell can be assigned zero or more header cells. The &lt;dfn
-   id=algorithm3&gt;algorithm for assigning header cells to data cells&lt;/dfn&gt; is
+   id=algorithm4&gt;algorithm for assigning header cells to data cells&lt;/dfn&gt; is
    as follows.
 
   &lt;ol&gt;
@@ -23341,7 +24378,7 @@
    data cells&lt;/a&gt; when analyzing data in a &lt;a href=&quot;#table1&quot;
    title=concept-table&gt;table&lt;/a&gt;.
 
-  &lt;h3 id=forms&gt;&lt;span class=secno&gt;3.13 &lt;/span&gt;Forms&lt;/h3&gt;
+  &lt;h3 id=forms&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Forms&lt;/h3&gt;
   &lt;!-- XXX everything in WF2 --&gt;
 
   &lt;p class=big-issue&gt;This section will contain definitions of the
@@ -23352,46 +24389,46 @@
   &lt;!-- From HTML4: BUTTON FIELDSET FORM INPUT LABEL OPTGROUP OPTION
   SELECT TEXTAREA --&gt;
 
-  &lt;h4 id=the-form&gt;&lt;span class=secno&gt;3.13.1 &lt;/span&gt;The &lt;code&gt;form&lt;/code&gt;
+  &lt;h4 id=the-form&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;The &lt;code&gt;form&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-fieldset&gt;&lt;span class=secno&gt;3.13.2 &lt;/span&gt;The
+  &lt;h4 id=the-fieldset&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;The
    &lt;code&gt;fieldset&lt;/code&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-input&gt;&lt;span class=secno&gt;3.13.3 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt;
+  &lt;h4 id=the-input&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-button&gt;&lt;span class=secno&gt;3.13.4 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt;
+  &lt;h4 id=the-button&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-label&gt;&lt;span class=secno&gt;3.13.5 &lt;/span&gt;The &lt;code&gt;label&lt;/code&gt;
+  &lt;h4 id=the-label&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;The &lt;code&gt;label&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-select&gt;&lt;span class=secno&gt;3.13.6 &lt;/span&gt;The &lt;code&gt;select&lt;/code&gt;
+  &lt;h4 id=the-select&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;The &lt;code&gt;select&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-datalist&gt;&lt;span class=secno&gt;3.13.7 &lt;/span&gt;The
+  &lt;h4 id=the-datalist&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;The
    &lt;code&gt;datalist&lt;/code&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-optgroup&gt;&lt;span class=secno&gt;3.13.8 &lt;/span&gt;The
+  &lt;h4 id=the-optgroup&gt;&lt;span class=secno&gt;4.9.8 &lt;/span&gt;The
    &lt;code&gt;optgroup&lt;/code&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-option&gt;&lt;span class=secno&gt;3.13.9 &lt;/span&gt;The &lt;code&gt;option&lt;/code&gt;
+  &lt;h4 id=the-option&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;The &lt;code&gt;option&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=the-textarea&gt;&lt;span class=secno&gt;3.13.10 &lt;/span&gt;The
+  &lt;h4 id=the-textarea&gt;&lt;span class=secno&gt;4.9.10 &lt;/span&gt;The
    &lt;code&gt;textarea&lt;/code&gt; element&lt;/h4&gt;
 
-  &lt;h4 id=the-output&gt;&lt;span class=secno&gt;3.13.11 &lt;/span&gt;The &lt;code&gt;output&lt;/code&gt;
+  &lt;h4 id=the-output&gt;&lt;span class=secno&gt;4.9.11 &lt;/span&gt;The &lt;code&gt;output&lt;/code&gt;
    element&lt;/h4&gt;
 
-  &lt;h4 id=processing0&gt;&lt;span class=secno&gt;3.13.12 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing0&gt;&lt;span class=secno&gt;4.9.12 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;See &lt;a
    href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#extend-form-controls">http://www.whatwg.org/specs/web-forms/current-work/#extend-form-controls</A>&quot;&gt;WF2&lt;/a&gt;
    for now
 
-  &lt;h5 id=form-submission&gt;&lt;span class=secno&gt;3.13.12.1. &lt;/span&gt;Form submission&lt;/h5&gt;
+  &lt;h5 id=form-submission&gt;&lt;span class=secno&gt;4.9.12.1. &lt;/span&gt;Form submission&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;See &lt;a
    href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#form-submission">http://www.whatwg.org/specs/web-forms/current-work/#form-submission</A>&quot;&gt;WF2&lt;/a&gt;
@@ -23401,7 +24438,7 @@
    context whose &lt;a href=&quot;#sandboxed3&quot;&gt;sandboxed forms browsing context
    flag&lt;/a&gt; is set, it must not be submitted.
 
-  &lt;h3 id=scripting0&gt;&lt;span class=secno&gt;3.14 &lt;/span&gt;Scripting&lt;/h3&gt;
+  &lt;h3 id=scripting0&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Scripting&lt;/h3&gt;
 
   &lt;p&gt;Scripts allow authors to add interactivity to their documents.
 
@@ -23424,7 +24461,7 @@
     without scripts by requesting the sorted table from the server.&lt;/p&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=script&gt;&lt;span class=secno&gt;3.14.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=script&gt;&lt;span class=secno&gt;4.10.1 &lt;/span&gt;The &lt;dfn
    id=script1&gt;&lt;code&gt;script&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -23842,7 +24879,7 @@
         &lt;p&gt;The file must be interpreted using the character encoding given by
          &lt;var&gt;&lt;a href=&quot;#the-scripts0&quot;&gt;the script's character
          encoding&lt;/a&gt;&lt;/var&gt;, regardless of any metadata given by the file's
-         &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type
+         &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type
          metadata&lt;/a&gt;.&lt;/p&gt;
 
         &lt;p class=big-issue&gt;This means that a UTF-16 document will always
@@ -23905,7 +24942,7 @@
    way as the &lt;code&gt;&lt;a href=&quot;#textcontent&quot;&gt;textContent&lt;/a&gt;&lt;/code&gt; DOM
    attribute.
 
-  &lt;h5 id=scriptingLanguages&gt;&lt;span class=secno&gt;3.14.1.1. &lt;/span&gt;Scripting
+  &lt;h5 id=scriptingLanguages&gt;&lt;span class=secno&gt;4.10.1.1. &lt;/span&gt;Scripting
    languages&lt;/h5&gt;
 
   &lt;p&gt;A user agent is said to &lt;dfn id=support&gt;support the scripting
@@ -23936,7 +24973,7 @@
    XXX we should reference #refsRFC4329 <A HREF="http://www.ietf.org/rfc/rfc4329">http://www.ietf.org/rfc/rfc4329</A>
   --&gt;
 
-  &lt;h4 id=the-noscript&gt;&lt;span class=secno&gt;3.14.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-noscript&gt;&lt;span class=secno&gt;4.10.2 &lt;/span&gt;The &lt;dfn
    id=noscript&gt;&lt;code&gt;noscript&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -24097,7 +25134,7 @@
    that will have &lt;code title=dom-document-designMode&gt;&lt;a
    href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled.
 
-  &lt;h4 id=the-event-source&gt;&lt;span class=secno&gt;3.14.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-event-source&gt;&lt;span class=secno&gt;4.10.3 &lt;/span&gt;The &lt;dfn
    id=event-source&gt;&lt;code&gt;event-source&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -24187,10 +25224,10 @@
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the
    same name.
 
-  &lt;h3 id=interactive-elements&gt;&lt;span class=secno&gt;3.15 &lt;/span&gt;Interactive
+  &lt;h3 id=interactive-elements&gt;&lt;span class=secno&gt;4.11 &lt;/span&gt;Interactive
    elements&lt;/h3&gt;
 
-  &lt;h4 id=the-details&gt;&lt;span class=secno&gt;3.15.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-details&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;The &lt;dfn
    id=details&gt;&lt;code&gt;details&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -24267,7 +25304,7 @@
    reflecting state has been a pain in the neck before. But is it
    semantically ok?
 
-  &lt;h4 id=datagrid&gt;&lt;span class=secno&gt;3.15.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=datagrid&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;The &lt;dfn
    id=datagrid0&gt;&lt;code&gt;datagrid&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -24360,7 +25397,7 @@
    &lt;code title=attr-datagrid-disabled&gt;&lt;a
    href=&quot;#disabled3&quot;&gt;disabled&lt;/a&gt;&lt;/code&gt; content attributes respectively.
 
-  &lt;h5 id=the-datagrid&gt;&lt;span class=secno&gt;3.15.2.1. &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h5 id=the-datagrid&gt;&lt;span class=secno&gt;4.11.2.1. &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt; data model&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -24407,7 +25444,7 @@
    scripted data providers.&lt;/p&gt;
   &lt;!-- XXX check xrefs --&gt;
 
-  &lt;h5 id=how-rows&gt;&lt;span class=secno&gt;3.15.2.2. &lt;/span&gt;How rows are identified&lt;/h5&gt;
+  &lt;h5 id=how-rows&gt;&lt;span class=secno&gt;4.11.2.2. &lt;/span&gt;How rows are identified&lt;/h5&gt;
 
   &lt;p&gt;The chains of numbers that give a row's path, or identifier, are
    represented by objects that implement the &lt;a
@@ -24439,7 +25476,7 @@
    href=&quot;#getchildatposition&quot;&gt;GetChildAtPosition()&lt;/a&gt;&lt;/code&gt; methods ever
    get called with the empty path.
 
-  &lt;h5 id=the-data&gt;&lt;span class=secno&gt;3.15.2.3. &lt;/span&gt;The data provider
+  &lt;h5 id=the-data&gt;&lt;span class=secno&gt;4.11.2.3. &lt;/span&gt;The data provider
    interface&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;The conformance criteria in this section apply to any implementation
@@ -24907,7 +25944,7 @@
 --&gt;
   &lt;/table&gt;
 
-  &lt;h5 id=the-default&gt;&lt;span class=secno&gt;3.15.2.4. &lt;/span&gt;The default data
+  &lt;h5 id=the-default&gt;&lt;span class=secno&gt;4.11.2.4. &lt;/span&gt;The default data
    provider&lt;/h5&gt;
 
   &lt;p&gt;The user agent must supply a default data provider for the case where
@@ -25411,7 +26448,7 @@
      &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h6 id=commonDefaultDataGridMethodDefinitions&gt;&lt;span class=secno&gt;3.15.2.4.1.
+  &lt;h6 id=commonDefaultDataGridMethodDefinitions&gt;&lt;span class=secno&gt;4.11.2.4.1.
    &lt;/span&gt;Common default data provider method definitions for cells&lt;/h6&gt;
 
   &lt;p&gt;These definitions are used for the cell-specific methods of the default
@@ -25552,7 +26589,7 @@
   &lt;/dl&gt;
   &lt;!-- XXX Calculated cells, like in spreadsheets? --&gt;
 
-  &lt;h5 id=populating&gt;&lt;span class=secno&gt;3.15.2.5. &lt;/span&gt;Populating the
+  &lt;h5 id=populating&gt;&lt;span class=secno&gt;4.11.2.5. &lt;/span&gt;Populating the
    &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt; element&lt;/h5&gt;
 
   &lt;p&gt;A &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt; must be disabled until
@@ -25837,7 +26874,7 @@
     href=&quot;#rowspecification&quot;&gt;RowSpecification&lt;/a&gt;&lt;/code&gt; object representing
     the row in question. The return value is a string representing a valid
     URI (or IRI) to an image. Relative URIs must be interpreted relative to
-    the &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;'s &lt;a href=&quot;#elements2&quot;
+    the &lt;code&gt;&lt;a href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;'s &lt;a href=&quot;#elements3&quot;
     title=&quot;element's base URI&quot;&gt;base URI&lt;/a&gt;. If the method returns the empty
     string, null, or if the method is not defined, then the row has no
     associated image.
@@ -26000,7 +27037,7 @@
   &lt;!-- XXX speaking of which, do we actually want that
   limitation? --&gt;
 
-  &lt;h5 id=updating&gt;&lt;span class=secno&gt;3.15.2.6. &lt;/span&gt;Updating the &lt;code&gt;&lt;a
+  &lt;h5 id=updating&gt;&lt;span class=secno&gt;4.11.2.6. &lt;/span&gt;Updating the &lt;code&gt;&lt;a
    href=&quot;#datagrid0&quot;&gt;datagrid&lt;/a&gt;&lt;/code&gt;&lt;/h5&gt;
 
   &lt;p&gt;Whenever the &lt;code title=dom-datagrid-data&gt;&lt;a
@@ -26080,7 +27117,7 @@
    href=&quot;#inconsistentDataProvider&quot;&gt;likely to result in inconsistent
    renderings&lt;/a&gt;, and the user agent is likely to disable the data grid.
 
-  &lt;h5 id=requirements&gt;&lt;span class=secno&gt;3.15.2.7. &lt;/span&gt;Requirements for
+  &lt;h5 id=requirements&gt;&lt;span class=secno&gt;4.11.2.7. &lt;/span&gt;Requirements for
    interactive user agents&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to interactive user agents.&lt;/em&gt;
@@ -26149,7 +27186,7 @@
    provider's method was invoked.&lt;/p&gt;
   &lt;!-- XXXPA &lt;p class=&quot;big-issue&quot;&gt;define actions (performAction(), etc)&lt;/p&gt; --&gt;
 
-  &lt;h5 id=the-selection&gt;&lt;span class=secno&gt;3.15.2.8. &lt;/span&gt;The selection&lt;/h5&gt;
+  &lt;h5 id=the-selection&gt;&lt;span class=secno&gt;4.11.2.8. &lt;/span&gt;The selection&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to interactive user agents. For other user
    agents, the &lt;code title=dom-datagrid-selection&gt;&lt;a
@@ -26275,7 +27312,7 @@
    relation to the &lt;code&gt;&lt;a href=&quot;#selection1&quot;&gt;Selection&lt;/a&gt;&lt;/code&gt;
    interface.
 
-  &lt;h5 id=columns&gt;&lt;span class=secno&gt;3.15.2.9. &lt;/span&gt;Columns and captions&lt;/h5&gt;
+  &lt;h5 id=columns&gt;&lt;span class=secno&gt;4.11.2.9. &lt;/span&gt;Columns and captions&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to interactive user agents.&lt;/em&gt;
 
@@ -26327,7 +27364,7 @@
   &lt;p class=&quot;big-issue&quot;&gt;define drag and drop in datagrids; selectiondraggable, etc.&lt;/p&gt;
 --&gt;
 
-  &lt;h4 id=the-command&gt;&lt;span class=secno&gt;3.15.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-command&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;The &lt;dfn
    id=command0&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -26540,7 +27577,7 @@
   &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#command0&quot;&gt;command&lt;/a&gt;&lt;/code&gt; elements are not
    rendered unless they &lt;a href=&quot;#menu&quot; title=menu&gt;form part of a menu&lt;/a&gt;.
 
-  &lt;h4 id=menus&gt;&lt;span class=secno&gt;3.15.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=menus&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;The &lt;dfn
    id=menu&gt;&lt;code&gt;menu&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -26649,7 +27686,7 @@
    the UA must invoke the &lt;code title=dom-form-submit&gt;submit()&lt;/code&gt; method
    of the &lt;code&gt;form&lt;/code&gt; element indicated by that DOM attribute.
 
-  &lt;h5 id=menus-intro&gt;&lt;span class=secno&gt;3.15.4.1. &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;h5 id=menus-intro&gt;&lt;span class=secno&gt;4.11.4.1. &lt;/span&gt;Introduction&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -26747,7 +27784,7 @@
 
 --&gt;
 
-  &lt;h5 id=building&gt;&lt;span class=secno&gt;3.15.4.2. &lt;/span&gt;&lt;dfn
+  &lt;h5 id=building&gt;&lt;span class=secno&gt;4.11.4.2. &lt;/span&gt;&lt;dfn
    id=building0&gt;Building menus and tool bars&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A menu (or tool bar) consists of a list of zero or more of the following
@@ -26836,7 +27873,7 @@
    &lt;li&gt;Any separator at the start or end of the menu must be removed.
   &lt;/ol&gt;
 
-  &lt;h5 id=context&gt;&lt;span class=secno&gt;3.15.4.3. &lt;/span&gt;&lt;dfn id=context2&gt;Context
+  &lt;h5 id=context&gt;&lt;span class=secno&gt;4.11.4.3. &lt;/span&gt;&lt;dfn id=context2&gt;Context
    menus&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=contextmenu
@@ -26907,7 +27944,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a
    href=&quot;#contextmenu&quot;&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h5 id=toolbars&gt;&lt;span class=secno&gt;3.15.4.4. &lt;/span&gt;Toolbars&lt;/h5&gt;
+  &lt;h5 id=toolbars&gt;&lt;span class=secno&gt;4.11.4.4. &lt;/span&gt;Toolbars&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=toolbars0&gt;Toolbars&lt;/dfn&gt; are a kind of menu that is always
    visible.
@@ -26924,7 +27961,7 @@
   &lt;p&gt;The user agent must reflect changes made to the &lt;code&gt;&lt;a
    href=&quot;#menu&quot;&gt;menu&lt;/a&gt;&lt;/code&gt;'s DOM immediately in the UI.
 
-  &lt;h4 id=commands&gt;&lt;span class=secno&gt;3.15.5 &lt;/span&gt;Commands&lt;/h4&gt;
+  &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Commands&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=command1 title=concept-command&gt;command&lt;/dfn&gt; is the
    abstraction behind menu items, buttons, and links. Once a command is
@@ -27137,7 +28174,7 @@
    href=&quot;#using7&quot;&gt;option&lt;/a&gt;&lt;/code&gt;, &lt;code title=command-element&gt;&lt;a
    href=&quot;#command3&quot;&gt;command&lt;/a&gt;&lt;/code&gt;.
 
-  &lt;h5 id=using&gt;&lt;span class=secno&gt;3.15.5.1. &lt;/span&gt;&lt;dfn id=using4
+  &lt;h5 id=using&gt;&lt;span class=secno&gt;4.11.5.1. &lt;/span&gt;&lt;dfn id=using4
    title=a-command&gt;Using the &lt;code&gt;a&lt;/code&gt; element to define a command&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; element with an &lt;code
@@ -27176,7 +28213,7 @@
    from the element's &lt;code&gt;src&lt;/code&gt; attribute. &lt;!--If it is
   an &lt;code&gt;object&lt;/code&gt; element then the URI is taken from the
   &lt;code&gt;data&lt;/code&gt; attribute. --&gt;
-   Relative URIs must be resolved relative to the &lt;a href=&quot;#elements2&quot;
+   Relative URIs must be resolved relative to the &lt;a href=&quot;#elements3&quot;
    title=&quot;element's base URI&quot;&gt;base URI&lt;/a&gt; of the image element.
    &lt;!-- If it is an &lt;code&gt;svg&lt;/code&gt; element then
   the URI is formed by taking the URI of the document and appending a
@@ -27195,7 +28232,7 @@
    command is to &lt;a href=&quot;#firing&quot; title=&quot;fire a click event&quot;&gt;fire a &lt;code
    title=&quot;&quot;&gt;click&lt;/code&gt; event&lt;/a&gt; at the element.
 
-  &lt;h5 id=using0&gt;&lt;span class=secno&gt;3.15.5.2. &lt;/span&gt;&lt;dfn id=using5
+  &lt;h5 id=using0&gt;&lt;span class=secno&gt;4.11.5.2. &lt;/span&gt;&lt;dfn id=using5
    title=button-command&gt;Using the &lt;code&gt;button&lt;/code&gt; element to define a
    command&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -27221,7 +28258,7 @@
    &lt;code&gt;move-up&lt;/code&gt; button type is disabled when it would have no
    effect).
 
-  &lt;h5 id=using1&gt;&lt;span class=secno&gt;3.15.5.3. &lt;/span&gt;&lt;dfn id=using6
+  &lt;h5 id=using1&gt;&lt;span class=secno&gt;4.11.5.3. &lt;/span&gt;&lt;dfn id=using6
    title=input-command&gt;Using the &lt;code&gt;input&lt;/code&gt; element to define a
    command&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -27294,7 +28331,7 @@
   is probably wrong for radio and checkbox types, depending on how we
   define &lt;input&gt;. --&gt;
 
-  &lt;h5 id=using2&gt;&lt;span class=secno&gt;3.15.5.4. &lt;/span&gt;&lt;dfn id=using7
+  &lt;h5 id=using2&gt;&lt;span class=secno&gt;4.11.5.4. &lt;/span&gt;&lt;dfn id=using7
    title=option-command&gt;Using the &lt;code&gt;option&lt;/code&gt; element to define a
    command&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -27354,7 +28391,7 @@
    &lt;code&gt;select&lt;/code&gt; element (if there is one), as if the selection had
    been changed directly.
 
-  &lt;h5 id=using3&gt;&lt;span class=secno&gt;3.15.5.5. &lt;/span&gt;Using the &lt;dfn id=command3
+  &lt;h5 id=using3&gt;&lt;span class=secno&gt;4.11.5.5. &lt;/span&gt;Using the &lt;dfn id=command3
    title=command-element&gt;&lt;code&gt;command&lt;/code&gt;&lt;/dfn&gt; element to define a
    command&lt;/h5&gt;
 
@@ -27386,7 +28423,7 @@
   &lt;p&gt;The &lt;a href=&quot;#icon1&quot; title=command-facet-Icon&gt;Icon&lt;/a&gt; for the command
    is the absolute URI resulting from resolving the value of the element's
    &lt;code title=attr-command-icon&gt;&lt;a href=&quot;#icon&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; attribute as
-   a URI relative to the &lt;a href=&quot;#elements2&quot;&gt;element's base URI&lt;/a&gt;. If the
+   a URI relative to the &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;. If the
    element has no &lt;code title=attr-command-icon&gt;&lt;a
    href=&quot;#icon&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; attribute then the command has no &lt;a
    href=&quot;#icon1&quot; title=command-facet-Icon&gt;Icon&lt;/a&gt;.
@@ -27415,15 +28452,15 @@
   &lt;!-- XXX update to
   point to dom-click when we remove dom-command-click --&gt;
 
-  &lt;h3 id=datatemplate&gt;&lt;span class=secno&gt;3.16 &lt;/span&gt;Data Templates&lt;/h3&gt;
+  &lt;h3 id=datatemplate&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Data Templates&lt;/h3&gt;
 
-  &lt;h4 id=introduction0&gt;&lt;span class=secno&gt;3.16.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction0&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p class=big-issue&gt;...examples...
 
-  &lt;h4 id=the-datatemplate&gt;&lt;span class=secno&gt;3.16.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-datatemplate&gt;&lt;span class=secno&gt;4.12.2 &lt;/span&gt;The &lt;dfn
    id=datatemplate0&gt;&lt;code&gt;datatemplate&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -27459,7 +28496,7 @@
    brings together the various rules that form a data template. The element
    doesn't itself do anything exciting.
 
-  &lt;h4 id=the-rule&gt;&lt;span class=secno&gt;3.16.3 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-rule&gt;&lt;span class=secno&gt;4.12.3 &lt;/span&gt;The &lt;dfn
    id=rule&gt;&lt;code&gt;rule&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -27536,7 +28573,7 @@
    attributes must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code
    title=attr-rule-mode&gt;&lt;a href=&quot;#mode&quot;&gt;mode&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-nest&gt;&lt;span class=secno&gt;3.16.4 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-nest&gt;&lt;span class=secno&gt;4.12.4 &lt;/span&gt;The &lt;dfn
    id=nest&gt;&lt;code&gt;nest&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -27599,7 +28636,7 @@
    attribute must &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the &lt;code
    title=attr-nest-mode&gt;&lt;a href=&quot;#mode1&quot;&gt;mode&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=global0&gt;&lt;span class=secno&gt;3.16.5 &lt;/span&gt;Global attributes for data
+  &lt;h4 id=global0&gt;&lt;span class=secno&gt;4.12.5 &lt;/span&gt;Global attributes for data
    templates&lt;/h4&gt;
   &lt;!-- authoring side, with DOM reflections --&gt;
 
@@ -27656,10 +28693,10 @@
    title=attr-registrationmark&gt;&lt;a
    href=&quot;#registrationmark&quot;&gt;registrationmark&lt;/a&gt;&lt;/code&gt; content attribute.
 
-  &lt;h4 id=processing1&gt;&lt;span class=secno&gt;3.16.6 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing1&gt;&lt;span class=secno&gt;4.12.6 &lt;/span&gt;Processing model&lt;/h4&gt;
   &lt;!-- ua side --&gt;
 
-  &lt;h5 id=the-originalcontent&gt;&lt;span class=secno&gt;3.16.6.1. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-originalcontent&gt;&lt;span class=secno&gt;4.12.6.1. &lt;/span&gt;The &lt;code
    title=dom-originalContent&gt;&lt;a
    href=&quot;#originalcontent&quot;&gt;originalContent&lt;/a&gt;&lt;/code&gt; DOM attribute&lt;/h5&gt;
 
@@ -27677,7 +28714,7 @@
    just as the &lt;code title=dom-templateElement&gt;&lt;a
    href=&quot;#templateelement&quot;&gt;templateElement&lt;/a&gt;&lt;/code&gt; DOM attribute can.
 
-  &lt;h5 id=the-template&gt;&lt;span class=secno&gt;3.16.6.2. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-template&gt;&lt;span class=secno&gt;4.12.6.2. &lt;/span&gt;The &lt;code
    title=attr-template&gt;&lt;a href=&quot;#template&quot;&gt;template&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
   &lt;!-- XXXURL apply algorithms --&gt;
 
@@ -27804,7 +28841,7 @@
    &lt;code&gt;&lt;a href=&quot;#datatemplate0&quot;&gt;datatemplate&lt;/a&gt;&lt;/code&gt; element. Initially,
    the attribute must have the value null.
 
-  &lt;h5 id=the-ref&gt;&lt;span class=secno&gt;3.16.6.3. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-ref&gt;&lt;span class=secno&gt;4.12.6.3. &lt;/span&gt;The &lt;code
    title=attr-ref&gt;&lt;a href=&quot;#ref&quot;&gt;ref&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
   &lt;!-- XXXURL apply algorithms --&gt;
 
@@ -27894,7 +28931,7 @@
    that is also null, in which case no template is currently being applied.
    Initially, the attribute must have the value null.
 
-  &lt;h5 id=the-nodedatatemplate&gt;&lt;span class=secno&gt;3.16.6.4. &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h5 id=the-nodedatatemplate&gt;&lt;span class=secno&gt;4.12.6.4. &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#nodedatatemplate&quot;&gt;NodeDataTemplate&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;p&gt;All objects that implement the &lt;code&gt;Node&lt;/code&gt; interface must also
@@ -27913,7 +28950,7 @@
    for updating the generated content&lt;/a&gt; of elements that are using the data
    template feature.
 
-  &lt;h5 id=mutations&gt;&lt;span class=secno&gt;3.16.6.5. &lt;/span&gt;Mutations&lt;/h5&gt;
+  &lt;h5 id=mutations&gt;&lt;span class=secno&gt;4.12.6.5. &lt;/span&gt;Mutations&lt;/h5&gt;
 
   &lt;p&gt;An element with a non-null &lt;code title=dom-templateElement&gt;&lt;a
    href=&quot;#templateelement&quot;&gt;templateElement&lt;/a&gt;&lt;/code&gt; is said to be a &lt;dfn
@@ -27958,7 +28995,7 @@
    a template whenever either the backing data changes or the template itself
    changes.
 
-  &lt;h5 id=updating0&gt;&lt;span class=secno&gt;3.16.6.6. &lt;/span&gt;Updating the generated
+  &lt;h5 id=updating0&gt;&lt;span class=secno&gt;4.12.6.6. &lt;/span&gt;Updating the generated
    content&lt;/h5&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=update title=datatemplate-regen&gt;update
@@ -28301,9 +29338,9 @@
   &lt;!-- this is basically used for expanding
   nodeValue values --&gt;
 
-  &lt;h3 id=miscellaneous&gt;&lt;span class=secno&gt;3.17 &lt;/span&gt;Miscellaneous elements&lt;/h3&gt;
+  &lt;h3 id=miscellaneous&gt;&lt;span class=secno&gt;4.13 &lt;/span&gt;Miscellaneous elements&lt;/h3&gt;
 
-  &lt;h4 id=the-legend&gt;&lt;span class=secno&gt;3.17.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-legend&gt;&lt;span class=secno&gt;4.13.1 &lt;/span&gt;The &lt;dfn
    id=legend&gt;&lt;code&gt;legend&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -28339,7 +29376,7 @@
    or explanatory caption for the rest of the contents of the &lt;code&gt;&lt;a
    href=&quot;#legend&quot;&gt;legend&lt;/a&gt;&lt;/code&gt; element's parent element.
 
-  &lt;h4 id=the-div&gt;&lt;span class=secno&gt;3.17.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-div&gt;&lt;span class=secno&gt;4.13.2 &lt;/span&gt;The &lt;dfn
    id=div&gt;&lt;code&gt;div&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
@@ -28382,14 +29419,14 @@
    mechanism that they are, to handle things the spec can't otherwise do
    (like making new widgets).
 
-  &lt;h2 id=web-browsers&gt;&lt;span class=secno&gt;4. &lt;/span&gt;Web browsers&lt;/h2&gt;
+  &lt;h2 id=browsers&gt;&lt;span class=secno&gt;5. &lt;/span&gt;Web browsers&lt;/h2&gt;
 
   &lt;p&gt;This section describes features that apply most directly to Web
    browsers. Having said that, unless specified elsewhere, the requirements
    defined in this section &lt;em&gt;do&lt;/em&gt; apply to all user agents, whether they
    are Web browsers or not.
 
-  &lt;h3 id=windows&gt;&lt;span class=secno&gt;4.1 &lt;/span&gt;Browsing contexts&lt;/h3&gt;
+  &lt;h3 id=windows&gt;&lt;span class=secno&gt;5.1 &lt;/span&gt;Browsing contexts&lt;/h3&gt;
 
   &lt;p&gt;A &lt;dfn id=browsing1&gt;browsing context&lt;/dfn&gt; is a collection of one or
    more &lt;code&gt;Document&lt;/code&gt; objects, and one or more &lt;a href=&quot;#view&quot;
@@ -28486,7 +29523,7 @@
     new &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is created.
   &lt;/dl&gt;
 
-  &lt;h4 id=nested&gt;&lt;span class=secno&gt;4.1.1 &lt;/span&gt;Nested browsing contexts&lt;/h4&gt;
+  &lt;h4 id=nested&gt;&lt;span class=secno&gt;5.1.1 &lt;/span&gt;Nested browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;Certain elements (for example, &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;
    elements) can instantiate further &lt;a href=&quot;#browsing1&quot; title=&quot;browsing
@@ -28544,7 +29581,7 @@
    a &lt;code title=attr-iframe-seamless&gt;&lt;a href=&quot;#seamless&quot;&gt;seamless&lt;/a&gt;&lt;/code&gt;
    attribute.
 
-  &lt;h4 id=auxiliary&gt;&lt;span class=secno&gt;4.1.2 &lt;/span&gt;Auxiliary browsing contexts&lt;/h4&gt;
+  &lt;h4 id=auxiliary&gt;&lt;span class=secno&gt;5.1.2 &lt;/span&gt;Auxiliary browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;It is possible to create new browsing contexts that are related to a
    &lt;span&gt;top level browsing context&lt;/span&gt; without being nested through an
@@ -28569,14 +29606,14 @@
    context was created (its &lt;a href=&quot;#opener&quot;&gt;opener browsing context&lt;/a&gt;),
    if there is one and it is still available.
 
-  &lt;h4 id=secondary&gt;&lt;span class=secno&gt;4.1.3 &lt;/span&gt;Secondary browsing contexts&lt;/h4&gt;
+  &lt;h4 id=secondary&gt;&lt;span class=secno&gt;5.1.3 &lt;/span&gt;Secondary browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;User agents may support &lt;dfn id=secondary0 title=&quot;secondary browsing
    context&quot;&gt;secondary browsing contexts&lt;/dfn&gt;, which are &lt;a href=&quot;#browsing1&quot;
    title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; that form part of the user
    agent's interface, apart from the main content area.
 
-  &lt;h4 id=security2&gt;&lt;span class=secno&gt;4.1.4 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security2&gt;&lt;span class=secno&gt;5.1.4 &lt;/span&gt;Security&lt;/h4&gt;
 
   &lt;p&gt;A &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is
    &lt;dfn id=allowed&gt;allowed to navigate&lt;/dfn&gt; a second &lt;a
@@ -28606,7 +29643,7 @@
     itself).
   &lt;/ul&gt;
 
-  &lt;h4 id=threads&gt;&lt;span class=secno&gt;4.1.5 &lt;/span&gt;Threads&lt;/h4&gt;
+  &lt;h4 id=threads&gt;&lt;span class=secno&gt;5.1.5 &lt;/span&gt;Threads&lt;/h4&gt;
 
   &lt;p&gt;Each &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is defined as having a
    list of zero or more &lt;dfn id=directly&gt;directly reachable browsing
@@ -28644,7 +29681,7 @@
  this applies to anything firing events or calling callbacks
  asynchronously. --&gt;
 
-  &lt;h4 id=browsing&gt;&lt;span class=secno&gt;4.1.6 &lt;/span&gt;Browsing context names&lt;/h4&gt;
+  &lt;h4 id=browsing&gt;&lt;span class=secno&gt;5.1.6 &lt;/span&gt;Browsing context names&lt;/h4&gt;
 
   &lt;p&gt;Browsing contexts can have a &lt;dfn id=browsing2&gt;browsing context
    name&lt;/dfn&gt;. By default, a browsing context has no name (its name is not
@@ -28741,7 +29778,7 @@
      configure the user agent to always reuse the current browsing context.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;h3 id=the-default0&gt;&lt;span class=secno&gt;4.2 &lt;/span&gt;The default view&lt;/h3&gt;
+  &lt;h3 id=the-default0&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The default view&lt;/h3&gt;
 
   &lt;p&gt;The &lt;code&gt;AbstractView&lt;/code&gt; object of &lt;a href=&quot;#default3&quot;
    title=&quot;default view&quot;&gt;default views&lt;/a&gt; must also implement the &lt;code&gt;&lt;a
@@ -28851,7 +29888,7 @@
    title=dom-item&gt;have an implicit [[Get]] method&lt;/span&gt; which returns
    &lt;span&gt;nested browsing contexts&lt;/span&gt;.
 
-  &lt;h4 id=security3&gt;&lt;span class=secno&gt;4.2.1 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security3&gt;&lt;span class=secno&gt;5.2.1 &lt;/span&gt;Security&lt;/h4&gt;
 
   &lt;p&gt;User agents must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of a &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
@@ -28878,7 +29915,7 @@
    title=dom-location&gt;&lt;a href=&quot;#location1&quot;&gt;location&lt;/a&gt;&lt;/code&gt; object's
    setter.
 
-  &lt;h4 id=constructors&gt;&lt;span class=secno&gt;4.2.2 &lt;/span&gt;Constructors&lt;/h4&gt;
+  &lt;h4 id=constructors&gt;&lt;span class=secno&gt;5.2.2 &lt;/span&gt;Constructors&lt;/h4&gt;
 
   &lt;p&gt;All &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; objects must provide the
    following constructors:
@@ -28935,7 +29972,7 @@
   &lt;p class=big-issue&gt;And when constructors are invoked but without using the
    constructor syntax...?
 
-  &lt;h4 id=apis-for&gt;&lt;span class=secno&gt;4.2.3 &lt;/span&gt;APIs for creating and
+  &lt;h4 id=apis-for&gt;&lt;span class=secno&gt;5.2.3 &lt;/span&gt;APIs for creating and
    navigating browsing contexts by name&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=open2 title=dom-open&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt; method on
@@ -29022,7 +30059,7 @@
   &lt;p class=note&gt;The name &lt;a href=&quot;#resetBCName&quot;&gt;gets reset&lt;/a&gt; when the
    browsing context is navigated to another domain.
 
-  &lt;h4 id=accessing&gt;&lt;span class=secno&gt;4.2.4 &lt;/span&gt;Accessing other browsing
+  &lt;h4 id=accessing&gt;&lt;span class=secno&gt;5.2.4 &lt;/span&gt;Accessing other browsing
    contexts&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=length7 title=dom-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; DOM
@@ -29039,7 +30076,7 @@
    those browsing contexts.&lt;/p&gt;
   &lt;!-- XXX DOMB --&gt;
 
-  &lt;h3 id=origin&gt;&lt;span class=secno&gt;4.3 &lt;/span&gt;Origin&lt;/h3&gt;
+  &lt;h3 id=origin&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Origin&lt;/h3&gt;
   &lt;!-- Hallowed are the Ori --&gt;
 
   &lt;p&gt;The &lt;dfn id=origin0&gt;origin&lt;/dfn&gt; of a resource and the &lt;dfn
@@ -29360,7 +30397,7 @@
     &lt;p&gt;Return true.
   &lt;/ol&gt;
 
-  &lt;h4 id=relaxing&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;Relaxing the same-origin
+  &lt;h4 id=relaxing&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Relaxing the same-origin
    restriction&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=domain title=dom-document-domain&gt;&lt;code&gt;domain&lt;/code&gt;&lt;/dfn&gt;
@@ -29428,7 +30465,7 @@
    href=&quot;#domain&quot;&gt;domain&lt;/a&gt;&lt;/code&gt; attribute is used to enable pages on
    different hosts of a domain to access each others' DOMs.
 
-  &lt;h4 id=the-string&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The string representing
+  &lt;h4 id=the-string&gt;&lt;span class=secno&gt;5.3.2 &lt;/span&gt;The string representing
    the script's domain in IDNA format&lt;/h4&gt;
   &lt;!-- XXX this is only used by the TCPConnection stuff and will be
   removed when that part is next updated --&gt;
@@ -29446,7 +30483,7 @@
    tuple, then the string representing the script's domain in IDNA format
    cannot be obtained. (ToUnicode is defined to never fail.)
 
-  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Scripting&lt;/h3&gt;
+  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scripting&lt;/h3&gt;
 
   &lt;p&gt;Various mechanisms can cause author-provided executable code to run in
    the context of a document. These mechanisms include, but are probably not
@@ -29471,7 +30508,7 @@
     scripting features.
   &lt;/ul&gt;
 
-  &lt;h4 id=script0&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Script execution contexts&lt;/h4&gt;
+  &lt;h4 id=script0&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Script execution contexts&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=script2&gt;script execution context&lt;/dfn&gt; of a script is
    defined when that script is created. It is typically a &lt;code&gt;&lt;a
@@ -29532,11 +30569,11 @@
    will disable any event handler attributes, event listeners, timeouts, etc,
    that were set by scripts in the document.
 
-  &lt;h4 id=security4&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Security exceptions&lt;/h4&gt;
+  &lt;h4 id=security4&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;Security exceptions&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Define &lt;dfn id=security9&gt;security exception&lt;/dfn&gt;.
 
-  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;4.4.3 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;&lt;dfn
    id=the-javascript title=&quot;javascript protocol&quot;&gt;The &lt;code
    title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
   &lt;!-- XXXURL merge into URLs section? (we could define 'fetch'/'download' while we're at it?) --&gt;
@@ -29589,13 +30626,13 @@
   &lt;!-- XXXURL JSURL issue --&gt;
 
   &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an HTTP
-   resource with a 200 OK response whose &lt;a href=&quot;#content-type8&quot;
+   resource with a 200 OK response whose &lt;a href=&quot;#content-type5&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is &lt;code
    title=&quot;&quot;&gt;text/html&lt;/code&gt; and whose response body is the return value
    converted to a string value.
 
   &lt;p class=note&gt;Certain contexts, in particular &lt;code&gt;&lt;a
-   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=&quot;#content-type8&quot;
+   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=&quot;#content-type5&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.
 
   &lt;div class=example&gt; &lt;!-- XXXURL JSURL issue --&gt;
@@ -29625,7 +30662,7 @@
    execute (and just return void) in certain cases, e.g. in a sandbox or when
    the user has disabled scripting altogether.
 
-  &lt;h4 id=events&gt;&lt;span class=secno&gt;4.4.4 &lt;/span&gt;Events&lt;/h4&gt;
+  &lt;h4 id=events&gt;&lt;span class=secno&gt;5.4.4 &lt;/span&gt;Events&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;We need to define how to handle events that are to be
    fired on a Document that is no longer the active document of its browsing
@@ -29636,7 +30673,7 @@
    element section, which says scripts don't run when the document isn't
    active.
 
-  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;4.4.4.1. &lt;/span&gt;Event
+  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;5.4.4.1. &lt;/span&gt;Event
    handler attributes&lt;/h5&gt;
 
   &lt;p&gt;&lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; can have &lt;dfn id=event2&gt;event
@@ -30034,7 +31071,7 @@
    otherwise. (The &lt;var title=dom-event-listener&gt;listener&lt;/var&gt; argument is
    emphatically &lt;em&gt;not&lt;/em&gt; the event handler attribute itself.)
 
-  &lt;h5 id=event&gt;&lt;span class=secno&gt;4.4.4.2. &lt;/span&gt;Event firing&lt;/h5&gt;
+  &lt;h5 id=event&gt;&lt;span class=secno&gt;5.4.4.2. &lt;/span&gt;Event firing&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;maybe this should be moved higher up (terminology?
    conformance? DOM?) Also, the whole terminology thing should be changed so
@@ -30125,7 +31162,7 @@
    actions are defined in terms of &lt;em&gt;any&lt;/em&gt; event of the right type on
    that element, not those that are dispatched in expected ways.
 
-  &lt;h5 id=events0&gt;&lt;span class=secno&gt;4.4.4.3. &lt;/span&gt;Events and the &lt;code&gt;&lt;a
+  &lt;h5 id=events0&gt;&lt;span class=secno&gt;5.4.4.3. &lt;/span&gt;Events and the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
 
   &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;Document&lt;/code&gt; in
@@ -30144,7 +31181,7 @@
     bubbling has been prevented.
   &lt;/ol&gt;
 
-  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;4.4.4.4. &lt;/span&gt;Runtime
+  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;5.4.4.4. &lt;/span&gt;Runtime
    script errors&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to user agents that support scripting in
@@ -30192,9 +31229,9 @@
   &lt;p&gt;The initial value of &lt;code title=handler-onerror&gt;&lt;a
    href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; must be &lt;code&gt;undefined&lt;/code&gt;.
 
-  &lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;4.5 &lt;/span&gt;User prompts&lt;/h3&gt;
+  &lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;User prompts&lt;/h3&gt;
 
-  &lt;h4 id=simple0&gt;&lt;span class=secno&gt;4.5.1 &lt;/span&gt;Simple dialogs&lt;/h4&gt;
+  &lt;h4 id=simple0&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Simple dialogs&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=alert title=dom-alert&gt;&lt;code&gt;alert(&lt;var
    title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
@@ -30222,7 +31259,7 @@
    aborts, then the method must return null; otherwise, the method must
    return the string that the user responded with.
 
-  &lt;h4 id=printing&gt;&lt;span class=secno&gt;4.5.2 &lt;/span&gt;Printing&lt;/h4&gt;
+  &lt;h4 id=printing&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Printing&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=print title=dom-print&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
    when invoked, must run the &lt;a href=&quot;#printing0&quot;&gt;printing steps&lt;/a&gt;.
@@ -30284,7 +31321,7 @@
      other.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;h4 id=dialogs&gt;&lt;span class=secno&gt;4.5.3 &lt;/span&gt;Dialogs implemented using
+  &lt;h4 id=dialogs&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Dialogs implemented using
    separate documents&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=showmodaldialog
@@ -30428,7 +31465,7 @@
    of its browsing context, and on setting, must set the &lt;a
    href=&quot;#return&quot;&gt;return value&lt;/a&gt; to the given new value.
 
-  &lt;h4 id=notifications&gt;&lt;span class=secno&gt;4.5.4 &lt;/span&gt;Notifications&lt;/h4&gt;
+  &lt;h4 id=notifications&gt;&lt;span class=secno&gt;5.5.4 &lt;/span&gt;Notifications&lt;/h4&gt;
   &lt;!-- v2 feature requests:
 
    - ability to snooze a notification so it comes again later
@@ -30609,7 +31646,7 @@
    brought to the user's attention, and the &lt;var title=&quot;&quot;&gt;onclick&lt;/var&gt;
    callback should then be invoked.
 
-  &lt;h3 id=browser&gt;&lt;span class=secno&gt;4.6 &lt;/span&gt;Browser state&lt;/h3&gt;
+  &lt;h3 id=browser&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;Browser state&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=navigator title=dom-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
    attribute of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface must
@@ -30627,7 +31664,7 @@
 &lt;!-- XXX there are other attributes! --&gt;};&lt;/pre&gt;
   &lt;!-- also, see window.external.AddSearchProvider() and similar DOM APIs from IE --&gt;
 
-  &lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;4.6.1 &lt;/span&gt;Custom protocol and
+  &lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Custom protocol and
    content handlers&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=registerprotocolhandler
@@ -30773,7 +31810,7 @@
    non-idempotent transaction), as the remote site would not be able to fetch
    the same data.
 
-  &lt;h5 id=security5&gt;&lt;span class=secno&gt;4.6.1.1. &lt;/span&gt;Security and privacy&lt;/h5&gt;
+  &lt;h5 id=security5&gt;&lt;span class=secno&gt;5.6.1.1. &lt;/span&gt;Security and privacy&lt;/h5&gt;
 
   &lt;p&gt;These mechanisms can introduce a number of concerns, in particular
    privacy concerns.
@@ -30855,7 +31892,7 @@
    trust the third-party handler, a decision many users are unable to make or
    even understand).
 
-  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;4.6.1.2. &lt;/span&gt;Sample user
+  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;5.6.1.2. &lt;/span&gt;Sample user
    interface&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -30941,15 +31978,15 @@
    would work equivalently, but for unknown MIME types instead of unknown
    protocols.
 
-  &lt;h3 id=offline&gt;&lt;span class=secno&gt;4.7 &lt;/span&gt;Offline Web applications&lt;/h3&gt;
+  &lt;h3 id=offline&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;Offline Web applications&lt;/h3&gt;
 
-  &lt;h4 id=introduction1&gt;&lt;span class=secno&gt;4.7.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction1&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p class=big-issue&gt;...
 
-  &lt;h4 id=appcache&gt;&lt;span class=secno&gt;4.7.2 &lt;/span&gt;Application caches&lt;/h4&gt;
+  &lt;h4 id=appcache&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Application caches&lt;/h4&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
   &lt;p&gt;An &lt;dfn id=application0&gt;application cache&lt;/dfn&gt; is a collection of
@@ -31087,9 +32124,9 @@
    &lt;li&gt;which application cache the user prefers.
   &lt;/ul&gt;
 
-  &lt;h4 id=manifests&gt;&lt;span class=secno&gt;4.7.3 &lt;/span&gt;The cache manifest syntax&lt;/h4&gt;
+  &lt;h4 id=manifests&gt;&lt;span class=secno&gt;5.7.3 &lt;/span&gt;The cache manifest syntax&lt;/h4&gt;
 
-  &lt;h5 id=writing&gt;&lt;span class=secno&gt;4.7.3.1. &lt;/span&gt;Writing cache manifests&lt;/h5&gt;
+  &lt;h5 id=writing&gt;&lt;span class=secno&gt;5.7.3.1. &lt;/span&gt;Writing cache manifests&lt;/h5&gt;
 
   &lt;p&gt;Manifests must be served using the &lt;code
    title=&quot;&quot;&gt;text/cache-manifest&lt;/code&gt; MIME type. All resources served using
@@ -31223,7 +32260,7 @@
 
   &lt;p&gt;URIs in manifests must not have fragment identifiers.
 
-  &lt;h5 id=parsing0&gt;&lt;span class=secno&gt;4.7.3.2. &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
+  &lt;h5 id=parsing0&gt;&lt;span class=secno&gt;5.7.3.2. &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=parse0&gt;parse a manifest&lt;/dfn&gt;, it means
    that the user agent must run the following steps:
@@ -31453,7 +32490,7 @@
    the cached copy will only be used if it is opened from a top-level
    browsing context.
 
-  &lt;h4 id=updating1&gt;&lt;span class=secno&gt;4.7.4 &lt;/span&gt;Updating an application
+  &lt;h4 id=updating1&gt;&lt;span class=secno&gt;5.7.4 &lt;/span&gt;Updating an application
    cache&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is required (by other parts of this specification)
@@ -31853,7 +32890,7 @@
      progress. Abort the update process.
   &lt;/ol&gt;
 
-  &lt;h4 id=processing2&gt;&lt;span class=secno&gt;4.7.5 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing2&gt;&lt;span class=secno&gt;5.7.5 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;The processing model of application caches for offline support in Web
    applications is part of the &lt;a href=&quot;#navigate&quot;
@@ -32025,7 +33062,7 @@
    update process&lt;/a&gt; for that cache; otherwise, nothing special happens with
    respect to application caches.
 
-  &lt;h5 id=changes&gt;&lt;span class=secno&gt;4.7.5.1. &lt;/span&gt;Changes to the networking
+  &lt;h5 id=changes&gt;&lt;span class=secno&gt;5.7.5.1. &lt;/span&gt;Changes to the networking
    model&lt;/h5&gt;
 
   &lt;p&gt;When a browsing context is associated with an &lt;a
@@ -32084,7 +33121,7 @@
    cache has been primed the first time), making the testing of offline
    applications simpler.
 
-  &lt;h4 id=application&gt;&lt;span class=secno&gt;4.7.6 &lt;/span&gt;Application cache API&lt;/h4&gt;
+  &lt;h4 id=application&gt;&lt;span class=secno&gt;5.7.6 &lt;/span&gt;Application cache API&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; {
 
@@ -32446,7 +33483,7 @@
      href=&quot;#applicationcache&quot;&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object.
   &lt;/dl&gt;
 
-  &lt;h4 id=browser0&gt;&lt;span class=secno&gt;4.7.7 &lt;/span&gt;Browser state&lt;/h4&gt;
+  &lt;h4 id=browser0&gt;&lt;span class=secno&gt;5.7.7 &lt;/span&gt;Browser state&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=navigator.online
    title=dom-navigator-onLine&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -32471,9 +33508,9 @@
    href=&quot;#the-body1&quot;&gt;the body element&lt;/a&gt;.&lt;/p&gt;
   &lt;!-- XXX ononline onoffline need to be defined --&gt;
 
-  &lt;h3 id=history&gt;&lt;span class=secno&gt;4.8 &lt;/span&gt;Session history and navigation&lt;/h3&gt;
+  &lt;h3 id=history&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Session history and navigation&lt;/h3&gt;
 
-  &lt;h4 id=the-session&gt;&lt;span class=secno&gt;4.8.1 &lt;/span&gt;The session history of
+  &lt;h4 id=the-session&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;The session history of
    browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;The sequence of &lt;code&gt;Document&lt;/code&gt;s in a &lt;a
@@ -32589,7 +33626,7 @@
    timers, intervals, XMLHttpRequests, database transactions, etc, must be
    killed
 
-  &lt;h4 id=the-history&gt;&lt;span class=secno&gt;4.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-history&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#history2&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=history2&gt;History&lt;/dfn&gt; {
@@ -32738,7 +33775,7 @@
    the last entry for that &lt;code&gt;Document&lt;/code&gt; object in the session
    history.
 
-  &lt;h4 id=activating&gt;&lt;span class=secno&gt;4.8.3 &lt;/span&gt;&lt;dfn id=activating0
+  &lt;h4 id=activating&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;&lt;dfn id=activating0
    title=&quot;activate the state object&quot;&gt;Activating state object entries&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an entry in the session history is activated (which happens during
@@ -32789,7 +33826,7 @@
    represents the context information for the event, or null, if the state
    represented is the initial state of the &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;h4 id=the-location&gt;&lt;span class=secno&gt;4.8.4 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-location&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a browsing context's session
@@ -32823,13 +33860,13 @@
 
   &lt;!-- XXXURL change to URL
  --&gt;  // &lt;a href=&quot;#uri-decomposition&quot;&gt;URI decomposition attributes&lt;/a&gt; &lt;!-- blame brendan for these &quot;innovative&quot; names --&gt;
-           attribute DOMString &lt;a href=&quot;#protocol&quot; title=dom-location-protocol&gt;protocol&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#host&quot; title=dom-location-host&gt;host&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#hostname&quot; title=dom-location-hostname&gt;hostname&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#port&quot; title=dom-location-port&gt;port&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#pathname&quot; title=dom-location-pathname&gt;pathname&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#search&quot; title=dom-location-search&gt;search&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#hash&quot; title=dom-location-hash&gt;hash&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#protocol0&quot; title=dom-location-protocol&gt;protocol&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#host0&quot; title=dom-location-host&gt;host&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#hostname0&quot; title=dom-location-hostname&gt;hostname&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#port0&quot; title=dom-location-port&gt;port&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#pathname0&quot; title=dom-location-pathname&gt;pathname&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#search0&quot; title=dom-location-search&gt;search&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#hash0&quot; title=dom-location-hash&gt;hash&lt;/a&gt;;
 };&lt;/pre&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
@@ -32884,8 +33921,8 @@
   &lt;p&gt;Relative &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; arguments for &lt;code
    title=dom-location-assign&gt;&lt;a href=&quot;#assign&quot;&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=dom-location-replace&gt;&lt;a href=&quot;#replace&quot;&gt;replace()&lt;/a&gt;&lt;/code&gt; must be
-   resolved relative to the &lt;a href=&quot;#scripts0&quot; title=&quot;script's base
-   URI&quot;&gt;base URI of the script&lt;/a&gt; that made the method call.&lt;/p&gt;
+   resolved relative to the &lt;a href=&quot;#scripts&quot; title=&quot;script's base URI&quot;&gt;base
+   URI of the script&lt;/a&gt; that made the method call.&lt;/p&gt;
   &lt;!-- XXX what about if
   the base URI is data: or javascript: or about: or something else
   without a way to resolve base URIs? --&gt;
@@ -32893,13 +33930,13 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; interface also has
    the complement of &lt;a href=&quot;#uri-decomposition&quot;&gt;URI decomposition
-   attributes&lt;/a&gt;, &lt;dfn id=protocol
-   title=dom-location-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=host
-   title=dom-location-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=port
-   title=dom-location-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=hostname
-   title=dom-location-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=pathname
-   title=dom-location-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=search
-   title=dom-location-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=hash
+   attributes&lt;/a&gt;, &lt;dfn id=protocol0
+   title=dom-location-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=host0
+   title=dom-location-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=port0
+   title=dom-location-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=hostname0
+   title=dom-location-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=pathname0
+   title=dom-location-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=search0
+   title=dom-location-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=hash0
    title=dom-location-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;. These must follow the
    rules given for URI decomposition attributes, with the &lt;a href=&quot;#input&quot;
    title=concept-uda-input&gt;input&lt;/a&gt; being the address of the page
@@ -32921,7 +33958,7 @@
 user reload must be equivalent to .reload()
 --&gt;
 
-  &lt;h5 id=security6&gt;&lt;span class=secno&gt;4.8.4.1. &lt;/span&gt;Security&lt;/h5&gt;
+  &lt;h5 id=security6&gt;&lt;span class=secno&gt;5.8.4.1. &lt;/span&gt;Security&lt;/h5&gt;
 
   &lt;p&gt;User agents must raise a &lt;a href=&quot;#security9&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of a &lt;code&gt;&lt;a
@@ -32944,7 +33981,7 @@
    title=dom-location-href&gt;&lt;a href=&quot;#href5&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attribute's
    setter.
 
-  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;4.8.5 &lt;/span&gt;Implementation notes
+  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;Implementation notes
    for session history&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -32983,9 +34020,9 @@
    that are invoked on a timer, or from event handlers that do not represent
    a clear user action, or that are invoked in rapid succession.
 
-  &lt;h3 id=browsing0&gt;&lt;span class=secno&gt;4.9 &lt;/span&gt;Browsing the Web&lt;/h3&gt;
+  &lt;h3 id=browsing0&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Browsing the Web&lt;/h3&gt;
 
-  &lt;h4 id=navigating&gt;&lt;span class=secno&gt;4.9.1 &lt;/span&gt;Navigating across
+  &lt;h4 id=navigating&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;Navigating across
    documents&lt;/h4&gt;
 
   &lt;p&gt;Certain actions cause the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to
@@ -33148,7 +34185,7 @@
 
    &lt;li&gt;
     &lt;p&gt;If the document's out-of-band metadata (e.g. HTTP headers), not
-     counting any &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;type
+     counting any &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;type
      information&lt;/a&gt; (such as the Content-Type HTTP header), requires some
      sort of processing that will not affect the browsing context, then
      perform that processing and abort these steps.&lt;/p&gt;
@@ -33303,7 +34340,7 @@
     &lt;/dl&gt;
   &lt;/ol&gt;
 
-  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;4.9.2 &lt;/span&gt;&lt;dfn id=page-load
+  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;&lt;dfn id=page-load
    title=navigate-html&gt;Page load processing model for HTML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an HTML document is to be loaded in a &lt;a href=&quot;#browsing1&quot;&gt;browsing
@@ -33317,7 +34354,7 @@
    characters for use in the &lt;span&gt;tokeniser&lt;/span&gt;&lt;!-- XXX xref
   --&gt;. This
    process relies, in part, on character encoding information found in the
-   real &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt;
+   real &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt;
    of the resource; the &quot;sniffed type&quot; is not used for this purpose.&lt;/p&gt;
   &lt;!-- next two paragraphs are nearly identical to the navigate-text
   section, keep them in sync --&gt;
@@ -33334,7 +34371,7 @@
    title=concept-appcache-init-with-attribute&gt;Application cache selection&lt;/a&gt;
    happens &lt;a href=&quot;#parser-appcache&quot;&gt;in the HTML parser&lt;/a&gt;.
 
-  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;4.9.3 &lt;/span&gt;&lt;dfn id=page-load0
+  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;&lt;dfn id=page-load0
    title=navigate-xml&gt;Page load processing model for XML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When faced with displaying an XML file inline, user agents must first
@@ -33359,7 +34396,7 @@
    inserted into the DOM, the user agent must run the &lt;a href=&quot;#application2&quot;
    title=concept-appcache-init-with-attribute&gt;application cache selection
    algorithm&lt;/a&gt; with the value of that attribute, resolved relative to the
-   &lt;a href=&quot;#elements2&quot;&gt;element's base URI&lt;/a&gt;, as the manifest URI.
+   &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;, as the manifest URI.
    Otherwise, as soon as the root element is inserted into the DOM, the user
    agent must run the &lt;a href=&quot;#application3&quot;
    title=concept-appcache-init-no-attribute&gt;application cache selection
@@ -33394,7 +34431,7 @@
   &lt;p&gt;Error messages from the parse process (e.g. namespace well-formedness
    errors) may be reported inline by mutating the &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;4.9.4 &lt;/span&gt;&lt;dfn id=page-load1
+  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;&lt;dfn id=page-load1
    title=navigate-text&gt;Page load processing model for text files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a plain text document is to be loaded in a &lt;a
@@ -33403,7 +34440,7 @@
    title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, create an &lt;a href=&quot;#html-0&quot;&gt;HTML
    parser&lt;/a&gt;, associate it with the document, act as if the tokeniser had
    emitted a start tag token with the tag name &quot;pre&quot;, set the &lt;a
-   href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage's &lt;a href=&quot;#content2&quot;&gt;content
+   href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage's &lt;a href=&quot;#content3&quot;&gt;content
    model flag&lt;/a&gt; to &lt;i&gt;PLAINTEXT&lt;/i&gt;, and begin to pass the stream of
    characters in the plain text document to that tokeniser.
 
@@ -33437,7 +34474,7 @@
    binding, providing script, giving the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;4.9.5 &lt;/span&gt;&lt;dfn id=page-load2
+  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;&lt;dfn id=page-load2
    title=navigate-image&gt;Page load processing model for images&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an image resource is to be loaded in a &lt;a
@@ -33473,7 +34510,7 @@
    binding, to provide a script, to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;4.9.6 &lt;/span&gt;&lt;dfn id=page-load3
+  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;5.9.6 &lt;/span&gt;&lt;dfn id=page-load3
    title=navigate-plugin&gt;Page load processing model for content that uses
    plugins&lt;/dfn&gt;&lt;/h4&gt;
 
@@ -33516,7 +34553,7 @@
    href=&quot;#embed&quot;&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a
    href=&quot;#sandboxPluginEmbed&quot;&gt;fail to render the content&lt;/a&gt;.
 
-  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;4.9.7 &lt;/span&gt;&lt;dfn id=page-load4
+  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;5.9.7 &lt;/span&gt;&lt;dfn id=page-load4
    title=navigate-ua-inline&gt;Page load processing model for inline content
    that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
 
@@ -33543,7 +34580,7 @@
    the page has been completely set up, the user agent must &lt;a
    href=&quot;#update2&quot;&gt;update the session history with the new page&lt;/a&gt;.
 
-  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;4.9.8 &lt;/span&gt;&lt;dfn id=navigating0
+  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;5.9.8 &lt;/span&gt;&lt;dfn id=navigating0
    title=navigate-fragid&gt;Navigating to a fragment identifier&lt;/dfn&gt;&lt;/h4&gt;
   &lt;!-- XXXURL change to URL; XXXDOCURL? --&gt;
 
@@ -33609,7 +34646,7 @@
    an element; otherwise there is no &lt;i&gt;target element&lt;/i&gt;. &lt;a
    href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt;
 
-  &lt;h4 id=history0&gt;&lt;span class=secno&gt;4.9.9 &lt;/span&gt;History traversal&lt;/h4&gt;
+  &lt;h4 id=history0&gt;&lt;span class=secno&gt;5.9.9 &lt;/span&gt;History traversal&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is required to &lt;dfn id=traverse&gt;traverse the
    history&lt;/dfn&gt; to a &lt;i&gt;specified entry&lt;/i&gt;, the user agent must act as
@@ -33741,809 +34778,12 @@
   &lt;p class=big-issue&gt;how does the changing of the global attributes affect
    .watch() when seen from other Windows?
 
-  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;4.10 &lt;/span&gt;Determining the
-   type of a new resource in a browsing context&lt;/h3&gt;
-
-  &lt;p class=warning&gt;It is imperative that the rules in this section be
-   followed exactly. When a user agent uses different heuristics for content
-   type detection than the server expects, security problems can occur. For
-   example, if a server believes that the client will treat a contributed
-   file as an image (and thus treat it as benign), but a Web browser believes
-   the content to be HTML (and thus execute any scripts contained therein),
-   the end user can be exposed to malicious content, making the user
-   vulnerable to cookie theft attacks and other cross-site scripting attacks.
-
-  &lt;p&gt;The &lt;dfn id=sniffed title=&quot;Content-Type sniffing&quot;&gt;sniffed type of a
-   resource&lt;/dfn&gt; must be found as follows:
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by the &lt;a
-     href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt; for
-     the resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
-     parameters). If there is no such type, jump to the &lt;em
-     title=&quot;content-type sniffing: unknown type&quot;&gt;&lt;a
-     href=&quot;#content-type5&quot;&gt;unknown type&lt;/a&gt;&lt;/em&gt; step below.
-
-   &lt;li&gt;
-    &lt;p&gt;If the user agent is configured to strictly obey Content-Type headers
-     for this resource, then jump to the last step in this set of steps.
-
-   &lt;li&gt;
-    &lt;p&gt;If the resource was fetched over an HTTP protocol and there is an HTTP
-     Content-Type header and the value of the first such header has bytes
-     that exactly match one of the following lines:&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-
-       &lt;th&gt;Textual representation
-
-     &lt;tbody&gt;
-      &lt;tr&gt;&lt;!-- Very old Apache default --&gt;
-
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e
-
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
-
-      &lt;tr&gt;&lt;!-- Old Apache default --&gt;
-
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 49 53
-        4f 2d 38 38 35 39 2d 31
-
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=ISO-8859-1&lt;/code&gt;
-
-      &lt;tr&gt;&lt;!-- Debian's arbitrarily different Apache default --&gt;
-
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 69 73
-        6f 2d 38 38 35 39 2d 31
-
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=iso-8859-1&lt;/code&gt;
-
-      &lt;tr&gt;&lt;!-- Someone else's arbitrarily different Apache default (who?) --&gt;
-
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 55 54
-        46 2d 38
-
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=UTF-8&lt;/code&gt;
-    &lt;/table&gt;
-
-    &lt;p&gt;...then jump to the &lt;em title=&quot;content-type sniffing: text or
-     binary&quot;&gt;&lt;a href=&quot;#content-type4&quot;&gt;text or binary&lt;/a&gt;&lt;/em&gt; section below.&lt;/p&gt;
-    &lt;!-- while IE sniffs all text/plain, this will continue to grow as
-    people add new defaults. Hopefully IE will stop the madness in due
-    course and stop sniffing anything but the above... --&gt;
-    
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
-     &quot;application/unknown&quot;, jump to the &lt;em title=&quot;content-type sniffing:
-     unknown type&quot;&gt;&lt;a href=&quot;#content-type5&quot;&gt;unknown type&lt;/a&gt;&lt;/em&gt; step below.&lt;/p&gt;
-    &lt;!-- In a study looking at many billions of pages whose first five
-   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
-   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
-   &quot;application/unknown&quot; was used about once for every 35000 pages
-   labeled &quot;text/html&quot;. --&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if it is
-     either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed type of the
-     resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return that and abort
-     these steps.
-   &lt;/li&gt;
-   &lt;!-- we don't want
-   image/svg+xml going through the next step --&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type supported by the
-     user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;, &quot;image/jpeg&quot;, etc), then jump
-     to the &lt;em title=&quot;content-type sniffing: image&quot;&gt;&lt;a
-     href=&quot;#content-type6&quot;&gt;images&lt;/a&gt;&lt;/em&gt; section below.
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then jump to the
-     &lt;em title=&quot;content-type sniffing: feed or html&quot;&gt;&lt;a
-     href=&quot;#content-type7&quot;&gt;feed or HTML&lt;/a&gt;&lt;/em&gt; section below.
-
-   &lt;li&gt;
-    &lt;p&gt;The sniffed type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.
-  &lt;/ol&gt;
-
-  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;4.10.1 &lt;/span&gt;&lt;dfn
-   id=content-type4&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
-     available.
-
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the smaller of either 512 or the number
-     of bytes already available.
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is 4 or more, and the first bytes of the file
-     match one of the following byte sets:&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-
-       &lt;th&gt;Description
-
-     &lt;tbody&gt;
-      &lt;tr&gt;
-       &lt;td&gt;FE FF
-
-       &lt;td&gt;UTF-16BE BOM
-        &lt;!-- followed by a character --&gt;&lt;!-- nobody uses this: or UTF-32LE BOM --&gt;
-        
-
-      &lt;tr&gt;
-       &lt;td&gt;FF FE
-
-       &lt;td&gt;UTF-16LE BOM &lt;!-- followed by a character --&gt;
-        &lt;!-- nobody uses this
-      &lt;tr&gt;
-       &lt;td&gt;00 00 FE FF
-       &lt;td&gt;UTF-32BE BOM
---&gt;
-        &lt;!-- this one is redundant with the one above
-      &lt;tr&gt;
-       &lt;td&gt;FF FE 00 00
-       &lt;td&gt;UTF-32LE BOM
---&gt;
-        
-
-      &lt;tr&gt;
-       &lt;td&gt;EF BB BF
-
-       &lt;td&gt;UTF-8 BOM
-        &lt;!-- followed by a character, or the first byte of a multiple character sequence --&gt;
-        &lt;!-- nobody uses this
-      &lt;tr&gt;
-       &lt;td&gt;DD 73 66 73
-       &lt;td&gt;UTF-EBCDIC BOM
---&gt;
-        
-    &lt;/table&gt;
-
-    &lt;p&gt;...then the sniffed type of the resource is &quot;text/plain&quot;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, if any of the first &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; bytes of the
-     resource are in one of the following byte ranges:&lt;/p&gt;
-    &lt;!-- This byte list is based on RFC 2046 Section 4.1.2. Characters
-    in the range 0x00-0x1F, with the exception of 0x09, 0x0A, 0x0C,
-    0x0D (ASCII for TAB, LF, FF, and CR), and character 0x1B
-    (reportedly used by some encodings as a shift escape), are
-    invalid. Thus, if we see them, we assume it's not text. --&gt;
-    
-    &lt;ul class=brief&gt;
-     &lt;li&gt; 0x00 - 0x08
-
-     &lt;li&gt; 0x0B
-
-     &lt;li&gt; 0x0E - 0x1A
-
-     &lt;li&gt; 0x1C - 0x1F
-    &lt;/ul&gt;
-
-    &lt;p&gt;...then the sniffed type of the resource is
-     &quot;application/octet-stream&quot;.&lt;/p&gt;
-
-    &lt;p class=big-issue&gt;maybe we should invoke the &quot;Content-Type sniffing:
-     image&quot; section now, falling back on &quot;application/octet-stream&quot;.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, the sniffed type of the resource is &quot;text/plain&quot;.
-  &lt;/ol&gt;
-
-  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;4.10.2 &lt;/span&gt;&lt;dfn
-   id=content-type5&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
-     available.
-
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;stream length&lt;/var&gt; be the smaller of either 512 or
-     the number of bytes already available.
-
-   &lt;li&gt;
-    &lt;p&gt;For each row in the table below:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;If the row has no &quot;&lt;em&gt;WS&lt;/em&gt;&quot; bytes:
-
-     &lt;dd&gt;
-      &lt;ol&gt;
-       &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; be the length of the
-        pattern (number of bytes described by the cell in the second column
-        of the row).
-
-       &lt;li&gt;If &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; is smaller than &lt;var
-        title=&quot;&quot;&gt;stream length&lt;/var&gt; then skip this row.
-
-       &lt;li&gt;Apply the &quot;and&quot; operator to the first &lt;var title=&quot;&quot;&gt;pattern
-        length&lt;/var&gt; bytes of the resource and the given mask (the bytes in
-        the cell of first column of that row), and let the result be the &lt;var
-        title=&quot;&quot;&gt;data&lt;/var&gt;.
-
-       &lt;li&gt;If the bytes of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; matches the given
-        pattern bytes exactly, then the sniffed type of the resource is the
-        type given in the cell of the third column in that row; abort these
-        steps.
-      &lt;/ol&gt;
-
-     &lt;dt&gt;If the row has a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
-
-     &lt;dd&gt;
-      &lt;ol&gt;
-       &lt;li&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; be an index into
-         the mask and pattern byte strings of the row.
-
-       &lt;li&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; be an index into
-         the byte stream being examined.
-
-       &lt;li&gt;
-        &lt;p&gt;&lt;em&gt;Loop&lt;/em&gt;: If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;
-         points beyond the end of the byte stream, then this row doesn't
-         match, skip this row.
-
-       &lt;li&gt;
-        &lt;p&gt;Examine the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of
-         the byte stream as follows:&lt;/p&gt;
-
-        &lt;dl class=switch&gt;
-         &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the
-          pattern is a normal hexadecimal byte and not a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
-
-         &lt;dd&gt;
-          &lt;p&gt;If the &quot;and&quot; operator, applied to the &lt;var
-           title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the stream and the
-           &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the mask,
-           yield a value different that the &lt;var
-           title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the pattern, then
-           skip this row.&lt;/p&gt;
-
-          &lt;p&gt;Otherwise, increment &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;
-           to the next byte in the mask and pattern and &lt;var
-           title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in the byte
-           stream.&lt;/p&gt;
-
-         &lt;dt&gt;Otherwise, if the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th
-          byte of the pattern is a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:
-
-         &lt;dd&gt;
-          &lt;p&gt;&quot;&lt;em&gt;WS&lt;/em&gt;&quot; means &quot;whitespace&quot;, and allows insignificant
-           whitespace to be skipped when sniffing for a type signature.&lt;/p&gt;
-
-          &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the
-           stream is one of 0x09 (ASCII TAB), 0x0A (ASCII LF), 0x0C (ASCII
-           FF), 0x0D (ASCII CR), or 0x20 (ASCII space), then increment only
-           the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
-           the byte stream.&lt;/p&gt;
-
-          &lt;p&gt;Otherwise, increment only the &lt;var
-           title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in the
-           mask and pattern.&lt;/p&gt;
-        &lt;/dl&gt;
-
-       &lt;li&gt;
-        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; does not point
-         beyond the end of the mask and pattern byte strings, then jump back
-         to the &lt;em&gt;loop&lt;/em&gt; step in this algorithm.
-
-       &lt;li&gt;
-        &lt;p&gt;Otherwise, the sniffed type of the resource is the type given in
-         the cell of the third column in that row; abort these steps.
-      &lt;/ol&gt;
-    &lt;/dl&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;As a last-ditch effort, jump to the &lt;a href=&quot;#content-type4&quot;
-     title=&quot;content-type sniffing: text or binary&quot;&gt;text or binary&lt;/a&gt;
-     section.
-  &lt;/ol&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th colspan=2&gt;Bytes in Hexadecimal
-
-     &lt;th rowspan=2&gt;Sniffed type
-
-     &lt;th rowspan=2&gt;Comment
-
-    &lt;tr&gt;
-     &lt;th&gt;Mask
-
-     &lt;th&gt;Pattern
-
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF DF DF DF FF DF DF DF DF
-
-     &lt;td&gt;3C 21 44 4F 43 54 59 50 45 20 48 54 4D 4C &lt;!-- &quot;&lt;!DOCTYPE HTML&quot; --&gt;
-      &lt;!-- common in static data --&gt;
-
-     &lt;td&gt;text/html
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;!DOCTYPE HTML&lt;/code&gt;&quot; in US-ASCII or
-      compatible encodings, case-insensitively.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF
-
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 54 4D 4C &lt;!-- &quot;&lt;HTML&quot; --&gt;
-      &lt;!-- common in static data --&gt;
-
-     &lt;td&gt;text/html
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HTML&lt;/code&gt;&quot; in US-ASCII or
-      compatible encodings, case-insensitively, possibly with leading spaces.
-      
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF
-
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 45 41 44 &lt;!-- &quot;&lt;HEAD&quot; --&gt;
-      &lt;!-- common in static data --&gt;
-
-     &lt;td&gt;text/html
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HEAD&lt;/code&gt;&quot; in US-ASCII or
-      compatible encodings, case-insensitively, possibly with leading spaces.
-      
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF DF DF
-
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 53 43 52 49 50 54 &lt;!-- &quot;&lt;SCRIPT&quot; --&gt;
-      &lt;!-- common in dynamic data --&gt;
-
-     &lt;td&gt;text/html
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;SCRIPT&lt;/code&gt;&quot; in US-ASCII or
-      compatible encodings, case-insensitively, possibly with leading spaces.
-      
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF
-
-     &lt;td&gt;25 50 44 46 2D
-      &lt;!-- &quot;%PDF-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
-      
-
-     &lt;td&gt;application/pdf
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%PDF-&lt;/code&gt;&quot;, the PDF signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF FF FF FF FF FF
-
-     &lt;td&gt;25 21 50 53 2D 41 64 6F 62 65 2D
-      &lt;!-- &quot;%!PS-Adobe-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
-      
-
-     &lt;td&gt;application/postscript
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%!PS-Adobe-&lt;/code&gt;&quot;, the PostScript
-      signature. &lt;!-- copied from the section below --&gt;
-
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF
-
-     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
-
-     &lt;td&gt;image/gif
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF
-
-     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
-
-     &lt;td&gt;image/gif
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF FF FF
-
-     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A
-      &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
-
-     &lt;td&gt;image/png
-
-     &lt;td&gt;The PNG signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF
-
-     &lt;td&gt;FF D8 FF
-      &lt;!-- SOI marker followed by the first byte of another marker --&gt;
-
-     &lt;td&gt;image/jpeg
-
-     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF
-
-     &lt;td&gt;42 4D
-
-     &lt;td&gt;image/bmp
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF
-
-     &lt;td&gt;00 00 01 00
-
-     &lt;td&gt;image/vnd.microsoft.icon
-
-     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format
-      signature.
-  &lt;/table&gt;
-
-  &lt;p&gt;User agents may support further types if desired, by implicitly adding
-   to the above table. However, user agents should not use any other patterns
-   for types already mentioned in the table above, as this could then be used
-   for privilege escalation (where, e.g., a server uses the above table to
-   determine that content is not HTML and thus safe from XSS attacks, but
-   then a user agent detects it as HTML anyway and allows script to execute).
-
-  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;4.10.3 &lt;/span&gt;&lt;dfn
-   id=content-type6&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;If the first bytes of the file match one of the byte sequences in the
-   first columns of the following table, then the sniffed type of the
-   resource is the type given in the corresponding cell in the second column
-   on the same row:
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th&gt;Bytes in Hexadecimal
-
-     &lt;th&gt;Sniffed type
-
-     &lt;th&gt;Comment &lt;!-- update the table above if you change this! --&gt;
-
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
-
-     &lt;td&gt;image/gif
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
-
-     &lt;td&gt;image/gif
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A
-      &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
-
-     &lt;td&gt;image/png
-
-     &lt;td&gt;The PNG signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;FF D8 FF
-      &lt;!-- SOI marker followed by the first byte of another marker --&gt;
-
-     &lt;td&gt;image/jpeg
-
-     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
-
-    &lt;tr&gt;
-     &lt;td&gt;42 4D
-
-     &lt;td&gt;image/bmp
-
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
-
-    &lt;tr&gt;
-     &lt;td&gt;00 00 01 00
-
-     &lt;td&gt;image/vnd.microsoft.icon
-
-     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format
-      signature.
-      &lt;!-- XXX Mozilla also detects ART (AOL proprietary format) and Windows Cursor files --&gt;
-      
-  &lt;/table&gt;
-
-  &lt;p&gt;User agents must ignore any rows for image types that they do not
-   support.
-
-  &lt;p&gt;Otherwise, the sniffed type of the resource is the same as its &lt;var
-   title=&quot;&quot;&gt;official type&lt;/var&gt;.
-
-  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;4.10.4 &lt;/span&gt;&lt;dfn
-   id=content-type7&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
-  &lt;!-- mostly based on:
-   <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
-   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192</A>
-   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127</A>
-  --&gt;
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;The user agent may wait for 512 or more bytes of the resource to be
-     available.
-
-   &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; be the stream of bytes, and let &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;i&lt;/var&gt;]&lt;/span&gt; represent the byte in
-     &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; with position &lt;var title=&quot;&quot;&gt;i&lt;/var&gt;, treating &lt;var
-     title=&quot;&quot;&gt;s&lt;/var&gt; as zero-indexed (so the first byte is at &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;i&lt;/var&gt;=0&lt;/span&gt;).
-
-   &lt;li&gt;
-    &lt;p&gt;If at any point this algorithm requires the user agent to determine
-     the value of a byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; which is not yet available,
-     or which is past the first 512 bytes of the resource, or which is beyond
-     the end of the resource, the user agent must stop this algorithm, and
-     assume that the sniffed type of the resource is &quot;text/html&quot;.&lt;/p&gt;
-
-    &lt;p class=note&gt;User agents are allowed, by the first step of this
-     algorithm, to wait until the first 512 bytes of the resource are
-     available.
-
-   &lt;li&gt;
-    &lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to 0.
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[0]&lt;/span&gt; is 0xEF, &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;s&lt;/var&gt;[1]&lt;/span&gt; is 0xBB, and &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;s&lt;/var&gt;[2]&lt;/span&gt; is 0xBF, then set &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to
-     3. (This skips over a leading UTF-8 BOM, if any.)
-
-   &lt;li&gt;
-    &lt;p&gt;&lt;i&gt;Loop start:&lt;/i&gt; Examine &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;dl
-     class=switch&gt;&lt;!-- skip whitespace (S token as defined in XML 1.0 section 2.3; production [3] --&gt;
-
-     &lt;dt&gt;If it is 0x09 (ASCII tab), 0x20 (ASCII space), 0x0A (ASCII LF), or
-      0x0D (ASCII CR)
-
-     &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and repeat this step.
-
-     &lt;dt&gt;If it is 0x3C (ASCII &quot;&lt;code title=&quot;&quot;&gt;&lt;&lt;/code&gt;&quot;)
-
-     &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and go to the next step.
-
-     &lt;dt&gt;If it is anything else
-
-     &lt;dd&gt;The sniffed type of the resource is &quot;text/html&quot;. Abort these steps.
-    &lt;/dl&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If the bytes with positions &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are exactly equal
-     to 0x21, 0x2D, 0x2D respectively (ASCII for &quot;&lt;code
-     title=&quot;&quot;&gt;!--&lt;/code&gt;&quot;), then:&lt;/p&gt;
-
-    &lt;ol&gt;
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3.&lt;/li&gt;
-     &lt;!-- skips past the &quot; ! - - &quot; --&gt;
-
-     &lt;li&gt;If the bytes with positions &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;&lt;/span&gt; to
-      &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are
-      exactly equal to 0x2D, 0x2D, 0x3E respectively (ASCII for &quot;&lt;code
-      title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot;), then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3
-      and jump back to the previous step (the step labeled &lt;i&gt;loop start&lt;/i&gt;)
-      in the overall algorithm in this section.
-
-     &lt;li&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
-
-     &lt;li&gt;Return to step 2 in these substeps.
-    &lt;/ol&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x21
-     (ASCII &quot;&lt;code title=&quot;&quot;&gt;!&lt;/code&gt;&quot;):&lt;/p&gt;
-    &lt;!-- this skips past a DOCTYPE if there is one. It is brain-dead
-    because we don't have to be clever to parse the Atom and RSS x.y
-    DOCTYPEs, as they don't do anything clever like have internal
-    subsets or quoted &quot;&gt;&quot; characters. If this fails, then that's ok,
-    we'll treat it as HTML which is fine since we know it's not a feed
-    in that case. --&gt;
-    
-    &lt;ol&gt;
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
-
-     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; equal
-      0x3E, then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the
-      step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this
-      section.
-
-     &lt;li&gt;Otherwise, return to step 1 in these substeps.
-    &lt;/ol&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x3F
-     (ASCII &quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;):&lt;/p&gt;
-
-    &lt;ol&gt;
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.
-
-     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; and
-      &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+1]&lt;/span&gt; equal
-      0x3F and 0x3E respectively, then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1
-      and jump back to the step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall
-      algorithm in this section.
-
-     &lt;li&gt;Otherwise, return to step 1 in these substeps.
-    &lt;/ol&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, if the bytes in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt; match any of the sequences of bytes in the first
-     column of the following table, then the user agent must follow the steps
-     given in the corresponding cell in the second column of the same row.&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-
-       &lt;th&gt;Requirement
-
-       &lt;th&gt;Comment
-
-     &lt;tbody&gt;
-      &lt;tr&gt;
-       &lt;td&gt;72 73 73
-
-       &lt;td&gt;The sniffed type of the resource is &quot;application/rss+xml&quot;; abort
-        these steps
-
-       &lt;td&gt;The three ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rss&lt;/code&gt;&quot;
-
-      &lt;tr&gt;
-       &lt;td&gt;66 65 65 64
-
-       &lt;td&gt;The sniffed type of the resource is &quot;application/atom+xml&quot;; abort
-        these steps
-
-       &lt;td&gt;The four ASCII characters &quot;&lt;code title=&quot;&quot;&gt;feed&lt;/code&gt;&quot;
-
-      &lt;tr&gt;
-       &lt;td&gt;72 64 66 3A 52 44 46
-
-       &lt;td&gt;Continue to the next step in this algorithm
-
-       &lt;td&gt;The ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rdf:RDF&lt;/code&gt;&quot;
-    &lt;/table&gt;
-
-    &lt;p&gt;If none of the byte sequences above match the bytes in &lt;var
-     title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;, then the sniffed
-     type of the resource is &quot;text/html&quot;. Abort these steps.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p class=big-issue&gt;If, before the next &quot;&gt;&quot;, you find two xmlns*
-     attributes with <A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A> and
-     <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> as the namespaces, then the sniffed type of the
-     resource is &quot;application/rss+xml&quot;, abort these steps. (maybe we only
-     need to check for <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> actually)
-
-   &lt;li&gt;
-    &lt;p&gt;Otherwise, the sniffed type of the resource is &quot;text/html&quot;.
-  &lt;/ol&gt;
-
-  &lt;p class=note&gt;For efficiency reasons, implementations may wish to implement
-   this algorithm and the algorithm for detecting the character encoding of
-   HTML documents in parallel.
-
-  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;4.10.5 &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
-
-  &lt;p&gt;What explicit &lt;dfn id=content-type8 title=Content-Type&gt;Content-Type
-   metadata&lt;/dfn&gt; is associated with the resource (the resource's type
-   information) depends on the protocol that was used to fetch the resource.
-
-  &lt;p&gt;For HTTP resources, only the first Content-Type HTTP header, if any,
-   contributes any type information; the explicit type of the resource is
-   then the value of that header, interpreted as described by the HTTP
-   specifications. If the Content-Type HTTP header is present but the value
-   of the first such header cannot be interpreted as described by the HTTP
-   specifications (e.g. because its value doesn't contain a U+002F SOLIDUS
-   ('/') character), then the resource has no type information (even if there
-   are multiple Content-Type HTTP headers and one of the other ones is
-   syntactically correct). &lt;a href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt;
-
-  &lt;p&gt;For resources fetched from the file system, user agents should use
-   platform-specific conventions, e.g. operating system extension/type
-   mappings.
-
-  &lt;p&gt;Extensions must not be used for determining resource types for resources
-   fetched over HTTP.
-
-  &lt;p&gt;For resources fetched over most other protocols, e.g. FTP, there is no
-   type information.
-
-  &lt;p&gt;The &lt;dfn id=algorithm4&gt;algorithm for extracting an encoding from a
-   Content-Type&lt;/dfn&gt;, given a string &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, is as follows.
-   It either returns an encoding or nothing.
-
-  &lt;ol&gt;
-   &lt;li&gt;
-    &lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; that are a
-     case-insensitive&lt;!-- XXX ASCII--&gt; match for the word 'charset'. If no
-     such match is found, return nothing.&lt;/p&gt;
-
-   &lt;li&gt;
-    &lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020 characters that
-     immediately follow the word 'charset' (there might not be any).
-
-   &lt;li&gt;
-    &lt;p&gt;If the next character is not a U+003D EQUALS SIGN ('='), return
-     nothing.
-
-   &lt;li&gt;
-    &lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020 characters that
-     immediately follow the equals sign (there might not be any).
-
-   &lt;li&gt;
-    &lt;p&gt;Process the next character as follows:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;If it is a U+0022 QUOTATION MARK ('&quot;') and there is a later U+0022
-      QUOTATION MARK ('&quot;') in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
-
-     &lt;dt&gt;If it is a U+0027 APOSTROPHE (&quot;'&quot;) and there is a later U+0027
-      APOSTROPHE (&quot;'&quot;) in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
-
-     &lt;dd&gt;
-      &lt;p&gt;Return the string between this character and the next earliest
-       occurrence of this character.
-
-     &lt;dt&gt;If it is an unmatched U+0022 QUOTATION MARK ('&quot;')
-
-     &lt;dt&gt;If it is an unmatched U+0027 APOSTROPHE (&quot;'&quot;)
-
-     &lt;dt&gt;If there is no next character
-
-     &lt;dd&gt;
-      &lt;p&gt;Return nothing.
-
-     &lt;dt&gt;Otherwise
-
-     &lt;dd&gt;
-      &lt;p&gt;Return the string from this character to the first U+0009, U+000A,
-       U+000C, U+000D, U+0020, or U+003B character or the end of &lt;var
-       title=&quot;&quot;&gt;s&lt;/var&gt;, whichever comes first.
-    &lt;/dl&gt;
-  &lt;/ol&gt;
-
-  &lt;p class=note&gt;The above algorithm is a willful violation of the HTTP
-   specification. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;
-
-  &lt;h3 id=structured&gt;&lt;span class=secno&gt;4.11 &lt;/span&gt;Structured client-side
+  &lt;h3 id=structured&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Structured client-side
    storage&lt;/h3&gt;
 
-  &lt;h4 id=storage&gt;&lt;span class=secno&gt;4.11.1 &lt;/span&gt;Storing name/value pairs&lt;/h4&gt;
+  &lt;h4 id=storage&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Storing name/value pairs&lt;/h4&gt;
 
-  &lt;h5 id=introduction2&gt;&lt;span class=secno&gt;4.11.1.1. &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;h5 id=introduction2&gt;&lt;span class=secno&gt;5.10.1.1. &lt;/span&gt;Introduction&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -34638,7 +34878,7 @@
    store structured data in a storage area, you must first convert it to a
    string.
 
-  &lt;h5 id=the-storage&gt;&lt;span class=secno&gt;4.11.1.2. &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h5 id=the-storage&gt;&lt;span class=secno&gt;5.10.1.2. &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#storage0&quot;&gt;Storage&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
   &lt;!-- XXX shouldn't we define somewhere how null values get handled
   in these methods? Do they get converted to the empty string or
@@ -34755,7 +34995,7 @@
   not normative, see the sections below for the normative statement
   --&gt;
 
-  &lt;h5 id=the-sessionstorage&gt;&lt;span class=secno&gt;4.11.1.3. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-sessionstorage&gt;&lt;span class=secno&gt;5.10.1.3. &lt;/span&gt;The &lt;code
    title=dom-sessionStorage&gt;&lt;a
    href=&quot;#sessionstorage&quot;&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
 
@@ -34828,7 +35068,7 @@
    title=event-storage&gt;&lt;a href=&quot;#storage1&quot;&gt;storage&lt;/a&gt;&lt;/code&gt; event must be
    fired, as &lt;a href=&quot;#storage1&quot; title=event-storage&gt;described below&lt;/a&gt;.
 
-  &lt;h5 id=the-localstorage&gt;&lt;span class=secno&gt;4.11.1.4. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-localstorage&gt;&lt;span class=secno&gt;5.10.1.4. &lt;/span&gt;The &lt;code
    title=dom-localStorage&gt;&lt;a href=&quot;#localstorage&quot;&gt;localStorage&lt;/a&gt;&lt;/code&gt;
    attribute&lt;/h5&gt;
 
@@ -34874,7 +35114,7 @@
    must be fired, as &lt;a href=&quot;#storage1&quot; title=event-storage&gt;described
    below&lt;/a&gt;.
 
-  &lt;h5 id=the-storage0&gt;&lt;span class=secno&gt;4.11.1.5. &lt;/span&gt;The &lt;code
+  &lt;h5 id=the-storage0&gt;&lt;span class=secno&gt;5.10.1.5. &lt;/span&gt;The &lt;code
    title=event-storage&gt;&lt;a href=&quot;#storage1&quot;&gt;storage&lt;/a&gt;&lt;/code&gt; event&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=storage1 title=event-storage&gt;&lt;code&gt;storage&lt;/code&gt;&lt;/dfn&gt;
@@ -34918,7 +35158,7 @@
    the two documents are in the same &lt;a href=&quot;#unit-of&quot;&gt;unit of related
    browsing contexts&lt;/a&gt;, or null otherwise.
 
-  &lt;h6 id=event0&gt;&lt;span class=secno&gt;4.11.1.5.1. &lt;/span&gt;Event definition&lt;/h6&gt;
+  &lt;h6 id=event0&gt;&lt;span class=secno&gt;5.10.1.5.1. &lt;/span&gt;Event definition&lt;/h6&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=storageevent&gt;StorageEvent&lt;/dfn&gt; : Event {
   readonly attribute DOMString &lt;a href=&quot;#key&quot; title=dom-StorageEvent-key&gt;key&lt;/a&gt;;
@@ -34957,7 +35197,7 @@
    represents the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; that changed the
    key.
 
-  &lt;h5 id=threads0&gt;&lt;span class=secno&gt;4.11.1.6. &lt;/span&gt;Threads&lt;/h5&gt;
+  &lt;h5 id=threads0&gt;&lt;span class=secno&gt;5.10.1.6. &lt;/span&gt;Threads&lt;/h5&gt;
 
   &lt;p&gt;Multiple browsing contexts must be able to access the local storage
    areas simultaneously in a predictable manner. Scripts must not be able to
@@ -34982,14 +35222,14 @@
    execution. This specification does not require any particular
    implementation strategy, so long as the requirement above is met.
 
-  &lt;h4 id=sql&gt;&lt;span class=secno&gt;4.11.2 &lt;/span&gt;Database storage&lt;/h4&gt;
+  &lt;h4 id=sql&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;Database storage&lt;/h4&gt;
   &lt;!-- Feature requests for future versions (v2):
         * deleting databases
         * determining how much storage room is left
         * handling the database getting corrupted
   --&gt;
 
-  &lt;h5 id=introduction3&gt;&lt;span class=secno&gt;4.11.2.1. &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;h5 id=introduction3&gt;&lt;span class=secno&gt;5.10.2.1. &lt;/span&gt;Introduction&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -35003,7 +35243,7 @@
    executeSql('SELECT rowid FROM t WHERE c IN (' + q + ')', array, ...);
 --&gt;
 
-  &lt;h5 id=databases&gt;&lt;span class=secno&gt;4.11.2.2. &lt;/span&gt;Databases&lt;/h5&gt;
+  &lt;h5 id=databases&gt;&lt;span class=secno&gt;5.10.2.2. &lt;/span&gt;Databases&lt;/h5&gt;
 
   &lt;p&gt;Each &lt;i&gt;&lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt;&lt;/i&gt; has an associated set of
    databases. Each database has a name and a current version. There is no way
@@ -35130,7 +35370,7 @@
     href=&quot;#changeversion&quot;&gt;changeVersion()&lt;/a&gt;&lt;/code&gt; method.
   &lt;/ol&gt;
 
-  &lt;h5 id=executing&gt;&lt;span class=secno&gt;4.11.2.3. &lt;/span&gt;Executing SQL
+  &lt;h5 id=executing&gt;&lt;span class=secno&gt;5.10.2.3. &lt;/span&gt;Executing SQL
    statements&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=dom-database-transaction&gt;&lt;a
@@ -35251,7 +35491,7 @@
   &lt;p class=note&gt;A future version of this specification will probably define
    the exact SQL subset required in more detail.
 
-  &lt;h5 id=database&gt;&lt;span class=secno&gt;4.11.2.4. &lt;/span&gt;Database query results&lt;/h5&gt;
+  &lt;h5 id=database&gt;&lt;span class=secno&gt;5.10.2.4. &lt;/span&gt;Database query results&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=dom-transaction-executeSql&gt;executeSql()&lt;/code&gt; method
    invokes its callback with a &lt;code&gt;&lt;a
@@ -35313,7 +35553,7 @@
    have the name of the column and the value of the cell, as they were
    returned by the database.
 
-  &lt;h5 id=errors&gt;&lt;span class=secno&gt;4.11.2.5. &lt;/span&gt;Errors&lt;/h5&gt;
+  &lt;h5 id=errors&gt;&lt;span class=secno&gt;5.10.2.5. &lt;/span&gt;Errors&lt;/h5&gt;
 
   &lt;p&gt;Errors in the database API are reported using callbacks that have a
    &lt;code&gt;&lt;a href=&quot;#sqlerror&quot;&gt;SQLError&lt;/a&gt;&lt;/code&gt; object as one of their
@@ -35395,7 +35635,7 @@
    return an error message describing the error encountered. The message
    should be localized to the user's language.
 
-  &lt;h5 id=processing3&gt;&lt;span class=secno&gt;4.11.2.6. &lt;/span&gt;Processing model&lt;/h5&gt;
+  &lt;h5 id=processing3&gt;&lt;span class=secno&gt;5.10.2.6. &lt;/span&gt;Processing model&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=transaction0&gt;transaction steps&lt;/dfn&gt; are as follows. These
    steps must be run asynchronously. These steps are invoked with a
@@ -35524,7 +35764,7 @@
      Any still-pending statements in the transaction are discarded.
   &lt;/ol&gt;
 
-  &lt;h4 id=disk-space&gt;&lt;span class=secno&gt;4.11.3 &lt;/span&gt;Disk space&lt;/h4&gt;
+  &lt;h4 id=disk-space&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;Disk space&lt;/h4&gt;
 
   &lt;p&gt;User agents should limit the total amount of space allowed for storage
    areas and databases.
@@ -35548,9 +35788,9 @@
    Implementation feedback is welcome and will be used to update this
    suggestion in future.
 
-  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;4.11.4 &lt;/span&gt;Privacy&lt;/h4&gt;
+  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;Privacy&lt;/h4&gt;
 
-  &lt;h5 id=user-tracking&gt;&lt;span class=secno&gt;4.11.4.1. &lt;/span&gt;User tracking&lt;/h5&gt;
+  &lt;h5 id=user-tracking&gt;&lt;span class=secno&gt;5.10.4.1. &lt;/span&gt;User tracking&lt;/h5&gt;
 
   &lt;p&gt;A third-party advertiser (or any entity capable of getting content
    distributed to multiple sites) could use a unique identifier stored in its
@@ -35646,7 +35886,7 @@
    headers and configuration settings) to combine separate sessions into
    coherent user profiles.
 
-  &lt;h5 id=cookie&gt;&lt;span class=secno&gt;4.11.4.2. &lt;/span&gt;Cookie resurrection&lt;/h5&gt;
+  &lt;h5 id=cookie&gt;&lt;span class=secno&gt;5.10.4.2. &lt;/span&gt;Cookie resurrection&lt;/h5&gt;
 
   &lt;p&gt;If the user interface for persistent storage presents data in the
    persistent storage features separately from data in HTTP session cookies,
@@ -35654,9 +35894,9 @@
    allow sites to use the two features as redundant backup for each other,
    defeating a user's attempts to protect his privacy.
 
-  &lt;h4 id=security7&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security7&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;h5 id=dns-spoofing&gt;&lt;span class=secno&gt;4.11.5.1. &lt;/span&gt;DNS spoofing attacks&lt;/h5&gt;
+  &lt;h5 id=dns-spoofing&gt;&lt;span class=secno&gt;5.10.5.1. &lt;/span&gt;DNS spoofing attacks&lt;/h5&gt;
 
   &lt;p&gt;Because of the potential for DNS spoofing attacks, one cannot guarantee
    that a host claiming to be in a certain domain really is from that domain.
@@ -35664,7 +35904,7 @@
    pages using SSL that have certificates identifying them as being from the
    same domain can access their local storage areas and databases.
 
-  &lt;h5 id=cross-directory&gt;&lt;span class=secno&gt;4.11.5.2. &lt;/span&gt;Cross-directory
+  &lt;h5 id=cross-directory&gt;&lt;span class=secno&gt;5.10.5.2. &lt;/span&gt;Cross-directory
    attacks&lt;/h5&gt;
 
   &lt;p&gt;Different authors sharing one host name, for example users hosting
@@ -35678,7 +35918,7 @@
    usual DOM scripting security model would make it trivial to bypass this
    protection and access the data from any path.
 
-  &lt;h5 id=implementation&gt;&lt;span class=secno&gt;4.11.5.3. &lt;/span&gt;Implementation
+  &lt;h5 id=implementation&gt;&lt;span class=secno&gt;5.10.5.3. &lt;/span&gt;Implementation
    risks&lt;/h5&gt;
 
   &lt;p&gt;The two primary risks when implementing these persistent storage
@@ -35703,7 +35943,7 @@
   &lt;p&gt;Thus, strictly following the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; model
    described in this specification is important for user security.
 
-  &lt;h5 id=sql-and&gt;&lt;span class=secno&gt;4.11.5.4. &lt;/span&gt;SQL and user agents&lt;/h5&gt;
+  &lt;h5 id=sql-and&gt;&lt;span class=secno&gt;5.10.5.4. &lt;/span&gt;SQL and user agents&lt;/h5&gt;
 
   &lt;p&gt;User agent implementors are strongly encouraged to audit all their
    supported SQL statements for security implications. For example, &lt;code
@@ -35716,7 +35956,7 @@
    disk representation of the data, as all data in ECMAScript is implicitly
    UTF-16.
 
-  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;4.11.5.5. &lt;/span&gt;SQL injection&lt;/h5&gt;
+  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;5.10.5.5. &lt;/span&gt;SQL injection&lt;/h5&gt;
 
   &lt;p&gt;Authors are strongly recommended to make use of the &lt;code
    title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code
@@ -35724,9 +35964,9 @@
    href=&quot;#executesql&quot;&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method, and to never construct
    SQL statements on the fly.
 
-  &lt;h3 id=links&gt;&lt;span class=secno&gt;4.12 &lt;/span&gt;Links&lt;/h3&gt;
+  &lt;h3 id=links&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/h3&gt;
 
-  &lt;h4 id=hyperlink&gt;&lt;span class=secno&gt;4.12.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
+  &lt;h4 id=hyperlink&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
    href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt;
@@ -35806,7 +36046,7 @@
    fetching the resource, user agents must not use metadata included in the
    link to the resource to determine its type.
 
-  &lt;h4 id=following&gt;&lt;span class=secno&gt;4.12.2 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=following&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;&lt;dfn
    id=following0&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
   &lt;!-- XXXURL change to URL --&gt;
 
@@ -35868,7 +36108,7 @@
    hyperlink's element in question is associated as the &lt;a
    href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
 
-  &lt;h5 id=hyperlink0&gt;&lt;span class=secno&gt;4.12.2.1. &lt;/span&gt;Hyperlink auditing&lt;/h5&gt;
+  &lt;h5 id=hyperlink0&gt;&lt;span class=secno&gt;5.11.2.1. &lt;/span&gt;Hyperlink auditing&lt;/h5&gt;
   &lt;!-- XXXURL change to URL, algorithms --&gt;
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
@@ -35878,7 +36118,7 @@
    title=attr-hyperlink-ping&gt;&lt;a href=&quot;#ping&quot;&gt;ping&lt;/a&gt;&lt;/code&gt; attribute's
    value, &lt;span title=&quot;split the string on spaces&quot;&gt;split that string on
    spaces&lt;/span&gt;, treat each resulting token as a URI (resolving relative
-   URIs according to &lt;a href=&quot;#elements2&quot;&gt;element's base URI&lt;/a&gt;&lt;!--
+   URIs according to &lt;a href=&quot;#elements3&quot;&gt;element's base URI&lt;/a&gt;&lt;!--
   XXXURL --&gt;)
    and then should send a request (as described below) to each of the
    resulting URIs. This may be done in parallel with the primary request, and
@@ -35977,7 +36217,7 @@
    it sounds kooky. --&gt;
    &lt;/div&gt;
 
-  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;4.12.3 &lt;/span&gt;Link types&lt;/h4&gt;
+  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link types&lt;/h4&gt;
 
   &lt;p&gt;The following table summarizes the link types that are defined by this
    specification. This table is non-normative; the actual definitions for the
@@ -36209,7 +36449,7 @@
       the previous document in the series is the referenced document.
 
     &lt;tr&gt;
-     &lt;td&gt;&lt;code title=rel-search&gt;&lt;a href=&quot;#search0&quot;&gt;search&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;code title=rel-search&gt;&lt;a href=&quot;#search1&quot;&gt;search&lt;/a&gt;&lt;/code&gt;&lt;/td&gt;
      &lt;!-- used quite a bit --&gt;
 
      &lt;td&gt;&lt;a href=&quot;#hyperlink1&quot; title=&quot;hyperlink link&quot;&gt;Hyperlink&lt;/a&gt;
@@ -36299,7 +36539,7 @@
 
     --&gt;
 
-  &lt;h5 id=link-type&gt;&lt;span class=secno&gt;4.12.3.1. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type&gt;&lt;span class=secno&gt;5.11.3.1. &lt;/span&gt;Link type &quot;&lt;dfn
    id=alternate title=rel-alternate&gt;&lt;code&gt;alternate&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-alternate&gt;&lt;a href=&quot;#alternate&quot;&gt;alternate&lt;/a&gt;&lt;/code&gt;
@@ -36376,7 +36616,7 @@
    document, it is also implying that those two documents are alternative
    representations of each other.
 
-  &lt;h5 id=link-type0&gt;&lt;span class=secno&gt;4.12.3.2. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type0&gt;&lt;span class=secno&gt;5.11.3.2. &lt;/span&gt;Link type &quot;&lt;dfn
    id=archives title=rel-archives&gt;&lt;code&gt;archives&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-archives&gt;&lt;a href=&quot;#archives&quot;&gt;archives&lt;/a&gt;&lt;/code&gt;
@@ -36396,7 +36636,7 @@
    treat the keyword &quot;&lt;code title=&quot;&quot;&gt;archive&lt;/code&gt;&quot; like the &lt;code
    title=rel-archives&gt;&lt;a href=&quot;#archives&quot;&gt;archives&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h5 id=link-type1&gt;&lt;span class=secno&gt;4.12.3.3. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type1&gt;&lt;span class=secno&gt;5.11.3.3. &lt;/span&gt;Link type &quot;&lt;dfn
    id=author title=rel-author&gt;&lt;code&gt;author&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-author&gt;&lt;a href=&quot;#author&quot;&gt;author&lt;/a&gt;&lt;/code&gt; keyword
@@ -36429,7 +36669,7 @@
    &quot;&lt;code&gt;made&lt;/code&gt;&quot; as having the &lt;code title=rel-author&gt;&lt;a
    href=&quot;#author&quot;&gt;author&lt;/a&gt;&lt;/code&gt; keyword specified as a link relationship.
 
-  &lt;h5 id=link-type2&gt;&lt;span class=secno&gt;4.12.3.4. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type2&gt;&lt;span class=secno&gt;5.11.3.4. &lt;/span&gt;Link type &quot;&lt;dfn
    id=bookmark title=rel-bookmark&gt;&lt;code&gt;bookmark&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-bookmark&gt;&lt;a href=&quot;#bookmark&quot;&gt;bookmark&lt;/a&gt;&lt;/code&gt;
@@ -36493,7 +36733,7 @@
   page as a whole.&lt;/p&gt;
 --&gt;
 
-  &lt;h5 id=link-type3&gt;&lt;span class=secno&gt;4.12.3.5. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type3&gt;&lt;span class=secno&gt;5.11.3.5. &lt;/span&gt;Link type &quot;&lt;dfn
    id=external title=rel-external&gt;&lt;code&gt;external&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-external&gt;&lt;a href=&quot;#external&quot;&gt;external&lt;/a&gt;&lt;/code&gt;
@@ -36504,7 +36744,7 @@
    keyword indicates that the link is leading to a document that is not part
    of the site that the current document forms a part of.
 
-  &lt;h5 id=link-type4&gt;&lt;span class=secno&gt;4.12.3.6. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type4&gt;&lt;span class=secno&gt;5.11.3.6. &lt;/span&gt;Link type &quot;&lt;dfn
    id=feed title=rel-feed&gt;&lt;code&gt;feed&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-feed&gt;&lt;a href=&quot;#feed&quot;&gt;feed&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -36548,7 +36788,7 @@
  &lt;/ul&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=link-type5&gt;&lt;span class=secno&gt;4.12.3.7. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type5&gt;&lt;span class=secno&gt;5.11.3.7. &lt;/span&gt;Link type &quot;&lt;dfn
    id=help title=rel-help&gt;&lt;code&gt;help&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-help&gt;&lt;a href=&quot;#help&quot;&gt;help&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -36576,7 +36816,7 @@
    title=rel-help&gt;&lt;a href=&quot;#help&quot;&gt;help&lt;/a&gt;&lt;/code&gt; keyword indicates that the
    referenced document provides help for the page as a whole.
 
-  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;4.12.3.8. &lt;/span&gt;Link type &quot;&lt;dfn id=icon3
+  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;5.11.3.8. &lt;/span&gt;Link type &quot;&lt;dfn id=icon3
    title=rel-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-icon&gt;&lt;a href=&quot;#icon3&quot;&gt;icon&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -36696,7 +36936,7 @@
   ...&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=link-type6&gt;&lt;span class=secno&gt;4.12.3.9. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type6&gt;&lt;span class=secno&gt;5.11.3.9. &lt;/span&gt;Link type &quot;&lt;dfn
    id=license title=rel-license&gt;&lt;code&gt;license&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-license&gt;&lt;a href=&quot;#license&quot;&gt;license&lt;/a&gt;&lt;/code&gt;
@@ -36713,7 +36953,7 @@
    treat the keyword &quot;&lt;code title=&quot;&quot;&gt;copyright&lt;/code&gt;&quot; like the &lt;code
    title=rel-license&gt;&lt;a href=&quot;#license&quot;&gt;license&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h5 id=link-type7&gt;&lt;span class=secno&gt;4.12.3.10. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type7&gt;&lt;span class=secno&gt;5.11.3.10. &lt;/span&gt;Link type &quot;&lt;dfn
    id=nofollow title=rel-nofollow&gt;&lt;code&gt;nofollow&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-nofollow&gt;&lt;a href=&quot;#nofollow&quot;&gt;nofollow&lt;/a&gt;&lt;/code&gt;
@@ -36726,7 +36966,7 @@
    included primarily because of a commercial relationship between people
    affiliated with the two pages.
 
-  &lt;h5 id=link-type8&gt;&lt;span class=secno&gt;4.12.3.11. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type8&gt;&lt;span class=secno&gt;5.11.3.11. &lt;/span&gt;Link type &quot;&lt;dfn
    id=noreferrer title=rel-noreferrer&gt;&lt;code&gt;noreferrer&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-noreferrer&gt;&lt;a
@@ -36740,7 +36980,7 @@
    include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP header (or equivalent for
    other protocols) in the request.
 
-  &lt;h5 id=link-type9&gt;&lt;span class=secno&gt;4.12.3.12. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type9&gt;&lt;span class=secno&gt;5.11.3.12. &lt;/span&gt;Link type &quot;&lt;dfn
    id=pingback title=rel-pingback&gt;&lt;code&gt;pingback&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-pingback&gt;&lt;a href=&quot;#pingback&quot;&gt;pingback&lt;/a&gt;&lt;/code&gt;
@@ -36752,7 +36992,7 @@
    href=&quot;#pingback&quot;&gt;pingback&lt;/a&gt;&lt;/code&gt; keyword, see the Pingback 1.0
    specification. &lt;a href=&quot;#refsPINGBACK&quot;&gt;[PINGBACK]&lt;/a&gt;
 
-  &lt;h5 id=link-type10&gt;&lt;span class=secno&gt;4.12.3.13. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type10&gt;&lt;span class=secno&gt;5.11.3.13. &lt;/span&gt;Link type &quot;&lt;dfn
    id=prefetch title=rel-prefetch&gt;&lt;code&gt;prefetch&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-prefetch&gt;&lt;a href=&quot;#prefetch&quot;&gt;prefetch&lt;/a&gt;&lt;/code&gt;
@@ -36768,28 +37008,28 @@
   &lt;p&gt;There is no default type for resources given by the &lt;code
    title=rel-prefetch&gt;&lt;a href=&quot;#prefetch&quot;&gt;prefetch&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h5 id=link-type11&gt;&lt;span class=secno&gt;4.12.3.14. &lt;/span&gt;Link type &quot;&lt;dfn
-   id=search0 title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type11&gt;&lt;span class=secno&gt;5.11.3.14. &lt;/span&gt;Link type &quot;&lt;dfn
+   id=search1 title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
-  &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=&quot;#search0&quot;&gt;search&lt;/a&gt;&lt;/code&gt; keyword
+  &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=&quot;#search1&quot;&gt;search&lt;/a&gt;&lt;/code&gt; keyword
    may be used with &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
    href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt;
    elements. For &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; elements, it creates a
    &lt;a href=&quot;#hyperlink1&quot; title=&quot;hyperlink link&quot;&gt;hyperlink&lt;/a&gt;.
 
-  &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=&quot;#search0&quot;&gt;search&lt;/a&gt;&lt;/code&gt; keyword
+  &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=&quot;#search1&quot;&gt;search&lt;/a&gt;&lt;/code&gt; keyword
    indicates that the referenced document provides an interface specifically
    for searching the document and its related resources.
 
   &lt;p class=note&gt;OpenSearch description documents can be used with &lt;code&gt;&lt;a
    href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt; elements and the &lt;code title=rel-search&gt;&lt;a
-   href=&quot;#search0&quot;&gt;search&lt;/a&gt;&lt;/code&gt; link type to enable user agents to
+   href=&quot;#search1&quot;&gt;search&lt;/a&gt;&lt;/code&gt; link type to enable user agents to
    autodiscover search interfaces. &lt;a href=&quot;#refsOPENSEARCH&quot;&gt;[OPENSEARCH]&lt;/a&gt;&lt;/p&gt;
   &lt;!-- XXX
   <A HREF="http://www.opensearch.org/Specifications/OpenSearch/1.1#Autodiscovery_in_HTML.2FXHTML">http://www.opensearch.org/Specifications/OpenSearch/1.1#Autodiscovery_in_HTML.2FXHTML</A>
   --&gt;
 
-  &lt;h5 id=link-type12&gt;&lt;span class=secno&gt;4.12.3.15. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type12&gt;&lt;span class=secno&gt;5.11.3.15. &lt;/span&gt;Link type &quot;&lt;dfn
    id=stylesheet title=rel-stylesheet&gt;&lt;code&gt;stylesheet&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-stylesheet&gt;&lt;a
@@ -36812,12 +37052,12 @@
    is &lt;code title=&quot;&quot;&gt;text/css&lt;/code&gt;.
 
   &lt;p&gt;&lt;strong&gt;Quirk:&lt;/strong&gt; If the document has been set to &lt;a
-   href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt; and the &lt;a href=&quot;#content-type8&quot;
+   href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt; and the &lt;a href=&quot;#content-type5&quot;
    title=Content-Type&gt;Content-Type metadata&lt;/a&gt; of the external resource is
    not a supported style sheet type, the user agent must instead assume it to
    be &lt;code title=&quot;&quot;&gt;text/css&lt;/code&gt;.
 
-  &lt;h5 id=link-type13&gt;&lt;span class=secno&gt;4.12.3.16. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type13&gt;&lt;span class=secno&gt;5.11.3.16. &lt;/span&gt;Link type &quot;&lt;dfn
    id=sidebar title=rel-sidebar&gt;&lt;code&gt;sidebar&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-sidebar&gt;&lt;a href=&quot;#sidebar&quot;&gt;sidebar&lt;/a&gt;&lt;/code&gt;
@@ -36837,7 +37077,7 @@
    specified is a &lt;dfn id=sidebar0 title=rel-sidebar-hyperlink&gt;sidebar
    hyperlink&lt;/dfn&gt;.
 
-  &lt;h5 id=link-type14&gt;&lt;span class=secno&gt;4.12.3.17. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h5 id=link-type14&gt;&lt;span class=secno&gt;5.11.3.17. &lt;/span&gt;Link type &quot;&lt;dfn
    id=tag title=rel-tag&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-tag&gt;&lt;a href=&quot;#tag&quot;&gt;tag&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -36850,7 +37090,7 @@
    that the &lt;em&gt;tag&lt;/em&gt; that the referenced document represents applies to
    the current document.
 
-  &lt;h5 id=hierarchical&gt;&lt;span class=secno&gt;4.12.3.18. &lt;/span&gt;Hierarchical link
+  &lt;h5 id=hierarchical&gt;&lt;span class=secno&gt;5.11.3.18. &lt;/span&gt;Hierarchical link
    types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a hierarchical structure of documents.
@@ -36862,7 +37102,7 @@
 
   &lt;p&gt;A document may be part of multiple hierarchies.
 
-  &lt;h6 id=link-type15&gt;&lt;span class=secno&gt;4.12.3.18.1. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type15&gt;&lt;span class=secno&gt;5.11.3.18.1. &lt;/span&gt;Link type &quot;&lt;dfn
    id=index0 title=rel-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-index&gt;&lt;a href=&quot;#index0&quot;&gt;index&lt;/a&gt;&lt;/code&gt; keyword may
@@ -36882,7 +37122,7 @@
    title=&quot;&quot;&gt;contents&lt;/code&gt;&quot;, and &quot;&lt;code title=&quot;&quot;&gt;toc&lt;/code&gt;&quot; like the &lt;code
    title=rel-index&gt;&lt;a href=&quot;#index0&quot;&gt;index&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h6 id=link-type16&gt;&lt;span class=secno&gt;4.12.3.18.2. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type16&gt;&lt;span class=secno&gt;5.11.3.18.2. &lt;/span&gt;Link type &quot;&lt;dfn
    id=up title=rel-up&gt;&lt;code&gt;up&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-up&gt;&lt;a href=&quot;#up&quot;&gt;up&lt;/a&gt;&lt;/code&gt; keyword may be used
@@ -36950,7 +37190,7 @@
    &lt;code title=rel-up&gt;&lt;a href=&quot;#up&quot;&gt;up&lt;/a&gt;&lt;/code&gt; keywords (the interface
    hides duplicates).
 
-  &lt;h5 id=sequential&gt;&lt;span class=secno&gt;4.12.3.19. &lt;/span&gt;Sequential link types&lt;/h5&gt;
+  &lt;h5 id=sequential&gt;&lt;span class=secno&gt;5.11.3.19. &lt;/span&gt;Sequential link types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a sequence of documents.
 
@@ -36961,7 +37201,7 @@
 
   &lt;p&gt;A document may be part of multiple sequences.
 
-  &lt;h6 id=link-type17&gt;&lt;span class=secno&gt;4.12.3.19.1. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type17&gt;&lt;span class=secno&gt;5.11.3.19.1. &lt;/span&gt;Link type &quot;&lt;dfn
    id=first title=rel-first&gt;&lt;code&gt;first&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-first&gt;&lt;a href=&quot;#first&quot;&gt;first&lt;/a&gt;&lt;/code&gt; keyword may
@@ -36980,7 +37220,7 @@
    title=&quot;&quot;&gt;start&lt;/code&gt;&quot; like the &lt;code title=rel-first&gt;&lt;a
    href=&quot;#first&quot;&gt;first&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h6 id=link-type18&gt;&lt;span class=secno&gt;4.12.3.19.2. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type18&gt;&lt;span class=secno&gt;5.11.3.19.2. &lt;/span&gt;Link type &quot;&lt;dfn
    id=last title=rel-last&gt;&lt;code&gt;last&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-last&gt;&lt;a href=&quot;#last&quot;&gt;last&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -36997,7 +37237,7 @@
    treat the keyword &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot; like the &lt;code
    title=rel-last&gt;&lt;a href=&quot;#last&quot;&gt;last&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h6 id=link-type19&gt;&lt;span class=secno&gt;4.12.3.19.3. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type19&gt;&lt;span class=secno&gt;5.11.3.19.3. &lt;/span&gt;Link type &quot;&lt;dfn
    id=next title=rel-next&gt;&lt;code&gt;next&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-next&gt;&lt;a href=&quot;#next&quot;&gt;next&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -37010,7 +37250,7 @@
    indicates that the document is part of a sequence, and that the link is
    leading to the document that is the next logical document in the sequence.
 
-  &lt;h6 id=link-type20&gt;&lt;span class=secno&gt;4.12.3.19.4. &lt;/span&gt;Link type &quot;&lt;dfn
+  &lt;h6 id=link-type20&gt;&lt;span class=secno&gt;5.11.3.19.4. &lt;/span&gt;Link type &quot;&lt;dfn
    id=prev title=rel-prev&gt;&lt;code&gt;prev&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-prev&gt;&lt;a href=&quot;#prev&quot;&gt;prev&lt;/a&gt;&lt;/code&gt; keyword may be
@@ -37028,7 +37268,7 @@
    treat the keyword &quot;&lt;code title=&quot;&quot;&gt;previous&lt;/code&gt;&quot; like the &lt;code
    title=rel-prev&gt;&lt;a href=&quot;#prev&quot;&gt;prev&lt;/a&gt;&lt;/code&gt; keyword.
 
-  &lt;h5 id=other0&gt;&lt;span class=secno&gt;4.12.3.20. &lt;/span&gt;Other link types&lt;/h5&gt;
+  &lt;h5 id=other0&gt;&lt;span class=secno&gt;5.11.3.20. &lt;/span&gt;Other link types&lt;/h5&gt;
 
   &lt;p&gt;Other than the types defined above, only types defined as extensions in
    the &lt;a href=&quot;<A HREF="http://wiki.whatwg.org/wiki/RelExtensions">http://wiki.whatwg.org/wiki/RelExtensions</A>&quot;&gt;WHATWG Wiki
@@ -37155,246 +37395,22 @@
    described above, with the &quot;proposal&quot; status.
 
   &lt;p&gt;This specification does not define how new values will get approved. It
-   is expected that the Wiki will have a community that addresses this.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL --&gt;
+   is expected that the Wiki will have a community that addresses this.
 
-  &lt;h3 id=interfaces&gt;&lt;span class=secno&gt;4.13 &lt;/span&gt;Interfaces for URI
-   manipulation&lt;/h3&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;An interface that has a complement of &lt;dfn id=uri-decomposition&gt;URI
-   decomposition attributes&lt;/dfn&gt; will have seven attributes with the
-   following definitions:
-
-  &lt;pre class=idl&gt;
-           attribute DOMString &lt;a href=&quot;#protocol0&quot; title=dom-uda-protocol&gt;protocol&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#host0&quot; title=dom-uda-host&gt;host&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#hostname0&quot; title=dom-uda-hostname&gt;hostname&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#port0&quot; title=dom-uda-port&gt;port&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#pathname0&quot; title=dom-uda-pathname&gt;pathname&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#search1&quot; title=dom-uda-search&gt;search&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#hash0&quot; title=dom-uda-hash&gt;hash&lt;/a&gt;;
-&lt;/pre&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;The attributes defined to be URI decomposition attributes must act as
-   described for the attributes with the same corresponding names in this
-   section.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;In addition, an interface with a complement of URI decomposition
-   attributes will define an &lt;dfn id=input
-   title=concept-uda-input&gt;input&lt;/dfn&gt;, which is a URI that the attributes
-   act on, and a &lt;dfn id=common3 title=concept-uda-setter&gt;common setter
-   action&lt;/dfn&gt;, which is a set of steps invoked when any of the attributes'
-   setters are invoked.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;The seven URI decomposition attributes have similar requirements.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;On getting, if the &lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;
-   fulfills the condition given in the &quot;getter condition&quot; column
-   corresponding to the attribute in the table below, the user agent must
-   return the part of the &lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;
-   URI given in the &quot;component&quot; column, with any prefixes specified in the
-   &quot;prefix&quot; column appropriately added to the start of the string and any
-   suffixes specified in the &quot;suffix&quot; column appropriately added to the end
-   of the string. Otherwise, the attribute must return the empty string.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL; algorithms or something? --&gt;
-
-  &lt;p&gt;On setting, the new value must first be mutated as described by the
-   &quot;setter preprocessor&quot; column, then mutated by %-escaping any characters in
-   the new value that are not valid in the relevant component as given by the
-   &quot;component&quot; column. Then, if the resulting new value fulfills the
-   condition given in the &quot;setter condition&quot; column, the user agent must make
-   a new string &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; by replacing the component of the
-   URI given by the &quot;component&quot; column in the &lt;a href=&quot;#input&quot;
-   title=concept-uda-input&gt;input&lt;/a&gt; URI with the new value; otherwise, the
-   user agent must let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be equal to the &lt;a
-   href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt;. Finally, the user agent
-   must invoke the &lt;a href=&quot;#common3&quot; title=concept-uda-setter&gt;common setter
-   action&lt;/a&gt; with the value of &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL --&gt;
-
-  &lt;p&gt;When replacing a component in the URI, if the component is part of an
-   optional group in the URI syntax consisting of a character followed by the
-   component, the component (including its prefix character) must be included
-   even if the new value is the empty string.
-
-  &lt;p class=note&gt;The previous paragraph applies in particular to the &quot;&lt;code
-   title=&quot;&quot;&gt;:&lt;/code&gt;&quot; before a &lt;port&gt; component, the &quot;&lt;code
-   title=&quot;&quot;&gt;?&lt;/code&gt;&quot; before a &lt;query&gt; component, and the &quot;&lt;code
-   title=&quot;&quot;&gt;#&lt;/code&gt;&quot; before a &lt;fragment&gt; component.&lt;/p&gt;
-  &lt;!-- XXXURL change to URL; algorithms --&gt;
-
-  &lt;p&gt;The rules for parsing and constructing URIs are described in RFC 3986
-   and RFC 3987. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-   href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th&gt;Attribute
-
-     &lt;th&gt;Component
-
-     &lt;th&gt;Getter Condition
-
-     &lt;th&gt;Prefix
-
-     &lt;th&gt;Suffix
-
-     &lt;th&gt;Setter Preprocessor
-
-     &lt;th&gt;Setter Condition
-
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=protocol0 title=dom-uda-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;
-      
-
-     &lt;td&gt;&lt;scheme&gt;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
-
-     &lt;td&gt;Remove all trailing U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
-      characters
-
-     &lt;td&gt;The new value is not the empty string
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=host0 title=dom-uda-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#lthostportgt&quot;&gt;&lt;hostport&gt;&lt;/a&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
-      and uses a server-based naming authority
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=hostname0 title=dom-uda-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;
-      
-
-     &lt;td&gt;&lt;host&gt;/&lt;ihost&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
-      and uses a server-based naming authority
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;Remove all leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
-      characters
-
-     &lt;td&gt;&mdash;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=port0 title=dom-uda-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;
-
-     &lt;td&gt;&lt;port&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
-      and uses a server-based naming authority
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;Remove any characters in the new value that are not in the range
-      U+0030 DIGIT ZERO .. U+0039 DIGIT NINE. If the resulting string is
-      empty, set it to a single U+0030 DIGIT ZERO character ('0').
-
-     &lt;td&gt;&mdash;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=pathname0 title=dom-uda-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;
-      
-
-     &lt;td&gt;&lt;abs_path&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;If it has no leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
-      character, prepend a U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;)
-      character to the new value
-
-     &lt;td&gt;&mdash;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=search1 title=dom-uda-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;
-
-     &lt;td&gt;&lt;query&gt;
-
-     &lt;td&gt;&lt;a href=&quot;#input&quot; title=concept-uda-input&gt;input&lt;/a&gt; is hierarchical
-
-     &lt;td&gt;U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;Remove one leading U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
-      character, if any
-
-     &lt;td&gt;&mdash;
-
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn id=hash0 title=dom-uda-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;
-
-     &lt;td&gt;&lt;fragment&gt;
-
-     &lt;td&gt;Fragment identifier is longer than zero characters
-
-     &lt;td&gt;U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
-
-     &lt;td&gt;&mdash;
-
-     &lt;td&gt;Remove one leading U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
-      character, if any
-
-     &lt;td&gt;&mdash;
-  &lt;/table&gt;
-
-  &lt;p&gt;The &lt;dfn id=lthostportgt&gt;&lt;hostport&gt;&lt;/dfn&gt; component is defined as
-   being the &lt;host&gt;/&lt;ihost&gt; component, followed by a colon and
-   the &lt;port&gt; component, but with the colon and &lt;port&gt; component
-   omitted if the given port matches the default port for the protocol given
-   by the &lt;scheme&gt; component.&lt;/p&gt;
-  &lt;!--
-  <A HREF="http://www.hixie.ch/tests/adhoc/dom/level0/location/components/">http://www.hixie.ch/tests/adhoc/dom/level0/location/components/</A>
-  <A HREF="http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp">http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp</A>
-  <A HREF="http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722">http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722</A>
---&gt;
-
-  &lt;h2 id=editing&gt;&lt;span class=secno&gt;5. &lt;/span&gt;&lt;dfn id=user-interaction&gt;User
+  &lt;h2 id=editing&gt;&lt;span class=secno&gt;6. &lt;/span&gt;&lt;dfn id=user-interaction&gt;User
    Interaction&lt;/dfn&gt;&lt;/h2&gt;
 
   &lt;p&gt;This section describes various features that allow authors to enable
    users to edit documents and parts of documents interactively.
 
-  &lt;h3 id=editing-intro&gt;&lt;span class=secno&gt;5.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=editing-intro&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p class=big-issue&gt;Would be nice to explain how these features work
    together.
 
-  &lt;h3 id=the-irrelevant&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The &lt;dfn id=irrelevant
+  &lt;h3 id=the-irrelevant&gt;&lt;span class=secno&gt;6.2 &lt;/span&gt;The &lt;dfn id=irrelevant
    title=attr-irrelevant&gt;&lt;code&gt;irrelevant&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h3&gt;
 
   &lt;p&gt;All elements may have the &lt;code title=attr-irrelevant&gt;&lt;a
@@ -37448,7 +37464,7 @@
    title=dom-irrelevant&gt;&lt;code&gt;irrelevant&lt;/code&gt;&lt;/dfn&gt; DOM attribute must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the content attribute of the same name.
 
-  &lt;h3 id=activation&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Activation&lt;/h3&gt;
+  &lt;h3 id=activation&gt;&lt;span class=secno&gt;6.3 &lt;/span&gt;Activation&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=click1 title=dom-click&gt;click()&lt;/dfn&gt; method must &lt;a
    href=&quot;#firing&quot;&gt;fire a &lt;code&gt;click&lt;/code&gt; event&lt;/a&gt; at the element, whose
@@ -37461,7 +37477,7 @@
    href=&quot;#activation0&quot;&gt;activation behavior&lt;/a&gt;; the first element, in reverse
    tree order, to have one, must have its activation behavior executed.
 
-  &lt;h3 id=scrolling&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scrolling elements into view&lt;/h3&gt;
+  &lt;h3 id=scrolling&gt;&lt;span class=secno&gt;6.4 &lt;/span&gt;Scrolling elements into view&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=scrollintoview
    title=dom-scrollIntoView&gt;&lt;code&gt;scrollIntoView([&lt;var
@@ -37486,7 +37502,7 @@
    media-specific manner most useful to the user.&lt;/p&gt;
   &lt;!-- XXX maybe this should move to CSSOM --&gt;
 
-  &lt;h3 id=focus&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;Focus&lt;/h3&gt;
+  &lt;h3 id=focus&gt;&lt;span class=secno&gt;6.5 &lt;/span&gt;Focus&lt;/h3&gt;
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%20%0A...%3Cform%3E%3Cinput%20name%3Da%20onfocus%3D%22value%2B%3D1%3Bd.name%3D%27a%27%3Bname%3D%27d%27%3Bb.focus(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%20%0A...%3Cform%3E%3Cinput%20name%3Da%20onfocus%3D%22value%2B%3D1%3Bd.name%3D%27a%27%3Bname%3D%27d%27%3Bb.focus(</A>)%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22value%2B%3D1%3Bc.focus()%22%3E%0A%3Cinput%20name%3Dc%20onfocus%3D%22value%2B%3D1%3Bd.focus()%22%3E%0A%3Cinput%20name%3Dd%20onfocus%3D%22value%2B%3D1%3Ba.focus()%22%3E --&gt;
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onfocus%3D%22t.value%2B%3D%27af1%20%27%3Bb.focus(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onfocus%3D%22t.value%2B%3D%27af1%20%27%3Bb.focus(</A>)%3Balert(document.activeElement.name)%3Bt.value%2B%3D%27af2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27ab%20%27%3B%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22t.value%2B%3D%27bf1%20%27%3Bc.focus()%3Bt.value%2B%3D%27bf2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27bb%20%27%3B%22%3E%0A%3Cinput%20name%3Dc%20onfocus%3D%22t.value%2B%3D%27cf1%20%27%3Bc.focus()%3Bt.value%2B%3D%27cf2%20%27%3B%22%20onblur%3D%22t.value%2B%3D%27cb%20%27%3B%22%3E%0A --&gt;
   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%3Cbody%20onload%3D%22document.forms%5B0%5D.a.focus(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%3Cbody%20onload%3D%22document.forms%5B0%5D.a.focus(</A>)%22%3E%0A...%3Cform%3E%0A%3Ctextarea%20name%3Dt%20cols%3D100%20rows%3D3%3E%3C%2Ftextarea%3E%3Cp%3E%0A%3Cinput%20name%3Da%20onblur%3D%22t.value%2B%3D'ab%20'%3B%20b.focus()%3B%22%3E%0A%3Cinput%20name%3Db%20onfocus%3D%22t.value%2B%3D'bf1%20'%3Ba.focus()%3Bt.value%2B%3D'bf2%20'%3B%22%20onblur%3D%22t.value%2B%3D'bb%20'%3B%22%3E --&gt;
@@ -37507,7 +37523,7 @@
    &lt;a href=&quot;#top-level&quot;&gt;top-level browsing context&lt;/a&gt; itself has the
    &lt;em&gt;system focus&lt;/em&gt;.
 
-  &lt;h4 id=focus-management&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Focus management&lt;/h4&gt;
+  &lt;h4 id=focus-management&gt;&lt;span class=secno&gt;6.5.1 &lt;/span&gt;Focus management&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=focusing&gt;focusing steps&lt;/dfn&gt; are as follows:
 
@@ -37598,7 +37614,7 @@
    title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;, or any element in the
    document or its browsing contexts currently has the system focus.
 
-  &lt;h4 id=sequential0&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Sequential focus
+  &lt;h4 id=sequential0&gt;&lt;span class=secno&gt;6.5.2 &lt;/span&gt;Sequential focus
    navigation&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=tabindex title=attr-tabindex&gt;&lt;code&gt;tabindex&lt;/code&gt;&lt;/dfn&gt;
@@ -37763,7 +37779,7 @@
    <A HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/methods/focus.asp">http://msdn.microsoft.com/workshop/author/dhtml/reference/methods/focus.asp</A>
 --&gt;
 
-  &lt;h3 id=selection&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;The text selection APIs&lt;/h3&gt;
+  &lt;h3 id=selection&gt;&lt;span class=secno&gt;6.6 &lt;/span&gt;The text selection APIs&lt;/h3&gt;
 
   &lt;p&gt;Every &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; has &lt;dfn id=a-selection
    title=&quot;the selection&quot;&gt;a selection&lt;/dfn&gt;. The selection can be empty, and
@@ -37820,7 +37836,7 @@
    href=&quot;#selection1&quot;&gt;::selection&lt;/a&gt;&lt;/code&gt; pseudo-element. &lt;a
    href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt; &lt;a href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;
 
-  &lt;h4 id=documentSelection&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;APIs for the
+  &lt;h4 id=documentSelection&gt;&lt;span class=secno&gt;6.6.1 &lt;/span&gt;APIs for the
    browsing context selection&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=getselection
@@ -38022,7 +38038,7 @@
    interface has no relation to the &lt;code&gt;&lt;a
    href=&quot;#datagridselection&quot;&gt;DataGridSelection&lt;/a&gt;&lt;/code&gt; interface.
 
-  &lt;h4 id=textFieldSelection&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;APIs for the text
+  &lt;h4 id=textFieldSelection&gt;&lt;span class=secno&gt;6.6.2 &lt;/span&gt;APIs for the text
    field selections&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;When we define HTMLTextAreaElement and HTMLInputElement
@@ -38112,7 +38128,7 @@
    elements that are not displaying simple text fields, they must raise an
    &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception.
 
-  &lt;h3 id=contenteditable&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;The &lt;code
+  &lt;h3 id=contenteditable&gt;&lt;span class=secno&gt;6.7 &lt;/span&gt;The &lt;code
    title=attr-contenteditable&gt;&lt;a
    href=&quot;#contenteditable0&quot;&gt;contenteditable&lt;/a&gt;&lt;/code&gt; attribute&lt;/h3&gt;
 
@@ -38209,7 +38225,7 @@
   &lt;!-- XXX would be useful to have a way to mark an element as
   unremovable. --&gt;
 
-  &lt;h4 id=user-editing&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;User editing actions&lt;/h4&gt;
+  &lt;h4 id=user-editing&gt;&lt;span class=secno&gt;6.7.1 &lt;/span&gt;User editing actions&lt;/h4&gt;
 
   &lt;p&gt;There are several actions that the user agent should allow the user to
    perform while the user is interacting with an editing host. How exactly
@@ -38397,7 +38413,7 @@
    href=&quot;#a-selection&quot;&gt;the selection&lt;/a&gt; followed by a request to break the
    paragraph at that position.
 
-  &lt;h4 id=making&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Making entire documents
+  &lt;h4 id=making&gt;&lt;span class=secno&gt;6.7.2 &lt;/span&gt;Making entire documents
    editable&lt;/h4&gt;
 
   &lt;p&gt;Documents have a &lt;dfn id=designMode
@@ -38432,7 +38448,7 @@
    href=&quot;#designModeScriptBlocked&quot;&gt;causes scripts in general to be
    disabled&lt;/a&gt; and the document to become editable.
 
-  &lt;h3 id=dnd&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;&lt;dfn id=drag-and&gt;Drag and
+  &lt;h3 id=dnd&gt;&lt;span class=secno&gt;6.8 &lt;/span&gt;&lt;dfn id=drag-and&gt;Drag and
    drop&lt;/dfn&gt;&lt;/h3&gt;
   &lt;!--XXX
 
@@ -38488,13 +38504,13 @@
    (so if the operation is not canceled, there must be at least one element
    in the middle step).
 
-  &lt;h4 id=introduction4&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction4&gt;&lt;span class=secno&gt;6.8.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
   &lt;p class=big-issue&gt;It's also currently non-existent.
 
-  &lt;h4 id=the-dragevent&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-dragevent&gt;&lt;span class=secno&gt;6.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#dragevent&quot;&gt;DragEvent&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#datatransfer0&quot;&gt;DataTransfer&lt;/a&gt;&lt;/code&gt; interfaces&lt;/h4&gt;
 
@@ -38645,7 +38661,7 @@
    the drag feedback&lt;/a&gt;. It adds an element to the &lt;code&gt;&lt;a
    href=&quot;#datatransfer0&quot;&gt;DataTransfer&lt;/a&gt;&lt;/code&gt; object.
 
-  &lt;h4 id=events1&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;Events fired during a
+  &lt;h4 id=events1&gt;&lt;span class=secno&gt;6.8.3 &lt;/span&gt;Events fired during a
    drag-and-drop action&lt;/h4&gt;
 
   &lt;p&gt;The following events are involved in the drag-and-drop model. Whenever
@@ -38899,7 +38915,7 @@
      &lt;td&gt;&lt;code title=&quot;&quot;&gt;copy&lt;/code&gt;
   &lt;/table&gt;
 
-  &lt;h4 id=drag-and-drop&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;Drag-and-drop
+  &lt;h4 id=drag-and-drop&gt;&lt;span class=secno&gt;6.8.4 &lt;/span&gt;Drag-and-drop
    processing model&lt;/h4&gt;
 
   &lt;p&gt;When the user attempts to begin a drag operation, the user agent must
@@ -39337,7 +39353,7 @@
     &lt;/ol&gt;
   &lt;/ol&gt;
 
-  &lt;h5 id=when-the&gt;&lt;span class=secno&gt;5.8.4.1. &lt;/span&gt;When the drag-and-drop
+  &lt;h5 id=when-the&gt;&lt;span class=secno&gt;6.8.4.1. &lt;/span&gt;When the drag-and-drop
    operation starts or ends in another document&lt;/h5&gt;
 
   &lt;p&gt;The model described above is independent of which &lt;code&gt;Document&lt;/code&gt;
@@ -39348,7 +39364,7 @@
   source in the events to the target, or is that obvious enough from
   the requirements in the event section above? --&gt;
 
-  &lt;h5 id=when-the0&gt;&lt;span class=secno&gt;5.8.4.2. &lt;/span&gt;When the drag-and-drop
+  &lt;h5 id=when-the0&gt;&lt;span class=secno&gt;6.8.4.2. &lt;/span&gt;When the drag-and-drop
    operation starts or ends in another application&lt;/h5&gt;
 
   &lt;p&gt;If the drag is initiated in another application, the &lt;a
@@ -39372,7 +39388,7 @@
    ended in another application from the case of a drag-and-drop operation
    being started or ended in another document from another domain.
 
-  &lt;h4 id=the-draggable&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;The &lt;dfn id=draggable
+  &lt;h4 id=the-draggable&gt;&lt;span class=secno&gt;6.8.5 &lt;/span&gt;The &lt;dfn id=draggable
    title=attr-draggable&gt;&lt;code&gt;draggable&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
 
   &lt;p&gt;All elements may have the &lt;code title=attr-draggable&gt;&lt;a
@@ -39422,7 +39438,7 @@
    href=&quot;#draggable&quot;&gt;draggable&lt;/a&gt;&lt;/code&gt; content attribute must be set to
    the literal value &lt;code title=&quot;&quot;&gt;true&lt;/code&gt;.
 
-  &lt;h4 id=copy-and&gt;&lt;span class=secno&gt;5.8.6 &lt;/span&gt;Copy and paste&lt;/h4&gt;
+  &lt;h4 id=copy-and&gt;&lt;span class=secno&gt;6.8.6 &lt;/span&gt;Copy and paste&lt;/h4&gt;
 
   &lt;p&gt;Copy-and-paste is a form of drag-and-drop: the &quot;copy&quot; part is equivalent
    to dragging content to another application (the &quot;clipboard&quot;), and the
@@ -39433,7 +39449,7 @@
    System) is equivalent to a drag-and-drop operation where the source is the
    selection.
 
-  &lt;h5 id=copy-to&gt;&lt;span class=secno&gt;5.8.6.1. &lt;/span&gt;Copy to clipboard&lt;/h5&gt;
+  &lt;h5 id=copy-to&gt;&lt;span class=secno&gt;6.8.6.1. &lt;/span&gt;Copy to clipboard&lt;/h5&gt;
 
   &lt;p&gt;When the user invokes a copy operation, the user agent must act as if
    the user had invoked a drag on the current selection. If the drag-and-drop
@@ -39445,14 +39461,14 @@
    agent should then follow the relevant platform-specific conventions for
    copy operations (e.g. updating the clipboard).
 
-  &lt;h5 id=cut-to&gt;&lt;span class=secno&gt;5.8.6.2. &lt;/span&gt;Cut to clipboard&lt;/h5&gt;
+  &lt;h5 id=cut-to&gt;&lt;span class=secno&gt;6.8.6.2. &lt;/span&gt;Cut to clipboard&lt;/h5&gt;
 
   &lt;p&gt;When the user invokes a cut operation, the user agent must act as if the
    user had invoked a copy operation (see the previous section), followed, if
    the copy was completed successfully, by &lt;a
    href=&quot;#contenteditable-delete&quot;&gt;a selection delete operation&lt;/a&gt;.
 
-  &lt;h5 id=paste&gt;&lt;span class=secno&gt;5.8.6.3. &lt;/span&gt;Paste from clipboard&lt;/h5&gt;
+  &lt;h5 id=paste&gt;&lt;span class=secno&gt;6.8.6.3. &lt;/span&gt;Paste from clipboard&lt;/h5&gt;
 
   &lt;p&gt;When the user invokes a clipboard paste operation, the user agent must
    act as if the user had invoked a drag on a hypothetical application
@@ -39464,7 +39480,7 @@
    keyboard focus, and then ended the drag-and-drop operation without
    canceling it.
 
-  &lt;h5 id=paste0&gt;&lt;span class=secno&gt;5.8.6.4. &lt;/span&gt;Paste from selection&lt;/h5&gt;
+  &lt;h5 id=paste0&gt;&lt;span class=secno&gt;6.8.6.4. &lt;/span&gt;Paste from selection&lt;/h5&gt;
 
   &lt;p&gt;When the user invokes a selection paste operation, the user agent must
    act as if the user had invoked a drag on the current selection, then
@@ -39472,7 +39488,7 @@
    element with the keyboard focus, and then ended the drag-and-drop
    operation without canceling it.
 
-  &lt;h4 id=security8&gt;&lt;span class=secno&gt;5.8.7 &lt;/span&gt;Security risks in the
+  &lt;h4 id=security8&gt;&lt;span class=secno&gt;6.8.7 &lt;/span&gt;Security risks in the
    drag-and-drop model&lt;/h4&gt;
 
   &lt;p&gt;User agents must not make the data added to the &lt;code&gt;&lt;a
@@ -39498,7 +39514,7 @@
    sensitive sources and dropped into hostile documents without the user's
    consent.
 
-  &lt;h3 id=undo&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;&lt;dfn id=undo-history&gt;Undo
+  &lt;h3 id=undo&gt;&lt;span class=secno&gt;6.9 &lt;/span&gt;&lt;dfn id=undo-history&gt;Undo
    history&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p class=big-issue&gt;There has got to be a better way of doing this, surely.
@@ -39517,7 +39533,7 @@
    of one or more of the following:
 
   &lt;ul&gt;
-   &lt;li&gt;Changes to the &lt;a href=&quot;#content&quot;&gt;content attributes&lt;/a&gt; of an
+   &lt;li&gt;Changes to the &lt;a href=&quot;#content0&quot;&gt;content attributes&lt;/a&gt; of an
     &lt;code&gt;Element&lt;/code&gt; node.
 
    &lt;li&gt;Changes to the &lt;a href=&quot;#dom-attributes&quot;&gt;DOM attributes&lt;/a&gt; of a
@@ -39544,7 +39560,7 @@
    actions (such as interactions with server-side state, or in the
    implementation of a drawing tool).
 
-  &lt;h4 id=the-undomanager&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-undomanager&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#undomanager&quot;&gt;UndoManager&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;div class=big-issue&gt;
@@ -39687,7 +39703,7 @@
    &quot;startBatchingDOMChangesForUndo()&quot; and after that the changes to the DOM
    go in as if the user had done them.
 
-  &lt;h4 id=undo-moving&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;&lt;dfn id=undo-moving0
+  &lt;h4 id=undo-moving&gt;&lt;span class=secno&gt;6.9.2 &lt;/span&gt;&lt;dfn id=undo-moving0
    title=do-undo&gt;Undo: moving back in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user invokes an undo operation, or when the &lt;code
@@ -39729,7 +39745,7 @@
    used to populate the redo history, and will then be used if the user
    invokes the &quot;redo&quot; command to undo his undo.
 
-  &lt;h4 id=redo-moving&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;&lt;dfn id=redo-moving0
+  &lt;h4 id=redo-moving&gt;&lt;span class=secno&gt;6.9.3 &lt;/span&gt;&lt;dfn id=redo-moving0
    title=do-redo&gt;Redo: moving forward in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user invokes a redo operation, or when the &lt;code
@@ -39768,7 +39784,7 @@
    on the &lt;code&gt;Document&lt;/code&gt; object, using the &lt;a href=&quot;#undo-object&quot;&gt;undo
    object&lt;/a&gt; entry's associated undo object as the event's data.
 
-  &lt;h4 id=the-undomanagerevent&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-undomanagerevent&gt;&lt;span class=secno&gt;6.9.4 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#undomanagerevent&quot;&gt;UndoManagerEvent&lt;/a&gt;&lt;/code&gt; interface and the
    &lt;code title=event-undo&gt;&lt;a href=&quot;#undo0&quot;&gt;undo&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=event-redo&gt;&lt;a href=&quot;#redo&quot;&gt;redo&lt;/a&gt;&lt;/code&gt; events&lt;/h4&gt;
@@ -39800,7 +39816,7 @@
    &lt;code title=dom-UndoManagerEvent-data&gt;&lt;a href=&quot;#data3&quot;&gt;data&lt;/a&gt;&lt;/code&gt;
    field containing the relevant &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt;.
 
-  &lt;h4 id=implementation0&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;Implementation notes&lt;/h4&gt;
+  &lt;h4 id=implementation0&gt;&lt;span class=secno&gt;6.9.5 &lt;/span&gt;Implementation notes&lt;/h4&gt;
 
   &lt;p&gt;How user agents present the above conceptual model to the user is not
    defined. The undo interface could be a filtered view of the &lt;a
@@ -39817,7 +39833,7 @@
    history&lt;/a&gt; described in this section, however, such that to a script
    there is no detectable difference.
 
-  &lt;h3 id=command&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Command APIs&lt;/h3&gt;
+  &lt;h3 id=command&gt;&lt;span class=secno&gt;6.10 &lt;/span&gt;Command APIs&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=execCommand
    title=dom-document-execCommand&gt;&lt;code&gt;execCommand(&lt;var
@@ -40358,9 +40374,9 @@
  &quot;justifycenter&quot;, &quot;justifyright&quot;, &quot;justifyfull&quot;, &quot;indent&quot;, &quot;outdent&quot;
 --&gt;
 
-  &lt;h2 id=comms&gt;&lt;span class=secno&gt;6. &lt;/span&gt;Communication&lt;/h2&gt;
+  &lt;h2 id=comms&gt;&lt;span class=secno&gt;7. &lt;/span&gt;Communication&lt;/h2&gt;
 
-  &lt;h3 id=event1&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
+  &lt;h3 id=event1&gt;&lt;span class=secno&gt;7.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
   &lt;p&gt;Messages in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt; and
    in &lt;a href=&quot;#server-sent&quot;&gt;server-sent DOM events&lt;/a&gt;, use the &lt;dfn
@@ -40405,7 +40421,7 @@
    represents, in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, the
    &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; from which the message came.
 
-  &lt;h3 id=server-sent-events&gt;&lt;span class=secno&gt;6.2 &lt;/span&gt;&lt;dfn
+  &lt;h3 id=server-sent-events&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;&lt;dfn
    id=server-sent&gt;Server-sent DOM events&lt;/dfn&gt;&lt;/h3&gt;
   &lt;!-- event-source --&gt;
 
@@ -40414,7 +40430,7 @@
    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; element provides a simple
    interface to this mechanism.
 
-  &lt;h4 id=the-remoteeventtarget&gt;&lt;span class=secno&gt;6.2.1 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-remoteeventtarget&gt;&lt;span class=secno&gt;7.2.1 &lt;/span&gt;The &lt;dfn
    id=remoteeventtarget&gt;&lt;code&gt;RemoteEventTarget&lt;/code&gt;&lt;/dfn&gt; interface&lt;/h4&gt;
 
   &lt;p&gt;Any object that implements the &lt;code&gt;EventTarget&lt;/code&gt; interface must
@@ -40449,7 +40465,7 @@
   &lt;p&gt;Relative URIs must be resolved relative to &lt;span
    class=big-issue&gt;...&lt;/span&gt;.
 
-  &lt;h4 id=connecting&gt;&lt;span class=secno&gt;6.2.2 &lt;/span&gt;Connecting to an event
+  &lt;h4 id=connecting&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;Connecting to an event
    stream&lt;/h4&gt;
 
   &lt;p&gt;Each object implementing the &lt;code&gt;EventTarget&lt;/code&gt; and &lt;code&gt;&lt;a
@@ -40519,7 +40535,7 @@
   XXX define this better once that spec is more stable --&gt;
    
 
-  &lt;p&gt;HTTP 200 OK responses with a &lt;a href=&quot;#content-type8&quot;&gt;Content-Type&lt;/a&gt;
+  &lt;p&gt;HTTP 200 OK responses with a &lt;a href=&quot;#content-type5&quot;&gt;Content-Type&lt;/a&gt;
    header specifying the type &lt;code&gt;text/event-stream&lt;/code&gt; that are either
    from &lt;a href=&quot;#domain0&quot;&gt;the document's domain&lt;/a&gt; or explicitly allowed by
    the Access-Control HTTP headers must be processed line by line &lt;a
@@ -40535,7 +40551,7 @@
    reconnection time of the event source.
 
   &lt;p&gt;HTTP 200 OK responses that have a &lt;a
-   href=&quot;#content-type8&quot;&gt;Content-Type&lt;/a&gt; other than
+   href=&quot;#content-type5&quot;&gt;Content-Type&lt;/a&gt; other than
    &lt;code&gt;text/event-stream&lt;/code&gt; (or some other supported type), and HTTP
    responses whose Access-Control headers indicate that the resource are not
    to be used, must be ignored and must prevent the user agent from
@@ -40596,7 +40612,7 @@
 
   &lt;p&gt;For non-HTTP protocols, UAs should act in equivalent ways.
 
-  &lt;h4 id=parsing1&gt;&lt;span class=secno&gt;6.2.3 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
+  &lt;h4 id=parsing1&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
 
   &lt;p&gt;This event stream format's MIME type is &lt;code&gt;text/event-stream&lt;/code&gt;.
 
@@ -40628,7 +40644,7 @@
    FEED (CRLF) character pair, a single U+000A LINE FEED (LF) character, or a
    single U+000D CARRIAGE RETURN (CR) character.
 
-  &lt;h4 id=event-stream-interpretation&gt;&lt;span class=secno&gt;6.2.4
+  &lt;h4 id=event-stream-interpretation&gt;&lt;span class=secno&gt;7.2.4
    &lt;/span&gt;Interpreting an event stream&lt;/h4&gt;
 
   &lt;p&gt;Bytes or sequences of bytes that are not valid UTF-8 sequences must be
@@ -40866,7 +40882,7 @@
    &lt;p&gt;This is because the space after the colon is ignored if present.&lt;/p&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=notes&gt;&lt;span class=secno&gt;6.2.5 &lt;/span&gt;Notes&lt;/h4&gt;
+  &lt;h4 id=notes&gt;&lt;span class=secno&gt;7.2.5 &lt;/span&gt;Notes&lt;/h4&gt;
 
   &lt;p&gt;Legacy proxy servers are known to, in certain cases, drop HTTP
    connections after a short timeout. To protect against such proxy servers,
@@ -40893,7 +40909,7 @@
    href=&quot;#event-source&quot;&gt;event-source&lt;/a&gt;&lt;/code&gt; functionality on a per-page
    basis.
 
-  &lt;h3 id=network&gt;&lt;span class=secno&gt;6.3 &lt;/span&gt;Network connections&lt;/h3&gt;
+  &lt;h3 id=network&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Network connections&lt;/h3&gt;
 
   &lt;p&gt;To enable Web applications to communicate with each other in local area
    networks, and to maintain bidirectional communications with their
@@ -40919,7 +40935,7 @@
    underlying network. For example, this interface could not be used to
    implement an IRC client without proxying messages through a custom server.
 
-  &lt;h4 id=network-intro&gt;&lt;span class=secno&gt;6.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=network-intro&gt;&lt;span class=secno&gt;7.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
 
@@ -40943,7 +40959,7 @@
    have to implement a compliant HTTP server as well, etc
   --&gt;
 
-  &lt;h4 id=the-connection&gt;&lt;span class=secno&gt;6.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-connection&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#connection0&quot;&gt;Connection&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=connection0&gt;Connection&lt;/dfn&gt; {
@@ -41046,7 +41062,7 @@
    href=&quot;#readystate1&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to change, as
    &lt;a href=&quot;#closeConnection&quot;&gt;described above&lt;/a&gt;.
 
-  &lt;h4 id=connection&gt;&lt;span class=secno&gt;6.3.3 &lt;/span&gt;Connection Events&lt;/h4&gt;
+  &lt;h4 id=connection&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Connection Events&lt;/h4&gt;
 
   &lt;p&gt;All the events described in this section are events in no namespace,
    which do not bubble, are not cancelable, and have no default action.
@@ -41113,7 +41129,7 @@
    completed.&lt;/p&gt;
   &lt;!-- XXX make this more generic --&gt;
 
-  &lt;h4 id=tcp-connections&gt;&lt;span class=secno&gt;6.3.4 &lt;/span&gt;TCP connections&lt;/h4&gt;
+  &lt;h4 id=tcp-connections&gt;&lt;span class=secno&gt;7.3.4 &lt;/span&gt;TCP connections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=tcpconnection
    title=dom-TCPConnection&gt;&lt;code&gt;TCPConnection(&lt;var title=&quot;&quot;&gt;subdomain&lt;/var&gt;,
@@ -41202,7 +41218,7 @@
    title=dom-TCPConnection&gt;&lt;a href=&quot;#tcpconnection&quot;&gt;TCPConnection&lt;/a&gt;&lt;/code&gt;
    constructor.
 
-  &lt;h4 id=broadcast&gt;&lt;span class=secno&gt;6.3.5 &lt;/span&gt;Broadcast connections&lt;/h4&gt;
+  &lt;h4 id=broadcast&gt;&lt;span class=secno&gt;7.3.5 &lt;/span&gt;Broadcast connections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=localbroadcastconnection
    title=dom-LocalBroadcastConnection&gt;&lt;code&gt;LocalBroadcastConnection()&lt;/code&gt;&lt;/dfn&gt;
@@ -41247,7 +41263,7 @@
    &lt;code title=event-connection-open&gt;&lt;a href=&quot;#open3&quot;&gt;open&lt;/a&gt;&lt;/code&gt; event
    must be fired. Broadcast connections are never closed.
 
-  &lt;h5 id=broadcasting&gt;&lt;span class=secno&gt;6.3.5.1. &lt;/span&gt;Broadcasting over
+  &lt;h5 id=broadcasting&gt;&lt;span class=secno&gt;7.3.5.1. &lt;/span&gt;Broadcasting over
    TCP/IP&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Should we drop this altogether? Letting people fill the
@@ -41328,19 +41344,19 @@
    can keep link-local IP addresses secret while still allowing for
    applications to distinguish between multiple participants?
 
-  &lt;h5 id=bluetooth-broadcast&gt;&lt;span class=secno&gt;6.3.5.2. &lt;/span&gt;Broadcasting
+  &lt;h5 id=bluetooth-broadcast&gt;&lt;span class=secno&gt;7.3.5.2. &lt;/span&gt;Broadcasting
    over Bluetooth&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Does anyone know enough about Bluetooth to write this
    section?
 
-  &lt;h5 id=irda-broadcast&gt;&lt;span class=secno&gt;6.3.5.3. &lt;/span&gt;Broadcasting over
+  &lt;h5 id=irda-broadcast&gt;&lt;span class=secno&gt;7.3.5.3. &lt;/span&gt;Broadcasting over
    IrDA&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Does anyone know enough about IrDA to write this
    section?
 
-  &lt;h4 id=peer-to-peer&gt;&lt;span class=secno&gt;6.3.6 &lt;/span&gt;Peer-to-peer connections&lt;/h4&gt;
+  &lt;h4 id=peer-to-peer&gt;&lt;span class=secno&gt;7.3.6 &lt;/span&gt;Peer-to-peer connections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=peertopeerconnection
    title=dom-PeerToPeerConnection&gt;&lt;code&gt;PeerToPeerConnection()&lt;/code&gt;&lt;/dfn&gt;
@@ -41400,7 +41416,7 @@
    href=&quot;#closeConnection&quot;&gt;closed the connection&lt;/a&gt;, and stop trying to
    connect.
 
-  &lt;h5 id=peer-to-peer0&gt;&lt;span class=secno&gt;6.3.6.1. &lt;/span&gt;Peer-to-peer
+  &lt;h5 id=peer-to-peer0&gt;&lt;span class=secno&gt;7.3.6.1. &lt;/span&gt;Peer-to-peer
    connections over TCP/IP&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Should we replace this section with something that uses
@@ -41449,13 +41465,13 @@
    &lt;em&gt;secure&lt;/em&gt; (encrypted) peer-to-peer connections at this time. &lt;span
    class=big-issue&gt;If you can see a good way to do this, let me know.&lt;/span&gt;
 
-  &lt;h5 id=bluetooth-peer&gt;&lt;span class=secno&gt;6.3.6.2. &lt;/span&gt;Peer-to-peer
+  &lt;h5 id=bluetooth-peer&gt;&lt;span class=secno&gt;7.3.6.2. &lt;/span&gt;Peer-to-peer
    connections over Bluetooth&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Does anyone know enough about Bluetooth to write this
    section?
 
-  &lt;h5 id=irda-peer&gt;&lt;span class=secno&gt;6.3.6.3. &lt;/span&gt;Peer-to-peer connections
+  &lt;h5 id=irda-peer&gt;&lt;span class=secno&gt;7.3.6.3. &lt;/span&gt;Peer-to-peer connections
    over IrDA&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;Does anyone know enough about IrDA to write this
@@ -41532,7 +41548,7 @@
 &gt; &gt; should it be under the control of the author or user?
 --&gt;
 
-  &lt;h4 id=the-common&gt;&lt;span class=secno&gt;6.3.7 &lt;/span&gt;The common protocol for
+  &lt;h4 id=the-common&gt;&lt;span class=secno&gt;7.3.7 &lt;/span&gt;The common protocol for
    TCP-based connections&lt;/h4&gt;
 
   &lt;p&gt;The same protocol is used for &lt;code title=dom-TCPConnection&gt;&lt;a
@@ -41544,7 +41560,7 @@
    received over such connections (which is the same for both clients and
    servers).
 
-  &lt;h5 id=clients&gt;&lt;span class=secno&gt;6.3.7.1. &lt;/span&gt;&lt;dfn id=clients0&gt;Clients
+  &lt;h5 id=clients&gt;&lt;span class=secno&gt;7.3.7.1. &lt;/span&gt;&lt;dfn id=clients0&gt;Clients
    connecting over TCP&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;This section defines the client-side requirements of the protocol used
@@ -41607,7 +41623,7 @@
    connection&lt;/a&gt; and give up trying to connect.&lt;/p&gt;
   &lt;!-- XXX we should support automatic reconnect --&gt;
 
-  &lt;h5 id=servers&gt;&lt;span class=secno&gt;6.3.7.2. &lt;/span&gt;&lt;dfn id=servers0&gt;Servers
+  &lt;h5 id=servers&gt;&lt;span class=secno&gt;7.3.7.2. &lt;/span&gt;&lt;dfn id=servers0&gt;Servers
    accepting connections over TCP&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;This section defines the server side of the protocol described in the
@@ -41667,7 +41683,7 @@
    connection&lt;/a&gt; and give up trying to connect.&lt;/p&gt;
   &lt;!-- XXX we should support automatic reconnect --&gt;
 
-  &lt;h5 id=sending&gt;&lt;span class=secno&gt;6.3.7.3. &lt;/span&gt;&lt;dfn id=sending0&gt;Sending
+  &lt;h5 id=sending&gt;&lt;span class=secno&gt;7.3.7.3. &lt;/span&gt;&lt;dfn id=sending0&gt;Sending
    and receiving data over TCP&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;code title=dom-Connection-send&gt;&lt;a href=&quot;#send&quot;&gt;send(&lt;var
@@ -41705,7 +41721,7 @@
     all occurrences of 0x17 with 0xFF 0x00, or similar.
    --&gt;
 
-  &lt;h4 id=network-security&gt;&lt;span class=secno&gt;6.3.8 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=network-security&gt;&lt;span class=secno&gt;7.3.8 &lt;/span&gt;Security&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Need to write this section.
 
@@ -41720,7 +41736,7 @@
   &lt;p class=big-issue&gt;Should consider dropping the subdomain-only restriction.
    It doesn't seem to add anything, and prevents cross-domain chatter.
 
-  &lt;h4 id=network-other-specs&gt;&lt;span class=secno&gt;6.3.9 &lt;/span&gt;Relationship to
+  &lt;h4 id=network-other-specs&gt;&lt;span class=secno&gt;7.3.9 &lt;/span&gt;Relationship to
    other standards&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Should have a section talking about the fact that we
@@ -41733,7 +41749,7 @@
    protocol makes it much easier to do RAD; HTTP doesn't fit the needs and
    doesn't have the security model needed; etc)
 
-  &lt;h3 id=crossDocumentMessages&gt;&lt;span class=secno&gt;6.4 &lt;/span&gt;&lt;dfn
+  &lt;h3 id=crossDocumentMessages&gt;&lt;span class=secno&gt;7.4 &lt;/span&gt;&lt;dfn
    id=cross-document&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;Web browsers, for security and privacy reasons, prevent documents in
@@ -41746,7 +41762,7 @@
    to communicate with each other regardless of their source domain, in a way
    designed to not enable cross-site scripting attacks.
 
-  &lt;h4 id=processing4&gt;&lt;span class=secno&gt;6.4.1 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing4&gt;&lt;span class=secno&gt;7.4.1 &lt;/span&gt;Processing model&lt;/h4&gt;
 
   &lt;p&gt;When a script invokes the &lt;dfn id=postmessage
    title=dom-window-postMessage&gt;&lt;code&gt;postMessage(&lt;var
@@ -41871,15 +41887,15 @@
    security reasons. It also requires that UAs be careful to allow access to
    certain properties but not others.
 
-  &lt;h2 id=repetition&gt;&lt;span class=secno&gt;7. &lt;/span&gt;Repetition templates&lt;/h2&gt;
+  &lt;h2 id=repetition&gt;&lt;span class=secno&gt;8. &lt;/span&gt;Repetition templates&lt;/h2&gt;
 
   &lt;p class=big-issue&gt;See &lt;a
    href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls">http://www.whatwg.org/specs/web-forms/current-work/#repeatingFormControls</A>&quot;&gt;WF2&lt;/a&gt;
    for now
 
-  &lt;h2 id=syntax&gt;&lt;span class=secno&gt;8. &lt;/span&gt;The HTML syntax&lt;/h2&gt;
+  &lt;h2 id=syntax&gt;&lt;span class=secno&gt;9. &lt;/span&gt;The HTML syntax&lt;/h2&gt;
 
-  &lt;h3 id=writing0&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;Writing HTML documents&lt;/h3&gt;
+  &lt;h3 id=writing0&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Writing HTML documents&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to documents, authoring tools, and markup
    generators. In particular, it does not apply to conformance checkers;
@@ -41900,7 +41916,7 @@
     and &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;.
 
    &lt;li&gt;The root element, in the form of an &lt;code&gt;&lt;a
-    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; &lt;a href=&quot;#elements3&quot;
+    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; &lt;a href=&quot;#elements4&quot;
     title=syntax-elements&gt;element&lt;/a&gt;.
 
    &lt;li&gt;Any number of &lt;a href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;
@@ -41932,7 +41948,7 @@
     element but before the &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;8.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
+  &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;9.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=doctype title=syntax-doctype&gt;DOCTYPE&lt;/dfn&gt; is a mostly
    useless, but required, header.
@@ -41995,9 +42011,9 @@
   &lt;p class=note&gt;In other words, &lt;code&gt;&lt;!DOCTYPE HTML&gt;&lt;/code&gt;,
    case-insensitively.
 
-  &lt;h4 id=elements0&gt;&lt;span class=secno&gt;8.1.2 &lt;/span&gt;Elements&lt;/h4&gt;
+  &lt;h4 id=elements1&gt;&lt;span class=secno&gt;9.1.2 &lt;/span&gt;Elements&lt;/h4&gt;
 
-  &lt;p&gt;There are five different kinds of &lt;dfn id=elements3
+  &lt;p&gt;There are five different kinds of &lt;dfn id=elements4
    title=syntax-elements&gt;elements&lt;/dfn&gt;: void elements, CDATA elements,
    RCDATA elements, foreign elements, and normal elements.
 
@@ -42082,7 +42098,7 @@
    is &lt;em&gt;not&lt;/em&gt; marked as self-closing can have &lt;a href=&quot;#text2&quot;
    title=syntax-text&gt;text&lt;/a&gt;, &lt;a href=&quot;#character3&quot;
    title=syntax-charref&gt;character references&lt;/a&gt;, &lt;a href=&quot;#cdata0&quot;
-   title=syntax-cdata&gt;CDATA blocks&lt;/a&gt;, other &lt;a href=&quot;#elements3&quot;
+   title=syntax-cdata&gt;CDATA blocks&lt;/a&gt;, other &lt;a href=&quot;#elements4&quot;
    title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a href=&quot;#comments0&quot;
    title=syntax-comments&gt;comments&lt;/a&gt;, but the text must not contain the
    character U+003C LESS-THAN SIGN (&lt;code&gt;&lt;&lt;/code&gt;) or an &lt;a
@@ -42091,7 +42107,7 @@
 
   &lt;p&gt;Normal elements can have &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt;, &lt;a
    href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt;, other &lt;a
-   href=&quot;#elements3&quot; title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a
+   href=&quot;#elements4&quot; title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a
    href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;, but the text must
    not contain the character U+003C LESS-THAN SIGN (&lt;code&gt;&lt;&lt;/code&gt;) or an
    &lt;a href=&quot;#ambiguous&quot; title=syntax-ambiguous-ampersand&gt;ambiguous
@@ -42110,7 +42126,7 @@
    mix of lower- and uppercase letters that, when converted to all-lowercase,
    matches the element's tag name; tag names are case-insensitive.
 
-  &lt;h5 id=start&gt;&lt;span class=secno&gt;8.1.2.1. &lt;/span&gt;Start tags&lt;/h5&gt;
+  &lt;h5 id=start&gt;&lt;span class=secno&gt;9.1.2.1. &lt;/span&gt;Start tags&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=start6 title=syntax-start-tags&gt;Start tags&lt;/dfn&gt; must have the
    following format:
@@ -42145,7 +42161,7 @@
     (&lt;code&gt;&gt;&lt;/code&gt;) character.
   &lt;/ol&gt;
 
-  &lt;h5 id=end-tags&gt;&lt;span class=secno&gt;8.1.2.2. &lt;/span&gt;End tags&lt;/h5&gt;
+  &lt;h5 id=end-tags&gt;&lt;span class=secno&gt;9.1.2.2. &lt;/span&gt;End tags&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=end-tags0 title=syntax-end-tags&gt;End tags&lt;/dfn&gt; must have the
    following format:
@@ -42167,7 +42183,7 @@
     (&lt;code&gt;&gt;&lt;/code&gt;) character.
   &lt;/ol&gt;
 
-  &lt;h5 id=attributes1&gt;&lt;span class=secno&gt;8.1.2.3. &lt;/span&gt;Attributes&lt;/h5&gt;
+  &lt;h5 id=attributes1&gt;&lt;span class=secno&gt;9.1.2.3. &lt;/span&gt;Attributes&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=attributes2 title=syntax-attributes&gt;Attributes&lt;/dfn&gt; for an
    element are expressed inside the element's start tag.
@@ -42295,7 +42311,7 @@
      href=&quot;#space&quot;&gt;space character&lt;/a&gt; separating the two.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=optional&gt;&lt;span class=secno&gt;8.1.2.4. &lt;/span&gt;Optional tags&lt;/h5&gt;
+  &lt;h5 id=optional&gt;&lt;span class=secno&gt;9.1.2.4. &lt;/span&gt;Optional tags&lt;/h5&gt;
 
   &lt;p&gt;Certain tags can be &lt;dfn id=omitted
    title=syntax-tag-omission&gt;omitted&lt;/dfn&gt;.&lt;/p&gt;
@@ -42492,7 +42508,7 @@
   &lt;p&gt;&lt;strong&gt;However&lt;/strong&gt;, a &lt;span title=syntax-start-tag&gt;start
    tag&lt;/span&gt; must never be omitted if it has any attributes.
 
-  &lt;h5 id=element-restrictions&gt;&lt;span class=secno&gt;8.1.2.5. &lt;/span&gt;Restrictions
+  &lt;h5 id=element-restrictions&gt;&lt;span class=secno&gt;9.1.2.5. &lt;/span&gt;Restrictions
    on content models&lt;/h5&gt;
 
   &lt;p&gt;For historical reasons, certain elements have extra restrictions beyond
@@ -42529,7 +42545,7 @@
    &lt;pre&gt;&lt;pre&gt;&lt;br&gt;Hello&lt;/pre&gt;&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h5 id=cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;8.1.2.6.
+  &lt;h5 id=cdata-rcdata-restrictions&gt;&lt;span class=secno&gt;9.1.2.6.
    &lt;/span&gt;Restrictions on the contents of CDATA and RCDATA elements&lt;/h5&gt;
 
   &lt;p&gt;The text in CDATA and RCDATA elements must not contain any occurrences
@@ -42571,7 +42587,7 @@
    that is not followed by an &lt;a href=&quot;#escaping1&quot;
    title=syntax-escape-end&gt;escaping text span end&lt;/a&gt;.
 
-  &lt;h4 id=text0&gt;&lt;span class=secno&gt;8.1.3 &lt;/span&gt;Text&lt;/h4&gt;
+  &lt;h4 id=text0&gt;&lt;span class=secno&gt;9.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=text2 title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
    attributes, and comments. Text must consist of Unicode characters. Text
@@ -42581,14 +42597,14 @@
    Extra constraints are placed on what is and what is not allowed in text
    based on where the text is to be put, as described in the other sections.
 
-  &lt;h5 id=newlines&gt;&lt;span class=secno&gt;8.1.3.1. &lt;/span&gt;Newlines&lt;/h5&gt;
+  &lt;h5 id=newlines&gt;&lt;span class=secno&gt;9.1.3.1. &lt;/span&gt;Newlines&lt;/h5&gt;
 
   &lt;p&gt;&lt;dfn id=newlines0 title=syntax-newlines&gt;Newlines&lt;/dfn&gt; in HTML may be
    represented either as U+000D CARRIAGE RETURN (CR) characters, U+000A LINE
    FEED (LF) characters, or pairs of U+000D CARRIAGE RETURN (CR), U+000A LINE
    FEED (LF) characters in that order.
 
-  &lt;h4 id=character&gt;&lt;span class=secno&gt;8.1.4 &lt;/span&gt;Character references&lt;/h4&gt;
+  &lt;h4 id=character&gt;&lt;span class=secno&gt;9.1.4 &lt;/span&gt;Character references&lt;/h4&gt;
 
   &lt;p&gt;In certain cases described in other sections, &lt;a href=&quot;#text2&quot;
    title=syntax-text&gt;text&lt;/a&gt; may be mixed with &lt;dfn id=character3
@@ -42638,7 +42654,7 @@
    a &lt;a href=&quot;#space&quot;&gt;space character&lt;/a&gt;, a U+003C LESS-THAN SIGN character
    ('&lt;'), or another U+0026 AMPERSAND (&lt;code&gt;&amp;&lt;/code&gt;) character.
 
-  &lt;h4 id=cdata&gt;&lt;span class=secno&gt;8.1.5 &lt;/span&gt;CDATA blocks&lt;/h4&gt;
+  &lt;h4 id=cdata&gt;&lt;span class=secno&gt;9.1.5 &lt;/span&gt;CDATA blocks&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=cdata0 title=syntax-cdata&gt;CDATA blocks&lt;/dfn&gt; must start with the
    character sequence U+003C LESS-THAN SIGN, U+0021 EXCLAMATION MARK, U+005B
@@ -42654,7 +42670,7 @@
    U+005D RIGHT SQUARE BRACKET, U+003E GREATER-THAN SIGN (&lt;code
    title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;).
 
-  &lt;h4 id=comments&gt;&lt;span class=secno&gt;8.1.6 &lt;/span&gt;Comments&lt;/h4&gt;
+  &lt;h4 id=comments&gt;&lt;span class=secno&gt;9.1.6 &lt;/span&gt;Comments&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=comments0 title=syntax-comments&gt;Comments&lt;/dfn&gt; must start with
    the four character sequence U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
@@ -42670,7 +42686,7 @@
    three character sequence U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E
    GREATER-THAN SIGN (&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;).
 
-  &lt;h3 id=parsing&gt;&lt;span class=secno&gt;8.2 &lt;/span&gt;Parsing HTML documents&lt;/h3&gt;
+  &lt;h3 id=parsing&gt;&lt;span class=secno&gt;9.2 &lt;/span&gt;Parsing HTML documents&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to user agents, data mining tools, and
    conformance checkers.&lt;/em&gt;
@@ -42727,7 +42743,7 @@
    also verify that the document obeys all the other conformance requirements
    described in this specification.
 
-  &lt;h4 id=overview&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Overview of the parsing
+  &lt;h4 id=overview&gt;&lt;span class=secno&gt;9.2.1 &lt;/span&gt;Overview of the parsing
    model&lt;/h4&gt;
 
   &lt;p&gt;The input to the HTML parsing process consists of a stream of Unicode
@@ -42767,7 +42783,7 @@
 ...&lt;/pre&gt;
   &lt;/div&gt;
 
-  &lt;h4 id=the-input0&gt;&lt;span class=secno&gt;8.2.2 &lt;/span&gt;The &lt;dfn id=input0&gt;input
+  &lt;h4 id=the-input0&gt;&lt;span class=secno&gt;9.2.2 &lt;/span&gt;The &lt;dfn id=input0&gt;input
    stream&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The stream of Unicode characters that consists the input to the
@@ -42781,7 +42797,7 @@
    determine the character encoding is given by the XML specification. This
    section does not apply to XML documents. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;
 
-  &lt;h5 id=determining&gt;&lt;span class=secno&gt;8.2.2.1. &lt;/span&gt;Determining the
+  &lt;h5 id=determining&gt;&lt;span class=secno&gt;9.2.2.1. &lt;/span&gt;Determining the
    character encoding&lt;/h5&gt;
 
   &lt;p&gt;In some cases, it might be impractical to unambiguously determine the
@@ -42799,7 +42815,7 @@
    &lt;dfn id=encoding0&gt;encoding sniffing algorithm&lt;/dfn&gt;) to determine the
    character encoding to use when decoding a document in the first pass. This
    algorithm takes as input any out-of-band metadata available to the user
-   agent (e.g. the &lt;a href=&quot;#content-type8&quot; title=Content-Type&gt;Content-Type
+   agent (e.g. the &lt;a href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type
    metadata&lt;/a&gt; of the document) and all the bytes available so far, and
    returns an encoding and a &lt;dfn id=confidence
    title=concept-encoding-confidence&gt;confidence&lt;/dfn&gt;. The confidence is
@@ -42936,12 +42952,11 @@
 
          &lt;li&gt;
           &lt;p&gt;Otherwise, the attribute's name is &quot;&lt;code
-           title=&quot;&quot;&gt;content&lt;/code&gt;&quot;: apply the &lt;a
-           href=&quot;#algorithm4&quot;&gt;algorithm for extracting an encoding from a
-           Content-Type&lt;/a&gt;, giving the attribute's value as the string to
-           parse. If an encoding is returned, let &lt;var title=&quot;&quot;&gt;charset&lt;/var&gt;
-           be that encoding. Otherwise, return to step 2 in these inner
-           steps.
+           title=&quot;&quot;&gt;content&lt;/code&gt;&quot;: apply the &lt;a href=&quot;#algorithm&quot;&gt;algorithm
+           for extracting an encoding from a Content-Type&lt;/a&gt;, giving the
+           attribute's value as the string to parse. If an encoding is
+           returned, let &lt;var title=&quot;&quot;&gt;charset&lt;/var&gt; be that encoding.
+           Otherwise, return to step 2 in these inner steps.
 
          &lt;li&gt;
           &lt;p&gt;If &lt;var title=&quot;&quot;&gt;charset&lt;/var&gt; is a UTF-16 encoding, change it
@@ -43208,7 +43223,7 @@
    time as the user agent uses the returned value to select the decoder to
    use for the input stream.
 
-  &lt;h5 id=character0&gt;&lt;span class=secno&gt;8.2.2.2. &lt;/span&gt;Character encoding
+  &lt;h5 id=character0&gt;&lt;span class=secno&gt;9.2.2.2. &lt;/span&gt;Character encoding
    requirements&lt;/h5&gt;
 
   &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
@@ -43358,7 +43373,7 @@
    UTF-32 in its algorithms; support and use of UTF-32 can thus lead to
    unexpected behavior in implementations of this specification.
 
-  &lt;h5 id=preprocessing&gt;&lt;span class=secno&gt;8.2.2.3. &lt;/span&gt;Preprocessing the
+  &lt;h5 id=preprocessing&gt;&lt;span class=secno&gt;9.2.2.3. &lt;/span&gt;Preprocessing the
    input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be converted to
@@ -43430,7 +43445,7 @@
    method) is consumed. Otherwise, the &quot;EOF&quot; character is not a real
    character in the stream, but rather the lack of any further characters.
 
-  &lt;h5 id=changing&gt;&lt;span class=secno&gt;8.2.2.4. &lt;/span&gt;Changing the encoding
+  &lt;h5 id=changing&gt;&lt;span class=secno&gt;9.2.2.4. &lt;/span&gt;Changing the encoding
    while parsing&lt;/h5&gt;
 
   &lt;p&gt;When the parser requires the user agent to &lt;dfn id=change&gt;change the
@@ -43473,9 +43488,9 @@
     the document is marked as not being cacheable.
   &lt;/ol&gt;
 
-  &lt;h4 id=parse&gt;&lt;span class=secno&gt;8.2.3 &lt;/span&gt;Parse state&lt;/h4&gt;
+  &lt;h4 id=parse&gt;&lt;span class=secno&gt;9.2.3 &lt;/span&gt;Parse state&lt;/h4&gt;
 
-  &lt;h5 id=the-insertion&gt;&lt;span class=secno&gt;8.2.3.1. &lt;/span&gt;The insertion mode&lt;/h5&gt;
+  &lt;h5 id=the-insertion&gt;&lt;span class=secno&gt;9.2.3.1. &lt;/span&gt;The insertion mode&lt;/h5&gt;
 
   &lt;p&gt;Initially the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#initial&quot;
    title=&quot;insertion mode: initial&quot;&gt;initial&lt;/a&gt;&quot;. It can change to &quot;&lt;a
@@ -43639,7 +43654,7 @@
    &lt;li&gt;Return to step 3.
   &lt;/ol&gt;
 
-  &lt;h5 id=the-stack&gt;&lt;span class=secno&gt;8.2.3.2. &lt;/span&gt;The stack of open
+  &lt;h5 id=the-stack&gt;&lt;span class=secno&gt;9.2.3.2. &lt;/span&gt;The stack of open
    elements&lt;/h5&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=stack&gt;stack of open elements&lt;/dfn&gt; is empty. The
@@ -43833,7 +43848,7 @@
    misnested formatting elements&lt;/a&gt;), the stack is manipulated in a
    random-access fashion.
 
-  &lt;h5 id=the-list&gt;&lt;span class=secno&gt;8.2.3.3. &lt;/span&gt;The list of active
+  &lt;h5 id=the-list&gt;&lt;span class=secno&gt;9.2.3.3. &lt;/span&gt;The list of active
    formatting elements&lt;/h5&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=list-of4&gt;list of active formatting elements&lt;/dfn&gt;
@@ -43923,7 +43938,7 @@
    &lt;li&gt;Go to step 1.
   &lt;/ol&gt;
 
-  &lt;h5 id=the-element&gt;&lt;span class=secno&gt;8.2.3.4. &lt;/span&gt;The element pointers&lt;/h5&gt;
+  &lt;h5 id=the-element&gt;&lt;span class=secno&gt;9.2.3.4. &lt;/span&gt;The element pointers&lt;/h5&gt;
 
   &lt;p&gt;Initially the &lt;dfn id=head-element&gt;&lt;code title=&quot;&quot;&gt;head&lt;/code&gt; element
    pointer&lt;/dfn&gt; and the &lt;dfn id=form-element&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt;
@@ -43939,14 +43954,14 @@
    associate with forms in the face of dramatically bad markup, for
    historical reasons.
 
-  &lt;h5 id=the-scripting&gt;&lt;span class=secno&gt;8.2.3.5. &lt;/span&gt;The scripting state&lt;/h5&gt;
+  &lt;h5 id=the-scripting&gt;&lt;span class=secno&gt;9.2.3.5. &lt;/span&gt;The scripting state&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=scripting2&gt;scripting flag&lt;/dfn&gt; is set to &quot;enabled&quot; if the
    &lt;code&gt;Document&lt;/code&gt; with which the parser is associated was &lt;a
    href=&quot;#with-script&quot;&gt;with script&lt;/a&gt; when the parser was created, and
    &quot;disabled&quot; otherwise.
 
-  &lt;h4 id=tokenisation&gt;&lt;span class=secno&gt;8.2.4 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=tokenisation&gt;&lt;span class=secno&gt;9.2.4 &lt;/span&gt;&lt;dfn
    id=tokenisation0&gt;Tokenisation&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;Implementations must act as if they used the following state machine to
@@ -43959,7 +43974,7 @@
    and can consume several characters before switching to another state.
 
   &lt;p&gt;The exact behavior of certain states depends on a &lt;dfn
-   id=content2&gt;content model flag&lt;/dfn&gt; that is set after certain tokens are
+   id=content3&gt;content model flag&lt;/dfn&gt; that is set after certain tokens are
    emitted. The flag has several states: &lt;em title=&quot;&quot;&gt;PCDATA&lt;/em&gt;, &lt;em
    title=&quot;&quot;&gt;RCDATA&lt;/em&gt;, &lt;em title=&quot;&quot;&gt;CDATA&lt;/em&gt;, and &lt;em
    title=&quot;&quot;&gt;PLAINTEXT&lt;/em&gt;. Initially it must be in the PCDATA state. In the
@@ -43984,7 +43999,7 @@
 
   &lt;p&gt;When a token is emitted, it must immediately be handled by the &lt;a
    href=&quot;#tree-construction0&quot;&gt;tree construction&lt;/a&gt; stage. The tree
-   construction stage can affect the state of the &lt;a href=&quot;#content2&quot;&gt;content
+   construction stage can affect the state of the &lt;a href=&quot;#content3&quot;&gt;content
    model flag&lt;/a&gt;, and can insert additional characters into the stream. (For
    example, the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element can result
    in scripts executing and using the &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup
@@ -43995,7 +44010,7 @@
    flag&quot;&gt;acknowledged&lt;/dfn&gt; when it is processed by the tree construction
    stage, that is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
 
-  &lt;p&gt;When an end tag token is emitted, the &lt;a href=&quot;#content2&quot;&gt;content model
+  &lt;p&gt;When an end tag token is emitted, the &lt;a href=&quot;#content3&quot;&gt;content model
    flag&lt;/a&gt; must be switched to the PCDATA state.
 
   &lt;p&gt;When an end tag token is emitted with attributes, that is a &lt;a
@@ -44026,7 +44041,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to one of
+     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to one of
       the PCDATA or RCDATA states and the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt;
       is false: switch to the &lt;a href=&quot;#character4&quot;&gt;character reference data
       state&lt;/a&gt;.
@@ -44036,7 +44051,7 @@
      &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
      &lt;dd&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to either
+      &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
        the RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
        flag&lt;/a&gt; is false, and there are at least three characters before this
        one in the input stream, and the last four characters in the input
@@ -44049,10 +44064,10 @@
 
      &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the
+     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
       PCDATA state: switch to the &lt;a href=&quot;#tag-open&quot;&gt;tag open state&lt;/a&gt;.
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to either
+     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
       the RCDATA state or the CDATA state and the &lt;a href=&quot;#escape&quot;&gt;escape
       flag&lt;/a&gt; is false: switch to the &lt;a href=&quot;#tag-open&quot;&gt;tag open
       state&lt;/a&gt;.
@@ -44062,7 +44077,7 @@
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
      &lt;dd&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to either
+      &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
        the RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
        flag&lt;/a&gt; is true, and the last three characters in the input stream
        including this one are U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS,
@@ -44089,7 +44104,7 @@
    &lt;dt&gt;&lt;dfn id=character4&gt;Character reference data state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content2&quot;&gt;content model
+    &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content3&quot;&gt;content model
      flag&lt;/a&gt; is set to the CDATA state.)&lt;/em&gt;&lt;/p&gt;
 
     &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;, with
@@ -44104,11 +44119,11 @@
    &lt;dt&gt;&lt;dfn id=tag-open&gt;Tag open state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content2&quot;&gt;content
+    &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content3&quot;&gt;content
      model flag&lt;/a&gt;.&lt;/p&gt;
 
     &lt;dl&gt;
-     &lt;dt&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the
+     &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
       RCDATA or CDATA states
 
      &lt;dd&gt;
@@ -44118,7 +44133,7 @@
        token and reconsume the current input character in the &lt;a
        href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the
+     &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
       PCDATA state
 
      &lt;dd&gt;
@@ -44171,10 +44186,10 @@
    &lt;dt&gt;&lt;dfn id=close1&gt;Close tag open state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
      or CDATA states but no start tag token has ever been emitted by this
      instance of the tokeniser (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), or,
-     if the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+     if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
      or CDATA states and the next few characters do not match the tag name of
      the last start tag token emitted (case insensitively), or if they do but
      they are not immediately followed by one of the following characters:&lt;/p&gt;
@@ -44200,7 +44215,7 @@
      character token, and switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;
      to process the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to
+    &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to
      the PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that
      tag name, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -44695,7 +44710,7 @@
    &lt;dt&gt;&lt;dfn id=bogus&gt;Bogus comment state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content2&quot;&gt;content model
+    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
      flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
 
     &lt;p&gt;Consume every character up to the first U+003E GREATER-THAN SIGN
@@ -44714,7 +44729,7 @@
    &lt;dt&gt;&lt;dfn id=markup&gt;Markup declaration open state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content2&quot;&gt;content model
+    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
      flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
 
     &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
@@ -44737,7 +44752,7 @@
      the string &quot;[CDATA[&quot; (the five uppercase letters &quot;CDATA&quot; with a U+005B
      LEFT SQUARE BRACKET character before and after), then consume those
      characters and switch to the &lt;a href=&quot;#cdata1&quot;&gt;CDATA block state&lt;/a&gt;
-     (which is unrelated to the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt;'s
+     (which is unrelated to the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s
      CDATA state).&lt;/p&gt;
 
     &lt;p&gt;Otherwise, this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;. Switch to the
@@ -45359,9 +45374,9 @@
    &lt;dt&gt;&lt;dfn id=cdata1&gt;CDATA block state&lt;/dfn&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content2&quot;&gt;content model
+    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
      flag&lt;/a&gt; is set to the PCDATA state, and is unrelated to the &lt;a
-     href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;&lt;/p&gt;
+     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;&lt;/p&gt;
 
     &lt;p&gt;Consume every character up to the next occurrence of the three
      character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
@@ -45376,7 +45391,7 @@
     &lt;p&gt;If the end of the file was reached, reconsume the EOF character.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=tokenising&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;Tokenising character
+  &lt;h5 id=tokenising&gt;&lt;span class=secno&gt;9.2.4.1. &lt;/span&gt;Tokenising character
    references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn id=consume&gt;consume a character
@@ -45761,7 +45776,7 @@
     &lt;/div&gt;
   &lt;/dl&gt;
 
-  &lt;h4 id=tree-construction&gt;&lt;span class=secno&gt;8.2.5 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=tree-construction&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;&lt;dfn
    id=tree-construction0&gt;Tree construction&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The input to the tree construction stage is a sequence of tokens from
@@ -45809,7 +45824,7 @@
    href=&quot;#hardwareLimitations&quot;&gt;practical concerns&lt;/a&gt; will likely force user
    agents to impose nesting depths.
 
-  &lt;h5 id=creating&gt;&lt;span class=secno&gt;8.2.5.1. &lt;/span&gt;Creating and inserting
+  &lt;h5 id=creating&gt;&lt;span class=secno&gt;9.2.5.1. &lt;/span&gt;Creating and inserting
    elements&lt;/h5&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=create title=&quot;create an
@@ -46078,9 +46093,9 @@
    &lt;li&gt;
     &lt;p&gt;If the algorithm that was invoked is the &lt;a href=&quot;#generic&quot;&gt;generic
      CDATA parsing algorithm&lt;/a&gt;, switch the tokeniser's &lt;a
-     href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to the CDATA state; otherwise
+     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the CDATA state; otherwise
      the algorithm invoked was the &lt;a href=&quot;#generic0&quot;&gt;generic RCDATA parsing
-     algorithm&lt;/a&gt;, switch the tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model
+     algorithm&lt;/a&gt;, switch the tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model
      flag&lt;/a&gt; to the RCDATA state.
 
    &lt;li&gt;
@@ -46094,7 +46109,7 @@
      all those tokens' characters, to the new element node.
 
    &lt;li&gt;
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.
 
    &lt;li&gt;
@@ -46103,7 +46118,7 @@
      this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=closing&gt;&lt;span class=secno&gt;8.2.5.2. &lt;/span&gt;Closing elements that have
+  &lt;h5 id=closing&gt;&lt;span class=secno&gt;9.2.5.2. &lt;/span&gt;Closing elements that have
    implied end tags&lt;/h5&gt;
 
   &lt;p&gt;When the steps below require the UA to &lt;dfn id=generate&gt;generate implied
@@ -46120,7 +46135,7 @@
    element to exclude from the process, then the UA must perform the above
    steps as if that element was not in the above list.
 
-  &lt;h5 id=foster&gt;&lt;span class=secno&gt;8.2.5.3. &lt;/span&gt;Foster parenting&lt;/h5&gt;
+  &lt;h5 id=foster&gt;&lt;span class=secno&gt;9.2.5.3. &lt;/span&gt;Foster parenting&lt;/h5&gt;
 
   &lt;p&gt;Foster parenting happens when content is misnested in tables.
 
@@ -46161,7 +46176,7 @@
    &lt;em&gt;appended&lt;/em&gt; to the &lt;i&gt;&lt;a href=&quot;#foster1&quot;&gt;foster parent
    element&lt;/a&gt;&lt;/i&gt;.
 
-  &lt;h5 id=the-initial&gt;&lt;span class=secno&gt;8.2.5.4. &lt;/span&gt;The &quot;&lt;dfn id=initial
+  &lt;h5 id=the-initial&gt;&lt;span class=secno&gt;9.2.5.4. &lt;/span&gt;The &quot;&lt;dfn id=initial
    title=&quot;insertion mode: initial&quot;&gt;initial&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#initial&quot;
@@ -46427,7 +46442,7 @@
     &lt;/ul&gt;
 
     &lt;p&gt;Otherwise, if the DOCTYPE token matches one of the conditions in the
-     following list, then set the document to &lt;a href=&quot;#limited&quot;&gt;limited
+     following list, then set the document to &lt;a href=&quot;#limited1&quot;&gt;limited
      quirks mode&lt;/a&gt;:&lt;/p&gt;
 
     &lt;ul class=brief&gt;
@@ -46467,7 +46482,7 @@
      current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-before&gt;&lt;span class=secno&gt;8.2.5.5. &lt;/span&gt;The &quot;&lt;dfn id=before4
+  &lt;h5 id=the-before&gt;&lt;span class=secno&gt;9.2.5.5. &lt;/span&gt;The &quot;&lt;dfn id=before4
    title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before4&quot;
@@ -46546,7 +46561,7 @@
    content continues being appended to the nodes as described in the next
    section.
 
-  &lt;h5 id=the-before0&gt;&lt;span class=secno&gt;8.2.5.6. &lt;/span&gt;The &quot;&lt;dfn id=before5
+  &lt;h5 id=the-before0&gt;&lt;span class=secno&gt;9.2.5.6. &lt;/span&gt;The &quot;&lt;dfn id=before5
    title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before5&quot;
@@ -46616,7 +46631,7 @@
      after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inhead&gt;&lt;span class=secno&gt;8.2.5.7. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-inhead&gt;&lt;span class=secno&gt;9.2.5.7. &lt;/span&gt;The &quot;&lt;dfn
    id=in-head title=&quot;insertion mode: in head&quot;&gt;in head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-head&quot;
@@ -46685,7 +46700,7 @@
 
     &lt;p&gt;Otherwise, if the element has a &lt;code title=attr-meta-charset&gt;&lt;a
      href=&quot;#charset1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute, and applying the &lt;a
-     href=&quot;#algorithm4&quot;&gt;algorithm for extracting an encoding from a
+     href=&quot;#algorithm&quot;&gt;algorithm for extracting an encoding from a
      Content-Type&lt;/a&gt; to its value returns a supported encoding &lt;var
      title=&quot;&quot;&gt;encoding&lt;/var&gt;, and the &lt;a href=&quot;#confidence&quot;
      title=concept-encoding-confidence&gt;confidence&lt;/a&gt; is currently
@@ -46727,7 +46742,7 @@
      script will execute in-line, instead of blowing the document away, as
      would happen in most other cases.&lt;/p&gt;
 
-    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
      the CDATA state.&lt;/p&gt;
 
     &lt;p&gt;Then, collect all the character tokens that the tokeniser returns
@@ -46739,7 +46754,7 @@
      href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element node whose contents is the
      concatenation of all those tokens' characters.&lt;/p&gt;
 
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is not an end tag token with the tag name &quot;script&quot;,
@@ -46868,7 +46883,7 @@
      get put into the head. Do we want to copy that?&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;8.2.5.8. &lt;/span&gt;The
+  &lt;h5 id=parsing-main-inheadnoscript&gt;&lt;span class=secno&gt;9.2.5.8. &lt;/span&gt;The
    &quot;&lt;dfn id=in-head0 title=&quot;insertion mode: in head noscript&quot;&gt;in head
    noscript&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
@@ -46934,7 +46949,7 @@
      name &quot;noscript&quot; had been seen and reprocess the current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-after&gt;&lt;span class=secno&gt;8.2.5.9. &lt;/span&gt;The &quot;&lt;dfn id=after4
+  &lt;h5 id=the-after&gt;&lt;span class=secno&gt;9.2.5.9. &lt;/span&gt;The &quot;&lt;dfn id=after4
    title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after4&quot;
@@ -47018,7 +47033,7 @@
      had been seen, and then reprocess the current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inbody&gt;&lt;span class=secno&gt;8.2.5.10. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-inbody&gt;&lt;span class=secno&gt;9.2.5.10. &lt;/span&gt;The &quot;&lt;dfn
    id=in-body title=&quot;insertion mode: in body&quot;&gt;in body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-body&quot;
@@ -47311,13 +47326,13 @@
 
     &lt;p&gt;&lt;a href=&quot;#insert0&quot;&gt;Insert an HTML element&lt;/a&gt; for the token.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to the PLAINTEXT
+    &lt;p&gt;Switch the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to the PLAINTEXT
      state.&lt;/p&gt;
 
     &lt;p class=note&gt;Once a start tag with the tag name &quot;plaintext&quot; has been
      seen, that will be the last token ever seen other than character tokens
      (and the end-of-file token), because there is no way to switch the &lt;a
-     href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; out of the PLAINTEXT state.&lt;/p&gt;
+     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; out of the PLAINTEXT state.&lt;/p&gt;
    &lt;/dd&gt;
    &lt;!-- end tags for non-phrasing flow content elements --&gt;
    &lt;!-- the normal ones --&gt;
@@ -47945,7 +47960,7 @@
      &lt;code&gt;form&lt;/code&gt; element pointed to by the &lt;a
      href=&quot;#form-element&quot;&gt;&lt;code title=&quot;&quot;&gt;form&lt;/code&gt; element pointer&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+    &lt;p&gt;Switch the tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
      the RCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is a U+000A LINE FEED (LF) character token, then
@@ -47960,7 +47975,7 @@
      single &lt;code&gt;Text&lt;/code&gt; node, whose contents is the concatenation of
      all those tokens' characters, to the new element node.&lt;/p&gt;
 
-    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; will have
+    &lt;p&gt;The tokeniser's &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; will have
      switched back to the PCDATA state.&lt;/p&gt;
 
     &lt;p&gt;If the next token is an end tag token with the tag name &quot;textarea&quot;,
@@ -48168,7 +48183,7 @@
     &lt;/ol&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-intable&gt;&lt;span class=secno&gt;8.2.5.11. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-intable&gt;&lt;span class=secno&gt;9.2.5.11. &lt;/span&gt;The &quot;&lt;dfn
    id=in-table title=&quot;insertion mode: in table&quot;&gt;in table&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
@@ -48353,7 +48368,7 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;8.2.5.12. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;9.2.5.12. &lt;/span&gt;The &quot;&lt;dfn
    id=in-caption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot;
    insertion mode&lt;/h5&gt;
 
@@ -48416,7 +48431,7 @@
      &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;8.2.5.13. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;9.2.5.13. &lt;/span&gt;The &quot;&lt;dfn
    id=in-column title=&quot;insertion mode: in column group&quot;&gt;in column
    group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
@@ -48501,7 +48516,7 @@
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;8.2.5.14. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;9.2.5.14. &lt;/span&gt;The &quot;&lt;dfn
    id=in-table0 title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot;
    insertion mode&lt;/h5&gt;
 
@@ -48591,7 +48606,7 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;8.2.5.15. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;9.2.5.15. &lt;/span&gt;The &quot;&lt;dfn
    id=in-row title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-row&quot;
@@ -48680,7 +48695,7 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element after this process is a &lt;a
    href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;.
 
-  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;8.2.5.16. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;9.2.5.16. &lt;/span&gt;The &quot;&lt;dfn
    id=in-cell title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-cell&quot;
@@ -48781,7 +48796,7 @@
    neither when the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-cell&quot;
    title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;.
 
-  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;8.2.5.17. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;9.2.5.17. &lt;/span&gt;The &quot;&lt;dfn
    id=in-select title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
@@ -48903,7 +48918,7 @@
     &lt;p&gt;&lt;a href=&quot;#parse1&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;8.2.5.18. &lt;/span&gt;The
+  &lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;9.2.5.18. &lt;/span&gt;The
    &quot;&lt;dfn id=in-select0 title=&quot;insertion mode: in select in table&quot;&gt;in select
    in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
@@ -48939,7 +48954,7 @@
      &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;8.2.5.19. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;9.2.5.19. &lt;/span&gt;The &quot;&lt;dfn
    id=in-foreign title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
    content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
@@ -49113,7 +49128,7 @@
      flag&quot;&gt;acknowledge the token's &lt;i&gt;self-closing flag&lt;/i&gt;&lt;/a&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;8.2.5.20. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;9.2.5.20. &lt;/span&gt;The &quot;&lt;dfn
    id=after5 title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
@@ -49177,7 +49192,7 @@
      body&lt;/a&gt;&quot; and reprocess the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;8.2.5.21. &lt;/span&gt;The &quot;&lt;dfn
+  &lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;9.2.5.21. &lt;/span&gt;The &quot;&lt;dfn
    id=in-frameset title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot;
    insertion mode&lt;/h5&gt;
 
@@ -49272,7 +49287,7 @@
     &lt;p&gt;&lt;a href=&quot;#parse1&quot;&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;8.2.5.22. &lt;/span&gt;The
+  &lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;9.2.5.22. &lt;/span&gt;The
    &quot;&lt;dfn id=after6 title=&quot;insertion mode: after frameset&quot;&gt;after
    frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
@@ -49337,7 +49352,7 @@
    that do support frames but want to show the NOFRAMES content. Supporting
    the former is easy; supporting the latter is harder.
 
-  &lt;h5 id=the-after0&gt;&lt;span class=secno&gt;8.2.5.23. &lt;/span&gt;The &quot;&lt;dfn id=after7
+  &lt;h5 id=the-after0&gt;&lt;span class=secno&gt;9.2.5.23. &lt;/span&gt;The &quot;&lt;dfn id=after7
    title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
@@ -49379,7 +49394,7 @@
      body&lt;/a&gt;&quot; and reprocess the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-after1&gt;&lt;span class=secno&gt;8.2.5.24. &lt;/span&gt;The &quot;&lt;dfn id=after8
+  &lt;h5 id=the-after1&gt;&lt;span class=secno&gt;9.2.5.24. &lt;/span&gt;The &quot;&lt;dfn id=after8
    title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot;
    insertion mode&lt;/h5&gt;
 
@@ -49421,7 +49436,7 @@
      frameset&quot;&gt;in frameset&lt;/a&gt;&quot; and reprocess the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h4 id=the-end&gt;&lt;span class=secno&gt;8.2.6 &lt;/span&gt;The end&lt;/h4&gt;
+  &lt;h4 id=the-end&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;The end&lt;/h4&gt;
 
   &lt;p&gt;Once the user agent &lt;dfn id=stops title=&quot;stop parsing&quot;&gt;stops
    parsing&lt;/dfn&gt; the document, the user agent must follow the steps in this
@@ -49533,7 +49548,7 @@
 /parser/htmlparser/src/nsElementTable.cpp, line 1901 - // Ex: &lt;H1&gt;&lt;LI&gt;&lt;H1&gt;&lt;LI&gt;. Inner LI has the potential of getting nested
 --&gt;
 
-  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;Namespaces&lt;/h3&gt;
+  &lt;h3 id=namespaces&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;Namespaces&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=html-namespace0&gt;HTML namespace&lt;/dfn&gt; is:
    &lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;
@@ -49553,7 +49568,7 @@
   &lt;p&gt;The &lt;dfn id=xmlns&gt;XMLNS namespace&lt;/dfn&gt; is:
    &lt;code&gt;<A HREF="http://www.w3.org/2000/xmlns/&lt;/code">http://www.w3.org/2000/xmlns/&lt;/code</A>&gt;
 
-  &lt;h3 id=serializing&gt;&lt;span class=secno&gt;8.4 &lt;/span&gt;Serializing HTML fragments&lt;/h3&gt;
+  &lt;h3 id=serializing&gt;&lt;span class=secno&gt;9.4 &lt;/span&gt;Serializing HTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The following steps form the &lt;dfn id=html-fragment&gt;HTML fragment
    serialization algorithm&lt;/dfn&gt;. The algorithm takes as input a DOM
@@ -49749,7 +49764,7 @@
    element's &lt;span title=syntax-start-tag&gt;start tag&lt;/span&gt; would imply the
    end tag for the &lt;code&gt;&lt;a href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt;).
 
-  &lt;h3 id=parsing2&gt;&lt;span class=secno&gt;8.5 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
+  &lt;h3 id=parsing2&gt;&lt;span class=secno&gt;9.5 &lt;/span&gt;Parsing HTML fragments&lt;/h3&gt;
 
   &lt;p&gt;The following steps form the &lt;dfn id=html-fragment0&gt;HTML fragment
    parsing algorithm&lt;/dfn&gt;. The algorithm takes as input a DOM
@@ -49779,14 +49794,14 @@
    &lt;li&gt;
     &lt;p&gt;Set the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;'s &lt;a
      href=&quot;#tokenisation0&quot;&gt;tokenisation&lt;/a&gt; stage's &lt;a
-     href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; according to the &lt;var
+     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; according to the &lt;var
      title=&quot;&quot;&gt;context&lt;/var&gt; element, as follows:&lt;/p&gt;
 
     &lt;dl class=switch&gt;
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt; or
       &lt;code&gt;textarea&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
       &lt;em&gt;RCDATA&lt;/em&gt;.
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
@@ -49794,24 +49809,24 @@
       href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;noembed&lt;/code&gt;, or
       &lt;code&gt;noframes&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
       &lt;em&gt;CDATA&lt;/em&gt;.
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element
 
      &lt;dd&gt;If the &lt;a href=&quot;#scripting2&quot;&gt;scripting flag&lt;/a&gt; is enabled, set the
-      &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;CDATA&lt;/em&gt;.
-      Otherwise, set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+      &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to &lt;em&gt;CDATA&lt;/em&gt;.
+      Otherwise, set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
       &lt;em&gt;PCDATA&lt;/em&gt;.
 
      &lt;dt&gt;If it is a &lt;code&gt;plaintext&lt;/code&gt; element
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
       &lt;em&gt;PLAINTEXT&lt;/em&gt;.
 
      &lt;dt&gt;Otherwise
 
-     &lt;dd&gt;Set the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; to
+     &lt;dd&gt;Set the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; to
       &lt;em&gt;PCDATA&lt;/em&gt;.
     &lt;/dl&gt;
 
@@ -49856,7 +49871,7 @@
      document order.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;h3 id=named&gt;&lt;span class=secno&gt;8.6 &lt;/span&gt;&lt;dfn id=named0&gt;Named character
+  &lt;h3 id=named&gt;&lt;span class=secno&gt;9.6 &lt;/span&gt;&lt;dfn id=named0&gt;Named character
    references&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This table lists the character reference names that are supported by
@@ -52019,7 +52034,7 @@
   --&gt;
    &lt;/div&gt;
 
-  &lt;h2 id=rendering&gt;&lt;span class=secno&gt;9. &lt;/span&gt;Rendering and user-agent
+  &lt;h2 id=rendering&gt;&lt;span class=secno&gt;10. &lt;/span&gt;Rendering and user-agent
    behavior&lt;/h2&gt;
   &lt;!-- XXX
 
@@ -52113,7 +52128,7 @@
   &lt;p class=big-issue&gt;Must define that in CSS, tag names in HTML documents,
    and class names in quirks mode documents, are case-insensitive.
 
-  &lt;h3 id=rendering0&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Rendering and the DOM&lt;/h3&gt;
+  &lt;h3 id=rendering0&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Rendering and the DOM&lt;/h3&gt;
 
   &lt;p class=big-issue&gt;This section is wrong. mediaMode will end up on Window,
    I think. All views implement Window.
@@ -52145,9 +52160,10 @@
    currently to enumerate all the views.&lt;/p&gt;
   &lt;!-- XXX examples! --&gt;
 
-  &lt;h3 id=rendering1&gt;&lt;span class=secno&gt;9.2 &lt;/span&gt;Rendering and menus/toolbars&lt;/h3&gt;
+  &lt;h3 id=rendering1&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Rendering and
+   menus/toolbars&lt;/h3&gt;
 
-  &lt;h4 id=the-icon&gt;&lt;span class=secno&gt;9.2.1 &lt;/span&gt;The 'icon' property&lt;/h4&gt;
+  &lt;h4 id=the-icon&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;The 'icon' property&lt;/h4&gt;
 
   &lt;p&gt;UAs should use the command's Icon as the default generic icon provided
    by the user agent when the 'icon' property computes to 'auto' on an
@@ -52155,10 +52171,10 @@
    title=command-attribute&gt;command&lt;/code&gt; attribute, but when the property
    computes to an actual image, it should use that image instead.
 
-  &lt;h3 id=obsolete&gt;&lt;span class=secno&gt;9.3 &lt;/span&gt;Obsolete elements, attributes,
-   and APIs&lt;/h3&gt;
+  &lt;h3 id=obsolete&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;Obsolete elements,
+   attributes, and APIs&lt;/h3&gt;
 
-  &lt;h4 id=the-body0&gt;&lt;span class=secno&gt;9.3.1 &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-body0&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Need to define the content attributes in terms of CSS or
@@ -52206,7 +52222,7 @@
    class=idl&gt;[XXX] interface &lt;a href=&quot;#htmlbodyelement&quot;&gt;HTMLBodyElement&lt;/a&gt; {
            attribute DOMString &lt;a href=&quot;#text3&quot; title=dom-body-text&gt;text&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#bgcolor0&quot; title=dom-body-bgColor&gt;bgColor&lt;/a&gt;;
-           attribute DOMString &lt;a href=&quot;#background&quot; title=dom-body-background&gt;background&lt;/a&gt;;
+           attribute DOMString &lt;a href=&quot;#background0&quot; title=dom-body-background&gt;background&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#link0&quot; title=dom-body-link&gt;link&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#vlink&quot; title=dom-body-vLink&gt;vLink&lt;/a&gt;;
            attribute DOMString &lt;a href=&quot;#alink&quot; title=dom-body-aLink&gt;aLink&lt;/a&gt;;
@@ -52222,7 +52238,7 @@
    &lt;a href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the element's &lt;code
    title=attr-body-bgcolor&gt;bgcolor&lt;/code&gt; content attribute.
 
-  &lt;p&gt;The &lt;dfn id=background
+  &lt;p&gt;The &lt;dfn id=background0
    title=dom-body-background&gt;&lt;code&gt;background&lt;/code&gt;&lt;/dfn&gt; DOM attribute of
    the &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element must &lt;a
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the element's &lt;code
@@ -52243,7 +52259,7 @@
    href=&quot;#reflect&quot;&gt;reflect&lt;/a&gt; the element's &lt;code
    title=attr-body-vlink&gt;vlink&lt;/code&gt; content attribute.
 
-  &lt;h4 id=the-applet&gt;&lt;span class=secno&gt;9.3.2 &lt;/span&gt;The &lt;dfn
+  &lt;h4 id=the-applet&gt;&lt;span class=secno&gt;10.3.2 &lt;/span&gt;The &lt;dfn
    id=applet&gt;&lt;code&gt;applet&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt; element is a Java-specific
@@ -52271,7 +52287,7 @@
    rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
    &lt;code&gt;&lt;a href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt; elements.
 
-  &lt;h2 id=no&gt;&lt;span class=secno&gt;10. &lt;/span&gt;Things that you can't do with this
+  &lt;h2 id=no&gt;&lt;span class=secno&gt;11. &lt;/span&gt;Things that you can't do with this
    specification because they are better handled using other technologies
    that are further described herein&lt;/h2&gt;
 
@@ -52282,7 +52298,7 @@
    because the features exist in other languages that can be integrated into
    this one. This section covers some of the more common requests.
 
-  &lt;h3 id=localization&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Localization&lt;/h3&gt;
+  &lt;h3 id=localization&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Localization&lt;/h3&gt;
 
   &lt;p&gt;If you wish to create localized versions of an HTML application, the
    best solution is to preprocess the files on the server, and then use HTTP
@@ -52290,19 +52306,19 @@
   &lt;!-- &lt;p&gt;XXX example here&lt;/p&gt; --&gt;
   &lt;!--XXXSVG (remove next section)--&gt;
 
-  &lt;h3 id=declarative&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Declarative 2D vector
+  &lt;h3 id=declarative&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;Declarative 2D vector
    graphics and animation&lt;/h3&gt;
 
   &lt;p&gt;Embedding vector graphics into XHTML documents is the domain of SVG.&lt;/p&gt;
   &lt;!-- &lt;p&gt;XXX example here&lt;/p&gt; --&gt;
 
-  &lt;h3 id=declarative0&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;Declarative 3D scenes&lt;/h3&gt;
+  &lt;h3 id=declarative0&gt;&lt;span class=secno&gt;11.3 &lt;/span&gt;Declarative 3D scenes&lt;/h3&gt;
 
   &lt;p&gt;Embedding 3D imagery into XHTML documents is the domain of X3D, or
    technologies based on X3D that are namespace-aware.&lt;/p&gt;
   &lt;!-- &lt;p&gt;XXX example here&lt;/p&gt; --&gt;
 
-  &lt;h3 id=timers&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Timers&lt;/h3&gt;
+  &lt;h3 id=timers&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Timers&lt;/h3&gt;
 
   &lt;p&gt;This section is expected to be moved to the Window Object specification
    in due course.

Modified: source
===================================================================
--- source	2008-06-18 23:31:17 UTC (rev 1789)
+++ source	2008-06-19 09:27:25 UTC (rev 1790)
@@ -28,6 +28,9 @@
 
   &lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
 
+
+  &lt;h3&gt;Background&lt;/h3&gt;
+
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
   &lt;p&gt;The World Wide Web's markup language has always been HTML. HTML
@@ -89,6 +92,8 @@
   ahead.&lt;/p&gt;
 
 
+  &lt;h3&gt;Relationships to other specifications&lt;/h3&gt;
+
   &lt;h4&gt;Relationship to HTML 4.01 and DOM2 HTML&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
@@ -173,53 +178,105 @@
   the risk of vendor lock-in.&lt;/p&gt;
 
 
+  &lt;h3&gt;HTML vs XHTML&lt;/h3&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
+
+  &lt;p&gt;This specification defines an abstract language for describing
+  documents and applications, and some APIs for interacting with
+  in-memory representations of resources that use this language.&lt;/p&gt;
+
+  &lt;p&gt;The in-memory representation is known as &quot;DOM5 HTML&quot;, or &quot;the
+  DOM&quot; for short.&lt;/p&gt;
+
+  &lt;p&gt;There are various concrete syntaxes that can be used to transmit
+  resources that use this abstract language, two of which are defined
+  in this specification.&lt;/p&gt;
+
+  &lt;p&gt;The first such concrete syntax is &quot;HTML5&quot;. This is the format
+  recommended for most authors. It is compatible with all legacy Web
+  browsers. If a document is transmitted with the MIME type &lt;code
+  title=&quot;&quot;&gt;text/html&lt;/code&gt;, then it will be processed as an &quot;HTML5&quot;
+  document by Web browsers.&lt;/p&gt;
+
+  &lt;p&gt;The second concrete syntax uses XML, and is known as
+  &quot;XHTML5&quot;. When a document is transmitted with an XML MIME type, such
+  as &lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;, then it is processed
+  by an XML processor by Web browsers, and treated as an &quot;XHTML5&quot;
+  document. Authors are reminded that the processing for XML and HTML
+  differs; in particular, even minor syntax errors will prevent an XML
+  document from being rendered fully, whereas they would be ignored in
+  the &quot;HTML5&quot; syntax.&lt;/p&gt;
+
+  &lt;p&gt;The &quot;DOM5 HTML&quot;, &quot;HTML5&quot;, and &quot;XHTML5&quot; representations cannot all
+  represent the same content. For example, namespaces cannot be
+  represented using &quot;HTML5&quot;, but they are supported in &quot;DOM5 HTML&quot; and
+  &quot;XHTML5&quot;. Similarly, documents that use the &lt;code&gt;noscript&lt;/code&gt;
+  feature can be represented using &quot;HTML5&quot;, but cannot be represented
+  with &quot;XHTML5&quot; and &quot;DOM5 HTML&quot;. Comments that contain the string
+  &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; can be represented in &quot;DOM5 HTML&quot; but
+  not in &quot;HTML5&quot; and &quot;XHTML5&quot;. And so forth.&lt;/p&gt;
+
+
   &lt;h3&gt;Structure of this specification&lt;/h3&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
-  &lt;p&gt;This specification is divided into the following important
+  &lt;p&gt;This specification is divided into the following major
   sections:&lt;/p&gt;
 
   &lt;dl&gt;
 
 
-   &lt;dt&gt;&lt;a href=&quot;#dom&quot;&gt;The DOM&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;a href=&quot;#infrastructure&quot;&gt;Common Infrastructure&lt;/a&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;The DOM, or Document Object Model, provides a base for the rest
-   of the specification.&lt;/dd&gt;
+   &lt;dd&gt;The conformance classes, algorithms, definitions, and the
+   common underpinnings of the rest of the specification.&lt;/dd&gt;
 
 
-   &lt;dt&gt;&lt;a href=&quot;#semantics&quot;&gt;The Semantics&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;a href=&quot;#dom&quot;&gt;The DOM&lt;/a&gt;&lt;/dt&gt;
 
    &lt;dd&gt;Documents are built from elements. These elements form a tree
-   using the DOM. Each element also has a predefined meaning, which is
-   explained in this section. User agent requirements for how to
-   handle each element are also given, along with rules for authors on
-   how to use the element.&lt;/dd&gt;
+   using the DOM. This section defines the features of this DOM, as
+   well as introducing the features common to all elements, and the
+   concepts used in defining elements.&lt;/dd&gt;
 
 
-   &lt;dt&gt;&lt;a href=&quot;#windows&quot;&gt;Browsing Contexts&lt;/a&gt;&lt;/dt&gt;
+   &lt;dt&gt;&lt;a href=&quot;#semantics&quot;&gt;Elements&lt;/a&gt;&lt;/dt&gt;
 
+   &lt;dd&gt;Each element has a predefined meaning, which is explained in
+   this section. User agent requirements for how to handle each
+   element are also given, along with rules for authors on how to use
+   the element.&lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;a href=&quot;#browsers&quot;&gt;Web Browsers&lt;/a&gt;&lt;/dt&gt;
+
    &lt;dd&gt;HTML documents do not exist in a vacuum &mdash; this section
    defines many of the features that affect environments that deal
    with multiple pages, links between pages, and running scripts.&lt;/dd&gt;
 
 
-   &lt;dt&gt;APIs&lt;/dt&gt;
+   &lt;dt&gt;&lt;a href=&quot;#editing&quot;&gt;User Interaction&lt;/a&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;a href=&quot;#editing&quot;&gt;User interaction&lt;/a&gt;: HTML documents can
-   provide a number of mechanisms for users to interact with and
-   modify content, which are described in this section.&lt;/dd&gt;
+   &lt;dd&gt;HTML documents can provide a number of mechanisms for users to
+   interact with and modify content, which are described in this
+   section.&lt;/dd&gt;
 
-   &lt;dd&gt;&lt;a href=&quot;#comms&quot;&gt;The Communication APIs&lt;/a&gt;: Applications
-   written in HTML often require mechanisms to communicate with remote
-   servers, as well as communicating with other applications from
-   different domains running on the same client.&lt;/dd&gt;
 
-   &lt;dd&gt;&lt;a href=&quot;#repetition&quot;&gt;Repetition Templates&lt;/a&gt;: A mechanism to
-   support repeating sections in forms.&lt;/dd&gt;
+   &lt;dt&gt;&lt;a href=&quot;#comms&quot;&gt;The Communication APIs&lt;/a&gt;&lt;/dt&gt;
 
+   &lt;dd&gt;Applications written in HTML often require mechanisms to
+   communicate with remote servers, as well as communicating with
+   other applications from different domains running on the same
+   client.&lt;/dd&gt;
 
+
+   &lt;dt&gt;&lt;a href=&quot;#repetition&quot;&gt;Repetition Templates&lt;/a&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;A mechanism to support repeating sections in forms.&lt;/dd&gt;
+
+
    &lt;dt&gt;&lt;a href=&quot;#syntax&quot;&gt;The Language Syntax&lt;/a&gt;&lt;/dt&gt;
 
    &lt;dd&gt;All of these features would be for naught if they couldn't be
@@ -245,6 +302,12 @@
   cross-references.&lt;/p&gt;
 
 
+
+
+
+  &lt;h2 id=&quot;infrastructure&quot;&gt;Common infrastructure&lt;/h2&gt;
+
+
   &lt;h3&gt;Conformance requirements&lt;/h3&gt;
 
   &lt;p&gt;All diagrams, examples, and notes in this specification are
@@ -549,41 +612,6 @@
   algorithms defined in this specification.&lt;/p&gt;
 
 
-  &lt;h4&gt;Common conformance requirements for APIs exposed to
-  JavaScript&lt;/h4&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;A lot of arrays/lists/&lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt;s
-  in this spec assume zero-based indexes but use the term &quot;&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th&quot; liberally. We should define those to be
-  zero-based and be clearer about this.&lt;/p&gt;
-
-  &lt;p&gt;Unless otherwise specified, if a DOM attribute that is a floating
-  point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is assigned an
-  Infinity or Not-a-Number value, a &lt;code
-  title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
-  raised.&lt;/p&gt;
-
-  &lt;p&gt;Unless otherwise specified, if a method with an argument that is a
-  floating point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is passed
-  an Infinity or Not-a-Number value, a &lt;code
-  title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
-  raised.&lt;/p&gt;
-
-  &lt;!-- XXX DOMB --&gt;
-  &lt;p&gt;Unless otherwise specified, if a method is passed fewer
-  arguments than is defined for that method in its IDL definition,
-  a &lt;code title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
-  raised.&lt;/p&gt;
-
-  &lt;!-- XXX DOMB --&gt;
-  &lt;p&gt;Unless otherwise specified, if a method is passed more arguments than
-  is defined for that method in its IDL definition, the excess
-  arguments must be ignored.&lt;/p&gt; &lt;!-- XXX When updating this spec for
-  Bindings-For-DOM-compliance, also remove or consider the equivalent
-  requirement in the canvas section for toDataURL() and
-  getContext(). --&gt;
-  
-
   &lt;h4&gt;Dependencies&lt;/h4&gt;
 
   &lt;p&gt;This specification relies on several other underlying
@@ -626,6 +654,12 @@
 
    &lt;dd&gt;
 
+    &lt;p&gt;The Document Object Model (DOM) is a representation &mdash; a
+    model &mdash; of a document and its content. The DOM is not just
+    an API; the conformance criteria of HTML implementations are
+    defined, in this specification, in terms of operations on the DOM.
+    &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
+
     &lt;p&gt;Implementations must support some version of DOM Core and DOM
     Events, because this specification is defined in terms of the DOM,
     and some of the features are defined as extensions to the DOM Core
@@ -646,7 +680,7 @@
 
    &lt;/dd&gt;
 
-   &lt;dt id=mq&gt;Media Queries&lt;/dt&gt;
+   &lt;dt id=&quot;mq&quot;&gt;Media Queries&lt;/dt&gt;
 
    &lt;dd&gt;
 
@@ -673,6 +707,8 @@
 
   &lt;h4&gt;Features defined in other specifications&lt;/h4&gt;
 
+  &lt;p class=&quot;big-issue&quot;&gt;this section will be removed at some point&lt;/p&gt;
+
   &lt;p&gt;Some elements are defined in terms of their DOM
   &lt;dfn&gt;&lt;code&gt;textContent&lt;/code&gt;&lt;/dfn&gt; attribute. This is an attribute
   defined on the &lt;code&gt;Node&lt;/code&gt; interface in DOM3 Core. &lt;a
@@ -705,6 +741,45 @@
   href=&quot;<A HREF="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8">http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8</A>&quot;&gt;<A HREF="http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8&lt;/a">http://dev.w3.org/cvsweb/~checkout~/csswg/cssom/Overview.html?content-type=text/html;%20charset=utf-8&lt;/a</A>&gt;&lt;/p&gt;
 
 
+  &lt;h4&gt;Common conformance requirements for APIs exposed to
+  JavaScript&lt;/h4&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;This section will eventually be removed in favour of WebIDL.&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;A lot of arrays/lists/&lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt;s
+  in this spec assume zero-based indexes but use the term &quot;&lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th&quot; liberally. We should define those to be
+  zero-based and be clearer about this.&lt;/p&gt;
+
+  &lt;p&gt;Unless otherwise specified, if a DOM attribute that is a floating
+  point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is assigned an
+  Infinity or Not-a-Number value, a &lt;code
+  title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
+  raised.&lt;/p&gt;
+
+  &lt;p&gt;Unless otherwise specified, if a method with an argument that is a
+  floating point number type (&lt;code title=&quot;&quot;&gt;float&lt;/code&gt;) is passed
+  an Infinity or Not-a-Number value, a &lt;code
+  title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
+  raised.&lt;/p&gt;
+
+  &lt;!-- XXX DOMB --&gt;
+  &lt;p&gt;Unless otherwise specified, if a method is passed fewer
+  arguments than is defined for that method in its IDL definition,
+  a &lt;code title=&quot;big-issue&quot;&gt;NOT_SUPPORTED_ERR&lt;/code&gt; exception must be
+  raised.&lt;/p&gt;
+
+  &lt;!-- XXX DOMB --&gt;
+  &lt;p&gt;Unless otherwise specified, if a method is passed more arguments than
+  is defined for that method in its IDL definition, the excess
+  arguments must be ignored.&lt;/p&gt; &lt;!-- XXX When updating this spec for
+  Bindings-For-DOM-compliance, also remove or consider the equivalent
+  requirement in the canvas section for toDataURL() and
+  getContext(). --&gt;
+  
+
+
+
   &lt;h3&gt;Terminology&lt;/h3&gt;
 
   &lt;p&gt;This specification refers to both HTML and XML attributes and DOM
@@ -730,6 +805,22 @@
   attributes defined or mentioned in this specification have no
   namespace (they are in the per-element partition).&lt;/p&gt;
 
+  &lt;p&gt;When an XML name, such as an attribute or element name, is
+  referred to in the form
+  &lt;code&gt;&lt;var title=&quot;&quot;&gt;prefix&lt;/var&gt;:&lt;var title=&quot;&quot;&gt;localName&lt;/var&gt;&lt;/code&gt;, as in
+  &lt;code&gt;xml:id&lt;/code&gt; or &lt;code&gt;svg:rect&lt;/code&gt;, it refers to a name
+  with the local name &lt;var title=&quot;&quot;&gt;localName&lt;/var&gt; and the namespace given by
+  the prefix, as defined by the following table:&lt;/p&gt;
+
+  &lt;dl&gt;
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&lt;/dt&gt;
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/XML/1998/namespace&lt;/code">http://www.w3.org/XML/1998/namespace&lt;/code</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;&lt;/dt&gt;
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;svg&lt;/code&gt;&lt;/dt&gt;
+   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&lt;/dd&gt;
+  &lt;/dl&gt;
+
   &lt;p&gt;The term &lt;span&gt;HTML documents&lt;/span&gt; is sometimes used in
   contrast with &lt;span&gt;XML documents&lt;/span&gt; to specifically mean
   documents that were parsed using an &lt;span&gt;HTML parser&lt;/span&gt; (as
@@ -779,32 +870,12 @@
   processing of the node after it is in the DOM. A user agent must not
   mutate the DOM in such situations.&lt;/p&gt;
 
-  &lt;p&gt;When an XML name, such as an attribute or element name, is
-  referred to in the form
-  &lt;code&gt;&lt;var title=&quot;&quot;&gt;prefix&lt;/var&gt;:&lt;var title=&quot;&quot;&gt;localName&lt;/var&gt;&lt;/code&gt;, as in
-  &lt;code&gt;xml:id&lt;/code&gt; or &lt;code&gt;svg:rect&lt;/code&gt;, it refers to a name
-  with the local name &lt;var title=&quot;&quot;&gt;localName&lt;/var&gt; and the namespace given by
-  the prefix, as defined by the following table:&lt;/p&gt;
-
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&lt;/dt&gt;
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/XML/1998/namespace&lt;/code">http://www.w3.org/XML/1998/namespace&lt;/code</A>&gt;&lt;/dd&gt;
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;&lt;/dt&gt;
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/1999/xhtml&lt;/code">http://www.w3.org/1999/xhtml&lt;/code</A>&gt;&lt;/dd&gt;
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;svg&lt;/code&gt;&lt;/dt&gt;
-   &lt;dd&gt;&lt;code&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&lt;/dd&gt;
-  &lt;/dl&gt;
-
   &lt;p&gt;For simplicity, terms such as &lt;em&gt;shown&lt;/em&gt;, &lt;em&gt;displayed&lt;/em&gt;,
   and &lt;em&gt;visible&lt;/em&gt; might sometimes be used when referring to the
   way a document is rendered to the user. These terms are not meant to
   imply a visual medium; they must be considered to apply to other
   media in equivalent ways.&lt;/p&gt;
 
-  &lt;p&gt;DOM interfaces defined in this specification use Web IDL. User
-  agents must implement these interfaces as defined by the Web IDL
-  specification. &lt;a href=&quot;#refsWEBIDL&quot;&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
-
   &lt;p&gt;The construction &quot;a &lt;code&gt;Foo&lt;/code&gt; object&quot;, where
   &lt;code&gt;Foo&lt;/code&gt; is actually an interface, is sometimes used instead
   of the more accurate &quot;an object implementing the interface
@@ -869,2041 +940,281 @@
 
 
 
-  &lt;h4&gt;HTML vs XHTML&lt;/h4&gt;
 
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
-  &lt;p&gt;This specification defines an abstract language for describing
-  documents and applications, and some APIs for interacting with
-  in-memory representations of resources that use this language.&lt;/p&gt;
 
-  &lt;p&gt;The in-memory representation is known as &quot;DOM5 HTML&quot;, or &quot;the
-  DOM&quot; for short.&lt;/p&gt;
+  &lt;h3&gt;URLs&lt;/h3&gt;&lt;!-- XXXURL --&gt;
 
-  &lt;p&gt;There are various concrete syntaxes that can be used to transmit
-  resources that use this abstract language, two of which are defined
-  in this specification.&lt;/p&gt;
+  &lt;div class=&quot;big-issue&quot;&gt;
 
-  &lt;p&gt;The first such concrete syntax is &quot;HTML5&quot;. This is the format
-  recommended for most authors. It is compatible with all legacy Web
-  browsers. If a document is transmitted with the MIME type &lt;code
-  title=&quot;&quot;&gt;text/html&lt;/code&gt;, then it will be processed as an &quot;HTML5&quot;
-  document by Web browsers.&lt;/p&gt;
+   &lt;p&gt;This section will do the following:&lt;/p&gt;
 
-  &lt;p&gt;The second concrete syntax uses XML, and is known as
-  &quot;XHTML5&quot;. When a document is transmitted with an XML MIME type, such
-  as &lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;, then it is processed
-  by an XML processor by Web browsers, and treated as an &quot;XHTML5&quot;
-  document. Authors are reminded that the processing for XML and HTML
-  differs; in particular, even minor syntax errors will prevent an XML
-  document from being rendered fully, whereas they would be ignored in
-  the &quot;HTML5&quot; syntax.&lt;/p&gt;
+   &lt;ul&gt;
 
-  &lt;p&gt;The &quot;DOM5 HTML&quot;, &quot;HTML5&quot;, and &quot;XHTML5&quot; representations cannot all
-  represent the same content. For example, namespaces cannot be
-  represented using &quot;HTML5&quot;, but they are supported in &quot;DOM5 HTML&quot; and
-  &quot;XHTML5&quot;. Similarly, documents that use the &lt;code&gt;noscript&lt;/code&gt;
-  feature can be represented using &quot;HTML5&quot;, but cannot be represented
-  with &quot;XHTML5&quot; and &quot;DOM5 HTML&quot;. Comments that contain the string
-  &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; can be represented in &quot;DOM5 HTML&quot; but
-  not in &quot;HTML5&quot; and &quot;XHTML5&quot;. And so forth.&lt;/p&gt;
+    &lt;li&gt;define URL as IRI and replace all uses of URIs and IRIs in the
+    rest of the spec with URL&lt;/li&gt;
 
+    &lt;li&gt;define &quot;valid URL&quot; in terms of valid URIs and IRIs and replace
+    that concept through the spec to a pointer here, getting rid of
+    references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+    href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section&lt;/li&gt;
 
-  &lt;h2 id=&quot;dom&quot;&gt;The Document Object Model&lt;/h2&gt;
+    &lt;li&gt;define &quot;valid URL reference&quot; in terms of valid URI references
+    and IRI references and replace that concept through the spec to a
+    pointer here, getting rid of references to &lt;a
+    href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+    href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section&lt;/li&gt;
 
-  &lt;p&gt;The Document Object Model (DOM) is a representation &mdash; a
-  model &mdash; of a document and its content. &lt;a
-  href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt; The DOM is not just an API; the
-  conformance criteria of HTML implementations are defined, in this
-  specification, in terms of operations on the DOM.&lt;/p&gt;
+    &lt;li&gt;define how to parse URLs (maybe by deferring to RFCs)&lt;/li&gt;
 
-  &lt;p&gt;This specification defines the language represented in the DOM by
-  features together called DOM5 HTML. DOM5 HTML consists of DOM Core
-  &lt;code&gt;Document&lt;/code&gt; nodes and DOM Core &lt;code&gt;Element&lt;/code&gt; nodes,
-  along with text nodes and other content.&lt;/p&gt;
+    &lt;li&gt;
 
-  &lt;p&gt;Elements in the DOM represent things; that is, they have
-  intrinsic &lt;em&gt;meaning&lt;/em&gt;, also known as semantics.&lt;/p&gt;
+     &lt;p&gt;define how to handle URIs that contain non-ascii characters
+     (and it's not the same as handling as IRIs, especially if the
+     character encoding of the document isn't UTF-8)&lt;/p&gt;
 
-  &lt;p class=&quot;example&quot;&gt;For example, an &lt;code&gt;ol&lt;/code&gt; element represents
-  an ordered list.&lt;/p&gt;
+     &lt;p&gt;First parse it (we need to define that. For some schemes it's
+     not per spec -- e.g. apparently for ftp: we should split from
+     hosts on ';'). Then handle each bit as follows:&lt;/p&gt;
+     &lt;p&gt;scheme: no further processing (treat %-escaped characters literally, treat unicode characters as unicode characters).&lt;/p&gt;
+     &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode characters as per IDN.&lt;/p&gt;
+     &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and percent-encode.&lt;/p&gt;
+     &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's encoding. Do not percent-encode.&lt;/p&gt;
 
-  &lt;p&gt;In addition, documents and elements in the DOM host APIs that
-  extend the DOM Core APIs, providing new features to application
-  developers using DOM5 HTML.&lt;/p&gt;
+    &lt;/li&gt;
 
+    &lt;li&gt;define how to resolve relative URLs in markup attributes
+    (using XMLBase as defined elsewhere right now)&lt;/li&gt;
 
-  &lt;h3&gt;Documents&lt;/h3&gt;
+    &lt;li&gt;define how to resolve relative URLs in APIs, using the
+    &lt;dfn&gt;script's base URI&lt;/dfn&gt; maybe&lt;/li&gt;
 
-  &lt;p&gt;Every XML and HTML document in an HTML UA is represented by a
-  &lt;code&gt;Document&lt;/code&gt; object. &lt;a
-  href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
+    &lt;li&gt;define what it means to resolve a relative URL when the base
+    URL doesn't have a path hierarchy (e.g. data:, javascript:,
+    about:blank URLs)&lt;/li&gt;
 
-  &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn&gt;XML
-  documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn&gt;HTML
-  documents&lt;/dfn&gt; when they are created. Whether a document is an
-  &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; or an &lt;span
-  title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt; affects the behavior of
-  certain APIs, as well as a few CSS rendering rules. &lt;a
-  href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;&lt;/p&gt;
+    &lt;li&gt;define &quot;an &lt;dfn&gt;element's base URI&lt;/dfn&gt;&quot; and make the various
+    places that talk about a base URI in the context of an element use
+    that definition&lt;/li&gt;
 
-  &lt;p class=&quot;note&quot;&gt;A &lt;code&gt;Document&lt;/code&gt; object created by the &lt;code
-  title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API on the
-  &lt;code&gt;DOMImplementation&lt;/code&gt; object is initially an &lt;span
-  title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt;, but can be made into an
-  &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; by calling &lt;code
-  title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; on it.&lt;/p&gt;
+    &lt;li&gt;make the language used to refer to resolving a base URI
+    consistent throughout, maybe make it hyperlink to a definition
+    each time&lt;/li&gt;
 
-  &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
-  this specification) must also implement the
-  &lt;code&gt;HTMLDocument&lt;/code&gt; interface, available using
-  binding-specific methods. (This is the case whether or not the
-  document in question is an &lt;span title=&quot;HTML documents&quot;&gt;HTML
-  document&lt;/span&gt; or indeed whether it contains any &lt;span&gt;HTML
-  elements&lt;/span&gt; at all.) &lt;code&gt;Document&lt;/code&gt; objects must also
-  implement the document-level interface of any other namespaces found
-  in the document that the UA supports. For example, if an HTML
-  implementation also supports SVG, then the &lt;code&gt;Document&lt;/code&gt;
-  object must implement &lt;code&gt;HTMLDocument&lt;/code&gt; and
-  &lt;code&gt;SVGDocument&lt;/code&gt;.&lt;/p&gt;
+    &lt;li&gt;define a cheap, interoperable mechanism for URL attributes and
+    anything else that relies on xml:base and the base element to
+    handle dynamic changes to those attributes and elements, possibly
+    by defining some mechanism which causes changes to be ignored in
+    some reliable way.
+&lt;!--
+On Sat, 1 Mar 2008, Anne van Kesteren wrote:
+&gt;
+&gt; Note that the new base URI would only take effect once you actually did
+&gt; something with a potentially affected object. For instance, &lt;img&gt; would
+&gt; not start loading a new image if the base URI changes. &lt;img&gt;.src =
+&gt; &lt;img&gt;.getAttribute(&quot;src&quot;) could start loading a new resource however if
+&gt; the base URI changed since the initial load.
 
-  &lt;p class=&quot;note&quot;&gt;Because the &lt;code&gt;HTMLDocument&lt;/code&gt; interface is
-  now obtained using binding-specific casting methods instead of
-  simply being the primary interface of the document object, it is no
-  longer defined as inheriting from &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+On Sat, 1 Mar 2008, Jonas Sicking wrote:
+&gt; 
+&gt; Well, that was my intention with the initial proposal. But Hixie pointed    
+&gt; out that &quot;did something&quot; is a very hard thing to define. For example on 
+&gt; a &lt;a href=&quot;...&quot;&gt;, does the user hovering the node count? Does resizing
+&gt; the window count? Does removing the node from the DOM and reinserting it
+&gt; count?
 
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLDocument&lt;/dfn&gt; {
-  // &lt;span&gt;resource metadata management&lt;/span&gt;
-  [PutForwards=href] readonly attribute &lt;span&gt;Location&lt;/span&gt; &lt;span title=&quot;dom-document-location&quot;&gt;location&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-URL&quot;&gt;URL&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-document-domain&quot;&gt;domain&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-referrer&quot;&gt;referrer&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-document-cookie&quot;&gt;cookie&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-lastModified&quot;&gt;lastModified&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-compatMode&quot;&gt;compatMode&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-document-charset&quot;&gt;charset&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-characterSet&quot;&gt;characterSet&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-defaultCharset&quot;&gt;defaultCharset&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-document-readyState&quot;&gt;readyState&lt;/span&gt;;
+On Sat, 1 Mar 2008, Maciej Stachowiak wrote:
+&gt; 
+&gt; How about requiring that the base used is the one in effect when a given
+&gt; relative URI is resolved, and define that URIs for resource-loading 
+&gt; elements are resolved at the time the relevant attribute is set or
+&gt; parsed (but for hyperlinks, at the time it is dereferenced). That is        
+&gt; easy to implement, interoperable, and reasonably predictable. It makes
+&gt; sense that changing &lt;base&gt; would affect future loads but not trigger
+&gt; reloads of already loaded or already in progress resources.
 
-  // &lt;span&gt;DOM tree accessors&lt;/span&gt;
-           attribute DOMString &lt;span title=&quot;dom-document-title&quot;&gt;title&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-document-dir&quot;&gt;dir&lt;/span&gt;;
-           attribute &lt;span&gt;HTMLElement&lt;/span&gt; &lt;span title=&quot;dom-document-body&quot;&gt;body&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-images&quot;&gt;images&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-embeds&quot;&gt;embeds&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-plugins&quot;&gt;plugins&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-links&quot;&gt;links&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-forms&quot;&gt;forms&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-anchors&quot;&gt;anchors&lt;/span&gt;;
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-scripts&quot;&gt;scripts&lt;/span&gt;;
-  NodeList &lt;span title=&quot;dom-document-getElementsByName&quot;&gt;getElementsByName&lt;/span&gt;(in DOMString elementName);
-  NodeList &lt;span title=&quot;dom-document-getElementsByClassName&quot;&gt;getElementsByClassName&lt;/span&gt;(in DOMString classNames);
+possibly &quot;in the event that the xml:base or base href attribute is
+changed, user agents may, whenever convenient, pretend, for the sake
+of url resolution, that it has not changed&quot;
 
-  // &lt;span&gt;dynamic markup insertion&lt;/span&gt;
-           attribute DOMString &lt;span title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/span&gt;;
-  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;();
-  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString type);
-  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString type, in DOMString replace);
-  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features);
-  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features, in boolean replace);
-  void &lt;span title=&quot;dom-document-close&quot;&gt;close&lt;/span&gt;();
-  void &lt;span title=&quot;dom-document-write&quot;&gt;write&lt;/span&gt;(in DOMString text);
-  void &lt;span title=&quot;dom-document-writeln&quot;&gt;writeln&lt;/span&gt;(in DOMString text);
+possibly define &quot;base uri change notification behaviour&quot; for all
+elements with URI attributes, and then define changing base href and
+xml:base to activate that behaviour on all elements in the affected
+subtree. Also make this algorithm get called when a node from another
+document is inserted into an HTML document. (we could define that
+you're allowed to do that, in the absence of a DOM Core update)
+--&gt;
+    &lt;/li&gt;
 
-  // &lt;span&gt;user interaction&lt;/span&gt;
-  &lt;span&gt;Selection&lt;/span&gt; &lt;span title=&quot;dom-document-getSelection&quot;&gt;getSelection&lt;/span&gt;();
-  readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;span title=&quot;dom-document-activeElement&quot;&gt;activeElement&lt;/span&gt;;
-  boolean &lt;span title=&quot;dom-document-hasFocus&quot;&gt;hasFocus&lt;/span&gt;();
-           attribute boolean &lt;span title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/span&gt;;
-  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId);
-  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean showUI);
-  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean showUI, in DOMString value);
-  boolean &lt;span title=&quot;dom-document-queryCommandEnabled&quot;&gt;queryCommandEnabled&lt;/span&gt;(in DOMString commandId);
-  boolean &lt;span title=&quot;dom-document-queryCommandIndeterm&quot;&gt;queryCommandIndeterm&lt;/span&gt;(in DOMString commandId);
-  boolean &lt;span title=&quot;dom-document-queryCommandState&quot;&gt;queryCommandState&lt;/span&gt;(in DOMString commandId);
-  boolean &lt;span title=&quot;dom-document-queryCommandSupported&quot;&gt;queryCommandSupported&lt;/span&gt;(in DOMString commandId);
-  DOMString &lt;span title=&quot;dom-document-queryCommandValue&quot;&gt;queryCommandValue&lt;/span&gt;(in DOMString commandId);
-  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-commands&quot;&gt;commands&lt;/span&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;Since the &lt;code&gt;HTMLDocument&lt;/code&gt; interface holds methods and
-  attributes related to a number of disparate features, the members of
-  this interface are described in various different sections.&lt;/p&gt;
-
-
-  &lt;h4&gt;Security&lt;/h4&gt;
-
-  &lt;p&gt;User agents must raise a &lt;span&gt;security exception&lt;/span&gt; whenever
-  any of the members of an &lt;code&gt;HTMLDocument&lt;/code&gt; object are
-  accessed by scripts whose &lt;span&gt;effective script origin&lt;/span&gt; is
-  not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
-  &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;effective script origin&lt;/span&gt;.&lt;/p&gt;
-
-
-
-  &lt;h4&gt;&lt;dfn&gt;Resource metadata management&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-URL&quot;&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-  XXXDOCURL xref --&gt;.&lt;/p&gt;
-
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-referrer&quot;&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute
-  must return either the &lt;span title=&quot;the document's
-  address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;span&gt;active
-  document&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt; at the
-  time the navigation was started (that is, the page which &lt;span
-  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt;
-  to the current document), or the empty string if there is no such
-  originating page, or if the UA has been configured not to report
-  referrers in this case, or if the navigation was initiated for a
-  &lt;span&gt;hyperlink&lt;/span&gt; with a &lt;code
-  title=&quot;rel-noreferrer&quot;&gt;noreferrer&lt;/code&gt; keyword.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;In the case of HTTP, the &lt;code
-  title=&quot;dom-document-referrer&quot;&gt;referrer&lt;/code&gt; DOM attribute will
-  match the &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; (sic) header that was sent
-  when fetching the current page.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Typically user agents are configured to not report
-  referrers in the case where the referrer uses an encrypted protocol
-  and the current page does not (e.g. when navigating from an &lt;code
-  title=&quot;&quot;&gt;https:&lt;/code&gt; page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt;
-  page).&lt;/p&gt;
-
-
-  &lt;hr&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-cookie&quot;&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the cookies of the resource.&lt;/p&gt;
-
-  &lt;!-- XXX this needs work; e.g. document.open() should return the
-  cookies of the document that called document.open(), not of
-  about:blank or the document that had .open() called on, as I
-  understand it. --&gt;
-
-  &lt;p id=&quot;sandboxCookies&quot;&gt;On getting, if the &lt;span&gt;sandboxed origin
-  browsing context flag&lt;/span&gt; is set on the &lt;span&gt;browsing
-  context&lt;/span&gt; of the document, the user agent must raise a
-  &lt;span&gt;security exception&lt;/span&gt;. Otherwise, it must return the same
-  string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header
-  it would include if fetching the resource indicated by &lt;span&gt;the
-  document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, as per RFC
-  2109 section 4.3.4. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;On setting, if the &lt;span&gt;sandboxed origin browsing context
-  flag&lt;/span&gt; is set on the &lt;span&gt;browsing context&lt;/span&gt; of the
-  document, the user agent must raise a &lt;span&gt;security
-  exception&lt;/span&gt;. Otherwise, the user agent must act as it would
-  when processing cookies if it had just attempted to fetch &lt;span&gt;the
-  document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, and had
-  received a response with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose
-  value was the specified value, as per RFC 2109 sections 4.3.1,
-  4.3.2, and 4.3.3. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Since the &lt;code
-  title=&quot;dom-document-cookie&quot;&gt;cookie&lt;/code&gt; attribute is accessible
-  across frames, the path restrictions on cookies are only a tool to
-  help manage which cookies are sent to which parts of the site, and
-  are not in any way a security feature.&lt;/p&gt;
-
-
-  &lt;hr&gt; 
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-lastModified&quot;&gt;&lt;code&gt;lastModified&lt;/code&gt;&lt;/dfn&gt;
-  attribute, on getting, must return the date and time of the
-  &lt;code&gt;Document&lt;/code&gt;'s source file's last modification, in the
-  user's local timezone, in the following format:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt; The month component of the date. &lt;/li&gt;
-
-   &lt;li&gt; A U+002F SOLIDUS character ('/'). &lt;/li&gt;
-
-   &lt;li&gt; The day component of the date. &lt;/li&gt;
-
-   &lt;li&gt; A U+002F SOLIDUS character ('/'). &lt;/li&gt;
-
-   &lt;li&gt; The year component of the date. &lt;/li&gt;
-
-   &lt;li&gt; A U+0020 SPACE character. &lt;/li&gt;
-
-   &lt;li&gt; The hours component of the time. &lt;/li&gt;
-
-   &lt;li&gt; A U+003A COLON character (':'). &lt;/li&gt;
-
-   &lt;li&gt; The minutes component of the time. &lt;/li&gt;
-
-   &lt;li&gt; A U+003A COLON character (':'). &lt;/li&gt;
-
-   &lt;li&gt; The seconds component of the time. &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;All the numeric components above, other than the year, must be
-  given as two digits in the range U+0030 DIGIT ZERO to U+0039 DIGIT
-  NINE representing the number in base ten, zero-padded if
-  necessary.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt;'s source file's last modification date
-  and time must be derived from relevant features of the networking
-  protocols used, e.g. from the value of the HTTP &lt;code
-  title=&quot;&quot;&gt;Last-Modified&lt;/code&gt; header of the document, or from
-  metadata in the file system for local files. If the last modification
-  date and time are not known, the attribute must return the string
-  &lt;code title=&quot;&quot;&gt;01/01/1970 00:00:00&lt;/code&gt;.&lt;/p&gt;
-
-
-  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; is always set to one of three modes:
-  &lt;dfn&gt;no quirks mode&lt;/dfn&gt;, the default; &lt;dfn&gt;quirks mode&lt;/dfn&gt;, used
-  typically for legacy documents; and &lt;dfn&gt;limited quirks mode&lt;/dfn&gt;,
-  also known as &quot;almost standards&quot; mode. The mode is only ever changed
-  from the default by the &lt;span&gt;HTML parser&lt;/span&gt;, based on the
-  presence, absence, or value of the DOCTYPE string.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-compatMode&quot;&gt;&lt;code&gt;compatMode&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must return the literal string &quot;&lt;code
-  title=&quot;&quot;&gt;CSS1Compat&lt;/code&gt;&quot; unless the document has been set to
-  &lt;span&gt;quirks mode&lt;/span&gt; by the &lt;span&gt;HTML parser&lt;/span&gt;, in which
-  case it must instead return the literal string &quot;&lt;code
-  title=&quot;&quot;&gt;BackCompat&lt;/code&gt;&quot;.&lt;/p&gt;
-
-  &lt;div class=&quot;big-issue&quot;&gt;
-
-   &lt;p&gt;As far as parsing goes, the quirks I know of are:&lt;/p&gt;
-
-   &lt;ul&gt;
-
-    &lt;li&gt;Comment parsing is different.&lt;/li&gt;
-
-    &lt;li&gt;&lt;code&gt;p&lt;/code&gt; can contain &lt;code&gt;table&lt;/code&gt;&lt;/li&gt;
-
-    &lt;li&gt;Safari and IE have special parsing rules for &lt;% ... %&gt;
-    (even in standards mode, though clearly this should be
-    quirks-only).&lt;/li&gt;
-
    &lt;/ul&gt;
 
   &lt;/div&gt;
 
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;h4&gt;Interfaces for URI manipulation&lt;/h4&gt;
 
+  &lt;!-- XXXURL change to URL --&gt; 
+ &lt;p&gt;An interface that has a complement of &lt;dfn&gt;URI decomposition
+  attributes&lt;/dfn&gt; will have seven attributes with the following
+  definitions:&lt;/p&gt;
 
-  &lt;p&gt;Documents have an associated &lt;dfn title=&quot;document's character
-  encoding&quot;&gt;character encoding&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt;
-  object is created, the &lt;span&gt;document's character encoding&lt;/span&gt;
-  must be initialized to UTF-16. Various algorithms during page
-  loading affect this value, as does the &lt;code
-  title=&quot;dom-document-charset&quot;&gt;charset&lt;/code&gt; setter.  &lt;a
-  href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt; &lt;!-- XXX
-  <A HREF="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</A> --&gt;&lt;/p&gt;
+&lt;pre class=&quot;idl&quot;&gt;
+           attribute DOMString &lt;span title=&quot;dom-uda-protocol&quot;&gt;protocol&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-host&quot;&gt;host&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-hostname&quot;&gt;hostname&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-port&quot;&gt;port&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-pathname&quot;&gt;pathname&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-search&quot;&gt;search&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-uda-hash&quot;&gt;hash&lt;/span&gt;;
+&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-charset&quot;&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute must, on getting, return the preferred MIME name of
-  the &lt;span&gt;document's character encoding&lt;/span&gt;. On setting, if the
-  new value is an IANA-registered alias for a character encoding, the
-  &lt;span&gt;document's character encoding&lt;/span&gt; must be set to that
-  character encoding. (Otherwise, nothing happens.)&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;p&gt;The attributes defined to be URI decomposition attributes must
+  act as described for the attributes with the same corresponding
+  names in this section.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-characterSet&quot;&gt;&lt;code&gt;characterSet&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute must, on getting, return the preferred MIME name of
-  the &lt;span&gt;document's character encoding&lt;/span&gt;.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;p&gt;In addition, an interface with a complement of URI decomposition
+  attributes will define an &lt;dfn
+  title=&quot;concept-uda-input&quot;&gt;input&lt;/dfn&gt;, which is a URI that the
+  attributes act on, and a &lt;dfn title=&quot;concept-uda-setter&quot;&gt;common
+  setter action&lt;/dfn&gt;, which is a set of steps invoked when any of the
+  attributes' setters are invoked.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-defaultCharset&quot;&gt;&lt;code&gt;defaultCharset&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute must, on getting, return the preferred MIME name of a
-  character encoding, possibly the user's default encoding, or an
-  encoding associated with the user's current geographical location,
-  or any arbitrary encoding name.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;p&gt;The seven URI decomposition attributes have similar
+  requirements.&lt;/p&gt;
 
-  &lt;p&gt;Each document has a &lt;dfn&gt;current document readiness&lt;/dfn&gt;. When a
-  &lt;code&gt;Document&lt;/code&gt; object is created, it must have its
-  &lt;span&gt;current document readiness&lt;/span&gt; set to the string
-  &quot;loading&quot;. Various algorithms during page loading affect this
-  value. When the value is set, the user agent must &lt;span&gt;fire a
-  simple event&lt;/span&gt; called &lt;code
-  title=&quot;event-readystatechanged&quot;&gt;readystatechanged&lt;/code&gt; at the
-  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt; &lt;!-- XXX define
-  document.onreadystatechange --&gt;
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;p&gt;On getting, if the &lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt;
+  fulfills the condition given in the &quot;getter condition&quot; column
+  corresponding to the attribute in the table below, the user agent
+  must return the part of the &lt;span
+  title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; URI given in the &quot;component&quot;
+  column, with any prefixes specified in the &quot;prefix&quot; column
+  appropriately added to the start of the string and any suffixes
+  specified in the &quot;suffix&quot; column appropriately added to the end of
+  the string. Otherwise, the attribute must return the empty
+  string.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-readyState&quot;&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must, on getting, return the &lt;span&gt;current document
-  readiness&lt;/span&gt;.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL; algorithms or something? --&gt;
+  &lt;p&gt;On setting, the new value must first be mutated as described by
+  the &quot;setter preprocessor&quot; column, then mutated by %-escaping any
+  characters in the new value that are not valid in the relevant
+  component as given by the &quot;component&quot; column. Then, if the resulting
+  new value fulfills the condition given in the &quot;setter condition&quot;
+  column, the user agent must make a new string &lt;var
+  title=&quot;&quot;&gt;output&lt;/var&gt; by replacing the component of the URI given by
+  the &quot;component&quot; column in the &lt;span
+  title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; URI with the new value;
+  otherwise, the user agent must let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be
+  equal to the &lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt;. Finally,
+  the user agent must invoke the &lt;span
+  title=&quot;concept-uda-setter&quot;&gt;common setter action&lt;/span&gt; with the
+  value of &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
 
-
-
-  &lt;h3&gt;Elements&lt;/h3&gt;
-
-  &lt;p&gt;The nodes representing &lt;span&gt;HTML elements&lt;/span&gt; in the DOM must
-  implement, and expose to scripts, the interfaces listed for them in
-  the relevant sections of this specification. This includes
-  &lt;span&gt;XHTML&lt;/span&gt; elements in &lt;span&gt;XML documents&lt;/span&gt;, even when
-  those documents are in another context (e.g. inside an XSLT
-  transform).&lt;/p&gt;
-
-  &lt;p&gt;The basic interface, from which all the &lt;span&gt;HTML
-  elements&lt;/span&gt;' interfaces inherit, and which must be used by
-  elements that have no additional requirements, is the
-  &lt;code&gt;HTMLElement&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLElement&lt;/dfn&gt; : &lt;span&gt;Element&lt;/span&gt; {
-  // &lt;span&gt;DOM tree accessors&lt;/span&gt;
-  NodeList &lt;span title=&quot;dom-getElementsByClassName&quot;&gt;getElementsByClassName&lt;/span&gt;(in DOMString classNames);
-
-  // &lt;span&gt;dynamic markup insertion&lt;/span&gt;
-           attribute DOMString &lt;span title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/span&gt;;
-
-  // &lt;span&gt;metadata attributes&lt;/span&gt;
-           attribute DOMString &lt;span title=&quot;dom-id&quot;&gt;id&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-title&quot;&gt;title&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-lang&quot;&gt;lang&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-dir&quot;&gt;dir&lt;/span&gt;;
-           attribute &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=&quot;dom-className&quot;&gt;className&lt;/span&gt;;
-  readonly attribute &lt;span&gt;DOMTokenList&lt;/span&gt; &lt;span title=&quot;dom-classList&quot;&gt;classList&lt;/span&gt;;
-  readonly attribute &lt;span&gt;DOMStringMap&lt;/span&gt; &lt;span title=&quot;dom-dataset&quot;&gt;dataset&lt;/span&gt;;
-
-  // &lt;span&gt;user interaction&lt;/span&gt;
-           attribute boolean &lt;span title=&quot;dom-irrelevant&quot;&gt;irrelevant&lt;/span&gt;;
-  void &lt;span title=&quot;dom-click&quot;&gt;click&lt;/span&gt;();
-  void &lt;span title=&quot;dom-scrollIntoView&quot;&gt;scrollIntoView&lt;/span&gt;();
-  void &lt;span title=&quot;dom-scrollIntoView&quot;&gt;scrollIntoView&lt;/span&gt;(in boolean top);
-           attribute long &lt;span title=&quot;dom-tabindex&quot;&gt;tabIndex&lt;/span&gt;;
-  void &lt;span title=&quot;dom-focus&quot;&gt;focus&lt;/span&gt;();
-  void &lt;span title=&quot;dom-blur&quot;&gt;blur&lt;/span&gt;();
-           attribute boolean &lt;span title=&quot;dom-draggable&quot;&gt;draggable&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-contentEditable&quot;&gt;contentEditable&lt;/span&gt;;
-  readonly attribute DOMString &lt;span title=&quot;dom-isContentEditable&quot;&gt;isContentEditable&lt;/span&gt;;
-           attribute &lt;span&gt;HTMLMenuElement&lt;/span&gt; &lt;span title=&quot;dom-contextMenu&quot;&gt;contextMenu&lt;/span&gt;;
-
-  // &lt;span&gt;styling&lt;/span&gt;
-  readonly attribute &lt;span&gt;CSSStyleDeclaration&lt;/span&gt; &lt;span title=&quot;dom-style&quot;&gt;style&lt;/span&gt;;
-
-  // &lt;span&gt;data templates&lt;/span&gt;
-           attribute DOMString &lt;span title=&quot;dom-template&quot;&gt;template&lt;/span&gt;;
-  readonly attribute HTMLDataTemplateElement &lt;span title=&quot;dom-templateElement&quot;&gt;templateElement&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-ref&quot;&gt;ref&lt;/span&gt;;
-  readonly attribute Node &lt;span title=&quot;dom-refNode&quot;&gt;refNode&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-registrationMark&quot;&gt;registrationMark&lt;/span&gt;;
-  readonly attribute DocumentFragment &lt;span title=&quot;dom-originalContent&quot;&gt;originalContent&lt;/span&gt;;
-
-  // &lt;span&gt;event handler DOM attributes&lt;/span&gt;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onabort&quot;&gt;onabort&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onbeforeunload&quot;&gt;onbeforeunload&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onblur&quot;&gt;onblur&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onchange&quot;&gt;onchange&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onclick&quot;&gt;onclick&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-oncontextmenu&quot;&gt;oncontextmenu&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondblclick&quot;&gt;ondblclick&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondrag&quot;&gt;ondrag&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragend&quot;&gt;ondragend&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragenter&quot;&gt;ondragenter&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragleave&quot;&gt;ondragleave&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragover&quot;&gt;ondragover&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragstart&quot;&gt;ondragstart&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondrop&quot;&gt;ondrop&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onerror&quot;&gt;onerror&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onfocus&quot;&gt;onfocus&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeydown&quot;&gt;onkeydown&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeypress&quot;&gt;onkeypress&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeyup&quot;&gt;onkeyup&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onload&quot;&gt;onload&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmessage&quot;&gt;onmessage&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousedown&quot;&gt;onmousedown&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousemove&quot;&gt;onmousemove&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseout&quot;&gt;onmouseout&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseover&quot;&gt;onmouseover&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseup&quot;&gt;onmouseup&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousewheel&quot;&gt;onmousewheel&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onresize&quot;&gt;onresize&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onscroll&quot;&gt;onscroll&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onselect&quot;&gt;onselect&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onstorage&quot;&gt;onstorage&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/span&gt;;
-           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onunload&quot;&gt;onunload&lt;/span&gt;;
-
-};&lt;/pre&gt;
-
-  &lt;p&gt;As with the &lt;code&gt;HTMLDocument&lt;/code&gt; interface, the
-  &lt;code&gt;HTMLElement&lt;/code&gt; interface holds methods and attributes
-  related to a number of disparate features, and the members of this
-  interface are therefore described in various different sections of
-  this specification.&lt;/p&gt;
-
-
-  &lt;h4&gt;Reflecting content attributes in DOM attributes&lt;/h4&gt;
-
-  &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are
-  defined to &lt;dfn&gt;reflect&lt;/dfn&gt; a particular &lt;span&gt;content
-  attribute&lt;/span&gt;. This means that on getting, the DOM attribute
-  returns the current value of the content attribute, and on setting,
-  the DOM attribute changes the value of the content attribute to the
-  given value.&lt;/p&gt;
-
-  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
-  algorithm --&gt;
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt;
-  attribute whose content attribute is defined to contain a URI, then
-  on getting, the DOM attribute must return the value of the content
-  attribute, resolved to an absolute URI, and on setting, must set the
-  content attribute to the specified literal value. If the content
-  attribute is absent, the DOM attribute must return the default
-  value, if the content attribute has one, or else the empty
+  &lt;!-- XXXURL change to URL --&gt;
+  &lt;p&gt;When replacing a component in the URI, if the component is part
+  of an optional group in the URI syntax consisting of a character
+  followed by the component, the component (including its prefix
+  character) must be included even if the new value is the empty
   string.&lt;/p&gt;
 
-  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
-  algorithm --&gt;
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt;
-  attribute whose content attribute is defined to contain one or more
-  URIs, then on getting, the DOM attribute must &lt;span title=&quot;split the
-  string on spaces&quot;&gt;split the content attribute on spaces&lt;/span&gt; and
-  return the concatenation of each token URI, resolved to an absolute
-  URI, with a single U+0020 SPACE character between each URI; if the
-  content attribute is absent, the DOM attribute must return the
-  default value, if the content attribute has one, or else the empty
-  string. On setting, the DOM attribute must set the content attribute
-  to the specified literal value.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;The previous paragraph applies in particular to the
+  &quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot; before a &lt;port&gt; component, the &quot;&lt;code
+  title=&quot;&quot;&gt;?&lt;/code&gt;&quot; before a &lt;query&gt; component, and the &quot;&lt;code
+  title=&quot;&quot;&gt;#&lt;/code&gt;&quot; before a &lt;fragment&gt; component.&lt;/p&gt;
 
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; whose
-  content attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt;, and the
-  DOM attribute is &lt;dfn&gt;limited to only known values&lt;/dfn&gt;, then, on
-  getting, the DOM attribute must return the conforming value
-  associated with the state the attribute is in (in its canonical
-  case), or the empty string if the attribute is in a state that has
-  no associated keyword value; and on setting, if the new value
-  case-insensitively matches one of the keywords given for that
-  attribute, then the content attribute must be set to the conforming
-  value associated with the state that the attribute would be in if
-  set to the given new value, otherwise, if the new value is the empty
-  string, then the content attribute must be removed, otherwise, the
-  setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.&lt;/p&gt;
+  &lt;!-- XXXURL change to URL; algorithms --&gt;
+  &lt;p&gt;The rules for parsing and constructing URIs are described in RFC
+  3986 and RFC 3987. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but
-  doesn't fall into any of the above categories, then the getting and
-  setting must be done in a transparent, case-preserving manner.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a boolean attribute, then on
-  getting the DOM attribute must return true if the attribute is set,
-  and false if it is absent. On setting, the content attribute must be
-  removed if the DOM attribute is set to false, and must be set to
-  have the same value as its name if the DOM attribute is set to
-  true. (This corresponds to the rules for &lt;span title=&quot;boolean
-  attribute&quot;&gt;boolean content attributes&lt;/span&gt;.)&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a signed integer type
-  (&lt;code&gt;long&lt;/code&gt;) then, on getting, the content attribute must be
-  parsed according to &lt;span title=&quot;rules for parsing integers&quot;&gt;the
-  rules for parsing signed integers&lt;/span&gt;, and if that is successful,
-  the resulting value must be returned. If, on the other hand, it
-  fails, or if the attribute is absent, then the default value must be
-  returned instead, or 0 if there is no default value. On setting, the
-  given value must be converted to the shortest possible string
-  representing the number as a &lt;span&gt;valid integer&lt;/span&gt; in base ten
-  and then that string must be used as the new content attribute
-  value.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is an &lt;em&gt;unsigned&lt;/em&gt; integer
-  type (&lt;code&gt;unsigned long&lt;/code&gt;) then, on getting, the content
-  attribute must be parsed according to &lt;span title=&quot;rules for parsing
-  non-negative integers&quot;&gt;the rules for parsing unsigned
-  integers&lt;/span&gt;, and if that is successful, the resulting value must
-  be returned. If, on the other hand, it fails, or if the attribute is
-  absent, the default value must be returned instead, or 0 if there is
-  no default value. On setting, the given value must be converted to
-  the shortest possible string representing the number as a
-  &lt;span&gt;valid non-negative integer&lt;/span&gt; in base ten and then that
-  string must be used as the new content attribute value.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is an unsigned integer type
-  (&lt;code&gt;unsigned long&lt;/code&gt;) that is &lt;dfn&gt;limited to only positive
-  non-zero numbers&lt;/dfn&gt;, then the behavior is similar to the previous
-  case, but zero is not allowed. On getting, the content attribute
-  must first be parsed according to &lt;span title=&quot;rules for parsing
-  non-negative integers&quot;&gt;the rules for parsing unsigned
-  integers&lt;/span&gt;, and if that is successful, the resulting value must
-  be returned. If, on the other hand, it fails, or if the attribute is
-  absent, the default value must be returned instead, or 1 if there is
-  no default value. On setting, if the value is zero, the user agent
-  must fire an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. Otherwise, the
-  given value must be converted to the shortest possible string
-  representing the number as a &lt;span&gt;valid non-negative integer&lt;/span&gt;
-  in base ten and then that string must be used as the new content
-  attribute value.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
-  (&lt;code&gt;float&lt;/code&gt;) and the content attribute is defined to contain
-  a time offset, then, on getting, the content attribute must be
-  parsed according to &lt;span title=&quot;rules for parsing time offsets&quot;&gt;the
-  rules for parsing time offsets&lt;/span&gt;, and if that is successful, the
-  resulting value, in seconds, must be returned. If that fails, or if
-  the attribute is absent, the default value must be returned, or the
-  not-a-number value (NaN) if there is no default value. On setting,
-  the given value, interpreted as a time offset in seconds, must be
-  converted to a string using the &lt;span&gt;time offset serialization
-  rules&lt;/span&gt;, and that string must be used as the new content
-  attribute value.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
-  (&lt;code&gt;float&lt;/code&gt;) and it doesn't fall into one of the earlier
-  categories, then, on getting, the content attribute must be parsed
-  according to &lt;span title=&quot;rules for parsing floating point number
-  values&quot;&gt;the rules for parsing floating point number values&lt;/span&gt;,
-  and if that is successful, the resulting value must be returned. If,
-  on the other hand, it fails, or if the attribute is absent, the
-  default value must be returned instead, or 0.0 if there is no
-  default value. On setting, the given value must be converted to the
-  shortest possible string representing the number as a &lt;span&gt;valid
-  floating point number&lt;/span&gt; in base ten and then that string must
-  be used as the new content attribute value.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute is of the type
-  &lt;code&gt;DOMTokenList&lt;/code&gt;, then on getting it must return a
-  &lt;code&gt;DOMTokenList&lt;/code&gt; object whose underlying string is the
-  element's corresponding content attribute. When the
-  &lt;code&gt;DOMTokenList&lt;/code&gt; object mutates its underlying string, the
-  content attribute must itself be immediately mutated. When the
-  attribute is absent, then the string represented by the
-  &lt;code&gt;DOMTokenList&lt;/code&gt; object is the empty string; when the
-  object mutates this empty string, the user agent must first add the
-  corresponding content attribute, and then mutate that attribute
-  instead. &lt;code&gt;DOMTokenList&lt;/code&gt; attributes are always
-  read-only. The same &lt;code&gt;DOMTokenList&lt;/code&gt; object must be
-  returned every time for each attribute.&lt;/p&gt;
-
-  &lt;p&gt;If a reflecting DOM attribute has the type
-  &lt;code&gt;HTMLElement&lt;/code&gt;, or an interface that descends from
-  &lt;code&gt;HTMLElement&lt;/code&gt;, then, on getting, it must run the
-  following algorithm (stopping at the first point where a value is
-  returned):
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the corresponding content attribute is absent, then the
-   DOM attribute must return null.&lt;/li&gt;
-
-   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the element that the &lt;code
-   title=&quot;&quot;&gt;document.getElementById()&lt;/code&gt; method would find if it
-   was passed as its argument the current value of the corresponding
-   content attribute.&lt;/li&gt;
-
-   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or if it is not
-   type-compatible with the DOM attribute, then the DOM attribute must
-   return null.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, it must return &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;On setting, if the given element has an &lt;code
-  title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute, then the content attribute must
-  be set to the value of that &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt;
-  attribute. Otherwise, the DOM attribute must be set to the empty
-  string.&lt;/p&gt;&lt;!-- XXX or raise an exception? --&gt;
-
-
-
-
-  &lt;h3&gt;Common DOM interfaces&lt;/h3&gt;
-
-  &lt;h4&gt;Collections&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;HTMLCollection&lt;/code&gt;,
-  &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt;, and
-  &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; interfaces represent various
-  lists of DOM nodes. Collectively, objects implementing these
-  interfaces are called &lt;dfn&gt;collections&lt;/dfn&gt;.&lt;/p&gt;
-
-  &lt;p&gt;When a &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; is created, a
-  filter and a root are associated with the collection.&lt;/p&gt;
-
-  &lt;p class=&quot;example&quot;&gt;For example, when the &lt;code&gt;HTMLCollection&lt;/code&gt;
-  object for the &lt;code
-  title=&quot;dom-document-images&quot;&gt;document.images&lt;/code&gt; attribute is
-  created, it is associated with a filter that selects only
-  &lt;code&gt;img&lt;/code&gt; elements, and rooted at the root of the
-  document.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; then &lt;dfn
-  title=&quot;represented by the collection&quot;&gt;represents&lt;/dfn&gt; a
-  &lt;span&gt;live&lt;/span&gt; view of the subtree rooted at the collection's
-  root, containing only nodes that match the given filter. The view is
-  linear. In the absence of specific requirements to the contrary, the
-  nodes within the collection must be sorted in &lt;span&gt;tree
-  order&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-table-rows&quot;&gt;rows&lt;/code&gt; list is
-  not in tree order.&lt;/p&gt;
-
-  &lt;p&gt;An attribute that returns a collection must return the same
-  object every time it is retrieved.&lt;/p&gt;
-
-
-  &lt;h5&gt;HTMLCollection&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code&gt;HTMLCollection&lt;/code&gt; interface represents a generic
-  &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; of elements.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLCollection&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;span title=&quot;dom-HTMLCollection-length&quot;&gt;length&lt;/span&gt;;
-  [IndexGetter] Element &lt;span title=&quot;dom-HTMLCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
-  [NameGetter] Element &lt;span title=&quot;dom-HTMLCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of nodes &lt;span&gt;represented by the
-  collection&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-HTMLCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
-  return null.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var
-  title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the first node
-  in the collection that matches the following requirements:&lt;/p&gt;
-
-  &lt;ul&gt;
-
-   &lt;li&gt;It is an &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;applet&lt;/code&gt;,
-   &lt;code&gt;area&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, or
-   &lt;code&gt;object&lt;/code&gt; element with a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;, or,&lt;/li&gt;
-
-   &lt;li&gt;It is an &lt;span title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; of any
-   kind with an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute equal to
-   &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. (Non-HTML elements, even if they have IDs,
-   are not searched for the purposes of &lt;code
-   title=&quot;dom-HTMLCollection-namedItem&quot;&gt;namedItem()&lt;/code&gt;.)&lt;/li&gt;
-
-  &lt;/ul&gt;
-
-  &lt;p&gt;If no such elements are found, then the method must return
-  null.&lt;/p&gt;
-
-
-
-  &lt;h5&gt;HTMLFormControlsCollection&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt; interface represents
-  a &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; of form controls.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLFormControlsCollection&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;span title=&quot;dom-HTMLFormControlsCollection-length&quot;&gt;length&lt;/span&gt;;
-  [IndexGetter] &lt;span&gt;HTMLElement&lt;/span&gt; &lt;span title=&quot;dom-HTMLFormControlsCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
-  [NameGetter] Object &lt;span title=&quot;dom-HTMLFormControlsCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLFormControlsCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of nodes &lt;span&gt;represented by the
-  collection&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLFormControlsCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
-  return null.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLFormControlsCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method must act according to the following algorithm:
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If, at the time the method is called, there is exactly one node
-   in the collection that has either an &lt;code
-   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
-   then return that node and stop the algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if there are no nodes in the collection that have
-   either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;, then return null and stop the algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a
-   live view of the &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt; object,
-   further filtered so that the only nodes in the
-   &lt;code&gt;NodeList&lt;/code&gt; object are those that have either an &lt;code
-   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object
-   must be sorted in &lt;span&gt;tree order&lt;/span&gt;.&lt;/li&gt;
-
-   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-&lt;!--
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
---&gt;
-
-
-  &lt;h5&gt;HTMLOptionsCollection&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; interface represents
-  a list of &lt;code&gt;option&lt;/code&gt; elements.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLOptionsCollection&lt;/dfn&gt; {
-           attribute unsigned long &lt;span title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;length&lt;/span&gt;;
-  [IndexGetter] HTMLOptionElement &lt;span title=&quot;dom-HTMLOptionsCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
-  [NameGetter] Object &lt;span title=&quot;dom-HTMLOptionsCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
-};&lt;/pre&gt;
-
-  &lt;p&gt;On getting, the &lt;dfn
-  title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of nodes &lt;span&gt;represented by the
-  collection&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;On setting, the behavior depends on whether the new value is
-  equal to, greater than, or less than the number of nodes
-  &lt;span&gt;represented by the collection&lt;/span&gt; at that time. If the
-  number is the same, then setting the attribute must do nothing. If
-  the new value is greater, then &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; new
-  &lt;code&gt;option&lt;/code&gt; elements with no attributes and no child nodes
-  must be appended to the &lt;code&gt;select&lt;/code&gt; element on which the
-  &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; is rooted, where &lt;var
-  title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two numbers (new
-  value minus old value). If the new value is lower, then the last
-  &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; nodes in the collection must be removed from
-  their parent nodes, where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference
-  between the two numbers (old value minus new value).&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Setting &lt;code
-  title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;length&lt;/code&gt; never removes
-  or adds any &lt;code&gt;optgroup&lt;/code&gt; elements, and never adds new
-  children to existing &lt;code&gt;optgroup&lt;/code&gt; elements (though it can
-  remove children from them).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-HTMLOptionsCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
-  return null.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-HTMLOptionsCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method must act according to the following algorithm:
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If, at the time the method is called, there is exactly one node
-   in the collection that has either an &lt;code
-   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and stop the
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if there are no nodes in the collection that have
-   either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
-   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
-   title=&quot;&quot;&gt;key&lt;/var&gt;, then return null and stop the algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a
-   live view of the &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; object, further
-   filtered so that the only nodes in the &lt;code&gt;NodeList&lt;/code&gt; object
-   are those that have either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt;
-   attribute or a &lt;code title=&quot;attr-option-name&quot;&gt;name&lt;/code&gt; attribute
-   equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the
-   &lt;code&gt;NodeList&lt;/code&gt; object must be sorted in &lt;span&gt;tree
-   order&lt;/span&gt;.&lt;/li&gt;
-
-   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;We may want to add &lt;code&gt;add()&lt;/code&gt; and
-  &lt;code&gt;remove()&lt;/code&gt; methods here too because IE implements
-  HTMLSelectElement and HTMLOptionsCollection on the same object, and
-  so people use them almost interchangeably in the wild.&lt;/p&gt;
-
-
-  &lt;h4&gt;DOMTokenList&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;DOMTokenList&lt;/code&gt; interface represents an interface
-  to an underlying string that consists of an &lt;span&gt;unordered set of
-  unique space-separated tokens&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Which string underlies a particular &lt;code&gt;DOMTokenList&lt;/code&gt;
-  object is defined when the object is created. It might be a content
-  attribute (e.g. the string that underlies the &lt;code
-  title=&quot;dom-classList&quot;&gt;classList&lt;/code&gt; object is the &lt;code
-  title=&quot;attr-class&quot;&gt;class&lt;/code&gt; attribute), or it might be an
-  anonymous string (e.g. when a &lt;code&gt;DOMTokenList&lt;/code&gt; object is
-  passed to an author-implemented callback in the
-  &lt;code&gt;datagrid&lt;/code&gt; APIs).&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;[&lt;span title=&quot;dom-tokenlist-toString&quot;&gt;Stringifies&lt;/span&gt;] interface &lt;dfn&gt;DOMTokenList&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;span title=&quot;dom-tokenlist-length&quot;&gt;length&lt;/span&gt;;
-  [IndexGetter] DOMString &lt;span title=&quot;dom-tokenlist-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
-  boolean &lt;span title=&quot;dom-tokenlist-has&quot;&gt;has&lt;/span&gt;(in DOMString token);
-  void &lt;span title=&quot;dom-tokenlist-add&quot;&gt;add&lt;/span&gt;(in DOMString token);
-  void &lt;span title=&quot;dom-tokenlist-remove&quot;&gt;remove&lt;/span&gt;(in DOMString token);
-  boolean &lt;span title=&quot;dom-tokenlist-toggle&quot;&gt;toggle&lt;/span&gt;(in DOMString token);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of &lt;em&gt;unique&lt;/em&gt; tokens that
-  result from &lt;span title=&quot;split a string on spaces&quot;&gt;splitting the
-  underlying string on spaces&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-item&quot;&gt;&lt;code&gt;item(&lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must &lt;span title=&quot;split a
-  string on spaces&quot;&gt;split the underlying string on spaces&lt;/span&gt;, sort
-  the resulting list of tokens by Unicode codepoint&lt;!-- XXX that's
-  basically nonsense. What sort order do we want here? It should be
-  the cheapest one possible that is well-defined for all Unicode. --&gt;,
-  remove exact duplicates, and then return the &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt;th item in this list. If &lt;var
-  title=&quot;&quot;&gt;index&lt;/var&gt; is equal to or greater than the number of
-  tokens, then the method must return null.&lt;/p&gt;
-
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-has&quot;&gt;&lt;code&gt;has(&lt;var
-  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-  algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
-   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
-   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
-   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
-   object's underlying string.&lt;/li&gt;
-
-   &lt;li&gt;If the token indicated by &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is one of
-   the tokens in the object's underlying string then return true and
-   stop this algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, return false.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-add&quot;&gt;&lt;code&gt;add(&lt;var
-  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-  algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
-   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
-   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
-   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
-   object's underlying string.&lt;/li&gt;
-
-   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the
-   tokens in the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string
-   then stop the algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying
-   string is not the empty string and the last character of that
-   string is not a &lt;span&gt;space character&lt;/span&gt;, then append a U+0020
-   SPACE character to the end of that string.&lt;/li&gt;
-
-   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
-   &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-remove&quot;&gt;&lt;code&gt;remove(&lt;var
-  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-  algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
-   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
-   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, &lt;span title=&quot;remove a token from a string&quot;&gt;remove
-   the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
-   string&lt;/span&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-toggle&quot;&gt;&lt;code&gt;toggle(&lt;var
-  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
-  algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
-   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
-   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
-   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
-   object's underlying string.&lt;/li&gt;
-
-   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the
-   tokens in the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string
-   then &lt;span title=&quot;remove a token from a string&quot;&gt;remove the given
-   &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying string&lt;/span&gt;, and
-   stop the algorithm, returning false.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying
-   string is not the empty string and the last character of that
-   string is not a &lt;span&gt;space character&lt;/span&gt;, then append a U+0020
-   SPACE character to the end of that string.&lt;/li&gt;
-
-   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
-   &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string.&lt;/li&gt;
-
-   &lt;li&gt;Return true.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;Objects implementing the &lt;code&gt;DOMTokenList&lt;/code&gt; interface must
-  &lt;dfn title=&quot;dom-tokenlist-toString&quot;&gt;stringify&lt;/dfn&gt; to the object's
-  underlying string representation.&lt;/p&gt;
-
-
-  &lt;h4&gt;DOMStringMap&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;code&gt;DOMStringMap&lt;/code&gt; interface represents a set of
-  name-value pairs. When a &lt;code&gt;DOMStringMap&lt;/code&gt; object is
-  instanced, it is associated with three algorithms, one for getting
-  values from names, one for setting names to certain values, and one
-  for deleting names.&lt;/p&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;The names of the methods on this interface are
-  temporary and will be fixed when the Web IDL / &quot;Language Bindings
-  for DOM Specifications&quot; spec is ready to handle this case.&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;DOMStringMap&lt;/dfn&gt; {
-  [NameGetter] DOMString &lt;span title=&quot;dom-stringmap-XXX1&quot;&gt;XXX1&lt;/span&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
-  [NameSetter] void &lt;span title=&quot;dom-stringmap-XXX2&quot;&gt;XXX2&lt;/span&gt;(in DOMString name, in DOMString value); &lt;!-- XXX DOMB --&gt;
-  [XXX] boolean &lt;span title=&quot;dom-stringmap-XXX3&quot;&gt;XXX3&lt;/span&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX1&quot;&gt;&lt;code&gt;XXX1(&lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
-  getting values from names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the
-  name, and must return the corresponding value, or null if &lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt; has no corresponding value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX2&quot;&gt;&lt;code&gt;XXX2(&lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
-  must call the algorithm for setting names to certain values, passing
-  &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;
-  as the value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX3&quot;&gt;&lt;code&gt;XXX3(&lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
-  deleting names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name, and
-  must return true.&lt;/p&gt;
-
-
-  &lt;h4&gt;DOM feature strings&lt;/h4&gt;
-
-  &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support,
-  and for obtaining implementations of interfaces, using &lt;a
-  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&quot;&gt;feature
-  strings&lt;/a&gt;. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;A DOM application can use the &lt;dfn
-  title=&quot;hasFeature&quot;&gt;&lt;code&gt;hasFeature(&lt;var title=&quot;&quot;&gt;feature&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;version&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the
-  &lt;code&gt;DOMImplementation&lt;/code&gt; interface with parameter values
-  &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; (respectively)
-  to determine whether or not this module is supported by the
-  implementation. In addition to the feature string &quot;&lt;code
-  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, the feature string &quot;&lt;code
-  title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (with version string &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) can
-  be used to check if the implementation supports XHTML. User agents
-  should respond with a true value when the &lt;code&gt;hasFeature&lt;/code&gt;
-  method is queried with these values. Authors are cautioned, however,
-  that UAs returning true might not be perfectly compliant, and that
-  UAs returning false might well have support for features in this
-  specification; in general, therefore, use of this method is
-  discouraged.&lt;/p&gt;
-
-  &lt;p&gt;The values &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code
-  title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (both with version &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) should
-  also be supported in the context of the &lt;code&gt;getFeature()&lt;/code&gt;
-  and &lt;code&gt;isSupported()&lt;/code&gt; methods, as defined by DOM3 Core.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The interfaces defined in this specification are not
-  always supersets of the interfaces defined in DOM2 HTML; some
-  features that were formerly deprecated, poorly supported, rarely
-  used or considered unnecessary have been removed. Therefore it is
-  not guaranteed that an implementation that supports &quot;&lt;code
-  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code
-  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.&lt;/p&gt;
-
-
-
-
-  &lt;h3&gt;&lt;dfn&gt;DOM tree accessors&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;html&lt;/code&gt; element&lt;/dfn&gt; of a document is the
-  document's root element, if there is one and it's an
-  &lt;code&gt;html&lt;/code&gt; element, or null otherwise.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;head&lt;/code&gt; element&lt;/dfn&gt; of a document is the
-  first &lt;code&gt;head&lt;/code&gt; element that is a child of &lt;span&gt;the
-  &lt;code&gt;html&lt;/code&gt; element&lt;/span&gt;, if there is one, or null
-  otherwise.&lt;/p&gt;
-
-
-  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;title&lt;/code&gt; element&lt;/dfn&gt; of a document is the
-  first &lt;code&gt;title&lt;/code&gt; element in the document (in tree order), if
-  there is one, or null otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=&quot;document.title&quot;
-  title=&quot;dom-document-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute must,
-  on getting, run the following algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;root element&lt;/span&gt; is an &lt;code&gt;svg&lt;/code&gt;
-   element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
-   namespace, and the user agent supports SVG, then the getter must
-   return the value that would have been returned by the DOM attribute
-   of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt;
-   interface.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, it must return a concatenation of the data of all
-   the child &lt;span title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; of &lt;span&gt;the
-   &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt;, in tree order, or the empty
-   string if &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is
-   null.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;On setting, the following algorithm must be run:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;root element&lt;/span&gt; is an &lt;code&gt;svg&lt;/code&gt;
-   element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
-   namespace, and the user agent supports SVG, then the setter must
-   defer to the setter for the DOM attribute of the same name on the
-   &lt;code&gt;SVGDocument&lt;/code&gt; interface. Stop the algorithm
-   here.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;If &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is null and
-   &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; is null, then the
-   attribute must do nothing. Stop the algorithm here.&lt;/li&gt;
-
-   &lt;li&gt;If &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is null, then a
-   new &lt;code&gt;title&lt;/code&gt; element must be created and appended to
-   &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt;.&lt;/li&gt;
-
-   &lt;li&gt;The children of &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; (if
-   any) must all be removed.&lt;/li&gt;
-
-   &lt;li&gt;A single &lt;code&gt;Text&lt;/code&gt; node whose data is the new value
-   being assigned must be appended to &lt;span&gt;the &lt;code&gt;title&lt;/code&gt;
-   element&lt;/span&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;The &lt;code title=&quot;dom-document-title&quot;&gt;title&lt;/code&gt; attribute on
-  the &lt;code&gt;HTMLDocument&lt;/code&gt; interface should shadow the attribute
-  of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface when the
-  user agent supports both HTML and SVG.&lt;/p&gt;
-
-
-  &lt;p&gt;&lt;dfn&gt;The body element&lt;/dfn&gt; of a document is the first child of
-  &lt;span&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/span&gt; that is either a
-  &lt;code&gt;body&lt;/code&gt; element or a &lt;code&gt;frameset&lt;/code&gt; element. If
-  there is no such element, it is null. If the body element is null,
-  then when the specification requires that events be fired at &quot;the
-  body element&quot;, they must instead be fired at the
-  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-body&quot;&gt;&lt;code&gt;body&lt;/code&gt;&lt;/dfn&gt;
-  attribute, on getting, must return &lt;span&gt;the body element&lt;/span&gt; of
-  the document (either a &lt;code&gt;body&lt;/code&gt; element, a
-  &lt;code&gt;frameset&lt;/code&gt; element, or null). On setting, the following
-  algorithm must be run:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;If the new value is not a &lt;code&gt;body&lt;/code&gt; or
-   &lt;code&gt;frameset&lt;/code&gt; element, then raise a
-   &lt;code&gt;HIERARCHY_REQUEST_ERR&lt;/code&gt; exception and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if the new value is the same as &lt;span&gt;the body
-   element&lt;/span&gt;, do nothing. Abort these steps.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, if &lt;span&gt;the body element&lt;/span&gt; is not null, then
-   replace that element with the new value in the DOM, as if the root
-   element's &lt;code title=&quot;&quot;&gt;replaceChild()&lt;/code&gt; method had been
-   called with the new value and &lt;span title=&quot;the body element&quot;&gt;the
-   incumbent body element&lt;/span&gt; as its two arguments respectively,
-   then abort these steps.&lt;/li&gt;
-
-   &lt;li&gt;Otherwise, the &lt;span&gt;the body element&lt;/span&gt; is null. Append
-   the new value to the root element.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;!--XXX
-    <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp">http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp</A>
-    search for ::GetBody ::SetBody
-    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp</A>
-    search for ::setBody
-    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp</A>
-    search for ::body
-  --&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-images&quot;&gt;&lt;code&gt;images&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-  &lt;code&gt;img&lt;/code&gt; elements.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-embeds&quot;&gt;&lt;code&gt;embeds&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-  &lt;code&gt;embed&lt;/code&gt; elements.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-plugins&quot;&gt;&lt;code&gt;plugins&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the same object as that returned by the &lt;code
-  title=&quot;dom-document-embeds&quot;&gt;embeds&lt;/code&gt; attribute.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-links&quot;&gt;&lt;code&gt;links&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;a&lt;/code&gt;
-  elements with &lt;code title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt;
-  attributes and &lt;code&gt;area&lt;/code&gt; elements with &lt;code
-  title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attributes.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-forms&quot;&gt;&lt;code&gt;forms&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-  &lt;code&gt;form&lt;/code&gt; elements.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-anchors&quot;&gt;&lt;code&gt;anchors&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;a&lt;/code&gt;
-  elements with &lt;code title=&quot;attr-a-name&quot;&gt;name&lt;/code&gt; attributes.&lt;/p&gt;&lt;!-- XXX note that such elements are
-  non-conforming --&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-scripts&quot;&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
-  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-  &lt;code&gt;script&lt;/code&gt; elements.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-getElementsByName&quot;&gt;&lt;code&gt;getElementsByName(&lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
-  containing all the &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;applet&lt;/code&gt;,
-  &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;, &lt;!-- frame? frameset?
-  XXX--&gt;&lt;code&gt;iframe&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;,
-  &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;,&lt;!-- param?
-  XXX--&gt; &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in
-  that document that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose
-  value is equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt; argument.&lt;/p&gt; &lt;!-- XXX what about XHTML? --&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-document-getElementsByClassName&quot;&gt;&lt;code&gt;getElementsByClassName(&lt;var
-  title=&quot;&quot;&gt;classNames&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string that
-  contains an &lt;span&gt;unordered set of unique space-separated
-  tokens&lt;/span&gt; representing classes. When called, the method must
-  return a live &lt;code&gt;NodeList&lt;/code&gt; object containing all the
-  elements in the document that have all the classes specified in that
-  argument, having obtained the classes by &lt;span title=&quot;split a string
-  on spaces&quot;&gt;splitting a string on spaces&lt;/span&gt;. If there are no
-  tokens specified in the argument, then the method must return an
-  empty &lt;code&gt;NodeList&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-getElementsByClassName&quot;&gt;&lt;code&gt;getElementsByClassName()&lt;/code&gt;&lt;/dfn&gt;
-  method on the &lt;code&gt;HTMLElement&lt;/code&gt; interface must return a live
-  &lt;code&gt;NodeList&lt;/code&gt; with the nodes that the
-  &lt;code&gt;HTMLDocument&lt;/code&gt; &lt;code
-  title=&quot;dom-document-getElementsByClassName&quot;&gt;getElementsByClassName()&lt;/code&gt;
-  method would return when passed the same argument(s), excluding any
-  elements that are not descendants of the &lt;code&gt;HTMLElement&lt;/code&gt;
-  object on which the method was invoked.&lt;/p&gt;
-
-  &lt;p&gt;HTML, SVG, and MathML elements define which classes they are in
-  by having an attribute in the per-element partition with the name
-  &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; containing a space-separated list of
-  classes to which the element belongs. Other specifications may also
-  allow elements in their namespaces to be labeled as being in
-  specific classes. UAs must not assume that all attributes of the
-  name &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; for elements in any namespace work
-  in this way, however, and must not assume that such attributes, when
-  used as global attributes, label other elements as being in specific
-  classes.&lt;/p&gt;
-
-  &lt;div class=&quot;example&quot;&gt;
-
-   &lt;p&gt;Given the following XHTML fragment:&lt;/p&gt;
-
-   &lt;pre&gt;&lt;div id=&quot;example&quot;&gt;
- &lt;p id=&quot;p1&quot; class=&quot;aaa bbb&quot;/&gt;
- &lt;p id=&quot;p2&quot; class=&quot;aaa ccc&quot;/&gt;
- &lt;p id=&quot;p3&quot; class=&quot;bbb ccc&quot;/&gt;
-&lt;/div&gt;&lt;/pre&gt;
-
-   &lt;p&gt;A call to
-   &lt;code&gt;document.getElementById('example').getElementsByClassName('aaa')&lt;/code&gt;
-   would return a &lt;code&gt;NodeList&lt;/code&gt; with the two paragraphs
-   &lt;code&gt;p1&lt;/code&gt; and &lt;code&gt;p2&lt;/code&gt; in it.&lt;/p&gt;
-
-   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('ccc&nbsp;bbb')&lt;/code&gt;
-   would only return one node, however, namely &lt;code&gt;p3&lt;/code&gt;. A call
-   to
-   &lt;code&gt;document.getElementById('example').getElementsByClassName('bbb&nbsp;&nbsp;ccc&nbsp;')&lt;/code&gt;
-   would return the same thing.&lt;/p&gt;
-
-   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('aaa,bbb')&lt;/code&gt; would
-   return no nodes; none of the elements above are in the &quot;aaa,bbb&quot;
-   class.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-&lt;!-- XXX
-&gt;         * xGetParentElementByClassName(rootElement, className, tagName) -
-&gt; Navigates upwards until we hit a parent element with the given class name and
-&gt; optional tag name.
---&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-document-dir&quot;&gt;dir&lt;/code&gt;
-  attribute on the &lt;code&gt;HTMLDocument&lt;/code&gt; interface is defined
-  along with the &lt;code title=&quot;attr-dir&quot;&gt;dir&lt;/code&gt; content
-  attribute.&lt;/p&gt;
-
-
-
-  &lt;h3&gt;&lt;dfn&gt;Dynamic markup insertion&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;code title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt;
-  family of methods and the &lt;code
-  title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/code&gt; family of DOM attributes
-  enable script authors to dynamically insert markup into the
-  document.&lt;/p&gt;
-
-  &lt;p class=&quot;issue&quot;&gt;bz argues that innerHTML should be called something
-  else on XML documents and XML elements. Is the sanity worth the
-  migration pain?&lt;/p&gt;
-
-  &lt;p&gt;Because these APIs interact with the parser, their behavior
-  varies depending on whether they are used with &lt;span&gt;HTML
-  documents&lt;/span&gt; (and the &lt;span&gt;HTML parser&lt;/span&gt;) or XHTML in
-  &lt;span&gt;XML documents&lt;/span&gt; (and the &lt;span&gt;XML parser&lt;/span&gt;). The
-  following table cross-references the various versions of these
-  APIs.&lt;/p&gt;
-
   &lt;table&gt;
-   &lt;thead&gt;
+   &lt;thead&gt;      
     &lt;tr&gt;
-     &lt;td&gt;&lt;/td&gt;
-     &lt;th&gt;&lt;dfn title=&quot;dom-document-write&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;&lt;/th&gt;
-     &lt;th&gt;&lt;dfn title=&quot;dom-innerHTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt;&lt;/th&gt;
-    &lt;/tr&gt;
-   &lt;/thead&gt;
+     &lt;th&gt;Attribute
+     &lt;th&gt;Component
+     &lt;th&gt;Getter Condition
+     &lt;th&gt;Prefix
+     &lt;th&gt;Suffix
+     &lt;th&gt;Setter Preprocessor
+     &lt;th&gt;Setter Condition
    &lt;tbody&gt;
     &lt;tr&gt;
-     &lt;th&gt;For documents that are &lt;span&gt;HTML documents&lt;/span&gt;&lt;/th&gt;
-     &lt;td&gt;&lt;span title=&quot;dom-document-write-HTML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt; in HTML&lt;/span&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;span title=&quot;dom-innerHTML-HTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt; in HTML&lt;/span&gt;&lt;/td&gt;
-    &lt;/tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-protocol&quot;&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;scheme&gt;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
+     &lt;td&gt;Remove all trailing U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;) characters
+     &lt;td&gt;The new value is not the empty string
     &lt;tr&gt;
-     &lt;th&gt;For documents that are &lt;span&gt;XML documents&lt;/span&gt;&lt;/th&gt;
-     &lt;td&gt;&lt;span title=&quot;dom-document-write-XML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt; in XML&lt;/span&gt;&lt;/td&gt;
-     &lt;td&gt;&lt;span title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt; in XML&lt;/span&gt;&lt;/td&gt;
-    &lt;/tr&gt;
-   &lt;/tbody&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-host&quot;&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;span&gt;&lt;hostport&gt;&lt;/span&gt;
+     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-hostname&quot;&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;host&gt;/&lt;ihost&gt;
+     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;Remove all leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) characters
+     &lt;td&gt;&mdash;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-port&quot;&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;port&gt;
+     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;Remove any characters in the new value that are not in the range U+0030 DIGIT ZERO .. U+0039 DIGIT NINE.
+         If the resulting string is empty, set it to a single U+0030 DIGIT ZERO character ('0').
+     &lt;td&gt;&mdash;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-pathname&quot;&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;abs_path&gt;
+     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical
+     &lt;td&gt;&mdash;
+     &lt;td&gt;&mdash;
+     &lt;td&gt;If it has no leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) character, prepend a U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) character to the new value
+     &lt;td&gt;&mdash;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-search&quot;&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;query&gt;
+     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical
+     &lt;td&gt;U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
+     &lt;td&gt;&mdash;
+     &lt;td&gt;Remove one leading U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;) character, if any
+     &lt;td&gt;&mdash;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;dfn title=&quot;dom-uda-hash&quot;&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;
+     &lt;td&gt;&lt;fragment&gt;
+     &lt;td&gt;Fragment identifier is longer than zero characters
+     &lt;td&gt;U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
+     &lt;td&gt;&mdash;
+     &lt;td&gt;Remove one leading U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;) character, if any
+     &lt;td&gt;&mdash;
   &lt;/table&gt;
 
-  &lt;p&gt;Regardless of the parsing mode, the &lt;dfn
-  title=&quot;dom-document-writeln&quot;&gt;&lt;code&gt;document.writeln(...)&lt;/code&gt;&lt;/dfn&gt;
-  method must call the &lt;code
-  title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt; method with the
-  same argument(s), and then call the &lt;code
-  title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt; method with, as
-  its argument, a string consisting of a single line feed character
-  (U+000A).&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn&gt;&lt;hostport&gt;&lt;/dfn&gt; component is defined as being the
+  &lt;host&gt;/&lt;ihost&gt; component, followed by a colon and the
+  &lt;port&gt; component, but with the colon and &lt;port&gt;
+  component omitted if the given port matches the default port for the
+  protocol given by the &lt;scheme&gt; component.&lt;/p&gt;
 
-
-  &lt;h4&gt;Controlling the input stream&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-open&quot;&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt;
-  method comes in several variants with different numbers of
-  arguments.&lt;/p&gt;
-
-  &lt;p&gt;When called with two or fewer arguments, the method must act as
-  follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; be the value of the first
-   argument, if there is one, or &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;
-   otherwise.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second
-   argument and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
-   --&gt;, and false otherwise.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!-- XXX xref
-    --&gt; that isn't a &lt;span&gt;script-created parser&lt;/span&gt;, and the
-    &lt;span&gt;insertion point&lt;/span&gt; associated with that parser's
-    &lt;span&gt;input stream&lt;/span&gt; is not undefined (that is, it
-    &lt;em&gt;does&lt;/em&gt; point to somewhere in the input stream), then the
-    method does nothing. Abort these steps and return the
-    &lt;code&gt;Document&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;This basically causes &lt;code
-    title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; to be ignored
-    when it's called in an inline script found during the parsing of
-    data sent over the network, while still letting it have an effect
-    when called asynchronously or on a document that is itself being
-    spoon-fed using these APIs.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p class=&quot;big-issue&quot;&gt;onbeforeunload, onunload, reset timers, empty event queue, kill any pending transactions, XMLHttpRequests, etc&lt;/p&gt;&lt;/li&gt;
-   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20{%20f%20%3D%20document.getElementsByTagName(%27iframe%27)[0]%3B%20d%20%3D%20f.contentDocument%3B%20}%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.body.bgColor%3D%27red%27%22%20value%3D%22color%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22f.style.border%3D%27lime%20solid%27%22%20value%3D%22color%20frame%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3Etest%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setInterval(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%20500)%3C%2Fscript%3E%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E%0A --&gt;
-
-   &lt;li&gt;&lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
-   xref--&gt;, then stop that parser, and throw away any pending content
-   in the input stream. &lt;span class=&quot;big-issue&quot;&gt;what about if it
-   doesn't, because it's either like a text/plain, or Atom, or PDF, or
-   XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;!-- XXX see
-   also innerHTML in HTML --&gt;
-
-   &lt;li&gt;&lt;p&gt;Remove all child nodes of the document.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Change the &lt;span&gt;document's character encoding&lt;/span&gt; to
-   UTF-16.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Create a new &lt;span&gt;HTML parser&lt;/span&gt; and associate it with
-   the document. This is a &lt;dfn&gt;script-created parser&lt;/dfn&gt; (meaning
-   that it can be closed by the &lt;code
-   title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; and &lt;code
-   title=&quot;dom-document-close&quot;&gt;document.close()&lt;/code&gt; methods, and
-   that the tokeniser will wait for an explicit call to &lt;code
-   title=&quot;dom-document-close&quot;&gt;document.close()&lt;/code&gt; before emitting
-   an end-of-file token).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;Mark the document as being an &lt;span title=&quot;HTML documents&quot;&gt;HTML
-   document&lt;/span&gt; (it might already be so-marked).&lt;/li&gt;
-
-   &lt;!-- text/plain handling --&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; does
-   not have the value &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;&lt;!-- XXX matched how?
-   --&gt;, then act as if the tokeniser had emitted a &lt;code&gt;pre&lt;/code&gt;
-   element start tag, then set the &lt;span&gt;HTML parser&lt;/span&gt;'s
-   &lt;span&gt;tokenisation&lt;/span&gt; stage's &lt;span&gt;content model flag&lt;/span&gt;
-   to &lt;em&gt;PLAINTEXT&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
-
-    &lt;ol&gt;
-
-     &lt;li&gt;Remove all the entries in the &lt;span&gt;browsing context&lt;/span&gt;'s
-     &lt;span&gt;session history&lt;/span&gt; after the &lt;span&gt;current entry&lt;/span&gt;
-     in its &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;History&lt;/code&gt; object&lt;/li&gt;
-
-     &lt;li&gt;Remove any earlier entries that share the same
-     &lt;code&gt;Document&lt;/code&gt;&lt;/li&gt;
-
-     &lt;li&gt;Add a new entry just before the last entry that is associated
-     with the text that was parsed by the previous parser associated
-     with the &lt;code&gt;Document&lt;/code&gt; object, as well as the state of
-     the document at the start of these steps. (This allows the user
-     to step backwards in the session history to see the page before
-     it was blown away by the &lt;code
-     title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; call.)&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Finally, set the &lt;span&gt;insertion point&lt;/span&gt; to point at
-   just before the end of the &lt;span&gt;input stream&lt;/span&gt; (which at this
-   point will be empty).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; on which the method was
-   invoked.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;We shouldn't hard-code &lt;code&gt;text/plain&lt;/code&gt;
-  there. We should do it some other way, e.g. hand off to the section
-  on content-sniffing and handling of incoming data streams, the part
-  that defines how this all works when stuff comes over the
-  network.&lt;/p&gt;
-
-  &lt;!-- XXX Should we support XML/XHTML as a type to that method? --&gt;
-
-  &lt;p&gt;When called with three or more arguments, the &lt;code
-  title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method on the
-  &lt;code&gt;HTMLDocument&lt;/code&gt; object must call the &lt;code
-  title=&quot;dom-open&quot;&gt;open()&lt;/code&gt; method on the &lt;code&gt;Window&lt;/code&gt;
-  interface of the object returned by the &lt;code
-  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
-  object, with the same arguments as the original call to the &lt;code
-  title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method, and return whatever
-  that method returned. If the &lt;code
-  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
-  object is null, then the method must raise an
-  &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-document-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
-  method must do nothing if there is no &lt;span&gt;script-created
-  parser&lt;/span&gt; associated with the document. If there is such a
-  parser, then, when the method is called, the user agent must insert
-  an &lt;span&gt;explicit &quot;EOF&quot; character&lt;/span&gt; at the &lt;span&gt;insertion
-  point&lt;/span&gt; of the parser's &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
-
-
-  &lt;h4&gt;Dynamic markup insertion in HTML&lt;/h4&gt;
-
-  &lt;p&gt;In HTML, the &lt;dfn
-  title=&quot;dom-document-write-HTML&quot;&gt;&lt;code&gt;document.write(...)&lt;/code&gt;&lt;/dfn&gt;
-  method must act as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the &lt;span&gt;insertion point&lt;/span&gt; is undefined, the &lt;code
-    title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method must be called
-    (with no arguments) on the &lt;code title=&quot;Document&quot;&gt;document&lt;/code&gt;
-    object. The &lt;span&gt;insertion point&lt;/span&gt; will point at just before
-    the end of the (empty) &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The string consisting of the concatenation of all the arguments
-    to the method must be inserted into the &lt;span&gt;input
-    stream&lt;/span&gt;&lt;!-- XXX xref --&gt; just before the &lt;span&gt;insertion
-    point&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If there is &lt;span title=&quot;the script that will execute as soon
-    as the parser resumes&quot;&gt;a script that will execute as soon as the
-    parser resumes&lt;/span&gt;, then the method must now return without
-    further processing of the &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Otherwise, the tokeniser must process the characters that were
-    inserted, one at a time, processing resulting tokens as they are
-    emitted, and stopping when the tokeniser reaches the insertion
-    point or when the processing of the tokeniser is aborted by the
-    tree construction stage (this can happen if a &lt;code&gt;script&lt;/code&gt;
-    start tag token is emitted by the tokeniser).
-
-    &lt;p class=&quot;note&quot;&gt;If the &lt;code
-    title=&quot;dom-document-write-HTML&quot;&gt;document.write()&lt;/code&gt; method was
-    called from script executing inline (i.e. executing because the
-    parser parsed a set of &lt;code&gt;script&lt;/code&gt; tags), then this is a
-    &lt;a href=&quot;#nestedParsing&quot;&gt;reentrant invocation of the
-    parser&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Finally, the method must return.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;In HTML, the &lt;dfn
-  title=&quot;dom-innerHTML-HTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute of all &lt;code&gt;HTMLElement&lt;/code&gt; and
-  &lt;code&gt;HTMLDocument&lt;/code&gt; nodes returns a serialization of the
-  node's children using the &lt;span&gt;HTML syntax&lt;/span&gt;&lt;!-- XXX xref
-  --&gt;. On setting, it replaces the node's children with new nodes that
-  result from parsing the given value. The formal definitions
-  follow.&lt;/p&gt;
-
-  &lt;p&gt;On getting, the &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt;
-  DOM attribute must return the result of running the &lt;span&gt;HTML
-  fragment serialization algorithm&lt;/span&gt; on the node.&lt;/p&gt;
-
-  &lt;p&gt;On setting, if the node is a document, the &lt;code
-  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute must run
-  the following algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
-    xref--&gt;, then stop that parser, and throw away any pending content
-    in the input stream. &lt;span class=&quot;big-issue&quot;&gt;what about if it
-    doesn't, because it's either like a text/plain, or Atom, or PDF,
-    or XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;!-- XXX see
-    also document.open() --&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose
-    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is
-    being set.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Create a new &lt;span&gt;HTML parser&lt;/span&gt;, in its initial state,
-    and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-&lt;!-- redundant, the document is forcibly already so labeled if we get here
-   &lt;li&gt;
-
-    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
-    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
---&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Place into the &lt;span&gt;input stream&lt;/span&gt; for the &lt;span&gt;HTML
-    parser&lt;/span&gt; just created the string being assigned into the
-    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Start the parser and let it run until it has consumed all the
-    characters just inserted into the input stream. (The
-    &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements
-    and a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event will have fired
-    on &lt;span title=&quot;the body element&quot;&gt;its body element&lt;/span&gt;.)&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;Otherwise, if the node is an element, then setting the &lt;code
-  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute must cause
-  the following algorithm to run instead:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Invoke the &lt;span&gt;HTML fragment parsing algorithm&lt;/span&gt;, with
-    the element whose &lt;code
-    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is being set
-    as the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; element, and the string being
-    assigned into the &lt;code
-    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute as the &lt;var
-    title=&quot;&quot;&gt;input&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the
-    result of this algorithm.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Remove the children of the element whose &lt;code
-    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is being
-    set.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
-    title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of the &lt;code&gt;Element&lt;/code&gt; node
-    whose &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute
-    is being set.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in
-    &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target
-    document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the
-    node whose &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt;
-    attribute is being set, preserving their order.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
-  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
-  are inserted.&lt;/p&gt;
-
-  &lt;!-- XXX must make sure we spec that innerHTML causes mutation
-  events to fire, but document.write() doesn't. (the latter is already
-  req-stated in the parser section, btw) --&gt;
-
-  &lt;!-- <A HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp">http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp</A> --&gt;
-  &lt;!-- <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879">http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879</A>
-       note script execution disabled
-       <A HREF="http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308">http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242</A>
-       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742</A>
-   --&gt;
-
-
-  &lt;h4&gt;Dynamic markup insertion in XML&lt;/h4&gt;
-
-  &lt;p&gt;In an XML context, the &lt;dfn
-  title=&quot;dom-document-write-XML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;
-  method must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
-
 &lt;!--
-  For XHTML: content must be well-formed. Where does
-  it insert? Immediately after the script that called document.write()?&lt;/p&gt;
-  how do we handle async scripts vs sync scripts?
-
-Consider:
-data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ document.write('&lt;foo&gt;Test&lt;/foo&gt;'); ]]&gt;&lt;/script&gt;
-data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ alert('test'); alert(document.write); try { document.write('&lt;foo&gt;Test&lt;/foo&gt;'); alert(document.childNodes.length); } catch (e) { alert(e); } ]]&gt;&lt;/script&gt;
-
+  <A HREF="http://www.hixie.ch/tests/adhoc/dom/level0/location/components/">http://www.hixie.ch/tests/adhoc/dom/level0/location/components/</A>
+  <A HREF="http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp">http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp</A>
+  <A HREF="http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722">http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722</A>
 --&gt;
 
-  &lt;p&gt;On the other hand, however, the &lt;dfn
-  title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is
-  indeed usable in an XML context.&lt;/p&gt;
 
-  &lt;p&gt;In an XML context, the &lt;code
-  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on
-  &lt;code&gt;HTMLElement&lt;/code&gt;s must return a string in the form of an &lt;a
-  href=&quot;<A HREF="http://www.w3.org/TR/xml/#wf-entities">http://www.w3.org/TR/xml/#wf-entities</A>&quot;&gt;internal general parsed
-  entity&lt;/a&gt;, and on &lt;code&gt;HTMLDocument&lt;/code&gt;s must return a string
-  in the form of a &lt;a
-  href=&quot;<A HREF="http://www.w3.org/TR/xml/#sec-well-formed">http://www.w3.org/TR/xml/#sec-well-formed</A>&quot;&gt;document
-  entity&lt;/a&gt;. The string returned must be XML namespace-well-formed
-  and must be an isomorphic serialization of all of that node's child
-  nodes, in document order. User agents may adjust prefixes and
-  namespace declarations in the serialization (and indeed might be
-  forced to do so in some cases to obtain namespace-well-formed
-  XML). For the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
-  attribute on &lt;code&gt;HTMLElement&lt;/code&gt; objects, if any of the
-  elements in the serialization are in no namespace, the default
-  namespace in scope for those elements must be explicitly declared as
-  the empty string.&lt;!-- because otherwise round-tripping might break
-  since it'll pick up the surrounding default ns when setting --&gt;
-  (This doesn't apply to the &lt;code
-  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute on
-  &lt;code&gt;HTMLDocument&lt;/code&gt; objects.) &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt; &lt;a
-  href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;If any of the following cases are found in the DOM being
-  serialized, the user agent must raise an
-  &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception:&lt;/p&gt;
 
-  &lt;ul&gt;
-
-   &lt;li&gt;A &lt;code&gt;Document&lt;/code&gt; node with no child element nodes.&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;DocumentType&lt;/code&gt; node that has an external subset
-   public identifier or an external subset system identifier that
-   contains both a U+0022 QUOTATION MARK ('&quot;') and a U+0027 APOSTROPHE
-   (&quot;'&quot;).&lt;/li&gt;
-
-   &lt;li&gt;A node with a prefix or local name containing a U+003A COLON
-   (&quot;:&quot;).&lt;/li&gt;
-
-   &lt;li&gt;An &lt;code&gt;Attr&lt;/code&gt; node, &lt;code&gt;Text&lt;/code&gt; node,
-   &lt;code&gt;CDATASection&lt;/code&gt; node, &lt;code&gt;Comment&lt;/code&gt; node, or
-   &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains
-   characters that are not matched by the XML &lt;code
-   title=&quot;&quot;&gt;Char&lt;/code&gt; production. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;CDATASection&lt;/code&gt; node whose data contains the string
-   &quot;&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;&quot;.&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;Comment&lt;/code&gt; node whose data contains two adjacent
-   U+002D HYPHEN-MINUS (-) characters or ends with such a
-   character.&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is
-   the string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
-   ASCII --&gt;.&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name
-   contains a U+003A COLON (&quot;:&quot;).&lt;/li&gt;
-
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains
-   the string &quot;&lt;code title=&quot;&quot;&gt;?&gt;&lt;/code&gt;&quot;.&lt;/li&gt;
-
-  &lt;/ul&gt;
-
-  &lt;p class=&quot;note&quot;&gt;These are the only ways to make a DOM
-  unserializable. The DOM enforces all the other XML constraints; for
-  example, trying to set an attribute with a name that contains an
-  equals sign (=) will raised an &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt;
-  exception.&lt;/p&gt;
-
-  &lt;p&gt;On setting, in an XML context, the &lt;code
-  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on
-  &lt;code&gt;HTMLElement&lt;/code&gt;s and &lt;code&gt;HTMLDocument&lt;/code&gt;s must run
-  the following algorithm:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The user agent must create a new &lt;span&gt;XML parser&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
-    attribute is being set on an element, the user agent must
-    &lt;span&gt;feed the parser&lt;/span&gt; just created the string corresponding
-    to the start tag of that element, declaring all the namespace
-    prefixes that are in scope on that element in the DOM, as well as
-    declaring the default namespace (if any) that is in scope on that
-    element in the DOM.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created
-    the string being assigned into the &lt;code
-    title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
-    attribute is being set on an element, the user agent must
-    &lt;span&gt;feed the parser&lt;/span&gt; the string corresponding to the end
-    tag of that element.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the parser found a well-formedness error, the attribute's
-    setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception and abort
-    these steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The user agent must remove the children nodes of the node whose
-    &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute is
-    being set.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node,
-    let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the
-    document, preserving their order. Otherwise, the attribute is
-    being set on an &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new
-    children&lt;/var&gt; be the children of the document's root element,
-    preserving their order.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node,
-    let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be that
-    &lt;code&gt;Document&lt;/code&gt; node. Otherwise, the attribute is being set
-    on an &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;target
-    document&lt;/var&gt; be the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of that
-    &lt;code&gt;Element&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in
-    &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target
-    document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the
-    node whose &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
-    attribute is being set, preserving their order.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
-  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
-  are inserted.&lt;/p&gt;
-
-
-
-  &lt;h3&gt;APIs in HTML documents&lt;/h3&gt;
-  &lt;!-- XXX case-sensitivity training required here. --&gt;
-
-  &lt;p&gt;For &lt;span&gt;HTML documents&lt;/span&gt;, and for &lt;span&gt;HTML
-  elements&lt;/span&gt; in &lt;span&gt;HTML documents&lt;/span&gt;, certain APIs defined
-  in DOM3 Core become case-insensitive or case-changing, as sometimes
-  defined in DOM3 Core, and as summarized or required below. &lt;a
-  href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;This does not apply to &lt;span&gt;XML documents&lt;/span&gt; or to elements
-  that are not in the &lt;span&gt;HTML namespace&lt;/span&gt; despite being in
-  &lt;span&gt;HTML documents&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.tagName&lt;/code&gt;, &lt;code
-   title=&quot;&quot;&gt;Node.nodeName&lt;/code&gt;, and &lt;code
-   title=&quot;&quot;&gt;Node.localName&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
-    xref--&gt; and attribute names in all lowercase&lt;!-- XXX xref --&gt;,
-    regardless of the case with which they were created.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.createElement()&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this
-    method will lowercase&lt;!-- XXX xref --&gt; the argument before
-    creating the requisite element. Also, the element created must be
-    in the &lt;span&gt;HTML namespace&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
-    title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible,
-    by passing this last method a tag name in the wrong case, to
-    create an element that claims to have the tag name of an element
-    defined in this specification, but doesn't support its interfaces,
-    because it really has another tag name not accessible from the DOM
-    APIs.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttributeNode()&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;span title=&quot;HTML
-    elements&quot;&gt;HTML element&lt;/span&gt;, it must have its name
-    lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
-    title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttribute()&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;When an attribute is set on an &lt;span title=&quot;HTML elements&quot;&gt;HTML
-    element&lt;/span&gt;, the name argument must be lowercased&lt;!-- XXX xref
-    --&gt; before the element is affected.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
-    title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.getElementsByTagName()&lt;/code&gt; and &lt;code
-   title=&quot;&quot;&gt;Element.getElementsByTagName()&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;These methods (but not their namespaced counterparts) must
-    compare the given argument case-insensitively&lt;!-- XXX xref --&gt;
-    when looking at &lt;span title=&quot;HTML elements&quot;&gt;HTML elements&lt;/span&gt;,
-    and case-sensitively otherwise.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;Thus, in an &lt;span title=&quot;HTML documents&quot;&gt;HTML
-    document&lt;/span&gt; with nodes in multiple namespaces, these methods
-    will be both case-sensitive and case-insensitive at the same
-    time.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.renameNode()&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;If the new namespace is the &lt;span&gt;HTML namespace&lt;/span&gt;, then
-    the new qualified name must be lowercased before the rename takes
-    place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-   
-
-  &lt;/dl&gt;
-
-
-
-
-  &lt;h2 id=&quot;semantics&quot;&gt;Semantics and structure of HTML elements&lt;/h2&gt;
-
-  &lt;h3 id=&quot;semantics-intro&quot;&gt;Introduction&lt;/h3&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;An introduction to marking up a document.&lt;/p&gt;
-
-
   &lt;h3&gt;Common microsyntaxes&lt;/h3&gt;
 
   &lt;p&gt;There are various places in HTML that accept particular data
@@ -4666,126 +2977,1904 @@
   &lt;/ol&gt;
 
 
-  &lt;h4&gt;URLs&lt;/h4&gt;&lt;!-- XXXURL --&gt;
+  &lt;h3&gt;Common DOM interfaces&lt;/h3&gt;
 
-  &lt;div class=&quot;big-issue&quot;&gt;
+  &lt;h4&gt;Reflecting content attributes in DOM attributes&lt;/h4&gt;
 
-   &lt;p&gt;This section will do the following:&lt;/p&gt;
+  &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are
+  defined to &lt;dfn&gt;reflect&lt;/dfn&gt; a particular &lt;span&gt;content
+  attribute&lt;/span&gt;. This means that on getting, the DOM attribute
+  returns the current value of the content attribute, and on setting,
+  the DOM attribute changes the value of the content attribute to the
+  given value.&lt;/p&gt;
 
-   &lt;ul&gt;
+  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
+  algorithm --&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt;
+  attribute whose content attribute is defined to contain a URI, then
+  on getting, the DOM attribute must return the value of the content
+  attribute, resolved to an absolute URI, and on setting, must set the
+  content attribute to the specified literal value. If the content
+  attribute is absent, the DOM attribute must return the default
+  value, if the content attribute has one, or else the empty
+  string.&lt;/p&gt;
 
-    &lt;li&gt;define URL as IRI and replace all uses of URIs and IRIs in the
-    rest of the spec with URL&lt;/li&gt;
+  &lt;!-- XXXURL refer to URLs and use the &quot;resolve to absolute URL&quot;
+  algorithm --&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt;
+  attribute whose content attribute is defined to contain one or more
+  URIs, then on getting, the DOM attribute must &lt;span title=&quot;split the
+  string on spaces&quot;&gt;split the content attribute on spaces&lt;/span&gt; and
+  return the concatenation of each token URI, resolved to an absolute
+  URI, with a single U+0020 SPACE character between each URI; if the
+  content attribute is absent, the DOM attribute must return the
+  default value, if the content attribute has one, or else the empty
+  string. On setting, the DOM attribute must set the content attribute
+  to the specified literal value.&lt;/p&gt;
 
-    &lt;li&gt;define &quot;valid URL&quot; in terms of valid URIs and IRIs and replace
-    that concept through the spec to a pointer here, getting rid of
-    references to &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-    href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; whose
+  content attribute is an &lt;span&gt;enumerated attribute&lt;/span&gt;, and the
+  DOM attribute is &lt;dfn&gt;limited to only known values&lt;/dfn&gt;, then, on
+  getting, the DOM attribute must return the conforming value
+  associated with the state the attribute is in (in its canonical
+  case), or the empty string if the attribute is in a state that has
+  no associated keyword value; and on setting, if the new value
+  case-insensitively matches one of the keywords given for that
+  attribute, then the content attribute must be set to the conforming
+  value associated with the state that the attribute would be in if
+  set to the given new value, otherwise, if the new value is the empty
+  string, then the content attribute must be removed, otherwise, the
+  setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.&lt;/p&gt;
 
-    &lt;li&gt;define &quot;valid URL reference&quot; in terms of valid URI references
-    and IRI references and replace that concept through the spec to a
-    pointer here, getting rid of references to &lt;a
-    href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-    href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; outside this section&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but
+  doesn't fall into any of the above categories, then the getting and
+  setting must be done in a transparent, case-preserving manner.&lt;/p&gt;
 
-    &lt;li&gt;define how to parse URLs (maybe by deferring to RFCs)&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a boolean attribute, then on
+  getting the DOM attribute must return true if the attribute is set,
+  and false if it is absent. On setting, the content attribute must be
+  removed if the DOM attribute is set to false, and must be set to
+  have the same value as its name if the DOM attribute is set to
+  true. (This corresponds to the rules for &lt;span title=&quot;boolean
+  attribute&quot;&gt;boolean content attributes&lt;/span&gt;.)&lt;/p&gt;
 
-    &lt;li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a signed integer type
+  (&lt;code&gt;long&lt;/code&gt;) then, on getting, the content attribute must be
+  parsed according to &lt;span title=&quot;rules for parsing integers&quot;&gt;the
+  rules for parsing signed integers&lt;/span&gt;, and if that is successful,
+  the resulting value must be returned. If, on the other hand, it
+  fails, or if the attribute is absent, then the default value must be
+  returned instead, or 0 if there is no default value. On setting, the
+  given value must be converted to the shortest possible string
+  representing the number as a &lt;span&gt;valid integer&lt;/span&gt; in base ten
+  and then that string must be used as the new content attribute
+  value.&lt;/p&gt;
 
-     &lt;p&gt;define how to handle URIs that contain non-ascii characters
-     (and it's not the same as handling as IRIs, especially if the
-     character encoding of the document isn't UTF-8)&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is an &lt;em&gt;unsigned&lt;/em&gt; integer
+  type (&lt;code&gt;unsigned long&lt;/code&gt;) then, on getting, the content
+  attribute must be parsed according to &lt;span title=&quot;rules for parsing
+  non-negative integers&quot;&gt;the rules for parsing unsigned
+  integers&lt;/span&gt;, and if that is successful, the resulting value must
+  be returned. If, on the other hand, it fails, or if the attribute is
+  absent, the default value must be returned instead, or 0 if there is
+  no default value. On setting, the given value must be converted to
+  the shortest possible string representing the number as a
+  &lt;span&gt;valid non-negative integer&lt;/span&gt; in base ten and then that
+  string must be used as the new content attribute value.&lt;/p&gt;
 
-     &lt;p&gt;First parse it (we need to define that. For some schemes it's
-     not per spec -- e.g. apparently for ftp: we should split from
-     hosts on ';'). Then handle each bit as follows:&lt;/p&gt;
-     &lt;p&gt;scheme: no further processing (treat %-escaped characters literally, treat unicode characters as unicode characters).&lt;/p&gt;
-     &lt;p&gt;host: expand %-encoded bytes to Unicode as UTF-8, treat unicode characters as per IDN.&lt;/p&gt;
-     &lt;p&gt;path: don't expand %-encoded bytes. Re-encode unicode to UTF-8 and percent-encode.&lt;/p&gt;
-     &lt;p&gt;query: don't expand %-encoded bytes. Re-encode unicode to the page's encoding. Do not percent-encode.&lt;/p&gt;
+  &lt;p&gt;If a reflecting DOM attribute is an unsigned integer type
+  (&lt;code&gt;unsigned long&lt;/code&gt;) that is &lt;dfn&gt;limited to only positive
+  non-zero numbers&lt;/dfn&gt;, then the behavior is similar to the previous
+  case, but zero is not allowed. On getting, the content attribute
+  must first be parsed according to &lt;span title=&quot;rules for parsing
+  non-negative integers&quot;&gt;the rules for parsing unsigned
+  integers&lt;/span&gt;, and if that is successful, the resulting value must
+  be returned. If, on the other hand, it fails, or if the attribute is
+  absent, the default value must be returned instead, or 1 if there is
+  no default value. On setting, if the value is zero, the user agent
+  must fire an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. Otherwise, the
+  given value must be converted to the shortest possible string
+  representing the number as a &lt;span&gt;valid non-negative integer&lt;/span&gt;
+  in base ten and then that string must be used as the new content
+  attribute value.&lt;/p&gt;
 
-    &lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
+  (&lt;code&gt;float&lt;/code&gt;) and the content attribute is defined to contain
+  a time offset, then, on getting, the content attribute must be
+  parsed according to &lt;span title=&quot;rules for parsing time offsets&quot;&gt;the
+  rules for parsing time offsets&lt;/span&gt;, and if that is successful, the
+  resulting value, in seconds, must be returned. If that fails, or if
+  the attribute is absent, the default value must be returned, or the
+  not-a-number value (NaN) if there is no default value. On setting,
+  the given value, interpreted as a time offset in seconds, must be
+  converted to a string using the &lt;span&gt;time offset serialization
+  rules&lt;/span&gt;, and that string must be used as the new content
+  attribute value.&lt;/p&gt;
 
-    &lt;li&gt;define how to resolve relative URLs in markup attributes
-    (using XMLBase as defined elsewhere right now)&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is a floating point number type
+  (&lt;code&gt;float&lt;/code&gt;) and it doesn't fall into one of the earlier
+  categories, then, on getting, the content attribute must be parsed
+  according to &lt;span title=&quot;rules for parsing floating point number
+  values&quot;&gt;the rules for parsing floating point number values&lt;/span&gt;,
+  and if that is successful, the resulting value must be returned. If,
+  on the other hand, it fails, or if the attribute is absent, the
+  default value must be returned instead, or 0.0 if there is no
+  default value. On setting, the given value must be converted to the
+  shortest possible string representing the number as a &lt;span&gt;valid
+  floating point number&lt;/span&gt; in base ten and then that string must
+  be used as the new content attribute value.&lt;/p&gt;
 
-    &lt;li&gt;define how to resolve relative URLs in APIs, using the
-    &lt;dfn&gt;script's base URI&lt;/dfn&gt; maybe&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute is of the type
+  &lt;code&gt;DOMTokenList&lt;/code&gt;, then on getting it must return a
+  &lt;code&gt;DOMTokenList&lt;/code&gt; object whose underlying string is the
+  element's corresponding content attribute. When the
+  &lt;code&gt;DOMTokenList&lt;/code&gt; object mutates its underlying string, the
+  content attribute must itself be immediately mutated. When the
+  attribute is absent, then the string represented by the
+  &lt;code&gt;DOMTokenList&lt;/code&gt; object is the empty string; when the
+  object mutates this empty string, the user agent must first add the
+  corresponding content attribute, and then mutate that attribute
+  instead. &lt;code&gt;DOMTokenList&lt;/code&gt; attributes are always
+  read-only. The same &lt;code&gt;DOMTokenList&lt;/code&gt; object must be
+  returned every time for each attribute.&lt;/p&gt;
 
-    &lt;li&gt;define what it means to resolve a relative URL when the base
-    URL doesn't have a path hierarchy (e.g. data:, javascript:,
-    about:blank URLs)&lt;/li&gt;
+  &lt;p&gt;If a reflecting DOM attribute has the type
+  &lt;code&gt;HTMLElement&lt;/code&gt;, or an interface that descends from
+  &lt;code&gt;HTMLElement&lt;/code&gt;, then, on getting, it must run the
+  following algorithm (stopping at the first point where a value is
+  returned):
 
-    &lt;li&gt;define &quot;an &lt;dfn&gt;element's base URI&lt;/dfn&gt;&quot; and make the various
-    places that talk about a base URI in the context of an element use
-    that definition&lt;/li&gt;
+  &lt;ol&gt;
 
-    &lt;li&gt;make the language used to refer to resolving a base URI
-    consistent throughout, maybe make it hyperlink to a definition
-    each time&lt;/li&gt;
+   &lt;li&gt;If the corresponding content attribute is absent, then the
+   DOM attribute must return null.&lt;/li&gt;
 
-    &lt;li&gt;define a cheap, interoperable mechanism for URL attributes and
-    anything else that relies on xml:base and the base element to
-    handle dynamic changes to those attributes and elements, possibly
-    by defining some mechanism which causes changes to be ignored in
-    some reliable way.
+   &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; be the element that the &lt;code
+   title=&quot;&quot;&gt;document.getElementById()&lt;/code&gt; method would find if it
+   was passed as its argument the current value of the corresponding
+   content attribute.&lt;/li&gt;
+
+   &lt;li&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is null, or if it is not
+   type-compatible with the DOM attribute, then the DOM attribute must
+   return null.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, it must return &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;On setting, if the given element has an &lt;code
+  title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute, then the content attribute must
+  be set to the value of that &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt;
+  attribute. Otherwise, the DOM attribute must be set to the empty
+  string.&lt;/p&gt;&lt;!-- XXX or raise an exception? --&gt;
+
+
+
+  &lt;h4&gt;Collections&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;code&gt;HTMLCollection&lt;/code&gt;,
+  &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt;, and
+  &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; interfaces represent various
+  lists of DOM nodes. Collectively, objects implementing these
+  interfaces are called &lt;dfn&gt;collections&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;When a &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; is created, a
+  filter and a root are associated with the collection.&lt;/p&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For example, when the &lt;code&gt;HTMLCollection&lt;/code&gt;
+  object for the &lt;code
+  title=&quot;dom-document-images&quot;&gt;document.images&lt;/code&gt; attribute is
+  created, it is associated with a filter that selects only
+  &lt;code&gt;img&lt;/code&gt; elements, and rooted at the root of the
+  document.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; then &lt;dfn
+  title=&quot;represented by the collection&quot;&gt;represents&lt;/dfn&gt; a
+  &lt;span&gt;live&lt;/span&gt; view of the subtree rooted at the collection's
+  root, containing only nodes that match the given filter. The view is
+  linear. In the absence of specific requirements to the contrary, the
+  nodes within the collection must be sorted in &lt;span&gt;tree
+  order&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-table-rows&quot;&gt;rows&lt;/code&gt; list is
+  not in tree order.&lt;/p&gt;
+
+  &lt;p&gt;An attribute that returns a collection must return the same
+  object every time it is retrieved.&lt;/p&gt;
+
+
+  &lt;h5&gt;HTMLCollection&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;code&gt;HTMLCollection&lt;/code&gt; interface represents a generic
+  &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; of elements.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLCollection&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;span title=&quot;dom-HTMLCollection-length&quot;&gt;length&lt;/span&gt;;
+  [IndexGetter] Element &lt;span title=&quot;dom-HTMLCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
+  [NameGetter] Element &lt;span title=&quot;dom-HTMLCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of nodes &lt;span&gt;represented by the
+  collection&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-HTMLCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
+  return null.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var
+  title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the first node
+  in the collection that matches the following requirements:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;It is an &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;applet&lt;/code&gt;,
+   &lt;code&gt;area&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, or
+   &lt;code&gt;object&lt;/code&gt; element with a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;, or,&lt;/li&gt;
+
+   &lt;li&gt;It is an &lt;span title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; of any
+   kind with an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute equal to
+   &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. (Non-HTML elements, even if they have IDs,
+   are not searched for the purposes of &lt;code
+   title=&quot;dom-HTMLCollection-namedItem&quot;&gt;namedItem()&lt;/code&gt;.)&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;If no such elements are found, then the method must return
+  null.&lt;/p&gt;
+
+
+
+  &lt;h5&gt;HTMLFormControlsCollection&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt; interface represents
+  a &lt;span title=&quot;collections&quot;&gt;collection&lt;/span&gt; of form controls.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLFormControlsCollection&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;span title=&quot;dom-HTMLFormControlsCollection-length&quot;&gt;length&lt;/span&gt;;
+  [IndexGetter] &lt;span&gt;HTMLElement&lt;/span&gt; &lt;span title=&quot;dom-HTMLFormControlsCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
+  [NameGetter] Object &lt;span title=&quot;dom-HTMLFormControlsCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLFormControlsCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of nodes &lt;span&gt;represented by the
+  collection&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLFormControlsCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
+  return null.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLFormControlsCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method must act according to the following algorithm:
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If, at the time the method is called, there is exactly one node
+   in the collection that has either an &lt;code
+   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;,
+   then return that node and stop the algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if there are no nodes in the collection that have
+   either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;, then return null and stop the algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a
+   live view of the &lt;code&gt;HTMLFormControlsCollection&lt;/code&gt; object,
+   further filtered so that the only nodes in the
+   &lt;code&gt;NodeList&lt;/code&gt; object are those that have either an &lt;code
+   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the &lt;code&gt;NodeList&lt;/code&gt; object
+   must be sorted in &lt;span&gt;tree order&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
 &lt;!--
-On Sat, 1 Mar 2008, Anne van Kesteren wrote:
-&gt;
-&gt; Note that the new base URI would only take effect once you actually did
-&gt; something with a potentially affected object. For instance, &lt;img&gt; would
-&gt; not start loading a new image if the base URI changes. &lt;img&gt;.src =
-&gt; &lt;img&gt;.getAttribute(&quot;src&quot;) could start loading a new resource however if
-&gt; the base URI changed since the initial load.
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
+--&gt;
 
-On Sat, 1 Mar 2008, Jonas Sicking wrote:
-&gt; 
-&gt; Well, that was my intention with the initial proposal. But Hixie pointed    
-&gt; out that &quot;did something&quot; is a very hard thing to define. For example on 
-&gt; a &lt;a href=&quot;...&quot;&gt;, does the user hovering the node count? Does resizing
-&gt; the window count? Does removing the node from the DOM and reinserting it
-&gt; count?
 
-On Sat, 1 Mar 2008, Maciej Stachowiak wrote:
-&gt; 
-&gt; How about requiring that the base used is the one in effect when a given
-&gt; relative URI is resolved, and define that URIs for resource-loading 
-&gt; elements are resolved at the time the relevant attribute is set or
-&gt; parsed (but for hyperlinks, at the time it is dereferenced). That is        
-&gt; easy to implement, interoperable, and reasonably predictable. It makes
-&gt; sense that changing &lt;base&gt; would affect future loads but not trigger
-&gt; reloads of already loaded or already in progress resources.
+  &lt;h5&gt;HTMLOptionsCollection&lt;/h5&gt;
 
-possibly &quot;in the event that the xml:base or base href attribute is
-changed, user agents may, whenever convenient, pretend, for the sake
-of url resolution, that it has not changed&quot;
+  &lt;p&gt;The &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; interface represents
+  a list of &lt;code&gt;option&lt;/code&gt; elements.&lt;/p&gt;
 
-possibly define &quot;base uri change notification behaviour&quot; for all
-elements with URI attributes, and then define changing base href and
-xml:base to activate that behaviour on all elements in the affected
-subtree. Also make this algorithm get called when a node from another
-document is inserted into an HTML document. (we could define that
-you're allowed to do that, in the absence of a DOM Core update)
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLOptionsCollection&lt;/dfn&gt; {
+           attribute unsigned long &lt;span title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;length&lt;/span&gt;;
+  [IndexGetter] HTMLOptionElement &lt;span title=&quot;dom-HTMLOptionsCollection-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
+  [NameGetter] Object &lt;span title=&quot;dom-HTMLOptionsCollection-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString name);
+};&lt;/pre&gt;
+
+  &lt;p&gt;On getting, the &lt;dfn
+  title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of nodes &lt;span&gt;represented by the
+  collection&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;On setting, the behavior depends on whether the new value is
+  equal to, greater than, or less than the number of nodes
+  &lt;span&gt;represented by the collection&lt;/span&gt; at that time. If the
+  number is the same, then setting the attribute must do nothing. If
+  the new value is greater, then &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; new
+  &lt;code&gt;option&lt;/code&gt; elements with no attributes and no child nodes
+  must be appended to the &lt;code&gt;select&lt;/code&gt; element on which the
+  &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; is rooted, where &lt;var
+  title=&quot;&quot;&gt;n&lt;/var&gt; is the difference between the two numbers (new
+  value minus old value). If the new value is lower, then the last
+  &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; nodes in the collection must be removed from
+  their parent nodes, where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the difference
+  between the two numbers (old value minus new value).&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Setting &lt;code
+  title=&quot;dom-HTMLOptionsCollection-length&quot;&gt;length&lt;/code&gt; never removes
+  or adds any &lt;code&gt;optgroup&lt;/code&gt; elements, and never adds new
+  children to existing &lt;code&gt;optgroup&lt;/code&gt; elements (though it can
+  remove children from them).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-HTMLOptionsCollection-item&quot;&gt;&lt;code&gt;item(&lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection. If there is no &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th node in the collection, then the method must
+  return null.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-HTMLOptionsCollection-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method must act according to the following algorithm:
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If, at the time the method is called, there is exactly one node
+   in the collection that has either an &lt;code
+   title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;, then return that node and stop the
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if there are no nodes in the collection that have
+   either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute or a &lt;code
+   title=&quot;attr-name&quot;&gt;name&lt;/code&gt; attribute equal to &lt;var
+   title=&quot;&quot;&gt;key&lt;/var&gt;, then return null and stop the algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, create a &lt;code&gt;NodeList&lt;/code&gt; object representing a
+   live view of the &lt;code&gt;HTMLOptionsCollection&lt;/code&gt; object, further
+   filtered so that the only nodes in the &lt;code&gt;NodeList&lt;/code&gt; object
+   are those that have either an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt;
+   attribute or a &lt;code title=&quot;attr-option-name&quot;&gt;name&lt;/code&gt; attribute
+   equal to &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. The nodes in the
+   &lt;code&gt;NodeList&lt;/code&gt; object must be sorted in &lt;span&gt;tree
+   order&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;Return that &lt;code&gt;NodeList&lt;/code&gt; object.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;We may want to add &lt;code&gt;add()&lt;/code&gt; and
+  &lt;code&gt;remove()&lt;/code&gt; methods here too because IE implements
+  HTMLSelectElement and HTMLOptionsCollection on the same object, and
+  so people use them almost interchangeably in the wild.&lt;/p&gt;
+
+
+  &lt;h4&gt;DOMTokenList&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;code&gt;DOMTokenList&lt;/code&gt; interface represents an interface
+  to an underlying string that consists of an &lt;span&gt;unordered set of
+  unique space-separated tokens&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Which string underlies a particular &lt;code&gt;DOMTokenList&lt;/code&gt;
+  object is defined when the object is created. It might be a content
+  attribute (e.g. the string that underlies the &lt;code
+  title=&quot;dom-classList&quot;&gt;classList&lt;/code&gt; object is the &lt;code
+  title=&quot;attr-class&quot;&gt;class&lt;/code&gt; attribute), or it might be an
+  anonymous string (e.g. when a &lt;code&gt;DOMTokenList&lt;/code&gt; object is
+  passed to an author-implemented callback in the
+  &lt;code&gt;datagrid&lt;/code&gt; APIs).&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;[&lt;span title=&quot;dom-tokenlist-toString&quot;&gt;Stringifies&lt;/span&gt;] interface &lt;dfn&gt;DOMTokenList&lt;/dfn&gt; {
+  readonly attribute unsigned long &lt;span title=&quot;dom-tokenlist-length&quot;&gt;length&lt;/span&gt;;
+  [IndexGetter] DOMString &lt;span title=&quot;dom-tokenlist-item&quot;&gt;item&lt;/span&gt;(in unsigned long index);
+  boolean &lt;span title=&quot;dom-tokenlist-has&quot;&gt;has&lt;/span&gt;(in DOMString token);
+  void &lt;span title=&quot;dom-tokenlist-add&quot;&gt;add&lt;/span&gt;(in DOMString token);
+  void &lt;span title=&quot;dom-tokenlist-remove&quot;&gt;remove&lt;/span&gt;(in DOMString token);
+  boolean &lt;span title=&quot;dom-tokenlist-toggle&quot;&gt;toggle&lt;/span&gt;(in DOMString token);
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of &lt;em&gt;unique&lt;/em&gt; tokens that
+  result from &lt;span title=&quot;split a string on spaces&quot;&gt;splitting the
+  underlying string on spaces&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-item&quot;&gt;&lt;code&gt;item(&lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must &lt;span title=&quot;split a
+  string on spaces&quot;&gt;split the underlying string on spaces&lt;/span&gt;, sort
+  the resulting list of tokens by Unicode codepoint&lt;!-- XXX that's
+  basically nonsense. What sort order do we want here? It should be
+  the cheapest one possible that is well-defined for all Unicode. --&gt;,
+  remove exact duplicates, and then return the &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt;th item in this list. If &lt;var
+  title=&quot;&quot;&gt;index&lt;/var&gt; is equal to or greater than the number of
+  tokens, then the method must return null.&lt;/p&gt;
+
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-has&quot;&gt;&lt;code&gt;has(&lt;var
+  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
+   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
+   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
+   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
+   object's underlying string.&lt;/li&gt;
+
+   &lt;li&gt;If the token indicated by &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is one of
+   the tokens in the object's underlying string then return true and
+   stop this algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, return false.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-add&quot;&gt;&lt;code&gt;add(&lt;var
+  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
+   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
+   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
+   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
+   object's underlying string.&lt;/li&gt;
+
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the
+   tokens in the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string
+   then stop the algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying
+   string is not the empty string and the last character of that
+   string is not a &lt;span&gt;space character&lt;/span&gt;, then append a U+0020
+   SPACE character to the end of that string.&lt;/li&gt;
+
+   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
+   &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-remove&quot;&gt;&lt;code&gt;remove(&lt;var
+  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
+   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
+   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, &lt;span title=&quot;remove a token from a string&quot;&gt;remove
+   the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying
+   string&lt;/span&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-tokenlist-toggle&quot;&gt;&lt;code&gt;toggle(&lt;var
+  title=&quot;&quot;&gt;token&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; argument contains any &lt;span
+   title=&quot;space character&quot;&gt;space characters&lt;/span&gt;, then raise an
+   &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt; exception and stop the
+   algorithm.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, &lt;span title=&quot;split a string on spaces&quot;&gt;split the
+   underlying string on spaces&lt;/span&gt; to get the list of tokens in the
+   object's underlying string.&lt;/li&gt;
+
+   &lt;li&gt;If the given &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; is already one of the
+   tokens in the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string
+   then &lt;span title=&quot;remove a token from a string&quot;&gt;remove the given
+   &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; from the underlying string&lt;/span&gt;, and
+   stop the algorithm, returning false.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if the &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying
+   string is not the empty string and the last character of that
+   string is not a &lt;span&gt;space character&lt;/span&gt;, then append a U+0020
+   SPACE character to the end of that string.&lt;/li&gt;
+
+   &lt;li&gt;Append the value of &lt;var title=&quot;&quot;&gt;token&lt;/var&gt; to the end of the
+   &lt;code&gt;DOMTokenList&lt;/code&gt; object's underlying string.&lt;/li&gt;
+
+   &lt;li&gt;Return true.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;Objects implementing the &lt;code&gt;DOMTokenList&lt;/code&gt; interface must
+  &lt;dfn title=&quot;dom-tokenlist-toString&quot;&gt;stringify&lt;/dfn&gt; to the object's
+  underlying string representation.&lt;/p&gt;
+
+
+  &lt;h4&gt;DOMStringMap&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;code&gt;DOMStringMap&lt;/code&gt; interface represents a set of
+  name-value pairs. When a &lt;code&gt;DOMStringMap&lt;/code&gt; object is
+  instanced, it is associated with three algorithms, one for getting
+  values from names, one for setting names to certain values, and one
+  for deleting names.&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;The names of the methods on this interface are
+  temporary and will be fixed when the Web IDL / &quot;Language Bindings
+  for DOM Specifications&quot; spec is ready to handle this case.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;DOMStringMap&lt;/dfn&gt; {
+  [NameGetter] DOMString &lt;span title=&quot;dom-stringmap-XXX1&quot;&gt;XXX1&lt;/span&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
+  [NameSetter] void &lt;span title=&quot;dom-stringmap-XXX2&quot;&gt;XXX2&lt;/span&gt;(in DOMString name, in DOMString value); &lt;!-- XXX DOMB --&gt;
+  [XXX] boolean &lt;span title=&quot;dom-stringmap-XXX3&quot;&gt;XXX3&lt;/span&gt;(in DOMString name); &lt;!-- XXX DOMB --&gt;
+};&lt;/pre&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX1&quot;&gt;&lt;code&gt;XXX1(&lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
+  getting values from names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the
+  name, and must return the corresponding value, or null if &lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt; has no corresponding value.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX2&quot;&gt;&lt;code&gt;XXX2(&lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
+  must call the algorithm for setting names to certain values, passing
+  &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;
+  as the value.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-stringmap-XXX3&quot;&gt;&lt;code&gt;XXX3(&lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must call the algorithm for
+  deleting names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name, and
+  must return true.&lt;/p&gt;
+
+
+  &lt;h4&gt;DOM feature strings&lt;/h4&gt;
+
+  &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support,
+  and for obtaining implementations of interfaces, using &lt;a
+  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&quot;&gt;feature
+  strings&lt;/a&gt;. &lt;a href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;A DOM application can use the &lt;dfn
+  title=&quot;hasFeature&quot;&gt;&lt;code&gt;hasFeature(&lt;var title=&quot;&quot;&gt;feature&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;version&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method of the
+  &lt;code&gt;DOMImplementation&lt;/code&gt; interface with parameter values
+  &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; (respectively)
+  to determine whether or not this module is supported by the
+  implementation. In addition to the feature string &quot;&lt;code
+  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, the feature string &quot;&lt;code
+  title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (with version string &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) can
+  be used to check if the implementation supports XHTML. User agents
+  should respond with a true value when the &lt;code&gt;hasFeature&lt;/code&gt;
+  method is queried with these values. Authors are cautioned, however,
+  that UAs returning true might not be perfectly compliant, and that
+  UAs returning false might well have support for features in this
+  specification; in general, therefore, use of this method is
+  discouraged.&lt;/p&gt;
+
+  &lt;p&gt;The values &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; and &quot;&lt;code
+  title=&quot;&quot;&gt;XHTML&lt;/code&gt;&quot; (both with version &quot;&lt;code&gt;5.0&lt;/code&gt;&quot;) should
+  also be supported in the context of the &lt;code&gt;getFeature()&lt;/code&gt;
+  and &lt;code&gt;isSupported()&lt;/code&gt; methods, as defined by DOM3 Core.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The interfaces defined in this specification are not
+  always supersets of the interfaces defined in DOM2 HTML; some
+  features that were formerly deprecated, poorly supported, rarely
+  used or considered unnecessary have been removed. Therefore it is
+  not guaranteed that an implementation that supports &quot;&lt;code
+  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code
+  title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.&lt;/p&gt;
+
+
+
+  &lt;h3 id=&quot;content-type-sniffing&quot;&gt;Determining the type of a resource&lt;/h3&gt;
+
+  &lt;p class=&quot;warning&quot;&gt;It is imperative that the rules in this section
+  be followed exactly. When a user agent uses different heuristics for
+  content type detection than the server expects, security problems
+  can occur. For example, if a server believes that the client will
+  treat a contributed file as an image (and thus treat it as benign),
+  but a Web browser believes the content to be HTML (and thus execute
+  any scripts contained therein), the end user can be exposed to
+  malicious content, making the user vulnerable to cookie theft
+  attacks and other cross-site scripting attacks.&lt;/p&gt;
+
+
+  &lt;h4 id=&quot;content-type&quot;&gt;Content-Type metadata&lt;/h4&gt;
+
+  &lt;p&gt;What explicit &lt;dfn title=&quot;Content-Type&quot;&gt;Content-Type
+  metadata&lt;/dfn&gt; is associated with the resource (the resource's type
+  information) depends on the protocol that was used to fetch the
+  resource.&lt;/p&gt;
+
+  &lt;p&gt;For HTTP resources, only the first Content-Type HTTP header, if
+  any, contributes any type information; the explicit type of the
+  resource is then the value of that header, interpreted as described
+  by the HTTP specifications. If the Content-Type HTTP header is
+  present but the value of the first such header cannot be interpreted
+  as described by the HTTP specifications (e.g. because its value
+  doesn't contain a U+002F SOLIDUS ('/') character), then the resource
+  has no type information (even if there are multiple Content-Type
+  HTTP headers and one of the other ones is syntactically correct). &lt;a
+  href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;For resources fetched from the file system, user agents should use
+  platform-specific conventions, e.g. operating system extension/type
+  mappings.&lt;/p&gt;
+
+  &lt;p&gt;Extensions must not be used for determining resource types for
+  resources fetched over HTTP.&lt;/p&gt;
+
+  &lt;p&gt;For resources fetched over most other protocols, e.g. FTP, there
+  is no type information.&lt;/p&gt;
+
+
+  &lt;p&gt;The &lt;dfn&gt;algorithm for extracting an encoding from a
+  Content-Type&lt;/dfn&gt;, given a string &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, is as
+  follows. It either returns an encoding or nothing.&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+   that are a case-insensitive&lt;!-- XXX ASCII--&gt; match for the word
+   'charset'. If no such match is found, return nothing.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020
+   characters that immediately follow the word 'charset' (there might
+   not be any).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the next character is not a U+003D EQUALS SIGN ('='),
+   return nothing.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020
+   characters that immediately follow the equals sign (there might not
+   be any).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Process the next character as follows:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If it is a U+0022 QUOTATION MARK ('&quot;') and there is a later
+     U+0022 QUOTATION MARK ('&quot;') in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;&lt;/dt&gt;
+
+     &lt;dt&gt;If it is a U+0027 APOSTROPHE (&quot;'&quot;) and there is a later
+     U+0027 APOSTROPHE (&quot;'&quot;) in  &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Return the string between this character and the next
+     earliest occurrence of this character.&lt;/dd&gt;
+
+
+     &lt;dt&gt;If it is an unmatched U+0022 QUOTATION MARK ('&quot;')&lt;/dt&gt;
+     &lt;dt&gt;If it is an unmatched U+0027 APOSTROPHE (&quot;'&quot;)&lt;/dt&gt;
+     &lt;dt&gt;If there is no next character&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Return nothing.&lt;/dd&gt;
+
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;&lt;p&gt;Return the string from this character to the first U+0009,
+     U+000A, U+000C, U+000D, U+0020, or U+003B character or the end of
+     &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, whichever comes first.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The above algorithm is a willful violation of the
+  HTTP specification. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;&lt;/p&gt;
+
+
+  &lt;h4&gt;Content-Type sniffing: Web pages&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;Content-Type sniffing&quot;&gt;sniffed type of a
+  resource&lt;/dfn&gt; must be found as follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by
+   the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; for the
+   resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
+   parameters). If there is no such type, jump to the &lt;em
+   title=&quot;content-type sniffing: unknown type&quot;&gt;unknown type&lt;/em&gt; step
+   below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent is configured to strictly obey
+   Content-Type headers for this resource, then jump to the last step
+   in this set of steps.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the resource was fetched over an HTTP protocol and there
+   is an HTTP Content-Type header and the value of the first such
+   header has bytes that exactly match one of the following lines:&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+       &lt;th&gt;Textual representation
+     &lt;tbody&gt;
+      &lt;tr&gt; &lt;!-- Very old Apache default --&gt;
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
+      &lt;tr&gt; &lt;!-- Old Apache default --&gt;
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 49 53 4f 2d 38 38 35 39 2d 31
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=ISO-8859-1&lt;/code&gt;
+      &lt;tr&gt; &lt;!-- Debian's arbitrarily different Apache default --&gt;
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 69 73 6f 2d 38 38 35 39 2d 31
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=iso-8859-1&lt;/code&gt;
+      &lt;tr&gt; &lt;!-- Someone else's arbitrarily different Apache default (who?) --&gt;
+       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 55 54 46 2d 38
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=UTF-8&lt;/code&gt;
+    &lt;/table&gt;
+
+    &lt;p&gt;...then jump to the &lt;em title=&quot;content-type sniffing: text or
+    binary&quot;&gt;text or binary&lt;/em&gt; section below.&lt;/p&gt;
+
+    &lt;!-- while IE sniffs all text/plain, this will continue to grow as
+    people add new defaults. Hopefully IE will stop the madness in due
+    course and stop sniffing anything but the above... --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
+   &quot;application/unknown&quot;, jump to the &lt;em title=&quot;content-type
+   sniffing: unknown type&quot;&gt;unknown type&lt;/em&gt; step below.&lt;/p&gt;
+   &lt;!-- In a study looking at many billions of pages whose first five
+   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
+   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
+   &quot;application/unknown&quot; was used about once for every 35000 pages
+   labeled &quot;text/html&quot;. --&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if
+   it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed
+   type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return
+   that and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!-- we don't want
+   image/svg+xml going through the next step --&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type
+   supported by the user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;,
+   &quot;image/jpeg&quot;, etc), then jump to the &lt;em title=&quot;content-type
+   sniffing: image&quot;&gt;images&lt;/em&gt; section below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then
+   jump to the &lt;em title=&quot;content-type sniffing: feed or html&quot;&gt;feed or
+   HTML&lt;/em&gt; section below.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;The sniffed type of the resource is &lt;var title=&quot;&quot;&gt;official
+   type&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
+  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the resource
+   to be available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the smaller of either 512 or
+   the number of bytes already available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is 4 or more, and the first bytes of
+    the file match one of the following byte sets:&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+       &lt;th&gt;Description
+     &lt;tbody&gt;
+      &lt;tr&gt;
+       &lt;td&gt;FE FF
+       &lt;td&gt;UTF-16BE BOM &lt;!-- followed by a character --&gt;&lt;!-- nobody uses this: or UTF-32LE BOM --&gt;
+      &lt;tr&gt;
+       &lt;td&gt;FF FE
+       &lt;td&gt;UTF-16LE BOM &lt;!-- followed by a character --&gt;
+&lt;!-- nobody uses this
+      &lt;tr&gt;
+       &lt;td&gt;00 00 FE FF
+       &lt;td&gt;UTF-32BE BOM
 --&gt;
-    &lt;/li&gt;
+&lt;!-- this one is redundant with the one above
+      &lt;tr&gt;
+       &lt;td&gt;FF FE 00 00
+       &lt;td&gt;UTF-32LE BOM
+--&gt;
+      &lt;tr&gt;
+       &lt;td&gt;EF BB BF
+       &lt;td&gt;UTF-8 BOM &lt;!-- followed by a character, or the first byte of a multiple character sequence --&gt;
+&lt;!-- nobody uses this
+      &lt;tr&gt;
+       &lt;td&gt;DD 73 66 73
+       &lt;td&gt;UTF-EBCDIC BOM
+--&gt;
+    &lt;/table&gt;
 
+    &lt;p&gt;...then the sniffed type of the resource is &quot;text/plain&quot;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, if any of the first &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; bytes
+   of the resource are in one of the following byte ranges:&lt;/p&gt;
+
+    &lt;!-- This byte list is based on RFC 2046 Section 4.1.2. Characters
+    in the range 0x00-0x1F, with the exception of 0x09, 0x0A, 0x0C,
+    0x0D (ASCII for TAB, LF, FF, and CR), and character 0x1B
+    (reportedly used by some encodings as a shift escape), are
+    invalid. Thus, if we see them, we assume it's not text. --&gt;
+
+    &lt;ul class=&quot;brief&quot;&gt;
+     &lt;li&gt; 0x00 - 0x08 &lt;/li&gt;
+     &lt;li&gt; 0x0B &lt;/li&gt;
+     &lt;li&gt; 0x0E - 0x1A &lt;/li&gt;
+     &lt;li&gt; 0x1C - 0x1F &lt;/li&gt;
+    &lt;/ul&gt;
+
+   &lt;p&gt;...then the sniffed type of the resource is
+   &quot;application/octet-stream&quot;.&lt;/p&gt;
+
+   &lt;p class=&quot;big-issue&quot;&gt;maybe we should invoke the &quot;Content-Type
+   sniffing: image&quot; section now, falling back on
+   &quot;application/octet-stream&quot;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is
+   &quot;text/plain&quot;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
+  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the
+   resource to be available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;stream length&lt;/var&gt; be the smaller of
+   either 512 or the number of bytes already available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each row in the table below:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;If the row has no &quot;&lt;em&gt;WS&lt;/em&gt;&quot; bytes:&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; be the length of the
+       pattern (number of bytes described by the cell in the second
+       column of the row).&lt;/li&gt;
+
+       &lt;li&gt;If &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; is smaller than &lt;var
+       title=&quot;&quot;&gt;stream length&lt;/var&gt; then skip this row.&lt;/li&gt;
+
+       &lt;li&gt;Apply the &quot;and&quot; operator to the first &lt;var title=&quot;&quot;&gt;pattern
+       length&lt;/var&gt; bytes of the resource and the given mask (the
+       bytes in the cell of first column of that row), and let the
+       result be the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;If the bytes of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; matches the
+       given pattern bytes exactly, then the sniffed type of the
+       resource is the type given in the cell of the third column in
+       that row; abort these steps.&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If the row has a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;ol&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; be an
+       index into the mask and pattern byte strings of the
+       row.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; be an
+       index into the byte stream being examined.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;&lt;em&gt;Loop&lt;/em&gt;: If &lt;var
+       title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; points beyond the end of
+       the byte stream, then this row doesn't match, skip this
+       row.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;Examine the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th
+        byte of the byte stream as follows:&lt;/p&gt;
+
+        &lt;dl class=&quot;switch&quot;&gt;
+
+         &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte
+         of the pattern is a normal hexadecimal byte and not a &quot;&lt;em&gt;WS&lt;/em&gt;&quot;
+         byte:&lt;/dt&gt;
+
+         &lt;dd&gt;
+
+          &lt;p&gt;If the &quot;and&quot; operator, applied to the &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the stream
+          and the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte
+          of the mask, yield a value different that the &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the
+          pattern, then skip this row.&lt;/p&gt;
+
+          &lt;p&gt;Otherwise, increment &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in
+          the mask and pattern and &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
+          the byte stream.&lt;/p&gt;
+
+         &lt;/dd&gt;
+
+         &lt;dt&gt;Otherwise, if the &lt;var
+         title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the pattern
+         is a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:&lt;/dt&gt;
+
+         &lt;dd&gt;
+
+          &lt;p&gt;&quot;&lt;em&gt;WS&lt;/em&gt;&quot; means &quot;whitespace&quot;, and allows insignificant
+          whitespace to be skipped when sniffing for a type
+          signature.&lt;/p&gt;
+
+          &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte
+          of the stream is one of 0x09 (ASCII TAB), 0x0A (ASCII LF),
+          0x0C (ASCII FF), 0x0D (ASCII CR), or 0x20 (ASCII space),
+          then increment only the &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
+          the byte stream.&lt;/p&gt;
+
+          &lt;p&gt;Otherwise, increment only the &lt;var
+          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in
+          the mask and pattern.&lt;/p&gt;
+
+         &lt;/dd&gt;
+
+        &lt;/dl&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; does not
+       point beyond the end of the mask and pattern byte strings, then
+       jump back to the &lt;em&gt;loop&lt;/em&gt; step in this algorithm.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is the type
+       given in the cell of the third column in that row; abort these
+       steps.&lt;/p&gt;&lt;/li&gt;
+
+      &lt;/ol&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;As a last-ditch effort, jump to the &lt;span
+   title=&quot;content-type sniffing: text or binary&quot;&gt;text or binary&lt;/span&gt;
+   section.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;th colspan=&quot;2&quot;&gt;Bytes in Hexadecimal
+     &lt;th rowspan=&quot;2&quot;&gt;Sniffed type
+     &lt;th rowspan=&quot;2&quot;&gt;Comment
+    &lt;tr&gt;
+     &lt;th&gt;Mask
+     &lt;th&gt;Pattern
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF DF DF DF FF DF DF DF DF
+     &lt;td&gt;3C 21 44 4F 43 54 59 50 45 20 48 54 4D 4C &lt;!-- &quot;&lt;!DOCTYPE HTML&quot; --&gt; &lt;!-- common in static data --&gt;
+     &lt;td&gt;text/html
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;!DOCTYPE HTML&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 54 4D 4C &lt;!-- &quot;&lt;HTML&quot; --&gt; &lt;!-- common in static data --&gt;
+     &lt;td&gt;text/html
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HTML&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 45 41 44 &lt;!-- &quot;&lt;HEAD&quot; --&gt; &lt;!-- common in static data --&gt;
+     &lt;td&gt;text/html
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HEAD&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF DF DF DF DF DF DF
+     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 53 43 52 49 50 54 &lt;!-- &quot;&lt;SCRIPT&quot; --&gt; &lt;!-- common in dynamic data --&gt;
+     &lt;td&gt;text/html
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;SCRIPT&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF
+     &lt;td&gt;25 50 44 46 2D &lt;!-- &quot;%PDF-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
+     &lt;td&gt;application/pdf
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%PDF-&lt;/code&gt;&quot;, the PDF signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF FF FF FF FF FF
+     &lt;td&gt;25 21 50 53 2D 41 64 6F 62 65 2D &lt;!-- &quot;%!PS-Adobe-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
+     &lt;td&gt;application/postscript
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%!PS-Adobe-&lt;/code&gt;&quot;, the PostScript signature.
+
+   &lt;!-- copied from the section below --&gt;
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF
+     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
+     &lt;td&gt;image/gif
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF
+     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
+     &lt;td&gt;image/gif
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF FF FF FF FF
+     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
+     &lt;td&gt;image/png
+     &lt;td&gt;The PNG signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF
+     &lt;td&gt;FF D8 FF &lt;!-- SOI marker followed by the first byte of another marker --&gt;
+     &lt;td&gt;image/jpeg
+     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF
+     &lt;td&gt;42 4D
+     &lt;td&gt;image/bmp
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF FF FF FF
+     &lt;td&gt;00 00 01 00
+     &lt;td&gt;image/vnd.microsoft.icon
+     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format signature.
+  &lt;/table&gt;
+
+  &lt;p&gt;User agents may support further types if desired, by implicitly
+  adding to the above table. However, user agents should not use any
+  other patterns for types already mentioned in the table above, as
+  this could then be used for privilege escalation (where, e.g., a
+  server uses the above table to determine that content is not HTML
+  and thus safe from XSS attacks, but then a user agent detects it as
+  HTML anyway and allows script to execute).&lt;/p&gt;
+
+
+  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;If the first bytes of the file match one of the byte sequences in
+  the first columns of the following table, then the sniffed type of
+  the resource is the type given in the corresponding cell in the
+  second column on the same row:&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;th&gt;Bytes in Hexadecimal
+     &lt;th&gt;Sniffed type
+     &lt;th&gt;Comment
+
+   &lt;!-- update the table above if you change this! --&gt;
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
+     &lt;td&gt;image/gif
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
+    &lt;tr&gt;
+     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
+     &lt;td&gt;image/gif
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
+    &lt;tr&gt;
+     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
+     &lt;td&gt;image/png
+     &lt;td&gt;The PNG signature.
+    &lt;tr&gt;
+     &lt;td&gt;FF D8 FF &lt;!-- SOI marker followed by the first byte of another marker --&gt;
+     &lt;td&gt;image/jpeg
+     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
+    &lt;tr&gt;
+     &lt;td&gt;42 4D
+     &lt;td&gt;image/bmp
+     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
+    &lt;tr&gt;
+     &lt;td&gt;00 00 01 00
+     &lt;td&gt;image/vnd.microsoft.icon
+     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format signature.
+    &lt;!-- XXX Mozilla also detects ART (AOL proprietary format) and Windows Cursor files --&gt;
+  &lt;/table&gt;
+
+  &lt;p&gt;User agents must ignore any rows for image types that they do not
+  support.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, the sniffed type of the resource is the same as
+  its &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.&lt;/p&gt;
+
+
+  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;!-- mostly based on:
+   <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
+   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192</A>
+   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127</A>
+  --&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the
+   resource to be available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; be the stream of bytes, and let
+   &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;i&lt;/var&gt;]&lt;/span&gt; represent
+   the byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; with position &lt;var
+   title=&quot;&quot;&gt;i&lt;/var&gt;, treating &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; as zero-indexed
+   (so the first byte is at &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;i&lt;/var&gt;=0&lt;/span&gt;).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If at any point this algorithm requires the user agent to
+   determine the value of a byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; which is not
+   yet available, or which is past the first 512 bytes of the
+   resource, or which is beyond the end of the resource, the user
+   agent must stop this algorithm, and assume that the sniffed type of
+   the resource is &quot;text/html&quot;.&lt;/p&gt;
+
+   &lt;p class=&quot;note&quot;&gt;User agents are allowed, by the first step of this
+   algorithm, to wait until the first 512 bytes of the resource are
+   available.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to 0.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[0]&lt;/span&gt; is 0xEF, &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;s&lt;/var&gt;[1]&lt;/span&gt; is 0xBB, and &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;s&lt;/var&gt;[2]&lt;/span&gt; is 0xBF, then set &lt;var
+   title=&quot;&quot;&gt;pos&lt;/var&gt; to 3. (This skips over a leading UTF-8 BOM, if
+   any.)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop start:&lt;/i&gt; Examine &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;dl class=&quot;switch&quot;&gt;
+
+    &lt;!-- skip whitespace (S token as defined in XML 1.0 section 2.3; production [3] --&gt;
+    &lt;dt&gt;If it is 0x09 (ASCII tab), 0x20 (ASCII space), 0x0A (ASCII LF), or 0x0D (ASCII CR)&lt;/dt&gt;
+    &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and repeat this step.&lt;/dd&gt;
+
+    &lt;dt&gt;If it is 0x3C (ASCII &quot;&lt;code title=&quot;&quot;&gt;&lt;&lt;/code&gt;&quot;)&lt;/dt&gt;
+    &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and go to the next step.&lt;/dd&gt;
+
+    &lt;dt&gt;If it is anything else&lt;/dt&gt;
+    &lt;dd&gt;The sniffed type of the resource is &quot;text/html&quot;. Abort these
+    steps.&lt;/dd&gt;
+
+   &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the bytes with positions &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to
+   &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are
+   exactly equal to 0x21, 0x2D, 0x2D respectively (ASCII for &quot;&lt;code
+   title=&quot;&quot;&gt;!--&lt;/code&gt;&quot;), then:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3.&lt;/li&gt; &lt;!-- skips past the &quot; ! - - &quot; --&gt;
+
+     &lt;li&gt;If the bytes with positions &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;&lt;/span&gt; to &lt;span&gt;&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are exactly
+     equal to 0x2D, 0x2D, 0x3E respectively (ASCII for &quot;&lt;code
+     title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot;), then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;
+     by 3 and jump back to the previous step (the step labeled
+     &lt;i&gt;loop start&lt;/i&gt;) in the overall algorithm in this section.&lt;/li&gt;
+
+     &lt;li&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
+
+     &lt;li&gt;Return to step 2 in these substeps.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x21 (ASCII &quot;&lt;code
+   title=&quot;&quot;&gt;!&lt;/code&gt;&quot;):&lt;/p&gt;
+
+    &lt;!-- this skips past a DOCTYPE if there is one. It is brain-dead
+    because we don't have to be clever to parse the Atom and RSS x.y
+    DOCTYPEs, as they don't do anything clever like have internal
+    subsets or quoted &quot;&gt;&quot; characters. If this fails, then that's ok,
+    we'll treat it as HTML which is fine since we know it's not a feed
+    in that case. --&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
+
+     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; equal 0x3E, then increase &lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the step labeled
+     &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this section.&lt;/li&gt;
+
+     &lt;li&gt;Otherwise, return to step 1 in these substeps.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x3F (ASCII &quot;&lt;code
+   title=&quot;&quot;&gt;?&lt;/code&gt;&quot;):&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
+
+     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
+     title=&quot;&quot;&gt;pos&lt;/var&gt;+1]&lt;/span&gt; equal 0x3F and 0x3E respectively,
+     then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the
+     step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this
+     section.&lt;/li&gt;
+
+     &lt;li&gt;Otherwise, return to step 1 in these substeps.&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, if the bytes in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; starting at
+   &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; match any of the sequences of bytes in the
+   first column of the following table, then the user agent must
+   follow the steps given in the corresponding cell in the second
+   column of the same row.&lt;/p&gt;
+
+    &lt;table&gt;
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Bytes in Hexadecimal
+       &lt;th&gt;Requirement
+       &lt;th&gt;Comment
+
+     &lt;tbody&gt;
+      &lt;tr&gt;
+       &lt;td&gt;72 73 73
+       &lt;td&gt;The sniffed type of the resource is &quot;application/rss+xml&quot;; abort these steps
+       &lt;td&gt;The three ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rss&lt;/code&gt;&quot;
+      &lt;tr&gt;
+       &lt;td&gt;66 65 65 64
+       &lt;td&gt;The sniffed type of the resource is &quot;application/atom+xml&quot;; abort these steps
+       &lt;td&gt;The four ASCII characters &quot;&lt;code title=&quot;&quot;&gt;feed&lt;/code&gt;&quot;
+      &lt;tr&gt;
+       &lt;td&gt;72 64 66 3A 52 44 46
+       &lt;td&gt;Continue to the next step in this algorithm
+       &lt;td&gt;The ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rdf:RDF&lt;/code&gt;&quot;
+    &lt;/table&gt;
+
+    &lt;p&gt;If none of the byte sequences above match the bytes in &lt;var
+    title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;, then the
+    sniffed type of the resource is &quot;text/html&quot;. Abort these
+    steps.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p class=&quot;big-issue&quot;&gt;If, before the next &quot;&gt;&quot;, you find two
+   xmlns* attributes with <A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>
+   and <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> as the namespaces, then the sniffed
+   type of the resource is &quot;application/rss+xml&quot;, abort these
+   steps. (maybe we only need to check for <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A>
+   actually)&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is
+   &quot;text/html&quot;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;For efficiency reasons, implementations may wish to
+  implement this algorithm and the algorithm for detecting the
+  character encoding of HTML documents in parallel.&lt;/p&gt;
+
+
+
+  &lt;h2 id=&quot;dom&quot;&gt;Semantics and structure of HTML documents&lt;/h2&gt;
+
+  &lt;h3 id=&quot;semantics-intro&quot;&gt;Introduction&lt;/h3&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;An introduction to marking up a document.&lt;/p&gt;
+
+
+  &lt;h3&gt;Documents&lt;/h3&gt;
+
+  &lt;p&gt;Every XML and HTML document in an HTML UA is represented by a
+  &lt;code&gt;Document&lt;/code&gt; object. &lt;a
+  href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
+
+
+  &lt;h4&gt;Documents in the DOM&lt;/h4&gt;
+
+  &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn&gt;XML
+  documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn&gt;HTML
+  documents&lt;/dfn&gt; when they are created. Whether a document is an
+  &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; or an &lt;span
+  title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt; affects the behavior of
+  certain APIs, as well as a few CSS rendering rules. &lt;a
+  href=&quot;#refsCSS21&quot;&gt;[CSS21]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;A &lt;code&gt;Document&lt;/code&gt; object created by the &lt;code
+  title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API on the
+  &lt;code&gt;DOMImplementation&lt;/code&gt; object is initially an &lt;span
+  title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt;, but can be made into an
+  &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; by calling &lt;code
+  title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; on it.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
+  this specification) must also implement the
+  &lt;code&gt;HTMLDocument&lt;/code&gt; interface, available using
+  binding-specific methods. (This is the case whether or not the
+  document in question is an &lt;span title=&quot;HTML documents&quot;&gt;HTML
+  document&lt;/span&gt; or indeed whether it contains any &lt;span&gt;HTML
+  elements&lt;/span&gt; at all.) &lt;code&gt;Document&lt;/code&gt; objects must also
+  implement the document-level interface of any other namespaces found
+  in the document that the UA supports. For example, if an HTML
+  implementation also supports SVG, then the &lt;code&gt;Document&lt;/code&gt;
+  object must implement &lt;code&gt;HTMLDocument&lt;/code&gt; and
+  &lt;code&gt;SVGDocument&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Because the &lt;code&gt;HTMLDocument&lt;/code&gt; interface is
+  now obtained using binding-specific casting methods instead of
+  simply being the primary interface of the document object, it is no
+  longer defined as inheriting from &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLDocument&lt;/dfn&gt; {
+  // &lt;span&gt;resource metadata management&lt;/span&gt;
+  [PutForwards=href] readonly attribute &lt;span&gt;Location&lt;/span&gt; &lt;span title=&quot;dom-document-location&quot;&gt;location&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-URL&quot;&gt;URL&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-document-domain&quot;&gt;domain&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-referrer&quot;&gt;referrer&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-document-cookie&quot;&gt;cookie&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-lastModified&quot;&gt;lastModified&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-compatMode&quot;&gt;compatMode&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-document-charset&quot;&gt;charset&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-characterSet&quot;&gt;characterSet&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-defaultCharset&quot;&gt;defaultCharset&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-document-readyState&quot;&gt;readyState&lt;/span&gt;;
+
+  // &lt;span&gt;DOM tree accessors&lt;/span&gt;
+           attribute DOMString &lt;span title=&quot;dom-document-title&quot;&gt;title&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-document-dir&quot;&gt;dir&lt;/span&gt;;
+           attribute &lt;span&gt;HTMLElement&lt;/span&gt; &lt;span title=&quot;dom-document-body&quot;&gt;body&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-images&quot;&gt;images&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-embeds&quot;&gt;embeds&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-plugins&quot;&gt;plugins&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-links&quot;&gt;links&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-forms&quot;&gt;forms&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-anchors&quot;&gt;anchors&lt;/span&gt;;
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-scripts&quot;&gt;scripts&lt;/span&gt;;
+  NodeList &lt;span title=&quot;dom-document-getElementsByName&quot;&gt;getElementsByName&lt;/span&gt;(in DOMString elementName);
+  NodeList &lt;span title=&quot;dom-document-getElementsByClassName&quot;&gt;getElementsByClassName&lt;/span&gt;(in DOMString classNames);
+
+  // &lt;span&gt;dynamic markup insertion&lt;/span&gt;
+           attribute DOMString &lt;span title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/span&gt;;
+  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;();
+  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString type);
+  &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString type, in DOMString replace);
+  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features);
+  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features, in boolean replace);
+  void &lt;span title=&quot;dom-document-close&quot;&gt;close&lt;/span&gt;();
+  void &lt;span title=&quot;dom-document-write&quot;&gt;write&lt;/span&gt;(in DOMString text);
+  void &lt;span title=&quot;dom-document-writeln&quot;&gt;writeln&lt;/span&gt;(in DOMString text);
+
+  // &lt;span&gt;user interaction&lt;/span&gt;
+  &lt;span&gt;Selection&lt;/span&gt; &lt;span title=&quot;dom-document-getSelection&quot;&gt;getSelection&lt;/span&gt;();
+  readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;span title=&quot;dom-document-activeElement&quot;&gt;activeElement&lt;/span&gt;;
+  boolean &lt;span title=&quot;dom-document-hasFocus&quot;&gt;hasFocus&lt;/span&gt;();
+           attribute boolean &lt;span title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/span&gt;;
+  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean showUI);
+  boolean &lt;span title=&quot;dom-document-execCommand&quot;&gt;execCommand&lt;/span&gt;(in DOMString commandId, in boolean showUI, in DOMString value);
+  boolean &lt;span title=&quot;dom-document-queryCommandEnabled&quot;&gt;queryCommandEnabled&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandIndeterm&quot;&gt;queryCommandIndeterm&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandState&quot;&gt;queryCommandState&lt;/span&gt;(in DOMString commandId);
+  boolean &lt;span title=&quot;dom-document-queryCommandSupported&quot;&gt;queryCommandSupported&lt;/span&gt;(in DOMString commandId);
+  DOMString &lt;span title=&quot;dom-document-queryCommandValue&quot;&gt;queryCommandValue&lt;/span&gt;(in DOMString commandId);
+  readonly attribute &lt;span&gt;HTMLCollection&lt;/span&gt; &lt;span title=&quot;dom-document-commands&quot;&gt;commands&lt;/span&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;Since the &lt;code&gt;HTMLDocument&lt;/code&gt; interface holds methods and
+  attributes related to a number of disparate features, the members of
+  this interface are described in various different sections.&lt;/p&gt;
+
+
+  &lt;h4&gt;Security&lt;/h4&gt;
+
+  &lt;p&gt;User agents must raise a &lt;span&gt;security exception&lt;/span&gt; whenever
+  any of the members of an &lt;code&gt;HTMLDocument&lt;/code&gt; object are
+  accessed by scripts whose &lt;span&gt;effective script origin&lt;/span&gt; is
+  not the &lt;span title=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
+  &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;effective script origin&lt;/span&gt;.&lt;/p&gt;
+
+
+
+  &lt;h4&gt;&lt;dfn&gt;Resource metadata management&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-URL&quot;&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
+  XXXDOCURL xref --&gt;.&lt;/p&gt;
+
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-referrer&quot;&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute
+  must return either the &lt;span title=&quot;the document's
+  address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;span&gt;active
+  document&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt; at the
+  time the navigation was started (that is, the page which &lt;span
+  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt;
+  to the current document), or the empty string if there is no such
+  originating page, or if the UA has been configured not to report
+  referrers in this case, or if the navigation was initiated for a
+  &lt;span&gt;hyperlink&lt;/span&gt; with a &lt;code
+  title=&quot;rel-noreferrer&quot;&gt;noreferrer&lt;/code&gt; keyword.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;In the case of HTTP, the &lt;code
+  title=&quot;dom-document-referrer&quot;&gt;referrer&lt;/code&gt; DOM attribute will
+  match the &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; (sic) header that was sent
+  when fetching the current page.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Typically user agents are configured to not report
+  referrers in the case where the referrer uses an encrypted protocol
+  and the current page does not (e.g. when navigating from an &lt;code
+  title=&quot;&quot;&gt;https:&lt;/code&gt; page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt;
+  page).&lt;/p&gt;
+
+
+  &lt;hr&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-cookie&quot;&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
+  attribute represents the cookies of the resource.&lt;/p&gt;
+
+  &lt;!-- XXX this needs work; e.g. document.open() should return the
+  cookies of the document that called document.open(), not of
+  about:blank or the document that had .open() called on, as I
+  understand it. --&gt;
+
+  &lt;p id=&quot;sandboxCookies&quot;&gt;On getting, if the &lt;span&gt;sandboxed origin
+  browsing context flag&lt;/span&gt; is set on the &lt;span&gt;browsing
+  context&lt;/span&gt; of the document, the user agent must raise a
+  &lt;span&gt;security exception&lt;/span&gt;. Otherwise, it must return the same
+  string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header
+  it would include if fetching the resource indicated by &lt;span&gt;the
+  document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, as per RFC
+  2109 section 4.3.4. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;On setting, if the &lt;span&gt;sandboxed origin browsing context
+  flag&lt;/span&gt; is set on the &lt;span&gt;browsing context&lt;/span&gt; of the
+  document, the user agent must raise a &lt;span&gt;security
+  exception&lt;/span&gt;. Otherwise, the user agent must act as it would
+  when processing cookies if it had just attempted to fetch &lt;span&gt;the
+  document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; over HTTP, and had
+  received a response with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose
+  value was the specified value, as per RFC 2109 sections 4.3.1,
+  4.3.2, and 4.3.3. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Since the &lt;code
+  title=&quot;dom-document-cookie&quot;&gt;cookie&lt;/code&gt; attribute is accessible
+  across frames, the path restrictions on cookies are only a tool to
+  help manage which cookies are sent to which parts of the site, and
+  are not in any way a security feature.&lt;/p&gt;
+
+
+  &lt;hr&gt; 
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-lastModified&quot;&gt;&lt;code&gt;lastModified&lt;/code&gt;&lt;/dfn&gt;
+  attribute, on getting, must return the date and time of the
+  &lt;code&gt;Document&lt;/code&gt;'s source file's last modification, in the
+  user's local timezone, in the following format:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt; The month component of the date. &lt;/li&gt;
+
+   &lt;li&gt; A U+002F SOLIDUS character ('/'). &lt;/li&gt;
+
+   &lt;li&gt; The day component of the date. &lt;/li&gt;
+
+   &lt;li&gt; A U+002F SOLIDUS character ('/'). &lt;/li&gt;
+
+   &lt;li&gt; The year component of the date. &lt;/li&gt;
+
+   &lt;li&gt; A U+0020 SPACE character. &lt;/li&gt;
+
+   &lt;li&gt; The hours component of the time. &lt;/li&gt;
+
+   &lt;li&gt; A U+003A COLON character (':'). &lt;/li&gt;
+
+   &lt;li&gt; The minutes component of the time. &lt;/li&gt;
+
+   &lt;li&gt; A U+003A COLON character (':'). &lt;/li&gt;
+
+   &lt;li&gt; The seconds component of the time. &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;All the numeric components above, other than the year, must be
+  given as two digits in the range U+0030 DIGIT ZERO to U+0039 DIGIT
+  NINE representing the number in base ten, zero-padded if
+  necessary.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code&gt;Document&lt;/code&gt;'s source file's last modification date
+  and time must be derived from relevant features of the networking
+  protocols used, e.g. from the value of the HTTP &lt;code
+  title=&quot;&quot;&gt;Last-Modified&lt;/code&gt; header of the document, or from
+  metadata in the file system for local files. If the last modification
+  date and time are not known, the attribute must return the string
+  &lt;code title=&quot;&quot;&gt;01/01/1970 00:00:00&lt;/code&gt;.&lt;/p&gt;
+
+
+  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; is always set to one of three modes:
+  &lt;dfn&gt;no quirks mode&lt;/dfn&gt;, the default; &lt;dfn&gt;quirks mode&lt;/dfn&gt;, used
+  typically for legacy documents; and &lt;dfn&gt;limited quirks mode&lt;/dfn&gt;,
+  also known as &quot;almost standards&quot; mode. The mode is only ever changed
+  from the default by the &lt;span&gt;HTML parser&lt;/span&gt;, based on the
+  presence, absence, or value of the DOCTYPE string.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-compatMode&quot;&gt;&lt;code&gt;compatMode&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute must return the literal string &quot;&lt;code
+  title=&quot;&quot;&gt;CSS1Compat&lt;/code&gt;&quot; unless the document has been set to
+  &lt;span&gt;quirks mode&lt;/span&gt; by the &lt;span&gt;HTML parser&lt;/span&gt;, in which
+  case it must instead return the literal string &quot;&lt;code
+  title=&quot;&quot;&gt;BackCompat&lt;/code&gt;&quot;.&lt;/p&gt;
+
+  &lt;div class=&quot;big-issue&quot;&gt;
+
+   &lt;p&gt;As far as parsing goes, the quirks I know of are:&lt;/p&gt;
+
+   &lt;ul&gt;
+
+    &lt;li&gt;Comment parsing is different.&lt;/li&gt;
+
+    &lt;li&gt;&lt;code&gt;p&lt;/code&gt; can contain &lt;code&gt;table&lt;/code&gt;&lt;/li&gt;
+
+    &lt;li&gt;Safari and IE have special parsing rules for &lt;% ... %&gt;
+    (even in standards mode, though clearly this should be
+    quirks-only).&lt;/li&gt;
+
    &lt;/ul&gt;
 
   &lt;/div&gt;
 
 
 
+  &lt;p&gt;Documents have an associated &lt;dfn title=&quot;document's character
+  encoding&quot;&gt;character encoding&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt;
+  object is created, the &lt;span&gt;document's character encoding&lt;/span&gt;
+  must be initialized to UTF-16. Various algorithms during page
+  loading affect this value, as does the &lt;code
+  title=&quot;dom-document-charset&quot;&gt;charset&lt;/code&gt; setter.  &lt;a
+  href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt; &lt;!-- XXX
+  <A HREF="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</A> --&gt;&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-charset&quot;&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt;
+  DOM attribute must, on getting, return the preferred MIME name of
+  the &lt;span&gt;document's character encoding&lt;/span&gt;. On setting, if the
+  new value is an IANA-registered alias for a character encoding, the
+  &lt;span&gt;document's character encoding&lt;/span&gt; must be set to that
+  character encoding. (Otherwise, nothing happens.)&lt;/p&gt;
 
-  &lt;h3&gt;Documents and document fragments&lt;/h3&gt;
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-characterSet&quot;&gt;&lt;code&gt;characterSet&lt;/code&gt;&lt;/dfn&gt;
+  DOM attribute must, on getting, return the preferred MIME name of
+  the &lt;span&gt;document's character encoding&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-defaultCharset&quot;&gt;&lt;code&gt;defaultCharset&lt;/code&gt;&lt;/dfn&gt;
+  DOM attribute must, on getting, return the preferred MIME name of a
+  character encoding, possibly the user's default encoding, or an
+  encoding associated with the user's current geographical location,
+  or any arbitrary encoding name.&lt;/p&gt;
+
+  &lt;p&gt;Each document has a &lt;dfn&gt;current document readiness&lt;/dfn&gt;. When a
+  &lt;code&gt;Document&lt;/code&gt; object is created, it must have its
+  &lt;span&gt;current document readiness&lt;/span&gt; set to the string
+  &quot;loading&quot;. Various algorithms during page loading affect this
+  value. When the value is set, the user agent must &lt;span&gt;fire a
+  simple event&lt;/span&gt; called &lt;code
+  title=&quot;event-readystatechanged&quot;&gt;readystatechanged&lt;/code&gt; at the
+  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt; &lt;!-- XXX define
+  document.onreadystatechange --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-readyState&quot;&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute must, on getting, return the &lt;span&gt;current document
+  readiness&lt;/span&gt;.&lt;/p&gt;
+
+
+
+  &lt;h4&gt;&lt;dfn&gt;DOM tree accessors&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;html&lt;/code&gt; element&lt;/dfn&gt; of a document is the
+  document's root element, if there is one and it's an
+  &lt;code&gt;html&lt;/code&gt; element, or null otherwise.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;head&lt;/code&gt; element&lt;/dfn&gt; of a document is the
+  first &lt;code&gt;head&lt;/code&gt; element that is a child of &lt;span&gt;the
+  &lt;code&gt;html&lt;/code&gt; element&lt;/span&gt;, if there is one, or null
+  otherwise.&lt;/p&gt;
+
+
+  &lt;p&gt;&lt;dfn&gt;The &lt;code&gt;title&lt;/code&gt; element&lt;/dfn&gt; of a document is the
+  first &lt;code&gt;title&lt;/code&gt; element in the document (in tree order), if
+  there is one, or null otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn id=&quot;document.title&quot;
+  title=&quot;dom-document-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute must,
+  on getting, run the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;root element&lt;/span&gt; is an &lt;code&gt;svg&lt;/code&gt;
+   element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
+   namespace, and the user agent supports SVG, then the getter must
+   return the value that would have been returned by the DOM attribute
+   of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt;
+   interface.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Otherwise, it must return a concatenation of the data of all
+   the child &lt;span title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; of &lt;span&gt;the
+   &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt;, in tree order, or the empty
+   string if &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is
+   null.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;On setting, the following algorithm must be run:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;root element&lt;/span&gt; is an &lt;code&gt;svg&lt;/code&gt;
+   element in the &quot;&lt;code title=&quot;&quot;&gt;<A HREF="http://www.w3.org/2000/svg&lt;/code">http://www.w3.org/2000/svg&lt;/code</A>&gt;&quot;
+   namespace, and the user agent supports SVG, then the setter must
+   defer to the setter for the DOM attribute of the same name on the
+   &lt;code&gt;SVGDocument&lt;/code&gt; interface. Stop the algorithm
+   here.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;If &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is null and
+   &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; is null, then the
+   attribute must do nothing. Stop the algorithm here.&lt;/li&gt;
+
+   &lt;li&gt;If &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; is null, then a
+   new &lt;code&gt;title&lt;/code&gt; element must be created and appended to
+   &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;The children of &lt;span&gt;the &lt;code&gt;title&lt;/code&gt; element&lt;/span&gt; (if
+   any) must all be removed.&lt;/li&gt;
+
+   &lt;li&gt;A single &lt;code&gt;Text&lt;/code&gt; node whose data is the new value
+   being assigned must be appended to &lt;span&gt;the &lt;code&gt;title&lt;/code&gt;
+   element&lt;/span&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;code title=&quot;dom-document-title&quot;&gt;title&lt;/code&gt; attribute on
+  the &lt;code&gt;HTMLDocument&lt;/code&gt; interface should shadow the attribute
+  of the same name on the &lt;code&gt;SVGDocument&lt;/code&gt; interface when the
+  user agent supports both HTML and SVG.&lt;/p&gt;
+
+
+  &lt;p&gt;&lt;dfn&gt;The body element&lt;/dfn&gt; of a document is the first child of
+  &lt;span&gt;the &lt;code&gt;html&lt;/code&gt; element&lt;/span&gt; that is either a
+  &lt;code&gt;body&lt;/code&gt; element or a &lt;code&gt;frameset&lt;/code&gt; element. If
+  there is no such element, it is null. If the body element is null,
+  then when the specification requires that events be fired at &quot;the
+  body element&quot;, they must instead be fired at the
+  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-body&quot;&gt;&lt;code&gt;body&lt;/code&gt;&lt;/dfn&gt;
+  attribute, on getting, must return &lt;span&gt;the body element&lt;/span&gt; of
+  the document (either a &lt;code&gt;body&lt;/code&gt; element, a
+  &lt;code&gt;frameset&lt;/code&gt; element, or null). On setting, the following
+  algorithm must be run:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;If the new value is not a &lt;code&gt;body&lt;/code&gt; or
+   &lt;code&gt;frameset&lt;/code&gt; element, then raise a
+   &lt;code&gt;HIERARCHY_REQUEST_ERR&lt;/code&gt; exception and abort these
+   steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if the new value is the same as &lt;span&gt;the body
+   element&lt;/span&gt;, do nothing. Abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, if &lt;span&gt;the body element&lt;/span&gt; is not null, then
+   replace that element with the new value in the DOM, as if the root
+   element's &lt;code title=&quot;&quot;&gt;replaceChild()&lt;/code&gt; method had been
+   called with the new value and &lt;span title=&quot;the body element&quot;&gt;the
+   incumbent body element&lt;/span&gt; as its two arguments respectively,
+   then abort these steps.&lt;/li&gt;
+
+   &lt;li&gt;Otherwise, the &lt;span&gt;the body element&lt;/span&gt; is null. Append
+   the new value to the root element.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;!--XXX
+    <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp">http://lxr.mozilla.org/seamonkey/source/content/html/document/src/nsHTMLDocument.cpp</A>
+    search for ::GetBody ::SetBody
+    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLDocument.cpp</A>
+    search for ::setBody
+    <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/dom/Document.cpp</A>
+    search for ::body
+  --&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-images&quot;&gt;&lt;code&gt;images&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+  &lt;code&gt;img&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-embeds&quot;&gt;&lt;code&gt;embeds&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+  &lt;code&gt;embed&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-plugins&quot;&gt;&lt;code&gt;plugins&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the same object as that returned by the &lt;code
+  title=&quot;dom-document-embeds&quot;&gt;embeds&lt;/code&gt; attribute.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-links&quot;&gt;&lt;code&gt;links&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;a&lt;/code&gt;
+  elements with &lt;code title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt;
+  attributes and &lt;code&gt;area&lt;/code&gt; elements with &lt;code
+  title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attributes.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-forms&quot;&gt;&lt;code&gt;forms&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+  &lt;code&gt;form&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-anchors&quot;&gt;&lt;code&gt;anchors&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only &lt;code&gt;a&lt;/code&gt;
+  elements with &lt;code title=&quot;attr-a-name&quot;&gt;name&lt;/code&gt; attributes.&lt;/p&gt;&lt;!-- XXX note that such elements are
+  non-conforming --&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-scripts&quot;&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return an &lt;code&gt;HTMLCollection&lt;/code&gt; rooted at the
+  &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
+  &lt;code&gt;script&lt;/code&gt; elements.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-getElementsByName&quot;&gt;&lt;code&gt;getElementsByName(&lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
+  containing all the &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;applet&lt;/code&gt;,
+  &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;, &lt;!-- frame? frameset?
+  XXX--&gt;&lt;code&gt;iframe&lt;/code&gt;, &lt;code&gt;img&lt;/code&gt;, &lt;code&gt;input&lt;/code&gt;,
+  &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;,&lt;!-- param?
+  XXX--&gt; &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in
+  that document that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose
+  value is equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt; argument.&lt;/p&gt; &lt;!-- XXX what about XHTML? --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-document-getElementsByClassName&quot;&gt;&lt;code&gt;getElementsByClassName(&lt;var
+  title=&quot;&quot;&gt;classNames&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string that
+  contains an &lt;span&gt;unordered set of unique space-separated
+  tokens&lt;/span&gt; representing classes. When called, the method must
+  return a live &lt;code&gt;NodeList&lt;/code&gt; object containing all the
+  elements in the document that have all the classes specified in that
+  argument, having obtained the classes by &lt;span title=&quot;split a string
+  on spaces&quot;&gt;splitting a string on spaces&lt;/span&gt;. If there are no
+  tokens specified in the argument, then the method must return an
+  empty &lt;code&gt;NodeList&lt;/code&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-getElementsByClassName&quot;&gt;&lt;code&gt;getElementsByClassName()&lt;/code&gt;&lt;/dfn&gt;
+  method on the &lt;code&gt;HTMLElement&lt;/code&gt; interface must return a live
+  &lt;code&gt;NodeList&lt;/code&gt; with the nodes that the
+  &lt;code&gt;HTMLDocument&lt;/code&gt; &lt;code
+  title=&quot;dom-document-getElementsByClassName&quot;&gt;getElementsByClassName()&lt;/code&gt;
+  method would return when passed the same argument(s), excluding any
+  elements that are not descendants of the &lt;code&gt;HTMLElement&lt;/code&gt;
+  object on which the method was invoked.&lt;/p&gt;
+
+  &lt;p&gt;HTML, SVG, and MathML elements define which classes they are in
+  by having an attribute in the per-element partition with the name
+  &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; containing a space-separated list of
+  classes to which the element belongs. Other specifications may also
+  allow elements in their namespaces to be labeled as being in
+  specific classes. UAs must not assume that all attributes of the
+  name &lt;code title=&quot;&quot;&gt;class&lt;/code&gt; for elements in any namespace work
+  in this way, however, and must not assume that such attributes, when
+  used as global attributes, label other elements as being in specific
+  classes.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;Given the following XHTML fragment:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;div id=&quot;example&quot;&gt;
+ &lt;p id=&quot;p1&quot; class=&quot;aaa bbb&quot;/&gt;
+ &lt;p id=&quot;p2&quot; class=&quot;aaa ccc&quot;/&gt;
+ &lt;p id=&quot;p3&quot; class=&quot;bbb ccc&quot;/&gt;
+&lt;/div&gt;&lt;/pre&gt;
+
+   &lt;p&gt;A call to
+   &lt;code&gt;document.getElementById('example').getElementsByClassName('aaa')&lt;/code&gt;
+   would return a &lt;code&gt;NodeList&lt;/code&gt; with the two paragraphs
+   &lt;code&gt;p1&lt;/code&gt; and &lt;code&gt;p2&lt;/code&gt; in it.&lt;/p&gt;
+
+   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('ccc&nbsp;bbb')&lt;/code&gt;
+   would only return one node, however, namely &lt;code&gt;p3&lt;/code&gt;. A call
+   to
+   &lt;code&gt;document.getElementById('example').getElementsByClassName('bbb&nbsp;&nbsp;ccc&nbsp;')&lt;/code&gt;
+   would return the same thing.&lt;/p&gt;
+
+   &lt;p&gt;A call to &lt;code&gt;getElementsByClassName('aaa,bbb')&lt;/code&gt; would
+   return no nodes; none of the elements above are in the &quot;aaa,bbb&quot;
+   class.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+&lt;!-- XXX
+&gt;         * xGetParentElementByClassName(rootElement, className, tagName) -
+&gt; Navigates upwards until we hit a parent element with the given class name and
+&gt; optional tag name.
+--&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-document-dir&quot;&gt;dir&lt;/code&gt;
+  attribute on the &lt;code&gt;HTMLDocument&lt;/code&gt; interface is defined
+  along with the &lt;code title=&quot;attr-dir&quot;&gt;dir&lt;/code&gt; content
+  attribute.&lt;/p&gt;
+
+
+
+  &lt;h3&gt;Elements&lt;/h3&gt;
+
   &lt;h4&gt;Semantics&lt;/h4&gt;
 
   &lt;p&gt;Elements, attributes, and attribute values in HTML are defined
   (by this specification) to have certain meanings (semantics). For
   example, the &lt;code&gt;ol&lt;/code&gt; element represents an ordered list, and
-  the &lt;code title=&quot;lang&quot;&gt;lang&lt;/code&gt; attribute represents the language
-  of the content.&lt;/p&gt;
+  the &lt;code title=&quot;attr-lang&quot;&gt;lang&lt;/code&gt; attribute represents the
+  language of the content.&lt;/p&gt;
 
   &lt;p&gt;Authors must not use elements, attributes, and attribute values
   for purposes other than their appropriate intended semantic
@@ -4866,370 +4955,113 @@
   progress changing.&lt;/p&gt;
 
 
-  &lt;h4&gt;Structure&lt;/h4&gt;
 
-  &lt;p&gt;All the elements in this specification have a defined content
-  model, which describes what nodes are allowed inside the elements,
-  and thus what the structure of an HTML document or fragment must
-  look like.&lt;/p&gt;
+  &lt;h4&gt;Elements in the DOM&lt;/h4&gt;
 
-  &lt;p class=&quot;note&quot;&gt;As noted in the conformance and terminology
-  sections, for the purposes of determining if an element matches its
-  content model or not, &lt;span title=&quot;text
-  node&quot;&gt;&lt;code&gt;CDATASection&lt;/code&gt; nodes in the DOM are treated as
-  equivalent to &lt;code&gt;Text&lt;/code&gt; nodes&lt;/span&gt;, and &lt;a
-  href=&quot;#entity-references&quot;&gt;entity reference nodes are treated as if
-  they were expanded in place&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The nodes representing &lt;span&gt;HTML elements&lt;/span&gt; in the DOM must
+  implement, and expose to scripts, the interfaces listed for them in
+  the relevant sections of this specification. This includes
+  &lt;span&gt;HTML elements&lt;/span&gt; in &lt;span&gt;XML documents&lt;/span&gt;, even when
+  those documents are in another context (e.g. inside an XSLT
+  transform).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt; are
-  always allowed between elements. User agents represent these
-  characters between elements in the source markup as text nodes in
-  the DOM.&lt;!-- not a conf criteria since the parser now requires this
-  --&gt; Empty &lt;span title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; and &lt;span
-  title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; consisting of just sequences of
-  those characters are considered &lt;dfn&gt;inter-element
-  whitespace&lt;/dfn&gt;.&lt;/p&gt;
+  &lt;p&gt;Elements in the DOM represent things; that is, they have
+  intrinsic &lt;em&gt;meaning&lt;/em&gt;, also known as semantics.&lt;/p&gt;
 
-  &lt;p&gt;&lt;span&gt;Inter-element whitespace&lt;/span&gt;, comment nodes, and
-  processing instruction nodes must be ignored when establishing
-  whether an element matches its content model or not, and must be
-  ignored when following algorithms that define document and element
-  semantics.&lt;/p&gt;
+  &lt;p class=&quot;example&quot;&gt;For example, an &lt;code&gt;ol&lt;/code&gt; element
+  represents an ordered list.&lt;/p&gt;
 
-  &lt;p&gt;An element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is said to be &lt;dfn&gt;preceded or
-  followed&lt;/dfn&gt; by a second element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var
-  title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; have the same parent node
-  and there are no other element nodes or text nodes (other than
-  &lt;span&gt;inter-element whitespace&lt;/span&gt;) between them.&lt;/p&gt;
+  &lt;p&gt;The basic interface, from which all the &lt;span&gt;HTML
+  elements&lt;/span&gt;' interfaces inherit, and which must be used by
+  elements that have no additional requirements, is the
+  &lt;code&gt;HTMLElement&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;Authors must not use &lt;span&gt;elements in the HTML namespace&lt;/span&gt;
-  anywhere except where they are explicitly allowed, as defined for
-  each element, or as explicitly required by other specifications. For
-  XML compound documents, these contexts could be inside elements from
-  other namespaces, if those elements are defined as providing the
-  relevant contexts.&lt;/p&gt;
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLElement&lt;/dfn&gt; : &lt;span&gt;Element&lt;/span&gt; {
+  // &lt;span&gt;DOM tree accessors&lt;/span&gt;
+  NodeList &lt;span title=&quot;dom-getElementsByClassName&quot;&gt;getElementsByClassName&lt;/span&gt;(in DOMString classNames);
 
-  &lt;div class=&quot;example&quot;&gt;
-   &lt;p&gt;The SVG specification defines the SVG &lt;code&gt;foreignObject&lt;/code&gt;
-   element as allowing foreign namespaces to be included, thus
-   allowing compound documents to be created by inserting subdocument
-   content under that element. &lt;em&gt;This&lt;/em&gt; specification defines the
-   XHTML &lt;code&gt;html&lt;/code&gt; element as being allowed where subdocument
-   fragments are allowed in a compound document. Together, these two
-   definitions mean that placing an XHTML &lt;code&gt;html&lt;/code&gt; element as
-   a child of an SVG &lt;code&gt;foreignObject&lt;/code&gt; element is
-   conforming. &lt;a href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
-  &lt;/div&gt;
+  // &lt;span&gt;dynamic markup insertion&lt;/span&gt;
+           attribute DOMString &lt;span title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/span&gt;;
 
-  &lt;div class=&quot;example&quot;&gt;
-   &lt;p&gt;The Atom specification defines the Atom &lt;code
-   title=&quot;&quot;&gt;content&lt;/code&gt; element, when its &lt;code
-   title=&quot;&quot;&gt;type&lt;/code&gt; attribute has the value &lt;code
-   title=&quot;&quot;&gt;xhtml&lt;/code&gt;, as requiring that it contains a single HTML
-   &lt;code&gt;div&lt;/code&gt; element. Thus, a &lt;code&gt;div&lt;/code&gt; element is
-   allowed in that context, even though this is not explicitly
-   normatively stated by this specification. &lt;a
-   href=&quot;#refsATOM&quot;&gt;[ATOM]&lt;/a&gt;&lt;/p&gt;
-  &lt;/div&gt;
+  // &lt;span&gt;metadata attributes&lt;/span&gt;
+           attribute DOMString &lt;span title=&quot;dom-id&quot;&gt;id&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-title&quot;&gt;title&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-lang&quot;&gt;lang&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-dir&quot;&gt;dir&lt;/span&gt;;
+           attribute &lt;span&gt;DOMString&lt;/span&gt; &lt;span title=&quot;dom-className&quot;&gt;className&lt;/span&gt;;
+  readonly attribute &lt;span&gt;DOMTokenList&lt;/span&gt; &lt;span title=&quot;dom-classList&quot;&gt;classList&lt;/span&gt;;
+  readonly attribute &lt;span&gt;DOMStringMap&lt;/span&gt; &lt;span title=&quot;dom-dataset&quot;&gt;dataset&lt;/span&gt;;
 
-  &lt;p&gt;In addition, &lt;span&gt;elements in the HTML namespace&lt;/span&gt; may be
-  orphan nodes (i.e. without a parent node).&lt;/p&gt;
+  // &lt;span&gt;user interaction&lt;/span&gt;
+           attribute boolean &lt;span title=&quot;dom-irrelevant&quot;&gt;irrelevant&lt;/span&gt;;
+  void &lt;span title=&quot;dom-click&quot;&gt;click&lt;/span&gt;();
+  void &lt;span title=&quot;dom-scrollIntoView&quot;&gt;scrollIntoView&lt;/span&gt;();
+  void &lt;span title=&quot;dom-scrollIntoView&quot;&gt;scrollIntoView&lt;/span&gt;(in boolean top);
+           attribute long &lt;span title=&quot;dom-tabindex&quot;&gt;tabIndex&lt;/span&gt;;
+  void &lt;span title=&quot;dom-focus&quot;&gt;focus&lt;/span&gt;();
+  void &lt;span title=&quot;dom-blur&quot;&gt;blur&lt;/span&gt;();
+           attribute boolean &lt;span title=&quot;dom-draggable&quot;&gt;draggable&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-contentEditable&quot;&gt;contentEditable&lt;/span&gt;;
+  readonly attribute DOMString &lt;span title=&quot;dom-isContentEditable&quot;&gt;isContentEditable&lt;/span&gt;;
+           attribute &lt;span&gt;HTMLMenuElement&lt;/span&gt; &lt;span title=&quot;dom-contextMenu&quot;&gt;contextMenu&lt;/span&gt;;
 
-  &lt;div class=&quot;example&quot;&gt;
+  // &lt;span&gt;styling&lt;/span&gt;
+  readonly attribute &lt;span&gt;CSSStyleDeclaration&lt;/span&gt; &lt;span title=&quot;dom-style&quot;&gt;style&lt;/span&gt;;
 
-   &lt;p&gt;For example, creating a &lt;code&gt;td&lt;/code&gt; element and storing it
-   in a global variable in a script is conforming, even though
-   &lt;code&gt;td&lt;/code&gt; elements are otherwise only supposed to be used
-   inside &lt;code&gt;tr&lt;/code&gt; elements.&lt;/p&gt;
+  // &lt;span&gt;data templates&lt;/span&gt;
+           attribute DOMString &lt;span title=&quot;dom-template&quot;&gt;template&lt;/span&gt;;
+  readonly attribute HTMLDataTemplateElement &lt;span title=&quot;dom-templateElement&quot;&gt;templateElement&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-ref&quot;&gt;ref&lt;/span&gt;;
+  readonly attribute Node &lt;span title=&quot;dom-refNode&quot;&gt;refNode&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-registrationMark&quot;&gt;registrationMark&lt;/span&gt;;
+  readonly attribute DocumentFragment &lt;span title=&quot;dom-originalContent&quot;&gt;originalContent&lt;/span&gt;;
 
-   &lt;pre&gt;var data = {
-  name: &quot;Banana&quot;,
-  cell: document.createElement('td'), 
+  // &lt;span&gt;event handler DOM attributes&lt;/span&gt;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onabort&quot;&gt;onabort&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onbeforeunload&quot;&gt;onbeforeunload&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onblur&quot;&gt;onblur&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onchange&quot;&gt;onchange&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onclick&quot;&gt;onclick&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-oncontextmenu&quot;&gt;oncontextmenu&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondblclick&quot;&gt;ondblclick&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondrag&quot;&gt;ondrag&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragend&quot;&gt;ondragend&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragenter&quot;&gt;ondragenter&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragleave&quot;&gt;ondragleave&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragover&quot;&gt;ondragover&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondragstart&quot;&gt;ondragstart&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-ondrop&quot;&gt;ondrop&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onerror&quot;&gt;onerror&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onfocus&quot;&gt;onfocus&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeydown&quot;&gt;onkeydown&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeypress&quot;&gt;onkeypress&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onkeyup&quot;&gt;onkeyup&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onload&quot;&gt;onload&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmessage&quot;&gt;onmessage&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousedown&quot;&gt;onmousedown&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousemove&quot;&gt;onmousemove&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseout&quot;&gt;onmouseout&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseover&quot;&gt;onmouseover&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmouseup&quot;&gt;onmouseup&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onmousewheel&quot;&gt;onmousewheel&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onresize&quot;&gt;onresize&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onscroll&quot;&gt;onscroll&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onselect&quot;&gt;onselect&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onstorage&quot;&gt;onstorage&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onsubmit&quot;&gt;onsubmit&lt;/span&gt;;
+           attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;span title=&quot;handler-onunload&quot;&gt;onunload&lt;/span&gt;;
+
 };&lt;/pre&gt;
 
-  &lt;/div&gt;
+  &lt;p&gt;The &lt;code&gt;HTMLElement&lt;/code&gt; interface holds methods and
+  attributes related to a number of disparate features, and the
+  members of this interface are therefore described in various
+  different sections of this specification.&lt;/p&gt;
 
 
 
-  &lt;h4&gt;Kinds of content&lt;/h4&gt;
+  &lt;h4&gt;Global attributes&lt;/h4&gt;
 
-  &lt;p&gt;Each element in HTML falls into zero or more categories that
-  group elements with similar characteristics together. The following
-  categories are used in this specification:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;&lt;span&gt;Metadata content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Flow content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Sectioning content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Heading content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Phrasing content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Embedded content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Form control content&lt;/span&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;span&gt;Interactive content&lt;/span&gt;&lt;/li&gt;
-&lt;!--
-   &lt;li&gt;&lt;span&gt;Form content&lt;/span&gt;&lt;/li&gt; XXX &quot;Form control elements&quot;
---&gt;
-  &lt;/ul&gt;
-
-  &lt;!-- XXX xref check that all the above got a section defining them,
-  however briefly --&gt;
-
-  &lt;!-- XXX check that the element definitions also link to those
-  sections --&gt;
-
-  &lt;!-- XXX list all the elements for each kind of element in the
-  sections below. --&gt;
-
-  &lt;p&gt;Some elements have unique requirements and do not fit into any
-  particular category.&lt;/p&gt;
-
-
-  &lt;h5&gt;Metadata content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Metadata content&lt;/dfn&gt; is content that sets up the
-  presentation or behavior of the rest of the content, or that sets
-  up the relationship of the document with other documents, or that
-  conveys other &quot;out of band&quot; information.&lt;/p&gt;
-
-  &lt;p&gt;Elements from other namespaces whose semantics are primarily
-  metadata-related (e.g. RDF) are also &lt;span&gt;metadata
-  content&lt;/span&gt;.&lt;/p&gt;
-
-
-  &lt;h5&gt;Flow content&lt;/h5&gt;
-
-  &lt;p&gt;Most elements that are used in the body of documents and
-  applications are categorized as &lt;dfn&gt;flow content&lt;/dfn&gt;.&lt;/p&gt;
-
-  &lt;p&gt;As a general rule, elements whose content model allows any
-  &lt;span&gt;flow content&lt;/span&gt; should have either at least one
-  descendant text node that is not &lt;span&gt;inter-element
-  whitespace&lt;/span&gt;, or at least one descendant element node that is
-  &lt;span&gt;embedded content&lt;/span&gt;. For the purposes of this requirement,
-  &lt;code&gt;del&lt;/code&gt; elements and their descendants must not be
-  counted as contributing to the ancestors of the &lt;code&gt;del&lt;/code&gt;
-  element.&lt;/p&gt;
-
-  &lt;p&gt;This requirement is not a hard requirement, however, as there are
-  many cases where an element can be empty legitimately, for example
-  when it is used as a placeholder which will later be filled in by a
-  script, or when the element is part of a template and would on most
-  pages be filled in but on some pages is not relevant.&lt;/p&gt;
-
-
-  &lt;h5&gt;Sectioning content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Sectioning content&lt;/dfn&gt; is content that defines the scope
-  of &lt;span title=&quot;heading content&quot;&gt;headers&lt;/span&gt;, &lt;span
-  title=&quot;footer&quot;&gt;footers&lt;/span&gt;, and &lt;span title=&quot;address&quot;&gt;contact
-  information&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Each &lt;span&gt;sectioning content&lt;/span&gt; element potentially has a
-  heading. See the section on &lt;span&gt;headings and sections&lt;/span&gt; for
-  further details.&lt;/p&gt;
-
-
-  &lt;h5&gt;Heading content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Heading content&lt;/dfn&gt; defines the header of a section
-  (whether explicitly marked up using &lt;span&gt;sectioning content&lt;/span&gt;
-  elements, or implied by the heading content itself).&lt;/p&gt;
-
-
-  &lt;h5&gt;Phrasing content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Phrasing content&lt;/dfn&gt; is the text of the document, as well
-  as elements that mark up that text at the intra-paragraph
-  level. Runs of &lt;span&gt;phrasing content&lt;/span&gt; form &lt;span
-  title=&quot;paragraph&quot;&gt;paragraphs&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;All &lt;span&gt;phrasing content&lt;/span&gt; is also &lt;span&gt;flow
-  content&lt;/span&gt;. Any content model that expects &lt;span&gt;flow
-  content&lt;/span&gt; also expects &lt;span&gt;phrasing content&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;As a general rule, elements whose content model allows any
-  &lt;span&gt;phrasing content&lt;/span&gt; should have either at least one
-  descendant text node that is not &lt;span&gt;inter-element
-  whitespace&lt;/span&gt;, or at least one descendant element node that is
-  &lt;span&gt;embedded content&lt;/span&gt;. For the purposes of this requirement,
-  nodes that are descendants of &lt;code&gt;del&lt;/code&gt; elements must not be
-  counted as contributing to the ancestors of the &lt;code&gt;del&lt;/code&gt;
-  element.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Most elements that are categorized as phrasing
-  content can only contain elements that are themselves categorized as
-  phrasing content, not any flow content.&lt;/p&gt;
-
-  &lt;p&gt;Text nodes that are not &lt;span&gt;inter-element whitespace&lt;/span&gt; are
-  &lt;span&gt;phrasing content&lt;/span&gt;.&lt;/p&gt;
-
-
-  &lt;h5&gt;Embedded content&lt;/h5&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Embedded content&lt;/dfn&gt; is content that imports another
-  resource into the document, or content from another vocabulary that
-  is inserted into the document.&lt;/p&gt;
-
-  &lt;p&gt;All &lt;span&gt;embedded content&lt;/span&gt; is also &lt;span&gt;phrasing
-  content&lt;/span&gt; (and &lt;span&gt;flow content&lt;/span&gt;). Any content model
-  that expects &lt;span&gt;phrasing content&lt;/span&gt; (or &lt;span&gt;flow
-  content&lt;/span&gt;) also expects &lt;span&gt;embedded content&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Elements that are from namespaces other than the &lt;span&gt;HTML
-  namespace&lt;/span&gt; and that convey content but not metadata, are
-  &lt;span&gt;embedded content&lt;/span&gt; for the purposes of the content models
-  defined in this specification. (For example, MathML, or SVG.)&lt;/p&gt;
-
-  &lt;p&gt;Some embedded content elements can have &lt;dfn&gt;fallback
-  content&lt;/dfn&gt;: content that is to be used when the external resource
-  cannot be used (e.g. because it is of an unsupported format). The
-  element definitions state what the fallback is, if any.&lt;/p&gt;
-
-
-  &lt;h5&gt;Interactive content&lt;/h5&gt;
-
-  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
-  all cross-references. Some of them refer specifically to the
-  activation behavior stuff. --&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;Parts of this section should eventually be
-  moved to DOM3 Events.&lt;/p&gt; &lt;!-- but see comment above --&gt;
-
-&lt;!--
-TESTS:
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E</A>
-<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E</A>
---&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Interactive content&lt;/dfn&gt; is content that is specifically
-  intended for user interaction.&lt;/p&gt;
-
-  &lt;p&gt;Certain elements in HTML can be activated, for instance
-  &lt;code&gt;a&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, or
-  &lt;code&gt;input&lt;/code&gt; elements when their &lt;code&gt;type&lt;/code&gt; attribute
-  is set to &lt;code&gt;radio&lt;/code&gt;. Activation of those elements can
-  happen in various (UA-defined) ways, for instance via the mouse or
-  keyboard.&lt;/p&gt;
-
-  &lt;p&gt;When activation is performed via some method other than clicking
-  the pointing device, the default action of the event that triggers
-  the activation must, instead of being activating the element
-  directly, be to &lt;span&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt;
-  event&lt;/span&gt; on the same element.&lt;/p&gt;
-
-  &lt;p&gt;The default action of this &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt;
-  event, or of the real &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event
-  if the element was activated by clicking a pointing device, must be
-  to &lt;span title=&quot;fire a DOMActivate event&quot;&gt;fire a further &lt;code
-  title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the
-  same element, whose own default action is to go through all the
-  elements the &lt;code title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt;
-  event bubbled through (starting at the target node and going towards
-  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
-  &lt;span&gt;activation behavior&lt;/span&gt;; the first element, in reverse tree
-  order, to have one, must have its activation behavior executed.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The above doesn't happen for arbitrary synthetic
-  events dispatched by author script. However, the &lt;code
-  title=&quot;dom-click&quot;&gt;click()&lt;/code&gt; method can be used to make it
-  happen programmatically.&lt;/p&gt;
-
-  &lt;p&gt;For certain form controls, this process is complicated further by
-  &lt;a
-  href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&quot;&gt;changes
-  that must happen around the click event&lt;/a&gt;. &lt;a
-  href=&quot;#refsWF2&quot;&gt;[WF2]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX WF2: when this is merged into
-  this spec, update xrefs --&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Most interactive elements have content models that
-  disallow nesting interactive elements.&lt;/p&gt;
-
-
-  &lt;h4&gt;Transparent content models&lt;/h4&gt;
-
-  &lt;p&gt;Some elements are described as &lt;dfn&gt;transparent&lt;/dfn&gt;; they have
-  &quot;transparent&quot; as their content model. Some elements are described as
-  &lt;dfn&gt;semi-transparent&lt;/dfn&gt;; this means that part of their content
-  model is &quot;transparent&quot; but that is not the only part of the content
-  model that must be satisfied.&lt;/p&gt;
-
-  &lt;p&gt;When a content model includes a part that is &quot;transparent&quot;, those
-  parts must not contain content that would not be conformant if all
-  transparent and semi-transparent elements in the tree were replaced,
-  in their parent element, by the children in the &quot;transparent&quot; part
-  of their content model, retaining order.&lt;/p&gt;
-
-  &lt;p&gt;When a transparent or semi-transparent element has no parent,
-  then the part of its content model that is &quot;transparent&quot; must
-  instead be treated as accepting any &lt;span&gt;flow content&lt;/span&gt;.&lt;/p&gt;
-
-
-  &lt;h4&gt;Paragraphs&lt;/h4&gt;
-
-  &lt;p&gt;A &lt;dfn&gt;paragraph&lt;/dfn&gt; is typically a block of text with one or more
-  sentences that discuss a particular topic, as in typography, but can
-  also be used for more general thematic grouping. For instance, an
-  address is also a paragraph, as is a part of a form, a byline, or a
-  stanza in a poem.&lt;/p&gt;
-
-  &lt;p&gt;Paragraphs in &lt;span&gt;flow content&lt;/span&gt; are defined relative to
-  what the document looks like without the &lt;code&gt;ins&lt;/code&gt; and
-  &lt;code&gt;del&lt;/code&gt; elements complicating matters. Let &lt;var
-  title=&quot;&quot;&gt;view&lt;/var&gt; be a view of the DOM that replaces all
-  &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements in the document with
-  their contents. Then, in &lt;var title=&quot;&quot;&gt;view&lt;/var&gt;, for each run of
-  &lt;span&gt;phrasing content&lt;/span&gt; uninterrupted by other types of
-  content, in an element that accepts content other than
-  &lt;span&gt;phrasing content&lt;/span&gt;, let &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; be the
-  first node of the run, and let &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; be the last
-  node of the run. For each run, a paragraph exists in the original
-  DOM from immediately before &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; to immediately
-  after &lt;var title=&quot;&quot;&gt;last&lt;/var&gt;. (Paragraphs can thus span across
-  &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements.)&lt;/p&gt;
-
-  &lt;p&gt;A &lt;span&gt;paragraph&lt;/span&gt; is also formed by &lt;code&gt;p&lt;/code&gt;
-  elements.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;p&lt;/code&gt; element can be used to wrap
-  individual paragraphs when there would otherwise not be any content
-  other than phrasing content to separate the paragraphs from each
-  other.&lt;/p&gt;
-
-  &lt;div class=&quot;example&quot;&gt;
-
-   &lt;p&gt;In the following example, there are two paragraphs in a
-   section. There is also a header, which contains phrasing content
-   that is not a paragraph. Note how the comments and
-   &lt;span&gt;intra-element whitespace&lt;/span&gt; do not form paragraphs.&lt;/p&gt;
-
-   &lt;pre&gt;&lt;section&gt;
-  &lt;h1&gt;Example of paragraphs&lt;/h1&gt;
-  This is the &lt;em&gt;first&lt;/em&gt; paragraph in this example.
-  &lt;p&gt;This is the second.&lt;/p&gt;
-  &lt;!-- This is not a paragraph. --&gt;
-&lt;/section&gt;&lt;/pre&gt;
-
-   &lt;p&gt;The following example takes that markup and puts
-   &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements around some of the
-   markup to show that the text was changed (though in this case, the
-   changes don't really make much sense, admittedly). Notice how this
-   example has exactly the same paragraphs as the previous one,
-   despite the &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements.&lt;/p&gt;
-
-   &lt;pre&gt;&lt;section&gt;
-  &lt;ins&gt;&lt;h1&gt;Example of paragraphs&lt;/h1&gt;
-  This is the &lt;em&gt;first&lt;/em&gt; paragraph in&lt;/ins&gt; this example&lt;del&gt;.
-  &lt;p&gt;This is the second.&lt;/p&gt;&lt;/del&gt;
-  &lt;!-- This is not a paragraph. --&gt;
-&lt;/section&gt;&lt;/pre&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h3&gt;Global attributes&lt;/h3&gt;
-
   &lt;p&gt;The following attributes are common to and may be specified on
   all &lt;span&gt;HTML elements&lt;/span&gt; (even those not defined in this
   specification):&lt;/p&gt;
@@ -5319,7 +5151,7 @@
   namespace specified.&lt;/p&gt;
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-id&quot;&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-id&quot;&gt;&lt;code&gt;id&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute represents its
   element's unique identifier. The value must be unique in the subtree
@@ -5350,7 +5182,7 @@
   attribute.&lt;/p&gt;
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-title&quot;&gt;&lt;code&gt;title&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-title&quot;&gt;title&lt;/code&gt; attribute represents
   advisory information for the element, such as would be appropriate
@@ -5384,9 +5216,9 @@
   content attribute.&lt;/p&gt;
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-lang&quot;&gt;&lt;code&gt;lang&lt;/code&gt;&lt;/dfn&gt; (HTML only)
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-lang&quot;&gt;&lt;code&gt;lang&lt;/code&gt;&lt;/dfn&gt; (HTML only)
   and &lt;dfn title=&quot;attr-xml-lang&quot;&gt;&lt;code&gt;xml:lang&lt;/code&gt;&lt;/dfn&gt; (XML
-  only) attributes&lt;/h4&gt;
+  only) attributes&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-lang&quot;&gt;lang&lt;/code&gt; attribute specifies the
   primary &lt;dfn&gt;language&lt;/dfn&gt; for the element's contents and for any
@@ -5447,8 +5279,8 @@
   content attribute.&lt;/p&gt;
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-xml-base&quot;&gt;&lt;code&gt;xml:base&lt;/code&gt;&lt;/dfn&gt;
-  attribute (XML only)&lt;/h4&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-xml-base&quot;&gt;&lt;code&gt;xml:base&lt;/code&gt;&lt;/dfn&gt;
+  attribute (XML only)&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attribute is
   defined in XML Base. &lt;a href=&quot;#refsXMLBASE&quot;&gt;[XMLBASE]&lt;/a&gt;&lt;/p&gt;
@@ -5459,7 +5291,7 @@
   &lt;span&gt;HTML documents&lt;/span&gt;.&lt;/p&gt;
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-dir&quot;&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-dir&quot;&gt;&lt;code&gt;dir&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=&quot;attr-dir&quot;&gt;dir&lt;/code&gt; attribute specifies the
   element's text directionality. The attribute is an &lt;span&gt;enumerated
@@ -5494,7 +5326,7 @@
   nothing on setting.&lt;/p&gt;
 
 
-  &lt;h4 id=&quot;classes&quot;&gt;The &lt;dfn title=&quot;attr-class&quot;&gt;&lt;code&gt;class&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5 id=&quot;classes&quot;&gt;The &lt;dfn title=&quot;attr-class&quot;&gt;&lt;code&gt;class&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;Every &lt;span title=&quot;HTML elements&quot;&gt;HTML element&lt;/span&gt; may have a
   &lt;code title=&quot;attr-class&quot;&gt;class&lt;/code&gt; attribute specified.&lt;/p&gt;
@@ -5527,7 +5359,7 @@
 
 
 
-  &lt;h4&gt;The &lt;dfn title=&quot;attr-style&quot;&gt;&lt;code&gt;style&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h4&gt;
+  &lt;h5&gt;The &lt;dfn title=&quot;attr-style&quot;&gt;&lt;code&gt;style&lt;/code&gt;&lt;/dfn&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;All elements may have the &lt;code title=&quot;attr-style&quot;&gt;style&lt;/code&gt;
   content attribute set. If specified, the attribute must contain only
@@ -5575,7 +5407,7 @@
 
 
 
-  &lt;h4&gt;&lt;dfn&gt;Embedding custom non-visible data&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h5&gt;&lt;dfn&gt;Embedding custom non-visible data&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn&gt;custom data attribute&lt;/dfn&gt; is an attribute whose name
   starts with the string &quot;&lt;dfn
@@ -5690,8 +5522,1069 @@
 
 
 
+  &lt;h3&gt;Content models&lt;/h3&gt;
 
+  &lt;p&gt;All the elements in this specification have a defined content
+  model, which describes what nodes are allowed inside the elements,
+  and thus what the structure of an HTML document or fragment must
+  look like.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;As noted in the conformance and terminology
+  sections, for the purposes of determining if an element matches its
+  content model or not, &lt;span title=&quot;text
+  node&quot;&gt;&lt;code&gt;CDATASection&lt;/code&gt; nodes in the DOM are treated as
+  equivalent to &lt;code&gt;Text&lt;/code&gt; nodes&lt;/span&gt;, and &lt;a
+  href=&quot;#entity-references&quot;&gt;entity reference nodes are treated as if
+  they were expanded in place&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt; are
+  always allowed between elements. User agents represent these
+  characters between elements in the source markup as text nodes in
+  the DOM.&lt;!-- not a conf criteria since the parser now requires this
+  --&gt; Empty &lt;span title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; and &lt;span
+  title=&quot;text node&quot;&gt;text nodes&lt;/span&gt; consisting of just sequences of
+  those characters are considered &lt;dfn&gt;inter-element
+  whitespace&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;&lt;span&gt;Inter-element whitespace&lt;/span&gt;, comment nodes, and
+  processing instruction nodes must be ignored when establishing
+  whether an element matches its content model or not, and must be
+  ignored when following algorithms that define document and element
+  semantics.&lt;/p&gt;
+
+  &lt;p&gt;An element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is said to be &lt;dfn&gt;preceded or
+  followed&lt;/dfn&gt; by a second element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; if &lt;var
+  title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; have the same parent node
+  and there are no other element nodes or text nodes (other than
+  &lt;span&gt;inter-element whitespace&lt;/span&gt;) between them.&lt;/p&gt;
+
+  &lt;p&gt;Authors must not use &lt;span&gt;elements in the HTML namespace&lt;/span&gt;
+  anywhere except where they are explicitly allowed, as defined for
+  each element, or as explicitly required by other specifications. For
+  XML compound documents, these contexts could be inside elements from
+  other namespaces, if those elements are defined as providing the
+  relevant contexts.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+   &lt;p&gt;The SVG specification defines the SVG &lt;code&gt;foreignObject&lt;/code&gt;
+   element as allowing foreign namespaces to be included, thus
+   allowing compound documents to be created by inserting subdocument
+   content under that element. &lt;em&gt;This&lt;/em&gt; specification defines the
+   XHTML &lt;code&gt;html&lt;/code&gt; element as being allowed where subdocument
+   fragments are allowed in a compound document. Together, these two
+   definitions mean that placing an XHTML &lt;code&gt;html&lt;/code&gt; element as
+   a child of an SVG &lt;code&gt;foreignObject&lt;/code&gt; element is
+   conforming. &lt;a href=&quot;#refsSVG&quot;&gt;[SVG]&lt;/a&gt;&lt;/p&gt;
+  &lt;/div&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+   &lt;p&gt;The Atom specification defines the Atom &lt;code
+   title=&quot;&quot;&gt;content&lt;/code&gt; element, when its &lt;code
+   title=&quot;&quot;&gt;type&lt;/code&gt; attribute has the value &lt;code
+   title=&quot;&quot;&gt;xhtml&lt;/code&gt;, as requiring that it contains a single HTML
+   &lt;code&gt;div&lt;/code&gt; element. Thus, a &lt;code&gt;div&lt;/code&gt; element is
+   allowed in that context, even though this is not explicitly
+   normatively stated by this specification. &lt;a
+   href=&quot;#refsATOM&quot;&gt;[ATOM]&lt;/a&gt;&lt;/p&gt;
+  &lt;/div&gt;
+
+  &lt;p&gt;In addition, &lt;span&gt;elements in the HTML namespace&lt;/span&gt; may be
+  orphan nodes (i.e. without a parent node).&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;For example, creating a &lt;code&gt;td&lt;/code&gt; element and storing it
+   in a global variable in a script is conforming, even though
+   &lt;code&gt;td&lt;/code&gt; elements are otherwise only supposed to be used
+   inside &lt;code&gt;tr&lt;/code&gt; elements.&lt;/p&gt;
+
+   &lt;pre&gt;var data = {
+  name: &quot;Banana&quot;,
+  cell: document.createElement('td'), 
+};&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h4&gt;Kinds of content&lt;/h4&gt;
+
+  &lt;p&gt;Each element in HTML falls into zero or more categories that
+  group elements with similar characteristics together. The following
+  categories are used in this specification:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;&lt;span&gt;Metadata content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Flow content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Sectioning content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Heading content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Phrasing content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Embedded content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Form control content&lt;/span&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;span&gt;Interactive content&lt;/span&gt;&lt;/li&gt;
+&lt;!--
+   &lt;li&gt;&lt;span&gt;Form content&lt;/span&gt;&lt;/li&gt; XXX &quot;Form control elements&quot;
+--&gt;
+  &lt;/ul&gt;
+
+  &lt;!-- XXX xref check that all the above got a section defining them,
+  however briefly --&gt;
+
+  &lt;!-- XXX check that the element definitions also link to those
+  sections --&gt;
+
+  &lt;!-- XXX list all the elements for each kind of element in the
+  sections below. --&gt;
+
+  &lt;p&gt;Some elements have unique requirements and do not fit into any
+  particular category.&lt;/p&gt;
+
+
+  &lt;h5&gt;Metadata content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Metadata content&lt;/dfn&gt; is content that sets up the
+  presentation or behavior of the rest of the content, or that sets
+  up the relationship of the document with other documents, or that
+  conveys other &quot;out of band&quot; information.&lt;/p&gt;
+
+  &lt;p&gt;Elements from other namespaces whose semantics are primarily
+  metadata-related (e.g. RDF) are also &lt;span&gt;metadata
+  content&lt;/span&gt;.&lt;/p&gt;
+
+
+  &lt;h5&gt;Flow content&lt;/h5&gt;
+
+  &lt;p&gt;Most elements that are used in the body of documents and
+  applications are categorized as &lt;dfn&gt;flow content&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;p&gt;As a general rule, elements whose content model allows any
+  &lt;span&gt;flow content&lt;/span&gt; should have either at least one
+  descendant text node that is not &lt;span&gt;inter-element
+  whitespace&lt;/span&gt;, or at least one descendant element node that is
+  &lt;span&gt;embedded content&lt;/span&gt;. For the purposes of this requirement,
+  &lt;code&gt;del&lt;/code&gt; elements and their descendants must not be
+  counted as contributing to the ancestors of the &lt;code&gt;del&lt;/code&gt;
+  element.&lt;/p&gt;
+
+  &lt;p&gt;This requirement is not a hard requirement, however, as there are
+  many cases where an element can be empty legitimately, for example
+  when it is used as a placeholder which will later be filled in by a
+  script, or when the element is part of a template and would on most
+  pages be filled in but on some pages is not relevant.&lt;/p&gt;
+
+
+  &lt;h5&gt;Sectioning content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Sectioning content&lt;/dfn&gt; is content that defines the scope
+  of &lt;span title=&quot;heading content&quot;&gt;headers&lt;/span&gt;, &lt;span
+  title=&quot;footer&quot;&gt;footers&lt;/span&gt;, and &lt;span title=&quot;address&quot;&gt;contact
+  information&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Each &lt;span&gt;sectioning content&lt;/span&gt; element potentially has a
+  heading. See the section on &lt;span&gt;headings and sections&lt;/span&gt; for
+  further details.&lt;/p&gt;
+
+
+  &lt;h5&gt;Heading content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Heading content&lt;/dfn&gt; defines the header of a section
+  (whether explicitly marked up using &lt;span&gt;sectioning content&lt;/span&gt;
+  elements, or implied by the heading content itself).&lt;/p&gt;
+
+
+  &lt;h5&gt;Phrasing content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Phrasing content&lt;/dfn&gt; is the text of the document, as well
+  as elements that mark up that text at the intra-paragraph
+  level. Runs of &lt;span&gt;phrasing content&lt;/span&gt; form &lt;span
+  title=&quot;paragraph&quot;&gt;paragraphs&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;span&gt;phrasing content&lt;/span&gt; is also &lt;span&gt;flow
+  content&lt;/span&gt;. Any content model that expects &lt;span&gt;flow
+  content&lt;/span&gt; also expects &lt;span&gt;phrasing content&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;As a general rule, elements whose content model allows any
+  &lt;span&gt;phrasing content&lt;/span&gt; should have either at least one
+  descendant text node that is not &lt;span&gt;inter-element
+  whitespace&lt;/span&gt;, or at least one descendant element node that is
+  &lt;span&gt;embedded content&lt;/span&gt;. For the purposes of this requirement,
+  nodes that are descendants of &lt;code&gt;del&lt;/code&gt; elements must not be
+  counted as contributing to the ancestors of the &lt;code&gt;del&lt;/code&gt;
+  element.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Most elements that are categorized as phrasing
+  content can only contain elements that are themselves categorized as
+  phrasing content, not any flow content.&lt;/p&gt;
+
+  &lt;p&gt;Text nodes that are not &lt;span&gt;inter-element whitespace&lt;/span&gt; are
+  &lt;span&gt;phrasing content&lt;/span&gt;.&lt;/p&gt;
+
+
+  &lt;h5&gt;Embedded content&lt;/h5&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Embedded content&lt;/dfn&gt; is content that imports another
+  resource into the document, or content from another vocabulary that
+  is inserted into the document.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;span&gt;embedded content&lt;/span&gt; is also &lt;span&gt;phrasing
+  content&lt;/span&gt; (and &lt;span&gt;flow content&lt;/span&gt;). Any content model
+  that expects &lt;span&gt;phrasing content&lt;/span&gt; (or &lt;span&gt;flow
+  content&lt;/span&gt;) also expects &lt;span&gt;embedded content&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;Elements that are from namespaces other than the &lt;span&gt;HTML
+  namespace&lt;/span&gt; and that convey content but not metadata, are
+  &lt;span&gt;embedded content&lt;/span&gt; for the purposes of the content models
+  defined in this specification. (For example, MathML, or SVG.)&lt;/p&gt;
+
+  &lt;p&gt;Some embedded content elements can have &lt;dfn&gt;fallback
+  content&lt;/dfn&gt;: content that is to be used when the external resource
+  cannot be used (e.g. because it is of an unsupported format). The
+  element definitions state what the fallback is, if any.&lt;/p&gt;
+
+
+  &lt;h5&gt;Interactive content&lt;/h5&gt;
+
+  &lt;!-- Don't change the above &lt;dfn&gt; or the text below without checking
+  all cross-references. Some of them refer specifically to the
+  activation behavior stuff. --&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;Parts of this section should eventually be
+  moved to DOM3 Events.&lt;/p&gt; &lt;!-- but see comment above --&gt;
+
+&lt;!--
+TESTS:
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E%0A%3Cp%20tabindex%3D1%3Etest%20%3Ca%20href%3D%22%22%3E%20%3Cem%3Etest%3C/em%3E%20%3C/a%3E%0A%3Cscript%3E%0A%20function%20test%20%28e%29%20%7B%20w%28e.type%20+%20%27%20on%20%27%20+%20e.target.tagName%20+%20%27%20through%20%27%20+%20e.currentTarget.tagName%29%3B%20%7D%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27a%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27click%27%2C%20test%2C%20false%29%3B%0A%20document.getElementsByTagName%28%27p%27%29%5B0%5D.addEventListener%28%27DOMActivate%27%2C%20test%2C%20false%29%3B%0A%3C/script%3E%0A</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Ca%20href%3Dhttp%3A//google.com/%20target%3Da%3EA%3C/a%3E%3Ca%20href%3Dhttp%3A//yahoo.com/%20target%3Db%3EB%3C/a%3E%3Cbr%3E%0A%3Ciframe%20name%3Da%3E%3C/iframe%3E%3Ciframe%20name%3Db%3E%3C/iframe%3E%0A%3Cscript%3E%0A%20var%20a%20%3D%20document.getElementsByTagName%28%27a%27%29%5B0%5D%3B%0A%20var%20b%20%3D%20document.getElementsByTagName%28%27a%27%29%5B1%5D%3B%0A%20a.appendChild%28b%29%3B%0A%3C/script%3E</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%20onsubmit%3D%22w%28%27onsubmit%27%29%22%3E%3Cem%3EA%3C/em%3E%3C/form%3E%0A%3Cscript%3E%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.attachEvent%28%27onsubmit%27%2C%20function%20%28%29%20%7B%20w%28%27submit%20fired%27%29%20%7D%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.fireEvent%28%27onsubmit%27%29%3B%0A%3C/script%3E</A>
+<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20HTML%3E%0A%3Cform%20action%3D%22http%3A//google.com/%22%3EX%3C/form%3E%0A%3Cscript%3E%0Avar%20evt%20%3D%20document.createEvent%28%22Events%22%29%3B%0Aevt.initEvent%28%22submit%22%2C%20true%2C%20true%29%3B%0Adocument.getElementsByTagName%28%27form%27%29%5B0%5D.dispatchEvent%28evt%29%3B%0A%3C/script%3E</A>
+--&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Interactive content&lt;/dfn&gt; is content that is specifically
+  intended for user interaction.&lt;/p&gt;
+
+  &lt;p&gt;Certain elements in HTML can be activated, for instance
+  &lt;code&gt;a&lt;/code&gt; elements, &lt;code&gt;button&lt;/code&gt; elements, or
+  &lt;code&gt;input&lt;/code&gt; elements when their &lt;code&gt;type&lt;/code&gt; attribute
+  is set to &lt;code&gt;radio&lt;/code&gt;. Activation of those elements can
+  happen in various (UA-defined) ways, for instance via the mouse or
+  keyboard.&lt;/p&gt;
+
+  &lt;p&gt;When activation is performed via some method other than clicking
+  the pointing device, the default action of the event that triggers
+  the activation must, instead of being activating the element
+  directly, be to &lt;span&gt;fire a &lt;code title=&quot;&quot;&gt;click&lt;/code&gt;
+  event&lt;/span&gt; on the same element.&lt;/p&gt;
+
+  &lt;p&gt;The default action of this &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt;
+  event, or of the real &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event
+  if the element was activated by clicking a pointing device, must be
+  to &lt;span title=&quot;fire a DOMActivate event&quot;&gt;fire a further &lt;code
+  title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt; event&lt;/span&gt; at the
+  same element, whose own default action is to go through all the
+  elements the &lt;code title=&quot;event-DOMActivate&quot;&gt;DOMActivate&lt;/code&gt;
+  event bubbled through (starting at the target node and going towards
+  the &lt;code&gt;Document&lt;/code&gt; node), looking for an element with an
+  &lt;span&gt;activation behavior&lt;/span&gt;; the first element, in reverse tree
+  order, to have one, must have its activation behavior executed.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The above doesn't happen for arbitrary synthetic
+  events dispatched by author script. However, the &lt;code
+  title=&quot;dom-click&quot;&gt;click()&lt;/code&gt; method can be used to make it
+  happen programmatically.&lt;/p&gt;
+
+  &lt;p&gt;For certain form controls, this process is complicated further by
+  &lt;a
+  href=&quot;<A HREF="http://www.whatwg.org/specs/web-forms/current-work/#the-click">http://www.whatwg.org/specs/web-forms/current-work/#the-click</A>&quot;&gt;changes
+  that must happen around the click event&lt;/a&gt;. &lt;a
+  href=&quot;#refsWF2&quot;&gt;[WF2]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX WF2: when this is merged into
+  this spec, update xrefs --&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Most interactive elements have content models that
+  disallow nesting interactive elements.&lt;/p&gt;
+
+
+  &lt;h4&gt;Transparent content models&lt;/h4&gt;
+
+  &lt;p&gt;Some elements are described as &lt;dfn&gt;transparent&lt;/dfn&gt;; they have
+  &quot;transparent&quot; as their content model. Some elements are described as
+  &lt;dfn&gt;semi-transparent&lt;/dfn&gt;; this means that part of their content
+  model is &quot;transparent&quot; but that is not the only part of the content
+  model that must be satisfied.&lt;/p&gt;
+
+  &lt;p&gt;When a content model includes a part that is &quot;transparent&quot;, those
+  parts must not contain content that would not be conformant if all
+  transparent and semi-transparent elements in the tree were replaced,
+  in their parent element, by the children in the &quot;transparent&quot; part
+  of their content model, retaining order.&lt;/p&gt;
+
+  &lt;p&gt;When a transparent or semi-transparent element has no parent,
+  then the part of its content model that is &quot;transparent&quot; must
+  instead be treated as accepting any &lt;span&gt;flow content&lt;/span&gt;.&lt;/p&gt;
+
+
+  &lt;h3&gt;Paragraphs&lt;/h3&gt;
+
+  &lt;p&gt;A &lt;dfn&gt;paragraph&lt;/dfn&gt; is typically a block of text with one or more
+  sentences that discuss a particular topic, as in typography, but can
+  also be used for more general thematic grouping. For instance, an
+  address is also a paragraph, as is a part of a form, a byline, or a
+  stanza in a poem.&lt;/p&gt;
+
+  &lt;p&gt;Paragraphs in &lt;span&gt;flow content&lt;/span&gt; are defined relative to
+  what the document looks like without the &lt;code&gt;ins&lt;/code&gt; and
+  &lt;code&gt;del&lt;/code&gt; elements complicating matters. Let &lt;var
+  title=&quot;&quot;&gt;view&lt;/var&gt; be a view of the DOM that replaces all
+  &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements in the document with
+  their contents. Then, in &lt;var title=&quot;&quot;&gt;view&lt;/var&gt;, for each run of
+  &lt;span&gt;phrasing content&lt;/span&gt; uninterrupted by other types of
+  content, in an element that accepts content other than
+  &lt;span&gt;phrasing content&lt;/span&gt;, let &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; be the
+  first node of the run, and let &lt;var title=&quot;&quot;&gt;last&lt;/var&gt; be the last
+  node of the run. For each run, a paragraph exists in the original
+  DOM from immediately before &lt;var title=&quot;&quot;&gt;first&lt;/var&gt; to immediately
+  after &lt;var title=&quot;&quot;&gt;last&lt;/var&gt;. (Paragraphs can thus span across
+  &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements.)&lt;/p&gt;
+
+  &lt;p&gt;A &lt;span&gt;paragraph&lt;/span&gt; is also formed by &lt;code&gt;p&lt;/code&gt;
+  elements.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;code&gt;p&lt;/code&gt; element can be used to wrap
+  individual paragraphs when there would otherwise not be any content
+  other than phrasing content to separate the paragraphs from each
+  other.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;In the following example, there are two paragraphs in a
+   section. There is also a header, which contains phrasing content
+   that is not a paragraph. Note how the comments and
+   &lt;span&gt;intra-element whitespace&lt;/span&gt; do not form paragraphs.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;section&gt;
+  &lt;h1&gt;Example of paragraphs&lt;/h1&gt;
+  This is the &lt;em&gt;first&lt;/em&gt; paragraph in this example.
+  &lt;p&gt;This is the second.&lt;/p&gt;
+  &lt;!-- This is not a paragraph. --&gt;
+&lt;/section&gt;&lt;/pre&gt;
+
+   &lt;p&gt;The following example takes that markup and puts
+   &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements around some of the
+   markup to show that the text was changed (though in this case, the
+   changes don't really make much sense, admittedly). Notice how this
+   example has exactly the same paragraphs as the previous one,
+   despite the &lt;code&gt;ins&lt;/code&gt; and &lt;code&gt;del&lt;/code&gt; elements.&lt;/p&gt;
+
+   &lt;pre&gt;&lt;section&gt;
+  &lt;ins&gt;&lt;h1&gt;Example of paragraphs&lt;/h1&gt;
+  This is the &lt;em&gt;first&lt;/em&gt; paragraph in&lt;/ins&gt; this example&lt;del&gt;.
+  &lt;p&gt;This is the second.&lt;/p&gt;&lt;/del&gt;
+  &lt;!-- This is not a paragraph. --&gt;
+&lt;/section&gt;&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h3&gt;APIs in HTML documents&lt;/h3&gt;
+  &lt;!-- XXX case-sensitivity training required here. --&gt;
+
+  &lt;p&gt;For &lt;span&gt;HTML documents&lt;/span&gt;, and for &lt;span&gt;HTML
+  elements&lt;/span&gt; in &lt;span&gt;HTML documents&lt;/span&gt;, certain APIs defined
+  in DOM3 Core become case-insensitive or case-changing, as sometimes
+  defined in DOM3 Core, and as summarized or required below. &lt;a
+  href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;.&lt;/p&gt;
+
+  &lt;p&gt;This does not apply to &lt;span&gt;XML documents&lt;/span&gt; or to elements
+  that are not in the &lt;span&gt;HTML namespace&lt;/span&gt; despite being in
+  &lt;span&gt;HTML documents&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.tagName&lt;/code&gt;, &lt;code
+   title=&quot;&quot;&gt;Node.nodeName&lt;/code&gt;, and &lt;code
+   title=&quot;&quot;&gt;Node.localName&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
+    xref--&gt; and attribute names in all lowercase&lt;!-- XXX xref --&gt;,
+    regardless of the case with which they were created.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.createElement()&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this
+    method will lowercase&lt;!-- XXX xref --&gt; the argument before
+    creating the requisite element. Also, the element created must be
+    in the &lt;span&gt;HTML namespace&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
+    title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible,
+    by passing this last method a tag name in the wrong case, to
+    create an element that claims to have the tag name of an element
+    defined in this specification, but doesn't support its interfaces,
+    because it really has another tag name not accessible from the DOM
+    APIs.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttributeNode()&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;span title=&quot;HTML
+    elements&quot;&gt;HTML element&lt;/span&gt;, it must have its name
+    lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
+    title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Element.setAttribute()&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;When an attribute is set on an &lt;span title=&quot;HTML elements&quot;&gt;HTML
+    element&lt;/span&gt;, the name argument must be lowercased&lt;!-- XXX xref
+    --&gt; before the element is affected.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
+    title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.getElementsByTagName()&lt;/code&gt; and &lt;code
+   title=&quot;&quot;&gt;Element.getElementsByTagName()&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;These methods (but not their namespaced counterparts) must
+    compare the given argument case-insensitively&lt;!-- XXX xref --&gt;
+    when looking at &lt;span title=&quot;HTML elements&quot;&gt;HTML elements&lt;/span&gt;,
+    and case-sensitively otherwise.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;Thus, in an &lt;span title=&quot;HTML documents&quot;&gt;HTML
+    document&lt;/span&gt; with nodes in multiple namespaces, these methods
+    will be both case-sensitive and case-insensitive at the same
+    time.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.renameNode()&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;If the new namespace is the &lt;span&gt;HTML namespace&lt;/span&gt;, then
+    the new qualified name must be lowercased before the rename takes
+    place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+   
+
+  &lt;/dl&gt;
+
+
+  &lt;h3&gt;&lt;dfn&gt;Dynamic markup insertion&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;code title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt;
+  family of methods and the &lt;code
+  title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/code&gt; family of DOM attributes
+  enable script authors to dynamically insert markup into the
+  document.&lt;/p&gt;
+
+  &lt;p class=&quot;issue&quot;&gt;bz argues that innerHTML should be called something
+  else on XML documents and XML elements. Is the sanity worth the
+  migration pain?&lt;/p&gt;
+
+  &lt;p&gt;Because these APIs interact with the parser, their behavior
+  varies depending on whether they are used with &lt;span&gt;HTML
+  documents&lt;/span&gt; (and the &lt;span&gt;HTML parser&lt;/span&gt;) or XHTML in
+  &lt;span&gt;XML documents&lt;/span&gt; (and the &lt;span&gt;XML parser&lt;/span&gt;). The
+  following table cross-references the various versions of these
+  APIs.&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt;
+     &lt;td&gt;&lt;/td&gt;
+     &lt;th&gt;&lt;dfn title=&quot;dom-document-write&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;&lt;/th&gt;
+     &lt;th&gt;&lt;dfn title=&quot;dom-innerHTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt;&lt;/th&gt;
+    &lt;/tr&gt;
+   &lt;/thead&gt;
+   &lt;tbody&gt;
+    &lt;tr&gt;
+     &lt;th&gt;For documents that are &lt;span&gt;HTML documents&lt;/span&gt;&lt;/th&gt;
+     &lt;td&gt;&lt;span title=&quot;dom-document-write-HTML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt; in HTML&lt;/span&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;span title=&quot;dom-innerHTML-HTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt; in HTML&lt;/span&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+    &lt;tr&gt;
+     &lt;th&gt;For documents that are &lt;span&gt;XML documents&lt;/span&gt;&lt;/th&gt;
+     &lt;td&gt;&lt;span title=&quot;dom-document-write-XML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt; in XML&lt;/span&gt;&lt;/td&gt;
+     &lt;td&gt;&lt;span title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt; in XML&lt;/span&gt;&lt;/td&gt;
+    &lt;/tr&gt;
+   &lt;/tbody&gt;
+  &lt;/table&gt;
+
+  &lt;p&gt;Regardless of the parsing mode, the &lt;dfn
+  title=&quot;dom-document-writeln&quot;&gt;&lt;code&gt;document.writeln(...)&lt;/code&gt;&lt;/dfn&gt;
+  method must call the &lt;code
+  title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt; method with the
+  same argument(s), and then call the &lt;code
+  title=&quot;dom-document-write&quot;&gt;document.write()&lt;/code&gt; method with, as
+  its argument, a string consisting of a single line feed character
+  (U+000A).&lt;/p&gt;
+
+
+  &lt;h4&gt;Controlling the input stream&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-open&quot;&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt;
+  method comes in several variants with different numbers of
+  arguments.&lt;/p&gt;
+
+  &lt;p&gt;When called with two or fewer arguments, the method must act as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; be the value of the first
+   argument, if there is one, or &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;
+   otherwise.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second
+   argument and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
+   --&gt;, and false otherwise.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!-- XXX xref
+    --&gt; that isn't a &lt;span&gt;script-created parser&lt;/span&gt;, and the
+    &lt;span&gt;insertion point&lt;/span&gt; associated with that parser's
+    &lt;span&gt;input stream&lt;/span&gt; is not undefined (that is, it
+    &lt;em&gt;does&lt;/em&gt; point to somewhere in the input stream), then the
+    method does nothing. Abort these steps and return the
+    &lt;code&gt;Document&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This basically causes &lt;code
+    title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; to be ignored
+    when it's called in an inline script found during the parsing of
+    data sent over the network, while still letting it have an effect
+    when called asynchronously or on a document that is itself being
+    spoon-fed using these APIs.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p class=&quot;big-issue&quot;&gt;onbeforeunload, onunload, reset timers, empty event queue, kill any pending transactions, XMLHttpRequests, etc&lt;/p&gt;&lt;/li&gt;
+   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20{%20f%20%3D%20document.getElementsByTagName(%27iframe%27)[0]%3B%20d%20%3D%20f.contentDocument%3B%20}%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.body.bgColor%3D%27red%27%22%20value%3D%22color%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22f.style.border%3D%27lime%20solid%27%22%20value%3D%22color%20frame%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3Etest%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write(%27%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setInterval(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%20500)%3C%2Fscript%3E%3C%2Fp%3E%27)%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E%0A --&gt;
+
+   &lt;li&gt;&lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+   xref--&gt;, then stop that parser, and throw away any pending content
+   in the input stream. &lt;span class=&quot;big-issue&quot;&gt;what about if it
+   doesn't, because it's either like a text/plain, or Atom, or PDF, or
+   XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;!-- XXX see
+   also innerHTML in HTML --&gt;
+
+   &lt;li&gt;&lt;p&gt;Remove all child nodes of the document.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Change the &lt;span&gt;document's character encoding&lt;/span&gt; to
+   UTF-16.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;span&gt;HTML parser&lt;/span&gt; and associate it with
+   the document. This is a &lt;dfn&gt;script-created parser&lt;/dfn&gt; (meaning
+   that it can be closed by the &lt;code
+   title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; and &lt;code
+   title=&quot;dom-document-close&quot;&gt;document.close()&lt;/code&gt; methods, and
+   that the tokeniser will wait for an explicit call to &lt;code
+   title=&quot;dom-document-close&quot;&gt;document.close()&lt;/code&gt; before emitting
+   an end-of-file token).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;Mark the document as being an &lt;span title=&quot;HTML documents&quot;&gt;HTML
+   document&lt;/span&gt; (it might already be so-marked).&lt;/li&gt;
+
+   &lt;!-- text/plain handling --&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; does
+   not have the value &quot;&lt;code&gt;text/html&lt;/code&gt;&quot;&lt;!-- XXX matched how?
+   --&gt;, then act as if the tokeniser had emitted a &lt;code&gt;pre&lt;/code&gt;
+   element start tag, then set the &lt;span&gt;HTML parser&lt;/span&gt;'s
+   &lt;span&gt;tokenisation&lt;/span&gt; stage's &lt;span&gt;content model flag&lt;/span&gt;
+   to &lt;em&gt;PLAINTEXT&lt;/em&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is false, then:
+
+    &lt;ol&gt;
+
+     &lt;li&gt;Remove all the entries in the &lt;span&gt;browsing context&lt;/span&gt;'s
+     &lt;span&gt;session history&lt;/span&gt; after the &lt;span&gt;current entry&lt;/span&gt;
+     in its &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;History&lt;/code&gt; object&lt;/li&gt;
+
+     &lt;li&gt;Remove any earlier entries that share the same
+     &lt;code&gt;Document&lt;/code&gt;&lt;/li&gt;
+
+     &lt;li&gt;Add a new entry just before the last entry that is associated
+     with the text that was parsed by the previous parser associated
+     with the &lt;code&gt;Document&lt;/code&gt; object, as well as the state of
+     the document at the start of these steps. (This allows the user
+     to step backwards in the session history to see the page before
+     it was blown away by the &lt;code
+     title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; call.)&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Finally, set the &lt;span&gt;insertion point&lt;/span&gt; to point at
+   just before the end of the &lt;span&gt;input stream&lt;/span&gt; (which at this
+   point will be empty).&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; on which the method was
+   invoked.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;We shouldn't hard-code &lt;code&gt;text/plain&lt;/code&gt;
+  there. We should do it some other way, e.g. hand off to the section
+  on content-sniffing and handling of incoming data streams, the part
+  that defines how this all works when stuff comes over the
+  network.&lt;/p&gt;
+
+  &lt;!-- XXX Should we support XML/XHTML as a type to that method? --&gt;
+
+  &lt;p&gt;When called with three or more arguments, the &lt;code
+  title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method on the
+  &lt;code&gt;HTMLDocument&lt;/code&gt; object must call the &lt;code
+  title=&quot;dom-open&quot;&gt;open()&lt;/code&gt; method on the &lt;code&gt;Window&lt;/code&gt;
+  interface of the object returned by the &lt;code
+  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
+  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
+  object, with the same arguments as the original call to the &lt;code
+  title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method, and return whatever
+  that method returned. If the &lt;code
+  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
+  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
+  object is null, then the method must raise an
+  &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-document-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  method must do nothing if there is no &lt;span&gt;script-created
+  parser&lt;/span&gt; associated with the document. If there is such a
+  parser, then, when the method is called, the user agent must insert
+  an &lt;span&gt;explicit &quot;EOF&quot; character&lt;/span&gt; at the &lt;span&gt;insertion
+  point&lt;/span&gt; of the parser's &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
+
+
+  &lt;h4&gt;Dynamic markup insertion in HTML&lt;/h4&gt;
+
+  &lt;p&gt;In HTML, the &lt;dfn
+  title=&quot;dom-document-write-HTML&quot;&gt;&lt;code&gt;document.write(...)&lt;/code&gt;&lt;/dfn&gt;
+  method must act as follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;span&gt;insertion point&lt;/span&gt; is undefined, the &lt;code
+    title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method must be called
+    (with no arguments) on the &lt;code title=&quot;Document&quot;&gt;document&lt;/code&gt;
+    object. The &lt;span&gt;insertion point&lt;/span&gt; will point at just before
+    the end of the (empty) &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The string consisting of the concatenation of all the arguments
+    to the method must be inserted into the &lt;span&gt;input
+    stream&lt;/span&gt;&lt;!-- XXX xref --&gt; just before the &lt;span&gt;insertion
+    point&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If there is &lt;span title=&quot;the script that will execute as soon
+    as the parser resumes&quot;&gt;a script that will execute as soon as the
+    parser resumes&lt;/span&gt;, then the method must now return without
+    further processing of the &lt;span&gt;input stream&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Otherwise, the tokeniser must process the characters that were
+    inserted, one at a time, processing resulting tokens as they are
+    emitted, and stopping when the tokeniser reaches the insertion
+    point or when the processing of the tokeniser is aborted by the
+    tree construction stage (this can happen if a &lt;code&gt;script&lt;/code&gt;
+    start tag token is emitted by the tokeniser).
+
+    &lt;p class=&quot;note&quot;&gt;If the &lt;code
+    title=&quot;dom-document-write-HTML&quot;&gt;document.write()&lt;/code&gt; method was
+    called from script executing inline (i.e. executing because the
+    parser parsed a set of &lt;code&gt;script&lt;/code&gt; tags), then this is a
+    &lt;a href=&quot;#nestedParsing&quot;&gt;reentrant invocation of the
+    parser&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Finally, the method must return.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;In HTML, the &lt;dfn
+  title=&quot;dom-innerHTML-HTML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; DOM
+  attribute of all &lt;code&gt;HTMLElement&lt;/code&gt; and
+  &lt;code&gt;HTMLDocument&lt;/code&gt; nodes returns a serialization of the
+  node's children using the &lt;span&gt;HTML syntax&lt;/span&gt;&lt;!-- XXX xref
+  --&gt;. On setting, it replaces the node's children with new nodes that
+  result from parsing the given value. The formal definitions
+  follow.&lt;/p&gt;
+
+  &lt;p&gt;On getting, the &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt;
+  DOM attribute must return the result of running the &lt;span&gt;HTML
+  fragment serialization algorithm&lt;/span&gt; on the node.&lt;/p&gt;
+
+  &lt;p&gt;On setting, if the node is a document, the &lt;code
+  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute must run
+  the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+    xref--&gt;, then stop that parser, and throw away any pending content
+    in the input stream. &lt;span class=&quot;big-issue&quot;&gt;what about if it
+    doesn't, because it's either like a text/plain, or Atom, or PDF,
+    or XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;!-- XXX see
+    also document.open() --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose
+    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is
+    being set.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Create a new &lt;span&gt;HTML parser&lt;/span&gt;, in its initial state,
+    and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+&lt;!-- redundant, the document is forcibly already so labeled if we get here
+   &lt;li&gt;
+
+    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
+    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+--&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Place into the &lt;span&gt;input stream&lt;/span&gt; for the &lt;span&gt;HTML
+    parser&lt;/span&gt; just created the string being assigned into the
+    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Start the parser and let it run until it has consumed all the
+    characters just inserted into the input stream. (The
+    &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements
+    and a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event will have fired
+    on &lt;span title=&quot;the body element&quot;&gt;its body element&lt;/span&gt;.)&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;Otherwise, if the node is an element, then setting the &lt;code
+  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute must cause
+  the following algorithm to run instead:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Invoke the &lt;span&gt;HTML fragment parsing algorithm&lt;/span&gt;, with
+    the element whose &lt;code
+    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is being set
+    as the &lt;var title=&quot;&quot;&gt;context&lt;/var&gt; element, and the string being
+    assigned into the &lt;code
+    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute as the &lt;var
+    title=&quot;&quot;&gt;input&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the
+    result of this algorithm.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Remove the children of the element whose &lt;code
+    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is being
+    set.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be the &lt;code
+    title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of the &lt;code&gt;Element&lt;/code&gt; node
+    whose &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute
+    is being set.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in
+    &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target
+    document&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the
+    node whose &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt;
+    attribute is being set, preserving their order.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
+  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
+  are inserted.&lt;/p&gt;
+
+  &lt;!-- XXX must make sure we spec that innerHTML causes mutation
+  events to fire, but document.write() doesn't. (the latter is already
+  req-stated in the parser section, btw) --&gt;
+
+  &lt;!-- <A HREF="http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp">http://msdn.microsoft.com/workshop/author/dhtml/reference/properties/innerhtml.asp</A> --&gt;
+  &lt;!-- <A HREF="http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879">http://lxr.mozilla.org/seamonkey/source/content/html/content/src/nsGenericHTMLElement.cpp#879</A>
+       note script execution disabled
+       <A HREF="http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308">http://lxr.mozilla.org/seamonkey/source/content/base/src/nsContentUtils.cpp#3308</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L295</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLElement.cpp#L242</A>
+       <A HREF="http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742">http://trac.webkit.org/projects/webkit/browser/trunk/WebCore/html/HTMLTokenizer.cpp#L1742</A>
+   --&gt;
+
+
+  &lt;h4&gt;Dynamic markup insertion in XML&lt;/h4&gt;
+
+  &lt;p&gt;In an XML context, the &lt;dfn
+  title=&quot;dom-document-write-XML&quot;&gt;&lt;code&gt;document.write()&lt;/code&gt;&lt;/dfn&gt;
+  method must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
+
+&lt;!--
+  For XHTML: content must be well-formed. Where does
+  it insert? Immediately after the script that called document.write()?&lt;/p&gt;
+  how do we handle async scripts vs sync scripts?
+
+Consider:
+data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ document.write('&lt;foo&gt;Test&lt;/foo&gt;'); ]]&gt;&lt;/script&gt;
+data:text/xml,&lt;script xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot;&gt;&lt;![CDATA[ alert('test'); alert(document.write); try { document.write('&lt;foo&gt;Test&lt;/foo&gt;'); alert(document.childNodes.length); } catch (e) { alert(e); } ]]&gt;&lt;/script&gt;
+
+--&gt;
+
+  &lt;p&gt;On the other hand, however, the &lt;dfn
+  title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is
+  indeed usable in an XML context.&lt;/p&gt;
+
+  &lt;p&gt;In an XML context, the &lt;code
+  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on
+  &lt;code&gt;HTMLElement&lt;/code&gt;s must return a string in the form of an &lt;a
+  href=&quot;<A HREF="http://www.w3.org/TR/xml/#wf-entities">http://www.w3.org/TR/xml/#wf-entities</A>&quot;&gt;internal general parsed
+  entity&lt;/a&gt;, and on &lt;code&gt;HTMLDocument&lt;/code&gt;s must return a string
+  in the form of a &lt;a
+  href=&quot;<A HREF="http://www.w3.org/TR/xml/#sec-well-formed">http://www.w3.org/TR/xml/#sec-well-formed</A>&quot;&gt;document
+  entity&lt;/a&gt;. The string returned must be XML namespace-well-formed
+  and must be an isomorphic serialization of all of that node's child
+  nodes, in document order. User agents may adjust prefixes and
+  namespace declarations in the serialization (and indeed might be
+  forced to do so in some cases to obtain namespace-well-formed
+  XML). For the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
+  attribute on &lt;code&gt;HTMLElement&lt;/code&gt; objects, if any of the
+  elements in the serialization are in no namespace, the default
+  namespace in scope for those elements must be explicitly declared as
+  the empty string.&lt;!-- because otherwise round-tripping might break
+  since it'll pick up the surrounding default ns when setting --&gt;
+  (This doesn't apply to the &lt;code
+  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute on
+  &lt;code&gt;HTMLDocument&lt;/code&gt; objects.) &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt; &lt;a
+  href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;If any of the following cases are found in the DOM being
+  serialized, the user agent must raise an
+  &lt;code&gt;INVALID_STATE_ERR&lt;/code&gt; exception:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;A &lt;code&gt;Document&lt;/code&gt; node with no child element nodes.&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;DocumentType&lt;/code&gt; node that has an external subset
+   public identifier or an external subset system identifier that
+   contains both a U+0022 QUOTATION MARK ('&quot;') and a U+0027 APOSTROPHE
+   (&quot;'&quot;).&lt;/li&gt;
+
+   &lt;li&gt;A node with a prefix or local name containing a U+003A COLON
+   (&quot;:&quot;).&lt;/li&gt;
+
+   &lt;li&gt;An &lt;code&gt;Attr&lt;/code&gt; node, &lt;code&gt;Text&lt;/code&gt; node,
+   &lt;code&gt;CDATASection&lt;/code&gt; node, &lt;code&gt;Comment&lt;/code&gt; node, or
+   &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains
+   characters that are not matched by the XML &lt;code
+   title=&quot;&quot;&gt;Char&lt;/code&gt; production. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;CDATASection&lt;/code&gt; node whose data contains the string
+   &quot;&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;&quot;.&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;Comment&lt;/code&gt; node whose data contains two adjacent
+   U+002D HYPHEN-MINUS (-) characters or ends with such a
+   character.&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is
+   the string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
+   ASCII --&gt;.&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name
+   contains a U+003A COLON (&quot;:&quot;).&lt;/li&gt;
+
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose data contains
+   the string &quot;&lt;code title=&quot;&quot;&gt;?&gt;&lt;/code&gt;&quot;.&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p class=&quot;note&quot;&gt;These are the only ways to make a DOM
+  unserializable. The DOM enforces all the other XML constraints; for
+  example, trying to set an attribute with a name that contains an
+  equals sign (=) will raised an &lt;code&gt;INVALID_CHARACTER_ERR&lt;/code&gt;
+  exception.&lt;/p&gt;
+
+  &lt;p&gt;On setting, in an XML context, the &lt;code
+  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on
+  &lt;code&gt;HTMLElement&lt;/code&gt;s and &lt;code&gt;HTMLDocument&lt;/code&gt;s must run
+  the following algorithm:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The user agent must create a new &lt;span&gt;XML parser&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
+    attribute is being set on an element, the user agent must
+    &lt;span&gt;feed the parser&lt;/span&gt; just created the string corresponding
+    to the start tag of that element, declaring all the namespace
+    prefixes that are in scope on that element in the DOM, as well as
+    declaring the default namespace (if any) that is in scope on that
+    element in the DOM.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The user agent must &lt;span&gt;feed the parser&lt;/span&gt; just created
+    the string being assigned into the &lt;code
+    title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
+    attribute is being set on an element, the user agent must
+    &lt;span&gt;feed the parser&lt;/span&gt; the string corresponding to the end
+    tag of that element.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the parser found a well-formedness error, the attribute's
+    setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception and abort
+    these steps.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;The user agent must remove the children nodes of the node whose
+    &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; attribute is
+    being set.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node,
+    let &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; be the children of the
+    document, preserving their order. Otherwise, the attribute is
+    being set on an &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;new
+    children&lt;/var&gt; be the children of the document's root element,
+    preserving their order.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If the attribute is being set on a &lt;code&gt;Document&lt;/code&gt; node,
+    let &lt;var title=&quot;&quot;&gt;target document&lt;/var&gt; be that
+    &lt;code&gt;Document&lt;/code&gt; node. Otherwise, the attribute is being set
+    on an &lt;code&gt;Element&lt;/code&gt; node; let &lt;var title=&quot;&quot;&gt;target
+    document&lt;/var&gt; be the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of that
+    &lt;code&gt;Element&lt;/code&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Set the &lt;code title=&quot;&quot;&gt;ownerDocument&lt;/code&gt; of all the nodes in
+    &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; to the &lt;var title=&quot;&quot;&gt;target
+    document&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append all the &lt;var title=&quot;&quot;&gt;new children&lt;/var&gt; nodes to the
+    node whose &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
+    attribute is being set, preserving their order.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
+  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
+  are inserted.&lt;/p&gt;
+
+
+
+
+  &lt;h2 id=&quot;semantics&quot;&gt;The elements of HTML&lt;/h2&gt;
+
   &lt;h3&gt;The root element&lt;/h3&gt;
 
   &lt;h4&gt;The &lt;dfn&gt;&lt;code&gt;html&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
@@ -25995,7 +26888,7 @@
 
 
 
-  &lt;h2&gt;Web browsers&lt;/h2&gt;
+  &lt;h2 id=&quot;browsers&quot;&gt;Web browsers&lt;/h2&gt;
 
   &lt;p&gt;This section describes features that apply most directly to Web
   browsers. Having said that, unless specified elsewhere, the
@@ -31545,720 +32438,8 @@
 
 
 
-  &lt;h3 id=&quot;content-type-sniffing&quot;&gt;Determining the type of a new resource in a browsing context&lt;/h3&gt;
 
-  &lt;p class=&quot;warning&quot;&gt;It is imperative that the rules in this section
-  be followed exactly. When a user agent uses different heuristics for
-  content type detection than the server expects, security problems
-  can occur. For example, if a server believes that the client will
-  treat a contributed file as an image (and thus treat it as benign),
-  but a Web browser believes the content to be HTML (and thus execute
-  any scripts contained therein), the end user can be exposed to
-  malicious content, making the user vulnerable to cookie theft
-  attacks and other cross-site scripting attacks.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;Content-Type sniffing&quot;&gt;sniffed type of a
-  resource&lt;/dfn&gt; must be found as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by
-   the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; for the
-   resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
-   parameters). If there is no such type, jump to the &lt;em
-   title=&quot;content-type sniffing: unknown type&quot;&gt;unknown type&lt;/em&gt; step
-   below.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the user agent is configured to strictly obey
-   Content-Type headers for this resource, then jump to the last step
-   in this set of steps.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the resource was fetched over an HTTP protocol and there
-   is an HTTP Content-Type header and the value of the first such
-   header has bytes that exactly match one of the following lines:&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-       &lt;th&gt;Textual representation
-     &lt;tbody&gt;
-      &lt;tr&gt; &lt;!-- Very old Apache default --&gt;
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
-      &lt;tr&gt; &lt;!-- Old Apache default --&gt;
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 49 53 4f 2d 38 38 35 39 2d 31
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=ISO-8859-1&lt;/code&gt;
-      &lt;tr&gt; &lt;!-- Debian's arbitrarily different Apache default --&gt;
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 69 73 6f 2d 38 38 35 39 2d 31
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=iso-8859-1&lt;/code&gt;
-      &lt;tr&gt; &lt;!-- Someone else's arbitrarily different Apache default (who?) --&gt;
-       &lt;td&gt;74 65 78 74 2f 70 6c 61 69 6e 3b 20 63 68 61 72 73 65 74 3d 55 54 46 2d 38
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;text/plain;&nbsp;charset=UTF-8&lt;/code&gt;
-    &lt;/table&gt;
-
-    &lt;p&gt;...then jump to the &lt;em title=&quot;content-type sniffing: text or
-    binary&quot;&gt;text or binary&lt;/em&gt; section below.&lt;/p&gt;
-
-    &lt;!-- while IE sniffs all text/plain, this will continue to grow as
-    people add new defaults. Hopefully IE will stop the madness in due
-    course and stop sniffing anything but the above... --&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
-   &quot;application/unknown&quot;, jump to the &lt;em title=&quot;content-type
-   sniffing: unknown type&quot;&gt;unknown type&lt;/em&gt; step below.&lt;/p&gt;
-   &lt;!-- In a study looking at many billions of pages whose first five
-   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
-   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
-   &quot;application/unknown&quot; was used about once for every 35000 pages
-   labeled &quot;text/html&quot;. --&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if
-   it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed
-   type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;; return
-   that and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!-- we don't want
-   image/svg+xml going through the next step --&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type
-   supported by the user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;,
-   &quot;image/jpeg&quot;, etc), then jump to the &lt;em title=&quot;content-type
-   sniffing: image&quot;&gt;images&lt;/em&gt; section below.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then
-   jump to the &lt;em title=&quot;content-type sniffing: feed or html&quot;&gt;feed or
-   HTML&lt;/em&gt; section below.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The sniffed type of the resource is &lt;var title=&quot;&quot;&gt;official
-   type&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the resource
-   to be available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the smaller of either 512 or
-   the number of bytes already available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is 4 or more, and the first bytes of
-    the file match one of the following byte sets:&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-       &lt;th&gt;Description
-     &lt;tbody&gt;
-      &lt;tr&gt;
-       &lt;td&gt;FE FF
-       &lt;td&gt;UTF-16BE BOM &lt;!-- followed by a character --&gt;&lt;!-- nobody uses this: or UTF-32LE BOM --&gt;
-      &lt;tr&gt;
-       &lt;td&gt;FF FE
-       &lt;td&gt;UTF-16LE BOM &lt;!-- followed by a character --&gt;
-&lt;!-- nobody uses this
-      &lt;tr&gt;
-       &lt;td&gt;00 00 FE FF
-       &lt;td&gt;UTF-32BE BOM
---&gt;
-&lt;!-- this one is redundant with the one above
-      &lt;tr&gt;
-       &lt;td&gt;FF FE 00 00
-       &lt;td&gt;UTF-32LE BOM
---&gt;
-      &lt;tr&gt;
-       &lt;td&gt;EF BB BF
-       &lt;td&gt;UTF-8 BOM &lt;!-- followed by a character, or the first byte of a multiple character sequence --&gt;
-&lt;!-- nobody uses this
-      &lt;tr&gt;
-       &lt;td&gt;DD 73 66 73
-       &lt;td&gt;UTF-EBCDIC BOM
---&gt;
-    &lt;/table&gt;
-
-    &lt;p&gt;...then the sniffed type of the resource is &quot;text/plain&quot;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, if any of the first &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; bytes
-   of the resource are in one of the following byte ranges:&lt;/p&gt;
-
-    &lt;!-- This byte list is based on RFC 2046 Section 4.1.2. Characters
-    in the range 0x00-0x1F, with the exception of 0x09, 0x0A, 0x0C,
-    0x0D (ASCII for TAB, LF, FF, and CR), and character 0x1B
-    (reportedly used by some encodings as a shift escape), are
-    invalid. Thus, if we see them, we assume it's not text. --&gt;
-
-    &lt;ul class=&quot;brief&quot;&gt;
-     &lt;li&gt; 0x00 - 0x08 &lt;/li&gt;
-     &lt;li&gt; 0x0B &lt;/li&gt;
-     &lt;li&gt; 0x0E - 0x1A &lt;/li&gt;
-     &lt;li&gt; 0x1C - 0x1F &lt;/li&gt;
-    &lt;/ul&gt;
-
-   &lt;p&gt;...then the sniffed type of the resource is
-   &quot;application/octet-stream&quot;.&lt;/p&gt;
-
-   &lt;p class=&quot;big-issue&quot;&gt;maybe we should invoke the &quot;Content-Type
-   sniffing: image&quot; section now, falling back on
-   &quot;application/octet-stream&quot;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is
-   &quot;text/plain&quot;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the
-   resource to be available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;stream length&lt;/var&gt; be the smaller of
-   either 512 or the number of bytes already available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each row in the table below:&lt;/p&gt;
-
-    &lt;dl class=&quot;switch&quot;&gt;
-
-     &lt;dt&gt;If the row has no &quot;&lt;em&gt;WS&lt;/em&gt;&quot; bytes:&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;ol&gt;
-
-       &lt;li&gt;Let &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; be the length of the
-       pattern (number of bytes described by the cell in the second
-       column of the row).&lt;/li&gt;
-
-       &lt;li&gt;If &lt;var title=&quot;&quot;&gt;pattern length&lt;/var&gt; is smaller than &lt;var
-       title=&quot;&quot;&gt;stream length&lt;/var&gt; then skip this row.&lt;/li&gt;
-
-       &lt;li&gt;Apply the &quot;and&quot; operator to the first &lt;var title=&quot;&quot;&gt;pattern
-       length&lt;/var&gt; bytes of the resource and the given mask (the
-       bytes in the cell of first column of that row), and let the
-       result be the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.&lt;/li&gt;
-
-       &lt;li&gt;If the bytes of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; matches the
-       given pattern bytes exactly, then the sniffed type of the
-       resource is the type given in the cell of the third column in
-       that row; abort these steps.&lt;/li&gt;
-
-      &lt;/ol&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;If the row has a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;ol&gt;
-
-       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; be an
-       index into the mask and pattern byte strings of the
-       row.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; be an
-       index into the byte stream being examined.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;&lt;em&gt;Loop&lt;/em&gt;: If &lt;var
-       title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; points beyond the end of
-       the byte stream, then this row doesn't match, skip this
-       row.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;
-
-        &lt;p&gt;Examine the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th
-        byte of the byte stream as follows:&lt;/p&gt;
-
-        &lt;dl class=&quot;switch&quot;&gt;
-
-         &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte
-         of the pattern is a normal hexadecimal byte and not a &quot;&lt;em&gt;WS&lt;/em&gt;&quot;
-         byte:&lt;/dt&gt;
-
-         &lt;dd&gt;
-
-          &lt;p&gt;If the &quot;and&quot; operator, applied to the &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the stream
-          and the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte
-          of the mask, yield a value different that the &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt;th byte of the
-          pattern, then skip this row.&lt;/p&gt;
-
-          &lt;p&gt;Otherwise, increment &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in
-          the mask and pattern and &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
-          the byte stream.&lt;/p&gt;
-
-         &lt;/dd&gt;
-
-         &lt;dt&gt;Otherwise, if the &lt;var
-         title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte of the pattern
-         is a &quot;&lt;em&gt;WS&lt;/em&gt;&quot; byte:&lt;/dt&gt;
-
-         &lt;dd&gt;
-
-          &lt;p&gt;&quot;&lt;em&gt;WS&lt;/em&gt;&quot; means &quot;whitespace&quot;, and allows insignificant
-          whitespace to be skipped when sniffing for a type
-          signature.&lt;/p&gt;
-
-          &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt;th byte
-          of the stream is one of 0x09 (ASCII TAB), 0x0A (ASCII LF),
-          0x0C (ASCII FF), 0x0D (ASCII CR), or 0x20 (ASCII space),
-          then increment only the &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;stream&lt;/sub&gt;&lt;/var&gt; to the next byte in
-          the byte stream.&lt;/p&gt;
-
-          &lt;p&gt;Otherwise, increment only the &lt;var
-          title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; to the next byte in
-          the mask and pattern.&lt;/p&gt;
-
-         &lt;/dd&gt;
-
-        &lt;/dl&gt;
-
-       &lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;index&lt;sub&gt;pattern&lt;/sub&gt;&lt;/var&gt; does not
-       point beyond the end of the mask and pattern byte strings, then
-       jump back to the &lt;em&gt;loop&lt;/em&gt; step in this algorithm.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is the type
-       given in the cell of the third column in that row; abort these
-       steps.&lt;/p&gt;&lt;/li&gt;
-
-      &lt;/ol&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;As a last-ditch effort, jump to the &lt;span
-   title=&quot;content-type sniffing: text or binary&quot;&gt;text or binary&lt;/span&gt;
-   section.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th colspan=&quot;2&quot;&gt;Bytes in Hexadecimal
-     &lt;th rowspan=&quot;2&quot;&gt;Sniffed type
-     &lt;th rowspan=&quot;2&quot;&gt;Comment
-    &lt;tr&gt;
-     &lt;th&gt;Mask
-     &lt;th&gt;Pattern
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF DF DF DF FF DF DF DF DF
-     &lt;td&gt;3C 21 44 4F 43 54 59 50 45 20 48 54 4D 4C &lt;!-- &quot;&lt;!DOCTYPE HTML&quot; --&gt; &lt;!-- common in static data --&gt;
-     &lt;td&gt;text/html
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;!DOCTYPE HTML&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 54 4D 4C &lt;!-- &quot;&lt;HTML&quot; --&gt; &lt;!-- common in static data --&gt;
-     &lt;td&gt;text/html
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HTML&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 48 45 41 44 &lt;!-- &quot;&lt;HEAD&quot; --&gt; &lt;!-- common in static data --&gt;
-     &lt;td&gt;text/html
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;HEAD&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF DF DF DF DF DF DF
-     &lt;td&gt;&lt;em&gt;WS&lt;/em&gt; 3C 53 43 52 49 50 54 &lt;!-- &quot;&lt;SCRIPT&quot; --&gt; &lt;!-- common in dynamic data --&gt;
-     &lt;td&gt;text/html
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;&lt;SCRIPT&lt;/code&gt;&quot; in US-ASCII or compatible encodings, case-insensitively, possibly with leading spaces.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF
-     &lt;td&gt;25 50 44 46 2D &lt;!-- &quot;%PDF-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
-     &lt;td&gt;application/pdf
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%PDF-&lt;/code&gt;&quot;, the PDF signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF FF FF FF FF FF
-     &lt;td&gt;25 21 50 53 2D 41 64 6F 62 65 2D &lt;!-- &quot;%!PS-Adobe-&quot; (from <A HREF="http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321">http://lxr.mozilla.org/seamonkey/source/netwerk/streamconv/converters/nsUnknownDecoder.cpp#321</A>) --&gt;
-     &lt;td&gt;application/postscript
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;%!PS-Adobe-&lt;/code&gt;&quot;, the PostScript signature.
-
-   &lt;!-- copied from the section below --&gt;
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF
-     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
-     &lt;td&gt;image/gif
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF
-     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
-     &lt;td&gt;image/gif
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF FF FF FF FF
-     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
-     &lt;td&gt;image/png
-     &lt;td&gt;The PNG signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF
-     &lt;td&gt;FF D8 FF &lt;!-- SOI marker followed by the first byte of another marker --&gt;
-     &lt;td&gt;image/jpeg
-     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF
-     &lt;td&gt;42 4D
-     &lt;td&gt;image/bmp
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF FF FF FF
-     &lt;td&gt;00 00 01 00
-     &lt;td&gt;image/vnd.microsoft.icon
-     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format signature.
-  &lt;/table&gt;
-
-  &lt;p&gt;User agents may support further types if desired, by implicitly
-  adding to the above table. However, user agents should not use any
-  other patterns for types already mentioned in the table above, as
-  this could then be used for privilege escalation (where, e.g., a
-  server uses the above table to determine that content is not HTML
-  and thus safe from XSS attacks, but then a user agent detects it as
-  HTML anyway and allows script to execute).&lt;/p&gt;
-
-
-  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;If the first bytes of the file match one of the byte sequences in
-  the first columns of the following table, then the sniffed type of
-  the resource is the type given in the corresponding cell in the
-  second column on the same row:&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt;
-     &lt;th&gt;Bytes in Hexadecimal
-     &lt;th&gt;Sniffed type
-     &lt;th&gt;Comment
-
-   &lt;!-- update the table above if you change this! --&gt;
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;47 49 46 38 37 61 &lt;!-- GIF87a --&gt;
-     &lt;td&gt;image/gif
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF87a&lt;/code&gt;&quot;, a GIF signature.
-    &lt;tr&gt;
-     &lt;td&gt;47 49 46 38 39 61 &lt;!-- GIF89a --&gt;
-     &lt;td&gt;image/gif
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;GIF89a&lt;/code&gt;&quot;, a GIF signature.
-    &lt;tr&gt;
-     &lt;td&gt;89 50 4E 47 0D 0A 1A 0A &lt;!-- [TAB]PNG[CR][LF][EOF][LF]; 137 80 78 71 13 10 26 10 --&gt;
-     &lt;td&gt;image/png
-     &lt;td&gt;The PNG signature.
-    &lt;tr&gt;
-     &lt;td&gt;FF D8 FF &lt;!-- SOI marker followed by the first byte of another marker --&gt;
-     &lt;td&gt;image/jpeg
-     &lt;td&gt;A JPEG SOI marker followed by the first byte of another marker.
-    &lt;tr&gt;
-     &lt;td&gt;42 4D
-     &lt;td&gt;image/bmp
-     &lt;td&gt;The string &quot;&lt;code title=&quot;&quot;&gt;BM&lt;/code&gt;&quot;, a BMP signature.
-    &lt;tr&gt;
-     &lt;td&gt;00 00 01 00
-     &lt;td&gt;image/vnd.microsoft.icon
-     &lt;td&gt;A 0 word following by a 1 word, a Windows Icon file format signature.
-    &lt;!-- XXX Mozilla also detects ART (AOL proprietary format) and Windows Cursor files --&gt;
-  &lt;/table&gt;
-
-  &lt;p&gt;User agents must ignore any rows for image types that they do not
-  support.&lt;/p&gt;
-
-  &lt;p&gt;Otherwise, the sniffed type of the resource is the same as
-  its &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.&lt;/p&gt;
-
-
-  &lt;h4&gt;&lt;dfn&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
-  &lt;!-- mostly based on:
-   <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
-   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#192</A>
-   <A HREF="http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127">http://lxr.mozilla.org/seamonkey/source/browser/components/feeds/src/nsFeedSniffer.cpp#127</A>
-  --&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;The user agent may wait for 512 or more bytes of the
-   resource to be available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; be the stream of bytes, and let
-   &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var title=&quot;&quot;&gt;i&lt;/var&gt;]&lt;/span&gt; represent
-   the byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; with position &lt;var
-   title=&quot;&quot;&gt;i&lt;/var&gt;, treating &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; as zero-indexed
-   (so the first byte is at &lt;span&gt;&lt;var
-   title=&quot;&quot;&gt;i&lt;/var&gt;=0&lt;/span&gt;).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If at any point this algorithm requires the user agent to
-   determine the value of a byte in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; which is not
-   yet available, or which is past the first 512 bytes of the
-   resource, or which is beyond the end of the resource, the user
-   agent must stop this algorithm, and assume that the sniffed type of
-   the resource is &quot;text/html&quot;.&lt;/p&gt;
-
-   &lt;p class=&quot;note&quot;&gt;User agents are allowed, by the first step of this
-   algorithm, to wait until the first 512 bytes of the resource are
-   available.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Initialise &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to 0.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[0]&lt;/span&gt; is 0xEF, &lt;span&gt;&lt;var
-   title=&quot;&quot;&gt;s&lt;/var&gt;[1]&lt;/span&gt; is 0xBB, and &lt;span&gt;&lt;var
-   title=&quot;&quot;&gt;s&lt;/var&gt;[2]&lt;/span&gt; is 0xBF, then set &lt;var
-   title=&quot;&quot;&gt;pos&lt;/var&gt; to 3. (This skips over a leading UTF-8 BOM, if
-   any.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;i&gt;Loop start:&lt;/i&gt; Examine &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;dl class=&quot;switch&quot;&gt;
-
-    &lt;!-- skip whitespace (S token as defined in XML 1.0 section 2.3; production [3] --&gt;
-    &lt;dt&gt;If it is 0x09 (ASCII tab), 0x20 (ASCII space), 0x0A (ASCII LF), or 0x0D (ASCII CR)&lt;/dt&gt;
-    &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and repeat this step.&lt;/dd&gt;
-
-    &lt;dt&gt;If it is 0x3C (ASCII &quot;&lt;code title=&quot;&quot;&gt;&lt;&lt;/code&gt;&quot;)&lt;/dt&gt;
-    &lt;dd&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and go to the next step.&lt;/dd&gt;
-
-    &lt;dt&gt;If it is anything else&lt;/dt&gt;
-    &lt;dd&gt;The sniffed type of the resource is &quot;text/html&quot;. Abort these
-    steps.&lt;/dd&gt;
-
-   &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the bytes with positions &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; to
-   &lt;span&gt;&lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are
-   exactly equal to 0x21, 0x2D, 0x2D respectively (ASCII for &quot;&lt;code
-   title=&quot;&quot;&gt;!--&lt;/code&gt;&quot;), then:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 3.&lt;/li&gt; &lt;!-- skips past the &quot; ! - - &quot; --&gt;
-
-     &lt;li&gt;If the bytes with positions &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;&lt;/span&gt; to &lt;span&gt;&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;+2&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; are exactly
-     equal to 0x2D, 0x2D, 0x3E respectively (ASCII for &quot;&lt;code
-     title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot;), then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;
-     by 3 and jump back to the previous step (the step labeled
-     &lt;i&gt;loop start&lt;/i&gt;) in the overall algorithm in this section.&lt;/li&gt;
-
-     &lt;li&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
-
-     &lt;li&gt;Return to step 2 in these substeps.&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x21 (ASCII &quot;&lt;code
-   title=&quot;&quot;&gt;!&lt;/code&gt;&quot;):&lt;/p&gt;
-
-    &lt;!-- this skips past a DOCTYPE if there is one. It is brain-dead
-    because we don't have to be clever to parse the Atom and RSS x.y
-    DOCTYPEs, as they don't do anything clever like have internal
-    subsets or quoted &quot;&gt;&quot; characters. If this fails, then that's ok,
-    we'll treat it as HTML which is fine since we know it's not a feed
-    in that case. --&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
-
-     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; equal 0x3E, then increase &lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the step labeled
-     &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this section.&lt;/li&gt;
-
-     &lt;li&gt;Otherwise, return to step 1 in these substeps.&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-   title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; is 0x3F (ASCII &quot;&lt;code
-   title=&quot;&quot;&gt;?&lt;/code&gt;&quot;):&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;Increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1.&lt;/li&gt;
-
-     &lt;li&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;]&lt;/span&gt; and &lt;span&gt;&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;[&lt;var
-     title=&quot;&quot;&gt;pos&lt;/var&gt;+1]&lt;/span&gt; equal 0x3F and 0x3E respectively,
-     then increase &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; by 1 and jump back to the
-     step labeled &lt;i&gt;loop start&lt;/i&gt; in the overall algorithm in this
-     section.&lt;/li&gt;
-
-     &lt;li&gt;Otherwise, return to step 1 in these substeps.&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, if the bytes in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; starting at
-   &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt; match any of the sequences of bytes in the
-   first column of the following table, then the user agent must
-   follow the steps given in the corresponding cell in the second
-   column of the same row.&lt;/p&gt;
-
-    &lt;table&gt;
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Bytes in Hexadecimal
-       &lt;th&gt;Requirement
-       &lt;th&gt;Comment
-
-     &lt;tbody&gt;
-      &lt;tr&gt;
-       &lt;td&gt;72 73 73
-       &lt;td&gt;The sniffed type of the resource is &quot;application/rss+xml&quot;; abort these steps
-       &lt;td&gt;The three ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rss&lt;/code&gt;&quot;
-      &lt;tr&gt;
-       &lt;td&gt;66 65 65 64
-       &lt;td&gt;The sniffed type of the resource is &quot;application/atom+xml&quot;; abort these steps
-       &lt;td&gt;The four ASCII characters &quot;&lt;code title=&quot;&quot;&gt;feed&lt;/code&gt;&quot;
-      &lt;tr&gt;
-       &lt;td&gt;72 64 66 3A 52 44 46
-       &lt;td&gt;Continue to the next step in this algorithm
-       &lt;td&gt;The ASCII characters &quot;&lt;code title=&quot;&quot;&gt;rdf:RDF&lt;/code&gt;&quot;
-    &lt;/table&gt;
-
-    &lt;p&gt;If none of the byte sequences above match the bytes in &lt;var
-    title=&quot;&quot;&gt;s&lt;/var&gt; starting at &lt;var title=&quot;&quot;&gt;pos&lt;/var&gt;, then the
-    sniffed type of the resource is &quot;text/html&quot;. Abort these
-    steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p class=&quot;big-issue&quot;&gt;If, before the next &quot;&gt;&quot;, you find two
-   xmlns* attributes with <A HREF="http://www.w3.org/1999/02/22-rdf-syntax-ns#">http://www.w3.org/1999/02/22-rdf-syntax-ns#</A>
-   and <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A> as the namespaces, then the sniffed
-   type of the resource is &quot;application/rss+xml&quot;, abort these
-   steps. (maybe we only need to check for <A HREF="http://purl.org/rss/1.0/">http://purl.org/rss/1.0/</A>
-   actually)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, the sniffed type of the resource is
-   &quot;text/html&quot;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;For efficiency reasons, implementations may wish to
-  implement this algorithm and the algorithm for detecting the
-  character encoding of HTML documents in parallel.&lt;/p&gt;
-
-
-
-  &lt;h4 id=&quot;content-type&quot;&gt;Content-Type metadata&lt;/h4&gt;
-
-  &lt;p&gt;What explicit &lt;dfn title=&quot;Content-Type&quot;&gt;Content-Type
-  metadata&lt;/dfn&gt; is associated with the resource (the resource's type
-  information) depends on the protocol that was used to fetch the
-  resource.&lt;/p&gt;
-
-  &lt;p&gt;For HTTP resources, only the first Content-Type HTTP header, if
-  any, contributes any type information; the explicit type of the
-  resource is then the value of that header, interpreted as described
-  by the HTTP specifications. If the Content-Type HTTP header is
-  present but the value of the first such header cannot be interpreted
-  as described by the HTTP specifications (e.g. because its value
-  doesn't contain a U+002F SOLIDUS ('/') character), then the resource
-  has no type information (even if there are multiple Content-Type
-  HTTP headers and one of the other ones is syntactically correct). &lt;a
-  href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;For resources fetched from the file system, user agents should use
-  platform-specific conventions, e.g. operating system extension/type
-  mappings.&lt;/p&gt;
-
-  &lt;p&gt;Extensions must not be used for determining resource types for
-  resources fetched over HTTP.&lt;/p&gt;
-
-  &lt;p&gt;For resources fetched over most other protocols, e.g. FTP, there
-  is no type information.&lt;/p&gt;
-
-
-  &lt;p&gt;The &lt;dfn&gt;algorithm for extracting an encoding from a
-  Content-Type&lt;/dfn&gt;, given a string &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, is as
-  follows. It either returns an encoding or nothing.&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
-   that are a case-insensitive&lt;!-- XXX ASCII--&gt; match for the word
-   'charset'. If no such match is found, return nothing.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020
-   characters that immediately follow the word 'charset' (there might
-   not be any).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the next character is not a U+003D EQUALS SIGN ('='),
-   return nothing.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020
-   characters that immediately follow the equals sign (there might not
-   be any).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Process the next character as follows:&lt;/p&gt;
-
-    &lt;dl class=&quot;switch&quot;&gt;
-
-     &lt;dt&gt;If it is a U+0022 QUOTATION MARK ('&quot;') and there is a later
-     U+0022 QUOTATION MARK ('&quot;') in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;&lt;/dt&gt;
-
-     &lt;dt&gt;If it is a U+0027 APOSTROPHE (&quot;'&quot;) and there is a later
-     U+0027 APOSTROPHE (&quot;'&quot;) in  &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;Return the string between this character and the next
-     earliest occurrence of this character.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If it is an unmatched U+0022 QUOTATION MARK ('&quot;')&lt;/dt&gt;
-     &lt;dt&gt;If it is an unmatched U+0027 APOSTROPHE (&quot;'&quot;)&lt;/dt&gt;
-     &lt;dt&gt;If there is no next character&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;Return nothing.&lt;/dd&gt;
-
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;Return the string from this character to the first U+0009,
-     U+000A, U+000C, U+000D, U+0020, or U+003B character or the end of
-     &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;, whichever comes first.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The above algorithm is a willful violation of the
-  HTTP specification. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;&lt;/p&gt;
-
-
-
   &lt;h3&gt;Structured client-side storage&lt;/h3&gt;
 
   &lt;h4 id=&quot;storage&quot;&gt;Storing name/value pairs&lt;/h4&gt;
@@ -34828,170 +35009,8 @@
   addresses this.&lt;/p&gt;
 
 
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;h3&gt;Interfaces for URI manipulation&lt;/h3&gt;
 
-  &lt;!-- XXXURL change to URL --&gt; 
- &lt;p&gt;An interface that has a complement of &lt;dfn&gt;URI decomposition
-  attributes&lt;/dfn&gt; will have seven attributes with the following
-  definitions:&lt;/p&gt;
 
-&lt;pre class=&quot;idl&quot;&gt;
-           attribute DOMString &lt;span title=&quot;dom-uda-protocol&quot;&gt;protocol&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-host&quot;&gt;host&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-hostname&quot;&gt;hostname&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-port&quot;&gt;port&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-pathname&quot;&gt;pathname&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-search&quot;&gt;search&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-uda-hash&quot;&gt;hash&lt;/span&gt;;
-&lt;/pre&gt;
-
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;p&gt;The attributes defined to be URI decomposition attributes must
-  act as described for the attributes with the same corresponding
-  names in this section.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;p&gt;In addition, an interface with a complement of URI decomposition
-  attributes will define an &lt;dfn
-  title=&quot;concept-uda-input&quot;&gt;input&lt;/dfn&gt;, which is a URI that the
-  attributes act on, and a &lt;dfn title=&quot;concept-uda-setter&quot;&gt;common
-  setter action&lt;/dfn&gt;, which is a set of steps invoked when any of the
-  attributes' setters are invoked.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;p&gt;The seven URI decomposition attributes have similar
-  requirements.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;p&gt;On getting, if the &lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt;
-  fulfills the condition given in the &quot;getter condition&quot; column
-  corresponding to the attribute in the table below, the user agent
-  must return the part of the &lt;span
-  title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; URI given in the &quot;component&quot;
-  column, with any prefixes specified in the &quot;prefix&quot; column
-  appropriately added to the start of the string and any suffixes
-  specified in the &quot;suffix&quot; column appropriately added to the end of
-  the string. Otherwise, the attribute must return the empty
-  string.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL; algorithms or something? --&gt;
-  &lt;p&gt;On setting, the new value must first be mutated as described by
-  the &quot;setter preprocessor&quot; column, then mutated by %-escaping any
-  characters in the new value that are not valid in the relevant
-  component as given by the &quot;component&quot; column. Then, if the resulting
-  new value fulfills the condition given in the &quot;setter condition&quot;
-  column, the user agent must make a new string &lt;var
-  title=&quot;&quot;&gt;output&lt;/var&gt; by replacing the component of the URI given by
-  the &quot;component&quot; column in the &lt;span
-  title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; URI with the new value;
-  otherwise, the user agent must let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be
-  equal to the &lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt;. Finally,
-  the user agent must invoke the &lt;span
-  title=&quot;concept-uda-setter&quot;&gt;common setter action&lt;/span&gt; with the
-  value of &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL --&gt;
-  &lt;p&gt;When replacing a component in the URI, if the component is part
-  of an optional group in the URI syntax consisting of a character
-  followed by the component, the component (including its prefix
-  character) must be included even if the new value is the empty
-  string.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The previous paragraph applies in particular to the
-  &quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot; before a &lt;port&gt; component, the &quot;&lt;code
-  title=&quot;&quot;&gt;?&lt;/code&gt;&quot; before a &lt;query&gt; component, and the &quot;&lt;code
-  title=&quot;&quot;&gt;#&lt;/code&gt;&quot; before a &lt;fragment&gt; component.&lt;/p&gt;
-
-  &lt;!-- XXXURL change to URL; algorithms --&gt;
-  &lt;p&gt;The rules for parsing and constructing URIs are described in RFC
-  3986 and RFC 3987. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;      
-    &lt;tr&gt;
-     &lt;th&gt;Attribute
-     &lt;th&gt;Component
-     &lt;th&gt;Getter Condition
-     &lt;th&gt;Prefix
-     &lt;th&gt;Suffix
-     &lt;th&gt;Setter Preprocessor
-     &lt;th&gt;Setter Condition
-   &lt;tbody&gt;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-protocol&quot;&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;scheme&gt;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;)
-     &lt;td&gt;Remove all trailing U+003A COLON (&quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot;) characters
-     &lt;td&gt;The new value is not the empty string
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-host&quot;&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;span&gt;&lt;hostport&gt;&lt;/span&gt;
-     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-hostname&quot;&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;host&gt;/&lt;ihost&gt;
-     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;Remove all leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) characters
-     &lt;td&gt;&mdash;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-port&quot;&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;port&gt;
-     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical and uses a server-based naming authority
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;Remove any characters in the new value that are not in the range U+0030 DIGIT ZERO .. U+0039 DIGIT NINE.
-         If the resulting string is empty, set it to a single U+0030 DIGIT ZERO character ('0').
-     &lt;td&gt;&mdash;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-pathname&quot;&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;abs_path&gt;
-     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical
-     &lt;td&gt;&mdash;
-     &lt;td&gt;&mdash;
-     &lt;td&gt;If it has no leading U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) character, prepend a U+002F SOLIDUS (&quot;&lt;code title=&quot;&quot;&gt;/&lt;/code&gt;&quot;) character to the new value
-     &lt;td&gt;&mdash;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-search&quot;&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;query&gt;
-     &lt;td&gt;&lt;span title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; is hierarchical
-     &lt;td&gt;U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;)
-     &lt;td&gt;&mdash;
-     &lt;td&gt;Remove one leading U+003F QUESTION MARK (&quot;&lt;code title=&quot;&quot;&gt;?&lt;/code&gt;&quot;) character, if any
-     &lt;td&gt;&mdash;
-    &lt;tr&gt;
-     &lt;td&gt;&lt;dfn title=&quot;dom-uda-hash&quot;&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;
-     &lt;td&gt;&lt;fragment&gt;
-     &lt;td&gt;Fragment identifier is longer than zero characters
-     &lt;td&gt;U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;)
-     &lt;td&gt;&mdash;
-     &lt;td&gt;Remove one leading U+0023 NUMBER SIGN (&quot;&lt;code title=&quot;&quot;&gt;#&lt;/code&gt;&quot;) character, if any
-     &lt;td&gt;&mdash;
-  &lt;/table&gt;
-
-  &lt;p&gt;The &lt;dfn&gt;&lt;hostport&gt;&lt;/dfn&gt; component is defined as being the
-  &lt;host&gt;/&lt;ihost&gt; component, followed by a colon and the
-  &lt;port&gt; component, but with the colon and &lt;port&gt;
-  component omitted if the given port matches the default port for the
-  protocol given by the &lt;scheme&gt; component.&lt;/p&gt;
-
-&lt;!--
-  <A HREF="http://www.hixie.ch/tests/adhoc/dom/level0/location/components/">http://www.hixie.ch/tests/adhoc/dom/level0/location/components/</A>
-  <A HREF="http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp">http://lxr.mozilla.org/seamonkey/source/dom/src/base/nsLocation.cpp</A>
-  <A HREF="http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722">http://wp.netscape.com/eng/mozilla/3.0/handbook/javascript/ref_h-l.htm#84722</A>
---&gt;
-
-
-
   &lt;h2 id=&quot;editing&quot;&gt;&lt;dfn&gt;User Interaction&lt;/dfn&gt;&lt;/h2&gt;
 
   &lt;p&gt;This section describes various features that allow authors to


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008687.html">[html5] r1789 - /
</A></li>
	<LI>Next message: <A HREF="008689.html">[html5] r1791 - [acgiowrt] (2) Define 'URL' and 'valid U [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8688">[ date ]</a>
              <a href="thread.html#8688">[ thread ]</a>
              <a href="subject.html#8688">[ subject ]</a>
              <a href="author.html#8688">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
