<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1303 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1303%20-%20/&In-Reply-To=%3C20080302121829.DD2B438EDD0%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008204.html">
   <LINK REL="Next"  HREF="008206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1303 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1303%20-%20/&In-Reply-To=%3C20080302121829.DD2B438EDD0%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1303 - /">whatwg at whatwg.org
       </A><BR>
    <I>Sun Mar  2 04:18:29 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008204.html">[html5] r1302 - /
</A></li>
        <LI>Next message: <A HREF="008206.html">[html5] r1304 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8205">[ date ]</a>
              <a href="thread.html#8205">[ thread ]</a>
              <a href="subject.html#8205">[ subject ]</a>
              <a href="author.html#8205">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-03-02 04:18:28 -0800 (Sun, 02 Mar 2008)
New Revision: 1303

Modified:
   index
   source
Log:
[act] (2) Ban attribute names containing single quotes and double quotes, ban unquoted attribute values containing single quotes and double quotes, require spaces between attributes.

Modified: index
===================================================================
--- index	2008-03-02 12:02:46 UTC (rev 1302)
+++ index	2008-03-02 12:18:28 UTC (rev 1303)
@@ -37470,10 +37470,11 @@
   &lt;p&gt;Attributes have a name and a value. &lt;dfn id=attribute
    title=syntax-attribute-name&gt;Attribute names&lt;/dfn&gt; must consist of one or
    more characters other than the &lt;a href=&quot;#space&quot; title=&quot;space
-   character&quot;&gt;space characters&lt;/a&gt;, U+003E GREATER-THAN SIGN (&gt;), U+002F
-   SOLIDUS (/), U+003D EQUALS SIGN (=), the U+0000 NULL character, the
-   control characters, and any characters that are not defined by Unicode. In
-   the HTML syntax, attribute names may be written with any mix of lower- and
+   character&quot;&gt;space characters&lt;/a&gt;, U+0000 NULL, U+0022 QUOTATION MARK
+   (&amp;#x22;), U+0027 APOSTROPHE (&amp;#x27;), U+003E GREATER-THAN SIGN (&gt;),
+   U+002F SOLIDUS (/), and U+003D EQUALS SIGN (=) characters, the control
+   characters, and any characters that are not defined by Unicode. In the
+   HTML syntax, attribute names may be written with any mix of lower- and
    uppercase letters that, when converted to
    all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches the attribute's
    name; attribute names are case-insensitive.
@@ -37516,11 +37517,11 @@
      character&quot;&gt;space characters&lt;/a&gt;, followed by the &lt;a href=&quot;#attribute0&quot;
      title=syntax-attribute-value&gt;attribute value&lt;/a&gt;, which, in addition to
      the requirements given above for attribute values, must not contain any
-     literal &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;,
-     U+003D EQUALS SIGN (=) characters, or U+003E GREATER-THAN SIGN
-     (&lt;code&gt;&gt;&lt;/code&gt;) characters, and must not, furthermore, start with
-     either a literal U+0022 QUOTATION MARK (&lt;code&gt;&amp;#x22;&lt;/code&gt;) character
-     or a literal U+0027 APOSTROPHE (&lt;code&gt;&amp;#x27;&lt;/code&gt;) character.&lt;/p&gt;
+     literal &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, a
+     U+0022 QUOTATION MARK (&lt;code&gt;&amp;#x22;&lt;/code&gt;) characters, U+0027
+     APOSTROPHE (&lt;code&gt;&amp;#x27;&lt;/code&gt;) characters, U+003D EQUALS SIGN
+     (&lt;code&gt;=&lt;/code&gt;) characters, or U+003E GREATER-THAN SIGN
+     (&lt;code&gt;&gt;&lt;/code&gt;) characters.&lt;/p&gt;
 
     &lt;div class=example&gt;
      &lt;p&gt;In the following example, the &lt;code
@@ -37558,6 +37559,10 @@
      &lt;pre&gt;&lt;input &lt;em&gt;type='checkbox'&lt;/em&gt;&gt;&lt;/pre&gt;
     &lt;/div&gt;
 
+    &lt;p&gt;If an attribute using the single-quoted attribute syntax is to be
+     followed by another attribute, then there must be a &lt;a
+     href=&quot;#space&quot;&gt;space character&lt;/a&gt; separating the two.&lt;/p&gt;
+
    &lt;dt&gt;Double-quoted attribute value syntax
 
    &lt;dd&gt;
@@ -37579,6 +37584,10 @@
 
      &lt;pre&gt;&lt;input &lt;em&gt;name=&quot;be evil&quot;&lt;/em&gt;&gt;&lt;/pre&gt;
     &lt;/div&gt;
+
+    &lt;p&gt;If an attribute using the double-quoted attribute syntax is to be
+     followed by another attribute, then there must be a &lt;a
+     href=&quot;#space&quot;&gt;space character&lt;/a&gt; separating the two.&lt;/p&gt;
   &lt;/dl&gt;
 
   &lt;h5 id=optional&gt;&lt;span class=secno&gt;8.1.2.4. &lt;/span&gt;Optional tags&lt;/h5&gt;
@@ -38659,7 +38668,10 @@
    be &lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;executed&lt;/a&gt; and
    removed from its list.
 
-  &lt;p&gt;The tokeniser state machine is as follows:
+  &lt;p&gt;The tokeniser state machine is as follows:&lt;/p&gt;
+  &lt;!-- XXX should go through these reordering the entries so that
+  they're in some consistent order, like, by Unicode, errors last, or
+  something --&gt;
 
   &lt;dl&gt;
    &lt;dt&gt;&lt;dfn id=data-state&gt;Data state&lt;/dfn&gt;
@@ -38969,12 +38981,14 @@
       href=&quot;#permitted&quot;&gt;permitted slash&lt;/a&gt;. Stay in the &lt;a
       href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+
+     &lt;dt&gt;U+0027 APOSTROPHE (')
+
      &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Start a new attribute in the
-      current tag token. Set that attribute's name to the current input
-      character, and its value to the empty string. Switch to the &lt;a
-      href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
+      else&quot; entry below.
 
      &lt;dt&gt;EOF
 
@@ -39030,6 +39044,13 @@
       href=&quot;#permitted&quot;&gt;permitted slash&lt;/a&gt;. Switch to the &lt;a
       href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+
+     &lt;dt&gt;U+0027 APOSTROPHE (')
+
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
+      else&quot; entry below.
+
      &lt;dt&gt;EOF
 
      &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
@@ -39145,9 +39166,8 @@
 
      &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Append the current input
-      character to the current attribute's value. Switch to the &lt;a
-      href=&quot;#attribute4&quot;&gt;attribute value (unquoted) state&lt;/a&gt;.
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
+      else&quot; entry below.
 
      &lt;dt&gt;EOF
 
@@ -39169,7 +39189,8 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after0&quot;&gt;after attribute value (quoted)
+      state&lt;/a&gt;.
 
      &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
@@ -39197,7 +39218,8 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after0&quot;&gt;after attribute value (quoted)
+      state&lt;/a&gt;.
 
      &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
@@ -39247,11 +39269,14 @@
      &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
       state&lt;/a&gt;.
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+
+     &lt;dt&gt;U+0027 APOSTROPHE (')
+
      &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Append the current input
-      character to the current attribute's value. Stay in the &lt;a
-      href=&quot;#attribute4&quot;&gt;attribute value (unquoted) state&lt;/a&gt;.
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
+      else&quot; entry below.
 
      &lt;dt&gt;EOF
 
@@ -39278,6 +39303,42 @@
     &lt;p&gt;Finally, switch back to the attribute value state that you were in
      when were switched into this state.&lt;/p&gt;
 
+   &lt;dt&gt;&lt;dfn id=after0&gt;After attribute value (quoted) state&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+    &lt;dl class=switch&gt;
+     &lt;dt&gt;U+0009 CHARACTER TABULATION
+
+     &lt;dt&gt;U+000A LINE FEED (LF)
+
+     &lt;dt&gt;U+000B LINE TABULATION
+
+     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+
+     &lt;dt&gt;U+0020 SPACE
+
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+
+     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+
+     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
+      state&lt;/a&gt;.
+
+     &lt;dt&gt;U+002F SOLIDUS (/)
+
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt; unless this is a &lt;a
+      href=&quot;#permitted&quot;&gt;permitted slash&lt;/a&gt;. Switch to the &lt;a
+      href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+
+     &lt;dt&gt;Anything else
+
+     &lt;dd&gt;&lt;a href=&quot;#parse0&quot;&gt;Parse error&lt;/a&gt;. Reconsume the character in the&lt;a
+      href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+    &lt;/dl&gt;
+
    &lt;dt&gt;&lt;dfn id=bogus&gt;Bogus comment state&lt;/dfn&gt;
 
    &lt;dd&gt;
@@ -39537,7 +39598,7 @@
 
      &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after0&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
@@ -39557,7 +39618,7 @@
       name. Stay in the &lt;a href=&quot;#doctype1&quot;&gt;DOCTYPE name state&lt;/a&gt;.
     &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after0&gt;After DOCTYPE name state&lt;/dfn&gt;
+   &lt;dt&gt;&lt;dfn id=after1&gt;After DOCTYPE name state&lt;/dfn&gt;
 
    &lt;dd&gt;
     &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -39574,7 +39635,7 @@
 
      &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after0&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
+     &lt;dd&gt;Stay in the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
@@ -39664,7 +39725,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE public identifier
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
@@ -39695,7 +39756,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE public identifier
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
@@ -39718,7 +39779,7 @@
       identifier (single-quoted) state&lt;/a&gt;.
     &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after1&gt;After DOCTYPE public identifier state&lt;/dfn&gt;
+   &lt;dt&gt;&lt;dfn id=after2&gt;After DOCTYPE public identifier state&lt;/dfn&gt;
 
    &lt;dd&gt;
     &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -39735,7 +39796,7 @@
 
      &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE public identifier
+     &lt;dd&gt;Stay in the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
@@ -39827,7 +39888,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE system identifier
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
@@ -39858,7 +39919,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE system identifier
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
@@ -39881,7 +39942,7 @@
       identifier (single-quoted) state&lt;/a&gt;.
     &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after2&gt;After DOCTYPE system identifier state&lt;/dfn&gt;
+   &lt;dt&gt;&lt;dfn id=after3&gt;After DOCTYPE system identifier state&lt;/dfn&gt;
 
    &lt;dd&gt;
     &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
@@ -39898,7 +39959,7 @@
 
      &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE system identifier
+     &lt;dd&gt;Stay in the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
       state&lt;/a&gt;.
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
@@ -41137,7 +41198,7 @@
    href=&quot;#before4&quot; title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;. It
    can change to &quot;&lt;a href=&quot;#in-head&quot; title=&quot;insertion mode: in head&quot;&gt;in
    head&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-head0&quot; title=&quot;insertion mode: in head
-   noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after3&quot; title=&quot;insertion mode:
+   noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after4&quot; title=&quot;insertion mode:
    after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-body&quot; title=&quot;insertion mode: in
    body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-table&quot; title=&quot;insertion mode: in
    table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-caption&quot; title=&quot;insertion mode: in
@@ -41146,10 +41207,10 @@
    mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-row&quot;
    title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-cell&quot;
    title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-select&quot;
-   title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after4&quot;
+   title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after5&quot;
    title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, &quot;&lt;a
    href=&quot;#in-frameset&quot; title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot;,
-   and &quot;&lt;a href=&quot;#after5&quot; title=&quot;insertion mode: after frameset&quot;&gt;after
+   and &quot;&lt;a href=&quot;#after6&quot; title=&quot;insertion mode: after frameset&quot;&gt;after
    frameset&lt;/a&gt;&quot; during the course of the parsing, as described below. It
    affects how certain tokens are processed.
 
@@ -41247,7 +41308,7 @@
     null, switch the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a
     href=&quot;#before4&quot; title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;,
     otherwise, switch the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a
-    href=&quot;#after3&quot; title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;. In
+    href=&quot;#after4&quot; title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;. In
     either case, abort these steps. (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/li&gt;
    &lt;!-- XXX
    can the head element pointer ever be non-null when we're going
@@ -41436,7 +41497,7 @@
 
         &lt;p class=note&gt;This will result in an empty &lt;code&gt;&lt;a
          href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element being generated, with the
-         current token being reprocessed in the &quot;&lt;a href=&quot;#after3&quot;
+         current token being reprocessed in the &quot;&lt;a href=&quot;#after4&quot;
          title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;a
          href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt;.&lt;/p&gt;
       &lt;/dl&gt;
@@ -41657,7 +41718,7 @@
          href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
         &lt;p&gt;Change the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a
-         href=&quot;#after3&quot; title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;.&lt;/p&gt;
+         href=&quot;#after4&quot; title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;.&lt;/p&gt;
 
        &lt;dt&gt;An end tag whose tag name is one of: &quot;body&quot;, &quot;html&quot;, &quot;p&quot;, &quot;br&quot;
 
@@ -41733,7 +41794,7 @@
          tag name &quot;noscript&quot; had been seen and reprocess the current token.&lt;/p&gt;
       &lt;/dl&gt;
 
-     &lt;dt&gt;If the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; is &quot;&lt;dfn id=after3
+     &lt;dt&gt;If the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; is &quot;&lt;dfn id=after4
       title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot;
 
      &lt;dd&gt;
@@ -41882,7 +41943,7 @@
          href=&quot;#parse0&quot;&gt;parse error&lt;/a&gt;.
 
         &lt;p&gt;Change the &lt;a href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a
-         href=&quot;#after4&quot; title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;.&lt;/p&gt;
+         href=&quot;#after5&quot; title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;.&lt;/p&gt;
 
        &lt;dt&gt;An end tag whose tag name is &quot;html&quot;
 
@@ -43444,7 +43505,7 @@
       &lt;/dl&gt;
 
      &lt;dt id=parsing-main-afterbody&gt;If the &lt;a href=&quot;#insertion0&quot;&gt;insertion
-      mode&lt;/a&gt; is &quot;&lt;dfn id=after4 title=&quot;insertion mode: after body&quot;&gt;after
+      mode&lt;/a&gt; is &quot;&lt;dfn id=after5 title=&quot;insertion mode: after body&quot;&gt;after
       body&lt;/dfn&gt;&quot;
 
      &lt;dd&gt;
@@ -43536,7 +43597,7 @@
          href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), and the &lt;a
          href=&quot;#current4&quot;&gt;current node&lt;/a&gt; is no longer a
          &lt;code&gt;frameset&lt;/code&gt; element, then change the &lt;a
-         href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=&quot;#after5&quot;
+         href=&quot;#insertion0&quot;&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=&quot;#after6&quot;
          title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;.&lt;/p&gt;
 
        &lt;dt&gt;A start tag whose tag name is &quot;frame&quot;
@@ -43560,7 +43621,7 @@
       &lt;/dl&gt;
 
      &lt;dt id=parsing-main-afterframeset&gt;If the &lt;a href=&quot;#insertion0&quot;&gt;insertion
-      mode&lt;/a&gt; is &quot;&lt;dfn id=after5 title=&quot;insertion mode: after
+      mode&lt;/a&gt; is &quot;&lt;dfn id=after6 title=&quot;insertion mode: after
       frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot;
 
      &lt;dd&gt;

Modified: source
===================================================================
--- source	2008-03-02 12:02:46 UTC (rev 1302)
+++ source	2008-03-02 12:18:28 UTC (rev 1303)
@@ -34969,13 +34969,14 @@
   &lt;p&gt;Attributes have a name and a value. &lt;dfn
   title=&quot;syntax-attribute-name&quot;&gt;Attribute names&lt;/dfn&gt; must consist of
   one or more characters other than the &lt;span title=&quot;space
-  character&quot;&gt;space characters&lt;/span&gt;, U+003E GREATER-THAN SIGN (&gt;),
-  U+002F SOLIDUS (/), U+003D EQUALS SIGN (=), the U+0000 NULL
-  character, the control characters, and any characters that are not
-  defined by Unicode. In the HTML syntax, attribute names may be
-  written with any mix of lower- and uppercase letters that, when
-  converted to all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches
-  the attribute's name; attribute names are case-insensitive.&lt;/p&gt;
+  character&quot;&gt;space characters&lt;/span&gt;, U+0000 NULL, U+0022 QUOTATION
+  MARK (&amp;#x22;), U+0027 APOSTROPHE (&amp;#x27;), U+003E GREATER-THAN SIGN
+  (&gt;), U+002F SOLIDUS (/), and U+003D EQUALS SIGN (=) characters,
+  the control characters, and any characters that are not defined by
+  Unicode. In the HTML syntax, attribute names may be written with any
+  mix of lower- and uppercase letters that, when converted to
+  all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches the
+  attribute's name; attribute names are case-insensitive.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn title=&quot;syntax-attribute-value&quot;&gt;Attribute values&lt;/dfn&gt; are a
   mixture of &lt;span title=&quot;syntax-text&quot;&gt;text&lt;/span&gt; and &lt;span
@@ -35023,11 +35024,10 @@
     title=&quot;syntax-attribute-value&quot;&gt;attribute value&lt;/span&gt;, which, in
     addition to the requirements given above for attribute values,
     must not contain any literal &lt;span title=&quot;space character&quot;&gt;space
-    characters&lt;/span&gt;, U+003D EQUALS SIGN (=) characters, or U+003E
-    GREATER-THAN SIGN (&lt;code&gt;&gt;&lt;/code&gt;) characters, and must not,
-    furthermore, start with either a literal U+0022 QUOTATION MARK
-    (&lt;code&gt;&amp;#x22;&lt;/code&gt;) character or a literal U+0027 APOSTROPHE
-    (&lt;code&gt;&amp;#x27;&lt;/code&gt;) character.&lt;/p&gt;
+    characters&lt;/span&gt;, a U+0022 QUOTATION MARK (&lt;code&gt;&amp;#x22;&lt;/code&gt;)
+    characters, U+0027 APOSTROPHE (&lt;code&gt;&amp;#x27;&lt;/code&gt;) characters,
+    U+003D EQUALS SIGN (&lt;code&gt;=&lt;/code&gt;) characters, or U+003E
+    GREATER-THAN SIGN (&lt;code&gt;&gt;&lt;/code&gt;) characters.&lt;/p&gt;
 
     &lt;div class=&quot;example&quot;&gt;
 
@@ -35073,6 +35073,10 @@
 
     &lt;/div&gt;
 
+    &lt;p&gt;If an attribute using the single-quoted attribute syntax is to
+    be followed by another attribute, then there must be a &lt;span&gt;space
+    character&lt;/span&gt; separating the two.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;Double-quoted attribute value syntax&lt;/dt&gt;
@@ -35101,6 +35105,10 @@
 
     &lt;/div&gt;
 
+    &lt;p&gt;If an attribute using the double-quoted attribute syntax is to
+    be followed by another attribute, then there must be a &lt;span&gt;space
+    character&lt;/span&gt; separating the two.&lt;/p&gt;
+
    &lt;/dd&gt;
 
   &lt;/dl&gt;
@@ -36226,6 +36234,10 @@
 
   &lt;p&gt;The tokeniser state machine is as follows:&lt;/p&gt;
 
+  &lt;!-- XXX should go through these reordering the entries so that
+  they're in some consistent order, like, by Unicode, errors last, or
+  something --&gt;
+
   &lt;dl&gt;
 
    &lt;dt&gt;&lt;dfn&gt;Data state&lt;/dfn&gt;&lt;/dt&gt;
@@ -36528,11 +36540,11 @@
      slash&lt;/span&gt;. Stay in the &lt;span&gt;before attribute name
      state&lt;/span&gt;.&lt;/dd&gt;
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
      &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Start a new attribute in the
-     current tag token. Set that attribute's name to the current input
-     character, and its value to the empty string. Switch to the
-     &lt;span&gt;attribute name state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+     entry below.&lt;/dd&gt;
 
      &lt;dt&gt;EOF&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
@@ -36583,6 +36595,11 @@
      slash&lt;/span&gt;. Switch to the &lt;span&gt;before attribute name
      state&lt;/span&gt;.&lt;/dd&gt;
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+     entry below.&lt;/dd&gt;
+
      &lt;dt&gt;EOF&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
      token. Reconsume the EOF character in the &lt;span&gt;data
@@ -36685,9 +36702,8 @@
      state&lt;/span&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append the current input character
-     to the current attribute's value. Switch to the &lt;span&gt;attribute
-     value (unquoted) state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+     entry below.&lt;/dd&gt;
 
      &lt;dt&gt;EOF&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
@@ -36712,7 +36728,8 @@
     &lt;dl class=&quot;switch&quot;&gt;
 
      &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
+     state&lt;/span&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
      &lt;dd&gt;Switch to the &lt;span&gt;entity in attribute value state&lt;/span&gt;,
@@ -36742,7 +36759,8 @@
     &lt;dl class=&quot;switch&quot;&gt;
 
      &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
+     state&lt;/span&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
      &lt;dd&gt;Switch to the &lt;span&gt;entity in attribute value state&lt;/span&gt;,
@@ -36787,10 +36805,11 @@
      &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
      state&lt;/span&gt;.&lt;/dd&gt;
 
+     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
      &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append the current input character
-     to the current attribute's value. Stay in the &lt;span&gt;attribute
-     value (unquoted) state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+     entry below.&lt;/dd&gt;
 
      &lt;dt&gt;EOF&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
@@ -36823,6 +36842,39 @@
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+    &lt;dl class=&quot;switch&quot;&gt;
+
+     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+     &lt;dt&gt;U+000B LINE TABULATION&lt;/dt&gt;
+     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+     state&lt;/span&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt; unless this is a &lt;span&gt;permitted
+     slash&lt;/span&gt;. Switch to the &lt;span&gt;before attribute name
+     state&lt;/span&gt;.&lt;/dd&gt;
+
+     &lt;dt&gt;Anything else&lt;/dt&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the character in
+     the&lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008204.html">[html5] r1302 - /
</A></li>
	<LI>Next message: <A HREF="008206.html">[html5] r1304 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8205">[ date ]</a>
              <a href="thread.html#8205">[ thread ]</a>
              <a href="subject.html#8205">[ subject ]</a>
              <a href="author.html#8205">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
