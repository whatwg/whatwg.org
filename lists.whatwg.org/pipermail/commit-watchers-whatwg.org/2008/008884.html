<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1998 - [] (0) define what happens when you set onclick=''	on a document outside a Window
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1998%20-%20%5B%5D%20%280%29%20define%20what%20happens%20when%20you%20set%20onclick%3D%27%27%0A%09on%20a%20document%20outside%20a%20Window&In-Reply-To=%3C20080805075118.94C7D38E688%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008883.html">
   <LINK REL="Next"  HREF="008885.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1998 - [] (0) define what happens when you set onclick=''	on a document outside a Window</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1998%20-%20%5B%5D%20%280%29%20define%20what%20happens%20when%20you%20set%20onclick%3D%27%27%0A%09on%20a%20document%20outside%20a%20Window&In-Reply-To=%3C20080805075118.94C7D38E688%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1998 - [] (0) define what happens when you set onclick=''	on a document outside a Window">whatwg at whatwg.org
       </A><BR>
    <I>Tue Aug  5 00:51:18 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008883.html">[html5] r1997 - [e] (0) xref
</A></li>
        <LI>Next message: <A HREF="008885.html">[html5] r1999 - [] (0) define javascript: in Window-less	environments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8884">[ date ]</a>
              <a href="thread.html#8884">[ thread ]</a>
              <a href="subject.html#8884">[ subject ]</a>
              <a href="author.html#8884">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-08-05 00:51:18 -0700 (Tue, 05 Aug 2008)
New Revision: 1998

Modified:
   index
   source
Log:
[] (0) define what happens when you set onclick='' on a document outside a Window

Modified: index
===================================================================
--- index	2008-08-05 06:35:46 UTC (rev 1997)
+++ index	2008-08-05 07:51:18 UTC (rev 1998)
@@ -32447,6 +32447,7 @@
 
   &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;5.4.4.1. &lt;/span&gt;Event
    handler attributes&lt;/h5&gt;
+  &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null</A>))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E --&gt;
 
   &lt;p&gt;&lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; can have &lt;dfn id=event2&gt;event
    handler attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
@@ -32472,12 +32473,13 @@
    href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
   &lt;!-- SCRIPT EXEC --&gt;
 
-  &lt;p&gt;When an event handler content attribute is set, its new value must be
-   interpreted as the body of an anonymous function with a single argument
-   called &lt;code&gt;event&lt;/code&gt;, with the new function's scope chain being
-   linked from the activation object of the handler, to the element, to the
-   element's &lt;code&gt;form&lt;/code&gt; element if it is a form control, to the
-   &lt;code&gt;Document&lt;/code&gt; object, to the &lt;code&gt;&lt;a
+  &lt;p&gt;When an event handler content attribute is set, if the element is owned
+   by a &lt;code&gt;Document&lt;/code&gt; that is in a &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt;, its new value must be interpreted as the body of an anonymous
+   function with a single argument called &lt;code&gt;event&lt;/code&gt;, with the new
+   function's scope chain being linked from the activation object of the
+   handler, to the element, to the element's &lt;code&gt;form&lt;/code&gt; element if it
+   is a form control, to the &lt;code&gt;Document&lt;/code&gt; object, to the &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of that &lt;code&gt;Document&lt;/code&gt;. The
    function's &lt;code&gt;this&lt;/code&gt; parameter must be the &lt;code&gt;Element&lt;/code&gt;
@@ -32497,6 +32499,10 @@
    event handler must be the &lt;code&gt;Document&lt;/code&gt; object that owns the event
    handler content attribute that was set.
 
+  &lt;p&gt;When an event handler content attribute is set on an element owned by a
+   &lt;code&gt;Document&lt;/code&gt; that is not in a &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt;, the corresponding event handler attribute is not changed.
+
   &lt;p class=big-issue&gt;How do we allow non-JS event handlers?
 
   &lt;p&gt;&lt;dfn id=event4&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set

Modified: source
===================================================================
--- source	2008-08-05 06:35:46 UTC (rev 1997)
+++ source	2008-08-05 07:51:18 UTC (rev 1998)
@@ -29708,8 +29708,11 @@
   &lt;code&gt;script&lt;/code&gt; element section, which says scripts don't run
   when the document isn't active.&lt;/p&gt;
 
+
   &lt;h5 id=&quot;event-handler-attributes&quot;&gt;Event handler attributes&lt;/h5&gt;
 
+  &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null</A>))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E --&gt;
+
   &lt;p&gt;&lt;span&gt;HTML elements&lt;/span&gt; can have &lt;dfn&gt;event handler
   attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
   for the element on which they are specified.&lt;/p&gt;
@@ -29734,21 +29737,23 @@
   href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
   &lt;!-- SCRIPT EXEC --&gt;
-  &lt;p&gt;When an event handler content attribute is set, its new value
-  must be interpreted as the body of an anonymous function with a
-  single argument called &lt;code&gt;event&lt;/code&gt;, with the new function's
-  scope chain being linked from the activation object of the handler,
-  to the element, to the element's &lt;code&gt;form&lt;/code&gt; element if it is
-  a form control, to the &lt;code&gt;Document&lt;/code&gt; object, to the
-  &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt; of
-  that &lt;code&gt;Document&lt;/code&gt;. The function's &lt;code&gt;this&lt;/code&gt;
-  parameter must be the &lt;code&gt;Element&lt;/code&gt; object representing the
-  element. The resulting function must then be set as the value of the
-  corresponding event handler attribute, and the new value must be set
-  as the value of the content attribute. If the given function body
-  fails to compile, then the corresponding event handler attribute
-  must be set to null instead (the content attribute must still be
-  updated to the new value, though).&lt;/p&gt;
+  &lt;p&gt;When an event handler content attribute is set, if the element is
+  owned by a &lt;code&gt;Document&lt;/code&gt; that is in a &lt;span&gt;browsing
+  context&lt;/span&gt;, its new value must be interpreted as the body of an
+  anonymous function with a single argument called &lt;code&gt;event&lt;/code&gt;,
+  with the new function's scope chain being linked from the activation
+  object of the handler, to the element, to the element's
+  &lt;code&gt;form&lt;/code&gt; element if it is a form control, to the
+  &lt;code&gt;Document&lt;/code&gt; object, to the &lt;code&gt;Window&lt;/code&gt; object of
+  the &lt;span&gt;browsing context&lt;/span&gt; of that &lt;code&gt;Document&lt;/code&gt;. The
+  function's &lt;code&gt;this&lt;/code&gt; parameter must be the
+  &lt;code&gt;Element&lt;/code&gt; object representing the element. The resulting
+  function must then be set as the value of the corresponding event
+  handler attribute, and the new value must be set as the value of the
+  content attribute. If the given function body fails to compile, then
+  the corresponding event handler attribute must be set to null
+  instead (the content attribute must still be updated to the new
+  value, though).&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3,
   for more details on activation objects. &lt;a
@@ -29760,6 +29765,11 @@
   must be the &lt;code&gt;Document&lt;/code&gt; object that owns the event handler
   content attribute that was set.&lt;/p&gt;
 
+  &lt;p&gt;When an event handler content attribute is set on an element
+  owned by a &lt;code&gt;Document&lt;/code&gt; that is not in a &lt;span&gt;browsing
+  context&lt;/span&gt;, the corresponding event handler attribute is not
+  changed.&lt;/&gt;
+
   &lt;p class=&quot;big-issue&quot;&gt;How do we allow non-JS event handlers?&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set the


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008883.html">[html5] r1997 - [e] (0) xref
</A></li>
	<LI>Next message: <A HREF="008885.html">[html5] r1999 - [] (0) define javascript: in Window-less	environments
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8884">[ date ]</a>
              <a href="thread.html#8884">[ thread ]</a>
              <a href="subject.html#8884">[ subject ]</a>
              <a href="author.html#8884">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
