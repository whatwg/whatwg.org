<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2468 - [] (0) Define 'the document's address'.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2468%20-%20%5B%5D%20%280%29%20Define%20%27the%20document%27s%20address%27.&In-Reply-To=%3C20081127020032.90A55141AE4%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009350.html">
   <LINK REL="Next"  HREF="009352.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2468 - [] (0) Define 'the document's address'.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2468%20-%20%5B%5D%20%280%29%20Define%20%27the%20document%27s%20address%27.&In-Reply-To=%3C20081127020032.90A55141AE4%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2468 - [] (0) Define 'the document's address'.">whatwg at whatwg.org
       </A><BR>
    <I>Wed Nov 26 18:00:32 PST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="009350.html">[html5] r2467 - [ea] (0) Add explanatory text around &lt;abbr&gt; uses.
</A></li>
        <LI>Next message: <A HREF="009352.html">[html5] r2469 - [] (0) Clear up document.cookie;	make document.open() update the doc address.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9351">[ date ]</a>
              <a href="thread.html#9351">[ thread ]</a>
              <a href="subject.html#9351">[ subject ]</a>
              <a href="author.html#9351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-11-26 18:00:31 -0800 (Wed, 26 Nov 2008)
New Revision: 2468

Modified:
   index
   source
Log:
[] (0) Define 'the document's address'.

Modified: index
===================================================================
--- index	2008-11-26 23:14:05 UTC (rev 2467)
+++ index	2008-11-27 02:00:31 UTC (rev 2468)
@@ -17,7 +17,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 26 November 2008&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 27 November 2008&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3954,20 +3954,20 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there is no &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt; element that is both a
    child of &lt;a href=#the-head-element-0&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt; and has an
    &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute, then the
-   &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; is &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/li&gt;
+   &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; is &lt;a href=&quot;#the-document's-address&quot;&gt;the document's
+   address&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the
    &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute of the first such
    element.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; as the &lt;a href=#base-url&gt;base URL&lt;/a&gt;
-   (thus, the &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt; &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute isn't affect by &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt;
+   as the &lt;a href=#base-url&gt;base URL&lt;/a&gt; (thus, the &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt; &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute isn't affected by
+   &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes).&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; is the result of the
-   previous step if it was successful; otherwise it is &lt;span&gt;the
-   document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/li&gt;
+   previous step if it was successful; otherwise it is &lt;a href=&quot;#the-document's-address&quot;&gt;the
+   document's address&lt;/a&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=resolve-a-url&gt;resolve a URL&lt;/dfn&gt; to an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; the
   user agent must use the following steps. Resolving a URL can result
@@ -5575,8 +5575,13 @@
   &lt;p&gt;Every XML and HTML document in an HTML UA is represented by a
   &lt;code&gt;Document&lt;/code&gt; object. &lt;a href=#refsDOM3CORE&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;&lt;dfn id=&quot;the-document's-address&quot;&gt;The document's address&lt;/dfn&gt; is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
+  that is set when the &lt;code&gt;Document&lt;/code&gt; is created.&lt;/p&gt;
 
-  &lt;h4 id=documents-in-the-dom&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Documents in the DOM&lt;/h4&gt;
+  &lt;p&gt;When a &lt;code&gt;Document&lt;/code&gt; is created by a script using the
+  &lt;code title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API, &lt;a href=&quot;#the-document's-address&quot;&gt;the document's
+  address&lt;/a&gt; is the same as &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; of
+  the &lt;a href=#script-document-context&gt;script document context&lt;/a&gt; of that script.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn id=xml-documents&gt;XML
   documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn id=html-documents&gt;HTML
@@ -5588,6 +5593,10 @@
   &lt;code&gt;DOMImplementation&lt;/code&gt; object is initially an &lt;a href=#xml-documents title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt;, but can be made into an
   &lt;a href=#html-documents title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt; by calling &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt; on it.&lt;/p&gt;
 
+
+
+  &lt;h4 id=documents-in-the-dom&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Documents in the DOM&lt;/h4&gt;
+
   &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
   this specification) must also implement the
   &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; interface, available using
@@ -5679,15 +5688,13 @@
   &lt;h4 id=resource-metadata-management&gt;&lt;span class=secno&gt;3.2.3 &lt;/span&gt;&lt;dfn&gt;Resource metadata management&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-document-url title=dom-document-URL&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-  XXXDOCURL xref --&gt;.&lt;/p&gt;
+  attribute must return &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt;.&lt;/p&gt;
 
-
   &lt;p&gt;The &lt;dfn id=dom-document-referrer title=dom-document-referrer&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute
-  must return either the &lt;span title=&quot;the document's
-  address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;a href=#active-document&gt;active
-  document&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; at the
-  time the navigation was started (that is, the page which &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+  must return either the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+  address&quot;&gt;address&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the
+  &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; at the time the navigation was
+  started (that is, the page which &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
   to the current document), or the empty string if there is no such
   originating page, or if the UA has been configured not to report
   referrers in this case, or if the navigation was initiated for a
@@ -5702,7 +5709,6 @@
   and the current page does not (e.g. when navigating from an &lt;code title=&quot;&quot;&gt;https:&lt;/code&gt; page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt;
   page).&lt;/p&gt;
 
-
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-document-cookie title=dom-document-cookie&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
   attribute represents the cookies of the resource.&lt;/p&gt;
 
@@ -5714,29 +5720,27 @@
   &lt;p id=sandboxCookies&gt;On getting, if the &lt;a href=#sandboxed-origin-browsing-context-flag&gt;sandboxed origin
   browsing context flag&lt;/a&gt; is set on the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; of the document, the user agent must raise a
-  &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception. Otherwise, it must return the same
-  string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header
-  it would include if &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; the resource
-  indicated by &lt;span&gt;the document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;
-  over HTTP, as per RFC 2109 section 4.3.4 or later specifications. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception. Otherwise, it must return the
+  same string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP
+  header it would include if &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; the
+  resource indicated by &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; over HTTP,
+  as per RFC 2109 section 4.3.4 or later specifications. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, if the &lt;a href=#sandboxed-origin-browsing-context-flag&gt;sandboxed origin browsing context
   flag&lt;/a&gt; is set on the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
   document, the user agent must raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt;
-  exception. Otherwise, the user agent must act as it would
-  when processing cookies if it had just attempted to
-  &lt;a href=#fetch&gt;fetch&lt;/a&gt; &lt;span&gt;the document's address&lt;/span&gt;&lt;!-- XXXDOCURL
-  --&gt; over HTTP, and had received a response with a
-  &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the specified value,
-  as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3 or later
-  specifications. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
+  exception. Otherwise, the user agent must act as it would when
+  processing cookies if it had just attempted to &lt;a href=#fetch&gt;fetch&lt;/a&gt;
+  &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; over HTTP, and had received a
+  response with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the
+  specified value, as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3 or
+  later specifications. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=note&gt;Since the &lt;code title=dom-document-cookie&gt;&lt;a href=#dom-document-cookie&gt;cookie&lt;/a&gt;&lt;/code&gt; attribute is accessible
   across frames, the path restrictions on cookies are only a tool to
   help manage which cookies are sent to which parts of the site, and
   are not in any way a security feature.&lt;/p&gt;
 
-
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-document-lastmodified title=dom-document-lastModified&gt;&lt;code&gt;lastModified&lt;/code&gt;&lt;/dfn&gt;
   attribute, on getting, must return the date and time of the
   &lt;code&gt;Document&lt;/code&gt;'s source file's last modification, in the
@@ -15369,7 +15373,7 @@
 
   &lt;p&gt;If the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is not
   set when the element is created, the browsing context will remain at
-  the initial &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&lt;!-- XXX xref --&gt; page.&lt;/p&gt;
+  the initial &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt; page.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=attr-iframe-name title=attr-iframe-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, must be a &lt;a href=#valid-browsing-context-name&gt;valid browsing context
@@ -15566,8 +15570,8 @@
   while the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active
   document&lt;/a&gt; has the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the
   &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element's document, or the &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;em&gt;&lt;span title=&quot;the
-  document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXX xref --&gt;&lt;/em&gt; has the
+  context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;em&gt;&lt;a href=&quot;#the-document's-address&quot; title=&quot;the
+  document's address&quot;&gt;address&lt;/a&gt;&lt;!-- XXX xref --&gt;&lt;/em&gt; has the
   &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element's
   document, the following requirements apply:&lt;/p&gt;
 
@@ -28691,8 +28695,7 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;action&lt;/var&gt; is the empty string, let &lt;var title=&quot;&quot;&gt;action&lt;/var&gt; be &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-    XXXDOCURL --&gt;.&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;action&lt;/var&gt; is the empty string, let &lt;var title=&quot;&quot;&gt;action&lt;/var&gt; be &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p class=note&gt;This step is a willful violation of RFC 3986. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
@@ -31199,9 +31202,8 @@
   &lt;p&gt;The &lt;i&gt;action&lt;/i&gt; of the &lt;i title=attr-bb-type-makeapp-state&gt;&lt;a href=#the-make-application-state&gt;make application&lt;/a&gt;&lt;/i&gt; state is to
   confirm the user's intent to use the current site in a standalone
   fashion, and, provided the user's intent is confirmed, offer the
-  user a way to make the resource identified by &lt;span&gt;the document's
-  address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt; available in such a
-  fashion.&lt;/p&gt;
+  user a way to make the resource identified by &lt;a href=&quot;#the-document's-address&quot;&gt;the document's
+  address&lt;/a&gt; available in such a fashion.&lt;/p&gt;
 
   &lt;p class=warning&gt;The confirmation is needed because it is
   relatively easy to trick users into activating buttons. The
@@ -32139,16 +32141,13 @@
 
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is first created, it must be
   created with a single &lt;code&gt;Document&lt;/code&gt; in its session history,
-  whose &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!--
-  XXXDOCURL --&gt; is &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&lt;!-- XXX xref --&gt;, which is
-  marked as being an &lt;a href=#html-documents title=&quot;HTML documents&quot;&gt;HTML
-  document&lt;/a&gt;, and whose &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character
-  encoding&quot;&gt;character encoding&lt;/a&gt; is UTF-8. The
-  &lt;code&gt;Document&lt;/code&gt; must have a single child &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;
-  node, which itself has a single child &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt; node. If the
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is created specifically to be
-  immediately navigated, then that initial navigation will have
-  &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
+  whose &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; is
+  &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;, which is marked as being an &lt;a href=#html-documents title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, and whose &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; is
+  UTF-8. The &lt;code&gt;Document&lt;/code&gt; must have a single child
+  &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt; node, which itself has a single child
+  &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt; node. If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is
+  created specifically to be immediately navigated, then that initial
+  navigation will have &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p id=about-blank-origin&gt;The &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
   &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt; &lt;code&gt;Document&lt;/code&gt; is set when the
@@ -32624,8 +32623,7 @@
   &lt;a href=#valid-url&gt;valid URL&lt;/a&gt; for a page to load in the browsing
   context. If no arguments are provided, or if the first argument is
   the empty string, then the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument defaults
-  to &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&lt;!-- XXX xref --&gt;&quot;. The argument must be
-  &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; to an &lt;a href=#absolute-url&gt;absolute
+  to &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;. The argument must be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; to an &lt;a href=#absolute-url&gt;absolute
   URL&lt;/a&gt; (or an error) when the method is invoked.&lt;/p&gt;
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the
@@ -32897,8 +32895,9 @@
      server-based naming authority&lt;/dt&gt;
 
      &lt;dd&gt;The &lt;a href=#origin-0&gt;origin&lt;/a&gt; is the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
-     &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL
-     --&gt; of the &lt;code&gt;Document&lt;/code&gt; or image.&lt;/dd&gt;
+     &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
+     &lt;code&gt;Document&lt;/code&gt; or the &lt;a href=#url&gt;URL&lt;/a&gt; of the image, as
+     appropriate.&lt;/dd&gt;
 
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a
@@ -32917,8 +32916,8 @@
      &lt;code&gt;Document&lt;/code&gt; or script in which the &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL was found.&lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the &lt;span title=&quot;the
-     document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;
+     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the
+     document's address&quot;&gt;address&lt;/a&gt;
      &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;&lt;/dt&gt;
 
      &lt;dd&gt;The &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; is &lt;a href=#about-blank-origin&gt;the &lt;span&gt;origin&lt;/span&gt; it was
@@ -36393,9 +36392,8 @@
      abort the &lt;code title=dom-history-pushState&gt;&lt;a href=#dom-history-pushstate&gt;pushState()&lt;/a&gt;&lt;/code&gt;
      steps.&lt;/li&gt;
 
-     &lt;li&gt;Compare the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; to &lt;span&gt;the
-     document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;. If any part of these
-     two &lt;a href=#url title=URL&gt;URLs&lt;/a&gt; differ other than the &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt;, &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt;, and &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; components, then
+     &lt;li&gt;Compare the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; to &lt;a href=&quot;#the-document's-address&quot;&gt;the
+     document's address&lt;/a&gt;. If any part of these two &lt;a href=#url title=URL&gt;URLs&lt;/a&gt; differ other than the &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt;, &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt;, and &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; components, then
      raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception and abort the &lt;code title=dom-history-pushState&gt;&lt;a href=#dom-history-pushstate&gt;pushState()&lt;/a&gt;&lt;/code&gt; steps.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;p&gt;For the purposes of the comparison in the above substeps, the
@@ -36503,7 +36501,7 @@
   &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object for that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's
   &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;&lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; objects provide a representation of &lt;span title=&quot;the document's address&quot;&gt;their document's address&lt;/span&gt;, and
+  &lt;p&gt;&lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; objects provide a representation of &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;their document's address&lt;/a&gt;, and
   allow the &lt;a href=#current-entry&gt;current entry&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;'s session history to be changed, by adding or
   replacing entries in the &lt;code title=dom-history&gt;&lt;a href=#dom-history&gt;history&lt;/a&gt;&lt;/code&gt;
@@ -36529,10 +36527,9 @@
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-location-href title=dom-location-href&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return &lt;span title=&quot;the document's address&quot;&gt;the
-  address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the page represented by the
-  associated &lt;code&gt;Document&lt;/code&gt; object, as an &lt;a href=#absolute-url&gt;absolute
-  URL&lt;/a&gt;.&lt;/p&gt;
+  attribute must return &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the
+  address&lt;/a&gt; of the associated &lt;code&gt;Document&lt;/code&gt; object, as an
+  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;On setting, &lt;!--XXX Mozilla does this, but IE doesn't. What
   should we do?: the behavior depends on the context in which the
@@ -36580,12 +36577,13 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; interface also has the complement of
   &lt;a href=#url-decomposition-attributes&gt;URL decomposition attributes&lt;/a&gt;, &lt;dfn id=dom-location-protocol title=dom-location-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-location-host title=dom-location-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-location-port title=dom-location-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-location-hostname title=dom-location-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-location-pathname title=dom-location-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-location-search title=dom-location-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-location-hash title=dom-location-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;. These must follow
-  the rules given for URL decomposition attributes, with the &lt;a href=#concept-uda-input title=concept-uda-input&gt;input&lt;/a&gt; being &lt;span title=&quot;the
-  document's address&quot;&gt;the address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the page
-  represented by the associated &lt;code&gt;Document&lt;/code&gt; object, as an
-  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; (same as the &lt;code title=dom-location-href&gt;&lt;a href=#dom-location-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute), and the &lt;a href=#concept-uda-setter title=concept-uda-setter&gt;common setter action&lt;/a&gt; being the
-  same as setting the &lt;code title=dom-location-href&gt;&lt;a href=#dom-location-href&gt;href&lt;/a&gt;&lt;/code&gt;
-  attribute to the new output value.&lt;/p&gt;
+  the rules given for URL decomposition attributes, with the &lt;a href=#concept-uda-input title=concept-uda-input&gt;input&lt;/a&gt; being &lt;a href=&quot;#the-document's-address&quot; title=&quot;the
+  document's address&quot;&gt;the address&lt;/a&gt; of the associated
+  &lt;code&gt;Document&lt;/code&gt; object, as an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; (same
+  as the &lt;code title=dom-location-href&gt;&lt;a href=#dom-location-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute), and
+  the &lt;a href=#concept-uda-setter title=concept-uda-setter&gt;common setter action&lt;/a&gt;
+  being the same as setting the &lt;code title=dom-location-href&gt;&lt;a href=#dom-location-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute to the new output
+  value.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-location-resolveurl title=dom-location-resolveURL&gt;&lt;code&gt;resolveURL(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must &lt;a href=#resolve-a-url title=&quot;resolve a
   url&quot;&gt;resolve&lt;/a&gt; its &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, and if
@@ -36705,10 +36703,9 @@
 
    &lt;li id=navigate-fragid-step&gt;&lt;p&gt;&lt;i&gt;Fragment identifiers&lt;/i&gt;: If
    the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the new resource is the same as
-   the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!--XXXDOCURL--&gt; of the &lt;a href=#active-document&gt;active
-   document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being
-   navigated, ignoring any &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; components of those
+   the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
+   &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+   being navigated, ignoring any &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; components of those
    &lt;a href=#url title=URL&gt;URLs&lt;/a&gt;, and the new resource is to be
    fetched using HTTP GET or equivalent, then &lt;a href=#scroll-to-fragid title=navigate-fragid&gt;navigate to that fragment identifier&lt;/a&gt;
    and abort these steps.&lt;/li&gt;
@@ -36803,11 +36800,10 @@
     URL of the resource that was requested (the one that matched the
     &lt;a href=#concept-appcache-fallback-ns title=concept-appcache-fallback-ns&gt;fallback
     namespace&lt;/a&gt;), not the fallback resource, as the resource's
-    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL
-    --&gt;. However, the user agent may indicate to the user that the
-    original page load failed, that the page used was a fallback
-    resource, and what the URL of the fallback resource actually
-    is.&lt;/p&gt;
+    &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;. However, the
+    user agent may indicate to the user that the original page load
+    failed, that the page used was a fallback resource, and what the
+    URL of the fallback resource actually is.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -36865,8 +36861,18 @@
      &lt;dd&gt;Follow the steps given in the &lt;a href=#read-plugin title=navigate-plugin&gt;plugin&lt;/a&gt; section, and abort these
      steps.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;/li&gt;
+    &lt;/dl&gt;&lt;p&gt;Any &lt;code&gt;Document&lt;/code&gt; created by these steps must have its
+    &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; set to the
+    &lt;a href=#url&gt;URL&lt;/a&gt; that was originally to be &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt;, ignoring any other data that was
+    used to obtain the resource (e.g. the entity body in the case of a
+    POST submission is not part of &lt;a href=&quot;#the-document's-address&quot;&gt;the document's
+    address&lt;/a&gt;, nor is the URL of the fallback resource in the
+    case of the original load having failed and that URL having been
+    found to match a &lt;a href=#concept-appcache-fallback-ns title=concept-appcache-fallback-ns&gt;fallback
+    namespace&lt;/a&gt;).&lt;/p&gt;
 
+   &lt;/li&gt;
+
    &lt;li id=navigate-non-Document&gt;&lt;p&gt;&lt;i&gt;Non-document content&lt;/i&gt;: If,
    given &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;, the new resource is to be handled
    by displaying some sort of inline content, e.g. a native rendering
@@ -37178,7 +37184,7 @@
   identifier, then the user agent must &lt;a href=#update-the-session-history-with-the-new-page&gt;update the session
   history with the new page&lt;/a&gt;, where &quot;the new page&quot; has the same
   &lt;code&gt;Document&lt;/code&gt; as before but with the URL having the newly
-  specified fragment identifier.&lt;/p&gt;&lt;!-- XXXDOCURL ? --&gt;
+  specified fragment identifier.&lt;/p&gt;
 
   &lt;p&gt;Part of that algorithm involves the user agent having to
   &lt;a href=#scroll-to-the-fragment-identifier&gt;scroll to the fragment identifier&lt;/a&gt;, which is the
@@ -38632,29 +38638,27 @@
   authentication headers must be included in the request. Which other
   headers are required depends on the URLs involved.&lt;/p&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If both the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the
-   &lt;code&gt;Document&lt;/code&gt; object containing the hyperlink being audited
-   and the ping URL have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt;&lt;/dt&gt;
+  &lt;dl class=switch&gt;&lt;dt&gt;If both the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
+   of the &lt;code&gt;Document&lt;/code&gt; object containing the hyperlink being
+   audited and the ping URL have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt;&lt;/dt&gt;
 
    &lt;dd&gt;The request must include a &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP
-   header with, as its value, the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the document
-   containing the hyperlink, and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP
-   header with, as its value, the address of the &lt;a href=#absolute-url&gt;absolute
-   URL&lt;/a&gt; of the target of the hyperlink. The request must not
-   include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP header.&lt;/dd&gt;
+   header with, as its value, the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+   address&quot;&gt;address&lt;/a&gt; of the document containing the hyperlink,
+   and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP header with, as its value,
+   the address of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the target of the
+   hyperlink. The request must not include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP header. &lt;!-- why not? --&gt;&lt;/dd&gt;
 
    &lt;dt&gt;Otherwise, if the origins are different, but the document
    containing the hyperlink being audited was not retrieved over an
-   encrypted connection&lt;/dt&gt;
+   encrypted connection&lt;/dt&gt; &lt;!-- why different? --&gt;
 
    &lt;dd&gt;The request must include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP
-   header [sic] with, as its value, the location of the document
-   containing the hyperlink, a &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP
-   header with the same value, and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt;
-   HTTP header with, as its value, the address of the target of the
-   hyperlink.&lt;/dd&gt;
+   header [sic] with, as its value, the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+   address&quot;&gt;address&lt;/a&gt; of the document containing the hyperlink, a
+   &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP header with the same value,
+   and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP header with, as its value,
+   the address of the target of the hyperlink.&lt;/dd&gt;
 
    &lt;dt&gt;Otherwise, the origins are different and the document
    containing the hyperlink being audited was retrieved over an

Modified: source
===================================================================
--- source	2008-11-26 23:14:05 UTC (rev 2467)
+++ source	2008-11-27 02:00:31 UTC (rev 2468)
@@ -3567,22 +3567,21 @@
    child of &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; and has an
    &lt;code title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute, then the
    &lt;span&gt;document base URL&lt;/span&gt; is &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/p&gt;&lt;/li&gt;
+   address&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the
    &lt;code title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute of the first such
    element.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span title=&quot;resolve a URL&quot;&gt;Resolve&lt;/span&gt; the &lt;var
-   title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;span&gt;the document's
-   address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; as the &lt;span&gt;base URL&lt;/span&gt;
-   (thus, the &lt;code&gt;base&lt;/code&gt; &lt;code
-   title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute isn't affect by &lt;code
-   title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes).&lt;/p&gt;&lt;/li&gt;
+   title=&quot;&quot;&gt;url&lt;/var&gt; URL, using &lt;span&gt;the document's address&lt;/span&gt;
+   as the &lt;span&gt;base URL&lt;/span&gt; (thus, the &lt;code&gt;base&lt;/code&gt; &lt;code
+   title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute isn't affected by
+   &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes).&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The &lt;span&gt;document base URL&lt;/span&gt; is the result of the
    previous step if it was successful; otherwise it is &lt;span&gt;the
-   document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;.&lt;/p&gt;&lt;/li&gt;
+   document's address&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -5568,8 +5567,13 @@
   &lt;code&gt;Document&lt;/code&gt; object. &lt;a
   href=&quot;#refsDOM3CORE&quot;&gt;[DOM3CORE]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;&lt;dfn&gt;The document's address&lt;/dfn&gt; is an &lt;span&gt;absolute URL&lt;/span&gt;
+  that is set when the &lt;code&gt;Document&lt;/code&gt; is created.&lt;/p&gt;
 
-  &lt;h4&gt;Documents in the DOM&lt;/h4&gt;
+  &lt;p&gt;When a &lt;code&gt;Document&lt;/code&gt; is created by a script using the
+  &lt;code title=&quot;&quot;&gt;createDocument()&lt;/code&gt; API, &lt;span&gt;the document's
+  address&lt;/span&gt; is the same as &lt;span&gt;the document's address&lt;/span&gt; of
+  the &lt;span&gt;script document context&lt;/span&gt; of that script.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;Document&lt;/code&gt; objects are assumed to be &lt;dfn&gt;XML
   documents&lt;/dfn&gt; unless they are flagged as being &lt;dfn&gt;HTML
@@ -5586,6 +5590,10 @@
   &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; by calling &lt;code
   title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; on it.&lt;/p&gt;
 
+
+
+  &lt;h4&gt;Documents in the DOM&lt;/h4&gt;
+
   &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
   this specification) must also implement the
   &lt;code&gt;HTMLDocument&lt;/code&gt; interface, available using
@@ -5677,16 +5685,14 @@
   &lt;h4&gt;&lt;dfn&gt;Resource metadata management&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-document-URL&quot;&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-  XXXDOCURL xref --&gt;.&lt;/p&gt;
+  attribute must return &lt;span&gt;the document's address&lt;/span&gt;.&lt;/p&gt;
 
-
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-document-referrer&quot;&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute
   must return either the &lt;span title=&quot;the document's
-  address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOXURL xref --&gt; of the &lt;span&gt;active
-  document&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt; at the
-  time the navigation was started (that is, the page which &lt;span
+  address&quot;&gt;address&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of the
+  &lt;span&gt;source browsing context&lt;/span&gt; at the time the navigation was
+  started (that is, the page which &lt;span
   title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt;
   to the current document), or the empty string if there is no such
   originating page, or if the UA has been configured not to report
@@ -5705,7 +5711,6 @@
   title=&quot;&quot;&gt;https:&lt;/code&gt; page to an &lt;code title=&quot;&quot;&gt;http:&lt;/code&gt;
   page).&lt;/p&gt;
 
-
   &lt;hr&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-document-cookie&quot;&gt;&lt;code&gt;cookie&lt;/code&gt;&lt;/dfn&gt;
@@ -5719,24 +5724,23 @@
   &lt;p id=&quot;sandboxCookies&quot;&gt;On getting, if the &lt;span&gt;sandboxed origin
   browsing context flag&lt;/span&gt; is set on the &lt;span&gt;browsing
   context&lt;/span&gt; of the document, the user agent must raise a
-  &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception. Otherwise, it must return the same
-  string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP header
-  it would include if &lt;span title=&quot;fetch&quot;&gt;fetching&lt;/span&gt; the resource
-  indicated by &lt;span&gt;the document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;
-  over HTTP, as per RFC 2109 section 4.3.4 or later specifications. &lt;a
+  &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception. Otherwise, it must return the
+  same string as the value of the &lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt; HTTP
+  header it would include if &lt;span title=&quot;fetch&quot;&gt;fetching&lt;/span&gt; the
+  resource indicated by &lt;span&gt;the document's address&lt;/span&gt; over HTTP,
+  as per RFC 2109 section 4.3.4 or later specifications. &lt;a
   href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt; &lt;a
   href=&quot;#refsRFC2965&quot;&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, if the &lt;span&gt;sandboxed origin browsing context
   flag&lt;/span&gt; is set on the &lt;span&gt;browsing context&lt;/span&gt; of the
   document, the user agent must raise a &lt;code&gt;SECURITY_ERR&lt;/code&gt;
-  exception. Otherwise, the user agent must act as it would
-  when processing cookies if it had just attempted to
-  &lt;span&gt;fetch&lt;/span&gt; &lt;span&gt;the document's address&lt;/span&gt;&lt;!-- XXXDOCURL
-  --&gt; over HTTP, and had received a response with a
-  &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the specified value,
-  as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3 or later
-  specifications. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt; &lt;a
+  exception. Otherwise, the user agent must act as it would when
+  processing cookies if it had just attempted to &lt;span&gt;fetch&lt;/span&gt;
+  &lt;span&gt;the document's address&lt;/span&gt; over HTTP, and had received a
+  response with a &lt;code&gt;Set-Cookie&lt;/code&gt; header whose value was the
+  specified value, as per RFC 2109 sections 4.3.1, 4.3.2, and 4.3.3 or
+  later specifications. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt; &lt;a
   href=&quot;#refsRFC2965&quot;&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Since the &lt;code
@@ -5745,7 +5749,6 @@
   help manage which cookies are sent to which parts of the site, and
   are not in any way a security feature.&lt;/p&gt;
 
-
   &lt;hr&gt; 
 
   &lt;p&gt;The &lt;dfn
@@ -16411,7 +16414,7 @@
 
   &lt;p&gt;If the &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute is not
   set when the element is created, the browsing context will remain at
-  the initial &lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt; page.&lt;/p&gt;
+  the initial &lt;code&gt;about:blank&lt;/code&gt; page.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;attr-iframe-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt;
   attribute, if present, must be a &lt;span&gt;valid browsing context
@@ -32379,8 +32382,7 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;action&lt;/var&gt; is the empty string, let &lt;var
-    title=&quot;&quot;&gt;action&lt;/var&gt; be &lt;span&gt;the document's address&lt;/span&gt;&lt;!--
-    XXXDOCURL --&gt;.&lt;/p&gt;
+    title=&quot;&quot;&gt;action&lt;/var&gt; be &lt;span&gt;the document's address&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;This step is a willful violation of RFC 3986. &lt;a
     href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
@@ -35453,8 +35455,7 @@
   confirm the user's intent to use the current site in a standalone
   fashion, and, provided the user's intent is confirmed, offer the
   user a way to make the resource identified by &lt;span&gt;the document's
-  address&lt;/span&gt;&lt;!-- XXXDOCURL xref --&gt; available in such a
-  fashion.&lt;/p&gt;
+  address&lt;/span&gt; available in such a fashion.&lt;/p&gt;
 
   &lt;p class=&quot;warning&quot;&gt;The confirmation is needed because it is
   relatively easy to trick users into activating buttons. The
@@ -36543,16 +36544,15 @@
 
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is first created, it must be
   created with a single &lt;code&gt;Document&lt;/code&gt; in its session history,
-  whose &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!--
-  XXXDOCURL --&gt; is &lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt;, which is
-  marked as being an &lt;span title=&quot;HTML documents&quot;&gt;HTML
-  document&lt;/span&gt;, and whose &lt;span title=&quot;document's character
-  encoding&quot;&gt;character encoding&lt;/span&gt; is UTF-8. The
-  &lt;code&gt;Document&lt;/code&gt; must have a single child &lt;code&gt;html&lt;/code&gt;
-  node, which itself has a single child &lt;code&gt;body&lt;/code&gt; node. If the
-  &lt;span&gt;browsing context&lt;/span&gt; is created specifically to be
-  immediately navigated, then that initial navigation will have
-  &lt;span&gt;replacement enabled&lt;/span&gt;.&lt;/p&gt;
+  whose &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; is
+  &lt;code&gt;about:blank&lt;/code&gt;, which is marked as being an &lt;span
+  title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;, and whose &lt;span
+  title=&quot;document's character encoding&quot;&gt;character encoding&lt;/span&gt; is
+  UTF-8. The &lt;code&gt;Document&lt;/code&gt; must have a single child
+  &lt;code&gt;html&lt;/code&gt; node, which itself has a single child
+  &lt;code&gt;body&lt;/code&gt; node. If the &lt;span&gt;browsing context&lt;/span&gt; is
+  created specifically to be immediately navigated, then that initial
+  navigation will have &lt;span&gt;replacement enabled&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p id=&quot;about-blank-origin&quot;&gt;The &lt;span&gt;origin&lt;/span&gt; of the
   &lt;code&gt;about:blank&lt;/code&gt; &lt;code&gt;Document&lt;/code&gt; is set when the
@@ -37091,8 +37091,8 @@
   &lt;span&gt;valid URL&lt;/span&gt; for a page to load in the browsing
   context. If no arguments are provided, or if the first argument is
   the empty string, then the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument defaults
-  to &quot;&lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt;&quot;. The argument must be
-  &lt;span title=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt; to an &lt;span&gt;absolute
+  to &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;. The argument must be &lt;span
+  title=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt; to an &lt;span&gt;absolute
   URL&lt;/span&gt; (or an error) when the method is invoked.&lt;/p&gt;
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the
@@ -37399,8 +37399,9 @@
      server-based naming authority&lt;/dt&gt;
 
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; is the &lt;span&gt;origin&lt;/span&gt; of the
-     &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL
-     --&gt; of the &lt;code&gt;Document&lt;/code&gt; or image.&lt;/dd&gt;
+     &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; of the
+     &lt;code&gt;Document&lt;/code&gt; or the &lt;span&gt;URL&lt;/span&gt; of the image, as
+     appropriate.&lt;/dd&gt;
 
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; or image was generated from a
@@ -37422,7 +37423,7 @@
 
 
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the &lt;span title=&quot;the
-     document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;
+     document's address&quot;&gt;address&lt;/span&gt;
      &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;&lt;/dt&gt;
 
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; is &lt;a
@@ -41418,8 +41419,8 @@
      steps.&lt;/li&gt;
 
      &lt;li&gt;Compare the resulting &lt;span&gt;absolute URL&lt;/span&gt; to &lt;span&gt;the
-     document's address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt;. If any part of these
-     two &lt;span title=&quot;URL&quot;&gt;URLs&lt;/span&gt; differ other than the &lt;span
+     document's address&lt;/span&gt;. If any part of these two &lt;span
+     title=&quot;URL&quot;&gt;URLs&lt;/span&gt; differ other than the &lt;span
      title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/span&gt;, &lt;span
      title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt;, and &lt;span
      title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt; components, then
@@ -41583,9 +41584,8 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-location-href&quot;&gt;&lt;code&gt;href&lt;/code&gt;&lt;/dfn&gt;
   attribute must return &lt;span title=&quot;the document's address&quot;&gt;the
-  address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the page represented by the
-  associated &lt;code&gt;Document&lt;/code&gt; object, as an &lt;span&gt;absolute
-  URL&lt;/span&gt;.&lt;/p&gt;
+  address&lt;/span&gt; of the associated &lt;code&gt;Document&lt;/code&gt; object, as an
+  &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;On setting, &lt;!--XXX Mozilla does this, but IE doesn't. What
   should we do?: the behavior depends on the context in which the
@@ -41647,13 +41647,13 @@
   title=&quot;dom-location-hash&quot;&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;. These must follow
   the rules given for URL decomposition attributes, with the &lt;span
   title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; being &lt;span title=&quot;the
-  document's address&quot;&gt;the address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the page
-  represented by the associated &lt;code&gt;Document&lt;/code&gt; object, as an
-  &lt;span&gt;absolute URL&lt;/span&gt; (same as the &lt;code
-  title=&quot;dom-location-href&quot;&gt;href&lt;/code&gt; attribute), and the &lt;span
-  title=&quot;concept-uda-setter&quot;&gt;common setter action&lt;/span&gt; being the
-  same as setting the &lt;code title=&quot;dom-location-href&quot;&gt;href&lt;/code&gt;
-  attribute to the new output value.&lt;/p&gt;
+  document's address&quot;&gt;the address&lt;/span&gt; of the associated
+  &lt;code&gt;Document&lt;/code&gt; object, as an &lt;span&gt;absolute URL&lt;/span&gt; (same
+  as the &lt;code title=&quot;dom-location-href&quot;&gt;href&lt;/code&gt; attribute), and
+  the &lt;span title=&quot;concept-uda-setter&quot;&gt;common setter action&lt;/span&gt;
+  being the same as setting the &lt;code
+  title=&quot;dom-location-href&quot;&gt;href&lt;/code&gt; attribute to the new output
+  value.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -41789,10 +41789,9 @@
 
    &lt;li id=&quot;navigate-fragid-step&quot;&gt;&lt;p&gt;&lt;i&gt;Fragment identifiers&lt;/i&gt;: If
    the &lt;span&gt;absolute URL&lt;/span&gt; of the new resource is the same as
-   the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!--XXXDOCURL--&gt; of the &lt;span&gt;active
-   document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; being
-   navigated, ignoring any &lt;span
+   the &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; of the
+   &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt;
+   being navigated, ignoring any &lt;span
    title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt; components of those
    &lt;span title=&quot;URL&quot;&gt;URLs&lt;/span&gt;, and the new resource is to be
    fetched using HTTP GET or equivalent, then &lt;span
@@ -41899,11 +41898,10 @@
     URL of the resource that was requested (the one that matched the
     &lt;span title=&quot;concept-appcache-fallback-ns&quot;&gt;fallback
     namespace&lt;/span&gt;), not the fallback resource, as the resource's
-    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL
-    --&gt;. However, the user agent may indicate to the user that the
-    original page load failed, that the page used was a fallback
-    resource, and what the URL of the fallback resource actually
-    is.&lt;/p&gt;
+    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;. However, the
+    user agent may indicate to the user that the original page load
+    failed, that the page used was a fallback resource, and what the
+    URL of the fallback resource actually is.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -41971,6 +41969,18 @@
 
     &lt;/dl&gt;
 
+    &lt;p&gt;Any &lt;code&gt;Document&lt;/code&gt; created by these steps must have its
+    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; set to the
+    &lt;span&gt;URL&lt;/span&gt; that was originally to be &lt;span
+    title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;, ignoring any other data that was
+    used to obtain the resource (e.g. the entity body in the case of a
+    POST submission is not part of &lt;span&gt;the document's
+    address&lt;/span&gt;, nor is the URL of the fallback resource in the
+    case of the original load having failed and that URL having been
+    found to match a &lt;span
+    title=&quot;concept-appcache-fallback-ns&quot;&gt;fallback
+    namespace&lt;/span&gt;).&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li id=&quot;navigate-non-Document&quot;&gt;&lt;p&gt;&lt;i&gt;Non-document content&lt;/i&gt;: If,
@@ -42324,7 +42334,7 @@
   identifier, then the user agent must &lt;span&gt;update the session
   history with the new page&lt;/span&gt;, where &quot;the new page&quot; has the same
   &lt;code&gt;Document&lt;/code&gt; as before but with the URL having the newly
-  specified fragment identifier.&lt;/p&gt;&lt;!-- XXXDOCURL ? --&gt;
+  specified fragment identifier.&lt;/p&gt;
 
   &lt;p&gt;Part of that algorithm involves the user agent having to
   &lt;span&gt;scroll to the fragment identifier&lt;/span&gt;, which is the
@@ -43945,29 +43955,28 @@
 
   &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;If both the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the
-   &lt;code&gt;Document&lt;/code&gt; object containing the hyperlink being audited
-   and the ping URL have the &lt;span&gt;same origin&lt;/span&gt;&lt;/dt&gt;
+   &lt;dt&gt;If both the &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;
+   of the &lt;code&gt;Document&lt;/code&gt; object containing the hyperlink being
+   audited and the ping URL have the &lt;span&gt;same origin&lt;/span&gt;&lt;/dt&gt;
 
    &lt;dd&gt;The request must include a &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP
    header with, as its value, the &lt;span title=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;&lt;!-- XXXDOCURL --&gt; of the document
-   containing the hyperlink, and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP
-   header with, as its value, the address of the &lt;span&gt;absolute
-   URL&lt;/span&gt; of the target of the hyperlink. The request must not
-   include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP header.&lt;/dd&gt;
+   address&quot;&gt;address&lt;/span&gt; of the document containing the hyperlink,
+   and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP header with, as its value,
+   the address of the &lt;span&gt;absolute URL&lt;/span&gt; of the target of the
+   hyperlink. The request must not include a &lt;code
+   title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP header. &lt;!-- why not? --&gt;&lt;/dd&gt;
 
    &lt;dt&gt;Otherwise, if the origins are different, but the document
    containing the hyperlink being audited was not retrieved over an
-   encrypted connection&lt;/dt&gt;
+   encrypted connection&lt;/dt&gt; &lt;!-- why different? --&gt;
 
    &lt;dd&gt;The request must include a &lt;code title=&quot;&quot;&gt;Referer&lt;/code&gt; HTTP
-   header [sic] with, as its value, the location of the document
-   containing the hyperlink, a &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP
-   header with the same value, and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt;
-   HTTP header with, as its value, the address of the target of the
-   hyperlink.&lt;/dd&gt;
+   header [sic] with, as its value, the &lt;span title=&quot;the document's
+   address&quot;&gt;address&lt;/span&gt; of the document containing the hyperlink, a
+   &lt;code title=&quot;&quot;&gt;Ping-From&lt;/code&gt; HTTP header with the same value,
+   and a &lt;code title=&quot;&quot;&gt;Ping-To&lt;/code&gt; HTTP header with, as its value,
+   the address of the target of the hyperlink.&lt;/dd&gt;
 
    &lt;dt&gt;Otherwise, the origins are different and the document
    containing the hyperlink being audited was retrieved over an


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009350.html">[html5] r2467 - [ea] (0) Add explanatory text around &lt;abbr&gt; uses.
</A></li>
	<LI>Next message: <A HREF="009352.html">[html5] r2469 - [] (0) Clear up document.cookie;	make document.open() update the doc address.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9351">[ date ]</a>
              <a href="thread.html#9351">[ thread ]</a>
              <a href="subject.html#9351">[ subject ]</a>
              <a href="author.html#9351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
