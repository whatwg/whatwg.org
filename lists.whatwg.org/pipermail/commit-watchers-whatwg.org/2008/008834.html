<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1936 - [] (0) Case Sensitivity Training
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1936%20-%20%5B%5D%20%280%29%20Case%20Sensitivity%20Training&In-Reply-To=%3C20080725092604.6D64D1428AB%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008833.html">
   <LINK REL="Next"  HREF="008835.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1936 - [] (0) Case Sensitivity Training</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1936%20-%20%5B%5D%20%280%29%20Case%20Sensitivity%20Training&In-Reply-To=%3C20080725092604.6D64D1428AB%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1936 - [] (0) Case Sensitivity Training">whatwg at whatwg.org
       </A><BR>
    <I>Fri Jul 25 02:26:04 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008833.html">[html5] r1935 - [] (0) Make application/octet-stream with &lt;object&gt;	with no type='' trigger sniffing.
</A></li>
        <LI>Next message: <A HREF="008835.html">[html5] r1937 - [gow] (2) Define order and case-sensitivity of	getElementsByClassName().
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8834">[ date ]</a>
              <a href="thread.html#8834">[ thread ]</a>
              <a href="subject.html#8834">[ subject ]</a>
              <a href="author.html#8834">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-07-25 02:26:03 -0700 (Fri, 25 Jul 2008)
New Revision: 1936

Modified:
   index
   source
Log:
[] (0) Case Sensitivity Training

Modified: index
===================================================================
--- index	2008-07-24 22:36:09 UTC (rev 1935)
+++ index	2008-07-25 09:26:03 UTC (rev 1936)
@@ -24,7 +24,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 24 July
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft&gt;Draft Recommendation &mdash; 25 July
     2008&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
@@ -143,12 +143,11 @@
 
   &lt;p class=big-issue&gt;Some of the more major known issues are marked like
    this. There are many other issues that have been raised as well; the
-   issues given in this document are not the only known issues! There are
-   also some spec-wide issues that have not yet been addressed:
-   case-sensitivity is a very poorly handled topic right now, and the firing
+   issues given in this document are not the only known issues! Also, firing
    of events needs to be unified (right now some bubble, some don't, they all
-   use different text to fire events, etc). It would also be nice to unify
-   the rules on downloading content when attributes change (e.g. &lt;code
+   use different text to fire events, we don't have an official queueing
+   mechanism, etc). It would also be nice to unify the rules on
+   fetching/downloading content when attributes change (e.g. &lt;code
    title=&quot;&quot;&gt;src&lt;/code&gt; attributes) - should they initiate downloads when the
    element immediately, is inserted in the document, when active scripts end,
    etc. This matters e.g. if an attribute is set twice in a row (does it hit
@@ -225,126 +224,129 @@
         conformance requirements for APIs exposed to JavaScript&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#urls&quot;&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;URLs&lt;/a&gt;
+     &lt;li&gt;&lt;a href=&quot;#case-sensitivity&quot;&gt;&lt;span class=secno&gt;2.3
+      &lt;/span&gt;Case-sensitivity&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#urls&quot;&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;URLs&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#terminology0&quot;&gt;&lt;span class=secno&gt;2.3.1
+       &lt;li&gt;&lt;a href=&quot;#terminology0&quot;&gt;&lt;span class=secno&gt;2.4.1
         &lt;/span&gt;Terminology&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Parsing
+       &lt;li&gt;&lt;a href=&quot;#parsing0&quot;&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Parsing
         URLs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#resolving&quot;&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Resolving
+       &lt;li&gt;&lt;a href=&quot;#resolving&quot;&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Resolving
         URLs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dynamic&quot;&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Dynamic changes
+       &lt;li&gt;&lt;a href=&quot;#dynamic&quot;&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dynamic changes
         to base URLs&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;2.3.5 &lt;/span&gt;Interfaces
+       &lt;li&gt;&lt;a href=&quot;#interfaces&quot;&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Interfaces
         for URL manipulation&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#common0&quot;&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common
+     &lt;li&gt;&lt;a href=&quot;#common0&quot;&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common
       microsyntaxes&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#common1&quot;&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser
+       &lt;li&gt;&lt;a href=&quot;#common1&quot;&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser
         idioms&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#boolean&quot;&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean
+       &lt;li&gt;&lt;a href=&quot;#boolean&quot;&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean
         attributes&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#numbers&quot;&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Numbers&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#numbers&quot;&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Numbers&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#unsigned&quot;&gt;&lt;span class=secno&gt;2.4.3.1. &lt;/span&gt;Unsigned
+         &lt;li&gt;&lt;a href=&quot;#unsigned&quot;&gt;&lt;span class=secno&gt;2.5.3.1. &lt;/span&gt;Unsigned
           integers&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#signed&quot;&gt;&lt;span class=secno&gt;2.4.3.2. &lt;/span&gt;Signed
+         &lt;li&gt;&lt;a href=&quot;#signed&quot;&gt;&lt;span class=secno&gt;2.5.3.2. &lt;/span&gt;Signed
           integers&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#real-numbers&quot;&gt;&lt;span class=secno&gt;2.4.3.3. &lt;/span&gt;Real
+         &lt;li&gt;&lt;a href=&quot;#real-numbers&quot;&gt;&lt;span class=secno&gt;2.5.3.3. &lt;/span&gt;Real
           numbers&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#ratios&quot;&gt;&lt;span class=secno&gt;2.4.3.4. &lt;/span&gt;Ratios&lt;/a&gt;
+         &lt;li&gt;&lt;a href=&quot;#ratios&quot;&gt;&lt;span class=secno&gt;2.5.3.4. &lt;/span&gt;Ratios&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#percentages-and-dimensions&quot;&gt;&lt;span class=secno&gt;2.4.3.5.
+         &lt;li&gt;&lt;a href=&quot;#percentages-and-dimensions&quot;&gt;&lt;span class=secno&gt;2.5.3.5.
           &lt;/span&gt;Percentages and dimensions&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#lists&quot;&gt;&lt;span class=secno&gt;2.4.3.6. &lt;/span&gt;Lists of
+         &lt;li&gt;&lt;a href=&quot;#lists&quot;&gt;&lt;span class=secno&gt;2.5.3.6. &lt;/span&gt;Lists of
           integers&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dates&quot;&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dates and
+       &lt;li&gt;&lt;a href=&quot;#dates&quot;&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Dates and
         times&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#specific&quot;&gt;&lt;span class=secno&gt;2.4.4.1. &lt;/span&gt;Specific
+         &lt;li&gt;&lt;a href=&quot;#specific&quot;&gt;&lt;span class=secno&gt;2.5.4.1. &lt;/span&gt;Specific
           moments in time&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#vaguer&quot;&gt;&lt;span class=secno&gt;2.4.4.2. &lt;/span&gt;Vaguer
+         &lt;li&gt;&lt;a href=&quot;#vaguer&quot;&gt;&lt;span class=secno&gt;2.5.4.2. &lt;/span&gt;Vaguer
           moments in time&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#time-offsets&quot;&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Time
+       &lt;li&gt;&lt;a href=&quot;#time-offsets&quot;&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Time
         offsets&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#tokens&quot;&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Tokens&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#tokens&quot;&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Tokens&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#keywords&quot;&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Keywords and
+       &lt;li&gt;&lt;a href=&quot;#keywords&quot;&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Keywords and
         enumerated attributes&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#syntax-references&quot;&gt;&lt;span class=secno&gt;2.4.8
+       &lt;li&gt;&lt;a href=&quot;#syntax-references&quot;&gt;&lt;span class=secno&gt;2.5.8
         &lt;/span&gt;References&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#common2&quot;&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common DOM
+     &lt;li&gt;&lt;a href=&quot;#common2&quot;&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Common DOM
       interfaces&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#reflecting&quot;&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Reflecting
+       &lt;li&gt;&lt;a href=&quot;#reflecting&quot;&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Reflecting
         content attributes in DOM attributes&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#collections&quot;&gt;&lt;span class=secno&gt;2.5.2
+       &lt;li&gt;&lt;a href=&quot;#collections&quot;&gt;&lt;span class=secno&gt;2.6.2
         &lt;/span&gt;Collections&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#htmlcollection&quot;&gt;&lt;span class=secno&gt;2.5.2.1.
+         &lt;li&gt;&lt;a href=&quot;#htmlcollection&quot;&gt;&lt;span class=secno&gt;2.6.2.1.
           &lt;/span&gt;HTMLCollection&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#htmlformcontrolscollection&quot;&gt;&lt;span class=secno&gt;2.5.2.2.
+         &lt;li&gt;&lt;a href=&quot;#htmlformcontrolscollection&quot;&gt;&lt;span class=secno&gt;2.6.2.2.
           &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;
 
-         &lt;li&gt;&lt;a href=&quot;#htmloptionscollection&quot;&gt;&lt;span class=secno&gt;2.5.2.3.
+         &lt;li&gt;&lt;a href=&quot;#htmloptionscollection&quot;&gt;&lt;span class=secno&gt;2.6.2.3.
           &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#domtokenlist&quot;&gt;&lt;span class=secno&gt;2.5.3
+       &lt;li&gt;&lt;a href=&quot;#domtokenlist&quot;&gt;&lt;span class=secno&gt;2.6.3
         &lt;/span&gt;DOMTokenList&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#domstringmap&quot;&gt;&lt;span class=secno&gt;2.5.4
+       &lt;li&gt;&lt;a href=&quot;#domstringmap&quot;&gt;&lt;span class=secno&gt;2.6.4
         &lt;/span&gt;DOMStringMap&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#dom-feature&quot;&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;DOM feature
+       &lt;li&gt;&lt;a href=&quot;#dom-feature&quot;&gt;&lt;span class=secno&gt;2.6.5 &lt;/span&gt;DOM feature
         strings&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#fetching&quot;&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching
+     &lt;li&gt;&lt;a href=&quot;#fetching&quot;&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching
       resources&lt;/a&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;2.7
+     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;2.8
       &lt;/span&gt;Determining the type of a resource&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;2.7.1
+       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;2.8.1
         &lt;/span&gt;Content-Type metadata&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;2.7.2
+       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;2.8.2
         &lt;/span&gt;Content-Type sniffing: Web pages&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;2.7.3
+       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;2.8.3
         &lt;/span&gt;Content-Type sniffing: text or binary&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;2.7.4
+       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;2.8.4
         &lt;/span&gt;Content-Type sniffing: unknown type&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;2.7.5
+       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;2.8.5
         &lt;/span&gt;Content-Type sniffing: image&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type4&quot;&gt;&lt;span class=secno&gt;2.7.6
+       &lt;li&gt;&lt;a href=&quot;#content-type4&quot;&gt;&lt;span class=secno&gt;2.8.6
         &lt;/span&gt;Content-Type sniffing: feed or HTML&lt;/a&gt;
       &lt;/ul&gt;
     &lt;/ul&gt;
@@ -2390,9 +2392,9 @@
    id=xml-compatible&gt;XML-compatible&lt;/dfn&gt; if they match the &lt;a
    href=&quot;<A HREF="http://www.w3.org/TR/REC-xml/#NT-Name">http://www.w3.org/TR/REC-xml/#NT-Name</A>&quot;&gt;&lt;code
    title=&quot;&quot;&gt;Name&lt;/code&gt;&lt;/a&gt; production defined in XML, they contain no U+003A
-   COLON (:) characters, and they do not start with three characters &quot;&lt;code
-   title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;&lt;/p&gt;
-  &lt;!-- XXX case-insensitive ASCII --&gt;
+   COLON (:) characters, and their first three characters are not an &lt;a
+   href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code
+   title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;
 
   &lt;h4 id=dom-trees&gt;&lt;span class=secno&gt;2.1.2 &lt;/span&gt;DOM trees&lt;/h4&gt;
 
@@ -2874,15 +2876,48 @@
   requirement in the canvas section for toDataURL() and
   getContext(). --&gt;
 
-  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;URLs&lt;/h3&gt;
+  &lt;h3 id=case-sensitivity&gt;&lt;span class=secno&gt;2.3 &lt;/span&gt;Case-sensitivity&lt;/h3&gt;
 
+  &lt;p&gt;This specification defines several comparison operators for strings.
+
+  &lt;p&gt;Comparing two strings in a &lt;dfn id=case-sensitive&gt;case-sensitive&lt;/dfn&gt;
+   manner means comparing them exactly, codepoint for codepoint.
+
+  &lt;p&gt;Comparing two strings in a &lt;dfn id=ascii&gt;ASCII case-insensitive&lt;/dfn&gt;
+   manner means comparing them exactly, codepoint for codepoint, except that
+   the characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A
+   to LATIN CAPITAL LETTER Z) and the corresponding characters in the range
+   U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) are
+   considered to also match.
+
+  &lt;p&gt;Comparing two strings in a &lt;dfn id=compatibility&gt;compatibility
+   caseless&lt;/dfn&gt; manner means using the Unicode &lt;i&gt;compatibility caseless
+   match&lt;/i&gt; operation to compare the two strings. &lt;a
+   href=&quot;#refsUNICODECASE&quot;&gt;[UNICODECASE]&lt;/a&gt;&lt;/p&gt;
+  &lt;!-- XXX refs to
+  Unicode Standard Annex #21, Case Mappings --&gt;
+
+  &lt;p&gt;&lt;dfn id=converting title=&quot;converted to uppercase&quot;&gt;Converting a string to
+   uppercase&lt;/dfn&gt; means replacing all characters in the range U+0061 ..
+   U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) with the
+   corresponding characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL
+   LETTER A to LATIN CAPITAL LETTER Z).
+
+  &lt;p&gt;&lt;dfn id=converting0 title=&quot;converted to lowercase&quot;&gt;Converting a string
+   to lowercase&lt;/dfn&gt; means replacing all characters in the range U+0041 ..
+   U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) with the
+   corresponding characters in the range U+0061 .. U+007A (i.e. LATIN SMALL
+   LETTER A to LATIN SMALL LETTER Z).
+
+  &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;URLs&lt;/h3&gt;
+
   &lt;p&gt;This specification defines the term &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt;, and defines
    various algorithms for dealing with URLs, because for historical reasons
    the rules defined by the URI and IRI specifications are not a complete
    description of what HTML user agents need to implement to be compatible
    with Web content.
 
-  &lt;h4 id=terminology0&gt;&lt;span class=secno&gt;2.3.1 &lt;/span&gt;Terminology&lt;/h4&gt;
+  &lt;h4 id=terminology0&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Terminology&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=url&gt;URL&lt;/dfn&gt; is a string used to identify a resource. &lt;span
    id=urldoc&gt;A &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is always associated with a
@@ -2922,7 +2957,7 @@
    specification if they pretend the term &quot;URL&quot; as used herein is really
    called something else altogether.
 
-  &lt;h4 id=parsing0&gt;&lt;span class=secno&gt;2.3.2 &lt;/span&gt;Parsing URLs&lt;/h4&gt;
+  &lt;h4 id=parsing0&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Parsing URLs&lt;/h4&gt;
 
   &lt;p&gt;To &lt;dfn id=parse0&gt;parse a URL&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its
    component parts, the user agent must use the following steps:
@@ -3038,7 +3073,7 @@
   it's not clear RFC3986 does a good job of defining that anymore
   (earlier URI specs did) --&gt;
 
-  &lt;h4 id=resolving&gt;&lt;span class=secno&gt;2.3.3 &lt;/span&gt;Resolving URLs&lt;/h4&gt;
+  &lt;h4 id=resolving&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Resolving URLs&lt;/h4&gt;
 
   &lt;p&gt;Relative URLs are resolved relative to a base URL. The &lt;dfn
    id=base-&gt;base URL&lt;/dfn&gt; of a &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is the &lt;a
@@ -3245,7 +3280,7 @@
    href=&quot;#resolve&quot; title=&quot;resolve a URL&quot;&gt;resolving&lt;/a&gt; it results in the same
    URL without an error.
 
-  &lt;h4 id=dynamic&gt;&lt;span class=secno&gt;2.3.4 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
+  &lt;h4 id=dynamic&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code title=attr-xml-base&gt;&lt;a href=&quot;#xmlbase&quot;&gt;xml:base&lt;/a&gt;&lt;/code&gt;
    attribute changes, the attribute's element, and all descendant elements,
@@ -3309,7 +3344,7 @@
      URL&lt;/a&gt; that might no longer correspond to the image being shown.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h4 id=interfaces&gt;&lt;span class=secno&gt;2.3.5 &lt;/span&gt;Interfaces for URL
+  &lt;h4 id=interfaces&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Interfaces for URL
    manipulation&lt;/h4&gt;
 
   &lt;p&gt;An interface that has a complement of &lt;dfn id=url-decomposition&gt;URL
@@ -3573,7 +3608,7 @@
    &lt;/table&gt;
   &lt;/div&gt;
 
-  &lt;h3 id=common0&gt;&lt;span class=secno&gt;2.4 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
+  &lt;h3 id=common0&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common microsyntaxes&lt;/h3&gt;
 
   &lt;p&gt;There are various places in HTML that accept particular data types, such
    as dates or numbers. This section describes what the conformance criteria
@@ -3585,7 +3620,7 @@
    attribute values are clearly defined either in terms of microsyntaxes or
    in terms of other specs, or as &quot;Text&quot; or some such.
 
-  &lt;h4 id=common1&gt;&lt;span class=secno&gt;2.4.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
+  &lt;h4 id=common1&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Common parser idioms&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=space title=&quot;space character&quot;&gt;space characters&lt;/dfn&gt;, for
    the purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
@@ -3631,7 +3666,7 @@
    the Unicode character class Zs. In both cases, the collected characters
    are not used. &lt;a href=&quot;#refsUNICODE&quot;&gt;[UNICODE]&lt;/a&gt;
 
-  &lt;h4 id=boolean&gt;&lt;span class=secno&gt;2.4.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
+  &lt;h4 id=boolean&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Boolean attributes&lt;/h4&gt;
 
   &lt;p&gt;A number of attributes in HTML5 are &lt;dfn id=boolean0 title=&quot;boolean
    attribute&quot;&gt;boolean attributes&lt;/dfn&gt;. The presence of a boolean attribute
@@ -3639,12 +3674,13 @@
    represents the false value.
 
   &lt;p&gt;If the attribute is present, its value must either be the empty string
-   or a value that is a case-insensitive &lt;!-- XXX ASCII --&gt; match for the
-   attribute's canonical name, with no leading or trailing whitespace.
+   or a value that is a, &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match
+   for the attribute's canonical name, with no leading or trailing
+   whitespace.
 
-  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.4.3 &lt;/span&gt;Numbers&lt;/h4&gt;
+  &lt;h4 id=numbers&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Numbers&lt;/h4&gt;
 
-  &lt;h5 id=unsigned&gt;&lt;span class=secno&gt;2.4.3.1. &lt;/span&gt;Unsigned integers&lt;/h5&gt;
+  &lt;h5 id=unsigned&gt;&lt;span class=secno&gt;2.5.3.1. &lt;/span&gt;Unsigned integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid0&gt;valid non-negative integer&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
@@ -3705,7 +3741,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=signed&gt;&lt;span class=secno&gt;2.4.3.2. &lt;/span&gt;Signed integers&lt;/h5&gt;
+  &lt;h5 id=signed&gt;&lt;span class=secno&gt;2.5.3.2. &lt;/span&gt;Signed integers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid1&gt;valid integer&lt;/dfn&gt; if it consists of one
    of more characters in the range U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE
@@ -3783,7 +3819,7 @@
      title=&quot;&quot;&gt;value&lt;/var&gt;, otherwise return 0-&lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.4.3.3. &lt;/span&gt;Real numbers&lt;/h5&gt;
+  &lt;h5 id=real-numbers&gt;&lt;span class=secno&gt;2.5.3.3. &lt;/span&gt;Real numbers&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid2&gt;valid floating point number&lt;/dfn&gt; if it
    consists of one of more characters in the range U+0030 DIGIT ZERO (0) to
@@ -3905,7 +3941,7 @@
      title=&quot;&quot;&gt;value&lt;/var&gt;, otherwise return 0-&lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=ratios&gt;&lt;span class=secno&gt;2.4.3.4. &lt;/span&gt;Ratios&lt;/h5&gt;
+  &lt;h5 id=ratios&gt;&lt;span class=secno&gt;2.5.3.4. &lt;/span&gt;Ratios&lt;/h5&gt;
 
   &lt;p class=note&gt;The algorithms described in this section are used by the
    &lt;code&gt;&lt;a href=&quot;#progress&quot;&gt;progress&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
@@ -4053,7 +4089,7 @@
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.4.3.5.
+  &lt;h5 id=percentages-and-dimensions&gt;&lt;span class=secno&gt;2.5.3.5.
    &lt;/span&gt;Percentages and dimensions&lt;/h5&gt;
 
   &lt;p class=big-issue&gt;&lt;dfn id=valid4&gt;valid positive non-zero integers&lt;/dfn&gt;
@@ -4061,7 +4097,7 @@
    height/width on img, embed, object &mdash; lengths in css pixels or
    percentages)
 
-  &lt;h5 id=lists&gt;&lt;span class=secno&gt;2.4.3.6. &lt;/span&gt;Lists of integers&lt;/h5&gt;
+  &lt;h5 id=lists&gt;&lt;span class=secno&gt;2.5.3.6. &lt;/span&gt;Lists of integers&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=valid5&gt;valid list of integers&lt;/dfn&gt; is a number of &lt;a
    href=&quot;#valid1&quot; title=&quot;valid integer&quot;&gt;valid integers&lt;/a&gt; separated by
@@ -4342,7 +4378,7 @@
     &lt;p&gt;Return the &lt;var title=&quot;&quot;&gt;numbers&lt;/var&gt; list and abort.
   &lt;/ol&gt;
 
-  &lt;h4 id=dates&gt;&lt;span class=secno&gt;2.4.4 &lt;/span&gt;Dates and times&lt;/h4&gt;
+  &lt;h4 id=dates&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Dates and times&lt;/h4&gt;
 
   &lt;p&gt;In the algorithms below, the &lt;dfn id=number&gt;number of days in month &lt;var
    title=&quot;&quot;&gt;month&lt;/var&gt; of year &lt;var title=&quot;&quot;&gt;year&lt;/var&gt;&lt;/dfn&gt; is:
@@ -4353,7 +4389,7 @@
    4 but not by 100; and &lt;em&gt;28&lt;/em&gt; otherwise. This takes into account leap
    years in the Gregorian calendar. &lt;a href=&quot;#refsGREGORIAN&quot;&gt;[GREGORIAN]&lt;/a&gt;
 
-  &lt;h5 id=specific&gt;&lt;span class=secno&gt;2.4.4.1. &lt;/span&gt;Specific moments in time&lt;/h5&gt;
+  &lt;h5 id=specific&gt;&lt;span class=secno&gt;2.5.4.1. &lt;/span&gt;Specific moments in time&lt;/h5&gt;
 
   &lt;p&gt;A string is a &lt;dfn id=valid6&gt;valid datetime&lt;/dfn&gt; if it has four digits
    (representing the year), a literal hyphen, two digits (representing the
@@ -4669,7 +4705,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;time&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;timezone&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h5 id=vaguer&gt;&lt;span class=secno&gt;2.4.4.2. &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
+  &lt;h5 id=vaguer&gt;&lt;span class=secno&gt;2.5.4.2. &lt;/span&gt;Vaguer moments in time&lt;/h5&gt;
 
   &lt;p&gt;This section defines &lt;dfn id=date-or title=&quot;date or time string&quot;&gt;date or
    time strings&lt;/dfn&gt;. There are two kinds, &lt;dfn id=date-or0 title=&quot;date or
@@ -5051,14 +5087,14 @@
     &lt;p&gt;Abort these steps (the string is parsed).
   &lt;/ol&gt;
 
-  &lt;h4 id=time-offsets&gt;&lt;span class=secno&gt;2.4.5 &lt;/span&gt;Time offsets&lt;/h4&gt;
+  &lt;h4 id=time-offsets&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Time offsets&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;&lt;dfn id=valid7&gt;valid time offset&lt;/dfn&gt;, &lt;dfn
    id=rules4&gt;rules for parsing time offsets&lt;/dfn&gt;, &lt;dfn id=time-offset&gt;time
    offset serialization rules&lt;/dfn&gt;; in the format &quot;5d4h3m2s1ms&quot; or &quot;3m 9.2s&quot;
    or &quot;00:00:00.00&quot; or similar.
 
-  &lt;h4 id=tokens&gt;&lt;span class=secno&gt;2.4.6 &lt;/span&gt;Tokens&lt;/h4&gt;
+  &lt;h4 id=tokens&gt;&lt;span class=secno&gt;2.5.6 &lt;/span&gt;Tokens&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=set-of&gt;set of space-separated tokens&lt;/dfn&gt; is a set of zero or
    more words separated by one or more &lt;a href=&quot;#space&quot; title=&quot;space
@@ -5202,7 +5238,7 @@
    to a single space, except at the start and end of the string, where such
    spaces are removed.
 
-  &lt;h4 id=keywords&gt;&lt;span class=secno&gt;2.4.7 &lt;/span&gt;Keywords and enumerated
+  &lt;h4 id=keywords&gt;&lt;span class=secno&gt;2.5.7 &lt;/span&gt;Keywords and enumerated
    attributes&lt;/h4&gt;
 
   &lt;p&gt;Some attributes are defined as taking one of a finite set of keywords.
@@ -5216,21 +5252,19 @@
    default&lt;/em&gt;, the second is the &lt;em&gt;missing value default&lt;/em&gt;.
 
   &lt;p&gt;If an enumerated attribute is specified, the attribute's value must be
-   one of the given keywords that are not said to be non-conforming, with no
-   leading or trailing whitespace. The keyword may use any mix of uppercase
-   and lowercase letters.&lt;!-- XXX should
-  say &quot;uppercase and lowercase ASCII letters&quot; or some such --&gt;
+   an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for one of the given
+   keywords that are not said to be non-conforming, with no leading or
+   trailing whitespace.
 
-  &lt;p&gt;When the attribute is specified, if its value
-   &lt;span&gt;case-insensitively&lt;/span&gt;&lt;!-- XXX ascii case folding --&gt; matches one
-   of the given keywords then that keyword's state is the state that the
-   attribute represents. If the attribute value matches none of the given
-   keywords, but the attribute has an &lt;em&gt;invalid value default&lt;/em&gt;, then
-   the attribute represents that state. Otherwise, if the attribute value
-   matches none of the keywords but there is a &lt;em&gt;missing value default&lt;/em&gt;
-   state defined, then &lt;em&gt;that&lt;/em&gt; is the state represented by the
-   attribute. Otherwise, there is no default, and invalid values must be
-   ignored.
+  &lt;p&gt;When the attribute is specified, if its value is an &lt;span&gt;ASCII
+   case-insensitively&lt;/span&gt; match for one of the given keywords then that
+   keyword's state is the state that the attribute represents. If the
+   attribute value matches none of the given keywords, but the attribute has
+   an &lt;em&gt;invalid value default&lt;/em&gt;, then the attribute represents that
+   state. Otherwise, if the attribute value matches none of the keywords but
+   there is a &lt;em&gt;missing value default&lt;/em&gt; state defined, then
+   &lt;em&gt;that&lt;/em&gt; is the state represented by the attribute. Otherwise, there
+   is no default, and invalid values must be ignored.
 
   &lt;p&gt;When the attribute is &lt;em&gt;not&lt;/em&gt; specified, if there is a &lt;em&gt;missing
    value default&lt;/em&gt; state defined, then that is the state represented by
@@ -5248,7 +5282,7 @@
    &lt;em&gt;missing value default&lt;/em&gt;), but for various reasons that isn't the
    way this specification actually defines it.
 
-  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.4.8 &lt;/span&gt;References&lt;/h4&gt;
+  &lt;h4 id=syntax-references&gt;&lt;span class=secno&gt;2.5.8 &lt;/span&gt;References&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=valid8&gt;valid hash-name reference&lt;/dfn&gt; to an element of type
    &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; is a string consisting of a U+0023 NUMBER SIGN
@@ -5273,16 +5307,22 @@
    &lt;li&gt;
     &lt;p&gt;Return the first element of type &lt;var title=&quot;&quot;&gt;type&lt;/var&gt; that has an
      &lt;code title=attr-id&gt;&lt;a href=&quot;#id&quot;&gt;id&lt;/a&gt;&lt;/code&gt; or &lt;code
-     title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value &lt;!-- Unicode,
-   apparently: &lt;annevk&gt; seems IE might be Unicode case-insensitive for
-   ID [and name] values (related to &lt;map&gt; anyway, and at least for the
-   character &euml; --&gt;
-     case-insensitively matches &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.
+     title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is a &lt;a
+     href=&quot;#compatibility&quot;&gt;compatibility caseless&lt;/a&gt; match for &lt;var
+     title=&quot;&quot;&gt;s&lt;/var&gt;.
+   &lt;/li&gt;
+   &lt;!--
+   That's what IE does:
+   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5%22%20src%3Dimage%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5%22%20src%3Dimage%3E</A>
+   ...except that doesn't explain why this fails:
+   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%26%23xFB01%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5F%26%23x0131%3B%26%23x0307%3B%22%20src%3Dimage%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%26%23xFB01%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5F%26%23x0131%3B%26%23x0307%3B%22%20src%3Dimage%3E</A>
+   maybe they just don't know about combining dot above?
+   --&gt;
   &lt;/ol&gt;
 
-  &lt;h3 id=common2&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
+  &lt;h3 id=common2&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
 
-  &lt;h4 id=reflecting&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Reflecting content
+  &lt;h4 id=reflecting&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Reflecting content
    attributes in DOM attributes&lt;/h4&gt;
 
   &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are defined to
@@ -5320,13 +5360,13 @@
    on getting, the DOM attribute must return the conforming value associated
    with the state the attribute is in (in its canonical case), or the empty
    string if the attribute is in a state that has no associated keyword
-   value; and on setting, if the new value case-insensitively &lt;!-- XXX --&gt;
-   matches one of the keywords given for that attribute, then the content
-   attribute must be set to the conforming value associated with the state
-   that the attribute would be in if set to the given new value, otherwise,
-   if the new value is the empty string, then the content attribute must be
-   removed, otherwise, the setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt;
-   exception.
+   value; and on setting, if the new value is an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+   case-insensitive&lt;/a&gt; match for one of the keywords given for that
+   attribute, then the content attribute must be set to the conforming value
+   associated with the state that the attribute would be in if set to the
+   given new value, otherwise, if the new value is the empty string, then the
+   content attribute must be removed, otherwise, the setter must raise a
+   &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
 
   &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but doesn't
    fall into any of the above categories, then the getting and setting must
@@ -5446,7 +5486,7 @@
    attribute. Otherwise, the DOM attribute must be set to the empty string.&lt;/p&gt;
   &lt;!-- XXX or raise an exception? --&gt;
 
-  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Collections&lt;/h4&gt;
+  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.6.2 &lt;/span&gt;Collections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
    href=&quot;#htmlformcontrolscollection0&quot;&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;,
@@ -5478,7 +5518,7 @@
   &lt;p&gt;An attribute that returns a collection must return the same object every
    time it is retrieved.
 
-  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.5.2.1. &lt;/span&gt;HTMLCollection&lt;/h5&gt;
+  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.6.2.1. &lt;/span&gt;HTMLCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface
    represents a generic &lt;a href=&quot;#collections0&quot;
@@ -5524,7 +5564,7 @@
 
   &lt;p&gt;If no such elements are found, then the method must return null.
 
-  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.5.2.2.
+  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.6.2.2.
    &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a
@@ -5584,7 +5624,7 @@
 <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
 --&gt;
 
-  &lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.5.2.3.
+  &lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.6.2.3.
    &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a
@@ -5665,7 +5705,7 @@
    HTMLSelectElement and HTMLOptionsCollection on the same object, and so
    people use them almost interchangeably in the wild.
 
-  &lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
+  &lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.6.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domtokenlist0&quot;&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface
    represents an interface to an underlying string that consists of an &lt;a
@@ -5807,7 +5847,7 @@
    id=stringify title=dom-tokenlist-toString&gt;stringify&lt;/dfn&gt; to the object's
    underlying string representation.
 
-  &lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
+  &lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.6.4 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#domstringmap0&quot;&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface
    represents a set of name-value pairs. When a &lt;code&gt;&lt;a
@@ -5842,7 +5882,7 @@
    deleting names, passing &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; as the name, and must
    return true.
 
-  &lt;h4 id=dom-feature&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
+  &lt;h4 id=dom-feature&gt;&lt;span class=secno&gt;2.6.5 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
 
   &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support, and for
    obtaining implementations of interfaces, using &lt;a
@@ -5878,7 +5918,7 @@
    &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;
    &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.
 
-  &lt;h3 id=fetching&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/h3&gt;
+  &lt;h3 id=fetching&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Fetching resources&lt;/h3&gt;
 
   &lt;p class=big-issue&gt;replace all instances of the word 'fetch' or 'download'
    with a reference to this section, and put something here that talks about
@@ -5895,7 +5935,7 @@
   (e.g. not loading video poster frames until the video is on the
   screen) --&gt;
 
-  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.7 &lt;/span&gt;Determining the
+  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Determining the
    type of a resource&lt;/h3&gt;
 
   &lt;p class=warning&gt;It is imperative that the rules in this section be
@@ -5907,7 +5947,7 @@
    the end user can be exposed to malicious content, making the user
    vulnerable to cookie theft attacks and other cross-site scripting attacks.
 
-  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;2.7.1 &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
+  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
 
   &lt;p&gt;What explicit &lt;dfn id=content-type5 title=Content-Type&gt;Content-Type
    metadata&lt;/dfn&gt; is associated with the resource (the resource's type
@@ -5939,9 +5979,9 @@
 
   &lt;ol&gt;
    &lt;li&gt;
-    &lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; that are a
-     case-insensitive&lt;!-- XXX ASCII--&gt; match for the word 'charset'. If no
-     such match is found, return nothing.&lt;/p&gt;
+    &lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; that are an
+     &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the word
+     &quot;charset&quot;. If no such match is found, return nothing.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020 characters that
@@ -5990,7 +6030,7 @@
   &lt;p class=note&gt;The above algorithm is a willful violation of the HTTP
    specification. &lt;a href=&quot;#refsRFC2616&quot;&gt;[RFC2616]&lt;/a&gt;
 
-  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;2.7.2 &lt;/span&gt;Content-Type sniffing:
+  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Content-Type sniffing:
    Web pages&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=sniffed title=&quot;Content-Type sniffing&quot;&gt;sniffed type of a
@@ -5998,14 +6038,6 @@
 
   &lt;ol&gt;
    &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by the &lt;a
-     href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt; for
-     the resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
-     parameters). If there is no such type, jump to the &lt;i
-     title=&quot;content-type sniffing: unknown type&quot;&gt;&lt;a
-     href=&quot;#content-type7&quot;&gt;unknown type&lt;/a&gt;&lt;/i&gt; step below.
-
-   &lt;li&gt;
     &lt;p&gt;If the user agent is configured to strictly obey Content-Type headers
      for this resource, then jump to the last step in this set of steps.
 
@@ -6058,14 +6090,25 @@
     
 
    &lt;li&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by the &lt;a
+     href=&quot;#content-type5&quot; title=Content-Type&gt;Content-Type metadata&lt;/a&gt; for
+     the resource, ignoring parameters. If there is no such type, jump to the
+     &lt;i title=&quot;content-type sniffing: unknown type&quot;&gt;&lt;a
+     href=&quot;#content-type7&quot;&gt;unknown type&lt;/a&gt;&lt;/i&gt; step below. Comparisons with
+     this type, as defined by MIME specifications, are done in an &lt;a
+     href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner. &lt;a
+     href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt;
+
+   &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
      &quot;application/unknown&quot;, jump to the &lt;i title=&quot;content-type sniffing:
      unknown type&quot;&gt;&lt;a href=&quot;#content-type7&quot;&gt;unknown type&lt;/a&gt;&lt;/i&gt; step below.&lt;/p&gt;
-    &lt;!-- In a study looking at many billions of pages whose first five
-   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
-   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
-   &quot;application/unknown&quot; was used about once for every 35000 pages
-   labeled &quot;text/html&quot;. --&gt;
+    &lt;!-- In a study
+   looking at many billions of pages whose first five characters were
+   &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label documents about once
+   for every 5000 pages labeled &quot;text/html&quot;, and &quot;application/unknown&quot;
+   was used about once for every 35000 pages labeled
+   &quot;text/html&quot;. --&gt;
 
    &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if it is
@@ -6080,7 +6123,8 @@
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type supported by the
      user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;, &quot;image/jpeg&quot;, etc), then jump
      to the &lt;i title=&quot;content-type sniffing: image&quot;&gt;&lt;a
-     href=&quot;#content-type8&quot;&gt;images&lt;/a&gt;&lt;/i&gt; section below.
+     href=&quot;#content-type8&quot;&gt;images&lt;/a&gt;&lt;/i&gt; section below, passing it the &lt;var
+     title=&quot;&quot;&gt;official type&lt;/var&gt;.
 
    &lt;li&gt;
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then jump to the
@@ -6091,7 +6135,7 @@
     &lt;p&gt;The sniffed type of the resource is &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;2.7.3 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;&lt;dfn
    id=content-type6&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;ol&gt;
@@ -6195,7 +6239,7 @@
    &lt;li&gt; 0x1C - 0x1F
   &lt;/ul&gt;
 
-  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;&lt;dfn
    id=content-type7&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;ol&gt;
@@ -6531,7 +6575,7 @@
    binary&quot; section, to avoid sniffing &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
    content as a type that can be used for a privilege escalation attack.
 
-  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;&lt;dfn
    id=content-type8&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;If the first bytes of the resource match one of the byte sequences in
@@ -6603,7 +6647,7 @@
   &lt;p&gt;Otherwise, the sniffed type of the resource is the same as its &lt;var
    title=&quot;&quot;&gt;official type&lt;/var&gt;.
 
-  &lt;h4 id=content-type4&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type4&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;&lt;dfn
    id=content-type9&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
   &lt;!-- mostly based on:
    <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
@@ -7243,7 +7287,7 @@
 
   &lt;p&gt;The &lt;dfn id=getelementsbyname
    title=dom-document-getElementsByName&gt;&lt;code&gt;getElementsByName(&lt;var
-   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
+   title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string &lt;var
    title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
    containing all the &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
    href=&quot;#applet&quot;&gt;applet&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;,
@@ -7254,10 +7298,11 @@
    &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt;,&lt;!-- param?
   XXX--&gt;
    &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in that document
-   that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is
-   equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;
-   argument.&lt;/p&gt;
-  &lt;!-- XXX what about XHTML? --&gt;
+   that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is equal to
+   the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; argument (in a &lt;a
+   href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt; manner).&lt;/p&gt;
+  &lt;!-- XXX what about XHTML?
+  --&gt;
 
   &lt;p&gt;The &lt;dfn id=getelementsbyclassname
    title=dom-document-getElementsByClassName&gt;&lt;code&gt;getElementsByClassName(&lt;var
@@ -8371,7 +8416,6 @@
   &lt;/div&gt;
 
   &lt;h3 id=apis-in&gt;&lt;span class=secno&gt;3.6 &lt;/span&gt;APIs in HTML documents&lt;/h3&gt;
-  &lt;!-- XXX case-sensitivity training required here. --&gt;
 
   &lt;p&gt;For &lt;a href=&quot;#html-&quot;&gt;HTML documents&lt;/a&gt;, and for &lt;a
    href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; in &lt;a href=&quot;#html-&quot;&gt;HTML
@@ -8388,18 +8432,17 @@
     title=&quot;&quot;&gt;Node.nodeName&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;Node.localName&lt;/code&gt;
 
    &lt;dd&gt;
-    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
-    xref--&gt;
-     and attribute names in all lowercase&lt;!-- XXX xref --&gt;, regardless of the
-     case with which they were created.&lt;/p&gt;
+    &lt;p&gt;These attributes must return tag names &lt;a href=&quot;#converting&quot;&gt;converted
+     to uppercase&lt;/a&gt; and attribute names &lt;a href=&quot;#converting0&quot;&gt;converted to
+     lowercase&lt;/a&gt;, regardless of the case with which they were created.&lt;/p&gt;
 
    &lt;dt&gt;&lt;code title=&quot;&quot;&gt;Document.createElement()&lt;/code&gt;
 
    &lt;dd&gt;
     &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this method
-     will lowercase&lt;!-- XXX xref --&gt; the argument before creating the
-     requisite element. Also, the element created must be in the &lt;a
-     href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.&lt;/p&gt;
+     will &lt;a href=&quot;#converting0&quot; title=&quot;converted to lowercase&quot;&gt;lowercase&lt;/a&gt;
+     the argument before creating the requisite element. Also, the element
+     created must be in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p class=note&gt;This doesn't apply to &lt;code
      title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible, by
@@ -8412,8 +8455,9 @@
 
    &lt;dd&gt;
     &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;a href=&quot;#html-elements&quot;
-     title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt;, it must have its name
-     lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
+     title=&quot;HTML elements&quot;&gt;HTML element&lt;/a&gt;, it must have its name &lt;a
+     href=&quot;#converting0&quot;&gt;converted to lowercase&lt;/a&gt; before the element is
+     affected.&lt;/p&gt;
 
     &lt;p class=note&gt;This doesn't apply to &lt;code
      title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
@@ -8422,9 +8466,8 @@
 
    &lt;dd&gt;
     &lt;p&gt;When an attribute is set on an &lt;a href=&quot;#html-elements&quot; title=&quot;HTML
-     elements&quot;&gt;HTML element&lt;/a&gt;, the name argument must be
-     lowercased&lt;!-- XXX xref
-    --&gt; before the element is affected.&lt;/p&gt;
+     elements&quot;&gt;HTML element&lt;/a&gt;, the name argument must be &lt;span&gt;converted to
+     lowercas&lt;/span&gt; before the element is affected.&lt;/p&gt;
 
     &lt;p class=note&gt;This doesn't apply to &lt;code
      title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
@@ -8434,9 +8477,10 @@
 
    &lt;dd&gt;
     &lt;p&gt;These methods (but not their namespaced counterparts) must compare the
-     given argument case-insensitively&lt;!-- XXX xref --&gt; when looking at &lt;a
-     href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML elements&lt;/a&gt;, and
-     case-sensitively otherwise.&lt;/p&gt;
+     given argument in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner
+     when looking at &lt;a href=&quot;#html-elements&quot; title=&quot;HTML elements&quot;&gt;HTML
+     elements&lt;/a&gt;, and in a &lt;a href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt;
+     manner otherwise.&lt;/p&gt;
 
     &lt;p class=note&gt;Thus, in an &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML
      document&lt;/a&gt; with nodes in multiple namespaces, these methods will be
@@ -8446,8 +8490,9 @@
 
    &lt;dd&gt;
     &lt;p&gt;If the new namespace is the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML
-     namespace&lt;/a&gt;, then the new qualified name must be lowercased before the
-     rename takes place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
+     namespace&lt;/a&gt;, then the new qualified name must be &lt;a
+     href=&quot;#converting0&quot;&gt;converted to lowercase&lt;/a&gt; before the rename takes
+     place.&lt;/p&gt;
   &lt;/dl&gt;
 
   &lt;h3 id=dynamic0&gt;&lt;span class=secno&gt;3.7 &lt;/span&gt;&lt;dfn id=dynamic3&gt;Dynamic
@@ -8521,9 +8566,8 @@
 
    &lt;li&gt;
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second argument
-     and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
-   --&gt;, and
-     false otherwise.
+     and it is an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the
+     value &quot;replace&quot;, and false otherwise.
 
    &lt;li&gt;
     &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!-- XXX xref
@@ -8876,9 +8920,9 @@
    &lt;li&gt;A &lt;code&gt;Comment&lt;/code&gt; node whose data contains two adjacent U+002D
     HYPHEN-MINUS (-) characters or ends with such a character.
 
-   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is the
-    string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
-   ASCII --&gt;.
+   &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is an &lt;a
+    href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code
+    title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;.
 
    &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name contains a
     U+003A COLON (&quot;:&quot;).
@@ -9878,11 +9922,10 @@
      href=&quot;#encoding&quot; title=attr-meta-http-equiv-content-type&gt;Encoding
      declaration state&lt;/a&gt;, the &lt;code title=attr-meta-content&gt;&lt;a
      href=&quot;#content1&quot;&gt;content&lt;/a&gt;&lt;/code&gt; attribute must have a value that is
-     a case-insensitive&lt;!-- ASCII
-    XXX--&gt; match of a string that consists
-     of the literal string &quot;&lt;code title=&quot;&quot;&gt;text/html;&lt;/code&gt;&quot;, optionally
-     followed by any number of &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space
-     characters&lt;/a&gt;, followed by the literal string &quot;&lt;code
+     an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for a string that
+     consists of the literal string &quot;&lt;code title=&quot;&quot;&gt;text/html;&lt;/code&gt;&quot;,
+     optionally followed by any number of &lt;a href=&quot;#space&quot; title=&quot;space
+     character&quot;&gt;space characters&lt;/a&gt;, followed by the literal string &quot;&lt;code
      title=&quot;&quot;&gt;charset=&lt;/code&gt;&quot;, followed by the character encoding name of &lt;a
      href=&quot;#charset&quot;&gt;the character encoding declaration&lt;/a&gt;.&lt;/p&gt;
 
@@ -20202,7 +20245,7 @@
 
   &lt;p&gt;When the UA is passed an empty string or a string specifying a context
    that it does not support, then it must return null. String comparisons
-   must be literal and case-sensitive.
+   must be &lt;a href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt;.
 
   &lt;p&gt;Arguments other than the &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; must be ignored,
    and must not cause the user agent to raise an exception (as would normally
@@ -20726,8 +20769,9 @@
   &lt;/dl&gt;
 
   &lt;p&gt;These values are all case-sensitive &mdash; they must be used exactly as
-   shown. User agents must not recognize values that do not exactly match the
-   values given above.
+   shown. User agents must not recognize values that are not a &lt;a
+   href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt; match for one of the values
+   given above.
 
   &lt;p&gt;The operators in the above list must be treated as described by the
    Porter-Duff operator given at the start of their description (e.g. &lt;var
@@ -30882,8 +30926,8 @@
 
   &lt;p&gt;A &lt;dfn id=valid10&gt;valid browsing context name or keyword&lt;/dfn&gt; is any
    string that is either a &lt;a href=&quot;#valid9&quot;&gt;valid browsing context name&lt;/a&gt;
-   or that case-insensitively &lt;!-- ASCII --&gt; matches one of: &lt;code
-   title=&quot;&quot;&gt;_blank&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;_self&lt;/code&gt;, &lt;code
+   or that is an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for one
+   of: &lt;code title=&quot;&quot;&gt;_blank&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;_self&lt;/code&gt;, &lt;code
    title=&quot;&quot;&gt;_parent&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;_top&lt;/code&gt;.
 
   &lt;p&gt;&lt;dfn id=the-rules&gt;The rules for choosing a browsing context given a
@@ -31262,8 +31306,8 @@
 
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; be the &lt;a href=&quot;#ltschemegt&quot;
-       title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of the URI, converted to
-       lowercase&lt;!-- XXX --&gt;.
+       title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of the URI, &lt;a
+       href=&quot;#converting0&quot;&gt;converted to lowercase&lt;/a&gt;.
 
      &lt;li&gt;
       &lt;p&gt;If the UA doesn't support the protocol given by &lt;var
@@ -31289,7 +31333,8 @@
 
      &lt;li&gt;
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the result of converting &lt;var
-       title=&quot;&quot;&gt;host&lt;/var&gt; to lowercase&lt;!-- XXX --&gt;.
+       title=&quot;&quot;&gt;host&lt;/var&gt; &lt;a href=&quot;#converting0&quot; title=&quot;converted to
+       lowercase&quot;&gt;to lowercase&lt;/a&gt;.
 
      &lt;li&gt;
       &lt;p&gt;If there is no &lt;a href=&quot;#ltportgt&quot; title=url-port&gt;&lt;port&gt;&lt;/a&gt;
@@ -31506,7 +31551,7 @@
     &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;dfn id=ascii&gt;ASCII serialization of an origin&lt;/dfn&gt; is the string
+  &lt;p&gt;The &lt;dfn id=ascii0&gt;ASCII serialization of an origin&lt;/dfn&gt; is the string
    obtained by applying the following algorithm to the given &lt;a
    href=&quot;#origin0&quot;&gt;origin&lt;/a&gt;:
 
@@ -32876,9 +32921,9 @@
 
    &lt;dd&gt;
     &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The scheme
-     must be treated case-insensitively by user agents for the purposes of
-     comparing with the scheme part of URLs that they consider against the
-     list of registered handlers.&lt;/p&gt;
+     must be compared in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt;
+     manner by user agents for the purposes of comparing with the scheme part
+     of URLs that they consider against the list of registered handlers.&lt;/p&gt;
 
     &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
      &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes don't
@@ -32890,10 +32935,10 @@
 
    &lt;dd&gt;
     &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
-     &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
-     case-insensitively by user agents for the purposes of comparing with
-     MIME types of documents that they consider against the list of
-     registered handlers.&lt;/p&gt;
+     &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be compared in an &lt;a
+     href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner by user agents for the
+     purposes of comparing with MIME types of documents that they consider
+     against the list of registered handlers.&lt;/p&gt;
 
     &lt;p&gt;User agents must compare the given values only to the MIME
      type/subtype parts of content types, not to the complete type including
@@ -33538,10 +33583,9 @@
 
       &lt;p&gt;If the resulting &lt;a href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; has a
        different &lt;a href=&quot;#ltschemegt&quot; title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-       component than the manifest's URL (compared
-       case-insensitively&lt;!-- XXX ASCII
-      --&gt;), then jump back to the
-       step labeled &quot;start of line&quot;.&lt;/p&gt;
+       component than the manifest's URL (compared in an &lt;a
+       href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner), then jump back to
+       the step labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop the &lt;a href=&quot;#ltfragmentgt&quot;
        title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; component of the resulting &lt;a
@@ -33576,8 +33620,8 @@
       &lt;p&gt;If the resulting &lt;a href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; for &lt;var
        title=&quot;&quot;&gt;part two&lt;/var&gt; has a different &lt;a href=&quot;#ltschemegt&quot;
        title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component than the manifest's URL
-       (compared case-insensitively&lt;!-- XXX ASCII --&gt;), then jump back to the
-       step labeled &quot;start of line&quot;.&lt;/p&gt;
+       (compared in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner),
+       then jump back to the step labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop any the &lt;a href=&quot;#ltfragmentgt&quot;
        title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; components of the resulting &lt;a
@@ -33607,10 +33651,9 @@
 
       &lt;p&gt;If the resulting &lt;a href=&quot;#absolute&quot;&gt;absolute URL&lt;/a&gt; has a
        different &lt;a href=&quot;#ltschemegt&quot; title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-       component than the manifest's URL (compared
-       case-insensitively&lt;!-- XXX ASCII
-      --&gt;), then jump back to the
-       step labeled &quot;start of line&quot;.&lt;/p&gt;
+       component than the manifest's URL (compared in an &lt;a
+       href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner), then jump back to
+       the step labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop the &lt;a href=&quot;#ltfragmentgt&quot;
        title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; component of the resulting &lt;a
@@ -36423,7 +36466,8 @@
    must be created first.
 
   &lt;p&gt;All strings including the empty string are valid database names.
-   Database names are case-sensitive.
+   Database names must be compared in a &lt;a
+   href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt; manner.
 
   &lt;p class=note&gt;Implementations can support this even in environments that
    only support a subset of all strings as database names by mapping database
@@ -39317,16 +39361,16 @@
    if the content attribute is set to the true state, &lt;code
    title=&quot;&quot;&gt;false&lt;/code&gt;&quot; if the content attribute is set to the false state,
    and &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; otherwise. On setting, if the new
-   value is case-insensitively&lt;!--
-  XXX ascii --&gt; equal to the string &quot;&lt;code
-   title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; then the content attribute must be removed, if
-   the new value is case-insensitively&lt;!-- XXX ascii --&gt; equal to the string
-   &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot; then the content attribute must be set to the
-   string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;, if the new value is
-   case-insensitively&lt;!-- XXX ascii --&gt; equal to the string &quot;&lt;code
-   title=&quot;&quot;&gt;false&lt;/code&gt;&quot; then the content attribute must be set to the
-   string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;, and otherwise the attribute setter
-   must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
+   value is an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the
+   string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; then the content attribute must be
+   removed, if the new value is an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+   case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;
+   then the content attribute must be set to the string &quot;&lt;code
+   title=&quot;&quot;&gt;true&lt;/code&gt;&quot;, if the new value is an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+   case-insensitive&lt;/a&gt; match for the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;
+   then the content attribute must be set to the string &quot;&lt;code
+   title=&quot;&quot;&gt;false&lt;/code&gt;&quot;, and otherwise the attribute setter must raise a
+   &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
 
   &lt;p&gt;The &lt;dfn id=iscontenteditable
    title=dom-isContentEditable&gt;&lt;code&gt;isContentEditable&lt;/code&gt;&lt;/dfn&gt; DOM
@@ -39554,9 +39598,8 @@
    href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; DOM attribute on the
    &lt;code&gt;Document&lt;/code&gt; object takes two values, &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot;
    and &quot;&lt;code title=&quot;&quot;&gt;off&lt;/code&gt;&quot;. When it is set, the new value must be
-   case-insensitively &lt;!-- XXX ASCII
-  case-folding --&gt; compared to these two
-   values. If it matches the &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot; value, then &lt;code
+   compared in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner to these
+   two values. If it matches the &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot; value, then &lt;code
    title=dom-document-designMode&gt;&lt;a href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt;
    must be enabled, and if it matches the &quot;&lt;code title=&quot;&quot;&gt;off&lt;/code&gt;&quot; value,
    then &lt;code title=dom-document-designMode&gt;&lt;a
@@ -41028,9 +41071,8 @@
    title=&quot;&quot;&gt;commandId&lt;/var&gt;.
 
   &lt;p&gt;The possible values for &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt;, and their
-   corresponding meanings, are as follows. These values are &lt;!-- XXX
-  ASCII --&gt;
-   case-insensitive.
+   corresponding meanings, are as follows. These values must be compared to
+   the argument in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner.
 
   &lt;dl&gt;
    &lt;dt&gt;&lt;dfn id=bold title=command-bold&gt;&lt;code&gt;bold&lt;/code&gt;&lt;/dfn&gt;
@@ -41112,13 +41154,12 @@
        &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.
 
      &lt;li&gt;
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is (now) a case-insensitive&lt;!--
-      XXX ASCII--&gt;
-       match for the tag name of an element defined by this specification
-       that is defined to be a &lt;span&gt;prose element&lt;/span&gt; but not a
-       &lt;span&gt;phrasing element&lt;/span&gt;, then, for every position in the
-       selection, take the furthest &lt;a href=&quot;#flow-content0&quot;&gt;flow content&lt;/a&gt;
-       ancestor element of that position that contains only &lt;a
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is (now) an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+       case-insensitive&lt;/a&gt; match for the tag name of an element defined by
+       this specification that is defined to be a &lt;span&gt;prose element&lt;/span&gt;
+       but not a &lt;span&gt;phrasing element&lt;/span&gt;, then, for every position in
+       the selection, take the furthest &lt;a href=&quot;#flow-content0&quot;&gt;flow
+       content&lt;/a&gt; ancestor element of that position that contains only &lt;a
        href=&quot;#phrasing0&quot;&gt;phrasing content&lt;/a&gt;, and, if that element is &lt;a
        href=&quot;#editable0&quot;&gt;editable&lt;/a&gt;, and has a content model that allows it
        to contain &lt;span&gt;prose content&lt;/span&gt; other than &lt;a
@@ -42102,8 +42143,8 @@
    argument and verify that the URL parses without failure and has a &lt;a
    href=&quot;#ltschemegt&quot; title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component whose
    value is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;,
-   when compared case-insensitively&lt;!-- XXX ASCII --&gt;. If it does, it has,
-   and it is, then the user agent must asynchronously &lt;a
+   when compared in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner. If
+   it does, it has, and it is, then the user agent must asynchronously &lt;a
    href=&quot;#establish&quot;&gt;establish a Web Socket connection&lt;/a&gt; to &lt;var
    title=&quot;&quot;&gt;url&lt;/var&gt;. Otherwise, the constructor must raise a
    &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
@@ -42348,7 +42389,7 @@
 
     &lt;pre&gt;4f 72 69 67 69 6e 3a 20&lt;/pre&gt;
 
-    &lt;p&gt;Send the &lt;a href=&quot;#ascii&quot; title=&quot;ASCII serialization of an
+    &lt;p&gt;Send the &lt;a href=&quot;#ascii0&quot; title=&quot;ASCII serialization of an
      origin&quot;&gt;ASCII serialization&lt;/a&gt; of the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of
      the script that invoked the &lt;code title=dom-WebSocket&gt;&lt;a
      href=&quot;#websocket1&quot;&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor.&lt;/p&gt;
@@ -42545,7 +42586,7 @@
     &lt;dl class=switch&gt;
      &lt;dt&gt;If the entry's name is &quot;&lt;code title=&quot;&quot;&gt;websocket-origin&lt;/code&gt;&quot;
 
-     &lt;dd&gt;If the value is not exactly equal to the &lt;a href=&quot;#ascii&quot;
+     &lt;dd&gt;If the value is not exactly equal to the &lt;a href=&quot;#ascii0&quot;
       title=&quot;ASCII serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the
       &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the script that invoked the &lt;code
       title=dom-WebSocket&gt;&lt;a href=&quot;#websocket1&quot;&gt;WebSocket()&lt;/a&gt;&lt;/code&gt;
@@ -42747,7 +42788,7 @@
 61 64 65 0d 0a&lt;/pre&gt;
 
   &lt;p&gt;Send the string &quot;&lt;code title=&quot;&quot;&gt;WebSocket-Origin&lt;/code&gt;&quot; followed by a
-   U+003A COLON (&quot;:&quot;) followed by the &lt;a href=&quot;#ascii&quot; title=&quot;ASCII
+   U+003A COLON (&quot;:&quot;) followed by the &lt;a href=&quot;#ascii0&quot; title=&quot;ASCII
    serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the origin from
    which the server is willing to accept connections, followed by a CRLF pair
    (0x0d 0x0a).
@@ -43653,6 +43694,13 @@
     element but before the &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
   &lt;/div&gt;
 
+  &lt;p&gt;Many strings in the HTML syntax (e.g. the names of elements and their
+   attributes) are case-insensitive, but only for characters in the ranges
+   U+0041 .. U+005A (LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and
+   U+0061 .. U+007A (LATIN SMALL LETTER A to LATIN SMALL LETTER Z). For
+   convenience, in this section this is just referred to as
+   &quot;case-insensitive&quot;.
+
   &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;8.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=doctype5 title=syntax-doctype&gt;DOCTYPE&lt;/dfn&gt; is a mostly
@@ -43901,9 +43949,8 @@
    U+002F SOLIDUS (/), and U+003D EQUALS SIGN (=) characters, the control
    characters, and any characters that are not defined by Unicode. In the
    HTML syntax, attribute names may be written with any mix of lower- and
-   uppercase letters that, when converted to
-   all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches the attribute's
-   name; attribute names are case-insensitive.
+   uppercase letters that, when converted to all-lowercase, matches the
+   attribute's name; attribute names are case-insensitive.
 
   &lt;p&gt;&lt;dfn id=attribute4 title=syntax-attribute-value&gt;Attribute values&lt;/dfn&gt;
    are a mixture of &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt; and &lt;a
@@ -44255,11 +44302,11 @@
 
   &lt;p&gt;The text in CDATA and RCDATA elements must not contain any occurrences
    of the string &quot;&lt;code title=&quot;&quot;&gt;&lt;/&lt;/code&gt;&quot; (U+003C LESS-THAN SIGN, U+002F
-   SOLIDUS) followed by characters that case-insensitively&lt;!--ASCII--&gt; match
-   the tag name of the element followed by one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF), U+0020 SPACE,
-   U+003E GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/), unless that string is
-   part of an &lt;a href=&quot;#escaping&quot; title=syntax-escape&gt;escaping text span&lt;/a&gt;.
+   SOLIDUS) followed by characters that case-insensitively match the tag name
+   of the element followed by one of U+0009 CHARACTER TABULATION, U+000A LINE
+   FEED (LF), U+000C FORM FEED (FF), U+0020 SPACE, U+003E GREATER-THAN SIGN
+   (&gt;), or U+002F SOLIDUS (/), unless that string is part of an &lt;a
+   href=&quot;#escaping&quot; title=syntax-escape&gt;escaping text span&lt;/a&gt;.
 
   &lt;p&gt;An &lt;dfn id=escaping title=syntax-escape&gt;escaping text span&lt;/dfn&gt; is a
    span of &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt; that starts with an &lt;a
@@ -44944,10 +44991,11 @@
 
   &lt;p&gt;When comparing a string specifying a character encoding with the name or
    alias of a character encoding to determine if they are equal, user agents
-   must ignore the all characters in the ranges U+0009 to U+000D, U+0020 to
+   must ignore all characters in the ranges U+0009 to U+000D, U+0020 to
    U+002F, U+003A to U+0040, U+005B to U+0060, and U+007B to U+007E (all
    whitespace and punctuation characters in ASCII) in both names, and then
-   perform the comparison case-insensitively&lt;!-- XXX ASCII --&gt;.
+   perform the comparison in an &lt;a href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt;
+   manner.
 
   &lt;p class=example&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
    considered equivalent names.
@@ -45920,8 +45968,9 @@
    instance of the tokeniser (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), or, if
    the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA or
    CDATA states and the next few characters do not match the tag name of the
-   last start tag token emitted (case insensitively), or if they do but they
-   are not immediately followed by one of the following characters:
+   last start tag token emitted (compared in an &lt;span&gt;ASCII case
+   insensitive&lt;/span&gt; manner), or if they do but they are not immediately
+   followed by one of the following characters:
 
   &lt;ul class=brief&gt;
    &lt;li&gt;U+0009 CHARACTER TABULATION
@@ -46453,22 +46502,19 @@
    empty string, and switch to the &lt;a href=&quot;#comment5&quot;&gt;comment start
    state&lt;/a&gt;.
 
-  &lt;p&gt;Otherwise, if the next seven characters are a
-   &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
-   word &quot;DOCTYPE&quot;, then consume those characters and switch to the &lt;a
-   href=&quot;#doctype6&quot;&gt;DOCTYPE state&lt;/a&gt;.
+  &lt;p&gt;Otherwise, if the next seven characters are an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+   case-insensitive&lt;/a&gt; match for the word &quot;DOCTYPE&quot;, then consume those
+   characters and switch to the &lt;a href=&quot;#doctype6&quot;&gt;DOCTYPE state&lt;/a&gt;.
 
   &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-foreign&quot;
    title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot; and the
    &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element in the &lt;a
    href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and the next seven characters
-   are a &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
-  only --&gt; match for
-   the string &quot;[CDATA[&quot; (the five uppercase letters &quot;CDATA&quot; with a U+005B
-   LEFT SQUARE BRACKET character before and after), then consume those
-   characters and switch to the &lt;a href=&quot;#cdata2&quot;&gt;CDATA section state&lt;/a&gt;
-   (which is unrelated to the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s
-   CDATA state).
+   are an &lt;span&gt;ASCII case-sensitive&lt;/span&gt; match for the string &quot;[CDATA[&quot;
+   (the five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET
+   character before and after), then consume those characters and switch to
+   the &lt;a href=&quot;#cdata2&quot;&gt;CDATA section state&lt;/a&gt; (which is unrelated to the
+   &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state).
 
   &lt;p&gt;Otherwise, this is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Switch to the &lt;a
    href=&quot;#bogus1&quot;&gt;bogus comment state&lt;/a&gt;. The next character that is
@@ -46737,15 +46783,15 @@
    &lt;dt&gt;Anything else
 
    &lt;dd&gt;
-    &lt;p&gt;If the next six characters are a
-     &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
-     word &quot;PUBLIC&quot;, then consume those characters and switch to the &lt;a
-     href=&quot;#before7&quot;&gt;before DOCTYPE public identifier state&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;If the next six characters are an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+     case-insensitive&lt;/a&gt; match for the word &quot;PUBLIC&quot;, then consume those
+     characters and switch to the &lt;a href=&quot;#before7&quot;&gt;before DOCTYPE public
+     identifier state&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the next six characters are a
-     &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
-     word &quot;SYSTEM&quot;, then consume those characters and switch to the &lt;a
-     href=&quot;#before8&quot;&gt;before DOCTYPE system identifier state&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if the next six characters are an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+     case-insensitive&lt;/a&gt; match for the word &quot;SYSTEM&quot;, then consume those
+     characters and switch to the &lt;a href=&quot;#before8&quot;&gt;before DOCTYPE system
+     identifier state&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, this is the &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Set the
      DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
@@ -47445,8 +47491,9 @@
 
    &lt;dd&gt;
     &lt;p&gt;Consume the maximum number of characters possible, with the consumed
-     characters case-sensitively matching one of the identifiers in the first
-     column of the &lt;a href=&quot;#named0&quot;&gt;named character references&lt;/a&gt; table.&lt;/p&gt;
+     characters matching one of the identifiers in the first column of the &lt;a
+     href=&quot;#named0&quot;&gt;named character references&lt;/a&gt; table (in a &lt;a
+     href=&quot;#case-sensitive&quot;&gt;case-sensitive&lt;/a&gt; manner).&lt;/p&gt;
 
     &lt;p&gt;If no match can be made, then this is a &lt;a href=&quot;#parse2&quot;&gt;parse
      error&lt;/a&gt;. No characters are consumed, and nothing is returned.&lt;/p&gt;
@@ -47903,15 +47950,15 @@
    &lt;dt&gt;A DOCTYPE token
 
    &lt;dd&gt;
-    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
-     case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, or if
-     the token's public identifier is not missing, or if the token's system
-     identifier is not missing, then there is a &lt;a href=&quot;#parse2&quot;&gt;parse
-     error&lt;/a&gt;. Conformance checkers may, instead of reporting this error,
-     switch to a conformance checking mode for another language (e.g. based
-     on the DOCTYPE token a conformance checker could recognize that the
-     document is an HTML4-era document, and defer to an HTML4 conformance
-     checker.)&lt;/p&gt;
+    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; is not an &lt;a
+     href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; match for the string &quot;&lt;code
+     title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, or if the token's public identifier is not
+     missing, or if the token's system identifier is not missing, then there
+     is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Conformance checkers may,
+     instead of reporting this error, switch to a conformance checking mode
+     for another language (e.g. based on the DOCTYPE token a conformance
+     checker could recognize that the document is an HTML4-era document, and
+     defer to an HTML4 conformance checker.)&lt;/p&gt;
 
     &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the &lt;code&gt;Document&lt;/code&gt;
      node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute set to the name
@@ -48164,10 +48211,10 @@
     &lt;/ul&gt;
 
     &lt;p&gt;The name, system identifier, and public identifier strings must be
-     compared to the values given in the lists above in a
-     case-insensitive&lt;!-- ASCII --&gt; manner. A system identifier whose value
-     is the empty string is not considered missing for the purposes of the
-     conditions above.&lt;/p&gt;
+     compared to the values given in the lists above in an &lt;a
+     href=&quot;#ascii&quot;&gt;ASCII case-insensitive&lt;/a&gt; manner. A system identifier
+     whose value is the empty string is not considered missing for the
+     purposes of the conditions above.&lt;/p&gt;
 
     &lt;p&gt;Then, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before9&quot;
      title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;.&lt;/p&gt;
@@ -50006,8 +50053,8 @@
 
    &lt;dd&gt;
     &lt;p&gt;If the token does not have an attribute with the name &quot;type&quot;, or if it
-     does, but that attribute's value is not a case-insensitive
-     &lt;!-- XXX ASCII --&gt; match for the string &quot;hidden&quot;, or, if the &lt;a
+     does, but that attribute's value is not an &lt;a href=&quot;#ascii&quot;&gt;ASCII
+     case-insensitive&lt;/a&gt; match for the string &quot;hidden&quot;, or, if the &lt;a
      href=&quot;#current6&quot;&gt;current table&lt;/a&gt; is &lt;a href=&quot;#tainted&quot;&gt;tainted&lt;/a&gt;,
      then: act as described in the &quot;anything else&quot; entry below.&lt;/p&gt;
 
@@ -51281,9 +51328,9 @@
    local names of elements and attributes, then the tool may map all element
    and attribute local names that the API wouldn't support to a set of names
    that &lt;em&gt;are&lt;/em&gt; allowed, by replacing any character that isn't supported
-   with the upper case letter U and the five digits of the character's
-   Unicode codepoint when expressed in hexadecimal, using digits 0-9 and
-   capital letters A-F as the symbols, in increasing numeric order.
+   with the uppercase letter U and the five digits of the character's Unicode
+   codepoint when expressed in hexadecimal, using digits 0-9 and capital
+   letters A-F as the symbols, in increasing numeric order.
 
   &lt;p class=example&gt;For example, the element name &lt;code
    title=&quot;&quot;&gt;foo&lt;bar&lt;/code&gt;, which can be output by the &lt;a
@@ -53917,8 +53964,10 @@
    document (printing) and what this means for the UA, in particular creating
    a new view for the print media.
 
-  &lt;p class=big-issue&gt;Must define that in CSS, tag names in HTML documents,
-   and class names in quirks mode documents, are case-insensitive.
+  &lt;p class=big-issue&gt;Must define that in CSS, tag and attribute names in HTML
+   documents, and class names in quirks mode documents, are case-insensitive,
+   as well as saying which attribute values must be compared
+   case-insensitively.
 
   &lt;h3 id=rendering0&gt;&lt;span class=secno&gt;9.1 &lt;/span&gt;Rendering and the DOM&lt;/h3&gt;
 
@@ -54880,16 +54929,12 @@
 &lt;pav&gt; the html spec should say what to do with it
 
 
-should we say that elements in HTML must be lowercase? (but with error
-handling for uppercase tags, obviously)? If so, update examples.
-
 &lt;title&gt; is for out of context headers
 &lt;h1&gt; is for in-context headers
 
 The parsing rules of HTML
 
 media=&quot;&quot; is case-insensitive
-case-sensitivity of other attributes, and what it means
 
 empty title attribute is equivalent to missing attribute for purposes
 of alternate style sheet processing

Modified: source
===================================================================
--- source	2008-07-24 22:36:09 UTC (rev 1935)
+++ source	2008-07-25 09:26:03 UTC (rev 1936)
@@ -9,16 +9,15 @@
   &lt;p class=&quot;big-issue&quot;&gt;Some of the more major known issues are marked
   like this. There are many other issues that have been raised as
   well; the issues given in this document are not the only known
-  issues! There are also some spec-wide issues that have not yet been
-  addressed: case-sensitivity is a very poorly handled topic right
-  now, and the firing of events needs to be unified (right now some
-  bubble, some don't, they all use different text to fire events,
-  etc). It would also be nice to unify the rules on downloading
-  content when attributes change (e.g. &lt;code title=&quot;&quot;&gt;src&lt;/code&gt;
-  attributes) - should they initiate downloads when the element
-  immediately, is inserted in the document, when active scripts end,
-  etc. This matters e.g. if an attribute is set twice in a row (does
-  it hit the network twice).&lt;/p&gt;
+  issues! Also, firing of events needs to be unified (right now some
+  bubble, some don't, they all use different text to fire events, we
+  don't have an official queueing mechanism, etc). It would also be
+  nice to unify the rules on fetching/downloading content when
+  attributes change (e.g. &lt;code title=&quot;&quot;&gt;src&lt;/code&gt; attributes) -
+  should they initiate downloads when the element immediately, is
+  inserted in the document, when active scripts end, etc. This matters
+  e.g. if an attribute is set twice in a row (does it hit the network
+  twice).&lt;/p&gt;
 
 
   &lt;h2 class=&quot;no-num no-toc&quot; id=&quot;contents&quot;&gt;Table of contents&lt;/h2&gt;
@@ -415,9 +414,9 @@
   &lt;p&gt;Attribute names are said to be &lt;dfn&gt;XML-compatible&lt;/dfn&gt; if they
   match the &lt;a href=&quot;<A HREF="http://www.w3.org/TR/REC-xml/#NT-Name">http://www.w3.org/TR/REC-xml/#NT-Name</A>&quot;&gt;&lt;code
   title=&quot;&quot;&gt;Name&lt;/code&gt;&lt;/a&gt; production defined in XML, they contain no
-  U+003A COLON (:) characters, and they do not start with three
-  characters &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;. &lt;a
-  href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX case-insensitive ASCII --&gt;
+  U+003A COLON (:) characters, and their first three characters are
+  not an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string
+  &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;. &lt;a href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt;&lt;/p&gt;
 
 
   &lt;h4&gt;DOM trees&lt;/h4&gt;
@@ -965,10 +964,41 @@
 
 
 
+  &lt;h3&gt;Case-sensitivity&lt;/h3&gt;
 
+  &lt;p&gt;This specification defines several comparison operators for
+  strings.&lt;/p&gt;
 
+  &lt;p&gt;Comparing two strings in a &lt;dfn&gt;case-sensitive&lt;/dfn&gt; manner means
+  comparing them exactly, codepoint for codepoint.&lt;/p&gt;
 
+  &lt;p&gt;Comparing two strings in a &lt;dfn&gt;ASCII case-insensitive&lt;/dfn&gt;
+  manner means comparing them exactly, codepoint for codepoint, except
+  that the characters in the range U+0041 .. U+005A (i.e. LATIN
+  CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and the corresponding
+  characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A
+  to LATIN SMALL LETTER Z) are considered to also match.&lt;/p&gt;
 
+  &lt;p&gt;Comparing two strings in a &lt;dfn&gt;compatibility caseless&lt;/dfn&gt;
+  manner means using the Unicode &lt;i&gt;compatibility caseless match&lt;/i&gt;
+  operation to compare the two strings. &lt;a
+  href=&quot;#refsUNICODECASE&quot;&gt;[UNICODECASE]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX refs to
+  Unicode Standard Annex #21, Case Mappings --&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;converted to uppercase&quot;&gt;Converting a string to
+  uppercase&lt;/dfn&gt; means replacing all characters in the range U+0061
+  .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) with
+  the corresponding characters in the range U+0041 .. U+005A
+  (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z).&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;converted to lowercase&quot;&gt;Converting a string to
+  lowercase&lt;/dfn&gt; means replacing all characters in the range U+0041
+  .. U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z)
+  with the corresponding characters in the range U+0061 .. U+007A
+  (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z).&lt;/p&gt;
+
+
+
   &lt;h3&gt;URLs&lt;/h3&gt;
 
   &lt;p&gt;This specification defines the term &lt;span&gt;URL&lt;/span&gt;, and defines
@@ -1709,7 +1739,7 @@
   of the attribute represents the false value.&lt;/p&gt;
 
   &lt;p&gt;If the attribute is present, its value must either be the empty
-  string or a value that is a case-insensitive &lt;!-- XXX ASCII --&gt;
+  string or a value that is a, &lt;span&gt;ASCII case-insensitive&lt;/span&gt;
   match for the attribute's canonical name, with no leading or
   trailing whitespace.&lt;/p&gt;
 
@@ -3332,20 +3362,18 @@
   is the &lt;em&gt;missing value default&lt;/em&gt;.&lt;/p&gt;
 
   &lt;p&gt;If an enumerated attribute is specified, the attribute's value
-  must be one of the given keywords that are not said to be
-  non-conforming, with no leading or trailing whitespace. The keyword
-  may use any mix of uppercase and lowercase letters.&lt;!-- XXX should
-  say &quot;uppercase and lowercase ASCII letters&quot; or some such --&gt;&lt;/p&gt;
+  must be an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for one of the
+  given keywords that are not said to be non-conforming, with no
+  leading or trailing whitespace.&lt;/p&gt;
 
-  &lt;p&gt;When the attribute is specified, if its value
-  &lt;span&gt;case-insensitively&lt;/span&gt;&lt;!-- XXX ascii case folding --&gt;
-  matches one of the given keywords then that keyword's state is the
-  state that the attribute represents. If the attribute value matches
-  none of the given keywords, but the attribute has an &lt;em&gt;invalid
-  value default&lt;/em&gt;, then the attribute represents that
-  state. Otherwise, if the attribute value matches none of the
-  keywords but there is a &lt;em&gt;missing value default&lt;/em&gt; state
-  defined, then &lt;em&gt;that&lt;/em&gt; is the state represented by the
+  &lt;p&gt;When the attribute is specified, if its value is an &lt;span&gt;ASCII
+  case-insensitively&lt;/span&gt; match for one of the given keywords then
+  that keyword's state is the state that the attribute represents. If
+  the attribute value matches none of the given keywords, but the
+  attribute has an &lt;em&gt;invalid value default&lt;/em&gt;, then the attribute
+  represents that state. Otherwise, if the attribute value matches
+  none of the keywords but there is a &lt;em&gt;missing value default&lt;/em&gt;
+  state defined, then &lt;em&gt;that&lt;/em&gt; is the state represented by the
   attribute. Otherwise, there is no default, and invalid values must
   be ignored.&lt;/p&gt;
 
@@ -3392,12 +3420,15 @@
 
    &lt;li&gt;&lt;p&gt;Return the first element of type &lt;var title=&quot;&quot;&gt;type&lt;/var&gt;
    that has an &lt;code title=&quot;attr-id&quot;&gt;id&lt;/code&gt; or &lt;code
-   title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value &lt;!-- Unicode,
-   apparently: &lt;annevk&gt; seems IE might be Unicode case-insensitive for
-   ID [and name] values (related to &lt;map&gt; anyway, and at least for the
-   character &euml; --&gt; case-insensitively matches &lt;var
-   title=&quot;&quot;&gt;s&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
+   title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose value is a &lt;span&gt;compatibility
+   caseless&lt;/span&gt; match for &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;!--
+   That's what IE does:
+   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5%22%20src%3Dimage%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5%22%20src%3Dimage%3E</A>
+   ...except that doesn't explain why this fails:
+   <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%26%23xFB01%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5F%26%23x0131%3B%26%23x0307%3B%22%20src%3Dimage%3E">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A%3Cmap%20name%3D%22T%26eacute%3B%26%23x01F1%3B%26%23x2075%3B%26%23xFB01%3B%22%3E%3Carea%20href%3D%22%2F%22%20shape%3Drect%20coords%3D0%2C0%2C200%2C200%3E%3C%2Fmap%3E%0A%3Cimg%20usemap%3D%22%23t%26Eacute%3BDZ5F%26%23x0131%3B%26%23x0307%3B%22%20src%3Dimage%3E</A>
+   maybe they just don't know about combining dot above?
+   --&gt;
   &lt;/ol&gt;
 
 
@@ -3442,13 +3473,13 @@
   getting, the DOM attribute must return the conforming value
   associated with the state the attribute is in (in its canonical
   case), or the empty string if the attribute is in a state that has
-  no associated keyword value; and on setting, if the new value
-  case-insensitively &lt;!-- XXX --&gt; matches one of the keywords given
-  for that attribute, then the content attribute must be set to the
-  conforming value associated with the state that the attribute would
-  be in if set to the given new value, otherwise, if the new value is
-  the empty string, then the content attribute must be removed,
-  otherwise, the setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt;
+  no associated keyword value; and on setting, if the new value is an
+  &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for one of the keywords
+  given for that attribute, then the content attribute must be set to
+  the conforming value associated with the state that the attribute
+  would be in if set to the given new value, otherwise, if the new
+  value is the empty string, then the content attribute must be
+  removed, otherwise, the setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt;
   exception.&lt;/p&gt;
 
   &lt;p&gt;If a reflecting DOM attribute is a &lt;code&gt;DOMString&lt;/code&gt; but
@@ -4089,8 +4120,8 @@
   &lt;ol&gt;
 
    &lt;li&gt;&lt;p&gt;Find the first seven characters in &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
-   that are a case-insensitive&lt;!-- XXX ASCII--&gt; match for the word
-   'charset'. If no such match is found, return nothing.&lt;/p&gt;
+   that are an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the word
+   &quot;charset&quot;. If no such match is found, return nothing.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Skip any U+0009, U+000A, U+000C, U+000D, or U+0020
    characters that immediately follow the word 'charset' (there might
@@ -4147,13 +4178,6 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by
-   the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; for the
-   resource (in lowercase&lt;!-- XXX ASCII case folding --&gt;, ignoring any
-   parameters). If there is no such type, jump to the &lt;i
-   title=&quot;content-type sniffing: unknown type&quot;&gt;unknown type&lt;/i&gt; step
-   below.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;If the user agent is configured to strictly obey
    Content-Type headers for this resource, then jump to the last step
    in this set of steps.&lt;/p&gt;&lt;/li&gt;
@@ -4191,14 +4215,22 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; be the type given by
+   the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; for the
+   resource, ignoring parameters. If there is no such type, jump to
+   the &lt;i title=&quot;content-type sniffing: unknown type&quot;&gt;unknown type&lt;/i&gt;
+   step below. Comparisons with this type, as defined by MIME
+   specifications, are done in an &lt;span&gt;ASCII case-insensitive&lt;/span&gt;
+   manner. &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;unknown/unknown&quot; or
-   &quot;application/unknown&quot;, jump to the &lt;i title=&quot;content-type
-   sniffing: unknown type&quot;&gt;unknown type&lt;/i&gt; step below.&lt;/p&gt;
-   &lt;!-- In a study looking at many billions of pages whose first five
-   characters were &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label
-   documents about once for every 5000 pages labeled &quot;text/html&quot;, and
-   &quot;application/unknown&quot; was used about once for every 35000 pages
-   labeled &quot;text/html&quot;. --&gt;&lt;/li&gt;
+   &quot;application/unknown&quot;, jump to the &lt;i title=&quot;content-type sniffing:
+   unknown type&quot;&gt;unknown type&lt;/i&gt; step below.&lt;/p&gt; &lt;!-- In a study
+   looking at many billions of pages whose first five characters were
+   &quot;&lt;HTML&quot;, &quot;unknown/unknown&quot; was used to label documents about once
+   for every 5000 pages labeled &quot;text/html&quot;, and &quot;application/unknown&quot;
+   was used about once for every 35000 pages labeled
+   &quot;text/html&quot;. --&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; ends in &quot;+xml&quot;, or if
    it is either &quot;text/xml&quot; or &quot;application/xml&quot;, then the sniffed
@@ -4209,7 +4241,8 @@
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is an image type
    supported by the user agent (e.g. &quot;image/png&quot;, &quot;image/gif&quot;,
    &quot;image/jpeg&quot;, etc), then jump to the &lt;i title=&quot;content-type
-   sniffing: image&quot;&gt;images&lt;/i&gt; section below.&lt;/p&gt;&lt;/li&gt;
+   sniffing: image&quot;&gt;images&lt;/i&gt; section below, passing it the &lt;var
+   title=&quot;&quot;&gt;official type&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt; is &quot;text/html&quot;, then
    jump to the &lt;i title=&quot;content-type sniffing: feed or html&quot;&gt;feed or
@@ -5296,7 +5329,7 @@
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-document-getElementsByName&quot;&gt;&lt;code&gt;getElementsByName(&lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method a string &lt;var
+  title=&quot;&quot;&gt;name&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes a string &lt;var
   title=&quot;&quot;&gt;name&lt;/var&gt;, and must return a live &lt;code&gt;NodeList&lt;/code&gt;
   containing all the &lt;code&gt;a&lt;/code&gt;, &lt;code&gt;applet&lt;/code&gt;,
   &lt;code&gt;button&lt;/code&gt;, &lt;code&gt;form&lt;/code&gt;, &lt;!-- frame? frameset?
@@ -5304,8 +5337,9 @@
   &lt;code&gt;map&lt;/code&gt;, &lt;code&gt;meta&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;,&lt;!-- param?
   XXX--&gt; &lt;code&gt;select&lt;/code&gt;, and &lt;code&gt;textarea&lt;/code&gt; elements in
   that document that have a &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; attribute whose
-  value is equal&lt;!-- XXX case sensitivity --&gt; to the &lt;var
-  title=&quot;&quot;&gt;name&lt;/var&gt; argument.&lt;/p&gt; &lt;!-- XXX what about XHTML? --&gt;
+  value is equal to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; argument (in a
+  &lt;span&gt;case-sensitive&lt;/span&gt; manner).&lt;/p&gt; &lt;!-- XXX what about XHTML?
+  --&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-document-getElementsByClassName&quot;&gt;&lt;code&gt;getElementsByClassName(&lt;var
@@ -6397,7 +6431,6 @@
 
 
   &lt;h3&gt;APIs in HTML documents&lt;/h3&gt;
-  &lt;!-- XXX case-sensitivity training required here. --&gt;
 
   &lt;p&gt;For &lt;span&gt;HTML documents&lt;/span&gt;, and for &lt;span&gt;HTML
   elements&lt;/span&gt; in &lt;span&gt;HTML documents&lt;/span&gt;, certain APIs defined
@@ -6417,9 +6450,10 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;These attributes return tag names in all uppercase&lt;!-- XXX
-    xref--&gt; and attribute names in all lowercase&lt;!-- XXX xref --&gt;,
-    regardless of the case with which they were created.&lt;/p&gt;
+    &lt;p&gt;These attributes must return tag names &lt;span&gt;converted to
+    uppercase&lt;/span&gt; and attribute names &lt;span&gt;converted to
+    lowercase&lt;/span&gt;, regardless of the case with which they were
+    created.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -6429,9 +6463,9 @@
    &lt;dd&gt;
 
     &lt;p&gt;The canonical form of HTML markup is all-lowercase; thus, this
-    method will lowercase&lt;!-- XXX xref --&gt; the argument before
-    creating the requisite element. Also, the element created must be
-    in the &lt;span&gt;HTML namespace&lt;/span&gt;.&lt;/p&gt;
+    method will &lt;span title=&quot;converted to lowercase&quot;&gt;lowercase&lt;/span&gt;
+    the argument before creating the requisite element. Also, the
+    element created must be in the &lt;span&gt;HTML namespace&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
     title=&quot;&quot;&gt;Document.createElementNS()&lt;/code&gt;. Thus, it is possible,
@@ -6450,7 +6484,8 @@
 
     &lt;p&gt;When an &lt;code&gt;Attr&lt;/code&gt; node is set on an &lt;span title=&quot;HTML
     elements&quot;&gt;HTML element&lt;/span&gt;, it must have its name
-    lowercased&lt;!-- XXX xref --&gt; before the element is affected.&lt;/p&gt;
+    &lt;span&gt;converted to lowercase&lt;/span&gt; before the element is
+    affected.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
     title=&quot;&quot;&gt;Document.setAttributeNodeNS()&lt;/code&gt;.&lt;/p&gt;
@@ -6463,8 +6498,8 @@
    &lt;dd&gt;
 
     &lt;p&gt;When an attribute is set on an &lt;span title=&quot;HTML elements&quot;&gt;HTML
-    element&lt;/span&gt;, the name argument must be lowercased&lt;!-- XXX xref
-    --&gt; before the element is affected.&lt;/p&gt;
+    element&lt;/span&gt;, the name argument must be &lt;span&gt;converted to
+    lowercas&lt;/span&gt; before the element is affected.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;This doesn't apply to &lt;code
     title=&quot;&quot;&gt;Document.setAttributeNS()&lt;/code&gt;.&lt;/p&gt;
@@ -6478,9 +6513,10 @@
    &lt;dd&gt;
 
     &lt;p&gt;These methods (but not their namespaced counterparts) must
-    compare the given argument case-insensitively&lt;!-- XXX xref --&gt;
-    when looking at &lt;span title=&quot;HTML elements&quot;&gt;HTML elements&lt;/span&gt;,
-    and case-sensitively otherwise.&lt;/p&gt;
+    compare the given argument in an &lt;span&gt;ASCII
+    case-insensitive&lt;/span&gt; manner when looking at &lt;span title=&quot;HTML
+    elements&quot;&gt;HTML elements&lt;/span&gt;, and in a
+    &lt;span&gt;case-sensitive&lt;/span&gt; manner otherwise.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;Thus, in an &lt;span title=&quot;HTML documents&quot;&gt;HTML
     document&lt;/span&gt; with nodes in multiple namespaces, these methods
@@ -6495,8 +6531,8 @@
    &lt;dd&gt;
 
     &lt;p&gt;If the new namespace is the &lt;span&gt;HTML namespace&lt;/span&gt;, then
-    the new qualified name must be lowercased before the rename takes
-    place.&lt;!-- XXX xref --&gt;&lt;/p&gt;
+    the new qualified name must be &lt;span&gt;converted to lowercase&lt;/span&gt;
+    before the rename takes place.&lt;/p&gt;
 
    &lt;/dd&gt;
    
@@ -6571,8 +6607,8 @@
    otherwise.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; be true if there is a second
-   argument and it has the value &quot;replace&quot;&lt;!-- case-insensitive. XXX
-   --&gt;, and false otherwise.&lt;/p&gt;&lt;/li&gt;
+   argument and it is an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for
+   the value &quot;replace&quot;, and false otherwise.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -6973,8 +7009,8 @@
    character.&lt;/li&gt;
 
    &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name is
-   the string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; (case insensitively)&lt;!--
-   ASCII --&gt;.&lt;/li&gt;
+   an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code
+   title=&quot;&quot;&gt;xml&lt;/code&gt;&quot;.&lt;/li&gt;
 
    &lt;li&gt;A &lt;code&gt;ProcessingInstruction&lt;/code&gt; node whose target name
    contains a U+003A COLON (&quot;:&quot;).&lt;/li&gt;
@@ -7916,13 +7952,13 @@
     &lt;p&gt;For &lt;code&gt;meta&lt;/code&gt; elements in the &lt;span
     title=&quot;attr-meta-http-equiv-content-type&quot;&gt;Encoding declaration
     state&lt;/span&gt;, the &lt;code title=&quot;attr-meta-content&quot;&gt;content&lt;/code&gt;
-    attribute must have a value that is a case-insensitive&lt;!-- ASCII
-    XXX--&gt; match of a string that consists of the literal string
-    &quot;&lt;code title=&quot;&quot;&gt;text/html;&lt;/code&gt;&quot;, optionally followed by any
-    number of &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt;,
-    followed by the literal string &quot;&lt;code title=&quot;&quot;&gt;charset=&lt;/code&gt;&quot;,
-    followed by the character encoding name of &lt;a href=&quot;#charset&quot;&gt;the
-    character encoding declaration&lt;/a&gt;.&lt;/p&gt;
+    attribute must have a value that is an &lt;span&gt;ASCII
+    case-insensitive&lt;/span&gt; match for a string that consists of the
+    literal string &quot;&lt;code title=&quot;&quot;&gt;text/html;&lt;/code&gt;&quot;, optionally
+    followed by any number of &lt;span title=&quot;space character&quot;&gt;space
+    characters&lt;/span&gt;, followed by the literal string &quot;&lt;code
+    title=&quot;&quot;&gt;charset=&lt;/code&gt;&quot;, followed by the character encoding name
+    of &lt;a href=&quot;#charset&quot;&gt;the character encoding declaration&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If the document contains a &lt;code&gt;meta&lt;/code&gt; element in the
     &lt;span title=&quot;attr-meta-http-equiv-content-type&quot;&gt;Encoding
@@ -17483,7 +17519,7 @@
 
   &lt;p&gt;When the UA is passed an empty string or a string specifying a
   context that it does not support, then it must return null. String
-  comparisons must be literal and case-sensitive.&lt;/p&gt;
+  comparisons must be &lt;span&gt;case-sensitive&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;Arguments other than the &lt;var title=&quot;&quot;&gt;contextId&lt;/var&gt; must be
   ignored, and must not cause the user agent to raise an exception (as
@@ -17996,8 +18032,9 @@
   &lt;/dl&gt;
 
   &lt;p&gt;These values are all case-sensitive &mdash; they must be used
-  exactly as shown. User agents must not recognize values that do not
-  exactly match the values given above.&lt;/p&gt;
+  exactly as shown. User agents must not recognize values that are not
+  a &lt;span&gt;case-sensitive&lt;/span&gt; match for one of the values given
+  above.&lt;/p&gt;
 
   &lt;p&gt;The operators in the above list must be treated as described by
   the Porter-Duff operator given at the start of their description
@@ -28175,8 +28212,8 @@
   special keywords.)&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn&gt;valid browsing context name or keyword&lt;/dfn&gt; is any string
-  that is either a &lt;span&gt;valid browsing context name&lt;/span&gt; or that
-  case-insensitively &lt;!-- ASCII --&gt; matches one of: &lt;code
+  that is either a &lt;span&gt;valid browsing context name&lt;/span&gt; or that is
+  an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for one of: &lt;code
   title=&quot;&quot;&gt;_blank&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;_self&lt;/code&gt;, &lt;code
   title=&quot;&quot;&gt;_parent&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;_top&lt;/code&gt;.&lt;/p&gt;
 
@@ -28569,7 +28606,7 @@
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;scheme&lt;/var&gt; be the &lt;span
      title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component of the URI,
-     converted to lowercase&lt;!-- XXX --&gt;.&lt;/p&gt;&lt;/li&gt;
+     &lt;span&gt;converted to lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the UA doesn't support the protocol given by &lt;var
      title=&quot;&quot;&gt;scheme&lt;/var&gt;, then return a new globally unique
@@ -28598,7 +28635,8 @@
      &lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the result of converting
-     &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; to lowercase&lt;!-- XXX --&gt;.&lt;/p&gt;&lt;/li&gt;
+     &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; &lt;span title=&quot;converted to lowercase&quot;&gt;to
+     lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If there is no &lt;span title=&quot;url-port&quot;&gt;&lt;port&gt;&lt;/span&gt;
      component, then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be the default port
@@ -30267,9 +30305,10 @@
    &lt;dd&gt;
 
     &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The
-    scheme must be treated case-insensitively by user agents for the
-    purposes of comparing with the scheme part of URLs that they
-    consider against the list of registered handlers.&lt;/p&gt;
+    scheme must be compared in an &lt;span&gt;ASCII case-insensitive&lt;/span&gt;
+    manner by user agents for the purposes of comparing with the
+    scheme part of URLs that they consider against the list of
+    registered handlers.&lt;/p&gt;
 
     &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon
     (as in &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since
@@ -30282,10 +30321,10 @@
    &lt;dd&gt;
 
     &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
-    &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
-    case-insensitively by user agents for the purposes of comparing
-    with MIME types of documents that they consider against the list
-    of registered handlers.&lt;/p&gt;
+    &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be compared in an
+    &lt;span&gt;ASCII case-insensitive&lt;/span&gt; manner by user agents for the
+    purposes of comparing with MIME types of documents that they
+    consider against the list of registered handlers.&lt;/p&gt;
 
     &lt;p&gt;User agents must compare the given values only to the MIME
     type/subtype parts of content types, not to the complete type
@@ -30968,8 +31007,9 @@
 
       &lt;p&gt;If the resulting &lt;span&gt;absolute URL&lt;/span&gt; has a different
       &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component than
-      the manifest's URL (compared case-insensitively&lt;!-- XXX ASCII
-      --&gt;), then jump back to the step labeled &quot;start of line&quot;.&lt;/p&gt;
+      the manifest's URL (compared in an &lt;span&gt;ASCII
+      case-insensitive&lt;/span&gt; manner), then jump back to the step
+      labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop the &lt;span title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt;
       component of the resulting &lt;span&gt;absolute URL&lt;/span&gt;, if it has
@@ -31009,8 +31049,9 @@
       &lt;p&gt;If the resulting &lt;span&gt;absolute URL&lt;/span&gt; for &lt;var
       title=&quot;&quot;&gt;part two&lt;/var&gt; has a different &lt;span
       title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component than the
-      manifest's URL (compared case-insensitively&lt;!-- XXX ASCII --&gt;),
-      then jump back to the step labeled &quot;start of line&quot;.&lt;/p&gt;
+      manifest's URL (compared in an &lt;span&gt;ASCII
+      case-insensitive&lt;/span&gt; manner), then jump back to the step
+      labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop any the &lt;span
       title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt; components of the
@@ -31045,8 +31086,9 @@
 
       &lt;p&gt;If the resulting &lt;span&gt;absolute URL&lt;/span&gt; has a different
       &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component than
-      the manifest's URL (compared case-insensitively&lt;!-- XXX ASCII
-      --&gt;), then jump back to the step labeled &quot;start of line&quot;.&lt;/p&gt;
+      the manifest's URL (compared in an &lt;span&gt;ASCII
+      case-insensitive&lt;/span&gt; manner), then jump back to the step
+      labeled &quot;start of line&quot;.&lt;/p&gt;
 
       &lt;p&gt;Drop the &lt;span title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt;
       component of the resulting &lt;span&gt;absolute URL&lt;/span&gt;, if it has
@@ -33888,7 +33930,8 @@
   must be created first.&lt;/p&gt;
 
   &lt;p&gt;All strings including the empty string are valid database
-  names. Database names are case-sensitive.&lt;/p&gt;
+  names. Database names must be compared in a
+  &lt;span&gt;case-sensitive&lt;/span&gt; manner.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Implementations can support this even in
   environments that only support a subset of all strings as database
@@ -36788,16 +36831,16 @@
   title=&quot;&quot;&gt;true&lt;/code&gt;&quot; if the content attribute is set to the true
   state, &lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot; if the content attribute is set
   to the false state, and &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;
-  otherwise. On setting, if the new value is case-insensitively&lt;!--
-  XXX ascii --&gt; equal to the string &quot;&lt;code title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot;
-  then the content attribute must be removed, if the new value is
-  case-insensitively&lt;!-- XXX ascii --&gt; equal to the string &quot;&lt;code
-  title=&quot;&quot;&gt;true&lt;/code&gt;&quot; then the content attribute must be set to the
-  string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;, if the new value is
-  case-insensitively&lt;!-- XXX ascii --&gt; equal to the string &quot;&lt;code
-  title=&quot;&quot;&gt;false&lt;/code&gt;&quot; then the content attribute must be set to the
-  string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;, and otherwise the attribute
-  setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.&lt;/p&gt;
+  otherwise. On setting, if the new value is an &lt;span&gt;ASCII
+  case-insensitive&lt;/span&gt; match for the string &quot;&lt;code
+  title=&quot;&quot;&gt;inherit&lt;/code&gt;&quot; then the content attribute must be removed,
+  if the new value is an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for
+  the string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot; then the content attribute
+  must be set to the string &quot;&lt;code title=&quot;&quot;&gt;true&lt;/code&gt;&quot;, if the new
+  value is an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string
+  &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot; then the content attribute must be set
+  to the string &quot;&lt;code title=&quot;&quot;&gt;false&lt;/code&gt;&quot;, and otherwise the
+  attribute setter must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-isContentEditable&quot;&gt;&lt;code&gt;isContentEditable&lt;/code&gt;&lt;/dfn&gt;
@@ -37034,9 +37077,9 @@
   &lt;p&gt;The &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; DOM
   attribute on the &lt;code&gt;Document&lt;/code&gt; object takes two values,
   &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot; and &quot;&lt;code title=&quot;&quot;&gt;off&lt;/code&gt;&quot;. When it
-  is set, the new value must be case-insensitively &lt;!-- XXX ASCII
-  case-folding --&gt; compared to these two values. If it matches the
-  &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot; value, then &lt;code
+  is set, the new value must be compared in an &lt;span&gt;ASCII
+  case-insensitive&lt;/span&gt; manner to these two values. If it matches
+  the &quot;&lt;code title=&quot;&quot;&gt;on&lt;/code&gt;&quot; value, then &lt;code
   title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; must be enabled,
   and if it matches the &quot;&lt;code title=&quot;&quot;&gt;off&lt;/code&gt;&quot; value, then &lt;code
   title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; must be
@@ -38484,8 +38527,9 @@
   title=&quot;&quot;&gt;commandId&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;The possible values for &lt;var title=&quot;&quot;&gt;commandId&lt;/var&gt;, and their
-  corresponding meanings, are as follows. These values are &lt;!-- XXX
-  ASCII --&gt; case-insensitive.&lt;/p&gt;
+  corresponding meanings, are as follows. These values must be
+  compared to the argument in an &lt;span&gt;ASCII case-insensitive&lt;/span&gt;
+  manner.&lt;/p&gt;
 
   &lt;dl&gt;
 
@@ -38546,22 +38590,22 @@
      GREATER-THAN SIGN character ('&gt;'), then remove the first and last
      characters from &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
      &lt;li&gt;
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is (now) a case-insensitive&lt;!--
-      XXX ASCII--&gt; match for the tag name of an element defined by
-      this specification that is defined to be a &lt;span&gt;prose
-      element&lt;/span&gt; but not a &lt;span&gt;phrasing element&lt;/span&gt;, then,
-      for every position in the selection, take the furthest
-      &lt;span&gt;flow content&lt;/span&gt; ancestor element of that position that
-      contains only &lt;span&gt;phrasing content&lt;/span&gt;, and, if that
-      element is &lt;span&gt;editable&lt;/span&gt;, and has a content model that
-      allows it to contain &lt;span&gt;prose content&lt;/span&gt; other than
-      &lt;span&gt;phrasing content&lt;/span&gt;, and has a parent element whose
-      content model allows that parent to contain any &lt;span&gt;prose
-      content&lt;/span&gt;, rename the element (as if the &lt;code
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; is (now) an &lt;span&gt;ASCII
+      case-insensitive&lt;/span&gt; match for the tag name of an element
+      defined by this specification that is defined to be a
+      &lt;span&gt;prose element&lt;/span&gt; but not a &lt;span&gt;phrasing
+      element&lt;/span&gt;, then, for every position in the selection, take
+      the furthest &lt;span&gt;flow content&lt;/span&gt; ancestor element of that
+      position that contains only &lt;span&gt;phrasing content&lt;/span&gt;, and,
+      if that element is &lt;span&gt;editable&lt;/span&gt;, and has a content
+      model that allows it to contain &lt;span&gt;prose content&lt;/span&gt; other
+      than &lt;span&gt;phrasing content&lt;/span&gt;, and has a parent element
+      whose content model allows that parent to contain any
+      &lt;span&gt;prose content&lt;/span&gt;, rename the element (as if the &lt;code
       title=&quot;&quot;&gt;Element.renameNode()&lt;/code&gt; method had been used) to
-      &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;, using the HTML namespace.&lt;/p&gt;
-      &lt;p&gt;If there is no selection, then, where in the description
-      above refers to the selection, the user agent must act as if the
+      &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;, using the HTML namespace.&lt;/p&gt; &lt;p&gt;If
+      there is no selection, then, where in the description above
+      refers to the selection, the user agent must act as if the
       selection was an empty range (with just one position) at the
       caret position.&lt;/p&gt;
      &lt;/li&gt;
@@ -39455,8 +39499,8 @@
   verify that the URL parses without failure and has a &lt;span
   title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component whose value is
   either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;,
-  when compared case-insensitively&lt;!-- XXX ASCII --&gt;. If it does, it
-  has, and it is, then the user agent must asynchronously
+  when compared in an &lt;span&gt;ASCII case-insensitive&lt;/span&gt; manner. If
+  it does, it has, and it is, then the user agent must asynchronously
   &lt;span&gt;establish a Web Socket connection&lt;/span&gt; to &lt;var
   title=&quot;&quot;&gt;url&lt;/var&gt;. Otherwise, the constructor must raise a
   &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.&lt;/p&gt;
@@ -41153,7 +41197,14 @@
 
   &lt;/div&gt;
 
+  &lt;p&gt;Many strings in the HTML syntax (e.g. the names of elements and
+  their attributes) are case-insensitive, but only for characters in
+  the ranges U+0041 .. U+005A (LATIN CAPITAL LETTER A to LATIN CAPITAL
+  LETTER Z) and U+0061 .. U+007A (LATIN SMALL LETTER A to LATIN SMALL
+  LETTER Z). For convenience, in this section this is just referred to
+  as &quot;case-insensitive&quot;.&lt;/p&gt;
 
+
   &lt;h4&gt;The DOCTYPE&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn title=&quot;syntax-doctype&quot;&gt;DOCTYPE&lt;/dfn&gt; is a mostly useless,
@@ -41384,8 +41435,8 @@
   the control characters, and any characters that are not defined by
   Unicode. In the HTML syntax, attribute names may be written with any
   mix of lower- and uppercase letters that, when converted to
-  all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches the
-  attribute's name; attribute names are case-insensitive.&lt;/p&gt;
+  all-lowercase, matches the attribute's name; attribute names are
+  case-insensitive.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn title=&quot;syntax-attribute-value&quot;&gt;Attribute values&lt;/dfn&gt; are a
   mixture of &lt;span title=&quot;syntax-text&quot;&gt;text&lt;/span&gt; and &lt;span
@@ -41735,10 +41786,10 @@
   &lt;p&gt;The text in CDATA and RCDATA elements must not contain any
   occurrences of the string &quot;&lt;code title=&quot;&quot;&gt;&lt;/&lt;/code&gt;&quot; (U+003C
   LESS-THAN SIGN, U+002F SOLIDUS) followed by characters that
-  case-insensitively&lt;!--ASCII--&gt; match the tag name of the element
-  followed by one of U+0009 CHARACTER TABULATION, U+000A LINE FEED
-  (LF), U+000C FORM FEED (FF), U+0020 SPACE, U+003E GREATER-THAN SIGN
-  (&gt;), or U+002F SOLIDUS (/), unless that string is part of an &lt;span
+  case-insensitively match the tag name of the element followed by one
+  of U+0009 CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM
+  FEED (FF), U+0020 SPACE, U+003E GREATER-THAN SIGN (&gt;), or U+002F
+  SOLIDUS (/), unless that string is part of an &lt;span
   title=&quot;syntax-escape&quot;&gt;escaping text span&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;An &lt;dfn title=&quot;syntax-escape&quot;&gt;escaping text span&lt;/dfn&gt; is a span
@@ -42476,11 +42527,11 @@
 
   &lt;p&gt;When comparing a string specifying a character encoding with the
   name or alias of a character encoding to determine if they are
-  equal, user agents must ignore the all characters in the ranges
-  U+0009 to U+000D, U+0020 to U+002F, U+003A to U+0040, U+005B to
-  U+0060, and U+007B to U+007E (all whitespace and punctuation
-  characters in ASCII) in both names, and then perform the comparison
-  case-insensitively&lt;!-- XXX ASCII --&gt;.&lt;/p&gt;
+  equal, user agents must ignore all characters in the ranges U+0009
+  to U+000D, U+0020 to U+002F, U+003A to U+0040, U+005B to U+0060, and
+  U+007B to U+007E (all whitespace and punctuation characters in
+  ASCII) in both names, and then perform the comparison in an
+  &lt;span&gt;ASCII case-insensitive&lt;/span&gt; manner.&lt;/p&gt;
 
   &lt;p class=&quot;example&quot;&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
   considered equivalent names.&lt;/p&gt;
@@ -43361,11 +43412,11 @@
   &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or
   CDATA states but no start tag token has ever been emitted by this
   instance of the tokeniser (&lt;span&gt;fragment case&lt;/span&gt;), or, if the
-  &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or CDATA
-  states and the next few characters do not match the tag name of
-  the last start tag token emitted (case insensitively), or if they
-  do but they are not immediately followed by one of the following
-  characters:&lt;/p&gt;
+  &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or CDATA states
+  and the next few characters do not match the tag name of the last
+  start tag token emitted (compared in an &lt;span&gt;ASCII case
+  insensitive&lt;/span&gt; manner), or if they do but they are not
+  immediately followed by one of the following characters:&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt;
    &lt;li&gt;U+0009 CHARACTER TABULATION&lt;/li&gt;
@@ -43840,21 +43891,19 @@
   whose data is the empty string, and switch to the &lt;span&gt;comment
   start state&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Otherwise, if the next seven characters are a
-  &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-  for the word &quot;DOCTYPE&quot;, then consume those characters and switch
-  to the &lt;span&gt;DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Otherwise, if the next seven characters are an &lt;span&gt;ASCII
+  case-insensitive&lt;/span&gt; match for the word &quot;DOCTYPE&quot;, then consume
+  those characters and switch to the &lt;span&gt;DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span
   title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-  content&lt;/span&gt;&quot; and the &lt;span&gt;current node&lt;/span&gt; is not an
-  element in the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven
-  characters are a &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
-  only --&gt; match for the string &quot;[CDATA[&quot; (the five uppercase
-  letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET character before
-  and after), then consume those characters and switch to the
-  &lt;span&gt;CDATA section state&lt;/span&gt; (which is unrelated to the
-  &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state).&lt;/p&gt;
+  content&lt;/span&gt;&quot; and the &lt;span&gt;current node&lt;/span&gt; is not an element
+  in the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven characters are
+  an &lt;span&gt;ASCII case-sensitive&lt;/span&gt; match for the string &quot;[CDATA[&quot;
+  (the five uppercase letters &quot;CDATA&quot; with a U+005B LEFT SQUARE
+  BRACKET character before and after), then consume those characters
+  and switch to the &lt;span&gt;CDATA section state&lt;/span&gt; (which is
+  unrelated to the &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state).&lt;/p&gt;
 
   &lt;p&gt;Otherwise, this is a &lt;span&gt;parse error&lt;/span&gt;. Switch to the
   &lt;span&gt;bogus comment state&lt;/span&gt;. The next character that is
@@ -44096,15 +44145,15 @@
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;If the next six characters are a
-    &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-    for the word &quot;PUBLIC&quot;, then consume those characters and switch
-    to the &lt;span&gt;before DOCTYPE public identifier state&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;If the next six characters are an &lt;span&gt;ASCII
+    case-insensitive&lt;/span&gt; match for the word &quot;PUBLIC&quot;, then consume
+    those characters and switch to the &lt;span&gt;before DOCTYPE public
+    identifier state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the next six characters are a
-    &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-    for the word &quot;SYSTEM&quot;, then consume those characters and switch
-    to the &lt;span&gt;before DOCTYPE system identifier state&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if the next six characters are an &lt;span&gt;ASCII
+    case-insensitive&lt;/span&gt; match for the word &quot;SYSTEM&quot;, then consume
+    those characters and switch to the &lt;span&gt;before DOCTYPE system
+    identifier state&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, this is the &lt;span&gt;parse error&lt;/span&gt;. Set the
     DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to
@@ -44575,9 +44624,9 @@
    &lt;dd&gt;
 
     &lt;p&gt;Consume the maximum number of characters possible, with the
-    consumed characters case-sensitively matching one of the
-    identifiers in the first column of the &lt;span&gt;named character
-    references&lt;/span&gt; table.&lt;/p&gt;
+    consumed characters matching one of the identifiers in the first
+    column of the &lt;span&gt;named character references&lt;/span&gt; table (in a
+    &lt;span&gt;case-sensitive&lt;/span&gt; manner).&lt;/p&gt;
 
     &lt;p&gt;If no match can be made, then this is a &lt;span&gt;parse
     error&lt;/span&gt;. No characters are consumed, and nothing is
@@ -44936,15 +44985,16 @@
    &lt;dt&gt;A DOCTYPE token&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; does not
-    case-insensitively match the string &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;,
-    or if the token's public identifier is not missing, or if the
-    token's system identifier is not missing, then there is a
-    &lt;span&gt;parse error&lt;/span&gt;. Conformance checkers may, instead of
-    reporting this error, switch to a conformance checking mode for
-    another language (e.g. based on the DOCTYPE token a conformance
-    checker could recognize that the document is an HTML4-era
-    document, and defer to an HTML4 conformance checker.)&lt;/p&gt;
+    &lt;p&gt;If the DOCTYPE token's &lt;code title=&quot;&quot;&gt;name&lt;/code&gt; is not an
+    &lt;span&gt;ASCII case-insensitive&lt;/span&gt; match for the string &quot;&lt;code
+    title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot;, or if the token's public identifier is not
+    missing, or if the token's system identifier is not missing, then
+    there is a &lt;span&gt;parse error&lt;/span&gt;. Conformance checkers may,
+    instead of reporting this error, switch to a conformance checking
+    mode for another language (e.g. based on the DOCTYPE token a
+    conformance checker could recognize that the document is an
+    HTML4-era document, and defer to an HTML4 conformance
+    checker.)&lt;/p&gt;
 
     &lt;p&gt;Append a &lt;code&gt;DocumentType&lt;/code&gt; node to the
     &lt;code&gt;Document&lt;/code&gt; node, with the &lt;code title=&quot;&quot;&gt;name&lt;/code&gt;
@@ -45057,9 +45107,9 @@
     &lt;/ul&gt;
 
     &lt;p&gt;The name, system identifier, and public identifier strings must
-    be compared to the values given in the lists above in a
-    case-insensitive&lt;!-- ASCII --&gt; manner. A system identifier whose
-    value is the empty string is not considered missing for the
+    be compared to the values given in the lists above in an
+    &lt;span&gt;ASCII case-insensitive&lt;/span&gt; manner. A system identifier
+    whose value is the empty string is not considered missing for the
     purposes of the conditions above.&lt;/p&gt;
 
     &lt;p&gt;Then, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span
@@ -47011,10 +47061,10 @@
    &lt;dd&gt;
 
     &lt;p&gt;If the token does not have an attribute with the name &quot;type&quot;,
-    or if it does, but that attribute's value is not a
-    case-insensitive &lt;!-- XXX ASCII --&gt; match for the string &quot;hidden&quot;,
-    or, if the &lt;span&gt;current table&lt;/span&gt; is &lt;span&gt;tainted&lt;/span&gt;,
-    then: act as described in the &quot;anything else&quot; entry below.&lt;/p&gt;
+    or if it does, but that attribute's value is not an &lt;span&gt;ASCII
+    case-insensitive&lt;/span&gt; match for the string &quot;hidden&quot;, or, if the
+    &lt;span&gt;current table&lt;/span&gt; is &lt;span&gt;tainted&lt;/span&gt;, then: act as
+    described in the &quot;anything else&quot; entry below.&lt;/p&gt;
 
     &lt;p&gt;Otherwise:&lt;/p&gt;
 
@@ -48335,7 +48385,7 @@
   the local names of elements and attributes, then the tool may map
   all element and attribute local names that the API wouldn't support
   to a set of names that &lt;em&gt;are&lt;/em&gt; allowed, by replacing any
-  character that isn't supported with the upper case letter U and the
+  character that isn't supported with the uppercase letter U and the
   five digits of the character's Unicode codepoint when expressed in
   hexadecimal, using digits 0-9 and capital letters A-F as the
   symbols, in increasing numeric order.&lt;/p&gt;
@@ -48910,9 +48960,10 @@
   document (printing) and what this means for the UA, in particular
   creating a new view for the print media.&lt;/p&gt;
 
-  &lt;p class=&quot;big-issue&quot;&gt;Must define that in CSS, tag names in HTML
-  documents, and class names in quirks mode documents, are
-  case-insensitive.&lt;/p&gt;
+  &lt;p class=&quot;big-issue&quot;&gt;Must define that in CSS, tag and attribute
+  names in HTML documents, and class names in quirks mode documents,
+  are case-insensitive, as well as saying which attribute values must
+  be compared case-insensitively.&lt;/p&gt;
 
 
   &lt;h3&gt;Rendering and the DOM&lt;/h3&gt;
@@ -49884,16 +49935,12 @@
 &lt;pav&gt; the html spec should say what to do with it
 
 
-should we say that elements in HTML must be lowercase? (but with error
-handling for uppercase tags, obviously)? If so, update examples.
-
 &lt;title&gt; is for out of context headers
 &lt;h1&gt; is for in-context headers
 
 The parsing rules of HTML
 
 media=&quot;&quot; is case-insensitive
-case-sensitivity of other attributes, and what it means
 
 empty title attribute is equivalent to missing attribute for purposes
 of alternate style sheet processing


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008833.html">[html5] r1935 - [] (0) Make application/octet-stream with &lt;object&gt;	with no type='' trigger sniffing.
</A></li>
	<LI>Next message: <A HREF="008835.html">[html5] r1937 - [gow] (2) Define order and case-sensitivity of	getElementsByClassName().
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8834">[ date ]</a>
              <a href="thread.html#8834">[ thread ]</a>
              <a href="subject.html#8834">[ subject ]</a>
              <a href="author.html#8834">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
