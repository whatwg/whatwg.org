<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1906 - [e] (0) Make the tokeniser states into sections for	easier navigation. (Bug 5881 [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1906%20-%20%5Be%5D%20%280%29%20Make%20the%20tokeniser%20states%20into%20sections%20for%0A%09easier%20navigation.%20%28Bug%205881%20%5B...%5D&In-Reply-To=%3C20080723010417.5A0101428AE%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008803.html">
   <LINK REL="Next"  HREF="008805.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1906 - [e] (0) Make the tokeniser states into sections for	easier navigation. (Bug 5881 [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1906%20-%20%5Be%5D%20%280%29%20Make%20the%20tokeniser%20states%20into%20sections%20for%0A%09easier%20navigation.%20%28Bug%205881%20%5B...%5D&In-Reply-To=%3C20080723010417.5A0101428AE%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1906 - [e] (0) Make the tokeniser states into sections for	easier navigation. (Bug 5881 [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jul 22 18:04:17 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008803.html">[html5] r1905 - [e] (0) Clarify the bogus comment state. (Bug 5863)	(credit: as)
</A></li>
        <LI>Next message: <A HREF="008805.html">[html5] r1907 - [t] (0) Provide a way to mutate the DOM into an	infoset. (Bug 5808) (credit: hs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8804">[ date ]</a>
              <a href="thread.html#8804">[ thread ]</a>
              <a href="subject.html#8804">[ subject ]</a>
              <a href="author.html#8804">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-07-22 18:04:16 -0700 (Tue, 22 Jul 2008)
New Revision: 1906

Modified:
   index
   source
Log:
[e] (0) Make the tokeniser states into sections for easier navigation. (Bug 5881) (credit: as)

Modified: index
===================================================================
--- index	2008-07-23 00:56:52 UTC (rev 1905)
+++ index	2008-07-23 01:04:16 UTC (rev 1906)
@@ -1758,7 +1758,112 @@
        &lt;li&gt;&lt;a href=&quot;#tokenization&quot;&gt;&lt;span class=secno&gt;8.2.4
         &lt;/span&gt;Tokenization&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#tokenizing&quot;&gt;&lt;span class=secno&gt;8.2.4.1.
+         &lt;li&gt;&lt;a href=&quot;#data-state&quot;&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;Data
+          state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#character1&quot;&gt;&lt;span class=secno&gt;8.2.4.2.
+          &lt;/span&gt;Character reference data state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#tag-open&quot;&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;Tag open
+          state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#close&quot;&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;Close tag
+          open state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#tag-name&quot;&gt;&lt;span class=secno&gt;8.2.4.5. &lt;/span&gt;Tag name
+          state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#before&quot;&gt;&lt;span class=secno&gt;8.2.4.6. &lt;/span&gt;Before
+          attribute name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#attribute&quot;&gt;&lt;span class=secno&gt;8.2.4.7. &lt;/span&gt;Attribute
+          name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#after&quot;&gt;&lt;span class=secno&gt;8.2.4.8. &lt;/span&gt;After
+          attribute name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#before0&quot;&gt;&lt;span class=secno&gt;8.2.4.9. &lt;/span&gt;Before
+          attribute value state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#attribute0&quot;&gt;&lt;span class=secno&gt;8.2.4.10.
+          &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#attribute1&quot;&gt;&lt;span class=secno&gt;8.2.4.11.
+          &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#attribute2&quot;&gt;&lt;span class=secno&gt;8.2.4.12.
+          &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#character2&quot;&gt;&lt;span class=secno&gt;8.2.4.13.
+          &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#after0&quot;&gt;&lt;span class=secno&gt;8.2.4.14. &lt;/span&gt;After
+          attribute value (quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#self-closing&quot;&gt;&lt;span class=secno&gt;8.2.4.15.
+          &lt;/span&gt;Self-closing start tag state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#bogus&quot;&gt;&lt;span class=secno&gt;8.2.4.16. &lt;/span&gt;Bogus
+          comment state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#markup&quot;&gt;&lt;span class=secno&gt;8.2.4.17. &lt;/span&gt;Markup
+          declaration open state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#comment0&quot;&gt;&lt;span class=secno&gt;8.2.4.18. &lt;/span&gt;Comment
+          start state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#comment1&quot;&gt;&lt;span class=secno&gt;8.2.4.19. &lt;/span&gt;Comment
+          start dash state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#comment2&quot;&gt;&lt;span class=secno&gt;8.2.4.20. &lt;/span&gt;Comment
+          end dash state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#comment3&quot;&gt;&lt;span class=secno&gt;8.2.4.21. &lt;/span&gt;Comment
+          end state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype&quot;&gt;&lt;span class=secno&gt;8.2.4.22. &lt;/span&gt;DOCTYPE
+          state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#before1&quot;&gt;&lt;span class=secno&gt;8.2.4.23. &lt;/span&gt;Before
+          DOCTYPE name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype0&quot;&gt;&lt;span class=secno&gt;8.2.4.24. &lt;/span&gt;DOCTYPE
+          name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#after1&quot;&gt;&lt;span class=secno&gt;8.2.4.25. &lt;/span&gt;After
+          DOCTYPE name state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#before2&quot;&gt;&lt;span class=secno&gt;8.2.4.26. &lt;/span&gt;Before
+          DOCTYPE public identifier state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype1&quot;&gt;&lt;span class=secno&gt;8.2.4.27. &lt;/span&gt;DOCTYPE
+          public identifier (double-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype2&quot;&gt;&lt;span class=secno&gt;8.2.4.28. &lt;/span&gt;DOCTYPE
+          public identifier (single-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#after2&quot;&gt;&lt;span class=secno&gt;8.2.4.29. &lt;/span&gt;After
+          DOCTYPE public identifier state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#before3&quot;&gt;&lt;span class=secno&gt;8.2.4.30. &lt;/span&gt;Before
+          DOCTYPE system identifier state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype3&quot;&gt;&lt;span class=secno&gt;8.2.4.31. &lt;/span&gt;DOCTYPE
+          system identifier (double-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#doctype4&quot;&gt;&lt;span class=secno&gt;8.2.4.32. &lt;/span&gt;DOCTYPE
+          system identifier (single-quoted) state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#after3&quot;&gt;&lt;span class=secno&gt;8.2.4.33. &lt;/span&gt;After
+          DOCTYPE system identifier state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#bogus0&quot;&gt;&lt;span class=secno&gt;8.2.4.34. &lt;/span&gt;Bogus
+          DOCTYPE state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#cdata0&quot;&gt;&lt;span class=secno&gt;8.2.4.35. &lt;/span&gt;CDATA
+          section state&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#tokenizing&quot;&gt;&lt;span class=secno&gt;8.2.4.36.
           &lt;/span&gt;Tokenizing character references&lt;/a&gt;
         &lt;/ul&gt;
 
@@ -2748,7 +2853,7 @@
 
    &lt;li&gt;
     &lt;p&gt;The &lt;a href=&quot;#url&quot;&gt;URL&lt;/a&gt; is a valid IRI reference and the &lt;a
-     href=&quot;#character1&quot; title=&quot;document's character encoding&quot;&gt;character
+     href=&quot;#character3&quot; title=&quot;document's character encoding&quot;&gt;character
      encoding&lt;/a&gt; of the URL's &lt;code&gt;Document&lt;/code&gt; is UTF-8 or UTF-16. &lt;a
      href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;
   &lt;/ul&gt;
@@ -2963,7 +3068,7 @@
      href=&quot;#urldoc&quot;&gt;associated with&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
 
    &lt;li&gt;
-    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;a href=&quot;#character1&quot;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;a href=&quot;#character3&quot;
      title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of &lt;var
      title=&quot;&quot;&gt;document&lt;/var&gt;.
 
@@ -6615,7 +6720,7 @@
   &lt;a href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString type, in DOMString replace);
   &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features);
   &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#open&quot; title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features, in boolean replace);
-  void &lt;a href=&quot;#close&quot; title=dom-document-close&gt;close&lt;/a&gt;();
+  void &lt;a href=&quot;#close0&quot; title=dom-document-close&gt;close&lt;/a&gt;();
   void &lt;a href=&quot;#document.write&quot; title=dom-document-write&gt;write&lt;/a&gt;(in DOMString text);
   void &lt;a href=&quot;#document.writeln...&quot; title=dom-document-writeln&gt;writeln&lt;/a&gt;(in DOMString text);
 
@@ -6788,9 +6893,9 @@
    &lt;/ul&gt;
   &lt;/div&gt;
 
-  &lt;p&gt;Documents have an associated &lt;dfn id=character1 title=&quot;document's
+  &lt;p&gt;Documents have an associated &lt;dfn id=character3 title=&quot;document's
    character encoding&quot;&gt;character encoding&lt;/dfn&gt;. When a &lt;code&gt;Document&lt;/code&gt;
-   object is created, the &lt;a href=&quot;#character1&quot;&gt;document's character
+   object is created, the &lt;a href=&quot;#character3&quot;&gt;document's character
    encoding&lt;/a&gt; must be initialized to UTF-16. Various algorithms during page
    loading affect this value, as does the &lt;code title=dom-document-charset&gt;&lt;a
    href=&quot;#charset0&quot;&gt;charset&lt;/a&gt;&lt;/code&gt; setter. &lt;a
@@ -6800,15 +6905,15 @@
   &lt;p&gt;The &lt;dfn id=charset0
    title=dom-document-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt; DOM attribute must,
    on getting, return the preferred MIME name of the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;. On setting, if the
+   href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt;. On setting, if the
    new value is an IANA-registered alias for a character encoding, the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must be set to that
+   href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt; must be set to that
    character encoding. (Otherwise, nothing happens.)
 
   &lt;p&gt;The &lt;dfn id=characterset
    title=dom-document-characterSet&gt;&lt;code&gt;characterSet&lt;/code&gt;&lt;/dfn&gt; DOM
    attribute must, on getting, return the preferred MIME name of the &lt;a
-   href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;.
+   href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt;.
 
   &lt;p&gt;The &lt;dfn id=defaultcharset
    title=dom-document-defaultCharset&gt;&lt;code&gt;defaultCharset&lt;/code&gt;&lt;/dfn&gt; DOM
@@ -8312,7 +8417,7 @@
     &lt;p&gt;Remove all child nodes of the document.
 
    &lt;li&gt;
-    &lt;p&gt;Change the &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; to
+    &lt;p&gt;Change the &lt;a href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt; to
      UTF-16.
 
    &lt;li&gt;
@@ -8321,9 +8426,9 @@
      parser&lt;/dfn&gt; (meaning that it can be closed by the &lt;code
      title=dom-document-open&gt;&lt;a href=&quot;#open&quot;&gt;document.open()&lt;/a&gt;&lt;/code&gt; and
      &lt;code title=dom-document-close&gt;&lt;a
-     href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt; methods, and that the
+     href=&quot;#close0&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt; methods, and that the
      tokeniser will wait for an explicit call to &lt;code
-     title=dom-document-close&gt;&lt;a href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
+     title=dom-document-close&gt;&lt;a href=&quot;#close0&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
      before emitting an end-of-file token).
 
    &lt;li&gt;Mark the document as being an &lt;a href=&quot;#html-&quot; title=&quot;HTML
@@ -8389,7 +8494,7 @@
    href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object is null, then the
    method must raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.
 
-  &lt;p&gt;The &lt;dfn id=close title=dom-document-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  &lt;p&gt;The &lt;dfn id=close0 title=dom-document-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
    method must do nothing if there is no &lt;a
    href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt; associated with the
    document. If there is such a parser, then, when the method is called, the
@@ -9321,7 +9426,7 @@
    document-level metadata with the &lt;code title=attr-meta-name&gt;&lt;a
    href=&quot;#name&quot;&gt;name&lt;/a&gt;&lt;/code&gt; attribute, pragma directives with the &lt;code
    title=attr-meta-http-equiv&gt;&lt;a href=&quot;#http-equiv&quot;&gt;http-equiv&lt;/a&gt;&lt;/code&gt;
-   attribute, and the file's &lt;a href=&quot;#character2&quot;&gt;character encoding
+   attribute, and the file's &lt;a href=&quot;#character4&quot;&gt;character encoding
    declaration&lt;/a&gt; when an HTML document is serialized to string form (e.g.
    for transmission over the network or for disk storage) with the &lt;code
    title=attr-meta-charset&gt;&lt;a href=&quot;#charset1&quot;&gt;charset&lt;/a&gt;&lt;/code&gt; attribute.
@@ -9340,7 +9445,7 @@
 
   &lt;p&gt;The &lt;dfn id=charset1 title=attr-meta-charset&gt;&lt;code&gt;charset&lt;/code&gt;&lt;/dfn&gt;
    attribute specifies the character encoding used by the document. This is
-   called a &lt;a href=&quot;#character2&quot;&gt;character encoding declaration&lt;/a&gt;.
+   called a &lt;a href=&quot;#character4&quot;&gt;character encoding declaration&lt;/a&gt;.
 
   &lt;p&gt;The &lt;code title=attr-meta-charset&gt;&lt;a href=&quot;#charset1&quot;&gt;charset&lt;/a&gt;&lt;/code&gt;
    attribute may be specified in &lt;a href=&quot;#html5&quot; title=HTML5&gt;HTML
@@ -9621,7 +9726,7 @@
      user agent requirements are all handled by the parsing section of the
      specification. The state is just an alternative form of setting the
      &lt;code title=meta-charset&gt;charset&lt;/code&gt; attribute: it is a &lt;a
-     href=&quot;#character2&quot;&gt;character encoding declaration&lt;/a&gt;.&lt;/p&gt;
+     href=&quot;#character4&quot;&gt;character encoding declaration&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;For &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; elements in the &lt;a
      href=&quot;#encoding&quot; title=attr-meta-http-equiv-content-type&gt;Encoding
@@ -9831,7 +9936,7 @@
   though if we do then we have to duplicate the requirements in the
   parsing section for conformance checkers --&gt;
 
-  &lt;p&gt;A &lt;dfn id=character2&gt;character encoding declaration&lt;/dfn&gt; is a mechanism
+  &lt;p&gt;A &lt;dfn id=character4&gt;character encoding declaration&lt;/dfn&gt; is a mechanism
    by which the character encoding used to store or transmit a document is
    specified.
 
@@ -9847,7 +9952,7 @@
    <A HREF="http://www.iana.org/assignments/character-sets">http://www.iana.org/assignments/character-sets</A> --&gt;
 
    &lt;li&gt;The character encoding declaration must be serialized without the use
-    of &lt;a href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt; or
+    of &lt;a href=&quot;#character5&quot; title=syntax-charref&gt;character references&lt;/a&gt; or
     character escapes of any kind.
   &lt;/ul&gt;
 
@@ -25144,7 +25249,7 @@
 
     &lt;p&gt;Otherwise, let &lt;var&gt;&lt;a href=&quot;#the-scripts0&quot;&gt;the script's character
      encoding&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
-     element be the same as &lt;a href=&quot;#character1&quot; title=&quot;document's character
+     element be the same as &lt;a href=&quot;#character3&quot; title=&quot;document's character
      encoding&quot;&gt;the encoding of the document itself&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
@@ -30279,7 +30384,7 @@
   XXXDOCURL --&gt;
    is &lt;code&gt;about:blank&lt;/code&gt;&lt;!-- XXX xref --&gt;, which is marked as being an
    &lt;a href=&quot;#html-&quot; title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt;, and whose &lt;a
-   href=&quot;#character1&quot; title=&quot;document's character encoding&quot;&gt;character
+   href=&quot;#character3&quot; title=&quot;document's character encoding&quot;&gt;character
    encoding&lt;/a&gt; is UTF-8. The &lt;code&gt;Document&lt;/code&gt; must have a single child
    &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; node, which itself has a single
    child &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; node. If the &lt;a
@@ -35129,7 +35234,7 @@
    or implied by the algorithms given in this specification, are the ones
    that must be used when determining the character encoding according to the
    rules given in the above specifications. Once the character encoding is
-   established, the &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt;
+   established, the &lt;a href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt;
    must be set to that character encoding.
 
   &lt;p&gt;If the root element, as parsed according to the XML specifications cited
@@ -35194,7 +35299,7 @@
    versions thereof. &lt;a href=&quot;#refsRFC2046&quot;&gt;[RFC2046]&lt;/a&gt; &lt;a
    href=&quot;#refsRFC2646&quot;&gt;[RFC2646]&lt;/a&gt;
 
-  &lt;p&gt;The &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must be set
+  &lt;p&gt;The &lt;a href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt; must be set
    to the character encoding used to decode the document.
 
   &lt;p&gt;Upon creation of the &lt;code&gt;Document&lt;/code&gt; object, the user agent must
@@ -41795,10 +41900,10 @@
 
   &lt;p&gt;The &lt;dfn id=disconnect
    title=dom-WebSocket-disconnect&gt;&lt;code&gt;disconnect()&lt;/code&gt;&lt;/dfn&gt; method must
-   &lt;a href=&quot;#close1&quot;&gt;close the Web Socket connection&lt;/a&gt; or connection
+   &lt;a href=&quot;#close2&quot;&gt;close the Web Socket connection&lt;/a&gt; or connection
    attempt, if any. If the connection is already closed, it must do nothing.
    Closing the connection causes a &lt;code title=event-WebSocket-close&gt;&lt;a
-   href=&quot;#close0&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event to be fired and the &lt;code
+   href=&quot;#close1&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event to be fired and the &lt;code
    title=dom-WebSocket-readyState&gt;&lt;a
    href=&quot;#readystate1&quot;&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to change, as
    &lt;a href=&quot;#closeWebSocket&quot;&gt;described below&lt;/a&gt;.
@@ -41809,7 +41914,7 @@
    event is fired when the &lt;a href=&quot;#web-socket&quot;&gt;Web Socket connection is
    established&lt;/a&gt;.
 
-  &lt;p&gt;The &lt;dfn id=close0 title=event-WebSocket-close&gt;&lt;code&gt;close&lt;/code&gt;&lt;/dfn&gt;
+  &lt;p&gt;The &lt;dfn id=close1 title=event-WebSocket-close&gt;&lt;code&gt;close&lt;/code&gt;&lt;/dfn&gt;
    event is fired when the connection is closed (whether by the author,
    calling the &lt;code title=dom-WebSocket-disconnect&gt;&lt;a
    href=&quot;#disconnect&quot;&gt;disconnect()&lt;/a&gt;&lt;/code&gt; method, or by the server, or by
@@ -41859,7 +41964,7 @@
 
    &lt;dd&gt;
     &lt;p&gt;Must be invoked whenever an &lt;code title=event-WebSocket-close&gt;&lt;a
-     href=&quot;#close0&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
+     href=&quot;#close1&quot;&gt;close&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
      the &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.
   &lt;/dl&gt;
 
@@ -42236,7 +42341,7 @@
   &lt;/ol&gt;
 
   &lt;p&gt;To &lt;dfn id=fail-the&gt;fail the Web Socket connection&lt;/dfn&gt;, the user agent
-   must &lt;a href=&quot;#close1&quot;&gt;close the Web Socket connection&lt;/a&gt;, and may report
+   must &lt;a href=&quot;#close2&quot;&gt;close the Web Socket connection&lt;/a&gt;, and may report
    the problem to the user (which would be especially useful for developers).
    However, user agents must not convey the failure information to the script
    in a way distinguishable from the Web Socket being closed normally.
@@ -42530,16 +42635,16 @@
 
   &lt;h5 id=closing0&gt;&lt;span class=secno&gt;7.3.4.3. &lt;/span&gt;Closing the connection&lt;/h5&gt;
 
-  &lt;p&gt;To &lt;dfn id=close1&gt;close the Web Socket connection&lt;/dfn&gt;, either the user
+  &lt;p&gt;To &lt;dfn id=close2&gt;close the Web Socket connection&lt;/dfn&gt;, either the user
    agent or the server closes the TCP/IP connection. There is no closing
    handshake. Whether the user agent or the server closes the connection, it
    is said that the &lt;dfn id=web-socket0&gt;Web Socket connection is
    closed&lt;/dfn&gt;.
 
-  &lt;p&gt;Servers may &lt;a href=&quot;#close1&quot;&gt;close the Web Socket connection&lt;/a&gt;
+  &lt;p&gt;Servers may &lt;a href=&quot;#close2&quot;&gt;close the Web Socket connection&lt;/a&gt;
    whenever desired.
 
-  &lt;p&gt;User agents should not &lt;a href=&quot;#close1&quot;&gt;close the Web Socket
+  &lt;p&gt;User agents should not &lt;a href=&quot;#close2&quot;&gt;close the Web Socket
    connection&lt;/a&gt; arbitrarily.
 
   &lt;p id=closeWebSocket&gt;When the &lt;a href=&quot;#web-socket0&quot;&gt;Web Socket connection
@@ -42548,7 +42653,7 @@
    changed to &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a
    href=&quot;#closed&quot;&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (2), and the user agent must &lt;a
    href=&quot;#firing2&quot;&gt;fire a simple event&lt;/a&gt; named &lt;code
-   title=event-WebSocket-close&gt;&lt;a href=&quot;#close0&quot;&gt;close&lt;/a&gt;&lt;/code&gt; at the
+   title=event-WebSocket-close&gt;&lt;a href=&quot;#close1&quot;&gt;close&lt;/a&gt;&lt;/code&gt; at the
    &lt;code&gt;&lt;a href=&quot;#websocket0&quot;&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.
 
   &lt;h3 id=crossDocumentMessages&gt;&lt;span class=secno&gt;7.4 &lt;/span&gt;&lt;dfn
@@ -42884,7 +42989,7 @@
   readonly attribute boolean &lt;a href=&quot;#active0&quot; title=dom-MessagePort-active&gt;active&lt;/a&gt;;
   boolean &lt;a href=&quot;#postmessage1&quot; title=dom-MessagePort-postMessage&gt;postMessage&lt;/a&gt;(in DOMString message);
   boolean &lt;a href=&quot;#postmessage1&quot; title=dom-MessagePort-postMessage&gt;postMessage&lt;/a&gt;(in DOMString message, in &lt;a href=&quot;#messageport0&quot;&gt;MessagePort&lt;/a&gt; messagePort);
-  void &lt;a href=&quot;#close2&quot; title=dom-MessagePort-close&gt;close&lt;/a&gt;();
+  void &lt;a href=&quot;#close3&quot; title=dom-MessagePort-close&gt;close&lt;/a&gt;();
 
   // event handler attributes
            attribute &lt;span&gt;EventListener&lt;/span&gt; &lt;a href=&quot;#onmessage1&quot; title=handler-MessagePort-onmessage&gt;onmessage&lt;/a&gt;;
@@ -43108,7 +43213,7 @@
 
   &lt;hr&gt;
 
-  &lt;p&gt;The &lt;dfn id=close2
+  &lt;p&gt;The &lt;dfn id=close3
    title=dom-MessagePort-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method, when called
    on a port &lt;var title=&quot;&quot;&gt;local port&lt;/var&gt; that is entangled with another
    port, must cause the user agents to run the following steps:
@@ -43258,7 +43363,7 @@
    &lt;li&gt;Any number of &lt;a href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;
     and &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;.
 
-   &lt;li&gt;A &lt;a href=&quot;#doctype&quot; title=syntax-doctype&gt;DOCTYPE&lt;/a&gt;.
+   &lt;li&gt;A &lt;a href=&quot;#doctype5&quot; title=syntax-doctype&gt;DOCTYPE&lt;/a&gt;.
 
    &lt;li&gt;Any number of &lt;a href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;
     and &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;.
@@ -43298,7 +43403,7 @@
 
   &lt;h4 id=the-doctype&gt;&lt;span class=secno&gt;8.1.1 &lt;/span&gt;The DOCTYPE&lt;/h4&gt;
 
-  &lt;p&gt;A &lt;dfn id=doctype title=syntax-doctype&gt;DOCTYPE&lt;/dfn&gt; is a mostly
+  &lt;p&gt;A &lt;dfn id=doctype5 title=syntax-doctype&gt;DOCTYPE&lt;/dfn&gt; is a mostly
    useless, but required, header.
 
   &lt;p class=note&gt;DOCTYPEs are required for legacy reasons. When omitted,
@@ -43434,7 +43539,7 @@
    described below.
 
   &lt;p&gt;RCDATA elements can have &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt; and
-   &lt;a href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt;, but
+   &lt;a href=&quot;#character5&quot; title=syntax-charref&gt;character references&lt;/a&gt;, but
    the text must not contain an &lt;a href=&quot;#ambiguous&quot;
    title=syntax-ambiguous-ampersand&gt;ambiguous ampersand&lt;/a&gt;. There are also
    &lt;a href=&quot;#cdata-rcdata-restrictions&quot;&gt;further restrictions&lt;/a&gt; described
@@ -43444,8 +43549,8 @@
    any contents (since, again, as there's no end tag, no content can be put
    between the start tag and the end tag). Foreign elements whose start tag
    is &lt;em&gt;not&lt;/em&gt; marked as self-closing can have &lt;a href=&quot;#text2&quot;
-   title=syntax-text&gt;text&lt;/a&gt;, &lt;a href=&quot;#character3&quot;
-   title=syntax-charref&gt;character references&lt;/a&gt;, &lt;a href=&quot;#cdata0&quot;
+   title=syntax-text&gt;text&lt;/a&gt;, &lt;a href=&quot;#character5&quot;
+   title=syntax-charref&gt;character references&lt;/a&gt;, &lt;a href=&quot;#cdata1&quot;
    title=syntax-cdata&gt;CDATA sections&lt;/a&gt;, other &lt;a href=&quot;#elements3&quot;
    title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a href=&quot;#comments0&quot;
    title=syntax-comments&gt;comments&lt;/a&gt;, but the text must not contain the
@@ -43454,7 +43559,7 @@
    ampersand&lt;/a&gt;.
 
   &lt;p&gt;Normal elements can have &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt;, &lt;a
-   href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt;, other &lt;a
+   href=&quot;#character5&quot; title=syntax-charref&gt;character references&lt;/a&gt;, other &lt;a
    href=&quot;#elements3&quot; title=syntax-elements&gt;elements&lt;/a&gt;, and &lt;a
    href=&quot;#comments0&quot; title=syntax-comments&gt;comments&lt;/a&gt;, but the text must
    not contain the character U+003C LESS-THAN SIGN (&lt;code&gt;&lt;&lt;/code&gt;) or an
@@ -43465,7 +43570,7 @@
    model and those described in this paragraph. Those restrictions are
    described below.
 
-  &lt;p&gt;Tags contain a &lt;dfn id=tag-name title=syntax-tag-name&gt;tag name&lt;/dfn&gt;,
+  &lt;p&gt;Tags contain a &lt;dfn id=tag-name0 title=syntax-tag-name&gt;tag name&lt;/dfn&gt;,
    giving the element's name. HTML elements all have names that only use
    characters in the range U+0030 DIGIT ZERO .. U+0039 DIGIT NINE, U+0061
    LATIN SMALL LETTER A .. U+007A LATIN SMALL LETTER Z, U+0041 LATIN CAPITAL
@@ -43484,7 +43589,7 @@
     (&lt;code&gt;&lt;&lt;/code&gt;).
 
    &lt;li&gt;The next few characters of a start tag must be the element's &lt;a
-    href=&quot;#tag-name&quot; title=syntax-tag-name&gt;tag name&lt;/a&gt;.
+    href=&quot;#tag-name0&quot; title=syntax-tag-name&gt;tag name&lt;/a&gt;.
 
    &lt;li&gt;If there are to be any attributes in the next step, there must first
     be one or more &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space
@@ -43522,7 +43627,7 @@
     (&lt;code&gt;/&lt;/code&gt;).
 
    &lt;li&gt;The next few characters of an end tag must be the element's &lt;a
-    href=&quot;#tag-name&quot; title=syntax-tag-name&gt;tag name&lt;/a&gt;.
+    href=&quot;#tag-name0&quot; title=syntax-tag-name&gt;tag name&lt;/a&gt;.
 
    &lt;li&gt;After the tag name, there may be one or more &lt;a href=&quot;#space&quot;
     title=&quot;space character&quot;&gt;space characters&lt;/a&gt;.
@@ -43536,7 +43641,7 @@
   &lt;p&gt;&lt;dfn id=attributes2 title=syntax-attributes&gt;Attributes&lt;/dfn&gt; for an
    element are expressed inside the element's start tag.
 
-  &lt;p&gt;Attributes have a name and a value. &lt;dfn id=attribute
+  &lt;p&gt;Attributes have a name and a value. &lt;dfn id=attribute3
    title=syntax-attribute-name&gt;Attribute names&lt;/dfn&gt; must consist of one or
    more characters other than the &lt;a href=&quot;#space&quot; title=&quot;space
    character&quot;&gt;space characters&lt;/a&gt;, U+0000 NULL, U+0022 QUOTATION MARK
@@ -43548,9 +43653,9 @@
    all-lowercase&lt;!-- ASCII case-insensitive --&gt;, matches the attribute's
    name; attribute names are case-insensitive.
 
-  &lt;p&gt;&lt;dfn id=attribute0 title=syntax-attribute-value&gt;Attribute values&lt;/dfn&gt;
+  &lt;p&gt;&lt;dfn id=attribute4 title=syntax-attribute-value&gt;Attribute values&lt;/dfn&gt;
    are a mixture of &lt;a href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt; and &lt;a
-   href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt;, except
+   href=&quot;#character5&quot; title=syntax-charref&gt;character references&lt;/a&gt;, except
    with the additional restriction that the text cannot contain an &lt;a
    href=&quot;#ambiguous&quot; title=syntax-ambiguous-ampersand&gt;ambiguous
    ampersand&lt;/a&gt;.
@@ -43561,7 +43666,7 @@
    &lt;dt&gt;Empty attribute syntax
 
    &lt;dd&gt;
-    &lt;p&gt;Just the &lt;a href=&quot;#attribute&quot; title=syntax-attribute-name&gt;attribute
+    &lt;p&gt;Just the &lt;a href=&quot;#attribute3&quot; title=syntax-attribute-name&gt;attribute
      name&lt;/a&gt;.&lt;/p&gt;
 
     &lt;div class=example&gt;
@@ -43579,11 +43684,11 @@
    &lt;dt&gt;Unquoted attribute value syntax
 
    &lt;dd&gt;
-    &lt;p&gt;The &lt;a href=&quot;#attribute&quot; title=syntax-attribute-name&gt;attribute
+    &lt;p&gt;The &lt;a href=&quot;#attribute3&quot; title=syntax-attribute-name&gt;attribute
      name&lt;/a&gt;, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
      character&quot;&gt;space characters&lt;/a&gt;, followed by a single U+003D EQUALS SIGN
      character, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
-     character&quot;&gt;space characters&lt;/a&gt;, followed by the &lt;a href=&quot;#attribute0&quot;
+     character&quot;&gt;space characters&lt;/a&gt;, followed by the &lt;a href=&quot;#attribute4&quot;
      title=syntax-attribute-value&gt;attribute value&lt;/a&gt;, which, in addition to
      the requirements given above for attribute values, must not contain any
      literal &lt;a href=&quot;#space&quot; title=&quot;space character&quot;&gt;space characters&lt;/a&gt;, a
@@ -43609,12 +43714,12 @@
    &lt;dt&gt;Single-quoted attribute value syntax
 
    &lt;dd&gt;
-    &lt;p&gt;The &lt;a href=&quot;#attribute&quot; title=syntax-attribute-name&gt;attribute
+    &lt;p&gt;The &lt;a href=&quot;#attribute3&quot; title=syntax-attribute-name&gt;attribute
      name&lt;/a&gt;, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
      character&quot;&gt;space characters&lt;/a&gt;, followed by a single U+003D EQUALS SIGN
      character, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
      character&quot;&gt;space characters&lt;/a&gt;, followed by a single U+0027 APOSTROPHE
-     (&lt;code&gt;'&lt;/code&gt;) character, followed by the &lt;a href=&quot;#attribute0&quot;
+     (&lt;code&gt;'&lt;/code&gt;) character, followed by the &lt;a href=&quot;#attribute4&quot;
      title=syntax-attribute-value&gt;attribute value&lt;/a&gt;, which, in addition to
      the requirements given above for attribute values, must not contain any
      literal U+0027 APOSTROPHE (&lt;code&gt;'&lt;/code&gt;) characters, and finally
@@ -43635,12 +43740,12 @@
    &lt;dt&gt;Double-quoted attribute value syntax
 
    &lt;dd&gt;
-    &lt;p&gt;The &lt;a href=&quot;#attribute&quot; title=syntax-attribute-name&gt;attribute
+    &lt;p&gt;The &lt;a href=&quot;#attribute3&quot; title=syntax-attribute-name&gt;attribute
      name&lt;/a&gt;, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
      character&quot;&gt;space characters&lt;/a&gt;, followed by a single U+003D EQUALS SIGN
      character, followed by zero or more &lt;a href=&quot;#space&quot; title=&quot;space
      character&quot;&gt;space characters&lt;/a&gt;, followed by a single U+0022 QUOTATION
-     MARK (&lt;code&gt;&quot;&lt;/code&gt;) character, followed by the &lt;a href=&quot;#attribute0&quot;
+     MARK (&lt;code&gt;&quot;&lt;/code&gt;) character, followed by the &lt;a href=&quot;#attribute4&quot;
      title=syntax-attribute-value&gt;attribute value&lt;/a&gt;, which, in addition to
      the requirements given above for attribute values, must not contain any
      literal U+0022 QUOTATION MARK (&lt;code&gt;&quot;&lt;/code&gt;) characters, and finally
@@ -43910,7 +44015,7 @@
    that is not itself in an &lt;a href=&quot;#escaping&quot; title=syntax-escape&gt;escaping
    text span&lt;/a&gt;, and ends at the next &lt;a href=&quot;#escaping1&quot;
    title=syntax-escape-end&gt;escaping text span end&lt;/a&gt;. There cannot be any &lt;a
-   href=&quot;#character3&quot; title=syntax-charref&gt;character references&lt;/a&gt; inside an
+   href=&quot;#character5&quot; title=syntax-charref&gt;character references&lt;/a&gt; inside an
    &lt;a href=&quot;#escaping&quot; title=syntax-escape&gt;escaping text span&lt;/a&gt;.
 
   &lt;p&gt;An &lt;dfn id=escaping0 title=syntax-escape-start&gt;escaping text span
@@ -43955,7 +44060,7 @@
   &lt;h4 id=character&gt;&lt;span class=secno&gt;8.1.4 &lt;/span&gt;Character references&lt;/h4&gt;
 
   &lt;p&gt;In certain cases described in other sections, &lt;a href=&quot;#text2&quot;
-   title=syntax-text&gt;text&lt;/a&gt; may be mixed with &lt;dfn id=character3
+   title=syntax-text&gt;text&lt;/a&gt; may be mixed with &lt;dfn id=character5
    title=syntax-charref&gt;character references&lt;/dfn&gt;. These can be used to
    escape characters that couldn't otherwise legally be included in &lt;a
    href=&quot;#text2&quot; title=syntax-text&gt;text&lt;/a&gt;.
@@ -44004,7 +44109,7 @@
 
   &lt;h4 id=cdata&gt;&lt;span class=secno&gt;8.1.5 &lt;/span&gt;CDATA sections&lt;/h4&gt;
 
-  &lt;p&gt;&lt;dfn id=cdata0 title=syntax-cdata&gt;CDATA sections&lt;/dfn&gt; must start with
+  &lt;p&gt;&lt;dfn id=cdata1 title=syntax-cdata&gt;CDATA sections&lt;/dfn&gt; must start with
    the character sequence U+003C LESS-THAN SIGN, U+0021 EXCLAMATION MARK,
    U+005B LEFT SQUARE BRACKET, U+0043 LATIN CAPITAL LETTER C, U+0044 LATIN
    CAPITAL LETTER D, U+0041 LATIN CAPITAL LETTER A, U+0054 LATIN CAPITAL
@@ -44566,7 +44671,7 @@
      heuristically decide which to use as a default.
   &lt;/ol&gt;
 
-  &lt;p&gt;The &lt;a href=&quot;#character1&quot;&gt;document's character encoding&lt;/a&gt; must
+  &lt;p&gt;The &lt;a href=&quot;#character3&quot;&gt;document's character encoding&lt;/a&gt; must
    immediately be set to the value returned from this algorithm, at the same
    time as the user agent uses the returned value to select the decoder to
    use for the input stream.
@@ -44789,7 +44894,7 @@
    parser is a &lt;a href=&quot;#script-created&quot;&gt;script-created parser&lt;/a&gt;, then the
    end of the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; is reached when an &lt;dfn
    id=explicit0&gt;explicit &quot;EOF&quot; character&lt;/dfn&gt; (inserted by the &lt;code
-   title=dom-document-close&gt;&lt;a href=&quot;#close&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
+   title=dom-document-close&gt;&lt;a href=&quot;#close0&quot;&gt;document.close()&lt;/a&gt;&lt;/code&gt;
    method) is consumed. Otherwise, the &quot;EOF&quot; character is not a real
    character in the stream, but rather the lack of any further characters.
 
@@ -44819,7 +44924,7 @@
     have the same Unicode interpretations in both the current encoding and
     the new encoding, and if the user agent supports changing the converter
     on the fly, then the user agent may change to the new converter for the
-    encoding on the fly. Set the &lt;a href=&quot;#character1&quot;&gt;document's character
+    encoding on the fly. Set the &lt;a href=&quot;#character3&quot;&gt;document's character
     encoding&lt;/a&gt; and the encoding used to convert the input stream to the new
     encoding, set the &lt;a href=&quot;#confidence&quot;
     title=concept-encoding-confidence&gt;confidence&lt;/a&gt; to &lt;i&gt;confident&lt;/i&gt;, and
@@ -44842,11 +44947,11 @@
 
   &lt;p&gt;Initially the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#initial&quot;
    title=&quot;insertion mode: initial&quot;&gt;initial&lt;/a&gt;&quot;. It can change to &quot;&lt;a
-   href=&quot;#before4&quot; title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, &quot;&lt;a
-   href=&quot;#before5&quot; title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, &quot;&lt;a
+   href=&quot;#before9&quot; title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, &quot;&lt;a
+   href=&quot;#before10&quot; title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, &quot;&lt;a
    href=&quot;#in-head&quot; title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, &quot;&lt;a
    href=&quot;#in-head0&quot; title=&quot;insertion mode: in head noscript&quot;&gt;in head
-   noscript&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after4&quot; title=&quot;insertion mode: after head&quot;&gt;after
+   noscript&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after9&quot; title=&quot;insertion mode: after head&quot;&gt;after
    head&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-body&quot; title=&quot;insertion mode: in body&quot;&gt;in
    body&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-table&quot; title=&quot;insertion mode: in table&quot;&gt;in
    table&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-caption&quot; title=&quot;insertion mode: in caption&quot;&gt;in
@@ -44858,13 +44963,13 @@
    select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-select0&quot; title=&quot;insertion mode: in
    select in table&quot;&gt;in select in table&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#in-foreign&quot;
    title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot;, &quot;&lt;a
-   href=&quot;#after5&quot; title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, &quot;&lt;a
+   href=&quot;#after10&quot; title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, &quot;&lt;a
    href=&quot;#in-frameset&quot; title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot;,
-   &quot;&lt;a href=&quot;#after6&quot; title=&quot;insertion mode: after frameset&quot;&gt;after
-   frameset&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after7&quot; title=&quot;insertion mode: after after
-   body&quot;&gt;after after body&lt;/a&gt;&quot;, and &quot;&lt;a href=&quot;#after8&quot; title=&quot;insertion mode:
-   after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot; during the course of the
-   parsing, as described in the &lt;a href=&quot;#tree-construction0&quot;&gt;tree
+   &quot;&lt;a href=&quot;#after11&quot; title=&quot;insertion mode: after frameset&quot;&gt;after
+   frameset&lt;/a&gt;&quot;, &quot;&lt;a href=&quot;#after12&quot; title=&quot;insertion mode: after after
+   body&quot;&gt;after after body&lt;/a&gt;&quot;, and &quot;&lt;a href=&quot;#after13&quot; title=&quot;insertion
+   mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot; during the course of
+   the parsing, as described in the &lt;a href=&quot;#tree-construction0&quot;&gt;tree
    construction&lt;/a&gt; stage. The insertion mode affects how tokens are
    processed and whether CDATA sections are supported.
 
@@ -44983,9 +45088,9 @@
    &lt;li&gt;If &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is an &lt;code&gt;&lt;a
     href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element, then: if the &lt;a
     href=&quot;#head-element&quot;&gt;&lt;code title=&quot;&quot;&gt;head&lt;/code&gt; element pointer&lt;/a&gt; is
-    null, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before5&quot;
+    null, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before10&quot;
     title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, otherwise, switch
-    the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after4&quot; title=&quot;insertion
+    the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after9&quot; title=&quot;insertion
     mode: after head&quot;&gt;after head&lt;/a&gt;&quot;. In either case, abort these steps. (&lt;a
     href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/li&gt;
    &lt;!-- XXX
@@ -45012,7 +45117,7 @@
    manipulated in a random access fashion as part of &lt;a
    href=&quot;#adoptionAgency&quot;&gt;the handling for misnested tags&lt;/a&gt;).
 
-  &lt;p&gt;The &quot;&lt;a href=&quot;#before4&quot; title=&quot;insertion mode: before html&quot;&gt;before
+  &lt;p&gt;The &quot;&lt;a href=&quot;#before9&quot; title=&quot;insertion mode: before html&quot;&gt;before
    html&lt;/a&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt; creates the &lt;code&gt;&lt;a
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; root element node, which is then added to the
    stack.
@@ -45022,7 +45127,7 @@
    href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; element that is created as part of &lt;a
    href=&quot;#html-fragment0&quot; title=&quot;html fragment parsing algorithm&quot;&gt;that
    algorithm&lt;/a&gt;. (The &lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt; skips the &quot;&lt;a
-   href=&quot;#before4&quot; title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;
+   href=&quot;#before9&quot; title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;
    &lt;span&gt;insertion mode&lt;/span&gt;.)
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#html&quot;&gt;html&lt;/a&gt;&lt;/code&gt; node, however it is created,
@@ -45339,12 +45444,13 @@
 
   &lt;p&gt;Implementations must act as if they used the following state machine to
    tokenise HTML. The state machine must start in the &lt;a
-   href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;. Most states consume a single character,
-   which may have various side-effects, and either switches the state machine
-   to a new state to &lt;em&gt;reconsume&lt;/em&gt; the same character, or switches it to
-   a new state (to consume the next character), or repeats the same state (to
-   consume the next character). Some states have more complicated behavior
-   and can consume several characters before switching to another state.
+   href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;. Most states consume a single
+   character, which may have various side-effects, and either switches the
+   state machine to a new state to &lt;em&gt;reconsume&lt;/em&gt; the same character, or
+   switches it to a new state (to consume the next character), or repeats the
+   same state (to consume the next character). Some states have more
+   complicated behavior and can consume several characters before switching
+   to another state.
 
   &lt;p&gt;The exact behavior of certain states depends on a &lt;dfn
    id=content3&gt;content model flag&lt;/dfn&gt; that is set after certain tokens are
@@ -45399,1378 +45505,1350 @@
    be &lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;executed&lt;/a&gt; and
    removed from its list.
 
-  &lt;p&gt;The tokeniser state machine is as follows:&lt;/p&gt;
+  &lt;p&gt;The tokeniser state machine consists of the states defined in the
+   following subsections.&lt;/p&gt;
   &lt;!-- XXX should go through these reordering the entries so that
   they're in some consistent order, like, by Unicode, errors last, or
   something --&gt;
 
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;dfn id=data-state&gt;Data state&lt;/dfn&gt;
+  &lt;h5 id=data-state&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;&lt;dfn
+   id=data-state0&gt;Data state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to one of
-      the PCDATA or RCDATA states and the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt;
-      is false: switch to the &lt;a href=&quot;#character4&quot;&gt;character reference data
-      state&lt;/a&gt;.
+   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to one of
+    the PCDATA or RCDATA states and the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt; is
+    false: switch to the &lt;a href=&quot;#character6&quot;&gt;character reference data
+    state&lt;/a&gt;.
 
-     &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry below.
+   &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry below.
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
-       the RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
-       flag&lt;/a&gt; is false, and there are at least three characters before this
-       one in the input stream, and the last four characters in the input
-       stream, including this one, are U+003C LESS-THAN SIGN, U+0021
-       EXCLAMATION MARK, U+002D HYPHEN-MINUS, and U+002D HYPHEN-MINUS
-       (&quot;&lt;!--&quot;), then set the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt; to true.&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either the
+     RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
+     flag&lt;/a&gt; is false, and there are at least three characters before this
+     one in the input stream, and the last four characters in the input
+     stream, including this one, are U+003C LESS-THAN SIGN, U+0021
+     EXCLAMATION MARK, U+002D HYPHEN-MINUS, and U+002D HYPHEN-MINUS
+     (&quot;&lt;!--&quot;), then set the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt; to true.&lt;/p&gt;
 
-      &lt;p&gt;In any case, emit the input character as a character token. Stay in
-       the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;In any case, emit the input character as a character token. Stay in
+     the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
-      PCDATA state: switch to the &lt;a href=&quot;#tag-open&quot;&gt;tag open state&lt;/a&gt;.
+   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
+    PCDATA state: switch to the &lt;a href=&quot;#tag-open0&quot;&gt;tag open state&lt;/a&gt;.
 
-     &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
-      the RCDATA state or the CDATA state and the &lt;a href=&quot;#escape&quot;&gt;escape
-      flag&lt;/a&gt; is false: switch to the &lt;a href=&quot;#tag-open&quot;&gt;tag open
-      state&lt;/a&gt;.
+   &lt;dd&gt;When the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
+    the RCDATA state or the CDATA state and the &lt;a href=&quot;#escape&quot;&gt;escape
+    flag&lt;/a&gt; is false: switch to the &lt;a href=&quot;#tag-open0&quot;&gt;tag open state&lt;/a&gt;.
 
-     &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry below.
+   &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry below.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;
-      &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either
-       the RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
-       flag&lt;/a&gt; is true, and the last three characters in the input stream
-       including this one are U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS,
-       U+003E GREATER-THAN SIGN (&quot;--&gt;&quot;), set the &lt;a href=&quot;#escape&quot;&gt;escape
-       flag&lt;/a&gt; to false.&lt;/p&gt;
-      &lt;!-- no need to check
-      that there are enough characters, since you can only run into
-      this if the flag is true in the first place, which requires four
-      characters. --&gt;
-      
-      &lt;p&gt;In any case, emit the input character as a character token. Stay in
-       the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to either the
+     RCDATA state or the CDATA state, and the &lt;a href=&quot;#escape&quot;&gt;escape
+     flag&lt;/a&gt; is true, and the last three characters in the input stream
+     including this one are U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E
+     GREATER-THAN SIGN (&quot;--&gt;&quot;), set the &lt;a href=&quot;#escape&quot;&gt;escape flag&lt;/a&gt;
+     to false.&lt;/p&gt;
+    &lt;!-- no need to check
+    that there are enough characters, since you can only run into
+    this if the flag is true in the first place, which requires four
+    characters. --&gt;
+    
+    &lt;p&gt;In any case, emit the input character as a character token. Stay in
+     the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;Emit an end-of-file token.
+   &lt;dd&gt;Emit an end-of-file token.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Emit the input character as a character token. Stay in the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Emit the input character as a character token. Stay in the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=character4&gt;Character reference data state&lt;/dfn&gt;
+  &lt;h5 id=character1&gt;&lt;span class=secno&gt;8.2.4.2. &lt;/span&gt;&lt;dfn
+   id=character6&gt;Character reference data state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content3&quot;&gt;content model
-     flag&lt;/a&gt; is set to the CDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+   flag&lt;/a&gt; is set to the CDATA state.)&lt;/em&gt;
 
-    &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;, with
-     no &lt;a href=&quot;#additional&quot;&gt;additional allowed character&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;, with no
+   &lt;a href=&quot;#additional&quot;&gt;additional allowed character&lt;/a&gt;.
 
-    &lt;p&gt;If nothing is returned, emit a U+0026 AMPERSAND character token.&lt;/p&gt;
+  &lt;p&gt;If nothing is returned, emit a U+0026 AMPERSAND character token.
 
-    &lt;p&gt;Otherwise, emit the character token that was returned.&lt;/p&gt;
+  &lt;p&gt;Otherwise, emit the character token that was returned.
 
-    &lt;p&gt;Finally, switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Finally, switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-   &lt;dt&gt;&lt;dfn id=tag-open&gt;Tag open state&lt;/dfn&gt;
+  &lt;h5 id=tag-open&gt;&lt;span class=secno&gt;8.2.4.3. &lt;/span&gt;&lt;dfn id=tag-open0&gt;Tag
+   open state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content3&quot;&gt;content
-     model flag&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The behavior of this state depends on the &lt;a href=&quot;#content3&quot;&gt;content
+   model flag&lt;/a&gt;.
 
-    &lt;dl&gt;
-     &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
-      RCDATA or CDATA states
+  &lt;dl&gt;
+   &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+    or CDATA states
 
-     &lt;dd&gt;
-      &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;. If it is
-       a U+002F SOLIDUS (/) character, switch to the &lt;a href=&quot;#close3&quot;&gt;close
-       tag open state&lt;/a&gt;. Otherwise, emit a U+003C LESS-THAN SIGN character
-       token and reconsume the current input character in the &lt;a
-       href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;. If it is a
+     U+002F SOLIDUS (/) character, switch to the &lt;a href=&quot;#close4&quot;&gt;close tag
+     open state&lt;/a&gt;. Otherwise, emit a U+003C LESS-THAN SIGN character token
+     and reconsume the current input character in the &lt;a
+     href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the
-      PCDATA state
+   &lt;dt&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the PCDATA
+    state
 
-     &lt;dd&gt;
-      &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
-      &lt;dl class=switch&gt;
-       &lt;dt&gt;U+0021 EXCLAMATION MARK (!)
+    &lt;dl class=switch&gt;
+     &lt;dt&gt;U+0021 EXCLAMATION MARK (!)
 
-       &lt;dd&gt;Switch to the &lt;a href=&quot;#markup&quot;&gt;markup declaration open state&lt;/a&gt;.
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#markup0&quot;&gt;markup declaration open state&lt;/a&gt;.
 
-       &lt;dt&gt;U+002F SOLIDUS (/)
+     &lt;dt&gt;U+002F SOLIDUS (/)
 
-       &lt;dd&gt;Switch to the &lt;a href=&quot;#close3&quot;&gt;close tag open state&lt;/a&gt;.
+     &lt;dd&gt;Switch to the &lt;a href=&quot;#close4&quot;&gt;close tag open state&lt;/a&gt;.
 
-       &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL
-        LETTER Z
+     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
+      Z
 
-       &lt;dd&gt;Create a new start tag token, set its tag name to the lowercase
-        version of the input character (add 0x0020 to the character's code
-        point), then switch to the &lt;a href=&quot;#tag-name0&quot;&gt;tag name state&lt;/a&gt;.
-        (Don't emit the token yet; further details will be filled in before
-        it is emitted.)
+     &lt;dd&gt;Create a new start tag token, set its tag name to the lowercase
+      version of the input character (add 0x0020 to the character's code
+      point), then switch to the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;.
+      (Don't emit the token yet; further details will be filled in before it
+      is emitted.)
 
-       &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z
+     &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z
 
-       &lt;dd&gt;Create a new start tag token, set its tag name to the input
-        character, then switch to the &lt;a href=&quot;#tag-name0&quot;&gt;tag name
-        state&lt;/a&gt;. (Don't emit the token yet; further details will be filled
-        in before it is emitted.)
+     &lt;dd&gt;Create a new start tag token, set its tag name to the input
+      character, then switch to the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;.
+      (Don't emit the token yet; further details will be filled in before it
+      is emitted.)
 
-       &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-       &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
-        character token and a U+003E GREATER-THAN SIGN character token.
-        Switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
+      character token and a U+003E GREATER-THAN SIGN character token. Switch
+      to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-       &lt;dt&gt;U+003F QUESTION MARK (?)
+     &lt;dt&gt;U+003F QUESTION MARK (?)
 
-       &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
-        href=&quot;#bogus&quot;&gt;bogus comment state&lt;/a&gt;.
+     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
+      href=&quot;#bogus1&quot;&gt;bogus comment state&lt;/a&gt;.
 
-       &lt;dt&gt;Anything else
+     &lt;dt&gt;Anything else
 
-       &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
-        character token and reconsume the current input character in the &lt;a
-        href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
-      &lt;/dl&gt;
+     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
+      character token and reconsume the current input character in the &lt;a
+      href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
     &lt;/dl&gt;
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=close3&gt;Close tag open state&lt;/dfn&gt;
+  &lt;h5 id=close&gt;&lt;span class=secno&gt;8.2.4.4. &lt;/span&gt;&lt;dfn id=close4&gt;Close tag
+   open state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
-     or CDATA states but no start tag token has ever been emitted by this
-     instance of the tokeniser (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), or,
-     if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
-     or CDATA states and the next few characters do not match the tag name of
-     the last start tag token emitted (case insensitively), or if they do but
-     they are not immediately followed by one of the following characters:&lt;/p&gt;
+  &lt;p&gt;If the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
+   or CDATA states but no start tag token has ever been emitted by this
+   instance of the tokeniser (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), or, if
+   the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA or
+   CDATA states and the next few characters do not match the tag name of the
+   last start tag token emitted (case insensitively), or if they do but they
+   are not immediately followed by one of the following characters:
 
-    &lt;ul class=brief&gt;
-     &lt;li&gt;U+0009 CHARACTER TABULATION
+  &lt;ul class=brief&gt;
+   &lt;li&gt;U+0009 CHARACTER TABULATION
 
-     &lt;li&gt;U+000A LINE FEED (LF)
+   &lt;li&gt;U+000A LINE FEED (LF)
 
-     &lt;li&gt;U+000C FORM FEED (FF)&lt;/li&gt;
-     &lt;!--&lt;li&gt;U+000D CARRIAGE RETURN (CR)&lt;/li&gt;--&gt;
+   &lt;li&gt;U+000C FORM FEED (FF)&lt;/li&gt;
+   &lt;!--&lt;li&gt;U+000D CARRIAGE RETURN (CR)&lt;/li&gt;--&gt;
 
-     &lt;li&gt;U+0020 SPACE
+   &lt;li&gt;U+0020 SPACE
 
-     &lt;li&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;li&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;li&gt;U+002F SOLIDUS (/)
+   &lt;li&gt;U+002F SOLIDUS (/)
 
-     &lt;li&gt;EOF
-    &lt;/ul&gt;
+   &lt;li&gt;EOF
+  &lt;/ul&gt;
 
-    &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
-     character token, and switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;
-     to process the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, and switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;
+   to process the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.
 
-    &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to
-     the PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that
-     tag name, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Otherwise, if the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt; is set to
+   the PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that tag
+   name, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
-      Z
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z
 
-     &lt;dd&gt;Create a new end tag token, set its tag name to the lowercase
-      version of the input character (add 0x0020 to the character's code
-      point), then switch to the &lt;a href=&quot;#tag-name0&quot;&gt;tag name state&lt;/a&gt;.
-      (Don't emit the token yet; further details will be filled in before it
-      is emitted.)
+   &lt;dd&gt;Create a new end tag token, set its tag name to the lowercase version
+    of the input character (add 0x0020 to the character's code point), then
+    switch to the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;. (Don't emit the
+    token yet; further details will be filled in before it is emitted.)
 
-     &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z
 
-     &lt;dd&gt;Create a new end tag token, set its tag name to the input character,
-      then switch to the &lt;a href=&quot;#tag-name0&quot;&gt;tag name state&lt;/a&gt;. (Don't emit
-      the token yet; further details will be filled in before it is emitted.)
+   &lt;dd&gt;Create a new end tag token, set its tag name to the input character,
+    then switch to the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;. (Don't emit
+    the token yet; further details will be filled in before it is emitted.)
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
-      character token and a U+002F SOLIDUS character token. Reconsume the EOF
-      character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit a U+003C LESS-THAN SIGN
+    character token and a U+002F SOLIDUS character token. Reconsume the EOF
+    character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
-      href=&quot;#bogus&quot;&gt;bogus comment state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
+    href=&quot;#bogus1&quot;&gt;bogus comment state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=tag-name0&gt;Tag name state&lt;/dfn&gt;
+  &lt;h5 id=tag-name&gt;&lt;span class=secno&gt;8.2.4.5. &lt;/span&gt;&lt;dfn id=tag-name1&gt;Tag
+   name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
-      Z
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z
 
-     &lt;dd&gt;Append the lowercase version of the current input character (add
-      0x0020 to the character's code point) to the current tag token's tag
-      name. Stay in the &lt;a href=&quot;#tag-name0&quot;&gt;tag name state&lt;/a&gt;.
+   &lt;dd&gt;Append the lowercase version of the current input character (add
+    0x0020 to the character's code point) to the current tag token's tag
+    name. Stay in the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002F SOLIDUS (/)
+   &lt;dt&gt;U+002F SOLIDUS (/)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing&quot;&gt;self-closing start tag
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing0&quot;&gt;self-closing start tag
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current tag token's tag
-      name. Stay in the &lt;a href=&quot;#tag-name0&quot;&gt;tag name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current tag token's tag
+    name. Stay in the &lt;a href=&quot;#tag-name1&quot;&gt;tag name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=before&gt;Before attribute name state&lt;/dfn&gt;
+  &lt;h5 id=before&gt;&lt;span class=secno&gt;8.2.4.6. &lt;/span&gt;&lt;dfn id=before4&gt;Before
+   attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
-      Z
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z
 
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
-      name to the lowercase version of the current input character (add
-      0x0020 to the character's code point), and its value to the empty
-      string. Switch to the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
+    name to the lowercase version of the current input character (add 0x0020
+    to the character's code point), and its value to the empty string. Switch
+    to the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002F SOLIDUS (/)
+   &lt;dt&gt;U+002F SOLIDUS (/)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing&quot;&gt;self-closing start tag
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing0&quot;&gt;self-closing start tag
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)
+   &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
-      else&quot; entry below.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything else&quot;
+    entry below.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
-      name to the current input character, and its value to the empty string.
-      Switch to the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
+    name to the current input character, and its value to the empty string.
+    Switch to the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=attribute1&gt;Attribute name state&lt;/dfn&gt;
+  &lt;h5 id=attribute&gt;&lt;span class=secno&gt;8.2.4.7. &lt;/span&gt;&lt;dfn
+   id=attribute5&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after&quot;&gt;after attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after4&quot;&gt;after attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)
+   &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before0&quot;&gt;before attribute value state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before5&quot;&gt;before attribute value state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
-      Z
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z
 
-     &lt;dd&gt;Append the lowercase version of the current input character (add
-      0x0020 to the character's code point) to the current attribute's name.
-      Stay in the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Append the lowercase version of the current input character (add
+    0x0020 to the character's code point) to the current attribute's name.
+    Stay in the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002F SOLIDUS (/)
+   &lt;dt&gt;U+002F SOLIDUS (/)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing&quot;&gt;self-closing start tag
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing0&quot;&gt;self-closing start tag
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
-      else&quot; entry below.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything else&quot;
+    entry below.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current attribute's name.
-      Stay in the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's name.
+    Stay in the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-    &lt;p&gt;When the user agent leaves the attribute name state (and before
-     emitting the tag token, if appropriate), the complete attribute's name
-     must be compared to the other attributes on the same token; if there is
-     already an attribute on the token with the exact same name, then this is
-     a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt; and the new attribute must be
-     dropped, along with the value that gets associated with it (if any).&lt;/p&gt;
+  &lt;p&gt;When the user agent leaves the attribute name state (and before emitting
+   the tag token, if appropriate), the complete attribute's name must be
+   compared to the other attributes on the same token; if there is already an
+   attribute on the token with the exact same name, then this is a &lt;a
+   href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt; and the new attribute must be dropped,
+   along with the value that gets associated with it (if any).
 
-   &lt;dt&gt;&lt;dfn id=after&gt;After attribute name state&lt;/dfn&gt;
+  &lt;h5 id=after&gt;&lt;span class=secno&gt;8.2.4.8. &lt;/span&gt;&lt;dfn id=after4&gt;After
+   attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after&quot;&gt;after attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#after4&quot;&gt;after attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)
+   &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before0&quot;&gt;before attribute value state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before5&quot;&gt;before attribute value state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER
-      Z
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z
 
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
-      name to the lowercase version of the current input character (add
-      0x0020 to the character's code point), and its value to the empty
-      string. Switch to the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
+    name to the lowercase version of the current input character (add 0x0020
+    to the character's code point), and its value to the empty string. Switch
+    to the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002F SOLIDUS (/)
+   &lt;dt&gt;U+002F SOLIDUS (/)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing&quot;&gt;self-closing start tag
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing0&quot;&gt;self-closing start tag
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
-      name to the current input character, and its value to the empty string.
-      Switch to the &lt;a href=&quot;#attribute1&quot;&gt;attribute name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that attribute's
+    name to the current input character, and its value to the empty string.
+    Switch to the &lt;a href=&quot;#attribute5&quot;&gt;attribute name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=before0&gt;Before attribute value state&lt;/dfn&gt;
+  &lt;h5 id=before0&gt;&lt;span class=secno&gt;8.2.4.9. &lt;/span&gt;&lt;dfn id=before5&gt;Before
+   attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#before0&quot;&gt;before attribute value state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#before5&quot;&gt;before attribute value state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute2&quot;&gt;attribute value (double-quoted)
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute6&quot;&gt;attribute value (double-quoted)
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute4&quot;&gt;attribute value (unquoted)
-      state&lt;/a&gt; and reconsume this input character.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute8&quot;&gt;attribute value (unquoted)
+    state&lt;/a&gt; and reconsume this input character.
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute3&quot;&gt;attribute value (single-quoted)
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#attribute7&quot;&gt;attribute value (single-quoted)
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)
+   &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
-      else&quot; entry below.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything else&quot;
+    entry below.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current attribute's value.
-      Switch to the &lt;a href=&quot;#attribute4&quot;&gt;attribute value (unquoted)
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's value.
+    Switch to the &lt;a href=&quot;#attribute8&quot;&gt;attribute value (unquoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=attribute2&gt;Attribute value (double-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=attribute0&gt;&lt;span class=secno&gt;8.2.4.10. &lt;/span&gt;&lt;dfn
+   id=attribute6&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after0&quot;&gt;after attribute value (quoted)
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after5&quot;&gt;after attribute value (quoted)
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#character5&quot;&gt;character reference in attribute
-      value state&lt;/a&gt;, with the &lt;a href=&quot;#additional&quot;&gt;additional allowed
-      character&lt;/a&gt; being U+0022 QUOTATION MARK (&quot;).
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#character7&quot;&gt;character reference in attribute
+    value state&lt;/a&gt;, with the &lt;a href=&quot;#additional&quot;&gt;additional allowed
+    character&lt;/a&gt; being U+0022 QUOTATION MARK (&quot;).
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current attribute's value.
-      Stay in the &lt;a href=&quot;#attribute2&quot;&gt;attribute value (double-quoted)
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's value.
+    Stay in the &lt;a href=&quot;#attribute6&quot;&gt;attribute value (double-quoted)
+    state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=attribute3&gt;Attribute value (single-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=attribute1&gt;&lt;span class=secno&gt;8.2.4.11. &lt;/span&gt;&lt;dfn
+   id=attribute7&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after0&quot;&gt;after attribute value (quoted)
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after5&quot;&gt;after attribute value (quoted)
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#character5&quot;&gt;character reference in attribute
-      value state&lt;/a&gt;, with the &lt;a href=&quot;#additional&quot;&gt;additional allowed
-      character&lt;/a&gt; being U+0027 APOSTROPHE (').
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#character7&quot;&gt;character reference in attribute
+    value state&lt;/a&gt;, with the &lt;a href=&quot;#additional&quot;&gt;additional allowed
+    character&lt;/a&gt; being U+0027 APOSTROPHE (').
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current attribute's value.
-      Stay in the &lt;a href=&quot;#attribute3&quot;&gt;attribute value (single-quoted)
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's value.
+    Stay in the &lt;a href=&quot;#attribute7&quot;&gt;attribute value (single-quoted)
+    state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=attribute4&gt;Attribute value (unquoted) state&lt;/dfn&gt;
+  &lt;h5 id=attribute2&gt;&lt;span class=secno&gt;8.2.4.12. &lt;/span&gt;&lt;dfn
+   id=attribute8&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#character5&quot;&gt;character reference in attribute
-      value state&lt;/a&gt;, with no &lt;a href=&quot;#additional&quot;&gt;additional allowed
-      character&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#character7&quot;&gt;character reference in attribute
+    value state&lt;/a&gt;, with no &lt;a href=&quot;#additional&quot;&gt;additional allowed
+    character&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)
+   &lt;dt&gt;U+003D EQUALS SIGN (=)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything
-      else&quot; entry below.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Treat it as per the &quot;anything else&quot;
+    entry below.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current attribute's value.
-      Stay in the &lt;a href=&quot;#attribute4&quot;&gt;attribute value (unquoted) state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's value.
+    Stay in the &lt;a href=&quot;#attribute8&quot;&gt;attribute value (unquoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=character5&gt;Character reference in attribute value state&lt;/dfn&gt;
+  &lt;h5 id=character2&gt;&lt;span class=secno&gt;8.2.4.13. &lt;/span&gt;&lt;dfn
+   id=character7&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Attempt to &lt;a href=&quot;#consume&quot;&gt;consume a character reference&lt;/a&gt;.
 
-    &lt;p&gt;If nothing is returned, append a U+0026 AMPERSAND character to the
-     current attribute's value.&lt;/p&gt;
+  &lt;p&gt;If nothing is returned, append a U+0026 AMPERSAND character to the
+   current attribute's value.
 
-    &lt;p&gt;Otherwise, append the returned character token to the current
-     attribute's value.&lt;/p&gt;
+  &lt;p&gt;Otherwise, append the returned character token to the current
+   attribute's value.
 
-    &lt;p&gt;Finally, switch back to the attribute value state that you were in
-     when were switched into this state.&lt;/p&gt;
+  &lt;p&gt;Finally, switch back to the attribute value state that you were in when
+   were switched into this state.
 
-   &lt;dt&gt;&lt;dfn id=after0&gt;After attribute value (quoted) state&lt;/dfn&gt;
+  &lt;h5 id=after0&gt;&lt;span class=secno&gt;8.2.4.14. &lt;/span&gt;&lt;dfn id=after5&gt;After
+   attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002F SOLIDUS (/)
+   &lt;dt&gt;U+002F SOLIDUS (/)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing&quot;&gt;self-closing start tag
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#self-closing0&quot;&gt;self-closing start tag
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the character in the &lt;a
-      href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the character in the &lt;a
+    href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=self-closing&gt;Self-closing start tag state&lt;/dfn&gt;
+  &lt;h5 id=self-closing&gt;&lt;span class=secno&gt;8.2.4.15. &lt;/span&gt;&lt;dfn
+   id=self-closing0&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Set the &lt;i&gt;self-closing flag&lt;/i&gt; of the current tag token. Emit the
-      current tag token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Set the &lt;i&gt;self-closing flag&lt;/i&gt; of the current tag token. Emit the
+    current tag token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the current tag token.
+    Reconsume the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the character in the &lt;a
-      href=&quot;#before&quot;&gt;before attribute name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the character in the &lt;a
+    href=&quot;#before4&quot;&gt;before attribute name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=bogus&gt;Bogus comment state&lt;/dfn&gt;
+  &lt;h5 id=bogus&gt;&lt;span class=secno&gt;8.2.4.16. &lt;/span&gt;&lt;dfn id=bogus1&gt;Bogus
+   comment state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
-     flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+   flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;
 
-    &lt;p&gt;Consume every character up to and including the first U+003E
-     GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
-     whichever comes first. Emit a comment token whose data is the
-     concatenation of all the characters starting from and including the
-     character that caused the state machine to switch into the bogus comment
-     state, up to and including the character immediately before the last
-     consumed character (i.e. up to the character just before the U+003E or
-     EOF character). (If the comment was started by the end of the file
-     (EOF), the token is empty.)&lt;/p&gt;
+  &lt;p&gt;Consume every character up to and including the first U+003E
+   GREATER-THAN SIGN character (&gt;) or the end of the file (EOF), whichever
+   comes first. Emit a comment token whose data is the concatenation of all
+   the characters starting from and including the character that caused the
+   state machine to switch into the bogus comment state, up to and including
+   the character immediately before the last consumed character (i.e. up to
+   the character just before the U+003E or EOF character). (If the comment
+   was started by the end of the file (EOF), the token is empty.)
 
-    &lt;p&gt;Switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-    &lt;p&gt;If the end of the file was reached, reconsume the EOF character.&lt;/p&gt;
+  &lt;p&gt;If the end of the file was reached, reconsume the EOF character.
 
-   &lt;dt&gt;&lt;dfn id=markup&gt;Markup declaration open state&lt;/dfn&gt;
+  &lt;h5 id=markup&gt;&lt;span class=secno&gt;8.2.4.17. &lt;/span&gt;&lt;dfn id=markup0&gt;Markup
+   declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
-     flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+   flag&lt;/a&gt; is set to the PCDATA state.)&lt;/em&gt;
 
-    &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
-     characters, consume those two characters, create a comment token whose
-     data is the empty string, and switch to the &lt;a href=&quot;#comment0&quot;&gt;comment
-     start state&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-) characters,
+   consume those two characters, create a comment token whose data is the
+   empty string, and switch to the &lt;a href=&quot;#comment4&quot;&gt;comment start
+   state&lt;/a&gt;.
 
-    &lt;p&gt;Otherwise, if the next seven characters are a
-     &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
-     word &quot;DOCTYPE&quot;, then consume those characters and switch to the &lt;a
-     href=&quot;#doctype0&quot;&gt;DOCTYPE state&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Otherwise, if the next seven characters are a
+   &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
+   word &quot;DOCTYPE&quot;, then consume those characters and switch to the &lt;a
+   href=&quot;#doctype6&quot;&gt;DOCTYPE state&lt;/a&gt;.
 
-    &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a
-     href=&quot;#in-foreign&quot; title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-     content&lt;/a&gt;&quot; and the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an
-     element in the &lt;a href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and the
-     next seven characters are a
-     &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
-    only --&gt; match for
-     the string &quot;[CDATA[&quot; (the five uppercase letters &quot;CDATA&quot; with a U+005B
-     LEFT SQUARE BRACKET character before and after), then consume those
-     characters and switch to the &lt;a href=&quot;#cdata1&quot;&gt;CDATA section state&lt;/a&gt;
-     (which is unrelated to the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s
-     CDATA state).&lt;/p&gt;
+  &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#in-foreign&quot;
+   title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot; and the
+   &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt; is not an element in the &lt;a
+   href=&quot;#html-namespace0&quot;&gt;HTML namespace&lt;/a&gt; and the next seven characters
+   are a &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
+  only --&gt; match for
+   the string &quot;[CDATA[&quot; (the five uppercase letters &quot;CDATA&quot; with a U+005B
+   LEFT SQUARE BRACKET character before and after), then consume those
+   characters and switch to the &lt;a href=&quot;#cdata2&quot;&gt;CDATA section state&lt;/a&gt;
+   (which is unrelated to the &lt;a href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s
+   CDATA state).
 
-    &lt;p&gt;Otherwise, this is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Switch to the
-     &lt;a href=&quot;#bogus&quot;&gt;bogus comment state&lt;/a&gt;. The next character that is
-     consumed, if any, is the first character that will be in the comment.&lt;/p&gt;
+  &lt;p&gt;Otherwise, this is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Switch to the &lt;a
+   href=&quot;#bogus1&quot;&gt;bogus comment state&lt;/a&gt;. The next character that is
+   consumed, if any, is the first character that will be in the comment.
 
-   &lt;dt&gt;&lt;dfn id=comment0&gt;Comment start state&lt;/dfn&gt;
+  &lt;h5 id=comment0&gt;&lt;span class=secno&gt;8.2.4.18. &lt;/span&gt;&lt;dfn id=comment4&gt;Comment
+   start state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#comment1&quot;&gt;comment start dash state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#comment5&quot;&gt;comment start dash state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Switch to
-      the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the input character to the comment token's data. Switch to
-      the &lt;a href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the input character to the comment token's data. Switch to the
+    &lt;a href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=comment1&gt;Comment start dash state&lt;/dfn&gt;
+  &lt;h5 id=comment1&gt;&lt;span class=secno&gt;8.2.4.19. &lt;/span&gt;&lt;dfn id=comment5&gt;Comment
+   start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#comment3&quot;&gt;comment end state&lt;/a&gt;
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#comment7&quot;&gt;comment end state&lt;/a&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Switch to
-      the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input character
-      to the comment token's data. Switch to the &lt;a href=&quot;#comment&quot;&gt;comment
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input character to
+    the comment token's data. Switch to the &lt;a href=&quot;#comment&quot;&gt;comment
+    state&lt;/a&gt;.
+  &lt;/dl&gt;
 
+  &lt;dl&gt;
    &lt;dt&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;
+  &lt;/dl&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#comment2&quot;&gt;comment end dash state&lt;/a&gt;
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#comment6&quot;&gt;comment end dash state&lt;/a&gt;
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
-     &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the input character to the comment token's data. Stay in the
-      &lt;a href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the input character to the comment token's data. Stay in the &lt;a
+    href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=comment2&gt;Comment end dash state&lt;/dfn&gt;
+  &lt;h5 id=comment2&gt;&lt;span class=secno&gt;8.2.4.20. &lt;/span&gt;&lt;dfn id=comment6&gt;Comment
+   end dash state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#comment3&quot;&gt;comment end state&lt;/a&gt;
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#comment7&quot;&gt;comment end state&lt;/a&gt;
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
-     &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input character
-      to the comment token's data. Switch to the &lt;a href=&quot;#comment&quot;&gt;comment
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input character to
+    the comment token's data. Switch to the &lt;a href=&quot;#comment&quot;&gt;comment
+    state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=comment3&gt;Comment end state&lt;/dfn&gt;
+  &lt;h5 id=comment3&gt;&lt;span class=secno&gt;8.2.4.21. &lt;/span&gt;&lt;dfn id=comment7&gt;Comment
+   end state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the comment token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the comment token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Append a U+002D HYPHEN-MINUS (-)
-      character to the comment token's data. Stay in the &lt;a
-      href=&quot;#comment3&quot;&gt;comment end state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Append a U+002D HYPHEN-MINUS (-)
+    character to the comment token's data. Stay in the &lt;a
+    href=&quot;#comment7&quot;&gt;comment end state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
-     &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Emit the comment token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Append two U+002D HYPHEN-MINUS
-      (-) characters and the input character to the comment token's data.
-      Switch to the &lt;a href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Append two U+002D HYPHEN-MINUS (-)
+    characters and the input character to the comment token's data. Switch to
+    the &lt;a href=&quot;#comment&quot;&gt;comment state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype0&gt;DOCTYPE state&lt;/dfn&gt;
+  &lt;h5 id=doctype&gt;&lt;span class=secno&gt;8.2.4.22. &lt;/span&gt;&lt;dfn id=doctype6&gt;DOCTYPE
+   state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#before1&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#before6&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the current character
-      in the &lt;a href=&quot;#before1&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Reconsume the current character in
+    the &lt;a href=&quot;#before6&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=before1&gt;Before DOCTYPE name state&lt;/dfn&gt;
+  &lt;h5 id=before1&gt;&lt;span class=secno&gt;8.2.4.23. &lt;/span&gt;&lt;dfn id=before6&gt;Before
+   DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#before1&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#before6&quot;&gt;before DOCTYPE name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Create a new DOCTYPE token. Set
-      its &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Switch to
-      the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Create a new DOCTYPE token. Set its
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Create a new DOCTYPE token. Set
-      its &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Reconsume
-      the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Create a new DOCTYPE token. Set its
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Reconsume the EOF
+    character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Create a new DOCTYPE token. Set the token's name to the current
-      input character. Switch to the &lt;a href=&quot;#doctype1&quot;&gt;DOCTYPE name
-      state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Create a new DOCTYPE token. Set the token's name to the current input
+    character. Switch to the &lt;a href=&quot;#doctype7&quot;&gt;DOCTYPE name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype1&gt;DOCTYPE name state&lt;/dfn&gt;
+  &lt;h5 id=doctype0&gt;&lt;span class=secno&gt;8.2.4.24. &lt;/span&gt;&lt;dfn id=doctype7&gt;DOCTYPE
+   name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;First, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;First, consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after6&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current DOCTYPE token's
-      name. Stay in the &lt;a href=&quot;#doctype1&quot;&gt;DOCTYPE name state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE token's
+    name. Stay in the &lt;a href=&quot;#doctype7&quot;&gt;DOCTYPE name state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after1&gt;After DOCTYPE name state&lt;/dfn&gt;
+  &lt;h5 id=after1&gt;&lt;span class=secno&gt;8.2.4.25. &lt;/span&gt;&lt;dfn id=after6&gt;After
+   DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after1&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#after6&quot;&gt;after DOCTYPE name state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;
-      &lt;p&gt;If the next six characters are a
-       &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for
-       the word &quot;PUBLIC&quot;, then consume those characters and switch to the &lt;a
-       href=&quot;#before2&quot;&gt;before DOCTYPE public identifier state&lt;/a&gt;.&lt;/p&gt;
+   &lt;dd&gt;
+    &lt;p&gt;If the next six characters are a
+     &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
+     word &quot;PUBLIC&quot;, then consume those characters and switch to the &lt;a
+     href=&quot;#before7&quot;&gt;before DOCTYPE public identifier state&lt;/a&gt;.&lt;/p&gt;
 
-      &lt;p&gt;Otherwise, if the next six characters are a
-       &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for
-       the word &quot;SYSTEM&quot;, then consume those characters and switch to the &lt;a
-       href=&quot;#before3&quot;&gt;before DOCTYPE system identifier state&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if the next six characters are a
+     &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match for the
+     word &quot;SYSTEM&quot;, then consume those characters and switch to the &lt;a
+     href=&quot;#before8&quot;&gt;before DOCTYPE system identifier state&lt;/a&gt;.&lt;/p&gt;
 
-      &lt;p&gt;Otherwise, this is the &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Set the
-       DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the
-       &lt;a href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.&lt;/p&gt;
-    &lt;/dl&gt;
+    &lt;p&gt;Otherwise, this is the &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;. Set the
+     DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
+     href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.&lt;/p&gt;
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=before2&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;
+  &lt;h5 id=before2&gt;&lt;span class=secno&gt;8.2.4.26. &lt;/span&gt;&lt;dfn id=before7&gt;Before
+   DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#before2&quot;&gt;before DOCTYPE public identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#before7&quot;&gt;before DOCTYPE public identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype2&quot;&gt;DOCTYPE public
-      identifier (double-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype8&quot;&gt;DOCTYPE public
+    identifier (double-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype3&quot;&gt;DOCTYPE public
-      identifier (single-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype9&quot;&gt;DOCTYPE public
+    identifier (single-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
-      href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
+    href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype2&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=doctype1&gt;&lt;span class=secno&gt;8.2.4.27. &lt;/span&gt;&lt;dfn id=doctype8&gt;DOCTYPE
+   public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after7&quot;&gt;after DOCTYPE public identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current DOCTYPE token's
-      public identifier. Stay in the &lt;a href=&quot;#doctype2&quot;&gt;DOCTYPE public
-      identifier (double-quoted) state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE token's
+    public identifier. Stay in the &lt;a href=&quot;#doctype8&quot;&gt;DOCTYPE public
+    identifier (double-quoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype3&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=doctype2&gt;&lt;span class=secno&gt;8.2.4.28. &lt;/span&gt;&lt;dfn id=doctype9&gt;DOCTYPE
+   public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after7&quot;&gt;after DOCTYPE public identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current DOCTYPE token's
-      public identifier. Stay in the &lt;a href=&quot;#doctype3&quot;&gt;DOCTYPE public
-      identifier (single-quoted) state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE token's
+    public identifier. Stay in the &lt;a href=&quot;#doctype9&quot;&gt;DOCTYPE public
+    identifier (single-quoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after2&gt;After DOCTYPE public identifier state&lt;/dfn&gt;
+  &lt;h5 id=after2&gt;&lt;span class=secno&gt;8.2.4.29. &lt;/span&gt;&lt;dfn id=after7&gt;After
+   DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after2&quot;&gt;after DOCTYPE public identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#after7&quot;&gt;after DOCTYPE public identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype4&quot;&gt;DOCTYPE system
-      identifier (double-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype10&quot;&gt;DOCTYPE system
+    identifier (double-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype5&quot;&gt;DOCTYPE system
-      identifier (single-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype11&quot;&gt;DOCTYPE system
+    identifier (single-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
-      href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
+    href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=before3&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;
+  &lt;h5 id=before3&gt;&lt;span class=secno&gt;8.2.4.30. &lt;/span&gt;&lt;dfn id=before8&gt;Before
+   DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#before3&quot;&gt;before DOCTYPE system identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#before8&quot;&gt;before DOCTYPE system identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype4&quot;&gt;DOCTYPE system
-      identifier (double-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype10&quot;&gt;DOCTYPE system
+    identifier (double-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
-      missing), then switch to the &lt;a href=&quot;#doctype5&quot;&gt;DOCTYPE system
-      identifier (single-quoted) state&lt;/a&gt;.
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string (not
+    missing), then switch to the &lt;a href=&quot;#doctype11&quot;&gt;DOCTYPE system
+    identifier (single-quoted) state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
-      href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a
+    href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype4&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=doctype3&gt;&lt;span class=secno&gt;8.2.4.31. &lt;/span&gt;&lt;dfn
+   id=doctype10&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after8&quot;&gt;after DOCTYPE system identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current DOCTYPE token's
-      system identifier. Stay in the &lt;a href=&quot;#doctype4&quot;&gt;DOCTYPE system
-      identifier (double-quoted) state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE token's
+    system identifier. Stay in the &lt;a href=&quot;#doctype10&quot;&gt;DOCTYPE system
+    identifier (double-quoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=doctype5&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;
+  &lt;h5 id=doctype4&gt;&lt;span class=secno&gt;8.2.4.32. &lt;/span&gt;&lt;dfn
+   id=doctype11&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')
 
-     &lt;dd&gt;Switch to the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Switch to the &lt;a href=&quot;#after8&quot;&gt;after DOCTYPE system identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch
-      to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Switch to
+    the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Append the current input character to the current DOCTYPE token's
-      system identifier. Stay in the &lt;a href=&quot;#doctype5&quot;&gt;DOCTYPE system
-      identifier (single-quoted) state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE token's
+    system identifier. Stay in the &lt;a href=&quot;#doctype11&quot;&gt;DOCTYPE system
+    identifier (single-quoted) state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=after3&gt;After DOCTYPE system identifier state&lt;/dfn&gt;
+  &lt;h5 id=after3&gt;&lt;span class=secno&gt;8.2.4.33. &lt;/span&gt;&lt;dfn id=after8&gt;After
+   DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+0009 CHARACTER TABULATION
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION
 
-     &lt;dt&gt;U+000A LINE FEED (LF)
+   &lt;dt&gt;U+000A LINE FEED (LF)
 
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
 
-     &lt;dt&gt;U+0020 SPACE
+   &lt;dt&gt;U+0020 SPACE
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#after3&quot;&gt;after DOCTYPE system identifier
-      state&lt;/a&gt;.
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#after8&quot;&gt;after DOCTYPE system identifier
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
-      &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-      Reconsume the EOF character in the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Set the DOCTYPE token's
+    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token. Reconsume
+    the EOF character in the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
-      href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the
-      DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)
-    &lt;/dl&gt;
+   &lt;dd&gt;&lt;a href=&quot;#parse2&quot;&gt;Parse error&lt;/a&gt;. Switch to the &lt;a
+    href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the
+    DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=bogus0&gt;Bogus DOCTYPE state&lt;/dfn&gt;
+  &lt;h5 id=bogus0&gt;&lt;span class=secno&gt;8.2.4.34. &lt;/span&gt;&lt;dfn id=bogus2&gt;Bogus
+   DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;:
 
-    &lt;dl class=switch&gt;
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)
 
-     &lt;dd&gt;Emit the DOCTYPE token. Switch to the &lt;a href=&quot;#data-state&quot;&gt;data
-      state&lt;/a&gt;.
+   &lt;dd&gt;Emit the DOCTYPE token. Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data
+    state&lt;/a&gt;.
 
-     &lt;dt&gt;EOF
+   &lt;dt&gt;EOF
 
-     &lt;dd&gt;Emit the DOCTYPE token. Reconsume the EOF character in the &lt;a
-      href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.
+   &lt;dd&gt;Emit the DOCTYPE token. Reconsume the EOF character in the &lt;a
+    href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-     &lt;dt&gt;Anything else
+   &lt;dt&gt;Anything else
 
-     &lt;dd&gt;Stay in the &lt;a href=&quot;#bogus0&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
-    &lt;/dl&gt;
+   &lt;dd&gt;Stay in the &lt;a href=&quot;#bogus2&quot;&gt;bogus DOCTYPE state&lt;/a&gt;.
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn id=cdata1&gt;CDATA section state&lt;/dfn&gt;
+  &lt;h5 id=cdata0&gt;&lt;span class=secno&gt;8.2.4.35. &lt;/span&gt;&lt;dfn id=cdata2&gt;CDATA
+   section state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
-     flag&lt;/a&gt; is set to the PCDATA state, and is unrelated to the &lt;a
-     href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;a href=&quot;#content3&quot;&gt;content model
+   flag&lt;/a&gt; is set to the PCDATA state, and is unrelated to the &lt;a
+   href=&quot;#content3&quot;&gt;content model flag&lt;/a&gt;'s CDATA state.)&lt;/em&gt;
 
-    &lt;p&gt;Consume every character up to the next occurrence of the three
-     character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
-     BRACKET U+003E GREATER-THAN SIGN (&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;), or the end
-     of the file (EOF), whichever comes first. Emit a series of text tokens
-     consisting of all the characters consumed except the matching three
-     character sequence at the end (if one was found before the end of the
-     file).&lt;/p&gt;
+  &lt;p&gt;Consume every character up to the next occurrence of the three character
+   sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE BRACKET U+003E
+   GREATER-THAN SIGN (&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;), or the end of the file
+   (EOF), whichever comes first. Emit a series of text tokens consisting of
+   all the characters consumed except the matching three character sequence
+   at the end (if one was found before the end of the file).
 
-    &lt;p&gt;Switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Switch to the &lt;a href=&quot;#data-state0&quot;&gt;data state&lt;/a&gt;.
 
-    &lt;p&gt;If the end of the file was reached, reconsume the EOF character.&lt;/p&gt;
-  &lt;/dl&gt;
+  &lt;p&gt;If the end of the file was reached, reconsume the EOF character.
 
-  &lt;h5 id=tokenizing&gt;&lt;span class=secno&gt;8.2.4.1. &lt;/span&gt;Tokenizing character
+  &lt;h5 id=tokenizing&gt;&lt;span class=secno&gt;8.2.4.36. &lt;/span&gt;Tokenizing character
    references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn id=consume&gt;consume a character
    reference&lt;/dfn&gt;. This definition is used when parsing character references
-   &lt;a href=&quot;#character4&quot; title=&quot;character reference data state&quot;&gt;in text&lt;/a&gt;
-   and &lt;a href=&quot;#character5&quot; title=&quot;character reference in attribute value
+   &lt;a href=&quot;#character6&quot; title=&quot;character reference data state&quot;&gt;in text&lt;/a&gt;
+   and &lt;a href=&quot;#character7&quot; title=&quot;character reference in attribute value
    state&quot;&gt;in attributes&lt;/a&gt;.
 
   &lt;p&gt;The behavior depends on the identity of the next character (the one
@@ -47125,7 +47203,7 @@
     &lt;p&gt;If the last character matched is not a U+003B SEMICOLON (&lt;code
      title=&quot;&quot;&gt;;&lt;/code&gt;), there is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;If the character reference is being consumed &lt;a href=&quot;#character5&quot;
+    &lt;p&gt;If the character reference is being consumed &lt;a href=&quot;#character7&quot;
      title=&quot;character reference in attribute value state&quot;&gt;as part of an
      attribute&lt;/a&gt;, and the last character matched is not a U+003B SEMICOLON
      (&lt;code title=&quot;&quot;&gt;;&lt;/code&gt;), and the next character is in the range U+0030
@@ -47840,7 +47918,7 @@
      is the empty string is not considered missing for the purposes of the
      conditions above.&lt;/p&gt;
 
-    &lt;p&gt;Then, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before4&quot;
+    &lt;p&gt;Then, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before9&quot;
      title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;Anything else
@@ -47850,15 +47928,15 @@
 
     &lt;p&gt;Set the document to &lt;a href=&quot;#quirks&quot;&gt;quirks mode&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before4&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before9&quot;
      title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, then reprocess the
      current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-before&gt;&lt;span class=secno&gt;8.2.5.5. &lt;/span&gt;The &quot;&lt;dfn id=before4
+  &lt;h5 id=the-before&gt;&lt;span class=secno&gt;8.2.5.5. &lt;/span&gt;The &quot;&lt;dfn id=before9
    title=&quot;insertion mode: before html&quot;&gt;before html&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before4&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before9&quot;
    title=&quot;insertion mode: before html&quot;&gt;before html&lt;/a&gt;&quot;, tokens must be
    handled as follows:
 
@@ -47901,7 +47979,7 @@
      title=concept-appcache-init-no-attribute&gt;application cache selection
      algorithm&lt;/a&gt; with no manifest.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before5&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before10&quot;
      title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;Anything else
@@ -47917,7 +47995,7 @@
      title=concept-appcache-init-no-attribute&gt;application cache selection
      algorithm&lt;/a&gt; with no manifest.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before5&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#before10&quot;
      title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, then reprocess the
      current token.&lt;/p&gt;
 
@@ -47931,10 +48009,10 @@
    content continues being appended to the nodes as described in the next
    section.
 
-  &lt;h5 id=the-before0&gt;&lt;span class=secno&gt;8.2.5.6. &lt;/span&gt;The &quot;&lt;dfn id=before5
+  &lt;h5 id=the-before0&gt;&lt;span class=secno&gt;8.2.5.6. &lt;/span&gt;The &quot;&lt;dfn id=before10
    title=&quot;insertion mode: before head&quot;&gt;before head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before5&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#before10&quot;
    title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;, tokens must be
    handled as follows:
 
@@ -47997,7 +48075,7 @@
 
     &lt;p class=note&gt;This will result in an empty &lt;code&gt;&lt;a
      href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element being generated, with the current
-     token being reprocessed in the &quot;&lt;a href=&quot;#after4&quot; title=&quot;insertion mode:
+     token being reprocessed in the &quot;&lt;a href=&quot;#after9&quot; title=&quot;insertion mode:
      after head&quot;&gt;after head&lt;/a&gt;&quot; &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
@@ -48221,7 +48299,7 @@
      &lt;code&gt;&lt;a href=&quot;#head&quot;&gt;head&lt;/a&gt;&lt;/code&gt; element) off the &lt;a
      href=&quot;#stack&quot;&gt;stack of open elements&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after4&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after9&quot;
      title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;An end tag whose tag name is &quot;br&quot;
@@ -48314,10 +48392,10 @@
      name &quot;noscript&quot; had been seen and reprocess the current token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-after&gt;&lt;span class=secno&gt;8.2.5.9. &lt;/span&gt;The &quot;&lt;dfn id=after4
+  &lt;h5 id=the-after&gt;&lt;span class=secno&gt;8.2.5.9. &lt;/span&gt;The &quot;&lt;dfn id=after9
    title=&quot;insertion mode: after head&quot;&gt;after head&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after4&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after9&quot;
    title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, tokens must be handled
    as follows:
 
@@ -48502,7 +48580,7 @@
      href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;.&lt;/p&gt;
     &lt;!-- (some of those are fragment cases) --&gt;
     &lt;!-- the insertion mode here is forcibly &quot;in body&quot;. --&gt;
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after5&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after10&quot;
      title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;. Otherwise, ignore
      the token.&lt;/p&gt;
 
@@ -50110,7 +50188,7 @@
      is a &lt;a href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt;; ignore the token. (&lt;a
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=&quot;#close4&quot;&gt;close the cell&lt;/a&gt; (see below) and
+    &lt;p&gt;Otherwise, &lt;a href=&quot;#close5&quot;&gt;close the cell&lt;/a&gt; (see below) and
      reprocess the current token.&lt;/p&gt;
 
    &lt;dt&gt;An end tag whose tag name is one of: &quot;body&quot;, &quot;caption&quot;, &quot;col&quot;,
@@ -50130,7 +50208,7 @@
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), then this is a &lt;a
      href=&quot;#parse2&quot;&gt;parse error&lt;/a&gt; and the token must be ignored.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=&quot;#close4&quot;&gt;close the cell&lt;/a&gt; (see below) and
+    &lt;p&gt;Otherwise, &lt;a href=&quot;#close5&quot;&gt;close the cell&lt;/a&gt; (see below) and
      reprocess the current token.&lt;/p&gt;
 
    &lt;dt&gt;Anything else
@@ -50141,7 +50219,7 @@
      &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;p&gt;Where the steps above say to &lt;dfn id=close4&gt;close the cell&lt;/dfn&gt;, they
+  &lt;p&gt;Where the steps above say to &lt;dfn id=close5&gt;close the cell&lt;/dfn&gt;, they
    mean to run the following algorithm:
 
   &lt;ol&gt;
@@ -50501,10 +50579,10 @@
   &lt;/dl&gt;
 
   &lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;8.2.5.20. &lt;/span&gt;The &quot;&lt;dfn
-   id=after5 title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion
+   id=after10 title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after5&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after10&quot;
    title=&quot;insertion mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, tokens must be handled
    as follows:
 
@@ -50548,7 +50626,7 @@
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
     &lt;!-- can only happen for &lt;html&gt;'s own innerHTML --&gt;
     &lt;p&gt;Otherwise, switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a
-     href=&quot;#after7&quot; title=&quot;insertion mode: after after body&quot;&gt;after after
+     href=&quot;#after12&quot; title=&quot;insertion mode: after after body&quot;&gt;after after
      body&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;An end-of-file token
@@ -50620,8 +50698,8 @@
      href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing algorithm&lt;/a&gt; (&lt;a
      href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;), and the &lt;a href=&quot;#current5&quot;&gt;current
      node&lt;/a&gt; is no longer a &lt;code&gt;frameset&lt;/code&gt; element, then switch the
-     &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after6&quot; title=&quot;insertion mode:
-     after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;.&lt;/p&gt;
+     &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after11&quot; title=&quot;insertion
+     mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;A start tag whose tag name is &quot;frame&quot;
 
@@ -50660,10 +50738,10 @@
   &lt;/dl&gt;
 
   &lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;8.2.5.22. &lt;/span&gt;The
-   &quot;&lt;dfn id=after6 title=&quot;insertion mode: after frameset&quot;&gt;after
+   &quot;&lt;dfn id=after11 title=&quot;insertion mode: after frameset&quot;&gt;after
    frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after6&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after11&quot;
    title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, tokens must be
    handled as follows:&lt;/p&gt;
   &lt;!-- due to rules in the &quot;in frameset&quot; mode, this can't be entered in the fragment case --&gt;
@@ -50699,7 +50777,7 @@
    &lt;dt&gt;An end tag whose tag name is &quot;html&quot;
 
    &lt;dd&gt;
-    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after8&quot;
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;a href=&quot;#after13&quot;
      title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot;.&lt;/p&gt;
 
    &lt;dt&gt;A start tag whose tag name is &quot;noframes&quot;
@@ -50724,11 +50802,11 @@
    that do support frames but want to show the NOFRAMES content. Supporting
    the former is easy; supporting the latter is harder.
 
-  &lt;h5 id=the-after0&gt;&lt;span class=secno&gt;8.2.5.23. &lt;/span&gt;The &quot;&lt;dfn id=after7
+  &lt;h5 id=the-after0&gt;&lt;span class=secno&gt;8.2.5.23. &lt;/span&gt;The &quot;&lt;dfn id=after12
    title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion
    mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after7&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after12&quot;
    title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot;, tokens
    must be handled as follows:
 
@@ -50766,11 +50844,11 @@
      body&lt;/a&gt;&quot; and reprocess the token.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;h5 id=the-after1&gt;&lt;span class=secno&gt;8.2.5.24. &lt;/span&gt;The &quot;&lt;dfn id=after8
+  &lt;h5 id=the-after1&gt;&lt;span class=secno&gt;8.2.5.24. &lt;/span&gt;The &quot;&lt;dfn id=after13
    title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot;
    insertion mode&lt;/h5&gt;
 
-  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after8&quot;
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;a href=&quot;#after13&quot;
    title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot;,
    tokens must be handled as follows:
 

Modified: source
===================================================================
--- source	2008-07-23 00:56:52 UTC (rev 1905)
+++ source	2008-07-23 01:04:16 UTC (rev 1906)
@@ -42984,1336 +42984,1226 @@
   must be &lt;span title=&quot;executing a script block&quot;&gt;executed&lt;/span&gt; and
   removed from its list.&lt;/p&gt;
 
-  &lt;p&gt;The tokeniser state machine is as follows:&lt;/p&gt;
+  &lt;p&gt;The tokeniser state machine consists of the states defined in the
+  following subsections.&lt;/p&gt;
 
   &lt;!-- XXX should go through these reordering the entries so that
   they're in some consistent order, like, by Unicode, errors last, or
   something --&gt;
 
-  &lt;dl&gt;
+  &lt;h5&gt;&lt;dfn&gt;Data state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Data state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
+   &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to one of the
+   PCDATA or RCDATA states and the &lt;span&gt;escape flag&lt;/span&gt; is
+   false: switch to the &lt;span&gt;character reference data
+   state&lt;/span&gt;.&lt;/dd&gt; &lt;dd&gt;Otherwise: treat it as per the &quot;anything
+   else&quot; entry below.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
-     &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to one of the
-     PCDATA or RCDATA states and the &lt;span&gt;escape flag&lt;/span&gt; is
-     false: switch to the &lt;span&gt;character reference data
-     state&lt;/span&gt;.&lt;/dd&gt; &lt;dd&gt;Otherwise: treat it as per the &quot;anything
-     else&quot; entry below.&lt;/dd&gt;
+    &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
+    RCDATA state or the CDATA state, and the &lt;span&gt;escape flag&lt;/span&gt;
+    is false, and there are at least three characters before this
+    one in the input stream, and the last four characters in the
+    input stream, including this one, are U+003C LESS-THAN SIGN,
+    U+0021 EXCLAMATION MARK, U+002D HYPHEN-MINUS, and U+002D
+    HYPHEN-MINUS (&quot;&lt;!--&quot;), then set the &lt;span&gt;escape flag&lt;/span&gt;
+    to true.&lt;/p&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;
+    &lt;p&gt;In any case, emit the input character as a character
+    token. Stay in the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-      &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
-      RCDATA state or the CDATA state, and the &lt;span&gt;escape flag&lt;/span&gt;
-      is false, and there are at least three characters before this
-      one in the input stream, and the last four characters in the
-      input stream, including this one, are U+003C LESS-THAN SIGN,
-      U+0021 EXCLAMATION MARK, U+002D HYPHEN-MINUS, and U+002D
-      HYPHEN-MINUS (&quot;&lt;!--&quot;), then set the &lt;span&gt;escape flag&lt;/span&gt;
-      to true.&lt;/p&gt;
-
-      &lt;p&gt;In any case, emit the input character as a character
-      token. Stay in the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
-     &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to the PCDATA
-     state: switch to the &lt;span&gt;tag open state&lt;/span&gt;.&lt;/dd&gt;
-     &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
-     RCDATA state or the CDATA state and the &lt;span&gt;escape flag&lt;/span&gt;
-     is false: switch to the &lt;span&gt;tag open state&lt;/span&gt;.&lt;/dd&gt;
-     &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry
-     below.&lt;/dd&gt;
-
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;
-
-      &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
-      RCDATA state or the CDATA state, and the &lt;span&gt;escape
-      flag&lt;/span&gt; is true, and the last three characters in the input
-      stream including this one are U+002D HYPHEN-MINUS, U+002D
-      HYPHEN-MINUS, U+003E GREATER-THAN SIGN (&quot;--&gt;&quot;), set the
-      &lt;span&gt;escape flag&lt;/span&gt; to false.&lt;/p&gt; &lt;!-- no need to check
-      that there are enough characters, since you can only run into
-      this if the flag is true in the first place, which requires four
-      characters. --&gt;
-
-      &lt;p&gt;In any case, emit the input character as a character
-      token. Stay in the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;Emit an end-of-file token.&lt;/dd&gt;
-
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Emit the input character as a character token. Stay in the
-     &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Character reference data state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to the PCDATA
+   state: switch to the &lt;span&gt;tag open state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;When the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
+   RCDATA state or the CDATA state and the &lt;span&gt;escape flag&lt;/span&gt;
+   is false: switch to the &lt;span&gt;tag open state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Otherwise: treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;span&gt;content model flag&lt;/span&gt;
-    is set to the CDATA state.)&lt;/em&gt;&lt;/p&gt;
+    &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to either the
+    RCDATA state or the CDATA state, and the &lt;span&gt;escape
+    flag&lt;/span&gt; is true, and the last three characters in the input
+    stream including this one are U+002D HYPHEN-MINUS, U+002D
+    HYPHEN-MINUS, U+003E GREATER-THAN SIGN (&quot;--&gt;&quot;), set the
+    &lt;span&gt;escape flag&lt;/span&gt; to false.&lt;/p&gt; &lt;!-- no need to check
+    that there are enough characters, since you can only run into
+    this if the flag is true in the first place, which requires four
+    characters. --&gt;
 
-    &lt;p&gt;Attempt to &lt;span&gt;consume a character reference&lt;/span&gt;, with no
-    &lt;span&gt;additional allowed character&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;In any case, emit the input character as a character
+    token. Stay in the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;If nothing is returned, emit a U+0026 AMPERSAND character
-    token.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, emit the character token that was returned.&lt;/p&gt;
-
-    &lt;p&gt;Finally, switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Tag open state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;Emit an end-of-file token.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the input character as a character token. Stay in the
+   &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;The behavior of this state depends on the &lt;span&gt;content model
-    flag&lt;/span&gt;.&lt;/p&gt;
+  &lt;/dl&gt;
 
-    &lt;dl&gt;
 
-     &lt;dt&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA
-     or CDATA states&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;Character reference data state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dd&gt;
+  &lt;p&gt;&lt;em&gt;(This cannot happen if the &lt;span&gt;content model flag&lt;/span&gt;
+  is set to the CDATA state.)&lt;/em&gt;&lt;/p&gt;
 
-      &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;. If it is a
-      U+002F SOLIDUS (/) character, switch to the &lt;span&gt;close tag open
-      state&lt;/span&gt;. Otherwise, emit a U+003C LESS-THAN SIGN character
-      token and reconsume the current input character in the
-      &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Attempt to &lt;span&gt;consume a character reference&lt;/span&gt;, with no
+  &lt;span&gt;additional allowed character&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;/dd&gt;
+  &lt;p&gt;If nothing is returned, emit a U+0026 AMPERSAND character
+  token.&lt;/p&gt;
 
-     &lt;dt&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the PCDATA
-     state&lt;/dt&gt;
+  &lt;p&gt;Otherwise, emit the character token that was returned.&lt;/p&gt;
 
-     &lt;dd&gt;
+  &lt;p&gt;Finally, switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-      &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-      &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;Tag open state&lt;/dfn&gt;&lt;/h5&gt;
 
-       &lt;dt&gt;U+0021 EXCLAMATION MARK (!)&lt;/dt&gt;
-       &lt;dd&gt;Switch to the &lt;span&gt;markup declaration open state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;The behavior of this state depends on the &lt;span&gt;content model
+  flag&lt;/span&gt;.&lt;/p&gt;
 
-       &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-       &lt;dd&gt;Switch to the &lt;span&gt;close tag open state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl&gt;
 
-       &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-       &lt;dd&gt;Create a new start tag token, set its tag name to the
-       lowercase version of the input character (add 0x0020 to the
-       character's code point), then switch to the &lt;span&gt;tag name
-       state&lt;/span&gt;. (Don't emit the token yet; further details will
-       be filled in before it is emitted.)&lt;/dd&gt;
+   &lt;dt&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA
+   or CDATA states&lt;/dt&gt;
 
-       &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
-       &lt;dd&gt;Create a new start tag token, set its tag name to the input
-       character, then switch to the &lt;span&gt;tag name
-       state&lt;/span&gt;. (Don't emit the token yet; further details will
-       be filled in before it is emitted.)&lt;/dd&gt;
+   &lt;dd&gt;
 
-       &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-       &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit a U+003C LESS-THAN SIGN
-       character token and a U+003E GREATER-THAN SIGN character
-       token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;. If it is a
+    U+002F SOLIDUS (/) character, switch to the &lt;span&gt;close tag open
+    state&lt;/span&gt;. Otherwise, emit a U+003C LESS-THAN SIGN character
+    token and reconsume the current input character in the
+    &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-       &lt;dt&gt;U+003F QUESTION MARK (?)&lt;/dt&gt;
-       &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;bogus
-       comment state&lt;/span&gt;.&lt;/dd&gt;
-
-       &lt;dt&gt;Anything else&lt;/dt&gt;
-       &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit a U+003C LESS-THAN SIGN
-       character token and reconsume the current input character in the
-       &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;
-
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Close tag open state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the PCDATA
+   state&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or
-    CDATA states but no start tag token has ever been emitted by this
-    instance of the tokeniser (&lt;span&gt;fragment case&lt;/span&gt;), or, if the
-    &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or CDATA
-    states and the next few characters do not match the tag name of
-    the last start tag token emitted (case insensitively), or if they
-    do but they are not immediately followed by one of the following
-    characters:&lt;/p&gt;
+    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;ul class=&quot;brief&quot;&gt;
-     &lt;li&gt;U+0009 CHARACTER TABULATION&lt;/li&gt;
-     &lt;li&gt;U+000A LINE FEED (LF)&lt;/li&gt;
-     &lt;li&gt;U+000C FORM FEED (FF)&lt;/li&gt;
-     &lt;!--&lt;li&gt;U+000D CARRIAGE RETURN (CR)&lt;/li&gt;--&gt;
-     &lt;li&gt;U+0020 SPACE&lt;/li&gt;
-     &lt;li&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/li&gt;
-     &lt;li&gt;U+002F SOLIDUS (/)&lt;/li&gt;
-     &lt;li&gt;EOF&lt;/li&gt;
-    &lt;/ul&gt;
+    &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F
-    SOLIDUS character token, and switch to the &lt;span&gt;data state&lt;/span&gt;
-    to process the &lt;span&gt;next input character&lt;/span&gt;.&lt;/p&gt;
+     &lt;dt&gt;U+0021 EXCLAMATION MARK (!)&lt;/dt&gt;
+     &lt;dd&gt;Switch to the &lt;span&gt;markup declaration open state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;span&gt;content model flag&lt;/span&gt; is set to the
-    PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that tag
-    name, consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+     &lt;dd&gt;Switch to the &lt;span&gt;close tag open state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
-
      &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Create a new end tag token, set its tag name to the lowercase
-     version of the input character (add 0x0020 to the character's
-     code point), then switch to the &lt;span&gt;tag name
-     state&lt;/span&gt;. (Don't emit the token yet; further details will be
-     filled in before it is emitted.)&lt;/dd&gt;
+     &lt;dd&gt;Create a new start tag token, set its tag name to the
+     lowercase version of the input character (add 0x0020 to the
+     character's code point), then switch to the &lt;span&gt;tag name
+     state&lt;/span&gt;. (Don't emit the token yet; further details will
+     be filled in before it is emitted.)&lt;/dd&gt;
 
      &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Create a new end tag token, set its tag name to the input
-     character, then switch to the &lt;span&gt;tag name state&lt;/span&gt;. (Don't
-     emit the token yet; further details will be filled in before it
-     is emitted.)&lt;/dd&gt;
+     &lt;dd&gt;Create a new start tag token, set its tag name to the input
+     character, then switch to the &lt;span&gt;tag name
+     state&lt;/span&gt;. (Don't emit the token yet; further details will
+     be filled in before it is emitted.)&lt;/dd&gt;
 
      &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt;EOF&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit a U+003C LESS-THAN SIGN
-     character token and a U+002F SOLIDUS character token.  Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+     character token and a U+003E GREATER-THAN SIGN character
+     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
+     &lt;dt&gt;U+003F QUESTION MARK (?)&lt;/dt&gt;
      &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;bogus
      comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn&gt;Tag name state&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
-
-    &lt;dl class=&quot;switch&quot;&gt;
-
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Append the lowercase version of the current input character
-     (add 0x0020 to the character's code point) to the current tag
-     token's tag name. Stay in the &lt;span&gt;tag name state&lt;/span&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
-
-     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
-
      &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current tag token's
-     tag name. Stay in the &lt;span&gt;tag name state&lt;/span&gt;.&lt;/dd&gt;
+     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit a U+003C LESS-THAN SIGN
+     character token and reconsume the current input character in the
+     &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
     &lt;/dl&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;/dl&gt;
 
-   &lt;dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;Close tag open state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or
+  CDATA states but no start tag token has ever been emitted by this
+  instance of the tokeniser (&lt;span&gt;fragment case&lt;/span&gt;), or, if the
+  &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or CDATA
+  states and the next few characters do not match the tag name of
+  the last start tag token emitted (case insensitively), or if they
+  do but they are not immediately followed by one of the following
+  characters:&lt;/p&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;U+0009 CHARACTER TABULATION&lt;/li&gt;
+   &lt;li&gt;U+000A LINE FEED (LF)&lt;/li&gt;
+   &lt;li&gt;U+000C FORM FEED (FF)&lt;/li&gt;
+   &lt;!--&lt;li&gt;U+000D CARRIAGE RETURN (CR)&lt;/li&gt;--&gt;
+   &lt;li&gt;U+0020 SPACE&lt;/li&gt;
+   &lt;li&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/li&gt;
+   &lt;li&gt;U+002F SOLIDUS (/)&lt;/li&gt;
+   &lt;li&gt;EOF&lt;/li&gt;
+  &lt;/ul&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F
+  SOLIDUS character token, and switch to the &lt;span&gt;data state&lt;/span&gt;
+  to process the &lt;span&gt;next input character&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that
-     attribute's name to the lowercase version of the current input
-     character (add 0x0020 to the character's code point), and its
-     value to the empty string. Switch to the &lt;span&gt;attribute name
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Otherwise, if the &lt;span&gt;content model flag&lt;/span&gt; is set to the
+  PCDATA state, or if the next few characters &lt;em&gt;do&lt;/em&gt; match that tag
+  name, consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
-     entry below.&lt;/dd&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, set its tag name to the lowercase
+   version of the input character (add 0x0020 to the character's
+   code point), then switch to the &lt;span&gt;tag name
+   state&lt;/span&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
-     
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that
-     attribute's name to the current input character, and its value to
-     the empty string. Switch to the &lt;span&gt;attribute name
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, set its tag name to the input
+   character, then switch to the &lt;span&gt;tag name state&lt;/span&gt;. (Don't
+   emit the token yet; further details will be filled in before it
+   is emitted.)&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit a U+003C LESS-THAN SIGN
+   character token and a U+002F SOLIDUS character token.  Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;bogus
+   comment state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;Tag name state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after attribute name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Append the lowercase version of the current input character
-     (add 0x0020 to the character's code point) to the current
-     attribute's name. Stay in the &lt;span&gt;attribute name
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the lowercase version of the current input character
+   (add 0x0020 to the character's code point) to the current tag
+   token's tag name. Stay in the &lt;span&gt;tag name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
-     entry below.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current attribute's
-     name. Stay in the &lt;span&gt;attribute name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current tag token's
+   tag name. Stay in the &lt;span&gt;tag name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;When the user agent leaves the attribute name state (and before
-    emitting the tag token, if appropriate), the complete attribute's
-    name must be compared to the other attributes on the same token;
-    if there is already an attribute on the token with the exact same
-    name, then this is a &lt;span&gt;parse error&lt;/span&gt; and the new
-    attribute must be dropped, along with the value that gets
-    associated with it (if any).&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;after attribute name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that
+   attribute's name to the lowercase version of the current input
+   character (add 0x0020 to the character's code point), and its
+   value to the empty string. Switch to the &lt;span&gt;attribute name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+   entry below.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that
-     attribute's name to the lowercase version of the current input character
-     (add 0x0020 to the character's code point), and its value to
-     the empty string. Switch to the &lt;span&gt;attribute name
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that
+   attribute's name to the current input character, and its value to
+   the empty string. Switch to the &lt;span&gt;attribute name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Start a new attribute in the current tag token. Set that
-     attribute's name to the current input character, and its value to
-     the empty string. Switch to the &lt;span&gt;attribute name
-     state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;h5&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the lowercase version of the current input character
+   (add 0x0020 to the character's code point) to the current
+   attribute's name. Stay in the &lt;span&gt;attribute name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;attribute value (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;attribute value (unquoted) state&lt;/span&gt;
-     and reconsume this input character.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+   entry below.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;attribute value (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's
+   name. Stay in the &lt;span&gt;attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
-     entry below.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;When the user agent leaves the attribute name state (and before
+  emitting the tag token, if appropriate), the complete attribute's
+  name must be compared to the other attributes on the same token;
+  if there is already an attribute on the token with the exact same
+  name, then this is a &lt;span&gt;parse error&lt;/span&gt; and the new
+  attribute must be dropped, along with the value that gets
+  associated with it (if any).&lt;/p&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current attribute's
-     value. Switch to the &lt;span&gt;attribute value (unquoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;h5&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;after attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that
+   attribute's name to the lowercase version of the current input character
+   (add 0x0020 to the character's code point), and its value to
+   the empty string. Switch to the &lt;span&gt;attribute name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
-     state&lt;/span&gt;, with the &lt;span&gt;additional allowed character&lt;/span&gt;
-     being U+0022 QUOTATION MARK (&quot;).&lt;/dd&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current attribute's
-     value. Stay in the &lt;span&gt;attribute value (double-quoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Start a new attribute in the current tag token. Set that
+   attribute's name to the current input character, and its value to
+   the empty string. Switch to the &lt;span&gt;attribute name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;/dl&gt;
 
-   &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;before attribute value state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;attribute value (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
-     state&lt;/span&gt;, with the &lt;span&gt;additional allowed character&lt;/span&gt;
-     being U+0027 APOSTROPHE (').&lt;/dd&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;attribute value (unquoted) state&lt;/span&gt;
+   and reconsume this input character.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;attribute value (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current attribute's
-     value. Stay in the &lt;span&gt;attribute value (single-quoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+   entry below.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's
+   value. Switch to the &lt;span&gt;attribute value (unquoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
-     state&lt;/span&gt;, with no &lt;span&gt;additional allowed
-     character&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
-     entry below.&lt;/dd&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
+   state&lt;/span&gt;, with the &lt;span&gt;additional allowed character&lt;/span&gt;
+   being U+0022 QUOTATION MARK (&quot;).&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current attribute's
-     value. Stay in the &lt;span&gt;attribute value (unquoted)
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's
+   value. Stay in the &lt;span&gt;attribute value (double-quoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;/dl&gt;
 
-   &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;Attempt to &lt;span&gt;consume a character reference&lt;/span&gt;.&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;If nothing is returned, append a U+0026 AMPERSAND character to
-    the current attribute's value.&lt;/p&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after attribute value (quoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Otherwise, append the returned character token to the current
-    attribute's value.&lt;/p&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
+   state&lt;/span&gt;, with the &lt;span&gt;additional allowed character&lt;/span&gt;
+   being U+0027 APOSTROPHE (').&lt;/dd&gt;
 
-    &lt;p&gt;Finally, switch back to the attribute value state that you were
-    in when were switched into this state.&lt;/p&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's
+   value. Stay in the &lt;span&gt;attribute value (single-quoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;/dl&gt;
 
-   &lt;dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0026 AMPERSAND (&amp;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;character reference in attribute value
+   state&lt;/span&gt;, with no &lt;span&gt;additional allowed
+   character&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the character in
-     the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dt&gt;U+003D EQUALS SIGN (=)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Treat it as per the &quot;anything else&quot;
+   entry below.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current attribute's
+   value. Stay in the &lt;span&gt;attribute value (unquoted)
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;/dl&gt;
 
-   &lt;dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;Attempt to &lt;span&gt;consume a character reference&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Set the &lt;i&gt;self-closing flag&lt;/i&gt; of the current tag
-     token. Emit the current tag token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;If nothing is returned, append a U+0026 AMPERSAND character to
+  the current attribute's value.&lt;/p&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
-     token. Reconsume the EOF character in the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
-     
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the character in
-     the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Otherwise, append the returned character token to the current
+  attribute's value.&lt;/p&gt;
 
-    &lt;/dl&gt;
+  &lt;p&gt;Finally, switch back to the attribute value state that you were
+  in when were switched into this state.&lt;/p&gt;
 
-   &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
-    flag&lt;/span&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;Consume every character up to and including the first U+003E
-    GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
-    whichever comes first. Emit a comment token whose data is the
-    concatenation of all the characters starting from and including
-    the character that caused the state machine to switch into the
-    bogus comment state, up to and including the character immediately
-    before the last consumed character (i.e. up to the character just
-    before the U+003E or EOF character). (If the comment was started
-    by the end of the file (EOF), the token is empty.)&lt;/p&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;If the end of the file was reached, reconsume the EOF
-    character.&lt;/p&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;self-closing start tag state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the character in
+   the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
-    flag&lt;/span&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
 
-    &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
-    characters, consume those two characters, create a comment token
-    whose data is the empty string, and switch to the &lt;span&gt;comment
-    start state&lt;/span&gt;.&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;p&gt;Otherwise, if the next seven characters are a
-    &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-    for the word &quot;DOCTYPE&quot;, then consume those characters and switch
-    to the &lt;span&gt;DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span
-    title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
-    content&lt;/span&gt;&quot; and the &lt;span&gt;current node&lt;/span&gt; is not an
-    element in the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven
-    characters are a &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
-    only --&gt; match for the string &quot;[CDATA[&quot; (the five uppercase
-    letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET character before
-    and after), then consume those characters and switch to the
-    &lt;span&gt;CDATA section state&lt;/span&gt; (which is unrelated to the
-    &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state).&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;p&gt;Otherwise, this is a &lt;span&gt;parse error&lt;/span&gt;. Switch to the
-    &lt;span&gt;bogus comment state&lt;/span&gt;. The next character that is
-    consumed, if any, is the first character that will be in the
-    comment.&lt;/p&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Set the &lt;i&gt;self-closing flag&lt;/i&gt; of the current tag
+   token. Emit the current tag token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the current tag
+   token. Reconsume the EOF character in the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the character in
+   the &lt;span&gt;before attribute name state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;comment start dash state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
+  flag&lt;/span&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Switch to
-     the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume every character up to and including the first U+003E
+  GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
+  whichever comes first. Emit a comment token whose data is the
+  concatenation of all the characters starting from and including
+  the character that caused the state machine to switch into the
+  bogus comment state, up to and including the character immediately
+  before the last consumed character (i.e. up to the character just
+  before the U+003E or EOF character). (If the comment was started
+  by the end of the file (EOF), the token is empty.)&lt;/p&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the input character to the comment token's
-     data. Switch to the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;If the end of the file was reached, reconsume the EOF
+  character.&lt;/p&gt;
 
-    &lt;/dl&gt;
 
-   &lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
+  flag&lt;/span&gt; is set to the PCDATA state.)&lt;/em&gt;&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
+  characters, consume those two characters, create a comment token
+  whose data is the empty string, and switch to the &lt;span&gt;comment
+  start state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;p&gt;Otherwise, if the next seven characters are a
+  &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
+  for the word &quot;DOCTYPE&quot;, then consume those characters and switch
+  to the &lt;span&gt;DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;Otherwise, if the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span
+  title=&quot;insertion mode: in foreign content&quot;&gt;in foreign
+  content&lt;/span&gt;&quot; and the &lt;span&gt;current node&lt;/span&gt; is not an
+  element in the &lt;span&gt;HTML namespace&lt;/span&gt; and the next seven
+  characters are a &lt;span&gt;case-sensitive&lt;/span&gt;&lt;!-- XXX xref, ascii
+  only --&gt; match for the string &quot;[CDATA[&quot; (the five uppercase
+  letters &quot;CDATA&quot; with a U+005B LEFT SQUARE BRACKET character before
+  and after), then consume those characters and switch to the
+  &lt;span&gt;CDATA section state&lt;/span&gt; (which is unrelated to the
+  &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state).&lt;/p&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;comment end state&lt;/span&gt;&lt;/dd&gt;
+  &lt;p&gt;Otherwise, this is a &lt;span&gt;parse error&lt;/span&gt;. Switch to the
+  &lt;span&gt;bogus comment state&lt;/span&gt;. The next character that is
+  consumed, if any, is the first character that will be in the
+  comment.&lt;/p&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Switch to
-     the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input
-     character to the comment token's data. Switch to the
-     &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;/dl&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;comment start dash state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn id=&quot;comment&quot;&gt;Comment state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Switch to
+   the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the input character to the comment token's
+   data. Switch to the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;comment end dash state&lt;/span&gt;&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+  &lt;h5&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the input character to the comment token's data. Stay
-     in the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;/dl&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;comment end state&lt;/span&gt;&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Switch to
+   the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input
+   character to the comment token's data. Switch to the
+   &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;comment end state&lt;/span&gt;&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+ &lt;dt&gt;&lt;dfn id=&quot;comment&quot;&gt;Comment state&lt;/dfn&gt;&lt;/dt&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input
-     character to the comment token's data. Switch to the
-     &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;comment end dash state&lt;/span&gt;&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the input character to the comment token's data. Stay
+   in the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the comment token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append a U+002D HYPHEN-MINUS
-     (-) character to the comment token's data. Stay in the
-     &lt;span&gt;comment end state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
-     security reasons: otherwise, hostile user could put a &lt;script&gt; in
-     a comment e.g. in a blog comment and then DOS the server so that
-     the end tag isn't read, and then the commented &lt;script&gt; tag would
-     be treated as live code --&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append two U+002D HYPHEN-MINUS (-)
-     characters and the input character to the comment token's
-     data. Switch to the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;comment end state&lt;/span&gt;&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append a U+002D HYPHEN-MINUS (-) character and the input
+   character to the comment token's data. Switch to the
+   &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the current
-     character in the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the comment token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append a U+002D HYPHEN-MINUS
+   (-) character to the comment token's data. Stay in the
+   &lt;span&gt;comment end state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Emit the comment token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt; &lt;!-- For
+   security reasons: otherwise, hostile user could put a &lt;script&gt; in
+   a comment e.g. in a blog comment and then DOS the server so that
+   the end tag isn't read, and then the commented &lt;script&gt; tag would
+   be treated as live code --&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Append two U+002D HYPHEN-MINUS (-)
+   characters and the input character to the comment token's
+   data. Switch to the &lt;span&gt;comment state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;/dl&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Create a new DOCTYPE token. Set its
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Switch to
-     the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Create a new DOCTYPE token. Set its
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Reconsume
-     the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Create a new DOCTYPE token. Set the token's name to the
-     current input character. Switch to the &lt;span&gt;DOCTYPE name
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the current
+   character in the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;p&gt;First, consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Create a new DOCTYPE token. Set its
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Switch to
+   the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Create a new DOCTYPE token. Set its
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit the token. Reconsume
+   the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current DOCTYPE
-     token's name. Stay in the &lt;span&gt;DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Create a new DOCTYPE token. Set the token's name to the
+   current input character. Switch to the &lt;span&gt;DOCTYPE name
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;/dl&gt;
 
-   &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;First, consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE
+   token's name. Stay in the &lt;span&gt;DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;
+  &lt;/dl&gt;
 
-      &lt;p&gt;If the next six characters are a
-      &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-      for the word &quot;PUBLIC&quot;, then consume those characters and switch
-      to the &lt;span&gt;before DOCTYPE public identifier state&lt;/span&gt;.&lt;/p&gt;
 
-      &lt;p&gt;Otherwise, if the next six characters are a
-      &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
-      for the word &quot;SYSTEM&quot;, then consume those characters and switch
-      to the &lt;span&gt;before DOCTYPE system identifier state&lt;/span&gt;.&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
-      &lt;p&gt;Otherwise, this is the &lt;span&gt;parse error&lt;/span&gt;. Set the
-      DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to
-      the &lt;span&gt;bogus DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE name state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+    &lt;p&gt;If the next six characters are a
+    &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
+    for the word &quot;PUBLIC&quot;, then consume those characters and switch
+    to the &lt;span&gt;before DOCTYPE public identifier state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+    &lt;p&gt;Otherwise, if the next six characters are a
+    &lt;span&gt;case-insensitive&lt;/span&gt;&lt;!-- XXX xref, ascii only --&gt; match
+    for the word &quot;SYSTEM&quot;, then consume those characters and switch
+    to the &lt;span&gt;before DOCTYPE system identifier state&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
+    &lt;p&gt;Otherwise, this is the &lt;span&gt;parse error&lt;/span&gt;. Set the
+    DOCTYPE token's &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to
+    the &lt;span&gt;bogus DOCTYPE state&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE public identifier
-     (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;/dd&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE public identifier
-     (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;.  Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
-     DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;/dl&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE public identifier
+   (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's public identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE public identifier
+   (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;.  Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
+   DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current DOCTYPE
-     token's public identifier. Stay in the &lt;span&gt;DOCTYPE public
-     identifier (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;/dl&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-   &lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE
+   token's public identifier. Stay in the &lt;span&gt;DOCTYPE public
+   identifier (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current DOCTYPE
-     token's public identifier. Stay in the &lt;span&gt;DOCTYPE public
-     identifier (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;/dl&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE
+   token's public identifier. Stay in the &lt;span&gt;DOCTYPE public
+   identifier (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;/dl&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
-     (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
-     (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE public identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
-     DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
+   (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
+   (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
+   DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;/dl&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
-     (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
-     (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
-     (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;before DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
+   (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
-     DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Set the DOCTYPE token's system identifier to the empty string
+   (not missing), then switch to the &lt;span&gt;DOCTYPE system identifier
+   (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;span&gt;bogus
+   DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dd&gt;
+  &lt;/dl&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-     &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0022 QUOTATION MARK (&quot;)&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current DOCTYPE
-     token's system identifier. Stay in the &lt;span&gt;DOCTYPE system
-     identifier (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE
+   token's system identifier. Stay in the &lt;span&gt;DOCTYPE system
+   identifier (double-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;/dl&gt;
 
-   &lt;dd&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;h5&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-     &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
-     &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
-     token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0027 APOSTROPHE (')&lt;/dt&gt;
+   &lt;dd&gt;Switch to the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE
+   token. Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Append the current input character to the current DOCTYPE
-     token's system identifier. Stay in the &lt;span&gt;DOCTYPE system
-     identifier (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Append the current input character to the current DOCTYPE
+   token's system identifier. Stay in the &lt;span&gt;DOCTYPE system
+   identifier (single-quoted) state&lt;/span&gt;.&lt;/dd&gt;
 
-   &lt;/dd&gt;
+  &lt;/dl&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/dt&gt;
 
-   &lt;dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
-     &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
-     &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
-     &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
-     &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;after DOCTYPE system identifier state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the current DOCTYPE token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
-     Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Emit that DOCTYPE token.
+   Reconsume the EOF character in the &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;bogus DOCTYPE
-     state&lt;/span&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the DOCTYPE token's
-     &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Switch to the &lt;span&gt;bogus DOCTYPE
+   state&lt;/span&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the DOCTYPE token's
+   &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)&lt;/dd&gt;
 
-    &lt;/dl&gt;
+  &lt;/dl&gt;
 
-   &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;h5&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
 
-    &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+  &lt;dl class=&quot;switch&quot;&gt;
 
-    &lt;dl class=&quot;switch&quot;&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the DOCTYPE token. Switch to the &lt;span&gt;data
+   state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
-     &lt;dd&gt;Emit the DOCTYPE token. Switch to the &lt;span&gt;data
-     state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;Emit the DOCTYPE token. Reconsume the EOF character in the
+   &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;EOF&lt;/dt&gt;
-     &lt;dd&gt;Emit the DOCTYPE token. Reconsume the EOF character in the
-     &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Stay in the &lt;span&gt;bogus DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
 
-     &lt;dt&gt;Anything else&lt;/dt&gt;
-     &lt;dd&gt;Stay in the &lt;span&gt;bogus DOCTYPE state&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/dl&gt;
 
-    &lt;/dl&gt;
 
-   &lt;/dd&gt;
+  &lt;h5&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
 
-   &lt;dt&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
+  flag&lt;/span&gt; is set to the PCDATA state, and is unrelated to the
+  &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state.)&lt;/em&gt;&lt;/p&gt;
 
-   &lt;dd&gt;
+  &lt;p&gt;Consume every character up to the next occurrence of the three
+  character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
+  BRACKET U+003E GREATER-THAN SIGN (&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;), or
+  the end of the file (EOF), whichever comes first. Emit a series of
+  text tokens consisting of all the characters consumed except the
+  matching three character sequence at the end (if one was found
+  before the end of the file).&lt;/p&gt;
 
-    &lt;p&gt;&lt;em&gt;(This can only happen if the &lt;span&gt;content model
-    flag&lt;/span&gt; is set to the PCDATA state, and is unrelated to the
-    &lt;span&gt;content model flag&lt;/span&gt;'s CDATA state.)&lt;/em&gt;&lt;/p&gt;
+  &lt;p&gt;Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Consume every character up to the next occurrence of the three
-    character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
-    BRACKET U+003E GREATER-THAN SIGN (&lt;code title=&quot;&quot;&gt;]]&gt;&lt;/code&gt;), or
-    the end of the file (EOF), whichever comes first. Emit a series of
-    text tokens consisting of all the characters consumed except the
-    matching three character sequence at the end (if one was found
-    before the end of the file).&lt;/p&gt;
+  &lt;p&gt;If the end of the file was reached, reconsume the EOF
+  character.&lt;/p&gt;
 
-    &lt;p&gt;Switch to the &lt;span&gt;data state&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;If the end of the file was reached, reconsume the EOF
-    character.&lt;/p&gt;
 
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-
   &lt;h5&gt;Tokenizing character references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn&gt;consume a character


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008803.html">[html5] r1905 - [e] (0) Clarify the bogus comment state. (Bug 5863)	(credit: as)
</A></li>
	<LI>Next message: <A HREF="008805.html">[html5] r1907 - [t] (0) Provide a way to mutate the DOM into an	infoset. (Bug 5808) (credit: hs)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8804">[ date ]</a>
              <a href="thread.html#8804">[ thread ]</a>
              <a href="subject.html#8804">[ subject ]</a>
              <a href="author.html#8804">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
