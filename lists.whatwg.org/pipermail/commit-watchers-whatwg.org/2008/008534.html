<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1635 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1635%20-%20/&In-Reply-To=%3C20080516232833.5A28013A165%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008533.html">
   <LINK REL="Next"  HREF="008535.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1635 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1635%20-%20/&In-Reply-To=%3C20080516232833.5A28013A165%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1635 - /">whatwg at whatwg.org
       </A><BR>
    <I>Fri May 16 16:28:33 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="008533.html">[html5] r1634 - /
</A></li>
        <LI>Next message: <A HREF="008535.html">[html5] r1636 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8534">[ date ]</a>
              <a href="thread.html#8534">[ thread ]</a>
              <a href="subject.html#8534">[ subject ]</a>
              <a href="author.html#8534">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2008-05-16 16:28:32 -0700 (Fri, 16 May 2008)
New Revision: 1635

Modified:
   index
   source
Log:
[] (0) Defined the 'script execution browsing context' and the 'source browsing context'.

Modified: index
===================================================================
--- index	2008-05-16 01:19:05 UTC (rev 1634)
+++ index	2008-05-16 23:28:32 UTC (rev 1635)
@@ -1066,8 +1066,8 @@
 
      &lt;li&gt;&lt;a href=&quot;#scripting&quot;&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Scripting&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#running&quot;&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Running
-        executable code&lt;/a&gt;
+       &lt;li&gt;&lt;a href=&quot;#script0&quot;&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Script execution
+        contexts&lt;/a&gt;
 
        &lt;li&gt;&lt;a href=&quot;#security4&quot;&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Security
         exceptions&lt;/a&gt;
@@ -2035,11 +2035,11 @@
      specifications.&lt;/p&gt;
 
     &lt;p class=example&gt;A conforming XHTML processor would, upon finding an
-     XHTML &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element in an XML
+     XHTML &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element in an XML
      document, execute the script contained in that element. However, if the
      element is found within an XSLT transformation sheet (assuming the UA
      also supports XSLT), then the processor would instead treat the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as an opaque element that
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as an opaque element that
      forms part of the transform.&lt;/p&gt;
 
     &lt;p&gt;Web browsers that support &lt;a href=&quot;#html5&quot; title=HTML5&gt;HTML&lt;/a&gt; must
@@ -2725,9 +2725,11 @@
 
   &lt;p&gt;The &lt;dfn id=referrer
    title=dom-document-referrer&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute must
-   return either the URI of the page which &lt;a href=&quot;#navigate&quot;
+   return either the URI of the &lt;a href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the
+   &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt; at the time the navigation
+   was started (that is, the page which &lt;a href=&quot;#navigate&quot;
    title=navigate&gt;navigated&lt;/a&gt; the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
-   to the current document (if any), or the empty string if there is no such
+   to the current document), or the empty string if there is no such
    originating page, or if the UA has been configured not to report referrers
    in this case, or if the navigation was initiated for a &lt;a
    href=&quot;#hyperlinks&quot;&gt;hyperlink&lt;/a&gt; with a &lt;code title=rel-noreferrer&gt;&lt;a
@@ -3724,7 +3726,7 @@
    title=dom-document-scripts&gt;&lt;code&gt;scripts&lt;/code&gt;&lt;/dfn&gt; attribute must
    return an &lt;code&gt;&lt;a href=&quot;#htmlcollection0&quot;&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;
    rooted at the &lt;code&gt;Document&lt;/code&gt; node, whose filter matches only
-   &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
 
   &lt;p&gt;The &lt;dfn id=getelementsbyname
    title=dom-document-getElementsByName&gt;&lt;code&gt;getElementsByName(&lt;var
@@ -4039,13 +4041,13 @@
      inserted, one at a time, processing resulting tokens as they are
      emitted, and stopping when the tokeniser reaches the insertion point or
      when the processing of the tokeniser is aborted by the tree construction
-     stage (this can happen if a &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     stage (this can happen if a &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
      start tag token is emitted by the tokeniser).
 
     &lt;p class=note&gt;If the &lt;code title=dom-document-write-HTML&gt;&lt;a
      href=&quot;#document.write...&quot;&gt;document.write()&lt;/a&gt;&lt;/code&gt; method was called
      from script executing inline (i.e. executing because the parser parsed a
-     set of &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; tags), then this is a
+     set of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; tags), then this is a
      &lt;a href=&quot;#nestedParsing&quot;&gt;reentrant invocation of the parser&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
@@ -4151,7 +4153,7 @@
      preserving their order.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
    using &lt;code title=dom-innerHTML-HTML&gt;&lt;a
    href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
    inserted.&lt;/p&gt;
@@ -4308,7 +4310,7 @@
      preserving their order.&lt;/p&gt;
   &lt;/ol&gt;
 
-  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
    using &lt;code title=dom-innerHTML-XML&gt;&lt;a
    href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
    inserted.
@@ -7951,7 +7953,7 @@
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#base&quot;&gt;base&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=&quot;#link&quot;&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
    href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a
-   href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+   href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#meta0&quot;&gt;meta&lt;/a&gt;&lt;/code&gt; element can represent
    document-level metadata with the &lt;code title=attr-meta-name&gt;&lt;a
@@ -8412,12 +8414,14 @@
          not canceled the redirect, the user agent &lt;a href=&quot;#navigate&quot;
          title=navigate&gt;navigates&lt;/a&gt; the document's browsing context to &lt;var
          title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;a href=&quot;#replacement&quot;&gt;replacement
-         enabled&lt;/a&gt;.
+         enabled&lt;/a&gt;, and with the document's browsing context as the &lt;a
+         href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
 
        &lt;li&gt;
         &lt;p&gt;Provide the user with an interface that, when selected,
          &lt;span&gt;navigates&lt;/span&gt; a &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
-         to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.
+         to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, with the document's browsing context as
+         the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
 
        &lt;li&gt;
         &lt;p&gt;Do nothing.
@@ -14159,16 +14163,22 @@
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; is to contain. When the browsing
    context is created, if the attribute is present, the user agent must &lt;a
    href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; this browsing context to the given URI, with
-   &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;. If the user &lt;a
-   href=&quot;#navigate&quot; title=navigate&gt;navigates&lt;/a&gt; away from this page, the
-   &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s corresponding &lt;code&gt;&lt;a
+   &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;, and with the &lt;code&gt;&lt;a
+   href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element's document's &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; as the &lt;a href=&quot;#source0&quot;&gt;source
+   browsing context&lt;/a&gt;. If the user &lt;a href=&quot;#navigate&quot;
+   title=navigate&gt;navigates&lt;/a&gt; away from this page, the &lt;code&gt;&lt;a
+   href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s corresponding &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object will reference new
    &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code title=attr-iframe-src&gt;&lt;a
    href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute will not change.
 
   &lt;p&gt;Whenever the &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute is set, the nested &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
-   must be &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; to the given URI.
+   must be &lt;a href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; to the given URI,
+   with the &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element's document's &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; as the &lt;a href=&quot;#source0&quot;&gt;source
+   browsing context&lt;/a&gt;.
 
   &lt;p&gt;If the &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute is not set when the element is created, the browsing context
@@ -14576,7 +14586,10 @@
          if it does not already have one. The element's nested &lt;a
          href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; must then be &lt;a
          href=&quot;#navigate&quot; title=navigate&gt;navigated&lt;/a&gt; to the given resource,
-         with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;. (The &lt;code
+         with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;, and with the
+         &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element's document's &lt;a
+         href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; as the &lt;a
+         href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;. (The &lt;code
          title=attr-object-data&gt;&lt;a href=&quot;#data&quot;&gt;data&lt;/a&gt;&lt;/code&gt; attribute of
          the &lt;code&gt;&lt;a href=&quot;#object&quot;&gt;object&lt;/a&gt;&lt;/code&gt; element doesn't get
          updated if the browsing context gets further navigated to other
@@ -22754,7 +22767,7 @@
   &lt;/div&gt;
 
   &lt;h4 id=script&gt;&lt;span class=secno&gt;3.15.1 &lt;/span&gt;The &lt;dfn
-   id=script0&gt;&lt;code&gt;script&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
+   id=script1&gt;&lt;code&gt;script&lt;/code&gt;&lt;/dfn&gt; element&lt;/h4&gt;
 
   &lt;dl class=element&gt;
    &lt;dt&gt;Categories
@@ -22804,7 +22817,7 @@
 };&lt;/pre&gt;
   &lt;/dl&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element allows authors to
+  &lt;p&gt;The &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element allows authors to
    include dynamic script and script data in their documents.
 
   &lt;p&gt;When used to include dynamic scripts, the scripts may either be embedded
@@ -22887,12 +22900,12 @@
    specific times described below (namely, when the element is inserted into
    the document).
 
-  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements have four associated
+  &lt;p&gt;&lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements have four associated
    pieces of metadata. The first is a flag indicating whether or not the
    script block has been &lt;dfn id=already&gt;&quot;already executed&quot;&lt;/dfn&gt;. Initially,
-   &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements must have this flag
+   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements must have this flag
    unset (script blocks, when created, are not &quot;already executed&quot;). When a
-   &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element is cloned, the &quot;already
+   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element is cloned, the &quot;already
    executed&quot; flag, if set, must be propagated to the clone when it is
    created. The second is a flag indicating whether the element was &lt;dfn
    id=parser-inserted&gt;&quot;parser-inserted&quot;&lt;/dfn&gt;. This flag is set by the &lt;a
@@ -22904,36 +22917,36 @@
    encoding&lt;/var&gt;&lt;/dfn&gt;. They are determined when the script is run, based on
    the attributes on the element at that time.
 
-  &lt;p&gt;&lt;dfn id=running0 title=&quot;running a script&quot;&gt;Running a script&lt;/dfn&gt;: When a
+  &lt;p&gt;&lt;dfn id=running title=&quot;running a script&quot;&gt;Running a script&lt;/dfn&gt;: When a
    script block is &lt;span&gt;inserted into a document&lt;/span&gt;, the user agent must
    act as follows:
 
   &lt;ol&gt;
    &lt;li&gt;
-    &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has a &lt;code
+    &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has a &lt;code
      title=attr-script-type&gt;&lt;a href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute and
      its value is the empty string, or if the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has no &lt;code
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has no &lt;code
      title=attr-script-type&gt;&lt;a href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute but
      it has a &lt;code title=attr-script-language&gt;language&lt;/code&gt; attribute and
      &lt;em&gt;that&lt;/em&gt; attribute's value is the empty string, or if the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has neither a &lt;code
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has neither a &lt;code
      title=attr-script-type&gt;&lt;a href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt; attribute nor a
      &lt;code title=attr-script-language&gt;language&lt;/code&gt; attribute, let &lt;var&gt;&lt;a
      href=&quot;#the-scripts&quot;&gt;the script's type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be &quot;&lt;code
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be &quot;&lt;code
      title=&quot;&quot;&gt;text/javascript&lt;/code&gt;&quot;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
+    &lt;p&gt;Otherwise, if the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
      has a &lt;code title=attr-script-type&gt;&lt;a href=&quot;#type11&quot;&gt;type&lt;/a&gt;&lt;/code&gt;
      attribute, let &lt;var&gt;&lt;a href=&quot;#the-scripts&quot;&gt;the script's type&lt;/a&gt;&lt;/var&gt;
-     for this &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be the value
+     for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be the value
      of that attribute.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, the element has a &lt;code
      title=attr-script-language&gt;language&lt;/code&gt; attribute; let &lt;var&gt;&lt;a
      href=&quot;#the-scripts&quot;&gt;the script's type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be the concatenation of the
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element be the concatenation of the
      string &quot;&lt;code title=&quot;&quot;&gt;text/&lt;/code&gt;&quot; followed by the value of the &lt;code
      title=attr-script-language&gt;language&lt;/code&gt; attribute.&lt;/p&gt;
     &lt;!-- user agents already support, e.g., type=&quot;text/javascript1.3&quot;,
@@ -22941,15 +22954,15 @@
     
 
    &lt;li&gt;
-    &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has a &lt;code
+    &lt;p&gt;If the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has a &lt;code
      title=attr-script-charset&gt;&lt;a href=&quot;#charset2&quot;&gt;charset&lt;/a&gt;&lt;/code&gt;
      attribute, then let &lt;var&gt;&lt;a href=&quot;#the-scripts0&quot;&gt;the script's character
-     encoding&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     encoding&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
      element be the encoding given by the &lt;code title=attr-script-charset&gt;&lt;a
      href=&quot;#charset2&quot;&gt;charset&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, let &lt;var&gt;&lt;a href=&quot;#the-scripts0&quot;&gt;the script's character
-     encoding&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     encoding&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
      element be the same as &lt;a href=&quot;#character1&quot; title=&quot;document's character
      encoding&quot;&gt;the encoding of the document itself&lt;/a&gt;.&lt;/p&gt;
 
@@ -22957,7 +22970,7 @@
     &lt;p&gt;If &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, or if the
      &lt;code&gt;Document&lt;/code&gt; has &lt;code title=dom-document-designMode&gt;&lt;a
      href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled, or if the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element was created by an &lt;span&gt;XML
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element was created by an &lt;span&gt;XML
      parser&lt;/span&gt; that itself was created as part of the processing of the
      &lt;code title=dom-innerHTML-XML&gt;&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
      attribute's
@@ -22965,8 +22978,8 @@
     HTML parser handles that for us--&gt;,
      or if the user agent does not &lt;a href=&quot;#support&quot;&gt;support the scripting
      language&lt;/a&gt; given by &lt;var&gt;&lt;a href=&quot;#the-scripts&quot;&gt;the script's
-     type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
-     element, or if the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
+     type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     element, or if the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
      has its &lt;a href=&quot;#already&quot;&gt;&quot;already executed&quot;&lt;/a&gt; flag set, then the
      user agent must abort these steps at this point. The script is not
      executed.&lt;/p&gt;
@@ -23192,7 +23205,7 @@
          href=&quot;#text1&quot;&gt;text&lt;/a&gt;&lt;/code&gt; attribute (defined below) as the
          script to execute, and for XML-based scripting languages, user
          agents must use all the child nodes of the &lt;code&gt;&lt;a
-         href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as the script to execute.&lt;/p&gt;
+         href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as the script to execute.&lt;/p&gt;
       &lt;/dl&gt;
 
       &lt;p&gt;In any case, the user agent must execute the script according to the
@@ -23202,7 +23215,8 @@
 
       &lt;p&gt;Scripts must be executed in the scope of the &lt;a
        href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the element's
-       &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+       &lt;code&gt;Document&lt;/code&gt;. That &lt;a href=&quot;#script2&quot;&gt;script execution
+       browsing context&lt;/a&gt; is that browsing context.&lt;/p&gt;
 
       &lt;p class=note&gt;The element's attributes' values might have changed
        between when the element was inserted into the document and when the
@@ -23210,13 +23224,13 @@
        the element itself might have been taken back out of the DOM, or had
        other changes made. These changes do not in any way affect the above
        steps; only the values of the attributes at the time the &lt;code&gt;&lt;a
-       href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element is first inserted into the
+       href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element is first inserted into the
        document matter.&lt;/p&gt;
 
      &lt;li&gt;
       &lt;p&gt;Then, the user agent must &lt;a href=&quot;#firing4&quot;&gt;fire a &lt;code
        title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt; at the &lt;code&gt;&lt;a
-       href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+       href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
     &lt;/ol&gt;
   &lt;/dl&gt;
 
@@ -23233,7 +23247,7 @@
    title=dom-script-text&gt;&lt;code&gt;text&lt;/code&gt;&lt;/dfn&gt; must return a concatenation
    of the contents of all the &lt;a href=&quot;#text-node&quot; title=&quot;text node&quot;&gt;text
    nodes&lt;/a&gt; that are direct children of the &lt;code&gt;&lt;a
-   href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element (ignoring any other nodes such
+   href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element (ignoring any other nodes such
    as comments or elements), in tree order. On setting, it must act the same
    way as the &lt;code&gt;&lt;a href=&quot;#textcontent&quot;&gt;textContent&lt;/a&gt;&lt;/code&gt; DOM
    attribute.
@@ -23361,12 +23375,12 @@
    &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt; element is text, except that
    the text must be such that running the following algorithm results in a
    conforming document with no &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt;
-   elements and no &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements, and
+   elements and no &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements, and
    such that no step in the algorithm causes an &lt;a href=&quot;#html-0&quot;&gt;HTML
    parser&lt;/a&gt; to flag a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;:
 
   &lt;ol&gt;
-   &lt;li&gt;Remove every &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element from
+   &lt;li&gt;Remove every &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element from
     the document.
 
    &lt;li&gt;Make a list of every &lt;code&gt;&lt;a href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt;
@@ -28274,7 +28288,10 @@
    enabled&lt;/a&gt;; otherwise, it must not be enabled unless the &lt;a
    href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; was just created as part of the &lt;a
    href=&quot;#the-rules&quot;&gt;the rules for chosing a browsing context given a
-   browsing context name&lt;/a&gt;.
+   browsing context name&lt;/a&gt;. The navigation must be done with the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked as
+   the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
 
   &lt;p&gt;The method must return the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
    object of the default view of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
@@ -28385,11 +28402,11 @@
      called the &lt;i&gt;owner&lt;/i&gt;:&lt;/p&gt;
 
     &lt;dl class=switch&gt;
-     &lt;dt&gt;If a script is in a &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+     &lt;dt&gt;If a script is in a &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
       element
 
      &lt;dd&gt;The owner is the &lt;code&gt;Document&lt;/code&gt; to which the &lt;code&gt;&lt;a
-      href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element belongs.
+      href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element belongs.
 
      &lt;dt&gt;If a script is a function or other code reference created by another
       script
@@ -28671,14 +28688,12 @@
 
   &lt;h3 id=scripting&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Scripting&lt;/h3&gt;
 
-  &lt;h4 id=running&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Running executable code&lt;/h4&gt;
-
   &lt;p&gt;Various mechanisms can cause author-provided executable code to run in
    the context of a document. These mechanisms include, but are probably not
    limited to:
 
   &lt;ul&gt;
-   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
 
    &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a
     href=&quot;#the-javascript&quot;&gt;javascript:&lt;/a&gt;&lt;/code&gt; URIs (e.g. the &lt;code
@@ -28705,6 +28720,14 @@
    title=&quot;User agents with no scripting support&quot;&gt;user agent with no scripting
    support&lt;/a&gt; for the purposes of conformance.
 
+  &lt;h4 id=script0&gt;&lt;span class=secno&gt;4.4.1 &lt;/span&gt;Script execution contexts&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=script2&gt;script execution browsing context&lt;/dfn&gt; of a script
+   is defined when that script is created. It is typically the &lt;a
+   href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object that is being used as the script's
+   dereference context..
+
   &lt;h4 id=security4&gt;&lt;span class=secno&gt;4.4.2 &lt;/span&gt;Security exceptions&lt;/h4&gt;
 
   &lt;p class=big-issue&gt;Define &lt;dfn id=security9&gt;security exception&lt;/dfn&gt;.
@@ -28728,17 +28751,21 @@
    href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has the &lt;a
    href=&quot;#same-origin&quot;&gt;same origin&lt;/a&gt; as the script given by that URI, the
    dereference context must be the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt;
-   being navigated.
+   being navigated. The &lt;a href=&quot;#script2&quot;&gt;script execution browsing
+   context&lt;/a&gt; in that case is that same &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt;.&lt;/p&gt;
+  &lt;!-- (redundant with next paragraph)
+  &lt;p&gt;When a browsing context is &lt;span
+  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
+  and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has a
+  an &lt;span&gt;origin&lt;/span&gt; that is &lt;em&gt;not&lt;/em&gt; the &lt;span title=&quot;same
+  origin&quot;&gt;same&lt;/span&gt; as that of the script given by the URI, the
+  dereference context must be an empty object.&lt;/p&gt;
+--&gt;
 
-  &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
-   title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
-   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has a an &lt;a
-   href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; that is &lt;em&gt;not&lt;/em&gt; the &lt;a href=&quot;#same-origin&quot;
-   title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of the script given by the URI, the
-   dereference context must be an empty object.
+  &lt;p&gt;Otherwise, the dereference context must be an empty object, and there is
+   no &lt;a href=&quot;#script2&quot;&gt;script execution browsing context&lt;/a&gt;.
 
-  &lt;p&gt;Otherwise, the dereference context must be an empty object.
-
   &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should be
    evaluated when the resource for that URI is needed, unless &lt;a
    href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt; or the &lt;code&gt;Document&lt;/code&gt;
@@ -28789,7 +28816,7 @@
    context, and for Documents that have no browsing context. Do the events
    fire? Do the handlers in that document not fire? Do we just define
    scripting to be disabled when the document isn't active, with events still
-   running as is? See also the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+   running as is? See also the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
    element section, which says scripts don't run when the document isn't
    active.
 
@@ -28837,6 +28864,10 @@
   &lt;p class=note&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3, for more
    details on activation objects. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
 
+  &lt;p&gt;The &lt;a href=&quot;#script2&quot;&gt;script execution browsing context&lt;/a&gt; of the
+   event handler must be the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; at the
+   end of the scope chain.
+
   &lt;p class=issue&gt;How do we allow non-JS event handlers?
 
   &lt;p&gt;&lt;dfn id=event4&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set
@@ -29467,7 +29498,10 @@
 
    &lt;li&gt;
     &lt;p&gt;&lt;a href=&quot;#navigate&quot;&gt;Navigate&lt;/a&gt; the new browsing context to &lt;var
-     title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
+     title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;,
+     and with the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;&lt;a
+     href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked
+     as the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
    &lt;li&gt;
     &lt;p&gt;Wait for the browsing context to be closed. (The user agent must allow
@@ -31673,6 +31707,12 @@
    context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with &lt;a
    href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;.
 
+  &lt;p&gt;Navigation for the &lt;code title=dom-location-assign&gt;&lt;a
+   href=&quot;#assign&quot;&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a
+   href=&quot;#replace&quot;&gt;replace()&lt;/a&gt;&lt;/code&gt; methods must be done with the &lt;a
+   href=&quot;#script2&quot;&gt;script execution browsing context&lt;/a&gt; of the script that
+   called the method as the &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
+
   &lt;p&gt;Relative &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; arguments for &lt;code
    title=dom-location-assign&gt;&lt;a href=&quot;#assign&quot;&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=dom-location-replace&gt;&lt;a href=&quot;#replace&quot;&gt;replace()&lt;/a&gt;&lt;/code&gt; must be
@@ -31779,15 +31819,20 @@
    documents&lt;/h4&gt;
 
   &lt;p&gt;Certain actions cause the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; to
-   &lt;dfn id=navigate&gt;navigate&lt;/dfn&gt;. For example, &lt;a href=&quot;#following0&quot;
-   title=&quot;following hyperlinks&quot;&gt;following a hyperlink&lt;/a&gt;, &lt;span
-   title=&quot;&quot;&gt;form submission&lt;/span&gt;, and the &lt;code title=dom-open&gt;&lt;a
+   &lt;dfn id=navigate&gt;navigate&lt;/dfn&gt;. Navigation always involves a &lt;dfn
+   id=source0&gt;source browsing context&lt;/dfn&gt;, which is the browsing context
+   which was responsible for starting the navigation.
+
+  &lt;p class=example&gt;For example, &lt;a href=&quot;#following0&quot; title=&quot;following
+   hyperlinks&quot;&gt;following a hyperlink&lt;/a&gt;, &lt;span title=&quot;&quot;&gt;form
+   submission&lt;/span&gt;, and the &lt;code title=dom-open&gt;&lt;a
    href=&quot;#open2&quot;&gt;window.open()&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=dom-location-assign&gt;&lt;a href=&quot;#assign&quot;&gt;location.assign()&lt;/a&gt;&lt;/code&gt;
-   methods can all cause a browsing context to navigate. A user agent may
-   also provide various ways for the user to explicitly cause a browsing
-   context to navigate.
+   methods can all cause a browsing context to navigate.
 
+  &lt;p&gt;A user agent may also provide various ways for the user to explicitly
+   cause a browsing context to navigate.
+
   &lt;p&gt;When a browsing context is navigated, the user agent must run the
    following steps:
 
@@ -32369,7 +32414,9 @@
      href=&quot;#entry&quot;&gt;entry update&lt;/a&gt; of that entry, and abort these steps. The
      &quot;&lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
      algorithm to complete the traversal, at which point there &lt;em&gt;is&lt;/em&gt; a
-     &lt;code&gt;Document&lt;/code&gt; object and so this step gets skipped.
+     &lt;code&gt;Document&lt;/code&gt; object and so this step gets skipped. The
+     navigation must be done using the same &lt;a href=&quot;#source0&quot;&gt;source
+     browsing context&lt;/a&gt; as was used the first time this entry was created.
 
    &lt;li&gt;
     &lt;p&gt;If appropriate, update the &lt;a href=&quot;#current1&quot;&gt;current entry&lt;/a&gt; in
@@ -33636,7 +33683,7 @@
   &lt;p&gt;In addition, the event must have its &lt;code title=dom-StorageEvent-uri&gt;&lt;a
    href=&quot;#uri&quot;&gt;uri&lt;/a&gt;&lt;/code&gt; attribute set to the address of the page whose
    &lt;code&gt;&lt;a href=&quot;#storage0&quot;&gt;Storage&lt;/a&gt;&lt;/code&gt; object was affected, and its
-   &lt;code title=dom-StorageEvent-source&gt;&lt;a href=&quot;#source0&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
+   &lt;code title=dom-StorageEvent-source&gt;&lt;a href=&quot;#source1&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
    attribute set to the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of
    the &lt;a href=&quot;#browsing1&quot;&gt;browsing context&lt;/a&gt; that that document is in, if
    the two documents are in the same &lt;a href=&quot;#unit-of&quot;&gt;unit of related
@@ -33649,7 +33696,7 @@
   readonly attribute DOMString &lt;a href=&quot;#oldvalue&quot; title=dom-StorageEvent-oldValue&gt;oldValue&lt;/a&gt;;
   readonly attribute DOMString &lt;span title=dom-StorageEvent-newValue&gt;newValue&lt;/span&gt;;
   readonly attribute DOMString &lt;a href=&quot;#uri&quot; title=dom-StorageEvent-uri&gt;uri&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#source0&quot; title=dom-StorageEvent-source&gt;source&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#source1&quot; title=dom-StorageEvent-source&gt;source&lt;/a&gt;;
   void &lt;a href=&quot;#initstorageevent&quot; title=dom-StorageEvent-initStorageEvent&gt;initStorageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString uriArg, in Window sourceArg);
   void &lt;a href=&quot;#initstorageeventns&quot; title=dom-StorageEvent-initStorageEventNS&gt;initStorageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString uriArg, in Window sourceArg);
 };&lt;/pre&gt;
@@ -33676,7 +33723,7 @@
   &lt;p&gt;The &lt;dfn id=uri title=dom-StorageEvent-uri&gt;&lt;code&gt;uri&lt;/code&gt;&lt;/dfn&gt;
    attribute represents the address of the document that changed the key.
 
-  &lt;p&gt;The &lt;dfn id=source0
+  &lt;p&gt;The &lt;dfn id=source1
    title=dom-StorageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
    represents the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; that changed the
    key.
@@ -34581,6 +34628,11 @@
   &lt;p&gt;Otherwise, the browsing context that must be navigated is the same
    browsing context as the one which the hyperlink element itself is in.
 
+  &lt;p&gt;The navigation must be done with the &lt;a href=&quot;#browsing1&quot;&gt;browsing
+   context&lt;/a&gt; that contains the &lt;code&gt;Document&lt;/code&gt; object with which the
+   hyperlink's element in question is associated as the &lt;a
+   href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;.
+
   &lt;h5 id=hyperlink0&gt;&lt;span class=secno&gt;4.12.2.1. &lt;/span&gt;Hyperlink auditing&lt;/h5&gt;
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
@@ -36661,13 +36713,13 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=dragstart title=event-dragstart&gt;&lt;code&gt;dragstart&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#source1&quot;&gt;Source node&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#source2&quot;&gt;Source node&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
 
      &lt;td&gt;&amp;#x2713; Cancelable
 
-     &lt;td&gt;Contains &lt;a href=&quot;#source1&quot;&gt;source node&lt;/a&gt; unless a selection is
+     &lt;td&gt;Contains &lt;a href=&quot;#source2&quot;&gt;source node&lt;/a&gt; unless a selection is
       being dragged, in which case it is empty
 
      &lt;td&gt;&lt;code title=&quot;&quot;&gt;uninitialized&lt;/code&gt;
@@ -36679,7 +36731,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=drag title=event-drag&gt;&lt;code&gt;drag&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#source1&quot;&gt;Source node&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#source2&quot;&gt;Source node&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
 
@@ -36771,7 +36823,7 @@
     &lt;tr&gt;
      &lt;td&gt;&lt;dfn id=dragend title=event-dragend&gt;&lt;code&gt;dragend&lt;/code&gt;&lt;/dfn&gt;
 
-     &lt;td&gt;&lt;a href=&quot;#source1&quot;&gt;Source node&lt;/a&gt;
+     &lt;td&gt;&lt;a href=&quot;#source2&quot;&gt;Source node&lt;/a&gt;
 
      &lt;td&gt;&amp;#x2713; Bubbles
 
@@ -36913,7 +36965,7 @@
   &lt;p&gt;If it is not a selection that is being dragged, then the event must be
    fired on the element that is being dragged.
 
-  &lt;p&gt;The node on which the event is fired is the &lt;dfn id=source1&gt;source
+  &lt;p&gt;The node on which the event is fired is the &lt;dfn id=source2&gt;source
    node&lt;/dfn&gt;. Multiple events are fired on this node during the course of
    the drag-and-drop operation.
 
@@ -36921,7 +36973,7 @@
    title=dom-DragEvent-dataTransfer&gt;&lt;a
    href=&quot;#datatransfer&quot;&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; member of the event must be
    created with no nodes. Otherwise, it must be created containing just the
-   &lt;a href=&quot;#source1&quot;&gt;source node&lt;/a&gt;. Script can use the &lt;code
+   &lt;a href=&quot;#source2&quot;&gt;source node&lt;/a&gt;. Script can use the &lt;code
    title=dom-DataTransfer-addElement&gt;&lt;a
    href=&quot;#addelement&quot;&gt;addElement()&lt;/a&gt;&lt;/code&gt; method to add further elements
    to the list of what is being dragged.
@@ -37034,7 +37086,7 @@
   &lt;ol&gt;
    &lt;li&gt;
     &lt;p&gt;First, the user agent must fire a &lt;code title=event-drag&gt;&lt;a
-     href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt; event at the &lt;a href=&quot;#source1&quot;&gt;source
+     href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt; event at the &lt;a href=&quot;#source2&quot;&gt;source
      node&lt;/a&gt;. If this event is canceled, the user agent must set the &lt;a
      href=&quot;#current3&quot;&gt;current drag operation&lt;/a&gt; to none (no drag operation).&lt;/p&gt;
 
@@ -37269,7 +37321,7 @@
      &lt;li&gt;
       &lt;p&gt;Finally, the user agent must fire a &lt;code title=event-dragend&gt;&lt;a
        href=&quot;#dragend&quot;&gt;dragend&lt;/a&gt;&lt;/code&gt; event at the &lt;a
-       href=&quot;#source1&quot;&gt;source node&lt;/a&gt;, with the &lt;code
+       href=&quot;#source2&quot;&gt;source node&lt;/a&gt;, with the &lt;code
        title=dom-DataTransfer-dropEffect&gt;&lt;a
        href=&quot;#dropeffect&quot;&gt;dropEffect&lt;/a&gt;&lt;/code&gt; attribute of the event's
        &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a
@@ -37329,7 +37381,7 @@
    operation starts or ends in another application&lt;/h5&gt;
 
   &lt;p&gt;If the drag is initiated in another application, the &lt;a
-   href=&quot;#source1&quot;&gt;source node&lt;/a&gt; is not a DOM node, and the user agent must
+   href=&quot;#source2&quot;&gt;source node&lt;/a&gt; is not a DOM node, and the user agent must
    use platform-specific conventions instead when the requirements above
    involve the source node. User agents in this situation must act as if the
    dragged data had been added to the &lt;code&gt;&lt;a
@@ -38696,7 +38748,7 @@
   readonly attribute DOMString &lt;a href=&quot;#data4&quot; title=dom-MessageEvent-data&gt;data&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#origin1&quot; title=dom-MessageEvent-origin&gt;origin&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=&quot;#lasteventid&quot; title=dom-MessageEvent-lastEventId&gt;lastEventId&lt;/a&gt;;
-  readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#source2&quot; title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  readonly attribute &lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt; &lt;a href=&quot;#source3&quot; title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
   void &lt;a href=&quot;#initmessageevent&quot; title=dom-MessageEvent-initMessageEvent&gt;initMessageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
   void &lt;a href=&quot;#initmessageeventns&quot; title=dom-MessageEvent-initMessageEventNS&gt;initMessageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg);
 };&lt;/pre&gt;
@@ -38724,7 +38776,7 @@
    attribute represents, in &lt;a href=&quot;#server-sent&quot;&gt;server-sent dom
    events&lt;/a&gt;, the &lt;span&gt;last event ID string&lt;/span&gt; of the event source.
 
-  &lt;p&gt;The &lt;dfn id=source2
+  &lt;p&gt;The &lt;dfn id=source3
    title=dom-MessageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
    represents, in &lt;a href=&quot;#cross-document&quot;&gt;cross-document messaging&lt;/a&gt;, the
    &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; from which the message came.
@@ -39077,7 +39129,7 @@
      title=dom-MessageEvent-lastEventId&gt;&lt;a
      href=&quot;#lasteventid&quot;&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute must be set to the
      &lt;span&gt;last event ID string&lt;/span&gt; of the event source, and the &lt;code
-     title=dom-MessageEvent-source&gt;&lt;a href=&quot;#source2&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
+     title=dom-MessageEvent-source&gt;&lt;a href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt;
      attribute must be set to null.
 
    &lt;li&gt;
@@ -39387,7 +39439,7 @@
   &lt;pre
    class=idl&gt;interface &lt;dfn id=connectionreadevent&gt;ConnectionReadEvent&lt;/dfn&gt; : Event {
   readonly attribute DOMString &lt;a href=&quot;#data5&quot; title=dom-ConnectionReadEvent-data&gt;data&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=&quot;#source3&quot; title=dom-ConnectionReadEvent-source&gt;source&lt;/a&gt;;
+  readonly attribute DOMString &lt;a href=&quot;#source4&quot; title=dom-ConnectionReadEvent-source&gt;source&lt;/a&gt;;
   void &lt;a href=&quot;#initconnectionreadevent&quot; title=dom-ConnectionReadEvent-initConnectionReadEvent&gt;initConnectionReadEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
   void &lt;a href=&quot;#initconnectionreadeventns&quot; title=dom-ConnectionReadEvent-initConnectionReadEventNS&gt;initConnectionReadEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString dataArg);
 };
@@ -39405,7 +39457,7 @@
    title=dom-ConnectionReadEvent-data&gt;&lt;code&gt;data&lt;/code&gt;&lt;/dfn&gt; attribute
    represents the data that was transmitted from the peer.
 
-  &lt;p&gt;The &lt;dfn id=source3
+  &lt;p&gt;The &lt;dfn id=source4
    title=dom-ConnectionReadEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
    represents the name of the peer. This is primarily useful on broadcast
    connections; on direct connections it is equal to the &lt;code
@@ -39633,7 +39685,7 @@
    title=&quot;&quot;&gt;s&lt;/var&gt;, with the first character removed, must be used as the
    &lt;code title=dom-ConnectionReadEvent-data&gt;&lt;a href=&quot;#data5&quot;&gt;data&lt;/a&gt;&lt;/code&gt;,
    and the source IP address of the packet as the &lt;code
-   title=dom-ConnectionReadEvent-source&gt;&lt;a href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt;.
+   title=dom-ConnectionReadEvent-source&gt;&lt;a href=&quot;#source4&quot;&gt;source&lt;/a&gt;&lt;/code&gt;.
 
   &lt;p class=big-issue&gt;Making the source IP available means that if two or more
    machines in a private network can be made to go to a hostile page
@@ -40111,7 +40163,7 @@
      &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a
      href=&quot;#lasteventid&quot;&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute must be set to the
      empty string, and the &lt;code title=dom-MessageEvent-source&gt;&lt;a
-     href=&quot;#source2&quot;&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be set to the &lt;code&gt;&lt;a
+     href=&quot;#source3&quot;&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be set to the &lt;code&gt;&lt;a
      href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a
      href=&quot;#default3&quot;&gt;default view&lt;/a&gt; of the &lt;a href=&quot;#browsing1&quot;&gt;browsing
      context&lt;/a&gt; for which the &lt;code&gt;Document&lt;/code&gt; object with which the
@@ -40329,7 +40381,7 @@
    &lt;dt&gt;CDATA elements
 
    &lt;dd&gt;&lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-    href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
+    href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;!-- iframe and
    noscript don't count as CDATA for syntax purposes --&gt;
 
@@ -40643,7 +40695,7 @@
    href=&quot;#space&quot;&gt;space character&lt;/a&gt; or a &lt;a href=&quot;#comments0&quot;
    title=syntax-comments&gt;comment&lt;/a&gt;, except if the first thing inside the
    &lt;code&gt;&lt;a href=&quot;#body0&quot;&gt;body&lt;/a&gt;&lt;/code&gt; element is a &lt;code&gt;&lt;a
-   href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
+   href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
    href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;
    element&lt;!-- and the node immediately preceding
   the &lt;code&gt;body&lt;/code&gt; element is a &lt;code&gt;head&lt;/code&gt; element whose
@@ -41636,9 +41688,10 @@
     abort these steps.
 
    &lt;li&gt;Otherwise, &lt;a href=&quot;#navigate&quot;&gt;navigate&lt;/a&gt; to the document again,
-    with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;, but this time skip
-    the &lt;a href=&quot;#encoding0&quot;&gt;encoding sniffing algorithm&lt;/a&gt; and instead just
-    set the encoding to the new encoding and the &lt;a href=&quot;#confidence&quot;
+    with &lt;a href=&quot;#replacement&quot;&gt;replacement enabled&lt;/a&gt;, and using the same
+    &lt;a href=&quot;#source0&quot;&gt;source browsing context&lt;/a&gt;, but this time skip the &lt;a
+    href=&quot;#encoding0&quot;&gt;encoding sniffing algorithm&lt;/a&gt; and instead just set
+    the encoding to the new encoding and the &lt;a href=&quot;#confidence&quot;
     title=concept-encoding-confidence&gt;confidence&lt;/a&gt; to &lt;i&gt;confident&lt;/i&gt;.
     Whenever possible, this should be done without actually contacting the
     network layer (the bytes should be re-parsed from memory), even if, e.g.,
@@ -41892,7 +41945,7 @@
      &lt;code&gt;optgroup&lt;/code&gt;, &lt;code&gt;option&lt;/code&gt;, &lt;code&gt;&lt;a
      href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#param&quot;&gt;param&lt;/a&gt;&lt;/code&gt;,
      &lt;code&gt;plaintext&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#pre&quot;&gt;pre&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;select&lt;/code&gt;,
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;select&lt;/code&gt;,
      &lt;code&gt;spacer&lt;/code&gt;, &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
      href=&quot;#tbody&quot;&gt;tbody&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;textarea&lt;/code&gt;, &lt;code&gt;&lt;a
      href=&quot;#tfoot0&quot;&gt;tfoot&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
@@ -42150,7 +42203,7 @@
    href=&quot;#tree-construction0&quot;&gt;tree construction&lt;/a&gt; stage. The tree
    construction stage can affect the state of the &lt;a href=&quot;#content2&quot;&gt;content
    model flag&lt;/a&gt;, and can insert additional characters into the stream. (For
-   example, the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element can result
+   example, the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element can result
    in scripts executing and using the &lt;a href=&quot;#dynamic2&quot;&gt;dynamic markup
    insertion&lt;/a&gt; APIs to insert characters into the stream being tokenised.)
 
@@ -44882,7 +44935,7 @@
 
     &lt;p&gt;If this process resulted in a collection of character tokens, append a
      single &lt;code&gt;Text&lt;/code&gt; node to the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element node whose contents is the
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element node whose contents is the
      concatenation of all those tokens' characters.&lt;/p&gt;
 
     &lt;p&gt;The tokeniser's &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; will have
@@ -44890,20 +44943,20 @@
 
     &lt;p&gt;If the next token is not an end tag token with the tag name &quot;script&quot;,
      then this is a &lt;a href=&quot;#parse1&quot;&gt;parse error&lt;/a&gt;; mark the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as &lt;a href=&quot;#already&quot;&gt;&quot;already
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as &lt;a href=&quot;#already&quot;&gt;&quot;already
      executed&quot;&lt;/a&gt;. Otherwise, the token is the &lt;code&gt;&lt;a
-     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element's end tag, so ignore it.&lt;/p&gt;
+     href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element's end tag, so ignore it.&lt;/p&gt;
 
     &lt;p&gt;If the parser was originally created for the &lt;a
      href=&quot;#html-fragment0&quot;&gt;HTML fragment parsing algorithm&lt;/a&gt;, then mark
-     the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as &lt;a
+     the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element as &lt;a
      href=&quot;#already&quot;&gt;&quot;already executed&quot;&lt;/a&gt;, and skip the rest of the
      processing described for this token (including the part below where &quot;&lt;a
      href=&quot;#the-script&quot; title=&quot;the script that will execute as soon as the
      parser resumes&quot;&gt;scripts that will execute as soon as the parser
      resumes&lt;/a&gt;&quot; are executed). (&lt;a href=&quot;#fragment&quot;&gt;fragment case&lt;/a&gt;)&lt;/p&gt;
 
-    &lt;p class=note&gt;Marking the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+    &lt;p class=note&gt;Marking the &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
      element as &quot;already executed&quot; prevents it from executing when it is
      inserted into the document a few paragraphs below. Thus, scripts missing
      their end tags and scripts that were inserted using &lt;code
@@ -44916,7 +44969,7 @@
      href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Append the new element to the &lt;a href=&quot;#current5&quot;&gt;current node&lt;/a&gt;. &lt;a
-     href=&quot;#running0&quot; title=&quot;running a script&quot;&gt;Special processing occurs when
+     href=&quot;#running&quot; title=&quot;running a script&quot;&gt;Special processing occurs when
      a &lt;code&gt;script&lt;/code&gt; element is inserted into a document&lt;/a&gt; that might
      cause some script to execute, which might cause &lt;a
      href=&quot;#document.write...&quot; title=dom-document-write-HTML&gt;new characters
@@ -47511,7 +47564,7 @@
   --&gt;,
    then the user agent must act as if those scripts just completed loading,
    following the rules given for that in the &lt;code&gt;&lt;a
-   href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element definition.
+   href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element definition.
 
   &lt;p&gt;Then, if the &lt;a href=&quot;#list-of&quot;&gt;list of scripts that will execute when
    the document has finished parsing&lt;/a&gt; is not empty, and the first item in
@@ -47720,7 +47773,7 @@
        &lt;dd&gt;
         &lt;p&gt;If one of the ancestors of &lt;var title=&quot;&quot;&gt;current node&lt;/var&gt; is a
          &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-         href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;xmp&lt;/code&gt;, &lt;code&gt;&lt;a
+         href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;xmp&lt;/code&gt;, &lt;code&gt;&lt;a
          href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;noembed&lt;/code&gt;,
          &lt;code&gt;noframes&lt;/code&gt;, &lt;code&gt;&lt;a
          href=&quot;#noscript&quot;&gt;noscript&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;plaintext&lt;/code&gt;
@@ -47808,7 +47861,7 @@
    title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot;, then when the result of serialising the element
    is parsed, the comment will be truncated at that point and the rest of the
    comment will be interpreted as markup. More examples would be making a
-   &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element contain a text node
+   &lt;code&gt;&lt;a href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element contain a text node
    with the text string &quot;&lt;code&gt;&lt;/script&gt;&lt;/code&gt;&quot;, or having a &lt;code&gt;&lt;a
    href=&quot;#p&quot;&gt;p&lt;/a&gt;&lt;/code&gt; element that contains a &lt;code&gt;&lt;a
    href=&quot;#ul&quot;&gt;ul&lt;/a&gt;&lt;/code&gt; element (as the &lt;code&gt;&lt;a href=&quot;#ul&quot;&gt;ul&lt;/a&gt;&lt;/code&gt;
@@ -47856,7 +47909,7 @@
       &lt;em&gt;RCDATA&lt;/em&gt;.
 
      &lt;dt&gt;If it is a &lt;code&gt;&lt;a href=&quot;#style1&quot;&gt;style&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a
-      href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;xmp&lt;/code&gt;, &lt;code&gt;&lt;a
+      href=&quot;#script1&quot;&gt;script&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;xmp&lt;/code&gt;, &lt;code&gt;&lt;a
       href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;noembed&lt;/code&gt;, or
       &lt;code&gt;noframes&lt;/code&gt; element
 

Modified: source
===================================================================
--- source	2008-05-16 01:19:05 UTC (rev 1634)
+++ source	2008-05-16 23:28:32 UTC (rev 1635)
@@ -1002,12 +1002,14 @@
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-document-referrer&quot;&gt;&lt;code&gt;referrer&lt;/code&gt;&lt;/dfn&gt; attribute
-  must return either the URI of the page which &lt;span
+  must return either the URI of the &lt;span&gt;active document&lt;/span&gt; of
+  the &lt;span&gt;source browsing context&lt;/span&gt; at the time the navigation
+  was started (that is, the page which &lt;span
   title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt;
-  to the current document (if any), or the empty string if there is no
-  such originating page, or if the UA has been configured not to
-  report referrers in this case, or if the navigation was initiated
-  for a &lt;span&gt;hyperlink&lt;/span&gt; with a &lt;code
+  to the current document), or the empty string if there is no such
+  originating page, or if the UA has been configured not to report
+  referrers in this case, or if the navigation was initiated for a
+  &lt;span&gt;hyperlink&lt;/span&gt; with a &lt;code
   title=&quot;rel-noreferrer&quot;&gt;noreferrer&lt;/code&gt; keyword.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;In the case of HTTP, the &lt;code
@@ -6800,11 +6802,13 @@
        if the user has not canceled the redirect, the user agent &lt;span
        title=&quot;navigate&quot;&gt;navigates&lt;/span&gt; the document's browsing
        context to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;span&gt;replacement
-       enabled&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+       enabled&lt;/span&gt;, and with the document's browsing context as the
+       &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
        &lt;li&gt;&lt;p&gt;Provide the user with an interface that, when selected,
        &lt;span&gt;navigates&lt;/span&gt; a &lt;span&gt;browsing context&lt;/span&gt; to &lt;var
-       title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+       title=&quot;&quot;&gt;url&lt;/var&gt;, with the document's browsing context as the
+       &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
        &lt;li&gt;&lt;p&gt;Do nothing.&lt;/p&gt;&lt;/li&gt;
 
@@ -12180,15 +12184,19 @@
   nested &lt;span&gt;browsing context&lt;/span&gt; is to contain. When the
   browsing context is created, if the attribute is present, the user
   agent must &lt;span&gt;navigate&lt;/span&gt; this browsing context to the given
-  URI, with &lt;span&gt;replacement enabled&lt;/span&gt;. If the user &lt;span
-  title=&quot;navigate&quot;&gt;navigates&lt;/span&gt; away from this page, the
-  &lt;code&gt;iframe&lt;/code&gt;'s corresponding &lt;code&gt;Window&lt;/code&gt; object will
-  reference new &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code
+  URI, with &lt;span&gt;replacement enabled&lt;/span&gt;, and with the
+  &lt;code&gt;iframe&lt;/code&gt; element's document's &lt;span&gt;browsing
+  context&lt;/span&gt; as the &lt;span&gt;source browsing context&lt;/span&gt;. If the
+  user &lt;span title=&quot;navigate&quot;&gt;navigates&lt;/span&gt; away from this page,
+  the &lt;code&gt;iframe&lt;/code&gt;'s corresponding &lt;code&gt;Window&lt;/code&gt; object
+  will reference new &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code
   title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute will not change.&lt;/p&gt;
 
   &lt;p&gt;Whenever the &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute
   is set, the nested &lt;span&gt;browsing context&lt;/span&gt; must be &lt;span
-  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to the given URI.&lt;/p&gt;
+  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to the given URI, with the
+  &lt;code&gt;iframe&lt;/code&gt; element's document's &lt;span&gt;browsing
+  context&lt;/span&gt; as the &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute is not
   set when the element is created, the browsing context will remain at
@@ -12588,8 +12596,11 @@
         nested &lt;span&gt;browsing context&lt;/span&gt;, if it does not already
         have one. The element's nested &lt;span&gt;browsing context&lt;/span&gt;
         must then be &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to the
-        given resource, with &lt;span&gt;replacement enabled&lt;/span&gt;. (The
-        &lt;code title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute of the
+        given resource, with &lt;span&gt;replacement enabled&lt;/span&gt;, and
+        with the &lt;code&gt;object&lt;/code&gt; element's document's
+        &lt;span&gt;browsing context&lt;/span&gt; as the &lt;span&gt;source browsing
+        context&lt;/span&gt;. (The &lt;code
+        title=&quot;attr-object-data&quot;&gt;data&lt;/code&gt; attribute of the
         &lt;code&gt;object&lt;/code&gt; element doesn't get updated if the
         browsing context gets further navigated to other
         locations.)&lt;/p&gt;
@@ -21115,7 +21126,9 @@
       languages&lt;/a&gt; section below).&lt;/p&gt;
 
       &lt;p&gt;Scripts must be executed in the scope of the &lt;span&gt;browsing
-      context&lt;/span&gt; of the element's &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+      context&lt;/span&gt; of the element's &lt;code&gt;Document&lt;/code&gt;. That
+      &lt;span&gt;script execution browsing context&lt;/span&gt; is that browsing
+      context.&lt;/p&gt;
 
       &lt;p class=&quot;note&quot;&gt;The element's attributes' values might have changed
       between when the element was inserted into the document and when the
@@ -25995,7 +26008,10 @@
   enabled&lt;/span&gt;; otherwise, it must not be enabled unless the
   &lt;span&gt;browsing context&lt;/span&gt; was just created as part of the
   &lt;span&gt;the rules for chosing a browsing context given a browsing
-  context name&lt;/span&gt;.&lt;/p&gt;
+  context name&lt;/span&gt;. The navigation must be done with the
+  &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on
+  which the method was invoked as the &lt;span&gt;source browsing
+  context&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The method must return the &lt;code&gt;Window&lt;/code&gt; object of the
   default view of the &lt;span&gt;browsing context&lt;/span&gt; that was
@@ -26455,8 +26471,6 @@
 
   &lt;h3 id=&quot;scripting&quot;&gt;Scripting&lt;/h3&gt;
 
-  &lt;h4&gt;Running executable code&lt;/h4&gt;
-
   &lt;p&gt;Various mechanisms can cause author-provided executable code to
   run in the context of a document. These mechanisms include, but are
   probably not limited to:&lt;/p&gt;
@@ -26493,8 +26507,15 @@
 
   
 
+  &lt;h4&gt;Script execution contexts&lt;/h4&gt;
 
+  &lt;p&gt;The &lt;dfn&gt;script execution browsing context&lt;/dfn&gt; of a script is
+  defined when that script is created. It is typically the
+  &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object that
+  is being used as the script's dereference context..&lt;/p&gt;
 
+
+
   &lt;h4&gt;Security exceptions&lt;/h4&gt;
 
   &lt;p class=&quot;big-issue&quot;&gt;Define &lt;dfn&gt;security exception&lt;/dfn&gt;.&lt;/p&gt;
@@ -26518,16 +26539,20 @@
   and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has
   the &lt;span&gt;same origin&lt;/span&gt; as the script given by that URI, the
   dereference context must be the &lt;span&gt;browsing context&lt;/span&gt; being
-  navigated.&lt;/p&gt;
+  navigated. The &lt;span&gt;script execution browsing context&lt;/span&gt; in
+  that case is that same &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!-- (redundant with next paragraph)
   &lt;p&gt;When a browsing context is &lt;span
   title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
   and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has a
   an &lt;span&gt;origin&lt;/span&gt; that is &lt;em&gt;not&lt;/em&gt; the &lt;span title=&quot;same
   origin&quot;&gt;same&lt;/span&gt; as that of the script given by the URI, the
   dereference context must be an empty object.&lt;/p&gt;
+--&gt;
 
-  &lt;p&gt;Otherwise, the dereference context must be an empty object.&lt;/p&gt;
+  &lt;p&gt;Otherwise, the dereference context must be an empty object, and
+  there is no &lt;span&gt;script execution browsing context&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should
   be evaluated when the resource for that URI is needed, unless
@@ -26630,6 +26655,10 @@
   for more details on activation objects. &lt;a
   href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;The &lt;span&gt;script execution browsing context&lt;/span&gt; of the event
+  handler must be the &lt;span&gt;browsing context&lt;/span&gt; at the end of the
+  scope chain.&lt;/p&gt;
+
   &lt;p class=&quot;issue&quot;&gt;How do we allow non-JS event handlers?&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set the
@@ -27239,7 +27268,10 @@
    &lt;li&gt;
 
     &lt;p&gt;&lt;span&gt;Navigate&lt;/span&gt; the new browsing context to &lt;var
-    title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;span&gt;replacement enabled&lt;/span&gt;.&lt;/p&gt;
+    title=&quot;&quot;&gt;url&lt;/var&gt;, with &lt;span&gt;replacement enabled&lt;/span&gt;, and
+    with the &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt;
+    object on which the method was invoked as the &lt;span&gt;source
+    browsing context&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -29517,6 +29549,13 @@
   specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with &lt;span&gt;replacement
   enabled&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;Navigation for the &lt;code
+  title=&quot;dom-location-assign&quot;&gt;assign()&lt;/code&gt; and &lt;code
+  title=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; methods must be done
+  with the &lt;span&gt;script execution browsing context&lt;/span&gt; of the
+  script that called the method as the &lt;span&gt;source browsing
+  context&lt;/span&gt;.&lt;/p&gt;
+
   &lt;p&gt;Relative &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; arguments for &lt;code
   title=&quot;dom-location-assign&quot;&gt;assign()&lt;/code&gt; and &lt;code
   title=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; must be resolved
@@ -29621,15 +29660,20 @@
   &lt;h4&gt;Navigating across documents&lt;/h4&gt;
 
   &lt;p&gt;Certain actions cause the &lt;span&gt;browsing context&lt;/span&gt; to
-  &lt;dfn&gt;navigate&lt;/dfn&gt;. For example, &lt;span title=&quot;following
+  &lt;dfn&gt;navigate&lt;/dfn&gt;. Navigation always involves a &lt;dfn&gt;source
+  browsing context&lt;/dfn&gt;, which is the browsing context which was
+  responsible for starting the navigation.&lt;/p&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For example, &lt;span title=&quot;following
   hyperlinks&quot;&gt;following a hyperlink&lt;/span&gt;, &lt;span title=&quot;&quot;&gt;form
   submission&lt;/span&gt;, and the &lt;code
   title=&quot;dom-open&quot;&gt;window.open()&lt;/code&gt; and &lt;code
   title=&quot;dom-location-assign&quot;&gt;location.assign()&lt;/code&gt; methods can all
-  cause a browsing context to navigate. A user agent may also provide
-  various ways for the user to explicitly cause a browsing context to
-  navigate.&lt;/p&gt;
+  cause a browsing context to navigate.&lt;/p&gt;
 
+  &lt;p&gt;A user agent may also provide various ways for the user to
+  explicitly cause a browsing context to navigate.&lt;/p&gt;
+
   &lt;p&gt;When a browsing context is navigated, the user agent must run the
   following steps:&lt;/p&gt;
 
@@ -30230,7 +30274,9 @@
    &quot;&lt;span&gt;navigate&lt;/span&gt;&quot; algorithm reinvokes this &quot;traverse&quot;
    algorithm to complete the traversal, at which point there
    &lt;em&gt;is&lt;/em&gt; a &lt;code&gt;Document&lt;/code&gt; object and so this step gets
-   skipped.&lt;/p&gt;&lt;/li&gt;
+   skipped. The navigation must be done using the same &lt;span&gt;source
+   browsing context&lt;/span&gt; as was used the first time this entry was
+   created.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If appropriate, update the &lt;span&gt;current entry&lt;/span&gt; in the
    &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt; object's
@@ -32359,7 +32405,7 @@
 
   &lt;p&gt;When a user &lt;em&gt;follows a hyperlink&lt;/em&gt;, the user agent must
   &lt;span&gt;navigate&lt;/span&gt; a &lt;span&gt;browsing context&lt;/span&gt; to the URI of
-  the hyperlink.
+  the hyperlink.&lt;/p&gt;
 
   &lt;p&gt;The URI of the hyperlink is URI given by resolving the &lt;code
   title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute of that hyperlink
@@ -32407,6 +32453,10 @@
   same browsing context as the one which the hyperlink element itself
   is in.&lt;/p&gt;
 
+  &lt;p&gt;The navigation must be done with the &lt;span&gt;browsing
+  context&lt;/span&gt; that contains the &lt;code&gt;Document&lt;/code&gt; object with
+  which the hyperlink's element in question is associated as the
+  &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;
 
 
   &lt;h5&gt;Hyperlink auditing&lt;/h5&gt;
@@ -39294,9 +39344,10 @@
    &lt;i&gt;confident&lt;/i&gt;, and abort these steps.&lt;/li&gt;
 
    &lt;li&gt;Otherwise, &lt;span&gt;navigate&lt;/span&gt; to the document again, with
-   &lt;span&gt;replacement enabled&lt;/span&gt;, but this time skip the
-   &lt;span&gt;encoding sniffing algorithm&lt;/span&gt; and instead just set the
-   encoding to the new encoding and the &lt;span
+   &lt;span&gt;replacement enabled&lt;/span&gt;, and using the same &lt;span&gt;source
+   browsing context&lt;/span&gt;, but this time skip the &lt;span&gt;encoding
+   sniffing algorithm&lt;/span&gt; and instead just set the encoding to the
+   new encoding and the &lt;span
    title=&quot;concept-encoding-confidence&quot;&gt;confidence&lt;/span&gt; to
    &lt;i&gt;confident&lt;/i&gt;. Whenever possible, this should be done without
    actually contacting the network layer (the bytes should be


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008533.html">[html5] r1634 - /
</A></li>
	<LI>Next message: <A HREF="008535.html">[html5] r1636 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8534">[ date ]</a>
              <a href="thread.html#8534">[ thread ]</a>
              <a href="subject.html#8534">[ subject ]</a>
              <a href="author.html#8534">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
