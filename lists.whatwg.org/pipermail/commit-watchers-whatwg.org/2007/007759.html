<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r838 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r838%20-%20/&In-Reply-To=%3C20070523015023.71980125E83%40looneymail-a4.g.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007758.html">
   <LINK REL="Next"  HREF="007760.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r838 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r838%20-%20/&In-Reply-To=%3C20070523015023.71980125E83%40looneymail-a4.g.dreamhost.com%3E"
       TITLE="[html5] r838 - /">whatwg at whatwg.org
       </A><BR>
    <I>Tue May 22 18:50:23 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007758.html">[html5] r837 - /
</A></li>
        <LI>Next message: <A HREF="007760.html">[html5] r840 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7759">[ date ]</a>
              <a href="thread.html#7759">[ thread ]</a>
              <a href="subject.html#7759">[ subject ]</a>
              <a href="author.html#7759">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2007-05-22 18:50:21 -0700 (Tue, 22 May 2007)
New Revision: 838

Modified:
   index
   source
Log:
[] (0) By popular request, a SQL database for your enjoyment.

Modified: index
===================================================================
--- index	2007-05-22 21:21:13 UTC (rev 837)
+++ index	2007-05-23 01:50:21 UTC (rev 838)
@@ -22,7 +22,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 22 May 2007&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 23 May 2007&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
     href=&quot;<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&quot;&gt;Join the working group's
@@ -1141,7 +1141,7 @@
       &lt;/ul&gt;
 
      &lt;li&gt;&lt;a href=&quot;#storage&quot;&gt;&lt;span class=secno&gt;4.11. &lt;/span&gt;Client-side
-      session and persistent storage&lt;/a&gt;
+      session and persistent storage of name/value pairs&lt;/a&gt;
       &lt;ul class=toc&gt;
        &lt;li&gt;&lt;a href=&quot;#introduction0&quot;&gt;&lt;span class=secno&gt;4.11.1.
         &lt;/span&gt;Introduction&lt;/a&gt;
@@ -1207,6 +1207,31 @@
           &lt;/span&gt;Implementation risks&lt;/a&gt;
         &lt;/ul&gt;
       &lt;/ul&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#sql&quot;&gt;&lt;span class=secno&gt;4.12. &lt;/span&gt;Client-side database
+      storage&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#introduction1&quot;&gt;&lt;span class=secno&gt;4.12.1.
+        &lt;/span&gt;Introduction&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#executing&quot;&gt;&lt;span class=secno&gt;4.12.2. &lt;/span&gt;Executing
+        SQL statements&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#database&quot;&gt;&lt;span class=secno&gt;4.12.3. &lt;/span&gt;Database
+        query results&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#privacy&quot;&gt;&lt;span class=secno&gt;4.12.4. &lt;/span&gt;Privacy&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#security6&quot;&gt;&lt;span class=secno&gt;4.12.5. &lt;/span&gt;Security&lt;/a&gt;
+        
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#user-agents&quot;&gt;&lt;span class=secno&gt;4.12.5.1. &lt;/span&gt;User
+          agents&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#sql-injection&quot;&gt;&lt;span class=secno&gt;4.12.5.2. &lt;/span&gt;SQL
+          injection&lt;/a&gt;
+        &lt;/ul&gt;
+      &lt;/ul&gt;
     &lt;/ul&gt;
 
    &lt;li&gt;&lt;a href=&quot;#editing&quot;&gt;&lt;span class=secno&gt;5. &lt;/span&gt;Editing&lt;/a&gt;
@@ -1261,7 +1286,7 @@
           selection&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#security6&quot;&gt;&lt;span class=secno&gt;5.3.6. &lt;/span&gt;Security
+       &lt;li&gt;&lt;a href=&quot;#security7&quot;&gt;&lt;span class=secno&gt;5.3.6. &lt;/span&gt;Security
         risks in the drag-and-drop model&lt;/a&gt;
       &lt;/ul&gt;
 
@@ -2396,7 +2421,7 @@
 
   &lt;h4 id=security&gt;&lt;span class=secno&gt;2.1.1. &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;
+  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of an &lt;code&gt;&lt;a
    href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object are accessed by
    scripts whose &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is not the same as the
@@ -2424,7 +2449,7 @@
    current value. On setting, if the new value is an allowed value (as
    defined below), the attribute's value must be changed to the new value. If
    the new value is not an allowed value, then a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; must be raised instead.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; must be raised instead.
 
   &lt;p&gt;A new value is an allowed value for the &lt;code
    title=dom-document-domain&gt;&lt;a href=&quot;#domain&quot;&gt;document.domain&lt;/a&gt;&lt;/code&gt;
@@ -15069,7 +15094,7 @@
    href=&quot;#todataurl&quot;&gt;toDataURL()&lt;/a&gt;&lt;/code&gt; and &lt;code
    title=dom-context-2d-getImageData&gt;&lt;a
    href=&quot;#getimagedata&quot;&gt;getImageData()&lt;/a&gt;&lt;/code&gt; methods should raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; if the canvas has ever had an
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; if the canvas has ever had an
    image painted on it whose &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is different from
    that of the script calling the method.
 
@@ -18827,7 +18852,7 @@
 
      &lt;dt&gt;Otherwise
 
-     &lt;dd&gt;The user agent must immediately &lt;a href=&quot;#executing&quot;
+     &lt;dd&gt;The user agent must immediately &lt;a href=&quot;#executing0&quot;
       title=&quot;executing a script block&quot;&gt;execute the script&lt;/a&gt;, even if other
       scripts are already executing.
     &lt;/dl&gt;
@@ -18851,7 +18876,7 @@
        do nothing yet. Stop going through these steps.&lt;/p&gt;
 
      &lt;li&gt;
-      &lt;p&gt;Otherwise, &lt;a href=&quot;#executing&quot; title=&quot;executing a script
+      &lt;p&gt;Otherwise, &lt;a href=&quot;#executing0&quot; title=&quot;executing a script
        block&quot;&gt;execute the script&lt;/a&gt; (that is, the script associated with the
        first element in the list).&lt;/p&gt;
 
@@ -18875,7 +18900,7 @@
        yet. Stop going through these steps.&lt;/p&gt;
 
      &lt;li&gt;
-      &lt;p&gt;&lt;a href=&quot;#executing&quot; title=&quot;executing a script block&quot;&gt;Execute the
+      &lt;p&gt;&lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;Execute the
        script&lt;/a&gt; (the script associated with the first element in the list).&lt;/p&gt;
 
      &lt;li&gt;
@@ -18896,7 +18921,7 @@
    &lt;dd&gt;
     &lt;ol&gt;
      &lt;li&gt;
-      &lt;p&gt;&lt;a href=&quot;#executing&quot; title=&quot;executing a script block&quot;&gt;Execute the
+      &lt;p&gt;&lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;Execute the
        script&lt;/a&gt;.&lt;/p&gt;
 
      &lt;li&gt;
@@ -18914,7 +18939,7 @@
   &lt;p&gt;The download of an external script must &lt;a href=&quot;#delays&quot;&gt;delay the
    &lt;code title=event-load&gt;load&lt;/code&gt; event&lt;/a&gt;.
 
-  &lt;p&gt;&lt;dfn id=executing title=&quot;executing a script block&quot;&gt;Executing a script
+  &lt;p&gt;&lt;dfn id=executing0 title=&quot;executing a script block&quot;&gt;Executing a script
    block&lt;/dfn&gt;: If the load resulted in an error (for example a DNS error, or
    an HTTP 404 error), then executing the script must just consist of &lt;a
    href=&quot;#firing5&quot; title=&quot;fire an error event&quot;&gt;firing an &lt;code
@@ -22730,6 +22755,7 @@
   readonly attribute &lt;a href=&quot;#clientinformation&quot;&gt;ClientInformation&lt;/a&gt; &lt;a href=&quot;#navigator&quot; title=dom-navigator&gt;navigator&lt;/a&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
   readonly attribute &lt;a href=&quot;#storage2&quot;&gt;Storage&lt;/a&gt; &lt;a href=&quot;#sessionstorage&quot; title=dom-sessionStorage&gt;sessionStorage&lt;/a&gt;;
   readonly attribute &lt;a href=&quot;#storagelist&quot;&gt;StorageList&lt;/a&gt; &lt;a href=&quot;#globalstorage&quot; title=dom-globalStorage&gt;globalStorage&lt;/a&gt;;
+  &lt;a href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt; &lt;a href=&quot;#executesql&quot; title=dom-executeSql&gt;executeSql&lt;/a&gt;(in DOMString sqlStatement, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;);
 
   // modal user prompts
   void &lt;a href=&quot;#alert&quot; title=dom-alert&gt;alert&lt;/a&gt;(in DOMString message);
@@ -22812,7 +22838,7 @@
 
   &lt;h4 id=security1&gt;&lt;span class=secno&gt;4.2.1. &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;
+  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of a &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
    object are accessed by scripts whose &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is not
    the same as the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a
@@ -23401,7 +23427,7 @@
 
   &lt;h5 id=security2&gt;&lt;span class=secno&gt;4.3.4.1. &lt;/span&gt;Security&lt;/h5&gt;
 
-  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;
+  &lt;p&gt;User agents must raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of a &lt;code&gt;&lt;a
    href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; object are accessed by scripts whose
    &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; is not the same as the &lt;code&gt;&lt;a
@@ -25949,7 +25975,7 @@
 
   &lt;h4 id=security3&gt;&lt;span class=secno&gt;4.9.3. &lt;/span&gt;Security exceptions&lt;/h4&gt;
 
-  &lt;p class=big-issue&gt;Define &lt;dfn id=security7&gt;security exception&lt;/dfn&gt;.
+  &lt;p class=big-issue&gt;Define &lt;dfn id=security8&gt;security exception&lt;/dfn&gt;.
 
   &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;4.9.4. &lt;/span&gt;&lt;dfn
    id=the-javascript title=&quot;javascript protocol&quot;&gt;The &lt;code
@@ -26728,7 +26754,7 @@
      the user what the site in question is.&lt;/p&gt;
   &lt;/dl&gt;
 
-  &lt;p&gt;User agents should raise &lt;a href=&quot;#security7&quot; title=&quot;security
+  &lt;p&gt;User agents should raise &lt;a href=&quot;#security8&quot; title=&quot;security
    exception&quot;&gt;security exceptions&lt;/a&gt; if the methods are called with &lt;var
    title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA
    deems to be &quot;privileged&quot;. For example, a site attempting to register a
@@ -26918,8 +26944,7 @@
    protocols.
 
   &lt;h3 id=storage&gt;&lt;span class=secno&gt;4.11. &lt;/span&gt;Client-side session and
-   persistent storage&lt;/h3&gt;
-  &lt;!-- local storage --&gt;
+   persistent storage of name/value pairs&lt;/h3&gt;
 
   &lt;h4 id=introduction0&gt;&lt;span class=secno&gt;4.11.1. &lt;/span&gt;Introduction&lt;/h4&gt;
 
@@ -27121,7 +27146,7 @@
    objects referring to this key/value pair will return the value given in
    the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; argument. If it is &lt;em&gt;not&lt;/em&gt;
    &lt;span&gt;accessible&lt;/span&gt;, the method must raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.
 
   &lt;p&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a
    href=&quot;#setitem&quot;&gt;setItem()&lt;/a&gt;&lt;/code&gt; method is successfully invoked (i.e.
@@ -27143,7 +27168,7 @@
    with the object, if it exists and is &lt;span&gt;accessible&lt;/span&gt;. If no item
    with that key exists, the method must do nothing. If an item with that key
    exists but is not &lt;span&gt;accessible&lt;/span&gt;, the method must raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.
 
   &lt;p&gt;The &lt;code title=dom-Storage-setItem&gt;&lt;a
    href=&quot;#setitem&quot;&gt;setItem()&lt;/a&gt;&lt;/code&gt; and &lt;code
@@ -27296,7 +27321,7 @@
    href=&quot;#setitem&quot;&gt;setItem()&lt;/a&gt;&lt;/code&gt; method is called on a &lt;code&gt;&lt;a
    href=&quot;#storage2&quot;&gt;Storage&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; that is
    associated with a session storage area, then, if the method does not raise
-   a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;, in every &lt;code&gt;&lt;a
+   a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;, in every &lt;code&gt;&lt;a
    href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a
    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;code
    title=dom-sessionStorage&gt;&lt;a
@@ -27387,7 +27412,7 @@
   &lt;p&gt;If the script's origin has no domain part, e.g. if only the server's IP
    address is known, and the &lt;a href=&quot;#normalised0&quot;&gt;normalised requested
    domain&lt;/a&gt; is not the empty string, then the user agent must raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.
 
   &lt;p class=note&gt;If the &lt;a href=&quot;#normalised0&quot;&gt;normalised requested domain&lt;/a&gt;
    is the empty string, then the rest of this algorithm can be skipped. This
@@ -27418,7 +27443,7 @@
 
   &lt;p&gt;If the two arrays are not component-for-component identical in literal
    string comparisons, then the user agent must then raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.
 
   &lt;p&gt;Otherwise, the user agent must check to see if it has allocated global
    storage area for the &lt;a href=&quot;#normalised0&quot;&gt;normalised requested
@@ -27457,7 +27482,7 @@
      href=&quot;#storagelist&quot;&gt;StorageList&lt;/a&gt;&lt;/code&gt; object's &lt;code
      title=dom-Storagelist-namedItem&gt;&lt;a
      href=&quot;#nameditem2&quot;&gt;namedItem()&lt;/a&gt;&lt;/code&gt; method would not raise a &lt;a
-     href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; according to the rules above if
+     href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; according to the rules above if
      it was invoked with the domain &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;.
    &lt;/ul&gt;
 
@@ -27887,6 +27912,188 @@
    list of &quot;&lt;a href=&quot;#public0&quot; title=&quot;public storage area&quot;&gt;public&lt;/a&gt;&quot;
    domains, and apply the restrictions described above.
 
+  &lt;h3 id=sql&gt;&lt;span class=secno&gt;4.12. &lt;/span&gt;Client-side database storage&lt;/h3&gt;
+
+  &lt;h4 id=introduction1&gt;&lt;span class=secno&gt;4.12.1. &lt;/span&gt;Introduction&lt;/h4&gt;
+
+  &lt;p class=big-issue&gt;...
+
+  &lt;h4 id=executing&gt;&lt;span class=secno&gt;4.12.2. &lt;/span&gt;Executing SQL statements&lt;/h4&gt;
+
+  &lt;p&gt;Each &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; must have an associated database
+   unique to that origin. An author can interact with the database using the
+   &lt;code title=dom-executeSql&gt;&lt;a href=&quot;#executesql&quot;&gt;executeSql()&lt;/a&gt;&lt;/code&gt;
+   method.
+
+  &lt;p&gt;When the &lt;dfn id=executesql title=dom-executeSql&gt;&lt;code&gt;executeSql(&lt;var
+   title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;, &lt;var
+   title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the user
+   agent must first interpret the first argument to the method (&lt;var
+   title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;) as an SQL statement, replacing any &lt;code
+   title=&quot;&quot;&gt;?&lt;/code&gt; placeholders in the statement with the values given in
+   the subsequent arguments (&lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;), and must then
+   evaluate the statement as an SQL statement in the context of the database
+   associated with the &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; of the &lt;a
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   context&lt;/a&gt; of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object on
+   which the method was called. &lt;a href=&quot;#refsSQL&quot;&gt;[SQL]&lt;/a&gt;
+
+  &lt;p&gt;If the &lt;code title=dom-executeSql&gt;&lt;a
+   href=&quot;#executesql&quot;&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method is called with a
+   different number of arguments after the statement than there are
+   placeholder &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; characters in the statement, then the
+   method must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception.
+
+  &lt;p&gt;Otherwise, the method must return a &lt;code&gt;&lt;a
+   href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; object representing the result of
+   the operation.
+
+  &lt;p&gt;The user agent must act as if the database was hosted in an otherwise
+   completely empty environment with no resources. For example, attempts to
+   read from or write to the filesystem will fail.
+
+  &lt;p&gt;User agents should limit the total amount of space allowed for each
+   origin, but may prompt the user and extend the limit if a database is
+   reaching its quota. User agents should allow users to see how much space
+   each database is using.
+
+  &lt;p&gt;A mostly arbitrary limit of five megabytes per origin is recommended.
+   Implementation feedback is welcome and will be used to update this
+   suggestion in future.
+
+  &lt;p&gt;SQL inherently supports multiple concurrent connections. Authors should
+   make use of SQL's transaction features if multiple scripts are expected to
+   interact with the same database simultaneously (as could happen if the
+   same page was opened in two different &lt;a href=&quot;#browsing0&quot; title=&quot;browsing
+   context&quot;&gt;browsing contexts&lt;/a&gt;).
+
+  &lt;p class=note&gt;A future version of this specification may define the exact
+   SQL subset required in more detail.
+
+  &lt;h4 id=database&gt;&lt;span class=secno&gt;4.12.3. &lt;/span&gt;Database query results&lt;/h4&gt;
+
+  &lt;p&gt;Calls to the &lt;code title=dom-executeSql&gt;&lt;a
+   href=&quot;#executesql&quot;&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method return &lt;code&gt;&lt;a
+   href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; objects.
+
+  &lt;pre class=idl&gt;interface &lt;dfn id=resultset&gt;ResultSet&lt;/dfn&gt; {
+  // cursor
+  readonly attribute boolean &lt;a href=&quot;#validrow&quot; title=dom-ResultSet-validRow&gt;validRow&lt;/a&gt;;
+  void &lt;a href=&quot;#next0&quot; title=dom-ResultSet-next&gt;next&lt;/a&gt;();
+
+  // current row accessors
+  readonly attribute unsigned int &lt;a href=&quot;#length8&quot; title=dom-ResultSet-length&gt;length&lt;/a&gt;;
+  DOMString &lt;a href=&quot;#getname&quot; title=dom-ResultSet-getName&gt;getName&lt;/a&gt;(in unsigned int field);
+  Object &lt;a href=&quot;#itemfield&quot; title=dom-ResultSet-item&gt;item&lt;/a&gt;(in unsigned int field);
+  Object &lt;a href=&quot;#nameditem3&quot; title=dom-ResultSet-namedItem&gt;namedItem&lt;/a&gt;(in DOMString field);
+
+  // general result accessors
+  readonly attribute int &lt;a href=&quot;#insertid&quot; title=dom-ResultSet-insertId&gt;insertId&lt;/a&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;A &lt;code&gt;&lt;a href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; object has a cursor
+   which visits the results of a SQL statement, in the order returned.
+   Initially, the cursor must point at the first row returned by the
+   statement, if any. Once a row has been visited, it cannot be visited again
+   (the cursor cannot go backwards).
+
+  &lt;p&gt;The &lt;dfn id=validrow
+   title=dom-ResultSet-validRow&gt;&lt;code&gt;validRow&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return return true if the &lt;code&gt;&lt;a href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt;
+   object's cursor is at a row with data. If the cursor has been moved beyond
+   the last row of the results, or if there were no results for the SQL
+   statement in question, then the method must return false.
+
+  &lt;p&gt;The &lt;dfn id=next0 title=dom-ResultSet-next&gt;&lt;code&gt;next()&lt;/code&gt;&lt;/dfn&gt;
+   method must advance the cursor to the next row. If there are no more rows
+   it must advance the cursor past the end of the results, so that &lt;code
+   title=dom-ResultSet-validRow&gt;&lt;a href=&quot;#validrow&quot;&gt;validRow&lt;/a&gt;&lt;/code&gt; will
+   return false.
+
+  &lt;p&gt;Each row of the results consists of a set of fields. Each field has a
+   name and a value. The fields are ordered. The names of the fields, and
+   their order, must be the same for every row in the results.
+
+  &lt;p&gt;The &lt;dfn id=length8 title=dom-ResultSet-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+   attribute must return the number of fields in each row. If the &lt;code&gt;&lt;a
+   href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; object has no results rows (i.e. if
+   the SQL statement executed did not return any results) then the attribute
+   must return zero.
+
+  &lt;p&gt;The &lt;dfn id=getname title=dom-ResultSet-getName&gt;&lt;code&gt;getName(&lt;var
+   title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the name of the
+   field with index &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;.
+
+  &lt;p&gt;The &lt;dfn id=itemfield title=dom-ResultSet-item&gt;&lt;code&gt;item(&lt;var
+   title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the value of the
+   field with index &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;. In the ECMAScript binding, the
+   object's [[Get]] method, when invoked with a numeric argument, must have
+   the same effect as calling the &lt;code title=dom-ResultSet-item&gt;&lt;a
+   href=&quot;#itemfield&quot;&gt;item()&lt;/a&gt;&lt;/code&gt; method.
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; argument of either the &lt;code
+   title=dom-ResultSet-getName&gt;&lt;a href=&quot;#getname&quot;&gt;getName()&lt;/a&gt;&lt;/code&gt; or
+   &lt;code title=dom-ResultSet-item&gt;&lt;a href=&quot;#itemfield&quot;&gt;item()&lt;/a&gt;&lt;/code&gt;
+   methods is ever less than zero or greater than or equal to the number of
+   fields in each row, or if those methods are called when the &lt;code&gt;&lt;a
+   href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; object has no results rows, the
+   methods must instead raise an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception.
+
+  &lt;p&gt;The &lt;dfn id=nameditem3
+   title=dom-ResultSet-namedItem&gt;&lt;code&gt;namedItem(&lt;var
+   title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the value of the
+   field with the name &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;. If there is no field with
+   that name, the method must instead raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt;
+   exception. In the ECMAScript binding, the object's [[Get]] method, when
+   invoked with a non-numeric argument, must have the same effect as calling
+   the &lt;code title=dom-ResultSet-namedItem&gt;&lt;a
+   href=&quot;#nameditem3&quot;&gt;namedItem()&lt;/a&gt;&lt;/code&gt; method.
+
+  &lt;p&gt;The &lt;dfn id=insertid
+   title=dom-ResultSet-insertId&gt;&lt;code&gt;insertId&lt;/code&gt;&lt;/dfn&gt; attribute must
+   return the row ID of the row that the &lt;code&gt;&lt;a
+   href=&quot;#resultset&quot;&gt;ResultSet&lt;/a&gt;&lt;/code&gt; object's SQL statement inserted
+   into the database, if the statement inserted a row. If the statement did
+   not insert a row, then the attribute must instead raise an
+   &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.
+
+  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;4.12.4. &lt;/span&gt;Privacy&lt;/h4&gt;
+
+  &lt;p&gt;In contrast with the &lt;code title=dom-globalStorage&gt;&lt;a
+   href=&quot;#globalstorage&quot;&gt;globalStorage&lt;/a&gt;&lt;/code&gt; feature, which
+   intentionally allows data to be accessed across multiple domains,
+   protocols, and ports (albeit in a controlled fashion), this database
+   feature is limited to scripts running with the same &lt;a
+   href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the database. Thus, it is expected that the
+   privacy implications be equivalent to those already present in allowing
+   scripts to communicate with their originating host.
+
+  &lt;p&gt;User agents are encouraged to treat data stored in databases in the same
+   way as cookies for the purposes of user interfaces, to reduce the risk of
+   using this feature for cookie resurrection.
+
+  &lt;h4 id=security6&gt;&lt;span class=secno&gt;4.12.5. &lt;/span&gt;Security&lt;/h4&gt;
+
+  &lt;h5 id=user-agents&gt;&lt;span class=secno&gt;4.12.5.1. &lt;/span&gt;User agents&lt;/h5&gt;
+
+  &lt;p&gt;User agent implementors are strongly encouraged to audit all their
+   supported SQL statements for security implications. For example, &lt;code
+   title=&quot;&quot;&gt;LOAD DATA INFILE&lt;/code&gt; is likely to pose security risks and
+   there is little reason to support it.
+
+  &lt;p&gt;In general, it is recommended that user agents not support features that
+   control how databases are stored on disk. For example, there is little
+   reason to allow Web authors to control the character encoding used in the
+   disk representation of the data, as all data in ECMAScript is implicitly
+   UTF-16.
+
+  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;4.12.5.2. &lt;/span&gt;SQL injection&lt;/h5&gt;
+
+  &lt;p&gt;Authors are strongly recommended to make use of the &lt;code
+   title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code title=dom-executeSql&gt;&lt;a
+   href=&quot;#executesql&quot;&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method, and to never construct
+   SQL statements on the fly.
+
   &lt;h2 id=editing&gt;&lt;span class=secno&gt;5. &lt;/span&gt;&lt;dfn id=editing0&gt;Editing&lt;/dfn&gt;&lt;/h2&gt;
 
   &lt;p&gt;This section describes various features that allow authors to enable
@@ -29223,7 +29430,7 @@
   &lt;p&gt;If the contents of the selection cannot be represented as text or URIs,
    then the paste operation must not have any effect.
 
-  &lt;h4 id=security6&gt;&lt;span class=secno&gt;5.3.6. &lt;/span&gt;Security risks in the
+  &lt;h4 id=security7&gt;&lt;span class=secno&gt;5.3.6. &lt;/span&gt;Security risks in the
    drag-and-drop model&lt;/h4&gt;
 
   &lt;p&gt;User agents must not make the data added to the &lt;code&gt;&lt;a
@@ -29327,7 +29534,7 @@
   void &lt;a href=&quot;#clearundo&quot; title=dom-UndoManager-clearUndo&gt;clearUndo&lt;/a&gt;();
   void &lt;a href=&quot;#clearredo&quot; title=dom-UndoManager-clearRedo&gt;clearRedo&lt;/a&gt;();
   DOMObject &lt;a href=&quot;#itemn&quot; title=dom-UndoManager-item&gt;item&lt;/a&gt;(in unsigned long index);
-  readonly attribute unsigned long &lt;a href=&quot;#length8&quot; title=dom-UndoManager-length&gt;length&lt;/a&gt;;
+  readonly attribute unsigned long &lt;a href=&quot;#length9&quot; title=dom-UndoManager-length&gt;length&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=&quot;#position0&quot; title=dom-UndoManager-position&gt;position&lt;/a&gt;;
 };&lt;/pre&gt;
 
@@ -29352,7 +29559,7 @@
    entries are absent from the &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction
    history&lt;/a&gt;.
 
-  &lt;p&gt;The &lt;dfn id=length8
+  &lt;p&gt;The &lt;dfn id=length9
    title=dom-UndoManager-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; attribute must
    return the number of &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entries in the
    &lt;a href=&quot;#undo-transaction&quot;&gt;undo transaction history&lt;/a&gt;.
@@ -29376,7 +29583,7 @@
    nearest to the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, on the &quot;redo&quot; side.
    If there are no &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entries on the
    &quot;redo&quot; side, then the attribute must return the same as the &lt;code
-   title=dom-UndoManager-length&gt;&lt;a href=&quot;#length8&quot;&gt;length&lt;/a&gt;&lt;/code&gt;
+   title=dom-UndoManager-length&gt;&lt;a href=&quot;#length9&quot;&gt;length&lt;/a&gt;&lt;/code&gt;
    attribute. If there are no &lt;a href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entries
    on the &quot;undo&quot; side of the &lt;a href=&quot;#current3&quot;&gt;undo position&lt;/a&gt;, the &lt;code
    title=dom-UndoManager-position&gt;&lt;a href=&quot;#position0&quot;&gt;position&lt;/a&gt;&lt;/code&gt;
@@ -29423,7 +29630,7 @@
    href=&quot;#undo-object&quot;&gt;undo object&lt;/a&gt; entry with the specified &lt;var
    title=&quot;&quot;&gt;index&lt;/var&gt;. If the index is less than zero or greater than or
    equal to &lt;code title=dom-UndoManager-length&gt;&lt;a
-   href=&quot;#length8&quot;&gt;length&lt;/a&gt;&lt;/code&gt; then the method must raise an
+   href=&quot;#length9&quot;&gt;length&lt;/a&gt;&lt;/code&gt; then the method must raise an
    &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception. &lt;a href=&quot;#dom-changes&quot;&gt;DOM
    changes&lt;/a&gt; entries are unaffected by this method.
 
@@ -30957,7 +31164,7 @@
 
   &lt;p&gt;First, if the domain part of the script's &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt;
    is not a host name (e.g. it is an IP address) then the UA must raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;. &lt;span class=issue&gt;We currently
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;. &lt;span class=issue&gt;We currently
    don't allow connections to be set up back to an originating IP address,
    but we could, if the subdomain is the empty string.&lt;/span&gt;
 
@@ -30977,15 +31184,15 @@
     65535,
   &lt;/ul&gt;
 
-  &lt;p&gt;...then the UA must raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;...then the UA must raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.&lt;/p&gt;
   &lt;!-- XXX we should have our own port for this too, e.g. 980 --&gt;
 
   &lt;p&gt;Otherwise, the user agent must verify that the &lt;a href=&quot;#the-string&quot;&gt;the
    string representing the script's domain in IDNA format&lt;/a&gt; can be obtained
    without errors. If it cannot, then the user agent must raise a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt;.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;.
 
-  &lt;p&gt;The user agent may also raise a &lt;a href=&quot;#security7&quot;&gt;security
+  &lt;p&gt;The user agent may also raise a &lt;a href=&quot;#security8&quot;&gt;security
    exception&lt;/a&gt; at this time if, for some reason, permission to create a
    direct TCP connection to the relevant host is denied. Reasons could
    include the UA being instructed by the user to not allow direct
@@ -31047,7 +31254,7 @@
    href=&quot;#network1&quot;&gt;network&lt;/a&gt;&lt;/code&gt; attribute of the object must be set to
    &lt;a href=&quot;#the-string&quot;&gt;the string representing the script's domain in IDNA
    format&lt;/a&gt;. If this string cannot be obtained, then the user agent must
-   raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; exception when the
+   raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; exception when the
    constructor is called.
 
   &lt;p&gt;The &lt;code title=dom-Connection-peer&gt;&lt;a href=&quot;#peer&quot;&gt;peer&lt;/a&gt;&lt;/code&gt;
@@ -31055,7 +31262,7 @@
 
   &lt;p&gt;The object must then be returned, unless, for some reason, permission to
    broadcast on the local network is to be denied. In the latter case, a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; must be raised instead. User
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; must be raised instead. User
    agents may deny such permission for any reason, for example a user
    preference.
 
@@ -31186,7 +31393,7 @@
    href=&quot;#network1&quot;&gt;network&lt;/a&gt;&lt;/code&gt; attribute of the object must be set to
    &lt;a href=&quot;#the-string&quot;&gt;the string representing the script's domain in IDNA
    format&lt;/a&gt;. If this string cannot be obtained, then the user agent must
-   raise a &lt;a href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; exception when the
+   raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; exception when the
    constructor is called.
 
   &lt;p&gt;The &lt;code title=dom-Connection-peer&gt;&lt;a href=&quot;#peer&quot;&gt;peer&lt;/a&gt;&lt;/code&gt;
@@ -31195,7 +31402,7 @@
   &lt;p&gt;The object must then be returned, unless, for some reason, permission to
    establish peer-to-peer connections is generally disallowed, for example
    due to administrator settings. In the latter case, a &lt;a
-   href=&quot;#security7&quot;&gt;security exception&lt;/a&gt; must be raised instead.
+   href=&quot;#security8&quot;&gt;security exception&lt;/a&gt; must be raised instead.
 
   &lt;p&gt;The user agent must then, typically while the script resumes execution,
    find a remote host to establish a connection to. To do this it must start
@@ -32969,7 +33176,7 @@
    will execute as soon as possible&lt;/a&gt; or the first script in the &lt;a
    href=&quot;#list-of0&quot;&gt;list of scripts that will execute asynchronously&lt;/a&gt;, has
    &lt;span&gt;completed loading&lt;/span&gt;&lt;!-- XXX xref --&gt;. If one has, then it must
-   be &lt;a href=&quot;#executing&quot; title=&quot;executing a script block&quot;&gt;executed&lt;/a&gt; and
+   be &lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;executed&lt;/a&gt; and
    removed from its list.
 
   &lt;p&gt;The tokeniser state machine is as follows:
@@ -35015,7 +35222,7 @@
              before the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.
 
            &lt;li&gt;
-            &lt;p&gt;&lt;a href=&quot;#executing&quot; title=&quot;executing a script block&quot;&gt;Execute
+            &lt;p&gt;&lt;a href=&quot;#executing0&quot; title=&quot;executing a script block&quot;&gt;Execute
              the script&lt;/a&gt;.
 
            &lt;li&gt;

Modified: source
===================================================================
--- source	2007-05-22 21:21:13 UTC (rev 837)
+++ source	2007-05-23 01:50:21 UTC (rev 838)
@@ -20435,6 +20435,7 @@
   readonly attribute &lt;span&gt;ClientInformation&lt;/span&gt; &lt;span title=&quot;dom-navigator&quot;&gt;navigator&lt;/span&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
   readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=&quot;dom-sessionStorage&quot;&gt;sessionStorage&lt;/span&gt;;
   readonly attribute &lt;span&gt;StorageList&lt;/span&gt; &lt;span title=&quot;dom-globalStorage&quot;&gt;globalStorage&lt;/span&gt;;
+  &lt;span&gt;ResultSet&lt;/span&gt; &lt;span title=&quot;dom-executeSql&quot;&gt;executeSql&lt;/span&gt;(in DOMString sqlStatement, &lt;var title=&quot;&quot;&gt;arguments...&lt;/var&gt;);
 
   // modal user prompts
   void &lt;span title=&quot;dom-alert&quot;&gt;alert&lt;/span&gt;(in DOMString message);
@@ -24421,7 +24422,7 @@
   of unknown protocols.&lt;/p&gt;
 
 
-  &lt;h3 id=&quot;storage&quot;&gt;Client-side session and persistent storage&lt;/h3&gt; &lt;!-- local storage --&gt;
+  &lt;h3 id=&quot;storage&quot;&gt;Client-side session and persistent storage of name/value pairs&lt;/h3&gt;
 
   &lt;h4&gt;Introduction&lt;/h4&gt;
 
@@ -25421,8 +25422,195 @@
 
 
 
+  &lt;h3 id=&quot;sql&quot;&gt;Client-side database storage&lt;/h3&gt;
 
+  &lt;h4&gt;Introduction&lt;/h4&gt;
 
+  &lt;p class=&quot;big-issue&quot;&gt;...&lt;/p&gt;
+
+  &lt;h4&gt;Executing SQL statements&lt;/h4&gt;
+
+  &lt;p&gt;Each &lt;span&gt;origin&lt;/span&gt; must have an associated database unique
+  to that origin. An author can interact with the database using the
+  &lt;code title=&quot;dom-executeSql&quot;&gt;executeSql()&lt;/code&gt; method.&lt;/p&gt;
+
+  &lt;p&gt;When the &lt;dfn title=&quot;dom-executeSql&quot;&gt;&lt;code&gt;executeSql(&lt;var
+  title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;arguments...&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the
+  user agent must first interpret the first argument to the method
+  (&lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;) as an SQL statement, replacing
+  any &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholders in the statement with the
+  values given in the subsequent arguments (&lt;var
+  title=&quot;&quot;&gt;arguments...&lt;/var&gt;), and must then evaluate the statement
+  as an SQL statement in the context of the database associated with
+  the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of the
+  &lt;span&gt;browsing context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on
+  which the method was called. &lt;a href=&quot;#refsSQL&quot;&gt;[SQL]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;If the &lt;code title=&quot;dom-executeSql&quot;&gt;executeSql()&lt;/code&gt; method is
+  called with a different number of arguments after the statement than
+  there are placeholder &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; characters in the
+  statement, then the method must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt;
+  exception.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, the method must return a &lt;code&gt;ResultSet&lt;/code&gt; object
+  representing the result of the operation.&lt;/p&gt;
+
+  &lt;p&gt;The user agent must act as if the database was hosted in an
+  otherwise completely empty environment with no resources. For
+  example, attempts to read from or write to the filesystem will
+  fail.&lt;/p&gt;
+
+  &lt;p&gt;User agents should limit the total amount of space allowed for
+  each origin, but may prompt the user and extend the limit if a
+  database is reaching its quota. User agents should allow users to
+  see how much space each database is using.&lt;/p&gt;
+
+  &lt;p&gt;A mostly arbitrary limit of five megabytes per origin is
+  recommended. Implementation feedback is welcome and will be used to
+  update this suggestion in future.&lt;/p&gt;
+
+  &lt;p&gt;SQL inherently supports multiple concurrent connections. Authors
+  should make use of SQL's transaction features if multiple scripts
+  are expected to interact with the same database simultaneously (as
+  could happen if the same page was opened in two different &lt;span
+  title=&quot;browsing context&quot;&gt;browsing contexts&lt;/span&gt;).&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;A future version of this specification may define
+  the exact SQL subset required in more detail.&lt;/p&gt;
+
+
+  &lt;h4&gt;Database query results&lt;/h4&gt;
+
+  &lt;p&gt;Calls to the &lt;code title=&quot;dom-executeSql&quot;&gt;executeSql()&lt;/code&gt;
+  method return &lt;code&gt;ResultSet&lt;/code&gt; objects.&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ResultSet&lt;/dfn&gt; {
+  // cursor
+  readonly attribute boolean &lt;span title=&quot;dom-ResultSet-validRow&quot;&gt;validRow&lt;/span&gt;;
+  void &lt;span title=&quot;dom-ResultSet-next&quot;&gt;next&lt;/span&gt;();
+
+  // current row accessors
+  readonly attribute unsigned int &lt;span title=&quot;dom-ResultSet-length&quot;&gt;length&lt;/span&gt;;
+  DOMString &lt;span title=&quot;dom-ResultSet-getName&quot;&gt;getName&lt;/span&gt;(in unsigned int field);
+  Object &lt;span title=&quot;dom-ResultSet-item&quot;&gt;item&lt;/span&gt;(in unsigned int field);
+  Object &lt;span title=&quot;dom-ResultSet-namedItem&quot;&gt;namedItem&lt;/span&gt;(in DOMString field);
+
+  // general result accessors
+  readonly attribute int &lt;span title=&quot;dom-ResultSet-insertId&quot;&gt;insertId&lt;/span&gt;;
+};&lt;/pre&gt;
+
+  &lt;p&gt;A &lt;code&gt;ResultSet&lt;/code&gt; object has a cursor which visits the
+  results of a SQL statement, in the order returned. Initially, the
+  cursor must point at the first row returned by the statement, if
+  any. Once a row has been visited, it cannot be visited again (the
+  cursor cannot go backwards).&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-ResultSet-validRow&quot;&gt;&lt;code&gt;validRow&lt;/code&gt;&lt;/dfn&gt; attribute
+  must return return true if the &lt;code&gt;ResultSet&lt;/code&gt; object's
+  cursor is at a row with data. If the cursor has been moved beyond
+  the last row of the results, or if there were no results for the SQL
+  statement in question, then the method must return false.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-ResultSet-next&quot;&gt;&lt;code&gt;next()&lt;/code&gt;&lt;/dfn&gt;
+  method must advance the cursor to the next row. If there are no more
+  rows it must advance the cursor past the end of the results, so that
+  &lt;code title=&quot;dom-ResultSet-validRow&quot;&gt;validRow&lt;/code&gt; will return
+  false.&lt;/p&gt;
+
+
+  &lt;p&gt;Each row of the results consists of a set of fields. Each field
+  has a name and a value. The fields are ordered. The names of the
+  fields, and their order, must be the same for every row in the
+  results.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-ResultSet-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return the number of fields in each row. If the
+  &lt;code&gt;ResultSet&lt;/code&gt; object has no results rows (i.e. if the SQL
+  statement executed did not return any results) then the attribute
+  must return zero.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-ResultSet-getName&quot;&gt;&lt;code&gt;getName(&lt;var
+  title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the name of
+  the field with index &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-ResultSet-item&quot;&gt;&lt;code&gt;item(&lt;var
+  title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the value of
+  the field with index &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;. In the ECMAScript
+  binding, the object's [[Get]] method, when invoked with a numeric
+  argument, must have the same effect as calling the &lt;code
+  title=&quot;dom-ResultSet-item&quot;&gt;item()&lt;/code&gt; method.&lt;/p&gt;
+
+  &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; argument of either the &lt;code
+  title=&quot;dom-ResultSet-getName&quot;&gt;getName()&lt;/code&gt; or &lt;code
+  title=&quot;dom-ResultSet-item&quot;&gt;item()&lt;/code&gt; methods is ever less than
+  zero or greater than or equal to the number of fields in each row,
+  or if those methods are called when the &lt;code&gt;ResultSet&lt;/code&gt;
+  object has no results rows, the methods must instead raise an
+  &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-ResultSet-namedItem&quot;&gt;&lt;code&gt;namedItem(&lt;var
+  title=&quot;&quot;&gt;field&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the value of
+  the field with the name &lt;var title=&quot;&quot;&gt;field&lt;/var&gt;. If there is no
+  field with that name, the method must instead raise a
+  &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception. In the ECMAScript binding, the
+  object's [[Get]] method, when invoked with a non-numeric argument,
+  must have the same effect as calling the &lt;code
+  title=&quot;dom-ResultSet-namedItem&quot;&gt;namedItem()&lt;/code&gt; method.&lt;/p&gt;
+
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-ResultSet-insertId&quot;&gt;&lt;code&gt;insertId&lt;/code&gt;&lt;/dfn&gt; attribute
+  must return the row ID of the row that the &lt;code&gt;ResultSet&lt;/code&gt;
+  object's SQL statement inserted into the database, if the statement
+  inserted a row. If the statement did not insert a row, then the
+  attribute must instead raise an &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt;
+  exception.&lt;/p&gt;
+
+
+  &lt;h4&gt;Privacy&lt;/h4&gt;
+
+  &lt;p&gt;In contrast with the &lt;code
+  title=&quot;dom-globalStorage&quot;&gt;globalStorage&lt;/code&gt; feature, which
+  intentionally allows data to be accessed across multiple domains,
+  protocols, and ports (albeit in a controlled fashion), this database
+  feature is limited to scripts running with the same
+  &lt;span&gt;origin&lt;/span&gt; as the database. Thus, it is expected that the
+  privacy implications be equivalent to those already present in
+  allowing scripts to communicate with their originating host.&lt;/p&gt;
+
+  &lt;p&gt;User agents are encouraged to treat data stored in databases in
+  the same way as cookies for the purposes of user interfaces, to
+  reduce the risk of using this feature for cookie resurrection.&lt;/p&gt;
+
+
+  &lt;h4&gt;Security&lt;/h4&gt;
+
+  &lt;h5&gt;User agents&lt;/h5&gt;
+
+  &lt;p&gt;User agent implementors are strongly encouraged to audit all
+  their supported SQL statements for security implications. For
+  example, &lt;code title=&quot;&quot;&gt;LOAD DATA INFILE&lt;/code&gt; is likely to pose
+  security risks and there is little reason to support it.&lt;/p&gt;
+
+  &lt;p&gt;In general, it is recommended that user agents not support
+  features that control how databases are stored on disk. For example,
+  there is little reason to allow Web authors to control the character
+  encoding used in the disk representation of the data, as all data in
+  ECMAScript is implicitly UTF-16.&lt;/p&gt;
+
+
+  &lt;h5&gt;SQL injection&lt;/h5&gt;
+
+  &lt;p&gt;Authors are strongly recommended to make use of the &lt;code
+  title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code
+  title=&quot;dom-executeSql&quot;&gt;executeSql()&lt;/code&gt; method, and to never
+  construct SQL statements on the fly.&lt;/p&gt;
+
+
+
+
   &lt;h2 id=&quot;editing&quot;&gt;&lt;dfn&gt;Editing&lt;/dfn&gt;&lt;/h2&gt;
 
   &lt;p&gt;This section describes various features that allow authors to


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007758.html">[html5] r837 - /
</A></li>
	<LI>Next message: <A HREF="007760.html">[html5] r840 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7759">[ date ]</a>
              <a href="thread.html#7759">[ thread ]</a>
              <a href="subject.html#7759">[ subject ]</a>
              <a href="author.html#7759">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
