<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r1036 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1036%20-%20/&In-Reply-To=%3C20070925095417.490B038ED2C%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007943.html">
   <LINK REL="Next"  HREF="007945.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r1036 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r1036%20-%20/&In-Reply-To=%3C20070925095417.490B038ED2C%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r1036 - /">whatwg at whatwg.org
       </A><BR>
    <I>Tue Sep 25 02:54:17 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007943.html">[html5] r1035 - /
</A></li>
        <LI>Next message: <A HREF="007945.html">[html5] r1037 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7944">[ date ]</a>
              <a href="thread.html#7944">[ thread ]</a>
              <a href="subject.html#7944">[ subject ]</a>
              <a href="author.html#7944">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2007-09-25 02:54:15 -0700 (Tue, 25 Sep 2007)
New Revision: 1036

Modified:
   index
   source
Log:
[e] (0) Moving stuff around some more trying to find a good way of ordering this stuff.

Modified: index
===================================================================
--- index	2007-09-25 09:22:34 UTC (rev 1035)
+++ index	2007-09-25 09:54:15 UTC (rev 1036)
@@ -980,123 +980,123 @@
         other browsing contexts&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#history&quot;&gt;&lt;span class=secno&gt;4.3. &lt;/span&gt;Session history and
+     &lt;li&gt;&lt;a href=&quot;#scripting&quot;&gt;&lt;span class=secno&gt;4.3. &lt;/span&gt;Scripting&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#running&quot;&gt;&lt;span class=secno&gt;4.3.1. &lt;/span&gt;Running
+        executable code&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#origin&quot;&gt;&lt;span class=secno&gt;4.3.2. &lt;/span&gt;Origin&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#security2&quot;&gt;&lt;span class=secno&gt;4.3.3. &lt;/span&gt;Security
+        exceptions&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#javascript-protocol&quot;&gt;&lt;span class=secno&gt;4.3.4. &lt;/span&gt;The
+        &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#events&quot;&gt;&lt;span class=secno&gt;4.3.5. &lt;/span&gt;Events&lt;/a&gt;
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#event-handler-attributes&quot;&gt;&lt;span class=secno&gt;4.3.5.1.
+          &lt;/span&gt;Event handler attributes&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#event&quot;&gt;&lt;span class=secno&gt;4.3.5.2. &lt;/span&gt;Event
+          firing&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#events0&quot;&gt;&lt;span class=secno&gt;4.3.5.3. &lt;/span&gt;Events and
+          the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#runtime-script-errors&quot;&gt;&lt;span class=secno&gt;4.3.5.4.
+          &lt;/span&gt;Runtime script errors&lt;/a&gt;
+        &lt;/ul&gt;
+      &lt;/ul&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#user-prompts&quot;&gt;&lt;span class=secno&gt;4.4. &lt;/span&gt;User
+      prompts&lt;/a&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#browser&quot;&gt;&lt;span class=secno&gt;4.5. &lt;/span&gt;Browser state&lt;/a&gt;
+      &lt;ul class=toc&gt;
+       &lt;li&gt;&lt;a href=&quot;#offline&quot;&gt;&lt;span class=secno&gt;4.5.1. &lt;/span&gt;Offline Web
+        applications&lt;/a&gt;
+
+       &lt;li&gt;&lt;a href=&quot;#custom-handlers&quot;&gt;&lt;span class=secno&gt;4.5.2. &lt;/span&gt;Custom
+        protocol and content handlers&lt;/a&gt;
+        &lt;ul class=toc&gt;
+         &lt;li&gt;&lt;a href=&quot;#security3&quot;&gt;&lt;span class=secno&gt;4.5.2.1. &lt;/span&gt;Security
+          and privacy&lt;/a&gt;
+
+         &lt;li&gt;&lt;a href=&quot;#sample-handler-impl&quot;&gt;&lt;span class=secno&gt;4.5.2.2.
+          &lt;/span&gt;Sample user interface&lt;/a&gt;
+        &lt;/ul&gt;
+      &lt;/ul&gt;
+
+     &lt;li&gt;&lt;a href=&quot;#history&quot;&gt;&lt;span class=secno&gt;4.6. &lt;/span&gt;Session history and
       navigation&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#the-session&quot;&gt;&lt;span class=secno&gt;4.3.1. &lt;/span&gt;The session
+       &lt;li&gt;&lt;a href=&quot;#the-session&quot;&gt;&lt;span class=secno&gt;4.6.1. &lt;/span&gt;The session
         history of browsing contexts&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-history&quot;&gt;&lt;span class=secno&gt;4.3.2. &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-history&quot;&gt;&lt;span class=secno&gt;4.6.2. &lt;/span&gt;The
         &lt;code&gt;History&lt;/code&gt; interface&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#activating&quot;&gt;&lt;span class=secno&gt;4.3.3. &lt;/span&gt;Activating
+       &lt;li&gt;&lt;a href=&quot;#activating&quot;&gt;&lt;span class=secno&gt;4.6.3. &lt;/span&gt;Activating
         state objects&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#the-location&quot;&gt;&lt;span class=secno&gt;4.3.4. &lt;/span&gt;The
+       &lt;li&gt;&lt;a href=&quot;#the-location&quot;&gt;&lt;span class=secno&gt;4.6.4. &lt;/span&gt;The
         &lt;code&gt;Location&lt;/code&gt; interface&lt;/a&gt;
         &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#security2&quot;&gt;&lt;span class=secno&gt;4.3.4.1.
+         &lt;li&gt;&lt;a href=&quot;#security4&quot;&gt;&lt;span class=secno&gt;4.6.4.1.
           &lt;/span&gt;Security&lt;/a&gt;
         &lt;/ul&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#history-notes&quot;&gt;&lt;span class=secno&gt;4.3.5.
+       &lt;li&gt;&lt;a href=&quot;#history-notes&quot;&gt;&lt;span class=secno&gt;4.6.5.
         &lt;/span&gt;Implementation notes for session history&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;4.4. &lt;/span&gt;Navigating
+     &lt;li&gt;&lt;a href=&quot;#navigating&quot;&gt;&lt;span class=secno&gt;4.7. &lt;/span&gt;Navigating
       across documents&lt;/a&gt;
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;4.4.1. &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-html&quot;&gt;&lt;span class=secno&gt;4.7.1. &lt;/span&gt;Page load
         processing model for HTML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;4.4.2. &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-xml&quot;&gt;&lt;span class=secno&gt;4.7.2. &lt;/span&gt;Page load
         processing model for XML files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;4.4.3. &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-text&quot;&gt;&lt;span class=secno&gt;4.7.3. &lt;/span&gt;Page load
         processing model for text files&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;4.4.4. &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-image&quot;&gt;&lt;span class=secno&gt;4.7.4. &lt;/span&gt;Page load
         processing model for images&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;4.4.5. &lt;/span&gt;Page load
+       &lt;li&gt;&lt;a href=&quot;#read-plugin&quot;&gt;&lt;span class=secno&gt;4.7.5. &lt;/span&gt;Page load
         processing model for content that uses plugins&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#non-DOM-inline-content&quot;&gt;&lt;span class=secno&gt;4.4.6.
+       &lt;li&gt;&lt;a href=&quot;#non-DOM-inline-content&quot;&gt;&lt;span class=secno&gt;4.7.6.
         &lt;/span&gt;Page load processing model for inline content that doesn't
         have a DOM&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;4.4.7.
+       &lt;li&gt;&lt;a href=&quot;#scroll-to-fragid&quot;&gt;&lt;span class=secno&gt;4.7.7.
         &lt;/span&gt;Scrolling to a fragment identifier&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;4.5.
+     &lt;li&gt;&lt;a href=&quot;#content-type-sniffing&quot;&gt;&lt;span class=secno&gt;4.8.
       &lt;/span&gt;Determining the type of a new resource in a browsing context&lt;/a&gt;
       
       &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;4.5.1.
+       &lt;li&gt;&lt;a href=&quot;#content-type0&quot;&gt;&lt;span class=secno&gt;4.8.1.
         &lt;/span&gt;Content-Type sniffing: text or binary&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;4.5.2.
+       &lt;li&gt;&lt;a href=&quot;#content-type1&quot;&gt;&lt;span class=secno&gt;4.8.2.
         &lt;/span&gt;Content-Type sniffing: unknown type&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;4.5.3.
+       &lt;li&gt;&lt;a href=&quot;#content-type2&quot;&gt;&lt;span class=secno&gt;4.8.3.
         &lt;/span&gt;Content-Type sniffing: image&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;4.5.4.
+       &lt;li&gt;&lt;a href=&quot;#content-type3&quot;&gt;&lt;span class=secno&gt;4.8.4.
         &lt;/span&gt;Content-Type sniffing: feed or HTML&lt;/a&gt;
 
-       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;4.5.5.
+       &lt;li&gt;&lt;a href=&quot;#content-type&quot;&gt;&lt;span class=secno&gt;4.8.5.
         &lt;/span&gt;Content-Type metadata&lt;/a&gt;
       &lt;/ul&gt;
 
-     &lt;li&gt;&lt;a href=&quot;#scripting&quot;&gt;&lt;span class=secno&gt;4.6. &lt;/span&gt;Scripting&lt;/a&gt;
-      &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#running&quot;&gt;&lt;span class=secno&gt;4.6.1. &lt;/span&gt;Running
-        executable code&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#origin&quot;&gt;&lt;span class=secno&gt;4.6.2. &lt;/span&gt;Origin&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#security3&quot;&gt;&lt;span class=secno&gt;4.6.3. &lt;/span&gt;Security
-        exceptions&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#javascript-protocol&quot;&gt;&lt;span class=secno&gt;4.6.4. &lt;/span&gt;The
-        &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#events&quot;&gt;&lt;span class=secno&gt;4.6.5. &lt;/span&gt;Events&lt;/a&gt;
-        &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#event-handler-attributes&quot;&gt;&lt;span class=secno&gt;4.6.5.1.
-          &lt;/span&gt;Event handler attributes&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#event&quot;&gt;&lt;span class=secno&gt;4.6.5.2. &lt;/span&gt;Event
-          firing&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#events0&quot;&gt;&lt;span class=secno&gt;4.6.5.3. &lt;/span&gt;Events and
-          the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#runtime-script-errors&quot;&gt;&lt;span class=secno&gt;4.6.5.4.
-          &lt;/span&gt;Runtime script errors&lt;/a&gt;
-        &lt;/ul&gt;
-      &lt;/ul&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#user-prompts&quot;&gt;&lt;span class=secno&gt;4.7. &lt;/span&gt;User
-      prompts&lt;/a&gt;
-
-     &lt;li&gt;&lt;a href=&quot;#browser&quot;&gt;&lt;span class=secno&gt;4.8. &lt;/span&gt;Browser state&lt;/a&gt;
-      &lt;ul class=toc&gt;
-       &lt;li&gt;&lt;a href=&quot;#offline&quot;&gt;&lt;span class=secno&gt;4.8.1. &lt;/span&gt;Offline Web
-        applications&lt;/a&gt;
-
-       &lt;li&gt;&lt;a href=&quot;#custom-handlers&quot;&gt;&lt;span class=secno&gt;4.8.2. &lt;/span&gt;Custom
-        protocol and content handlers&lt;/a&gt;
-        &lt;ul class=toc&gt;
-         &lt;li&gt;&lt;a href=&quot;#security4&quot;&gt;&lt;span class=secno&gt;4.8.2.1. &lt;/span&gt;Security
-          and privacy&lt;/a&gt;
-
-         &lt;li&gt;&lt;a href=&quot;#sample-handler-impl&quot;&gt;&lt;span class=secno&gt;4.8.2.2.
-          &lt;/span&gt;Sample user interface&lt;/a&gt;
-        &lt;/ul&gt;
-      &lt;/ul&gt;
-
      &lt;li&gt;&lt;a href=&quot;#storage&quot;&gt;&lt;span class=secno&gt;4.9. &lt;/span&gt;Client-side session
       and persistent storage of name/value pairs&lt;/a&gt;
       &lt;ul class=toc&gt;
@@ -24601,9 +24601,1163 @@
    browsing contexts&lt;/a&gt; of the &lt;a href=&quot;#active&quot; title=&quot;active
    document&quot;&gt;active&lt;/a&gt; &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;h3 id=history&gt;&lt;span class=secno&gt;4.3. &lt;/span&gt;Session history and navigation&lt;/h3&gt;
+  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;4.3. &lt;/span&gt;Scripting&lt;/h3&gt;
 
-  &lt;h4 id=the-session&gt;&lt;span class=secno&gt;4.3.1. &lt;/span&gt;The session history of
+  &lt;h4 id=running&gt;&lt;span class=secno&gt;4.3.1. &lt;/span&gt;Running executable code&lt;/h4&gt;
+
+  &lt;p&gt;Various mechanisms can cause author-provided executable code to run in
+   the context of a document. These mechanisms include, but are probably not
+   limited to:
+
+  &lt;ul&gt;
+   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
+
+   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a
+    href=&quot;#the-javascript&quot;&gt;javascript:&lt;/a&gt;&lt;/code&gt; URIs (e.g. the &lt;code
+    title=attr-img-src&gt;&lt;a href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute of &lt;code&gt;&lt;a
+    href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt;
+    rule in a CSS &lt;code&gt;&lt;a href=&quot;#style&quot;&gt;style&lt;/a&gt;&lt;/code&gt; element block).
+
+   &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code
+    title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;a href=&quot;#event2&quot;&gt;event
+    handler content attributes&lt;/a&gt;, by &lt;a href=&quot;#event3&quot;&gt;event handler DOM
+    attributes&lt;/a&gt;, or otherwise.
+
+   &lt;li&gt;Processing of technologies like XBL or SVG that have their own
+    scripting features.
+  &lt;/ul&gt;
+
+  &lt;p&gt;User agents may provide a mechanism to enable or disable the execution
+   of author-provided code. When the user agent is configured such that
+   author-provided code does not execute, or if the user agent is implemented
+   so as to never execute author-provided code, it is said that &lt;dfn
+   id=scripting1&gt;scripting is disabled&lt;/dfn&gt;. When author-provided code
+   &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn id=scripting2&gt;scripting is enabled&lt;/dfn&gt;. A
+   user agent with scripting disabled is a &lt;a href=&quot;#non-scripted&quot;
+   title=&quot;User agents with no scripting support&quot;&gt;user agent with no scripting
+   support&lt;/a&gt; for the purposes of conformance.
+
+  &lt;h4 id=origin&gt;&lt;span class=secno&gt;4.3.2. &lt;/span&gt;Origin&lt;/h4&gt;
+  &lt;!-- Hallowed are the Ori --&gt;
+  &lt;!--
+    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=346659">https://bugzilla.mozilla.org/show_bug.cgi?id=346659</A>
+    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=344495">https://bugzilla.mozilla.org/show_bug.cgi?id=344495</A>
+  --&gt;
+
+  &lt;p&gt;Access to certain APIs is granted or denied to scripts based on the &lt;dfn
+   id=origin0&gt;origin&lt;/dfn&gt; of the script and the API being accessed.
+
+  &lt;dl&gt;
+   &lt;dt&gt;If a script is in a &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
+
+   &lt;dd&gt;The origin of the script is the origin of the &lt;code&gt;Document&lt;/code&gt; to
+    which the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element belongs.
+
+   &lt;dt&gt;If a script is a function or other code reference created by another
+    script
+
+   &lt;dd&gt;The origin of the script is the origin of the script that created it.
+
+   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in an attribute
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the element
+    on which the attribute is found.
+
+   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in a style sheet
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; to which the
+    style sheet applies.
+
+   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
+    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+    title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by the user
+    (e.g. by using a &lt;i&gt;bookmarklet&lt;/i&gt;)
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the &lt;a
+    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
+    document&lt;/a&gt;.
+
+   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
+    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+    title=navigate&gt;navigated&lt;/a&gt;, the URI having been declared in markup
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the element
+    (e.g. an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
+    href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; element) that declared the URI.
+
+   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
+    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
+    title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by script
+
+   &lt;dd&gt;The origin is the origin of the script that provided the URI.&lt;/dd&gt;
+   &lt;!-- ... --&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;The origin of scripts thus comes down to finding the origin of
+   &lt;code&gt;Document&lt;/code&gt; objects.
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was served over the
+   network and whose address uses a URI scheme with a server-based naming
+   authority is the tuple consisting of the &lt;scheme&gt;, &lt;host&gt;, and
+   &lt;port&gt; parts of the &lt;code&gt;Document&lt;/code&gt;'s full URI. &lt;a
+   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; &lt;a
+   href=&quot;#refsRFC2732&quot;&gt;[RFC2732]&lt;/a&gt;
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
+   &lt;code&gt;data:&lt;/code&gt; URI found in another &lt;code&gt;Document&lt;/code&gt; or in a
+   script is the origin of the that &lt;code&gt;Document&lt;/code&gt; or script.
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
+   &lt;code&gt;data:&lt;/code&gt; URI from another source is a globally unique identifier
+   assigned when the document is created.
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
+   &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
+   protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; is the same as the origin of
+   that &lt;code&gt;javascript:&lt;/code&gt; URI.
+
+  &lt;p&gt;&lt;dfn id=the-string&gt;The string representing the script's domain in IDNA
+   format&lt;/dfn&gt; is obtained as follows: take the domain part of the script's
+   &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; tuple and apply the IDNA ToASCII algorithm
+   and then the IDNA ToUnicode algorithm to each component of the domain name
+   (with both the AllowUnassigned and UseSTD3ASCIIRules flags set both
+   times). &lt;a href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;
+
+  &lt;p&gt;If ToASCII fails to convert one of the components of the string, e.g.
+   because it is too long or because it contains invalid characters, or if
+   the origin of the script has no domain part, then the string representing
+   the script's domain in IDNA format cannot be obtained. (ToUnicode is
+   defined to never fail.)
+
+  &lt;p class=big-issue&gt;It's been suggested that we should put IP addresses into
+   the origin tuple, to mitigate DNS rebinding attacks. However that would
+   kill multi-homed systems like GMail. Should we do something like have a
+   DNS record say whether or not to include the IP in the origin for a host?
+
+  &lt;h4 id=security2&gt;&lt;span class=secno&gt;4.3.3. &lt;/span&gt;Security exceptions&lt;/h4&gt;
+
+  &lt;p class=big-issue&gt;Define &lt;dfn id=security8&gt;security exception&lt;/dfn&gt;.
+
+  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;4.3.4. &lt;/span&gt;&lt;dfn
+   id=the-javascript title=&quot;javascript protocol&quot;&gt;The &lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must, if
+   evaluated, be evaluated using the in-context evaluation operation defined
+   for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URIs. &lt;a
+   href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
+  &lt;!--
+JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
+       <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
+       <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
+--&gt;
+
+  &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
+   title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has the same
+   &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the URI, the dereference context must be
+   the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; being navigated.
+
+  &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
+   title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
+   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has a
+   &lt;em&gt;different&lt;/em&gt; &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; than the URI, the
+   dereference context must be an empty object.
+
+  &lt;p&gt;Otherwise, the dereference context must the &lt;a
+   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; to
+   which belongs the element for which the URI is being dereferenced, or to
+   which the style sheet for which the URI is being dereferenced applies,
+   whichever is appropriate.
+
+  &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should be
+   evaluated when the resource for that URI is needed, unless &lt;a
+   href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt; or the &lt;code&gt;Document&lt;/code&gt;
+   corresponding to the dereference context (as defined above), if any, has
+   &lt;code title=dom-document-designMode&gt;&lt;a
+   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled.
+
+  &lt;p&gt;If the dereference by-product is void (there is no return value), then
+   the URI must be treated in a manner equivalent to an HTTP resource with an
+   HTTP 204 No Content response.
+
+  &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an HTTP
+   resource with a 200 OK response whose &lt;a href=&quot;#content-type8&quot;
+   title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is &lt;code
+   title=&quot;&quot;&gt;text/html&lt;/code&gt; and whose response body is the dereference
+   by-product, converted to a string value.
+
+  &lt;p class=note&gt;Certain contexts, in particular &lt;code&gt;&lt;a
+   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=&quot;#content-type8&quot;
+   title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.
+
+  &lt;div class=example&gt;
+   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a &lt;code
+    title=attr-img-src&gt;&lt;a href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
+    href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; element would be evaluated in the context of
+    the page as soon as the attribute is set; it would then be sniffed to
+    determine the image type and decoded as an image.&lt;/p&gt;
+
+   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
+    title=attr-a-href&gt;href&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
+    href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was
+    &lt;a href=&quot;#following0&quot; title=&quot;following hyperlinks&quot;&gt;followed&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;p&gt;The &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
+    attribute of an &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element would
+    be evaluated in the context of the &lt;code&gt;&lt;a
+    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=&quot;#browsing0&quot;&gt;browsing
+    context&lt;/a&gt;; once evaluated, its return value (if it was not void) would
+    replace that &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s document, thus
+    changing the variables visible in that &lt;a href=&quot;#browsing0&quot;&gt;browsing
+    context&lt;/a&gt;.&lt;/p&gt;
+  &lt;/div&gt;
+
+  &lt;h4 id=events&gt;&lt;span class=secno&gt;4.3.5. &lt;/span&gt;Events&lt;/h4&gt;
+
+  &lt;p class=big-issue&gt;We need to define how to handle events that are to be
+   fired on a Document that is no longer the active document of its browsing
+   context, and for Documents that have no browsing context. Do the events
+   fire? Do the handlers in that document not fire? Do we just define
+   scripting to be disabled when the document isn't active, with events still
+   running as is? See also the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
+   element section, which says scripts don't run when the document isn't
+   active.
+
+  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;4.3.5.1. &lt;/span&gt;Event
+   handler attributes&lt;/h5&gt;
+
+  &lt;p&gt;&lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; can have &lt;dfn id=event1&gt;event
+   handler attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
+   for the element on which they are specified.
+
+  &lt;p&gt;Each event handler attribute has two parts, an &lt;a href=&quot;#event2&quot;
+   title=&quot;event handler content attributes&quot;&gt;event handler content
+   attribute&lt;/a&gt; and an &lt;a href=&quot;#event3&quot; title=&quot;event handler DOM
+   attributes&quot;&gt;event handler DOM attribute&lt;/a&gt;. Event handler attributes must
+   initially be set to null. When their value changes (through the changing
+   of their event handler content attribute or their event handler DOM
+   attribute), they will either be null, or have an
+   &lt;code&gt;EventListener&lt;/code&gt; object assigned to them.
+
+  &lt;p&gt;Objects other than &lt;code&gt;Element&lt;/code&gt; objects, in particular &lt;code&gt;&lt;a
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;, only have &lt;a href=&quot;#event3&quot; title=&quot;event
+   handler DOM attributes&quot;&gt;event handler DOM attribute&lt;/a&gt; (since they have
+   no content attributes).
+
+  &lt;p&gt;&lt;dfn id=event2&gt;Event handler content attributes&lt;/dfn&gt;, when specified,
+   must contain valid ECMAScript code matching the ECMAScript &lt;code
+   title=&quot;&quot;&gt;FunctionBody&lt;/code&gt; production. &lt;a
+   href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
+
+  &lt;p&gt;When an event handler content attribute is set, its new value must be
+   interpreted as the body of an anonymous function with a single argument
+   called &lt;code&gt;event&lt;/code&gt;, with the new function's scope chain being
+   linked from the activation object of the handler, to the element, to the
+   element's &lt;code&gt;form&lt;/code&gt; element if it is a form control, to the
+   &lt;code&gt;Document&lt;/code&gt; object, to the &lt;a href=&quot;#browsing0&quot;&gt;browsing
+   context&lt;/a&gt; of that &lt;code&gt;Document&lt;/code&gt;. The function's
+   &lt;code&gt;this&lt;/code&gt; parameter must be the &lt;code&gt;Element&lt;/code&gt; object
+   representing the element. The resulting function must then be set as the
+   value of the corresponding event handler attribute, and the new value must
+   be set as the value of the content attribute. If the given function body
+   fails to compile, then the corresponding event handler attribute must be
+   set to null instead (the content attribute must still be updated to the
+   new value, though).
+
+  &lt;p class=note&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3, for more
+   details on activation objects. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
+
+  &lt;p class=issue&gt;How do we allow non-JS event handlers?
+
+  &lt;p&gt;&lt;dfn id=event3&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set
+   the corresponding event handler attribute to their new value, and on
+   getting, must return whatever the current value of the corresponding event
+   handler attribute is (possibly null).
+
+  &lt;p&gt;The following are the event handler attributes that must be supported by
+   all &lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt;, as both content attributes
+   and DOM attributes, and on &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
+   objects, as DOM attributes:
+
+  &lt;dl&gt;
+   &lt;dt&gt;&lt;dfn id=onabort title=handler-onabort&gt;&lt;code&gt;onabort&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever an &lt;code title=event-abort&gt;&lt;a
+     href=&quot;#abort&quot;&gt;abort&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
+     the element.
+   &lt;/dd&gt;
+   &lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforecopy&quot;&gt;&lt;code&gt;onbeforecopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
+   &lt;!-- widely used --&gt;
+   &lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-beforecopy&quot;&gt;beforecopy&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=onbeforeunload
+    title=handler-onbeforeunload&gt;&lt;code&gt;onbeforeunload&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-beforeunload&gt;beforeunload&lt;/code&gt; event is targeted at or
+     bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onblur title=handler-onblur&gt;&lt;code&gt;onblur&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-blur&gt;blur&lt;/code&gt; event is
+     targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onchange title=handler-onchange&gt;&lt;code&gt;onchange&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-change&gt;change&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onclick title=handler-onclick&gt;&lt;code&gt;onclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-click&gt;click&lt;/code&gt; event
+     is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=oncontextmenu
+    title=handler-oncontextmenu&gt;&lt;code&gt;oncontextmenu&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-contextmenu&gt;contextmenu&lt;/code&gt; event is targeted at or
+     bubbles through the element.
+   &lt;/dd&gt;
+   &lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-oncopy&quot;&gt;&lt;code&gt;oncopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
+   &lt;!-- widely used --&gt;
+   &lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-copy&quot;&gt;copy&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=ondblclick
+    title=handler-ondblclick&gt;&lt;code&gt;ondblclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dblclick&gt;dblclick&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondrag title=handler-ondrag&gt;&lt;code&gt;ondrag&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-drag&gt;&lt;a
+     href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through the
+     element.
+
+   &lt;dt&gt;&lt;dfn id=ondragend title=handler-ondragend&gt;&lt;code&gt;ondragend&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragend&gt;&lt;a
+     href=&quot;#dragend&quot;&gt;dragend&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondragenter
+    title=handler-ondragenter&gt;&lt;code&gt;ondragenter&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragenter&gt;&lt;a
+     href=&quot;#dragenter&quot;&gt;dragenter&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondragleave
+    title=handler-ondragleave&gt;&lt;code&gt;ondragleave&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragleave&gt;&lt;a
+     href=&quot;#dragleave&quot;&gt;dragleave&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondragover
+    title=handler-ondragover&gt;&lt;code&gt;ondragover&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragover&gt;&lt;a
+     href=&quot;#dragover&quot;&gt;dragover&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondragstart
+    title=handler-ondragstart&gt;&lt;code&gt;ondragstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragstart&gt;&lt;a
+     href=&quot;#dragstart&quot;&gt;dragstart&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=ondrop title=handler-ondrop&gt;&lt;code&gt;ondrop&lt;/code&gt;&lt;/dfn&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-drop&gt;&lt;a
+     href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through the
+     element.
+
+   &lt;dt&gt;&lt;dfn id=onerror title=handler-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever an &lt;code title=event-error&gt;&lt;a
+     href=&quot;#error1&quot;&gt;error&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
+     the element.&lt;/p&gt;
+
+    &lt;p class=note&gt;The &lt;code title=handler-onerror&gt;&lt;a
+     href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; handler is also used for &lt;a
+     href=&quot;#runtime-script-errors&quot;&gt;reporting script errors&lt;/a&gt;.
+
+   &lt;dt&gt;&lt;dfn id=onfocus title=handler-onfocus&gt;&lt;code&gt;onfocus&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-focus&gt;focus&lt;/code&gt; event
+     is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onkeydown title=handler-onkeydown&gt;&lt;code&gt;onkeydown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keydown&gt;keydown&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onkeypress
+    title=handler-onkeypress&gt;&lt;code&gt;onkeypress&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keypress&gt;keypress&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onkeyup title=handler-onkeyup&gt;&lt;code&gt;onkeyup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event
+     is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onload title=handler-onload&gt;&lt;code&gt;onload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-load&gt;&lt;a
+     href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
+     the element.
+
+   &lt;dt&gt;&lt;dfn id=onmessage title=handler-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- introduced for &lt;event-source&gt; --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-message&gt;&lt;a
+     href=&quot;#message&quot;&gt;message&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmousedown
+    title=handler-onmousedown&gt;&lt;code&gt;onmousedown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-mousedown&gt;mousedown&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmousemove
+    title=handler-onmousemove&gt;&lt;code&gt;onmousemove&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-mousemove&gt;mousemove&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmouseout
+    title=handler-onmouseout&gt;&lt;code&gt;onmouseout&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-mouseout&gt;mouseout&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmouseover
+    title=handler-onmouseover&gt;&lt;code&gt;onmouseover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-mouseover&gt;mouseover&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmouseup title=handler-onmouseup&gt;&lt;code&gt;onmouseup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-mouseup&gt;mouseup&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onmousewheel
+    title=handler-onmousewheel&gt;&lt;code&gt;onmousewheel&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code
+     title=event-mousewheel&gt;mousewheel&lt;/code&gt; event is targeted at or bubbles
+     through the element.
+   &lt;/dd&gt;
+   &lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onpaste&quot;&gt;&lt;code&gt;onpaste&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
+   &lt;!-- widely used --&gt;
+   &lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-paste&quot;&gt;paste&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn id=onresize title=handler-onresize&gt;&lt;code&gt;onresize&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-resize&gt;resize&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+   &lt;/dd&gt;
+   &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn id=onscroll title=handler-onscroll&gt;&lt;code&gt;onscroll&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-scroll&gt;scroll&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+   &lt;/dd&gt;
+   &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn id=onselect title=handler-onselect&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-select&gt;&lt;a
+     href=&quot;#select&quot;&gt;select&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
+     the element.
+   &lt;/dd&gt;
+   &lt;!-- XXX should define when it fires --&gt;
+   &lt;!--XXX
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onselectstart&quot;&gt;&lt;code&gt;onselectstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
+   &lt;!-- widely used --&gt;
+   &lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-selectstart&quot;&gt;selectstart&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+   &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn id=onsubmit title=handler-onsubmit&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever a &lt;code title=event-submit&gt;submit&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+
+   &lt;dt&gt;&lt;dfn id=onunload title=handler-onunload&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;Must be invoked whenever an &lt;code title=event-unload&gt;unload&lt;/code&gt;
+     event is targeted at or bubbles through the element.
+   &lt;/dd&gt;
+   &lt;!-- XXX need to fire this --&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;When an event handler attribute is invoked, its argument must be set to
+   the &lt;code&gt;Event&lt;/code&gt; object of the event in question. If the function
+   returns the exact boolean value false, the event's
+   &lt;code&gt;preventDefault()&lt;/code&gt; method must then invoked. Exception: for
+   historical reasons, for the HTML &lt;code&gt;mouseover&lt;/code&gt; event, the
+   &lt;code&gt;preventDefault()&lt;/code&gt; method must be called when the function
+   returns true instead.&lt;/p&gt;
+  &lt;!-- IE actually uncancels the event if the function returns true --&gt;
+
+  &lt;p&gt;When &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, event handler
+   attributes must do nothing.
+
+  &lt;p&gt;When &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, all event handler
+   attributes on an element, whether set to null or to a function, must be
+   registered as event listeners on the element, as if the &lt;code
+   title=dom-EventTarget-addEventListenerNS&gt;addEventListenerNS()&lt;/code&gt;
+   method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
+   interface had been invoked when the element was created, with the event
+   type (&lt;code title=dom-event-type&gt;type&lt;/code&gt; argument) equal to the type
+   described for the event handler attribute in the list above, the namespace
+   (&lt;code title=dom-event-namespaceURI&gt;namespaceURI&lt;/code&gt; argument) set to
+   null, the listener set to be a target and bubbling phase listener (&lt;code
+   title=dom-event-useCapture&gt;useCapture&lt;/code&gt; argument set to false), the
+   event group set to the default group (&lt;code
+   title=dom-event-evtGroup&gt;evtGroup&lt;/code&gt; argument set to null), and the
+   event listener itself (&lt;code title=dom-event-listener&gt;listener&lt;/code&gt;
+   argument) set to do nothing while the event handler attribute is null, and
+   set to invoke the function associated with the event handler attribute
+   otherwise.
+
+  &lt;h5 id=event&gt;&lt;span class=secno&gt;4.3.5.2. &lt;/span&gt;Event firing&lt;/h5&gt;
+
+  &lt;p class=big-issue&gt;maybe this should be moved higher up (terminology?
+   conformance? DOM?) Also, the whole terminology thing should be changed so
+   that we don't define any specific events here, we only define 'simple
+   event', 'progress event', 'mouse event', 'key event', and the like, and
+   have the actual dispatch use those generic terms when firing events.
+
+  &lt;p&gt;Certain operations and methods are defined as firing events on elements.
+   For example, the &lt;code title=dom-click&gt;&lt;a href=&quot;#click&quot;&gt;click()&lt;/a&gt;&lt;/code&gt;
+   method on the &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
+   interface is defined as firing a &lt;code title=event-click&gt;click&lt;/code&gt;
+   event on the element. &lt;a href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;
+
+  &lt;p&gt;&lt;dfn id=firing title=&quot;fire a click event&quot;&gt;Firing a &lt;code
+   title=event-click&gt;click&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
+   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click</A>&quot;&gt;&lt;code&gt;click&lt;/code&gt;&lt;/a&gt;
+   event with no namespace, which bubbles and is cancelable, and which uses
+   the &lt;code&gt;MouseEvent&lt;/code&gt; interface, must be dispatched at the given
+   element. The event object must have its &lt;code title=&quot;&quot;&gt;screenX&lt;/code&gt;,
+   &lt;code title=&quot;&quot;&gt;screenY&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;clientX&lt;/code&gt;, &lt;code
+   title=&quot;&quot;&gt;clientY&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;button&lt;/code&gt; attributes set
+   to 0, its &lt;code title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;,
+   &lt;code title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes
+   set according to the current state of the key input device, if any (false
+   for any keys that are not available), its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
+   attribute set to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute
+   set to null. The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the
+   object must return values appropriately describing the state of the key
+   input device at the time the event is created.
+
+  &lt;p&gt;&lt;dfn id=firing0 title=&quot;fire a change event&quot;&gt;Firing a &lt;code
+   title=event-change&gt;change&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
+   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change</A>&quot;&gt;&lt;code&gt;change&lt;/code&gt;&lt;/a&gt;
+   event with no namespace, which bubbles but is not cancelable, and which
+   uses the &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at the given
+   element. The event object must have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
+   attribute set to 0.
+
+  &lt;p&gt;&lt;dfn id=firing1 title=&quot;fire a contextmenu event&quot;&gt;Firing a &lt;code
+   title=event-contextmenu&gt;contextmenu&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;code
+   title=event-contextmenu&gt;contextmenu&lt;/code&gt; event with no namespace, which
+   bubbles and is cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt;
+   interface, must be dispatched at the given element. The event object must
+   have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 0.
+
+  &lt;p&gt;&lt;dfn id=firing2 title=&quot;fire a simple event&quot;&gt;Firing a simple event called
+   &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means that an event with the name &lt;var
+   title=&quot;&quot;&gt;e&lt;/var&gt;, with no namespace, which does not bubble but is
+   cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be
+   dispatched at the given element.
+
+  &lt;p&gt;&lt;dfn id=firing3 title=&quot;fire a show event&quot;&gt;Firing a &lt;code
+   title=event-show&gt;show&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
+   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
+   title=event-show&gt;show&lt;/code&gt;&lt;/a&gt;. &lt;span title=issue&gt;Actually this should
+   fire an event that has modifier information (shift/ctrl etc).&lt;/span&gt;
+
+  &lt;p&gt;&lt;dfn id=firing4 title=&quot;fire a load event&quot;&gt;Firing a &lt;code
+   title=event-load&gt;load&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
+   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
+   title=event-load&gt;load&lt;/code&gt;&lt;/a&gt;. &lt;!--&lt;dfn title=&quot;fire a
+  DOMContentLoaded event&quot;&gt;Firing a &lt;code
+  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/dfn&gt;
+  means &lt;span title=&quot;fire a simple event&quot;&gt;firing a simple event called
+  &lt;code
+  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt;&lt;/span&gt;.--&gt;
+   &lt;dfn id=firing5 title=&quot;fire an error event&quot;&gt;Firing an &lt;code
+   title=event-error&gt;error&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
+   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
+   title=event-error&gt;error&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
+  &lt;!-- XXX need to define the dispatching of DOMActivate --&gt;
+
+  &lt;p class=big-issue&gt;&lt;dfn id=firing6 title=&quot;fire a progress event&quot;&gt;Firing a
+   progress event called &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means something that
+   hasn't yet been defined, in the &lt;a href=&quot;#refsPROGRESS&quot;&gt;[PROGRESS]&lt;/a&gt;
+   spec.
+
+  &lt;p&gt;The default action of these event is to do nothing unless otherwise
+   stated.
+
+  &lt;p class=big-issue&gt;If you dispatch a custom &quot;click&quot; event at an element
+   that would normally have default actions, should they get triggered? If
+   so, we need to go through the entire spec and make sure that any default
+   actions are defined in terms of &lt;em&gt;any&lt;/em&gt; event of the right type on
+   that element, not those that are dispatched in expected ways.
+
+  &lt;h5 id=events0&gt;&lt;span class=secno&gt;4.3.5.3. &lt;/span&gt;Events and the &lt;code&gt;&lt;a
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
+
+  &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;Document&lt;/code&gt; in
+   a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, if the event is not a &lt;code
+   title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event, the user agent
+   must also dispatch the event to the &lt;code&gt;&lt;a
+   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;, as follows:
+
+  &lt;ol&gt;
+   &lt;li&gt;In the capture phase, the event must be dispatched to the &lt;code&gt;&lt;a
+    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object before being dispatched to any of
+    the nodes.
+
+   &lt;li&gt;In the bubble phase, the event must be dispatched to the &lt;code&gt;&lt;a
+    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object at the end of the phase, unless
+    bubbling has been prevented.
+  &lt;/ol&gt;
+
+  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;4.3.5.4. &lt;/span&gt;Runtime
+   script errors&lt;/h5&gt;
+
+  &lt;p&gt;&lt;em&gt;This section only applies to user agents that support scripting in
+   general and ECMAScript in particular.&lt;/em&gt;
+
+  &lt;p&gt;Whenever a runtime script error occurs in one of the scripts associated
+   with the document, the value of the &lt;code title=handler-onerror&gt;&lt;a
+   href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; &lt;span&gt;event handler DOM
+   attribute&lt;/span&gt; of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object
+   must be processed, as follows:
+
+  &lt;dl class=switch&gt;
+   &lt;dt&gt;If the value is a function
+
+   &lt;dd&gt;
+    &lt;p&gt;The function referenced by the &lt;code title=handler-onerror&gt;&lt;a
+     href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; attribute must be invoked with three
+     arguments, before notifying the user of the error.&lt;/p&gt;
+
+    &lt;p&gt;The three arguments passed to the function are all
+     &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the UA is
+     considering reporting, the second must give the URI to the resource in
+     which the error occured, and the third must give the line number in that
+     resource on which the error occured.&lt;/p&gt;
+
+    &lt;p&gt;If the function returns false, then the error should not be reported
+     to the user. Otherwise, if the function returns another value (or does
+     not return at all), the error should be reported to the user.&lt;/p&gt;
+
+    &lt;p&gt;Any exceptions thrown or errors caused by this function must be
+     reported to the user immediately after the error that the function was
+     called for, without calling the function again.&lt;/p&gt;
+
+   &lt;dt&gt;If the value is &lt;code&gt;null&lt;/code&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The error should not reported to the user.&lt;/p&gt;
+
+   &lt;dt&gt;If the value is anything else
+
+   &lt;dd&gt;
+    &lt;p&gt;The error should be reported to the user.&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;The initial value of &lt;code title=handler-onerror&gt;&lt;a
+   href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; must be &lt;code&gt;undefined&lt;/code&gt;.
+
+  &lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;4.4. &lt;/span&gt;User prompts&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;dfn id=alert title=dom-alert&gt;&lt;code&gt;alert(&lt;var
+   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
+   given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent may make the
+   method wait for the user to acknowledge the message before returning; if
+   so, the user agent must &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; while the method is
+   waiting.
+
+  &lt;p&gt;The &lt;dfn id=confirm title=dom-confirm&gt;&lt;code&gt;confirm(&lt;var
+   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
+   given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to respond
+   with a positive or negative response. The user agent must then &lt;a
+   href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the user's response.
+   If the user response positively, the method must return true, and if the
+   user response negatively, the method must return false.
+
+  &lt;p&gt;The &lt;dfn id=prompt title=dom-prompt&gt;&lt;code&gt;prompt(&lt;var
+   title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method,
+   when invoked, must show the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user,
+   and ask the user to either respond with a string value or abort. The user
+   agent must then &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the
+   user's response. The second argument is optional. If the second argument
+   (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
+   defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the user
+   aborts, then the method must return null; otherwise, the method must
+   return the string that the user responded with.
+
+  &lt;p&gt;The &lt;dfn id=print title=dom-print&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
+   when invoked, should offer the user the opportunity to &lt;a
+   href=&quot;#obtain&quot;&gt;obtain a physical form&lt;/a&gt; of the document. The user agent
+   may make the method wait for the user to either accept or decline before
+   returning; if so, the user agent must &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; while the
+   method is waiting. (This does not, of course, preclude the user agent from
+   &lt;em&gt;always&lt;/em&gt; offering the user with the opportunity to convert the
+   document to whatever media the user might want.)
+
+  &lt;h3 id=browser&gt;&lt;span class=secno&gt;4.5. &lt;/span&gt;Browser state&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;dfn id=navigator title=dom-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
+   attribute of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface must
+   return an instance of the &lt;code&gt;&lt;a
+   href=&quot;#clientinformation&quot;&gt;ClientInformation&lt;/a&gt;&lt;/code&gt; interface, which
+   represents the identity and state of the user agent (the client), and
+   allows Web pages to register themselves as potential protocol and content
+   handlers:
+
+  &lt;pre
+   class=idl&gt;interface &lt;dfn id=clientinformation&gt;ClientInformation&lt;/dfn&gt; {
+  readonly attribute boolean &lt;a href=&quot;#navigator.online&quot; title=dom-navigator-onLine&gt;onLine&lt;/a&gt;;
+  void &lt;a href=&quot;#registerprotocolhandler&quot; title=dom-navigator-registerProtocolHandler&gt;registerProtocolHandler&lt;/a&gt;(in DOMString protocol, in DOMString uri, in DOMString title);
+  void &lt;a href=&quot;#registercontenthandler&quot; title=dom-navigator-registerContentHandler&gt;registerContentHandler&lt;/a&gt;(in DOMString mimeType, in DOMString uri, in DOMString title);
+&lt;!-- XXX there are other attributes! --&gt;};&lt;/pre&gt;
+  &lt;!-- also, see window.external.AddSearchProvider() and similar DOM APIs from IE --&gt;
+
+  &lt;h4 id=offline&gt;&lt;span class=secno&gt;4.5.1. &lt;/span&gt;Offline Web applications&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=navigator.online
+   title=dom-navigator-onLine&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt; attribute
+   must return false if the user agent will not contact the network when the
+   user follows links or when a script requests a remote page (or knows that
+   such an attempt would fail), and must return true otherwise.
+
+  &lt;p&gt;The &lt;dfn id=offline0 title=event-offline&gt;&lt;code&gt;offline&lt;/code&gt;&lt;/dfn&gt;
+   event must be fired when the value of the &lt;code
+   title=dom-navigator-onLine&gt;&lt;a
+   href=&quot;#navigator.online&quot;&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute of the
+   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; changes from true to false.
+
+  &lt;p&gt;The &lt;dfn id=online title=event-online&gt;&lt;code&gt;online&lt;/code&gt;&lt;/dfn&gt; event
+   must be fired when the value of the &lt;code title=dom-navigator-onLine&gt;&lt;a
+   href=&quot;#navigator.online&quot;&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute of the
+   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; changes from false to true.
+
+  &lt;p&gt;These events are in no namespace, do bubble, are not cancelable, have no
+   default action, and use the normal &lt;code&gt;Event&lt;/code&gt; interface. They must
+   be fired on &lt;a href=&quot;#the-body0&quot;&gt;the body element&lt;/a&gt;. (As the events
+   bubble, they will reach the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
+   object.)&lt;/p&gt;
+  &lt;!-- XXX ononline onoffline need to be defined --&gt;
+
+  &lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;4.5.2. &lt;/span&gt;Custom protocol and
+   content handlers&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn id=registerprotocolhandler
+   title=dom-navigator-registerProtocolHandler&gt;&lt;code&gt;registerProtocolHandler()&lt;/code&gt;&lt;/dfn&gt;
+   method allows Web sites to register themselves as possible handlers for
+   particular protocols. For example, an online fax service could register
+   itself as a handler of the &lt;code&gt;fax:&lt;/code&gt; protocol (&lt;a
+   href=&quot;#refsRFC2806&quot;&gt;[RFC2806]&lt;/a&gt;), so that if the user clicks on such a
+   link, he is given the opportunity to use that Web site. Analogously, the
+   &lt;dfn id=registercontenthandler
+   title=dom-navigator-registerContentHandler&gt;&lt;code&gt;registerContentHandler()&lt;/code&gt;&lt;/dfn&gt;
+   method allows Web sites to register themselves as possible handlers for
+   content in a particular MIME type. For example, the same online fax
+   service could register itself as a handler for &lt;code&gt;image/g3fax&lt;/code&gt;
+   files (&lt;a href=&quot;#refsRFC1494&quot;&gt;[RFC1494]&lt;/a&gt;), so that if the user has no
+   native application capable of handling G3 Facsimile byte streams, his Web
+   browser can instead suggest he use that site to view the image.
+
+  &lt;p&gt;User agents may, within the constraints described in this section, do
+   whatever they like when the methods are called. A UA could, for instance,
+   prompt the user and offer the user the opportunity to add the site to a
+   shortlist of handlers, or make the handlers his default, or cancel the
+   request. UAs could provide such a UI through modal UI or through a
+   non-modal transient notification interface. UAs could also simply silently
+   collect the information, providing it only when relevant to the user.
+
+  &lt;p&gt;There is &lt;a href=&quot;#sample-handler-impl&quot;&gt;an example of how these methods
+   could be presented to the user&lt;/a&gt; below.
+
+  &lt;p&gt;The arguments to the methods have the following meanings:
+
+  &lt;dl&gt;
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; (&lt;code
+    title=dom-navigator-registerProtocolHandler&gt;&lt;a
+    href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
+    only)
+
+   &lt;dd&gt;
+    &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The scheme
+     must be treated case-insensitively by user agents for the purposes of
+     comparing with the scheme part of URIs that they consider against the
+     list of registered handlers.&lt;/p&gt;
+
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
+     &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes don't
+     contain colons.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code
+    title=dom-navigator-registerContentHandler&gt;&lt;a
+    href=&quot;#registercontenthandler&quot;&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; only)
+
+   &lt;dd&gt;
+    &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
+     &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
+     case-insensitively by user agents for the purposes of comparing with
+     MIME types of documents that they consider against the list of
+     registered handlers.&lt;/p&gt;
+
+    &lt;p&gt;User agents must compare the given values only to the MIME
+     type/subtype parts of content types, not to the complete type including
+     parameters. Thus, if &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values passed to this
+     method include characters such as commas or whitespace, or include MIME
+     parameters, then the handler being registered will never be used.&lt;/p&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;The URI of the page that will handle the requests. When the user agent
+     uses this URI, it must replace the first occurrence of the exact literal
+     string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version of the URI of the
+     content in question (as defined below), and then fetch the resulting URI
+     using the GET method (or equivalent for non-HTTP URIs).&lt;/p&gt;
+
+    &lt;p&gt;To get the escaped version of the URI, first, the domain part of the
+     URI (if any) must be converted to its punycode representation, and then,
+     every character in the URI that is not in the ranges given in the next
+     paragraph must be replaced by its UTF-8 byte representation, each byte
+     being represented by a U+0025 (%) character and two digits in the range
+     U+0030 (0) to U+0039 (9) and U+0041 (A) to U+0046 (F) giving the
+     hexadecimal representation of the byte.&lt;/p&gt;
+
+    &lt;p&gt;The ranges of characters that must not be escaped are: U+002D (-),
+     U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A (Z), U+005F
+     (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
+    &lt;!-- XXX move that to a common algorithms section if any other
+    part of the spec needs it --&gt;
+    
+    &lt;div class=example&gt;
+     &lt;p&gt;If the user had visited a site that made the following call:&lt;/p&gt;
+
+     &lt;pre&gt;navigator.registerContentHandler('application/x-soup', '<A HREF="http://example.com/soup?url=%s">http://example.com/soup?url=%s</A>', 'SoupWeb&trade;')&lt;/pre&gt;
+
+     &lt;p&gt;...and then clicked on a link such as:&lt;/p&gt;
+
+     &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
+
+     &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file was
+      served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;, the UA might
+      navigate to the following URI:&lt;/p&gt;
+
+     &lt;pre&gt;<A HREF="http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre">http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre</A>&gt;
+
+     &lt;p&gt;This site could then fetch the &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt;
+      file and do whatever it is that it does with soup (synthesise it and
+      ship it to the user, or whatever).&lt;/p&gt;
+    &lt;/div&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;
+
+   &lt;dd&gt;
+    &lt;p&gt;A descriptive title of the handler, which the UA might use to remind
+     the user what the site in question is.&lt;/p&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;User agents should raise &lt;a href=&quot;#security8&quot; title=&quot;security
+   exception&quot;&gt;security exceptions&lt;/a&gt; if the methods are called with &lt;var
+   title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA
+   deems to be &quot;privileged&quot;. For example, a site attempting to register a
+   handler for &lt;code&gt;http&lt;/code&gt; URIs or &lt;code&gt;text/html&lt;/code&gt; content in a
+   Web browser would likely cause an exception to be raised.
+
+  &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if the &lt;var
+   title=&quot;&quot;&gt;uri&lt;/var&gt; argument passed to one of these methods does not
+   contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.
+
+  &lt;p&gt;User agents must not raise any other exceptions (other than
+   binding-specific exceptions, such as for an incorrect number of arguments
+   in an ECMAScript implementation).
+
+  &lt;p&gt;This section does not define how the pages registered by these methods
+   are used, beyond the requirements on how to process the &lt;var
+   title=&quot;&quot;&gt;uri&lt;/var&gt; value (see above). To some extent, the &lt;span
+   title=&quot;navigating across documents&quot;&gt;processing model for navigating across
+   documents&lt;/span&gt; defines some cases where these methods are relevant, but
+   in general UAs may use this information wherever they would otherwise
+   consider handing content to native plugins or helper applications.
+
+  &lt;p&gt;UAs must not use registered content handlers to handle content that was
+   returned as part of a non-GET transaction (or rather, as part of any
+   non-idempotent transaction), as the remote site would not be able to fetch
+   the same data.
+
+  &lt;h5 id=security3&gt;&lt;span class=secno&gt;4.5.2.1. &lt;/span&gt;Security and privacy&lt;/h5&gt;
+
+  &lt;p&gt;These mechanisms can introduce a number of concerns, in particular
+   privacy concerns.
+
+  &lt;p&gt;&lt;strong&gt;Hijacking all Web usage.&lt;/strong&gt; User agents should not allow
+   protocols that are key to its normal operation, such as &lt;code&gt;http&lt;/code&gt;
+   or &lt;code&gt;https&lt;/code&gt;, to be rerouted through third-party sites. This
+   would allow a user's activities to be trivially tracked, and would allow
+   user information, even in secure connections, to be collected.
+
+  &lt;p&gt;&lt;strong&gt;Hijacking defaults.&lt;/strong&gt; It is strongly recommended that
+   user agents do not automatically change any defaults, as this could lead
+   the user to send data to remote hosts that the user is not expecting. New
+   handlers registering themselves should never automatically cause those
+   sites to be used.
+
+  &lt;p&gt;&lt;strong&gt;Registration spamming.&lt;/strong&gt; User agents should consider the
+   possibility that a site will attempt to register a large number of
+   handlers, possibly from multiple domains (e.g. by redirecting through a
+   series of pages each on a different domain, and each registering a handler
+   for &lt;code&gt;video/mpeg&lt;/code&gt; &mdash; analogous practices abusing other Web
+   browser features have been used by pornography Web sites for many years).
+   User agents should gracefully handle such hostile attempts, protecting the
+   user.
+
+  &lt;p&gt;&lt;strong&gt;Misleading titles.&lt;/strong&gt; User agents should not rely wholy on
+   the &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; argument to the methods when presenting the
+   registered handlers to the user, since sites could easily lie. For
+   example, a site &lt;code&gt;hostile.example.net&lt;/code&gt; could claim that it was
+   registering the &quot;Cuddly Bear Happy Content Handler&quot;. User agents should
+   therefore use the handler's domain in any UI along with any title.
+
+  &lt;p&gt;&lt;strong&gt;Hostile handler metadata.&lt;/strong&gt; User agents should protect
+   against typical attacks against strings embedded in their interface, for
+   example ensuring that markup or escape characters in such strings are not
+   executed, that null bytes are properly handled, that over-long strings do
+   not cause crashes or buffer overruns, and so forth.
+
+  &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described in this
+   section can result in secret Intranet URIs being leaked, in the following
+   manner:
+
+  &lt;ol&gt;
+   &lt;li&gt;The user registers a third-party content handler as the default
+    handler for a content type.
+
+   &lt;li&gt;The user then browses his corporate Intranet site and accesses a
+    document that uses that content type.
+
+   &lt;li&gt;The user agent contacts the third party and hands the third party the
+    URI to the Intranet content.
+  &lt;/ol&gt;
+
+  &lt;p&gt;No actual confidential file data is leaked in this manner, but the URIs
+   themselves could contain confidential information. For example, the URI
+   could be
+   &lt;code&gt;<A HREF="https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code">https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code</A>&gt;,
+   which might tell the third party that Example Corporation is intending to
+   merge with Samples LLC. Implementors might wish to consider allowing
+   administrators to disable this feature for certain subdomains, content
+   types, or protocols.
+
+  &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send HTTPS
+   URIs to third-party sites registered as content handlers, in the same way
+   that user agents do not send &lt;code&gt;Referer&lt;/code&gt; headers from secure
+   sites to third-party sites.
+
+  &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
+   username or password information in the URIs that are escaped and included
+   sent to the handler sites. User agents may even avoid attempting to pass
+   to Web-based handlers the URIs of resources that are known to require
+   authentication to access, as such sites would be unable to access the
+   resources in question without prompting the user for credentials
+   themselves (a practice that would require the user to know whether to
+   trust the third-party handler, a decision many users are unable to make or
+   even understand).
+
+  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;4.5.2.2. &lt;/span&gt;Sample user
+   interface&lt;/h5&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
+
+  &lt;p&gt;A simple implementation of this feature for a desktop Web browser might
+   work as follows.
+
+  &lt;p&gt;The &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a
+   href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
+   method could display a modal dialog box:
+
+  &lt;pre&gt;||[ Protocol Handler Registration ]|||||||||||||||||||||||||||
+|                                                            |
+| This Web page:                                             |
+|                                                            |
+|    Kittens at work                                         |
+|    <A HREF="http://kittens.example.org/">http://kittens.example.org/</A>                             |
+|                                                            |
+| ...would like permission to handle the protocol &quot;x-meow:&quot;  |
+| using the following Web-based application:                 |
+|                                                            |
+|    Kittens-at-work displayer                               |
+|    <A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>                     |
+|                                                            |
+| Do you trust the administrators of the &quot;kittens.example.   |
+| org&quot; domain?                                               |
+|                                                            |
+|              ( Trust kittens.example.org )  (( Cancel ))   |
+|____________________________________________________________|&lt;/pre&gt;
+
+  &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked the
+   method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page, &quot;x-meow&quot; is
+   the string that was passed to the &lt;code
+   title=dom-navigator-registerProtocolHandler&gt;&lt;a
+   href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
+   method as its first argument (&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt;),
+   &quot;<A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>&quot; was the second argument (&lt;var
+   title=&quot;&quot;&gt;uri&lt;/var&gt;), and &quot;Kittens-at-work displayer&quot; was the third
+   argument (&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;).
+
+  &lt;p&gt;If the user clicks the Cancel button, then nothing further happens. If
+   the user clicks the &quot;Trust&quot; button, then the handler is remembered.
+
+  &lt;p&gt;When the user then attempts to fetch a URI that uses the &quot;x-meow:&quot;
+   scheme, then it might display a dialog as follows:
+
+  &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
+|                                                            |
+| You have attempted to access:                              |
+|                                                            |
+|    x-meow:S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%3D               |
+|                                                            |
+| How would you like FerretBrowser to handle this resource?  |
+|                                                            |
+|  (o) Contact the FerretBrowser plugin registry to see if   |
+|      there is an official way to handle this resource.     |
+|                                                            |
+|  ( ) Pass this URI to a local application:                 |
+|      [ /no application selected/             ] ( Choose )  |
+|                                                            |
+|  ( ) Pass this URI to the &quot;Kittens-at-work displayer&quot;      |
+|      application at &quot;kittens.example.org&quot;.                 |
+|                                                            |
+|  [ ] Always do this for resources using the &quot;x-meow&quot;       |
+|      protocol in future.                                   |
+|                                                            |
+|                                     ( Ok )  (( Cancel ))   |
+|____________________________________________________________|&lt;/pre&gt;
+
+  &lt;p&gt;...where the third option is the one that was primed by the site
+   registering itself earlier.
+
+  &lt;p&gt;If the user does select that option, then the browser, in accordance
+   with the requirements described in the previous two sections, will
+   redirect the user to
+   &quot;<A HREF="http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D">http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D</A>&quot;.
+
+  &lt;p&gt;The &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a
+   href=&quot;#registercontenthandler&quot;&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; method
+   would work equivalently, but for unknown MIME types instead of unknown
+   protocols.
+
+  &lt;h3 id=history&gt;&lt;span class=secno&gt;4.6. &lt;/span&gt;Session history and navigation&lt;/h3&gt;
+
+  &lt;h4 id=the-session&gt;&lt;span class=secno&gt;4.6.1. &lt;/span&gt;The session history of
    browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;The sequence of &lt;code&gt;Document&lt;/code&gt;s in a &lt;a
@@ -24702,7 +25856,7 @@
    there are no state object entries for that &lt;code&gt;Document&lt;/code&gt; object
    then no entries are removed.
 
-  &lt;h4 id=the-history&gt;&lt;span class=secno&gt;4.3.2. &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-history&gt;&lt;span class=secno&gt;4.6.2. &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#history1&quot;&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=history1&gt;History&lt;/dfn&gt; {
@@ -24964,7 +26118,7 @@
    the last entry for that &lt;code&gt;Document&lt;/code&gt; object in the session
    history.
 
-  &lt;h4 id=activating&gt;&lt;span class=secno&gt;4.3.3. &lt;/span&gt;&lt;dfn id=activating0
+  &lt;h4 id=activating&gt;&lt;span class=secno&gt;4.6.3. &lt;/span&gt;&lt;dfn id=activating0
    title=&quot;activate the state object&quot;&gt;Activating state objects&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a state object in the session history is activated (which happens
@@ -24999,7 +26153,7 @@
   &lt;p class=big-issue&gt;Should we coalesce these events if they occur while the
    page is away? (e.g. during traversal -- see above)
 
-  &lt;h4 id=the-location&gt;&lt;span class=secno&gt;4.3.4. &lt;/span&gt;The &lt;code&gt;&lt;a
+  &lt;h4 id=the-location&gt;&lt;span class=secno&gt;4.6.4. &lt;/span&gt;The &lt;code&gt;&lt;a
    href=&quot;#location2&quot;&gt;Location&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a browsing context's session
@@ -25121,7 +26275,7 @@
 user reload must be equivalent to .reload()
 --&gt;
 
-  &lt;h5 id=security2&gt;&lt;span class=secno&gt;4.3.4.1. &lt;/span&gt;Security&lt;/h5&gt;
+  &lt;h5 id=security4&gt;&lt;span class=secno&gt;4.6.4.1. &lt;/span&gt;Security&lt;/h5&gt;
 
   &lt;p&gt;User agents must raise a &lt;a href=&quot;#security8&quot;&gt;security exception&lt;/a&gt;
    whenever any of the members of a &lt;code&gt;&lt;a
@@ -25139,7 +26293,7 @@
    title=dom-location-href&gt;&lt;a href=&quot;#href5&quot;&gt;href&lt;/a&gt;&lt;/code&gt; attribute's
    setter.
 
-  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;4.3.5. &lt;/span&gt;Implementation notes
+  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;4.6.5. &lt;/span&gt;Implementation notes
    for session history&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
@@ -25178,7 +26332,7 @@
    that are invoked on a timer, or from event handlers that do not represent
    a clear user action, or that are invoked in rapid succession.
 
-  &lt;h3 id=navigating&gt;&lt;span class=secno&gt;4.4. &lt;/span&gt;Navigating across documents&lt;/h3&gt;
+  &lt;h3 id=navigating&gt;&lt;span class=secno&gt;4.7. &lt;/span&gt;Navigating across documents&lt;/h3&gt;
 
   &lt;p&gt;Certain actions cause the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; to
    &lt;dfn id=navigate&gt;navigate&lt;/dfn&gt;. For example, &lt;a href=&quot;#following0&quot;
@@ -25379,7 +26533,7 @@
     &lt;/dl&gt;
   &lt;/ol&gt;
 
-  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;4.4.1. &lt;/span&gt;&lt;dfn id=page-load
+  &lt;h4 id=read-html&gt;&lt;span class=secno&gt;4.7.1. &lt;/span&gt;&lt;dfn id=page-load
    title=navigate-html&gt;Page load processing model for HTML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an HTML document is to be loaded in a &lt;a href=&quot;#browsing0&quot;&gt;browsing
@@ -25405,7 +26559,7 @@
    the page has finished parsing, the user agent must &lt;a
    href=&quot;#update0&quot;&gt;update the session history with the new page&lt;/a&gt;.
 
-  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;4.4.2. &lt;/span&gt;&lt;dfn id=page-load0
+  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;4.7.2. &lt;/span&gt;&lt;dfn id=page-load0
    title=navigate-xml&gt;Page load processing model for XML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When faced with displaying an XML file inline, user agents must first
@@ -25436,7 +26590,7 @@
   &lt;p&gt;Error messages from the parse process (e.g. namespace well-formedness
    errors) may be reported inline by mutating the &lt;code&gt;Document&lt;/code&gt;.
 
-  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;4.4.3. &lt;/span&gt;&lt;dfn id=page-load1
+  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;4.7.3. &lt;/span&gt;&lt;dfn id=page-load1
    title=navigate-text&gt;Page load processing model for text files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a plain text document is to be loaded in a &lt;a
@@ -25471,7 +26625,7 @@
    binding, providing script, giving the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;4.4.4. &lt;/span&gt;&lt;dfn id=page-load2
+  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;4.7.4. &lt;/span&gt;&lt;dfn id=page-load2
    title=navigate-image&gt;Page load processing model for images&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an image resource is to be loaded in a &lt;a
@@ -25502,7 +26656,7 @@
    binding, to provide a script, to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;, etc.
 
-  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;4.4.5. &lt;/span&gt;&lt;dfn id=page-load3
+  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;4.7.5. &lt;/span&gt;&lt;dfn id=page-load3
    title=navigate-plugin&gt;Page load processing model for content that uses
    plugins&lt;/dfn&gt;&lt;/h4&gt;
 
@@ -25534,7 +26688,7 @@
    XBL binding, or to give the document a &lt;code&gt;&lt;a
    href=&quot;#title1&quot;&gt;title&lt;/a&gt;&lt;/code&gt;.
 
-  &lt;h4 id=non-DOM-inline-content&gt;&lt;span class=secno&gt;4.4.6. &lt;/span&gt;Page load
+  &lt;h4 id=non-DOM-inline-content&gt;&lt;span class=secno&gt;4.7.6. &lt;/span&gt;Page load
    processing model for inline content that doesn't have a DOM&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=display&gt;display a user agent page
@@ -25555,7 +26709,7 @@
    the page has been completely set up, the user agent must &lt;a
    href=&quot;#update0&quot;&gt;update the session history with the new page&lt;/a&gt;.
 
-  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;4.4.7. &lt;/span&gt;&lt;dfn id=scrolling0
+  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;4.7.7. &lt;/span&gt;&lt;dfn id=scrolling0
    title=navigate-fragid&gt;Scrolling to a fragment identifier&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is supposed to scroll for a fragment identifier, then
@@ -25577,7 +26731,7 @@
    the document&lt;/dfn&gt;&quot; from a frag id -- id=&quot;&quot;, name=&quot;&quot;, XPointer, etc;
    missing IDs (e.g. the infamous &quot;#top&quot;)
 
-  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;4.5. &lt;/span&gt;Determining the
+  &lt;h3 id=content-type-sniffing&gt;&lt;span class=secno&gt;4.8. &lt;/span&gt;Determining the
    type of a new resource in a browsing context&lt;/h3&gt;
 
   &lt;p class=warning&gt;It is imperative that the rules in this section be
@@ -25674,7 +26828,7 @@
      type&lt;/var&gt;.
   &lt;/ol&gt;
 
-  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;4.5.1. &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type0&gt;&lt;span class=secno&gt;4.8.1. &lt;/span&gt;&lt;dfn
    id=content-type4&gt;Content-Type sniffing: text or binary&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;ol&gt;
@@ -25764,7 +26918,7 @@
     &lt;p&gt;Otherwise, the sniffed type of the resource is &quot;text/plain&quot;.
   &lt;/ul&gt;
 
-  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;4.5.2. &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type1&gt;&lt;span class=secno&gt;4.8.2. &lt;/span&gt;&lt;dfn
    id=content-type5&gt;Content-Type sniffing: unknown type&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;ol&gt;
@@ -26016,7 +27170,7 @@
    determine that content is not HTML and thus safe from XSS attacks, but
    then a user agent detects it as HTML anyway and allows script to execute).
 
-  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;4.5.3. &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type2&gt;&lt;span class=secno&gt;4.8.3. &lt;/span&gt;&lt;dfn
    id=content-type6&gt;Content-Type sniffing: image&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;If the first bytes of the file match one of the byte sequences in the
@@ -26078,7 +27232,7 @@
   &lt;p&gt;Otherwise, the &lt;i&gt;sniffed type&lt;/i&gt; of the resource is the same as its
    &lt;var title=&quot;&quot;&gt;official type&lt;/var&gt;.
 
-  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;4.5.4. &lt;/span&gt;&lt;dfn
+  &lt;h4 id=content-type3&gt;&lt;span class=secno&gt;4.8.4. &lt;/span&gt;&lt;dfn
    id=content-type7&gt;Content-Type sniffing: feed or HTML&lt;/dfn&gt;&lt;/h4&gt;
   &lt;!-- mostly based on:
    <A HREF="http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx">http://blogs.msdn.com/rssteam/articles/PublishersGuide.aspx</A>
@@ -26248,7 +27402,7 @@
    this algorithm and the algorithm for detecting the character encoding of
    HTML documents in parallel.
 
-  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;4.5.5. &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
+  &lt;h4 id=content-type&gt;&lt;span class=secno&gt;4.8.5. &lt;/span&gt;Content-Type metadata&lt;/h4&gt;
 
   &lt;p&gt;What explicit &lt;dfn id=content-type8 title=Content-Type&gt;Content-Type
    metadata&lt;/dfn&gt; is associated with the resource (the resource's type
@@ -26332,1160 +27486,6 @@
     &lt;/dl&gt;
   &lt;/ol&gt;
 
-  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;4.6. &lt;/span&gt;Scripting&lt;/h3&gt;
-
-  &lt;h4 id=running&gt;&lt;span class=secno&gt;4.6.1. &lt;/span&gt;Running executable code&lt;/h4&gt;
-
-  &lt;p&gt;Various mechanisms can cause author-provided executable code to run in
-   the context of a document. These mechanisms include, but are probably not
-   limited to:
-
-  &lt;ul&gt;
-   &lt;li&gt;Processing of &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements.
-
-   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a
-    href=&quot;#the-javascript&quot;&gt;javascript:&lt;/a&gt;&lt;/code&gt; URIs (e.g. the &lt;code
-    title=attr-img-src&gt;&lt;a href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute of &lt;code&gt;&lt;a
-    href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt;
-    rule in a CSS &lt;code&gt;&lt;a href=&quot;#style&quot;&gt;style&lt;/a&gt;&lt;/code&gt; element block).
-
-   &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code
-    title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;a href=&quot;#event2&quot;&gt;event
-    handler content attributes&lt;/a&gt;, by &lt;a href=&quot;#event3&quot;&gt;event handler DOM
-    attributes&lt;/a&gt;, or otherwise.
-
-   &lt;li&gt;Processing of technologies like XBL or SVG that have their own
-    scripting features.
-  &lt;/ul&gt;
-
-  &lt;p&gt;User agents may provide a mechanism to enable or disable the execution
-   of author-provided code. When the user agent is configured such that
-   author-provided code does not execute, or if the user agent is implemented
-   so as to never execute author-provided code, it is said that &lt;dfn
-   id=scripting1&gt;scripting is disabled&lt;/dfn&gt;. When author-provided code
-   &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn id=scripting2&gt;scripting is enabled&lt;/dfn&gt;. A
-   user agent with scripting disabled is a &lt;a href=&quot;#non-scripted&quot;
-   title=&quot;User agents with no scripting support&quot;&gt;user agent with no scripting
-   support&lt;/a&gt; for the purposes of conformance.
-
-  &lt;h4 id=origin&gt;&lt;span class=secno&gt;4.6.2. &lt;/span&gt;Origin&lt;/h4&gt;
-  &lt;!-- Hallowed are the Ori --&gt;
-  &lt;!--
-    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=346659">https://bugzilla.mozilla.org/show_bug.cgi?id=346659</A>
-    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=344495">https://bugzilla.mozilla.org/show_bug.cgi?id=344495</A>
-  --&gt;
-
-  &lt;p&gt;Access to certain APIs is granted or denied to scripts based on the &lt;dfn
-   id=origin0&gt;origin&lt;/dfn&gt; of the script and the API being accessed.
-
-  &lt;dl&gt;
-   &lt;dt&gt;If a script is in a &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element
-
-   &lt;dd&gt;The origin of the script is the origin of the &lt;code&gt;Document&lt;/code&gt; to
-    which the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element belongs.
-
-   &lt;dt&gt;If a script is a function or other code reference created by another
-    script
-
-   &lt;dd&gt;The origin of the script is the origin of the script that created it.
-
-   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in an attribute
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the element
-    on which the attribute is found.
-
-   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; in a style sheet
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; to which the
-    style sheet applies.
-
-   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
-    title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by the user
-    (e.g. by using a &lt;i&gt;bookmarklet&lt;/i&gt;)
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s &lt;a href=&quot;#active&quot;&gt;active
-    document&lt;/a&gt;.
-
-   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
-    title=navigate&gt;navigated&lt;/a&gt;, the URI having been declared in markup
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the element
-    (e.g. an &lt;code&gt;&lt;a href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
-    href=&quot;#area&quot;&gt;area&lt;/a&gt;&lt;/code&gt; element) that declared the URI.
-
-   &lt;dt&gt;If a script is a &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; to which a &lt;a
-    href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; is being &lt;a href=&quot;#navigate&quot;
-    title=navigate&gt;navigated&lt;/a&gt;, the URI having been provided by script
-
-   &lt;dd&gt;The origin is the origin of the script that provided the URI.&lt;/dd&gt;
-   &lt;!-- ... --&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;The origin of scripts thus comes down to finding the origin of
-   &lt;code&gt;Document&lt;/code&gt; objects.
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was served over the
-   network and whose address uses a URI scheme with a server-based naming
-   authority is the tuple consisting of the &lt;scheme&gt;, &lt;host&gt;, and
-   &lt;port&gt; parts of the &lt;code&gt;Document&lt;/code&gt;'s full URI. &lt;a
-   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; &lt;a
-   href=&quot;#refsRFC2732&quot;&gt;[RFC2732]&lt;/a&gt;
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
-   &lt;code&gt;data:&lt;/code&gt; URI found in another &lt;code&gt;Document&lt;/code&gt; or in a
-   script is the origin of the that &lt;code&gt;Document&lt;/code&gt; or script.
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
-   &lt;code&gt;data:&lt;/code&gt; URI from another source is a globally unique identifier
-   assigned when the document is created.
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated from a
-   &lt;a href=&quot;#the-javascript&quot; title=&quot;javascript
-   protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URI&lt;/a&gt; is the same as the origin of
-   that &lt;code&gt;javascript:&lt;/code&gt; URI.
-
-  &lt;p&gt;&lt;dfn id=the-string&gt;The string representing the script's domain in IDNA
-   format&lt;/dfn&gt; is obtained as follows: take the domain part of the script's
-   &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; tuple and apply the IDNA ToASCII algorithm
-   and then the IDNA ToUnicode algorithm to each component of the domain name
-   (with both the AllowUnassigned and UseSTD3ASCIIRules flags set both
-   times). &lt;a href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;
-
-  &lt;p&gt;If ToASCII fails to convert one of the components of the string, e.g.
-   because it is too long or because it contains invalid characters, or if
-   the origin of the script has no domain part, then the string representing
-   the script's domain in IDNA format cannot be obtained. (ToUnicode is
-   defined to never fail.)
-
-  &lt;p class=big-issue&gt;It's been suggested that we should put IP addresses into
-   the origin tuple, to mitigate DNS rebinding attacks. However that would
-   kill multi-homed systems like GMail. Should we do something like have a
-   DNS record say whether or not to include the IP in the origin for a host?
-
-  &lt;h4 id=security3&gt;&lt;span class=secno&gt;4.6.3. &lt;/span&gt;Security exceptions&lt;/h4&gt;
-
-  &lt;p class=big-issue&gt;Define &lt;dfn id=security8&gt;security exception&lt;/dfn&gt;.
-
-  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;4.6.4. &lt;/span&gt;&lt;dfn
-   id=the-javascript title=&quot;javascript protocol&quot;&gt;The &lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must, if
-   evaluated, be evaluated using the in-context evaluation operation defined
-   for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URIs. &lt;a
-   href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
-  &lt;!--
-JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
-       <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
-       <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
---&gt;
-
-  &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
-   title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
-   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has the same
-   &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; as the URI, the dereference context must be
-   the &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; being navigated.
-
-  &lt;p&gt;When a browsing context is &lt;a href=&quot;#navigate&quot;
-   title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI, and the &lt;a
-   href=&quot;#active&quot;&gt;active document&lt;/a&gt; of that browsing context has a
-   &lt;em&gt;different&lt;/em&gt; &lt;a href=&quot;#origin0&quot;&gt;origin&lt;/a&gt; than the URI, the
-   dereference context must be an empty object.
-
-  &lt;p&gt;Otherwise, the dereference context must the &lt;a
-   href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; to
-   which belongs the element for which the URI is being dereferenced, or to
-   which the style sheet for which the URI is being dereferenced applies,
-   whichever is appropriate.
-
-  &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should be
-   evaluated when the resource for that URI is needed, unless &lt;a
-   href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt; or the &lt;code&gt;Document&lt;/code&gt;
-   corresponding to the dereference context (as defined above), if any, has
-   &lt;code title=dom-document-designMode&gt;&lt;a
-   href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled.
-
-  &lt;p&gt;If the dereference by-product is void (there is no return value), then
-   the URI must be treated in a manner equivalent to an HTTP resource with an
-   HTTP 204 No Content response.
-
-  &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an HTTP
-   resource with a 200 OK response whose &lt;a href=&quot;#content-type8&quot;
-   title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is &lt;code
-   title=&quot;&quot;&gt;text/html&lt;/code&gt; and whose response body is the dereference
-   by-product, converted to a string value.
-
-  &lt;p class=note&gt;Certain contexts, in particular &lt;code&gt;&lt;a
-   href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=&quot;#content-type8&quot;
-   title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.
-
-  &lt;div class=example&gt;
-   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a &lt;code
-    title=attr-img-src&gt;&lt;a href=&quot;#src&quot;&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
-    href=&quot;#img&quot;&gt;img&lt;/a&gt;&lt;/code&gt; element would be evaluated in the context of
-    the page as soon as the attribute is set; it would then be sniffed to
-    determine the image type and decoded as an image.&lt;/p&gt;
-
-   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
-    title=attr-a-href&gt;href&lt;/code&gt; attribute of an &lt;code&gt;&lt;a
-    href=&quot;#a&quot;&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was
-    &lt;a href=&quot;#following0&quot; title=&quot;following hyperlinks&quot;&gt;followed&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;p&gt;The &lt;code title=attr-iframe-src&gt;&lt;a href=&quot;#src1&quot;&gt;src&lt;/a&gt;&lt;/code&gt;
-    attribute of an &lt;code&gt;&lt;a href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt; element would
-    be evaluated in the context of the &lt;code&gt;&lt;a
-    href=&quot;#iframe&quot;&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=&quot;#browsing0&quot;&gt;browsing
-    context&lt;/a&gt;; once evaluated, its return value (if it was not void) would
-    replace that &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;'s document, thus
-    changing the variables visible in that &lt;a href=&quot;#browsing0&quot;&gt;browsing
-    context&lt;/a&gt;.&lt;/p&gt;
-  &lt;/div&gt;
-
-  &lt;h4 id=events&gt;&lt;span class=secno&gt;4.6.5. &lt;/span&gt;Events&lt;/h4&gt;
-
-  &lt;p class=big-issue&gt;We need to define how to handle events that are to be
-   fired on a Document that is no longer the active document of its browsing
-   context, and for Documents that have no browsing context. Do the events
-   fire? Do the handlers in that document not fire? Do we just define
-   scripting to be disabled when the document isn't active, with events still
-   running as is? See also the &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt;
-   element section, which says scripts don't run when the document isn't
-   active.
-
-  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;4.6.5.1. &lt;/span&gt;Event
-   handler attributes&lt;/h5&gt;
-
-  &lt;p&gt;&lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt; can have &lt;dfn id=event1&gt;event
-   handler attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
-   for the element on which they are specified.
-
-  &lt;p&gt;Each event handler attribute has two parts, an &lt;a href=&quot;#event2&quot;
-   title=&quot;event handler content attributes&quot;&gt;event handler content
-   attribute&lt;/a&gt; and an &lt;a href=&quot;#event3&quot; title=&quot;event handler DOM
-   attributes&quot;&gt;event handler DOM attribute&lt;/a&gt;. Event handler attributes must
-   initially be set to null. When their value changes (through the changing
-   of their event handler content attribute or their event handler DOM
-   attribute), they will either be null, or have an
-   &lt;code&gt;EventListener&lt;/code&gt; object assigned to them.
-
-  &lt;p&gt;Objects other than &lt;code&gt;Element&lt;/code&gt; objects, in particular &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;, only have &lt;a href=&quot;#event3&quot; title=&quot;event
-   handler DOM attributes&quot;&gt;event handler DOM attribute&lt;/a&gt; (since they have
-   no content attributes).
-
-  &lt;p&gt;&lt;dfn id=event2&gt;Event handler content attributes&lt;/dfn&gt;, when specified,
-   must contain valid ECMAScript code matching the ECMAScript &lt;code
-   title=&quot;&quot;&gt;FunctionBody&lt;/code&gt; production. &lt;a
-   href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
-
-  &lt;p&gt;When an event handler content attribute is set, its new value must be
-   interpreted as the body of an anonymous function with a single argument
-   called &lt;code&gt;event&lt;/code&gt;, with the new function's scope chain being
-   linked from the activation object of the handler, to the element, to the
-   element's &lt;code&gt;form&lt;/code&gt; element if it is a form control, to the
-   &lt;code&gt;Document&lt;/code&gt; object, to the &lt;a href=&quot;#browsing0&quot;&gt;browsing
-   context&lt;/a&gt; of that &lt;code&gt;Document&lt;/code&gt;. The function's
-   &lt;code&gt;this&lt;/code&gt; parameter must be the &lt;code&gt;Element&lt;/code&gt; object
-   representing the element. The resulting function must then be set as the
-   value of the corresponding event handler attribute, and the new value must
-   be set as the value of the content attribute. If the given function body
-   fails to compile, then the corresponding event handler attribute must be
-   set to null instead (the content attribute must still be updated to the
-   new value, though).
-
-  &lt;p class=note&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3, for more
-   details on activation objects. &lt;a href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;
-
-  &lt;p class=issue&gt;How do we allow non-JS event handlers?
-
-  &lt;p&gt;&lt;dfn id=event3&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set
-   the corresponding event handler attribute to their new value, and on
-   getting, must return whatever the current value of the corresponding event
-   handler attribute is (possibly null).
-
-  &lt;p&gt;The following are the event handler attributes that must be supported by
-   all &lt;a href=&quot;#html-elements&quot;&gt;HTML elements&lt;/a&gt;, as both content attributes
-   and DOM attributes, and on &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
-   objects, as DOM attributes:
-
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;dfn id=onabort title=handler-onabort&gt;&lt;code&gt;onabort&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever an &lt;code title=event-abort&gt;&lt;a
-     href=&quot;#abort&quot;&gt;abort&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
-     the element.
-   &lt;/dd&gt;
-   &lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforecopy&quot;&gt;&lt;code&gt;onbeforecopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
-   &lt;!-- widely used --&gt;
-   &lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-beforecopy&quot;&gt;beforecopy&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn id=onbeforeunload
-    title=handler-onbeforeunload&gt;&lt;code&gt;onbeforeunload&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-beforeunload&gt;beforeunload&lt;/code&gt; event is targeted at or
-     bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onblur title=handler-onblur&gt;&lt;code&gt;onblur&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-blur&gt;blur&lt;/code&gt; event is
-     targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onchange title=handler-onchange&gt;&lt;code&gt;onchange&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-change&gt;change&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onclick title=handler-onclick&gt;&lt;code&gt;onclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-click&gt;click&lt;/code&gt; event
-     is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=oncontextmenu
-    title=handler-oncontextmenu&gt;&lt;code&gt;oncontextmenu&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-contextmenu&gt;contextmenu&lt;/code&gt; event is targeted at or
-     bubbles through the element.
-   &lt;/dd&gt;
-   &lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-oncopy&quot;&gt;&lt;code&gt;oncopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
-   &lt;!-- widely used --&gt;
-   &lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-copy&quot;&gt;copy&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn id=ondblclick
-    title=handler-ondblclick&gt;&lt;code&gt;ondblclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dblclick&gt;dblclick&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondrag title=handler-ondrag&gt;&lt;code&gt;ondrag&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-drag&gt;&lt;a
-     href=&quot;#drag&quot;&gt;drag&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through the
-     element.
-
-   &lt;dt&gt;&lt;dfn id=ondragend title=handler-ondragend&gt;&lt;code&gt;ondragend&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragend&gt;&lt;a
-     href=&quot;#dragend&quot;&gt;dragend&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondragenter
-    title=handler-ondragenter&gt;&lt;code&gt;ondragenter&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragenter&gt;&lt;a
-     href=&quot;#dragenter&quot;&gt;dragenter&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondragleave
-    title=handler-ondragleave&gt;&lt;code&gt;ondragleave&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragleave&gt;&lt;a
-     href=&quot;#dragleave&quot;&gt;dragleave&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondragover
-    title=handler-ondragover&gt;&lt;code&gt;ondragover&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragover&gt;&lt;a
-     href=&quot;#dragover&quot;&gt;dragover&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondragstart
-    title=handler-ondragstart&gt;&lt;code&gt;ondragstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-dragstart&gt;&lt;a
-     href=&quot;#dragstart&quot;&gt;dragstart&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=ondrop title=handler-ondrop&gt;&lt;code&gt;ondrop&lt;/code&gt;&lt;/dfn&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-drop&gt;&lt;a
-     href=&quot;#drop&quot;&gt;drop&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through the
-     element.
-
-   &lt;dt&gt;&lt;dfn id=onerror title=handler-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever an &lt;code title=event-error&gt;&lt;a
-     href=&quot;#error1&quot;&gt;error&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
-     the element.&lt;/p&gt;
-
-    &lt;p class=note&gt;The &lt;code title=handler-onerror&gt;&lt;a
-     href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; handler is also used for &lt;a
-     href=&quot;#runtime-script-errors&quot;&gt;reporting script errors&lt;/a&gt;.
-
-   &lt;dt&gt;&lt;dfn id=onfocus title=handler-onfocus&gt;&lt;code&gt;onfocus&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-focus&gt;focus&lt;/code&gt; event
-     is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onkeydown title=handler-onkeydown&gt;&lt;code&gt;onkeydown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keydown&gt;keydown&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onkeypress
-    title=handler-onkeypress&gt;&lt;code&gt;onkeypress&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keypress&gt;keypress&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onkeyup title=handler-onkeyup&gt;&lt;code&gt;onkeyup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-keyup&gt;keyup&lt;/code&gt; event
-     is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onload title=handler-onload&gt;&lt;code&gt;onload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-load&gt;&lt;a
-     href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
-     the element.
-
-   &lt;dt&gt;&lt;dfn id=onmessage title=handler-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- introduced for &lt;event-source&gt; --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-message&gt;&lt;a
-     href=&quot;#message&quot;&gt;message&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmousedown
-    title=handler-onmousedown&gt;&lt;code&gt;onmousedown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-mousedown&gt;mousedown&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmousemove
-    title=handler-onmousemove&gt;&lt;code&gt;onmousemove&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-mousemove&gt;mousemove&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmouseout
-    title=handler-onmouseout&gt;&lt;code&gt;onmouseout&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-mouseout&gt;mouseout&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmouseover
-    title=handler-onmouseover&gt;&lt;code&gt;onmouseover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-mouseover&gt;mouseover&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmouseup title=handler-onmouseup&gt;&lt;code&gt;onmouseup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-mouseup&gt;mouseup&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onmousewheel
-    title=handler-onmousewheel&gt;&lt;code&gt;onmousewheel&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code
-     title=event-mousewheel&gt;mousewheel&lt;/code&gt; event is targeted at or bubbles
-     through the element.
-   &lt;/dd&gt;
-   &lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onpaste&quot;&gt;&lt;code&gt;onpaste&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
-   &lt;!-- widely used --&gt;
-   &lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-paste&quot;&gt;paste&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn id=onresize title=handler-onresize&gt;&lt;code&gt;onresize&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-resize&gt;resize&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-   &lt;/dd&gt;
-   &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn id=onscroll title=handler-onscroll&gt;&lt;code&gt;onscroll&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-scroll&gt;scroll&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-   &lt;/dd&gt;
-   &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn id=onselect title=handler-onselect&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-select&gt;&lt;a
-     href=&quot;#select&quot;&gt;select&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles through
-     the element.
-   &lt;/dd&gt;
-   &lt;!-- XXX should define when it fires --&gt;
-   &lt;!--XXX
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onselectstart&quot;&gt;&lt;code&gt;onselectstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;
-   &lt;!-- widely used --&gt;
-   &lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-selectstart&quot;&gt;selectstart&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-   &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn id=onsubmit title=handler-onsubmit&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever a &lt;code title=event-submit&gt;submit&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-
-   &lt;dt&gt;&lt;dfn id=onunload title=handler-onunload&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-   &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;Must be invoked whenever an &lt;code title=event-unload&gt;unload&lt;/code&gt;
-     event is targeted at or bubbles through the element.
-   &lt;/dd&gt;
-   &lt;!-- XXX need to fire this --&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;When an event handler attribute is invoked, its argument must be set to
-   the &lt;code&gt;Event&lt;/code&gt; object of the event in question. If the function
-   returns the exact boolean value false, the event's
-   &lt;code&gt;preventDefault()&lt;/code&gt; method must then invoked. Exception: for
-   historical reasons, for the HTML &lt;code&gt;mouseover&lt;/code&gt; event, the
-   &lt;code&gt;preventDefault()&lt;/code&gt; method must be called when the function
-   returns true instead.&lt;/p&gt;
-  &lt;!-- IE actually uncancels the event if the function returns true --&gt;
-
-  &lt;p&gt;When &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, event handler
-   attributes must do nothing.
-
-  &lt;p&gt;When &lt;a href=&quot;#scripting2&quot;&gt;scripting is enabled&lt;/a&gt;, all event handler
-   attributes on an element, whether set to null or to a function, must be
-   registered as event listeners on the element, as if the &lt;code
-   title=dom-EventTarget-addEventListenerNS&gt;addEventListenerNS()&lt;/code&gt;
-   method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
-   interface had been invoked when the element was created, with the event
-   type (&lt;code title=dom-event-type&gt;type&lt;/code&gt; argument) equal to the type
-   described for the event handler attribute in the list above, the namespace
-   (&lt;code title=dom-event-namespaceURI&gt;namespaceURI&lt;/code&gt; argument) set to
-   null, the listener set to be a target and bubbling phase listener (&lt;code
-   title=dom-event-useCapture&gt;useCapture&lt;/code&gt; argument set to false), the
-   event group set to the default group (&lt;code
-   title=dom-event-evtGroup&gt;evtGroup&lt;/code&gt; argument set to null), and the
-   event listener itself (&lt;code title=dom-event-listener&gt;listener&lt;/code&gt;
-   argument) set to do nothing while the event handler attribute is null, and
-   set to invoke the function associated with the event handler attribute
-   otherwise.
-
-  &lt;h5 id=event&gt;&lt;span class=secno&gt;4.6.5.2. &lt;/span&gt;Event firing&lt;/h5&gt;
-
-  &lt;p class=big-issue&gt;maybe this should be moved higher up (terminology?
-   conformance? DOM?) Also, the whole terminology thing should be changed so
-   that we don't define any specific events here, we only define 'simple
-   event', 'progress event', 'mouse event', 'key event', and the like, and
-   have the actual dispatch use those generic terms when firing events.
-
-  &lt;p&gt;Certain operations and methods are defined as firing events on elements.
-   For example, the &lt;code title=dom-click&gt;&lt;a href=&quot;#click&quot;&gt;click()&lt;/a&gt;&lt;/code&gt;
-   method on the &lt;code&gt;&lt;a href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;
-   interface is defined as firing a &lt;code title=event-click&gt;click&lt;/code&gt;
-   event on the element. &lt;a href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;
-
-  &lt;p&gt;&lt;dfn id=firing title=&quot;fire a click event&quot;&gt;Firing a &lt;code
-   title=event-click&gt;click&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
-   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click</A>&quot;&gt;&lt;code&gt;click&lt;/code&gt;&lt;/a&gt;
-   event with no namespace, which bubbles and is cancelable, and which uses
-   the &lt;code&gt;MouseEvent&lt;/code&gt; interface, must be dispatched at the given
-   element. The event object must have its &lt;code title=&quot;&quot;&gt;screenX&lt;/code&gt;,
-   &lt;code title=&quot;&quot;&gt;screenY&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;clientX&lt;/code&gt;, &lt;code
-   title=&quot;&quot;&gt;clientY&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;button&lt;/code&gt; attributes set
-   to 0, its &lt;code title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;,
-   &lt;code title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes
-   set according to the current state of the key input device, if any (false
-   for any keys that are not available), its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
-   attribute set to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute
-   set to null. The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the
-   object must return values appropriately describing the state of the key
-   input device at the time the event is created.
-
-  &lt;p&gt;&lt;dfn id=firing0 title=&quot;fire a change event&quot;&gt;Firing a &lt;code
-   title=event-change&gt;change&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
-   href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change</A>&quot;&gt;&lt;code&gt;change&lt;/code&gt;&lt;/a&gt;
-   event with no namespace, which bubbles but is not cancelable, and which
-   uses the &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at the given
-   element. The event object must have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
-   attribute set to 0.
-
-  &lt;p&gt;&lt;dfn id=firing1 title=&quot;fire a contextmenu event&quot;&gt;Firing a &lt;code
-   title=event-contextmenu&gt;contextmenu&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;code
-   title=event-contextmenu&gt;contextmenu&lt;/code&gt; event with no namespace, which
-   bubbles and is cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt;
-   interface, must be dispatched at the given element. The event object must
-   have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 0.
-
-  &lt;p&gt;&lt;dfn id=firing2 title=&quot;fire a simple event&quot;&gt;Firing a simple event called
-   &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means that an event with the name &lt;var
-   title=&quot;&quot;&gt;e&lt;/var&gt;, with no namespace, which does not bubble but is
-   cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be
-   dispatched at the given element.
-
-  &lt;p&gt;&lt;dfn id=firing3 title=&quot;fire a show event&quot;&gt;Firing a &lt;code
-   title=event-show&gt;show&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
-   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
-   title=event-show&gt;show&lt;/code&gt;&lt;/a&gt;. &lt;span title=issue&gt;Actually this should
-   fire an event that has modifier information (shift/ctrl etc).&lt;/span&gt;
-
-  &lt;p&gt;&lt;dfn id=firing4 title=&quot;fire a load event&quot;&gt;Firing a &lt;code
-   title=event-load&gt;load&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
-   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
-   title=event-load&gt;load&lt;/code&gt;&lt;/a&gt;. &lt;!--&lt;dfn title=&quot;fire a
-  DOMContentLoaded event&quot;&gt;Firing a &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/dfn&gt;
-  means &lt;span title=&quot;fire a simple event&quot;&gt;firing a simple event called
-  &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt;&lt;/span&gt;.--&gt;
-   &lt;dfn id=firing5 title=&quot;fire an error event&quot;&gt;Firing an &lt;code
-   title=event-error&gt;error&lt;/code&gt; event&lt;/dfn&gt; means &lt;a href=&quot;#firing2&quot;
-   title=&quot;fire a simple event&quot;&gt;firing a simple event called &lt;code
-   title=event-error&gt;error&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
-  &lt;!-- XXX need to define the dispatching of DOMActivate --&gt;
-
-  &lt;p class=big-issue&gt;&lt;dfn id=firing6 title=&quot;fire a progress event&quot;&gt;Firing a
-   progress event called &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means something that
-   hasn't yet been defined, in the &lt;a href=&quot;#refsPROGRESS&quot;&gt;[PROGRESS]&lt;/a&gt;
-   spec.
-
-  &lt;p&gt;The default action of these event is to do nothing unless otherwise
-   stated.
-
-  &lt;p class=big-issue&gt;If you dispatch a custom &quot;click&quot; event at an element
-   that would normally have default actions, should they get triggered? If
-   so, we need to go through the entire spec and make sure that any default
-   actions are defined in terms of &lt;em&gt;any&lt;/em&gt; event of the right type on
-   that element, not those that are dispatched in expected ways.
-
-  &lt;h5 id=events0&gt;&lt;span class=secno&gt;4.6.5.3. &lt;/span&gt;Events and the &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
-
-  &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;Document&lt;/code&gt; in
-   a &lt;a href=&quot;#browsing0&quot;&gt;browsing context&lt;/a&gt;, if the event is not a &lt;code
-   title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event, the user agent
-   must also dispatch the event to the &lt;code&gt;&lt;a
-   href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;, as follows:
-
-  &lt;ol&gt;
-   &lt;li&gt;In the capture phase, the event must be dispatched to the &lt;code&gt;&lt;a
-    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object before being dispatched to any of
-    the nodes.
-
-   &lt;li&gt;In the bubble phase, the event must be dispatched to the &lt;code&gt;&lt;a
-    href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object at the end of the phase, unless
-    bubbling has been prevented.
-  &lt;/ol&gt;
-
-  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;4.6.5.4. &lt;/span&gt;Runtime
-   script errors&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section only applies to user agents that support scripting in
-   general and ECMAScript in particular.&lt;/em&gt;
-
-  &lt;p&gt;Whenever a runtime script error occurs in one of the scripts associated
-   with the document, the value of the &lt;code title=handler-onerror&gt;&lt;a
-   href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; &lt;span&gt;event handler DOM
-   attribute&lt;/span&gt; of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; object
-   must be processed, as follows:
-
-  &lt;dl class=switch&gt;
-   &lt;dt&gt;If the value is a function
-
-   &lt;dd&gt;
-    &lt;p&gt;The function referenced by the &lt;code title=handler-onerror&gt;&lt;a
-     href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; attribute must be invoked with three
-     arguments, before notifying the user of the error.&lt;/p&gt;
-
-    &lt;p&gt;The three arguments passed to the function are all
-     &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the UA is
-     considering reporting, the second must give the URI to the resource in
-     which the error occured, and the third must give the line number in that
-     resource on which the error occured.&lt;/p&gt;
-
-    &lt;p&gt;If the function returns false, then the error should not be reported
-     to the user. Otherwise, if the function returns another value (or does
-     not return at all), the error should be reported to the user.&lt;/p&gt;
-
-    &lt;p&gt;Any exceptions thrown or errors caused by this function must be
-     reported to the user immediately after the error that the function was
-     called for, without calling the function again.&lt;/p&gt;
-
-   &lt;dt&gt;If the value is &lt;code&gt;null&lt;/code&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;The error should not reported to the user.&lt;/p&gt;
-
-   &lt;dt&gt;If the value is anything else
-
-   &lt;dd&gt;
-    &lt;p&gt;The error should be reported to the user.&lt;/p&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;The initial value of &lt;code title=handler-onerror&gt;&lt;a
-   href=&quot;#onerror&quot;&gt;onerror&lt;/a&gt;&lt;/code&gt; must be &lt;code&gt;undefined&lt;/code&gt;.
-
-  &lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;4.7. &lt;/span&gt;User prompts&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;dfn id=alert title=dom-alert&gt;&lt;code&gt;alert(&lt;var
-   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
-   given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent may make the
-   method wait for the user to acknowledge the message before returning; if
-   so, the user agent must &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; while the method is
-   waiting.
-
-  &lt;p&gt;The &lt;dfn id=confirm title=dom-confirm&gt;&lt;code&gt;confirm(&lt;var
-   title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show the
-   given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to respond
-   with a positive or negative response. The user agent must then &lt;a
-   href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the user's response.
-   If the user response positively, the method must return true, and if the
-   user response negatively, the method must return false.
-
-  &lt;p&gt;The &lt;dfn id=prompt title=dom-prompt&gt;&lt;code&gt;prompt(&lt;var
-   title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method,
-   when invoked, must show the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user,
-   and ask the user to either respond with a string value or abort. The user
-   agent must then &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; as the the method waits for the
-   user's response. The second argument is optional. If the second argument
-   (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
-   defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the user
-   aborts, then the method must return null; otherwise, the method must
-   return the string that the user responded with.
-
-  &lt;p&gt;The &lt;dfn id=print title=dom-print&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
-   when invoked, should offer the user the opportunity to &lt;a
-   href=&quot;#obtain&quot;&gt;obtain a physical form&lt;/a&gt; of the document. The user agent
-   may make the method wait for the user to either accept or decline before
-   returning; if so, the user agent must &lt;a href=&quot;#pause&quot;&gt;pause&lt;/a&gt; while the
-   method is waiting. (This does not, of course, preclude the user agent from
-   &lt;em&gt;always&lt;/em&gt; offering the user with the opportunity to convert the
-   document to whatever media the user might want.)
-
-  &lt;h3 id=browser&gt;&lt;span class=secno&gt;4.8. &lt;/span&gt;Browser state&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;dfn id=navigator title=dom-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
-   attribute of the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; interface must
-   return an instance of the &lt;code&gt;&lt;a
-   href=&quot;#clientinformation&quot;&gt;ClientInformation&lt;/a&gt;&lt;/code&gt; interface, which
-   represents the identity and state of the user agent (the client), and
-   allows Web pages to register themselves as potential protocol and content
-   handlers:
-
-  &lt;pre
-   class=idl&gt;interface &lt;dfn id=clientinformation&gt;ClientInformation&lt;/dfn&gt; {
-  readonly attribute boolean &lt;a href=&quot;#navigator.online&quot; title=dom-navigator-onLine&gt;onLine&lt;/a&gt;;
-  void &lt;a href=&quot;#registerprotocolhandler&quot; title=dom-navigator-registerProtocolHandler&gt;registerProtocolHandler&lt;/a&gt;(in DOMString protocol, in DOMString uri, in DOMString title);
-  void &lt;a href=&quot;#registercontenthandler&quot; title=dom-navigator-registerContentHandler&gt;registerContentHandler&lt;/a&gt;(in DOMString mimeType, in DOMString uri, in DOMString title);
-&lt;!-- XXX there are other attributes! --&gt;};&lt;/pre&gt;
-  &lt;!-- also, see window.external.AddSearchProvider() and similar DOM APIs from IE --&gt;
-
-  &lt;h4 id=offline&gt;&lt;span class=secno&gt;4.8.1. &lt;/span&gt;Offline Web applications&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn id=navigator.online
-   title=dom-navigator-onLine&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt; attribute
-   must return false if the user agent will not contact the network when the
-   user follows links or when a script requests a remote page (or knows that
-   such an attempt would fail), and must return true otherwise.
-
-  &lt;p&gt;The &lt;dfn id=offline0 title=event-offline&gt;&lt;code&gt;offline&lt;/code&gt;&lt;/dfn&gt;
-   event must be fired when the value of the &lt;code
-   title=dom-navigator-onLine&gt;&lt;a
-   href=&quot;#navigator.online&quot;&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute of the
-   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; changes from true to false.
-
-  &lt;p&gt;The &lt;dfn id=online title=event-online&gt;&lt;code&gt;online&lt;/code&gt;&lt;/dfn&gt; event
-   must be fired when the value of the &lt;code title=dom-navigator-onLine&gt;&lt;a
-   href=&quot;#navigator.online&quot;&gt;navigator.onLine&lt;/a&gt;&lt;/code&gt; attribute of the
-   &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt; changes from false to true.
-
-  &lt;p&gt;These events are in no namespace, do bubble, are not cancelable, have no
-   default action, and use the normal &lt;code&gt;Event&lt;/code&gt; interface. They must
-   be fired on &lt;a href=&quot;#the-body0&quot;&gt;the body element&lt;/a&gt;. (As the events
-   bubble, they will reach the &lt;code&gt;&lt;a href=&quot;#window&quot;&gt;Window&lt;/a&gt;&lt;/code&gt;
-   object.)&lt;/p&gt;
-  &lt;!-- XXX ononline onoffline need to be defined --&gt;
-
-  &lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;4.8.2. &lt;/span&gt;Custom protocol and
-   content handlers&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn id=registerprotocolhandler
-   title=dom-navigator-registerProtocolHandler&gt;&lt;code&gt;registerProtocolHandler()&lt;/code&gt;&lt;/dfn&gt;
-   method allows Web sites to register themselves as possible handlers for
-   particular protocols. For example, an online fax service could register
-   itself as a handler of the &lt;code&gt;fax:&lt;/code&gt; protocol (&lt;a
-   href=&quot;#refsRFC2806&quot;&gt;[RFC2806]&lt;/a&gt;), so that if the user clicks on such a
-   link, he is given the opportunity to use that Web site. Analogously, the
-   &lt;dfn id=registercontenthandler
-   title=dom-navigator-registerContentHandler&gt;&lt;code&gt;registerContentHandler()&lt;/code&gt;&lt;/dfn&gt;
-   method allows Web sites to register themselves as possible handlers for
-   content in a particular MIME type. For example, the same online fax
-   service could register itself as a handler for &lt;code&gt;image/g3fax&lt;/code&gt;
-   files (&lt;a href=&quot;#refsRFC1494&quot;&gt;[RFC1494]&lt;/a&gt;), so that if the user has no
-   native application capable of handling G3 Facsimile byte streams, his Web
-   browser can instead suggest he use that site to view the image.
-
-  &lt;p&gt;User agents may, within the constraints described in this section, do
-   whatever they like when the methods are called. A UA could, for instance,
-   prompt the user and offer the user the opportunity to add the site to a
-   shortlist of handlers, or make the handlers his default, or cancel the
-   request. UAs could provide such a UI through modal UI or through a
-   non-modal transient notification interface. UAs could also simply silently
-   collect the information, providing it only when relevant to the user.
-
-  &lt;p&gt;There is &lt;a href=&quot;#sample-handler-impl&quot;&gt;an example of how these methods
-   could be presented to the user&lt;/a&gt; below.
-
-  &lt;p&gt;The arguments to the methods have the following meanings:
-
-  &lt;dl&gt;
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; (&lt;code
-    title=dom-navigator-registerProtocolHandler&gt;&lt;a
-    href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
-    only)
-
-   &lt;dd&gt;
-    &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The scheme
-     must be treated case-insensitively by user agents for the purposes of
-     comparing with the scheme part of URIs that they consider against the
-     list of registered handlers.&lt;/p&gt;
-
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
-     &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes don't
-     contain colons.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code
-    title=dom-navigator-registerContentHandler&gt;&lt;a
-    href=&quot;#registercontenthandler&quot;&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; only)
-
-   &lt;dd&gt;
-    &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
-     &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
-     case-insensitively by user agents for the purposes of comparing with
-     MIME types of documents that they consider against the list of
-     registered handlers.&lt;/p&gt;
-
-    &lt;p&gt;User agents must compare the given values only to the MIME
-     type/subtype parts of content types, not to the complete type including
-     parameters. Thus, if &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values passed to this
-     method include characters such as commas or whitespace, or include MIME
-     parameters, then the handler being registered will never be used.&lt;/p&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;The URI of the page that will handle the requests. When the user agent
-     uses this URI, it must replace the first occurrence of the exact literal
-     string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version of the URI of the
-     content in question (as defined below), and then fetch the resulting URI
-     using the GET method (or equivalent for non-HTTP URIs).&lt;/p&gt;
-
-    &lt;p&gt;To get the escaped version of the URI, first, the domain part of the
-     URI (if any) must be converted to its punycode representation, and then,
-     every character in the URI that is not in the ranges given in the next
-     paragraph must be replaced by its UTF-8 byte representation, each byte
-     being represented by a U+0025 (%) character and two digits in the range
-     U+0030 (0) to U+0039 (9) and U+0041 (A) to U+0046 (F) giving the
-     hexadecimal representation of the byte.&lt;/p&gt;
-
-    &lt;p&gt;The ranges of characters that must not be escaped are: U+002D (-),
-     U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A (Z), U+005F
-     (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
-    &lt;!-- XXX move that to a common algorithms section if any other
-    part of the spec needs it --&gt;
-    
-    &lt;div class=example&gt;
-     &lt;p&gt;If the user had visited a site that made the following call:&lt;/p&gt;
-
-     &lt;pre&gt;navigator.registerContentHandler('application/x-soup', '<A HREF="http://example.com/soup?url=%s">http://example.com/soup?url=%s</A>', 'SoupWeb&trade;')&lt;/pre&gt;
-
-     &lt;p&gt;...and then clicked on a link such as:&lt;/p&gt;
-
-     &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
-
-     &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file was
-      served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;, the UA might
-      navigate to the following URI:&lt;/p&gt;
-
-     &lt;pre&gt;<A HREF="http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre">http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre</A>&gt;
-
-     &lt;p&gt;This site could then fetch the &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt;
-      file and do whatever it is that it does with soup (synthesise it and
-      ship it to the user, or whatever).&lt;/p&gt;
-    &lt;/div&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;
-
-   &lt;dd&gt;
-    &lt;p&gt;A descriptive title of the handler, which the UA might use to remind
-     the user what the site in question is.&lt;/p&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;User agents should raise &lt;a href=&quot;#security8&quot; title=&quot;security
-   exception&quot;&gt;security exceptions&lt;/a&gt; if the methods are called with &lt;var
-   title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values that the UA
-   deems to be &quot;privileged&quot;. For example, a site attempting to register a
-   handler for &lt;code&gt;http&lt;/code&gt; URIs or &lt;code&gt;text/html&lt;/code&gt; content in a
-   Web browser would likely cause an exception to be raised.
-
-  &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if the &lt;var
-   title=&quot;&quot;&gt;uri&lt;/var&gt; argument passed to one of these methods does not
-   contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.
-
-  &lt;p&gt;User agents must not raise any other exceptions (other than
-   binding-specific exceptions, such as for an incorrect number of arguments
-   in an ECMAScript implementation).
-
-  &lt;p&gt;This section does not define how the pages registered by these methods
-   are used, beyond the requirements on how to process the &lt;var
-   title=&quot;&quot;&gt;uri&lt;/var&gt; value (see above). To some extent, the &lt;span
-   title=&quot;navigating across documents&quot;&gt;processing model for navigating across
-   documents&lt;/span&gt; defines some cases where these methods are relevant, but
-   in general UAs may use this information wherever they would otherwise
-   consider handing content to native plugins or helper applications.
-
-  &lt;p&gt;UAs must not use registered content handlers to handle content that was
-   returned as part of a non-GET transaction (or rather, as part of any
-   non-idempotent transaction), as the remote site would not be able to fetch
-   the same data.
-
-  &lt;h5 id=security4&gt;&lt;span class=secno&gt;4.8.2.1. &lt;/span&gt;Security and privacy&lt;/h5&gt;
-
-  &lt;p&gt;These mechanisms can introduce a number of concerns, in particular
-   privacy concerns.
-
-  &lt;p&gt;&lt;strong&gt;Hijacking all Web usage.&lt;/strong&gt; User agents should not allow
-   protocols that are key to its normal operation, such as &lt;code&gt;http&lt;/code&gt;
-   or &lt;code&gt;https&lt;/code&gt;, to be rerouted through third-party sites. This
-   would allow a user's activities to be trivially tracked, and would allow
-   user information, even in secure connections, to be collected.
-
-  &lt;p&gt;&lt;strong&gt;Hijacking defaults.&lt;/strong&gt; It is strongly recommended that
-   user agents do not automatically change any defaults, as this could lead
-   the user to send data to remote hosts that the user is not expecting. New
-   handlers registering themselves should never automatically cause those
-   sites to be used.
-
-  &lt;p&gt;&lt;strong&gt;Registration spamming.&lt;/strong&gt; User agents should consider the
-   possibility that a site will attempt to register a large number of
-   handlers, possibly from multiple domains (e.g. by redirecting through a
-   series of pages each on a different domain, and each registering a handler
-   for &lt;code&gt;video/mpeg&lt;/code&gt; &mdash; analogous practices abusing other Web
-   browser features have been used by pornography Web sites for many years).
-   User agents should gracefully handle such hostile attempts, protecting the
-   user.
-
-  &lt;p&gt;&lt;strong&gt;Misleading titles.&lt;/strong&gt; User agents should not rely wholy on
-   the &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; argument to the methods when presenting the
-   registered handlers to the user, since sites could easily lie. For
-   example, a site &lt;code&gt;hostile.example.net&lt;/code&gt; could claim that it was
-   registering the &quot;Cuddly Bear Happy Content Handler&quot;. User agents should
-   therefore use the handler's domain in any UI along with any title.
-
-  &lt;p&gt;&lt;strong&gt;Hostile handler metadata.&lt;/strong&gt; User agents should protect
-   against typical attacks against strings embedded in their interface, for
-   example ensuring that markup or escape characters in such strings are not
-   executed, that null bytes are properly handled, that over-long strings do
-   not cause crashes or buffer overruns, and so forth.
-
-  &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described in this
-   section can result in secret Intranet URIs being leaked, in the following
-   manner:
-
-  &lt;ol&gt;
-   &lt;li&gt;The user registers a third-party content handler as the default
-    handler for a content type.
-
-   &lt;li&gt;The user then browses his corporate Intranet site and accesses a
-    document that uses that content type.
-
-   &lt;li&gt;The user agent contacts the third party and hands the third party the
-    URI to the Intranet content.
-  &lt;/ol&gt;
-
-  &lt;p&gt;No actual confidential file data is leaked in this manner, but the URIs
-   themselves could contain confidential information. For example, the URI
-   could be
-   &lt;code&gt;<A HREF="https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code">https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code</A>&gt;,
-   which might tell the third party that Example Corporation is intending to
-   merge with Samples LLC. Implementors might wish to consider allowing
-   administrators to disable this feature for certain subdomains, content
-   types, or protocols.
-
-  &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send HTTPS
-   URIs to third-party sites registered as content handlers, in the same way
-   that user agents do not send &lt;code&gt;Referer&lt;/code&gt; headers from secure
-   sites to third-party sites.
-
-  &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
-   username or password information in the URIs that are escaped and included
-   sent to the handler sites. User agents may even avoid attempting to pass
-   to Web-based handlers the URIs of resources that are known to require
-   authentication to access, as such sites would be unable to access the
-   resources in question without prompting the user for credentials
-   themselves (a practice that would require the user to know whether to
-   trust the third-party handler, a decision many users are unable to make or
-   even understand).
-
-  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;4.8.2.2. &lt;/span&gt;Sample user
-   interface&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;
-
-  &lt;p&gt;A simple implementation of this feature for a desktop Web browser might
-   work as follows.
-
-  &lt;p&gt;The &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a
-   href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
-   method could display a modal dialog box:
-
-  &lt;pre&gt;||[ Protocol Handler Registration ]|||||||||||||||||||||||||||
-|                                                            |
-| This Web page:                                             |
-|                                                            |
-|    Kittens at work                                         |
-|    <A HREF="http://kittens.example.org/">http://kittens.example.org/</A>                             |
-|                                                            |
-| ...would like permission to handle the protocol &quot;x-meow:&quot;  |
-| using the following Web-based application:                 |
-|                                                            |
-|    Kittens-at-work displayer                               |
-|    <A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>                     |
-|                                                            |
-| Do you trust the administrators of the &quot;kittens.example.   |
-| org&quot; domain?                                               |
-|                                                            |
-|              ( Trust kittens.example.org )  (( Cancel ))   |
-|____________________________________________________________|&lt;/pre&gt;
-
-  &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked the
-   method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page, &quot;x-meow&quot; is
-   the string that was passed to the &lt;code
-   title=dom-navigator-registerProtocolHandler&gt;&lt;a
-   href=&quot;#registerprotocolhandler&quot;&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt;
-   method as its first argument (&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt;),
-   &quot;<A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>&quot; was the second argument (&lt;var
-   title=&quot;&quot;&gt;uri&lt;/var&gt;), and &quot;Kittens-at-work displayer&quot; was the third
-   argument (&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;).
-
-  &lt;p&gt;If the user clicks the Cancel button, then nothing further happens. If
-   the user clicks the &quot;Trust&quot; button, then the handler is remembered.
-
-  &lt;p&gt;When the user then attempts to fetch a URI that uses the &quot;x-meow:&quot;
-   scheme, then it might display a dialog as follows:
-
-  &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
-|                                                            |
-| You have attempted to access:                              |
-|                                                            |
-|    x-meow:S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%3D               |
-|                                                            |
-| How would you like FerretBrowser to handle this resource?  |
-|                                                            |
-|  (o) Contact the FerretBrowser plugin registry to see if   |
-|      there is an official way to handle this resource.     |
-|                                                            |
-|  ( ) Pass this URI to a local application:                 |
-|      [ /no application selected/             ] ( Choose )  |
-|                                                            |
-|  ( ) Pass this URI to the &quot;Kittens-at-work displayer&quot;      |
-|      application at &quot;kittens.example.org&quot;.                 |
-|                                                            |
-|  [ ] Always do this for resources using the &quot;x-meow&quot;       |
-|      protocol in future.                                   |
-|                                                            |
-|                                     ( Ok )  (( Cancel ))   |
-|____________________________________________________________|&lt;/pre&gt;
-
-  &lt;p&gt;...where the third option is the one that was primed by the site
-   registering itself earlier.
-
-  &lt;p&gt;If the user does select that option, then the browser, in accordance
-   with the requirements described in the previous two sections, will
-   redirect the user to
-   &quot;<A HREF="http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D">http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D</A>&quot;.
-
-  &lt;p&gt;The &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a
-   href=&quot;#registercontenthandler&quot;&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; method
-   would work equivalently, but for unknown MIME types instead of unknown
-   protocols.
-
   &lt;h3 id=storage&gt;&lt;span class=secno&gt;4.9. &lt;/span&gt;Client-side session and
    persistent storage of name/value pairs&lt;/h3&gt;
 

Modified: source
===================================================================
--- source	2007-09-25 09:22:34 UTC (rev 1035)
+++ source	2007-09-25 09:54:15 UTC (rev 1036)
@@ -22215,6 +22215,1174 @@
 
 
 
+  &lt;h3 id=&quot;scripting&quot;&gt;Scripting&lt;/h3&gt;
+
+  &lt;h4&gt;Running executable code&lt;/h4&gt;
+
+  &lt;p&gt;Various mechanisms can cause author-provided executable code to
+  run in the context of a document. These mechanisms include, but are
+  probably not limited to:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;Processing of &lt;code&gt;script&lt;/code&gt; elements.&lt;/li&gt;
+
+   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript
+   protocol&quot;&gt;javascript:&lt;/code&gt; URIs (e.g. the &lt;code
+   title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of &lt;code&gt;img&lt;/code&gt;
+   elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt; rule in a CSS
+   &lt;code&gt;style&lt;/code&gt; element block).&lt;/li&gt;
+
+   &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code
+   title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;span&gt;event handler
+   content attributes&lt;/span&gt;, by &lt;span&gt;event handler DOM
+   attributes&lt;/span&gt;, or otherwise.&lt;/li&gt;
+
+   &lt;li&gt;Processing of technologies like XBL or SVG that have their own
+   scripting features.&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;User agents may provide a mechanism to enable or disable the
+  execution of author-provided code. When the user agent is configured
+  such that author-provided code does not execute, or if the user
+  agent is implemented so as to never execute author-provided code, it
+  is said that &lt;dfn&gt;scripting is disabled&lt;/dfn&gt;. When author-provided
+  code &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn&gt;scripting is enabled&lt;/dfn&gt;. A user
+  agent with scripting disabled is a &lt;span title=&quot;User agents with no
+  scripting support&quot;&gt;user agent with no scripting support&lt;/span&gt; for
+  the purposes of conformance.&lt;/p&gt;
+
+
+  &lt;h4&gt;Origin&lt;/h4&gt;
+  &lt;!-- Hallowed are the Ori --&gt;
+
+  &lt;!--
+    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=346659">https://bugzilla.mozilla.org/show_bug.cgi?id=346659</A>
+    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=344495">https://bugzilla.mozilla.org/show_bug.cgi?id=344495</A>
+  --&gt;
+
+  &lt;p&gt;Access to certain APIs is granted or denied to scripts based on
+  the &lt;dfn&gt;origin&lt;/dfn&gt; of the script and the API being accessed.&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;If a script is in a &lt;code&gt;script&lt;/code&gt; element&lt;/dt&gt;
+
+   &lt;dd&gt;The origin of the script is the origin of the
+   &lt;code&gt;Document&lt;/code&gt; to which the &lt;code&gt;script&lt;/code&gt; element
+   belongs.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a function or other code reference created by
+   another script&lt;/dt&gt;
+
+   &lt;dd&gt;The origin of the script is the origin of the script that
+   created it.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in an attribute&lt;/dt&gt;
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
+   element on which the attribute is found.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in a style sheet&lt;/dt&gt;
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; to which
+   the style sheet applies.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
+   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
+   the URI having been provided by the user (e.g. by using a
+   &lt;i&gt;bookmarklet&lt;/i&gt;)&lt;/dt&gt;
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
+   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
+   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
+   the URI having been declared in markup&lt;/dt&gt;
+
+   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
+   element (e.g. an &lt;code&gt;a&lt;/code&gt; or &lt;code&gt;area&lt;/code&gt; element) that
+   declared the URI.&lt;/dd&gt;
+
+
+   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
+   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
+   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
+   the URI having been provided by script&lt;/dt&gt;
+
+   &lt;dd&gt;The origin is the origin of the script that provided the
+   URI.&lt;/dd&gt;
+
+   &lt;!-- ... --&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The origin of scripts thus comes down to finding the origin of
+  &lt;code&gt;Document&lt;/code&gt; objects.&lt;/p&gt;
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was served
+  over the network and whose address uses a URI scheme with a
+  server-based naming authority is the tuple consisting of the
+  &lt;scheme&gt;, &lt;host&gt;, and &lt;port&gt; parts of the
+  &lt;code&gt;Document&lt;/code&gt;'s full URI. &lt;a
+  href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
+  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; &lt;a
+  href=&quot;#refsRFC2732&quot;&gt;[RFC2732]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
+  from a &lt;code&gt;data:&lt;/code&gt; URI found in another &lt;code&gt;Document&lt;/code&gt;
+  or in a script is the origin of the that &lt;code&gt;Document&lt;/code&gt; or
+  script.&lt;/p&gt;
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
+  from a &lt;code&gt;data:&lt;/code&gt; URI from another source is a globally
+  unique identifier assigned when the document is created.&lt;/p&gt;
+
+  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
+  from a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt;
+  URI&lt;/span&gt; is the same as the origin of that
+  &lt;code&gt;javascript:&lt;/code&gt; URI.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn&gt;The string representing the script's domain in IDNA
+  format&lt;/dfn&gt; is obtained as follows: take the domain part of the
+  script's &lt;span&gt;origin&lt;/span&gt; tuple and apply the IDNA ToASCII
+  algorithm and then the IDNA ToUnicode algorithm to each component of
+  the domain name (with both the AllowUnassigned and UseSTD3ASCIIRules
+  flags set both times). &lt;a href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;If ToASCII fails to convert one of the components of the string,
+  e.g. because it is too long or because it contains invalid
+  characters, or if the origin of the script has no domain part, then
+  the string representing the script's domain in IDNA format cannot be
+  obtained. (ToUnicode is defined to never fail.)&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;It's been suggested that we should put IP
+  addresses into the origin tuple, to mitigate DNS rebinding
+  attacks. However that would kill multi-homed systems like
+  GMail. Should we do something like have a DNS record say whether or
+  not to include the IP in the origin for a host?&lt;/p&gt;
+
+
+  &lt;h4&gt;Security exceptions&lt;/h4&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;Define &lt;dfn&gt;security exception&lt;/dfn&gt;.&lt;/p&gt;
+
+
+  &lt;h4 id=&quot;javascript-protocol&quot;&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
+
+  &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must,
+  if evaluated, be evaluated using the in-context evaluation operation
+  defined for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URIs. &lt;a
+  href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
+
+&lt;!--
+JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
+       <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
+       <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
+--&gt;
+
+  &lt;p&gt;When a browsing context is &lt;span
+  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
+  and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has
+  the same &lt;span&gt;origin&lt;/span&gt; as the URI, the dereference context
+  must be the &lt;span&gt;browsing context&lt;/span&gt; being navigated.&lt;/p&gt;
+
+  &lt;p&gt;When a browsing context is &lt;span
+  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
+  and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has a
+  &lt;em&gt;different&lt;/em&gt; &lt;span&gt;origin&lt;/span&gt; than the URI, the dereference
+  context must be an empty object.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, the dereference context must the &lt;span&gt;browsing
+  context&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; to which belongs the
+  element for which the URI is being dereferenced, or to which the
+  style sheet for which the URI is being dereferenced applies,
+  whichever is appropriate.&lt;/p&gt;
+
+  &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should
+  be evaluated when the resource for that URI is needed, unless
+  &lt;span&gt;scripting is disabled&lt;/span&gt; or the &lt;code&gt;Document&lt;/code&gt;
+  corresponding to the dereference context (as defined above), if any,
+  has &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt;
+  enabled.&lt;/p&gt;
+
+  &lt;p&gt;If the dereference by-product is void (there is no return value),
+  then the URI must be treated in a manner equivalent to an HTTP
+  resource with an HTTP 204 No Content response.&lt;/p&gt;
+
+  &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an
+  HTTP resource with a 200 OK response whose &lt;span
+  title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; is &lt;code
+  title=&quot;&quot;&gt;text/html&lt;/code&gt; and whose response body is the dereference
+  by-product, converted to a string value.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;Certain contexts, in particular &lt;code&gt;img&lt;/code&gt;
+  elements, ignore the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type
+  metadata&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;div class=&quot;example&quot;&gt;
+
+   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a
+   &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of an
+   &lt;code&gt;img&lt;/code&gt; element would be evaluated in the context of the
+   page as soon as the attribute is set; it would then be sniffed to
+   determine the image type and decoded as an image.&lt;/p&gt;
+
+   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
+   title=&quot;attr-a-href&quot;&gt;href&lt;/code&gt; attribute of an &lt;code&gt;a&lt;/code&gt;
+   element would only be evaluated when the link was &lt;span
+   title=&quot;following hyperlinks&quot;&gt;followed&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;p&gt;The &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute of an
+   &lt;code&gt;iframe&lt;/code&gt; element would be evaluated in the context of
+   the &lt;code&gt;iframe&lt;/code&gt;'s own &lt;span&gt;browsing context&lt;/span&gt;; once
+   evaluated, its return value (if it was not void) would replace that
+   &lt;span&gt;browsing context&lt;/span&gt;'s document, thus changing the
+   variables visible in that &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h4&gt;Events&lt;/h4&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;We need to define how to handle events that are
+  to be fired on a Document that is no longer the active document of
+  its browsing context, and for Documents that have no browsing
+  context. Do the events fire? Do the handlers in that document not
+  fire? Do we just define scripting to be disabled when the document
+  isn't active, with events still running as is? See also the
+  &lt;code&gt;script&lt;/code&gt; element section, which says scripts don't run
+  when the document isn't active.&lt;/p&gt;
+
+  &lt;h5 id=&quot;event-handler-attributes&quot;&gt;Event handler attributes&lt;/h5&gt;
+
+  &lt;p&gt;&lt;span&gt;HTML elements&lt;/span&gt; can have &lt;dfn&gt;event handler
+  attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
+  for the element on which they are specified.&lt;/p&gt;
+
+  &lt;p&gt;Each event handler attribute has two parts, an &lt;span title=&quot;event
+  handler content attributes&quot;&gt;event handler content attribute&lt;/span&gt;
+  and an &lt;span title=&quot;event handler DOM attributes&quot;&gt;event handler DOM
+  attribute&lt;/span&gt;. Event handler attributes must initially be set to
+  null. When their value changes (through the changing of their event
+  handler content attribute or their event handler DOM attribute),
+  they will either be null, or have an &lt;code&gt;EventListener&lt;/code&gt;
+  object assigned to them.&lt;/p&gt;
+
+  &lt;p&gt;Objects other than &lt;code&gt;Element&lt;/code&gt; objects, in particular
+  &lt;code&gt;Window&lt;/code&gt;, only have &lt;span title=&quot;event handler DOM
+  attributes&quot;&gt;event handler DOM attribute&lt;/span&gt; (since they have no
+  content attributes).&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Event handler content attributes&lt;/dfn&gt;, when specified, must
+  contain valid ECMAScript code matching the ECMAScript &lt;code
+  title=&quot;&quot;&gt;FunctionBody&lt;/code&gt; production. &lt;a
+  href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;When an event handler content attribute is set, its new value
+  must be interpreted as the body of an anonymous function with a
+  single argument called &lt;code&gt;event&lt;/code&gt;, with the new function's
+  scope chain being linked from the activation object of the handler,
+  to the element, to the element's &lt;code&gt;form&lt;/code&gt; element if it is
+  a form control, to the &lt;code&gt;Document&lt;/code&gt; object, to the
+  &lt;span&gt;browsing context&lt;/span&gt; of that &lt;code&gt;Document&lt;/code&gt;. The
+  function's &lt;code&gt;this&lt;/code&gt; parameter must be the
+  &lt;code&gt;Element&lt;/code&gt; object representing the element. The resulting
+  function must then be set as the value of the corresponding event
+  handler attribute, and the new value must be set as the value of the
+  content attribute. If the given function body fails to compile, then
+  the corresponding event handler attribute must be set to null
+  instead (the content attribute must still be updated to the new
+  value, though).&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3,
+  for more details on activation objects. &lt;a
+  href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p class=&quot;issue&quot;&gt;How do we allow non-JS event handlers?&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set the
+  corresponding event handler attribute to their new value, and on
+  getting, must return whatever the current value of the corresponding
+  event handler attribute is (possibly null).&lt;/p&gt;
+
+  &lt;p&gt;The following are the event handler attributes that must be
+  supported by all &lt;span&gt;HTML elements&lt;/span&gt;, as both content
+  attributes and DOM attributes, and on &lt;code&gt;Window&lt;/code&gt; objects,
+  as DOM attributes:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onabort&quot;&gt;&lt;code&gt;onabort&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
+   title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforecopy&quot;&gt;&lt;code&gt;onbeforecopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-beforecopy&quot;&gt;beforecopy&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforeunload&quot;&gt;&lt;code&gt;onbeforeunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-beforeunload&quot;&gt;beforeunload&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onblur&quot;&gt;&lt;code&gt;onblur&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-blur&quot;&gt;blur&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onchange&quot;&gt;&lt;code&gt;onchange&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-change&quot;&gt;change&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onclick&quot;&gt;&lt;code&gt;onclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-click&quot;&gt;click&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-oncontextmenu&quot;&gt;&lt;code&gt;oncontextmenu&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-oncopy&quot;&gt;&lt;code&gt;oncopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-copy&quot;&gt;copy&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondblclick&quot;&gt;&lt;code&gt;ondblclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dblclick&quot;&gt;dblclick&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondrag&quot;&gt;&lt;code&gt;ondrag&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-drag&quot;&gt;drag&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragend&quot;&gt;&lt;code&gt;ondragend&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dragend&quot;&gt;dragend&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragenter&quot;&gt;&lt;code&gt;ondragenter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dragenter&quot;&gt;dragenter&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragleave&quot;&gt;&lt;code&gt;ondragleave&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dragleave&quot;&gt;dragleave&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragover&quot;&gt;&lt;code&gt;ondragover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dragover&quot;&gt;dragover&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragstart&quot;&gt;&lt;code&gt;ondragstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-dragstart&quot;&gt;dragstart&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-ondrop&quot;&gt;&lt;code&gt;ondrop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-drop&quot;&gt;drop&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onerror&quot;&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
+   title=&quot;event-error&quot;&gt;error&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;
+
+   &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt;
+   handler is also used for &lt;a href=&quot;#runtime-script-errors&quot;&gt;reporting
+   script errors&lt;/a&gt;.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onfocus&quot;&gt;&lt;code&gt;onfocus&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-focus&quot;&gt;focus&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeydown&quot;&gt;&lt;code&gt;onkeydown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-keydown&quot;&gt;keydown&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeypress&quot;&gt;&lt;code&gt;onkeypress&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-keypress&quot;&gt;keypress&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeyup&quot;&gt;&lt;code&gt;onkeyup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-keyup&quot;&gt;keyup&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onload&quot;&gt;&lt;code&gt;onload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-load&quot;&gt;load&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmessage&quot;&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- introduced for &lt;event-source&gt; --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-message&quot;&gt;message&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousedown&quot;&gt;&lt;code&gt;onmousedown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mousedown&quot;&gt;mousedown&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousemove&quot;&gt;&lt;code&gt;onmousemove&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mousemove&quot;&gt;mousemove&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseout&quot;&gt;&lt;code&gt;onmouseout&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mouseout&quot;&gt;mouseout&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseover&quot;&gt;&lt;code&gt;onmouseover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mouseover&quot;&gt;mouseover&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseup&quot;&gt;&lt;code&gt;onmouseup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mouseup&quot;&gt;mouseup&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousewheel&quot;&gt;&lt;code&gt;onmousewheel&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-mousewheel&quot;&gt;mousewheel&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+&lt;!--
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onpaste&quot;&gt;&lt;code&gt;onpaste&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-paste&quot;&gt;paste&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onresize&quot;&gt;&lt;code&gt;onresize&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-resize&quot;&gt;resize&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onscroll&quot;&gt;&lt;code&gt;onscroll&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-scroll&quot;&gt;scroll&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onselect&quot;&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-select&quot;&gt;select&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
+
+&lt;!--XXX
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onselectstart&quot;&gt;&lt;code&gt;onselectstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-selectstart&quot;&gt;selectstart&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+--&gt; &lt;!-- XXX should define when it fires --&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onsubmit&quot;&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
+   title=&quot;event-submit&quot;&gt;submit&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;handler-onunload&quot;&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
+
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
+   title=&quot;event-unload&quot;&gt;unload&lt;/code&gt; event is targeted at or bubbles
+   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX need to fire this --&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;When an event handler attribute is invoked, its argument must be
+  set to the &lt;code&gt;Event&lt;/code&gt; object of the event in question. If
+  the function returns the exact boolean value false, the event's
+  &lt;code&gt;preventDefault()&lt;/code&gt; method must then invoked. Exception:
+  for historical reasons, for the HTML &lt;code&gt;mouseover&lt;/code&gt; event,
+  the &lt;code&gt;preventDefault()&lt;/code&gt; method must be called when the
+  function returns true instead.&lt;/p&gt;
+
+  &lt;!-- IE actually uncancels the event if the function returns true --&gt;
+
+
+  &lt;p&gt;When &lt;span&gt;scripting is disabled&lt;/span&gt;, event handler attributes
+  must do nothing.&lt;/p&gt;
+
+  &lt;p&gt;When &lt;span&gt;scripting is enabled&lt;/span&gt;, all event handler
+  attributes on an element, whether set to null or to a function, must
+  be registered as event listeners on the element, as if the &lt;code
+  title=&quot;dom-EventTarget-addEventListenerNS&quot;&gt;addEventListenerNS()&lt;/code&gt;
+  method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
+  interface had been invoked when the element was created, with the
+  event type (&lt;code title=&quot;dom-event-type&quot;&gt;type&lt;/code&gt; argument) equal
+  to the type described for the event handler attribute in the list
+  above, the namespace (&lt;code
+  title=&quot;dom-event-namespaceURI&quot;&gt;namespaceURI&lt;/code&gt; argument) set to
+  null, the listener set to be a target and bubbling phase listener
+  (&lt;code title=&quot;dom-event-useCapture&quot;&gt;useCapture&lt;/code&gt; argument set
+  to false), the event group set to the default group (&lt;code
+  title=&quot;dom-event-evtGroup&quot;&gt;evtGroup&lt;/code&gt; argument set to null),
+  and the event listener itself (&lt;code
+  title=&quot;dom-event-listener&quot;&gt;listener&lt;/code&gt; argument) set to do
+  nothing while the event handler attribute is null, and set to invoke
+  the function associated with the event handler attribute
+  otherwise.&lt;/p&gt;
+
+
+  &lt;h5&gt;Event firing&lt;/h5&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;maybe this should be moved higher up
+  (terminology? conformance? DOM?) Also, the whole terminology thing
+  should be changed so that we don't define any specific events here,
+  we only define 'simple event', 'progress event', 'mouse event', 'key
+  event', and the like, and have the actual dispatch use those generic
+  terms when firing events.&lt;/p&gt;
+
+  &lt;p&gt;Certain operations and methods are defined as firing events on
+  elements. For example, the &lt;code title=&quot;dom-click&quot;&gt;click()&lt;/code&gt;
+  method on the &lt;code&gt;HTMLElement&lt;/code&gt; interface is defined as
+  firing a &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event on the
+  element.  &lt;a href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a click event&quot;&gt;Firing a &lt;code
+  title=&quot;event-click&quot;&gt;click&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
+  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click</A>&quot;&gt;&lt;code&gt;click&lt;/code&gt;&lt;/a&gt;
+  event with no
+  namespace, which bubbles and is cancelable, and which uses the
+  &lt;code&gt;MouseEvent&lt;/code&gt; interface, must be dispatched at the given
+  element. The event object must have its &lt;code
+  title=&quot;&quot;&gt;screenX&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;screenY&lt;/code&gt;, &lt;code
+  title=&quot;&quot;&gt;clientX&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;clientY&lt;/code&gt;, and &lt;code
+  title=&quot;&quot;&gt;button&lt;/code&gt; attributes set to 0, its &lt;code
+  title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;, &lt;code
+  title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes
+  set according to the current state of the key input device, if any
+  (false for any keys that are not available), its &lt;code
+  title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 1, and its &lt;code
+  title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute set to null. The &lt;code
+  title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return
+  values appropriately describing the state of the key input device at
+  the time the event is created.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a change event&quot;&gt;Firing a &lt;code
+  title=&quot;event-change&quot;&gt;change&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
+  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change</A>&quot;&gt;&lt;code&gt;change&lt;/code&gt;&lt;/a&gt;
+  event with no namespace, which bubbles but is not cancelable, and
+  which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at
+  the given element. The event object must have its &lt;code
+  title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 0.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a contextmenu event&quot;&gt;Firing a &lt;code
+  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event&lt;/dfn&gt; means that
+  a &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event with no
+  namespace, which bubbles and is cancelable, and which uses the
+  &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at the given
+  element. The event object must have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
+  attribute set to 0.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a simple event&quot;&gt;Firing a simple event called
+  &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means that an event with the name &lt;var
+  title=&quot;&quot;&gt;e&lt;/var&gt;, with no namespace, which does not bubble but is
+  cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be
+  dispatched at the given element.&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a show event&quot;&gt;Firing a &lt;code
+  title=&quot;event-show&quot;&gt;show&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire a
+  simple event&quot;&gt;firing a simple event called &lt;code
+  title=&quot;event-show&quot;&gt;show&lt;/code&gt;&lt;/span&gt;. &lt;span title=&quot;issue&quot;&gt;Actually
+  this should fire an event that has modifier information (shift/ctrl
+  etc).&lt;/span&gt;&lt;/p&gt;
+
+  &lt;p&gt;&lt;dfn title=&quot;fire a load event&quot;&gt;Firing a &lt;code
+  title=&quot;event-load&quot;&gt;load&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire a
+  simple event&quot;&gt;firing a simple event called &lt;code
+  title=&quot;event-load&quot;&gt;load&lt;/code&gt;&lt;/span&gt;. &lt;!--&lt;dfn title=&quot;fire a
+  DOMContentLoaded event&quot;&gt;Firing a &lt;code
+  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/dfn&gt;
+  means &lt;span title=&quot;fire a simple event&quot;&gt;firing a simple event called
+  &lt;code
+  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt;&lt;/span&gt;.--&gt;
+  &lt;dfn title=&quot;fire an error event&quot;&gt;Firing an &lt;code
+  title=&quot;event-error&quot;&gt;error&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire
+  a simple event&quot;&gt;firing a simple event called &lt;code
+  title=&quot;event-error&quot;&gt;error&lt;/code&gt;&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;!-- XXX need to define the dispatching of DOMActivate --&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;&lt;dfn title=&quot;fire a progress event&quot;&gt;Firing a
+  progress event called &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means something
+  that hasn't yet been defined, in the &lt;a
+  href=&quot;#refsPROGRESS&quot;&gt;[PROGRESS]&lt;/a&gt; spec.&lt;/p&gt;
+
+  &lt;p&gt;The default action of these event is to do nothing unless
+  otherwise stated.&lt;/p&gt;
+
+  &lt;p class=&quot;big-issue&quot;&gt;If you dispatch a custom &quot;click&quot; event at an
+  element that would normally have default actions, should they get
+  triggered? If so, we need to go through the entire spec and make
+  sure that any default actions are defined in terms of &lt;em&gt;any&lt;/em&gt;
+  event of the right type on that element, not those that are
+  dispatched in expected ways.&lt;/p&gt;
+
+
+  &lt;h5&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/h5&gt;
+
+  &lt;p&gt;When an event is dispatched at a DOM node in a
+  &lt;code&gt;Document&lt;/code&gt; in a &lt;span&gt;browsing context&lt;/span&gt;, if the
+  event is not a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event, the user
+  agent must also dispatch the event to the &lt;code&gt;Window&lt;/code&gt;, as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;In the capture phase, the event must be dispatched to the
+   &lt;code&gt;Window&lt;/code&gt; object before being dispatched to any of the
+   nodes.&lt;/li&gt;
+
+   &lt;li&gt;In the bubble phase, the event must be dispatched to the
+   &lt;code&gt;Window&lt;/code&gt; object at the end of the phase, unless bubbling
+   has been prevented.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
+
+  &lt;h5 id=&quot;runtime-script-errors&quot;&gt;Runtime script errors&lt;/h5&gt;
+
+  &lt;p&gt;&lt;em&gt;This section only applies to user agents that support
+  scripting in general and ECMAScript in particular.&lt;/em&gt;&lt;/p&gt;
+
+  &lt;p&gt;Whenever a runtime script error occurs in one of the scripts
+  associated with the document, the value of the &lt;code
+  title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt; &lt;span&gt;event handler DOM
+  attribute&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object must be
+  processed, as follows:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;If the value is a function&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The function referenced by the &lt;code
+    title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt; attribute must be invoked
+    with three arguments, before notifying the user of the error.&lt;/p&gt;
+
+    &lt;p&gt;The three arguments passed to the function are all
+    &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the
+    UA is considering reporting, the second must give the URI to the
+    resource in which the error occured, and the third must give the
+    line number in that resource on which the error occured.&lt;/p&gt;
+
+    &lt;p&gt;If the function returns false, then the error should not be
+    reported to the user. Otherwise, if the function returns another
+    value (or does not return at all), the error should be reported to
+    the user.&lt;/p&gt;
+
+    &lt;p&gt;Any exceptions thrown or errors caused by this function must be
+    reported to the user immediately after the error that the function
+    was called for, without calling the function again.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;If the value is &lt;code&gt;null&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The error should not reported to the user.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;If the value is anything else&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The error should be reported to the user.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The initial value of &lt;code title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt;
+  must be &lt;code&gt;undefined&lt;/code&gt;.&lt;/p&gt;
+
+
+
+  &lt;h3&gt;User prompts&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-alert&quot;&gt;&lt;code&gt;alert(&lt;var
+  title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
+  the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent
+  may make the method wait for the user to acknowledge the message
+  before returning; if so, the user agent must &lt;span&gt;pause&lt;/span&gt;
+  while the method is waiting.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-confirm&quot;&gt;&lt;code&gt;confirm(&lt;var
+  title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
+  the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user
+  to respond with a positive or negative response. The user agent must
+  then &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
+  response. If the user response positively, the method must return
+  true, and if the user response negatively, the method must return
+  false.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-prompt&quot;&gt;&lt;code&gt;prompt(&lt;var
+  title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
+  method, when invoked, must show the given &lt;var
+  title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to either
+  respond with a string value or abort. The user agent must then
+  &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
+  response. The second argument is optional. If the second argument
+  (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
+  defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the
+  user aborts, then the method must return null; otherwise, the method
+  must return the string that the user responded with.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-print&quot;&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
+  when invoked, should offer the user the opportunity to &lt;span&gt;obtain
+  a physical form&lt;/span&gt; of the document. The user agent may make the
+  method wait for the user to either accept or decline before
+  returning; if so, the user agent must &lt;span&gt;pause&lt;/span&gt; while the
+  method is waiting.  (This does not, of course, preclude the user
+  agent from &lt;em&gt;always&lt;/em&gt; offering the user with the opportunity to
+  convert the document to whatever media the user might want.)&lt;/p&gt;
+
+
+
+  &lt;h3&gt;Browser state&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-navigator&quot;&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
+  attribute of the &lt;code&gt;Window&lt;/code&gt; interface must return an
+  instance of the &lt;code&gt;ClientInformation&lt;/code&gt; interface, which
+  represents the identity and state of the user agent (the client),
+  and allows Web pages to register themselves as potential protocol
+  and content handlers:&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ClientInformation&lt;/dfn&gt; {
+  readonly attribute boolean &lt;span title=&quot;dom-navigator-onLine&quot;&gt;onLine&lt;/span&gt;;
+  void &lt;span title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler&lt;/span&gt;(in DOMString protocol, in DOMString uri, in DOMString title);
+  void &lt;span title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler&lt;/span&gt;(in DOMString mimeType, in DOMString uri, in DOMString title);
+&lt;!-- XXX there are other attributes! --&gt;};&lt;/pre&gt;
+&lt;!-- also, see window.external.AddSearchProvider() and similar DOM APIs from IE --&gt;
+
+  &lt;h4 id=&quot;offline&quot;&gt;Offline Web applications&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-navigator-onLine&quot;&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt;
+  attribute must return false if the user agent will not contact the
+  network when the user follows links or when a script requests a
+  remote page (or knows that such an attempt would fail), and must
+  return true otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;event-offline&quot;&gt;&lt;code&gt;offline&lt;/code&gt;&lt;/dfn&gt; event
+  must be fired when the value of the &lt;code
+  title=&quot;dom-navigator-onLine&quot;&gt;navigator.onLine&lt;/code&gt; attribute of
+  the &lt;code&gt;Window&lt;/code&gt; changes from true to false.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;event-online&quot;&gt;&lt;code&gt;online&lt;/code&gt;&lt;/dfn&gt; event
+  must be fired when the value of the &lt;code
+  title=&quot;dom-navigator-onLine&quot;&gt;navigator.onLine&lt;/code&gt; attribute of
+  the &lt;code&gt;Window&lt;/code&gt; changes from false to true.&lt;/p&gt;
+
+  &lt;p&gt;These events are in no namespace, do bubble, are not cancelable,
+  have no default action, and use the normal &lt;code&gt;Event&lt;/code&gt;
+  interface. They must be fired on &lt;span&gt;the body element&lt;/span&gt;. (As
+  the events bubble, they will reach the &lt;code&gt;Window&lt;/code&gt;
+  object.)&lt;/p&gt;
+
+  &lt;!-- XXX ononline onoffline need to be defined --&gt;
+
+  &lt;h4 id=&quot;custom-handlers&quot;&gt;Custom protocol and content handlers&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;&lt;code&gt;registerProtocolHandler()&lt;/code&gt;&lt;/dfn&gt;
+  method allows Web sites to register themselves as possible handlers
+  for particular protocols. For example, an online fax service could
+  register itself as a handler of the &lt;code&gt;fax:&lt;/code&gt; protocol (&lt;a
+  href=&quot;#refsRFC2806&quot;&gt;[RFC2806]&lt;/a&gt;), so that if the user clicks on
+  such a link, he is given the opportunity to use that Web
+  site. Analogously, the &lt;dfn
+  title=&quot;dom-navigator-registerContentHandler&quot;&gt;&lt;code&gt;registerContentHandler()&lt;/code&gt;&lt;/dfn&gt;
+  method allows Web sites to register themselves as possible handlers
+  for content in a particular MIME type. For example, the same online
+  fax service could register itself as a handler for
+  &lt;code&gt;image/g3fax&lt;/code&gt; files (&lt;a
+  href=&quot;#refsRFC1494&quot;&gt;[RFC1494]&lt;/a&gt;), so that if the user has no
+  native application capable of handling G3 Facsimile byte streams,
+  his Web browser can instead suggest he use that site to view the
+  image.&lt;/p&gt;
+
+  &lt;p&gt;User agents may, within the constraints described in this
+  section, do whatever they like when the methods are called. A UA
+  could, for instance, prompt the user and offer the user the
+  opportunity to add the site to a shortlist of handlers, or make the
+  handlers his default, or cancel the request. UAs could provide such
+  a UI through modal UI or through a non-modal transient notification
+  interface. UAs could also simply silently collect the information,
+  providing it only when relevant to the user.&lt;/p&gt;
+
+  &lt;p&gt;There is &lt;a href=&quot;#sample-handler-impl&quot;&gt;an example of how these
+  methods could be presented to the user&lt;/a&gt; below.&lt;/p&gt;
+
+  &lt;p&gt;The arguments to the methods have the following meanings:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; (&lt;code title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt; only)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The
+    scheme must be treated case-insensitively by user agents for the
+    purposes of comparing with the scheme part of URIs that they
+    consider against the list of registered handlers.&lt;/p&gt;
+
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
+    &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes
+    don't contain colons.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt; only)&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
+    &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
+    case-insensitively by user agents for the purposes of comparing
+    with MIME types of documents that they consider against the list
+    of registered handlers.&lt;/p&gt;
+
+    &lt;p&gt;User agents must compare the given values only to the MIME
+    type/subtype parts of content types, not to the complete type
+    including parameters. Thus, if &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values
+    passed to this method include characters such as commas or
+    whitespace, or include MIME parameters, then the handler being
+    registered will never be used.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The URI of the page that will handle the requests. When the
+    user agent uses this URI, it must replace the first occurrence of
+    the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version
+    of the URI of the content in question (as defined below), and then
+    fetch the resulting URI using the GET method (or equivalent for
+    non-HTTP URIs).&lt;/p&gt;
+
+    &lt;p&gt;To get the escaped version of the URI, first, the domain part
+    of the URI (if any) must be converted to its punycode
+    representation, and then, every character in the URI that is not
+    in the ranges given in the next paragraph must be replaced by its
+    UTF-8 byte representation, each byte being represented by a U+0025
+    (%) character and two digits in the range U+0030 (0) to U+0039 (9)
+    and U+0041 (A) to U+0046 (F) giving the hexadecimal representation
+    of the byte.&lt;/p&gt;
+
+    &lt;p&gt;The ranges of characters that must not be escaped are: U+002D
+    (-), U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A
+    (Z), U+005F (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
+
+    &lt;!-- XXX move that to a common algorithms section if any other
+    part of the spec needs it --&gt;
+
+    &lt;div class=&quot;example&quot;&gt;
+
+     &lt;p&gt;If the user had visited a site that made the following call:&lt;/p&gt;
+
+     &lt;pre&gt;navigator.registerContentHandler('application/x-soup', '<A HREF="http://example.com/soup?url=%s">http://example.com/soup?url=%s</A>', 'SoupWeb&trade;')&lt;/pre&gt;
+
+     &lt;p&gt;...and then clicked on a link such as:&lt;/p&gt;
+
+     &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
+
+     &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file
+     was served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;,
+     the UA might navigate to the following URI:&lt;/p&gt;
+
+     &lt;pre&gt;<A HREF="http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre">http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre</A>&gt;
+
+     &lt;p&gt;This site could then fetch the &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt;
+     file and do whatever it is that it does with soup (synthesise it
+     and ship it to the user, or whatever).&lt;/p&gt;
+
+    &lt;/div&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;A descriptive title of the handler, which the UA might use to
+    remind the user what the site in question is.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;User agents should raise &lt;span title=&quot;security
+  exception&quot;&gt;security exceptions&lt;/span&gt; if the methods are called with
+  &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values
+  that the UA deems to be &quot;privileged&quot;. For example, a site attempting
+  to register a handler for &lt;code&gt;http&lt;/code&gt; URIs or
+  &lt;code&gt;text/html&lt;/code&gt; content in a Web browser would likely cause
+  an exception to be raised.&lt;/p&gt;
+
+  &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if the
+  &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; argument passed to one of these methods does
+  not contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.&lt;/p&gt;
+
+  &lt;p&gt;User agents must not raise any other exceptions (other than
+  binding-specific exceptions, such as for an incorrect number of
+  arguments in an ECMAScript implementation).&lt;/p&gt;
+
+  &lt;p&gt;This section does not define how the pages registered by these
+  methods are used, beyond the requirements on how to process the
+  &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; value (see above). To some extent, the &lt;span
+  title=&quot;navigating across documents&quot;&gt;processing model for navigating
+  across documents&lt;/span&gt; defines some cases where these methods are
+  relevant, but in general UAs may use this information wherever they
+  would otherwise consider handing content to native plugins or helper
+  applications.&lt;/p&gt;
+
+  &lt;p&gt;UAs must not use registered content handlers to handle content
+  that was returned as part of a non-GET transaction (or rather, as
+  part of any non-idempotent transaction), as the remote site would
+  not be able to fetch the same data.&lt;/p&gt;
+
+
+  &lt;h5&gt;Security and privacy&lt;/h5&gt;
+
+  &lt;p&gt;These mechanisms can introduce a number of concerns, in
+  particular privacy concerns.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Hijacking all Web usage.&lt;/strong&gt; User agents should not
+  allow protocols that are key to its normal operation, such as
+  &lt;code&gt;http&lt;/code&gt; or &lt;code&gt;https&lt;/code&gt;, to be rerouted through
+  third-party sites. This would allow a user's activities to be
+  trivially tracked, and would allow user information, even in secure
+  connections, to be collected.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Hijacking defaults.&lt;/strong&gt; It is strongly recommended
+  that user agents do not automatically change any defaults, as this
+  could lead the user to send data to remote hosts that the user is
+  not expecting. New handlers registering themselves should never
+  automatically cause those sites to be used.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Registration spamming.&lt;/strong&gt; User agents should
+  consider the possibility that a site will attempt to register a
+  large number of handlers, possibly from multiple domains (e.g. by
+  redirecting through a series of pages each on a different domain,
+  and each registering a handler for &lt;code&gt;video/mpeg&lt;/code&gt; &mdash;
+  analogous practices abusing other Web browser features have been
+  used by pornography Web sites for many years). User agents should
+  gracefully handle such hostile attempts, protecting the user.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Misleading titles.&lt;/strong&gt; User agents should not rely
+  wholy on the &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; argument to the methods when
+  presenting the registered handlers to the user, since sites could
+  easily lie. For example, a site &lt;code&gt;hostile.example.net&lt;/code&gt;
+  could claim that it was registering the &quot;Cuddly Bear Happy Content
+  Handler&quot;. User agents should therefore use the handler's domain in
+  any UI along with any title.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Hostile handler metadata.&lt;/strong&gt; User agents should
+  protect against typical attacks against strings embedded in their
+  interface, for example ensuring that markup or escape characters in
+  such strings are not executed, that null bytes are properly handled,
+  that over-long strings do not cause crashes or buffer overruns, and
+  so forth.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described
+  in this section can result in secret Intranet URIs being leaked, in
+  the following manner:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;The user registers a third-party content handler as the default
+   handler for a content type.&lt;/li&gt;
+
+   &lt;li&gt;The user then browses his corporate Intranet site and accesses
+   a document that uses that content type.&lt;/li&gt;
+
+   &lt;li&gt;The user agent contacts the third party and hands the third
+   party the URI to the Intranet content.&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;No actual confidential file data is leaked in this manner, but
+  the URIs themselves could contain confidential information. For
+  example, the URI could be
+  &lt;code&gt;<A HREF="https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code">https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code</A>&gt;,
+  which might tell the third party that Example Corporation is
+  intending to merge with Samples LLC. Implementors might wish to
+  consider allowing administrators to disable this feature for certain
+  subdomains, content types, or protocols.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send
+  HTTPS URIs to third-party sites registered as content handlers, in
+  the same way that user agents do not send &lt;code&gt;Referer&lt;/code&gt;
+  headers from secure sites to third-party sites.&lt;/p&gt;
+
+  &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
+  username or password information in the URIs that are escaped and
+  included sent to the handler sites. User agents may even avoid
+  attempting to pass to Web-based handlers the URIs of resources
+  that are known to require authentication to access, as such sites
+  would be unable to access the resources in question without
+  prompting the user for credentials themselves (a practice that would
+  require the user to know whether to trust the third-party handler, a
+  decision many users are unable to make or even understand).&lt;/p&gt;
+
+
+  &lt;h5 id=&quot;sample-handler-impl&quot;&gt;Sample user interface&lt;/h5&gt;
+
+  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
+
+  &lt;p&gt;A simple implementation of this feature for a desktop Web browser
+  might work as follows.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code
+  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt;
+  method could display a modal dialog box:&lt;/p&gt;
+
+  &lt;pre&gt;||[ Protocol Handler Registration ]|||||||||||||||||||||||||||
+|                                                            |
+| This Web page:                                             |
+|                                                            |
+|    Kittens at work                                         |
+|    <A HREF="http://kittens.example.org/">http://kittens.example.org/</A>                             |
+|                                                            |
+| ...would like permission to handle the protocol &quot;x-meow:&quot;  |
+| using the following Web-based application:                 |
+|                                                            |
+|    Kittens-at-work displayer                               |
+|    <A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>                     |
+|                                                            |
+| Do you trust the administrators of the &quot;kittens.example.   |
+| org&quot; domain?                                               |
+|                                                            |
+|              ( Trust kittens.example.org )  (( Cancel ))   |
+|____________________________________________________________|&lt;/pre&gt;
+
+  &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked
+  the method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page,
+  &quot;x-meow&quot; is the string that was passed to the &lt;code
+  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt;
+  method as its first argument (&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt;),
+  &quot;<A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>&quot; was the second argument (&lt;var
+  title=&quot;&quot;&gt;uri&lt;/var&gt;), and &quot;Kittens-at-work displayer&quot; was the third
+  argument (&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;).&lt;/p&gt;
+
+  &lt;p&gt;If the user clicks the Cancel button, then nothing further
+  happens. If the user clicks the &quot;Trust&quot; button, then the handler is
+  remembered.&lt;/p&gt;
+
+  &lt;p&gt;When the user then attempts to fetch a URI that uses the
+  &quot;x-meow:&quot; scheme, then it might display a dialog as follows:&lt;/p&gt;
+
+  &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
+|                                                            |
+| You have attempted to access:                              |
+|                                                            |
+|    x-meow:S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%3D               |
+|                                                            |
+| How would you like FerretBrowser to handle this resource?  |
+|                                                            |
+|  (o) Contact the FerretBrowser plugin registry to see if   |
+|      there is an official way to handle this resource.     |
+|                                                            |
+|  ( ) Pass this URI to a local application:                 |
+|      [ /no application selected/             ] ( Choose )  |
+|                                                            |
+|  ( ) Pass this URI to the &quot;Kittens-at-work displayer&quot;      |
+|      application at &quot;kittens.example.org&quot;.                 |
+|                                                            |
+|  [ ] Always do this for resources using the &quot;x-meow&quot;       |
+|      protocol in future.                                   |
+|                                                            |
+|                                     ( Ok )  (( Cancel ))   |
+|____________________________________________________________|&lt;/pre&gt;
+
+  &lt;p&gt;...where the third option is the one that was primed by the site
+  registering itself earlier.&lt;/p&gt;
+
+  &lt;p&gt;If the user does select that option, then the browser, in
+  accordance with the requirements described in the previous two
+  sections, will redirect the user to
+  &quot;<A HREF="http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D">http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D</A>&quot;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;code
+  title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt;
+  method would work equivalently, but for unknown MIME types instead
+  of unknown protocols.&lt;/p&gt;
+
+
+
   &lt;h3 id=&quot;history&quot;&gt;Session history and navigation&lt;/h3&gt;
 
   &lt;h4&gt;The session history of browsing contexts&lt;/h4&gt;
@@ -23870,1173 +25038,6 @@
 
 
 
-  &lt;h3 id=&quot;scripting&quot;&gt;Scripting&lt;/h3&gt;
-
-  &lt;h4&gt;Running executable code&lt;/h4&gt;
-
-  &lt;p&gt;Various mechanisms can cause author-provided executable code to
-  run in the context of a document. These mechanisms include, but are
-  probably not limited to:&lt;/p&gt;
-
-  &lt;ul&gt;
-
-   &lt;li&gt;Processing of &lt;code&gt;script&lt;/code&gt; elements.&lt;/li&gt;
-
-   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript
-   protocol&quot;&gt;javascript:&lt;/code&gt; URIs (e.g. the &lt;code
-   title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of &lt;code&gt;img&lt;/code&gt;
-   elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt; rule in a CSS
-   &lt;code&gt;style&lt;/code&gt; element block).&lt;/li&gt;
-
-   &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code
-   title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;span&gt;event handler
-   content attributes&lt;/span&gt;, by &lt;span&gt;event handler DOM
-   attributes&lt;/span&gt;, or otherwise.&lt;/li&gt;
-
-   &lt;li&gt;Processing of technologies like XBL or SVG that have their own
-   scripting features.&lt;/li&gt;
-
-  &lt;/ul&gt;
-
-  &lt;p&gt;User agents may provide a mechanism to enable or disable the
-  execution of author-provided code. When the user agent is configured
-  such that author-provided code does not execute, or if the user
-  agent is implemented so as to never execute author-provided code, it
-  is said that &lt;dfn&gt;scripting is disabled&lt;/dfn&gt;. When author-provided
-  code &lt;em&gt;does&lt;/em&gt; execute, &lt;dfn&gt;scripting is enabled&lt;/dfn&gt;. A user
-  agent with scripting disabled is a &lt;span title=&quot;User agents with no
-  scripting support&quot;&gt;user agent with no scripting support&lt;/span&gt; for
-  the purposes of conformance.&lt;/p&gt;
-
-
-  &lt;h4&gt;Origin&lt;/h4&gt;
-  &lt;!-- Hallowed are the Ori --&gt;
-
-  &lt;!--
-    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=346659">https://bugzilla.mozilla.org/show_bug.cgi?id=346659</A>
-    <A HREF="https://bugzilla.mozilla.org/show_bug.cgi?id=344495">https://bugzilla.mozilla.org/show_bug.cgi?id=344495</A>
-  --&gt;
-
-  &lt;p&gt;Access to certain APIs is granted or denied to scripts based on
-  the &lt;dfn&gt;origin&lt;/dfn&gt; of the script and the API being accessed.&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;If a script is in a &lt;code&gt;script&lt;/code&gt; element&lt;/dt&gt;
-
-   &lt;dd&gt;The origin of the script is the origin of the
-   &lt;code&gt;Document&lt;/code&gt; to which the &lt;code&gt;script&lt;/code&gt; element
-   belongs.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a function or other code reference created by
-   another script&lt;/dt&gt;
-
-   &lt;dd&gt;The origin of the script is the origin of the script that
-   created it.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in an attribute&lt;/dt&gt;
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
-   element on which the attribute is found.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; in a style sheet&lt;/dt&gt;
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; to which
-   the style sheet applies.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
-   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
-   the URI having been provided by the user (e.g. by using a
-   &lt;i&gt;bookmarklet&lt;/i&gt;)&lt;/dt&gt;
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
-   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
-   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
-   the URI having been declared in markup&lt;/dt&gt;
-
-   &lt;dd&gt;The origin is the origin of the &lt;code&gt;Document&lt;/code&gt; of the
-   element (e.g. an &lt;code&gt;a&lt;/code&gt; or &lt;code&gt;area&lt;/code&gt; element) that
-   declared the URI.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If a script is a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code
-   title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI&lt;/span&gt; to which a &lt;span&gt;browsing
-   context&lt;/span&gt; is being &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt;,
-   the URI having been provided by script&lt;/dt&gt;
-
-   &lt;dd&gt;The origin is the origin of the script that provided the
-   URI.&lt;/dd&gt;
-
-   &lt;!-- ... --&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;The origin of scripts thus comes down to finding the origin of
-  &lt;code&gt;Document&lt;/code&gt; objects.&lt;/p&gt;
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was served
-  over the network and whose address uses a URI scheme with a
-  server-based naming authority is the tuple consisting of the
-  &lt;scheme&gt;, &lt;host&gt;, and &lt;port&gt; parts of the
-  &lt;code&gt;Document&lt;/code&gt;'s full URI. &lt;a
-  href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC2732&quot;&gt;[RFC2732]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
-  from a &lt;code&gt;data:&lt;/code&gt; URI found in another &lt;code&gt;Document&lt;/code&gt;
-  or in a script is the origin of the that &lt;code&gt;Document&lt;/code&gt; or
-  script.&lt;/p&gt;
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
-  from a &lt;code&gt;data:&lt;/code&gt; URI from another source is a globally
-  unique identifier assigned when the document is created.&lt;/p&gt;
-
-  &lt;p&gt;The origin of a &lt;code&gt;Document&lt;/code&gt; or image that was generated
-  from a &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt;
-  URI&lt;/span&gt; is the same as the origin of that
-  &lt;code&gt;javascript:&lt;/code&gt; URI.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn&gt;The string representing the script's domain in IDNA
-  format&lt;/dfn&gt; is obtained as follows: take the domain part of the
-  script's &lt;span&gt;origin&lt;/span&gt; tuple and apply the IDNA ToASCII
-  algorithm and then the IDNA ToUnicode algorithm to each component of
-  the domain name (with both the AllowUnassigned and UseSTD3ASCIIRules
-  flags set both times). &lt;a href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;If ToASCII fails to convert one of the components of the string,
-  e.g. because it is too long or because it contains invalid
-  characters, or if the origin of the script has no domain part, then
-  the string representing the script's domain in IDNA format cannot be
-  obtained. (ToUnicode is defined to never fail.)&lt;/p&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;It's been suggested that we should put IP
-  addresses into the origin tuple, to mitigate DNS rebinding
-  attacks. However that would kill multi-homed systems like
-  GMail. Should we do something like have a DNS record say whether or
-  not to include the IP in the origin for a host?&lt;/p&gt;
-
-
-  &lt;h4&gt;Security exceptions&lt;/h4&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;Define &lt;dfn&gt;security exception&lt;/dfn&gt;.&lt;/p&gt;
-
-
-  &lt;h4 id=&quot;javascript-protocol&quot;&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
-
-  &lt;p&gt;A URI using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol must,
-  if evaluated, be evaluated using the in-context evaluation operation
-  defined for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URIs. &lt;a
-  href=&quot;#refsJSURI&quot;&gt;[JSURI]&lt;/a&gt;&lt;/p&gt;
-
-&lt;!--
-JSURI: <A HREF="http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt">http://ietfreport.isoc.org/all-ids/draft-hoehrmann-javascript-scheme-00.txt</A> and
-       <A HREF="http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt">http://www.websitedev.de/ietf/draft-hoehrmann-javascript-scheme-00.txt</A> should be as stable as it gets,
-       <A HREF="http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/">http://ietfreport.isoc.org/idref/draft-hoehrmann-javascript-scheme/</A> for the latest version
---&gt;
-
-  &lt;p&gt;When a browsing context is &lt;span
-  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
-  and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has
-  the same &lt;span&gt;origin&lt;/span&gt; as the URI, the dereference context
-  must be the &lt;span&gt;browsing context&lt;/span&gt; being navigated.&lt;/p&gt;
-
-  &lt;p&gt;When a browsing context is &lt;span
-  title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt; URI,
-  and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has a
-  &lt;em&gt;different&lt;/em&gt; &lt;span&gt;origin&lt;/span&gt; than the URI, the dereference
-  context must be an empty object.&lt;/p&gt;
-
-  &lt;p&gt;Otherwise, the dereference context must the &lt;span&gt;browsing
-  context&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; to which belongs the
-  element for which the URI is being dereferenced, or to which the
-  style sheet for which the URI is being dereferenced applies,
-  whichever is appropriate.&lt;/p&gt;
-
-  &lt;p&gt;URIs using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol should
-  be evaluated when the resource for that URI is needed, unless
-  &lt;span&gt;scripting is disabled&lt;/span&gt; or the &lt;code&gt;Document&lt;/code&gt;
-  corresponding to the dereference context (as defined above), if any,
-  has &lt;code title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt;
-  enabled.&lt;/p&gt;
-
-  &lt;p&gt;If the dereference by-product is void (there is no return value),
-  then the URI must be treated in a manner equivalent to an HTTP
-  resource with an HTTP 204 No Content response.&lt;/p&gt;
-
-  &lt;p&gt;Otherwise, the URI must be treated in a manner equivalent to an
-  HTTP resource with a 200 OK response whose &lt;span
-  title=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; is &lt;code
-  title=&quot;&quot;&gt;text/html&lt;/code&gt; and whose response body is the dereference
-  by-product, converted to a string value.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;Certain contexts, in particular &lt;code&gt;img&lt;/code&gt;
-  elements, ignore the &lt;span title=&quot;Content-Type&quot;&gt;Content-Type
-  metadata&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;div class=&quot;example&quot;&gt;
-
-   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI for a
-   &lt;code title=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of an
-   &lt;code&gt;img&lt;/code&gt; element would be evaluated in the context of the
-   page as soon as the attribute is set; it would then be sniffed to
-   determine the image type and decoded as an image.&lt;/p&gt;
-
-   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URI in an &lt;code
-   title=&quot;attr-a-href&quot;&gt;href&lt;/code&gt; attribute of an &lt;code&gt;a&lt;/code&gt;
-   element would only be evaluated when the link was &lt;span
-   title=&quot;following hyperlinks&quot;&gt;followed&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;p&gt;The &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute of an
-   &lt;code&gt;iframe&lt;/code&gt; element would be evaluated in the context of
-   the &lt;code&gt;iframe&lt;/code&gt;'s own &lt;span&gt;browsing context&lt;/span&gt;; once
-   evaluated, its return value (if it was not void) would replace that
-   &lt;span&gt;browsing context&lt;/span&gt;'s document, thus changing the
-   variables visible in that &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h4&gt;Events&lt;/h4&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;We need to define how to handle events that are
-  to be fired on a Document that is no longer the active document of
-  its browsing context, and for Documents that have no browsing
-  context. Do the events fire? Do the handlers in that document not
-  fire? Do we just define scripting to be disabled when the document
-  isn't active, with events still running as is? See also the
-  &lt;code&gt;script&lt;/code&gt; element section, which says scripts don't run
-  when the document isn't active.&lt;/p&gt;
-
-  &lt;h5 id=&quot;event-handler-attributes&quot;&gt;Event handler attributes&lt;/h5&gt;
-
-  &lt;p&gt;&lt;span&gt;HTML elements&lt;/span&gt; can have &lt;dfn&gt;event handler
-  attributes&lt;/dfn&gt; specified. These act as bubbling event listeners
-  for the element on which they are specified.&lt;/p&gt;
-
-  &lt;p&gt;Each event handler attribute has two parts, an &lt;span title=&quot;event
-  handler content attributes&quot;&gt;event handler content attribute&lt;/span&gt;
-  and an &lt;span title=&quot;event handler DOM attributes&quot;&gt;event handler DOM
-  attribute&lt;/span&gt;. Event handler attributes must initially be set to
-  null. When their value changes (through the changing of their event
-  handler content attribute or their event handler DOM attribute),
-  they will either be null, or have an &lt;code&gt;EventListener&lt;/code&gt;
-  object assigned to them.&lt;/p&gt;
-
-  &lt;p&gt;Objects other than &lt;code&gt;Element&lt;/code&gt; objects, in particular
-  &lt;code&gt;Window&lt;/code&gt;, only have &lt;span title=&quot;event handler DOM
-  attributes&quot;&gt;event handler DOM attribute&lt;/span&gt; (since they have no
-  content attributes).&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Event handler content attributes&lt;/dfn&gt;, when specified, must
-  contain valid ECMAScript code matching the ECMAScript &lt;code
-  title=&quot;&quot;&gt;FunctionBody&lt;/code&gt; production. &lt;a
-  href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;When an event handler content attribute is set, its new value
-  must be interpreted as the body of an anonymous function with a
-  single argument called &lt;code&gt;event&lt;/code&gt;, with the new function's
-  scope chain being linked from the activation object of the handler,
-  to the element, to the element's &lt;code&gt;form&lt;/code&gt; element if it is
-  a form control, to the &lt;code&gt;Document&lt;/code&gt; object, to the
-  &lt;span&gt;browsing context&lt;/span&gt; of that &lt;code&gt;Document&lt;/code&gt;. The
-  function's &lt;code&gt;this&lt;/code&gt; parameter must be the
-  &lt;code&gt;Element&lt;/code&gt; object representing the element. The resulting
-  function must then be set as the value of the corresponding event
-  handler attribute, and the new value must be set as the value of the
-  content attribute. If the given function body fails to compile, then
-  the corresponding event handler attribute must be set to null
-  instead (the content attribute must still be updated to the new
-  value, though).&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;See ECMA262 Edition 3, sections 10.1.6 and 10.2.3,
-  for more details on activation objects. &lt;a
-  href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p class=&quot;issue&quot;&gt;How do we allow non-JS event handlers?&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn&gt;Event handler DOM attributes&lt;/dfn&gt;, on setting, must set the
-  corresponding event handler attribute to their new value, and on
-  getting, must return whatever the current value of the corresponding
-  event handler attribute is (possibly null).&lt;/p&gt;
-
-  &lt;p&gt;The following are the event handler attributes that must be
-  supported by all &lt;span&gt;HTML elements&lt;/span&gt;, as both content
-  attributes and DOM attributes, and on &lt;code&gt;Window&lt;/code&gt; objects,
-  as DOM attributes:&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onabort&quot;&gt;&lt;code&gt;onabort&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
-   title=&quot;event-abort&quot;&gt;abort&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-&lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforecopy&quot;&gt;&lt;code&gt;onbeforecopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-beforecopy&quot;&gt;beforecopy&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onbeforeunload&quot;&gt;&lt;code&gt;onbeforeunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-beforeunload&quot;&gt;beforeunload&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onblur&quot;&gt;&lt;code&gt;onblur&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-blur&quot;&gt;blur&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onchange&quot;&gt;&lt;code&gt;onchange&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-change&quot;&gt;change&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onclick&quot;&gt;&lt;code&gt;onclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-click&quot;&gt;click&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-oncontextmenu&quot;&gt;&lt;code&gt;oncontextmenu&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-&lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-oncopy&quot;&gt;&lt;code&gt;oncopy&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-copy&quot;&gt;copy&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondblclick&quot;&gt;&lt;code&gt;ondblclick&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dblclick&quot;&gt;dblclick&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondrag&quot;&gt;&lt;code&gt;ondrag&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-drag&quot;&gt;drag&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragend&quot;&gt;&lt;code&gt;ondragend&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dragend&quot;&gt;dragend&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragenter&quot;&gt;&lt;code&gt;ondragenter&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dragenter&quot;&gt;dragenter&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragleave&quot;&gt;&lt;code&gt;ondragleave&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dragleave&quot;&gt;dragleave&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragover&quot;&gt;&lt;code&gt;ondragover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dragover&quot;&gt;dragover&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondragstart&quot;&gt;&lt;code&gt;ondragstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-dragstart&quot;&gt;dragstart&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-ondrop&quot;&gt;&lt;code&gt;ondrop&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-drop&quot;&gt;drop&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onerror&quot;&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
-   title=&quot;event-error&quot;&gt;error&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;
-
-   &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt;
-   handler is also used for &lt;a href=&quot;#runtime-script-errors&quot;&gt;reporting
-   script errors&lt;/a&gt;.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onfocus&quot;&gt;&lt;code&gt;onfocus&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-focus&quot;&gt;focus&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeydown&quot;&gt;&lt;code&gt;onkeydown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-keydown&quot;&gt;keydown&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeypress&quot;&gt;&lt;code&gt;onkeypress&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-keypress&quot;&gt;keypress&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onkeyup&quot;&gt;&lt;code&gt;onkeyup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-keyup&quot;&gt;keyup&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onload&quot;&gt;&lt;code&gt;onload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-load&quot;&gt;load&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmessage&quot;&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- introduced for &lt;event-source&gt; --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-message&quot;&gt;message&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousedown&quot;&gt;&lt;code&gt;onmousedown&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mousedown&quot;&gt;mousedown&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousemove&quot;&gt;&lt;code&gt;onmousemove&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mousemove&quot;&gt;mousemove&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseout&quot;&gt;&lt;code&gt;onmouseout&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mouseout&quot;&gt;mouseout&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseover&quot;&gt;&lt;code&gt;onmouseover&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mouseover&quot;&gt;mouseover&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmouseup&quot;&gt;&lt;code&gt;onmouseup&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mouseup&quot;&gt;mouseup&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onmousewheel&quot;&gt;&lt;code&gt;onmousewheel&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-mousewheel&quot;&gt;mousewheel&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-&lt;!--
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onpaste&quot;&gt;&lt;code&gt;onpaste&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-paste&quot;&gt;paste&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onresize&quot;&gt;&lt;code&gt;onresize&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-resize&quot;&gt;resize&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onscroll&quot;&gt;&lt;code&gt;onscroll&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-scroll&quot;&gt;scroll&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onselect&quot;&gt;&lt;code&gt;onselect&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-select&quot;&gt;select&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX should define when it fires --&gt;
-
-&lt;!--XXX
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onselectstart&quot;&gt;&lt;code&gt;onselectstart&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; --&gt;&lt;!-- widely used --&gt;&lt;!--
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-selectstart&quot;&gt;selectstart&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
---&gt; &lt;!-- XXX should define when it fires --&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onsubmit&quot;&gt;&lt;code&gt;onsubmit&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code
-   title=&quot;event-submit&quot;&gt;submit&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;handler-onunload&quot;&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code
-   title=&quot;event-unload&quot;&gt;unload&lt;/code&gt; event is targeted at or bubbles
-   through the element.&lt;/p&gt;&lt;/dd&gt; &lt;!-- XXX need to fire this --&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;When an event handler attribute is invoked, its argument must be
-  set to the &lt;code&gt;Event&lt;/code&gt; object of the event in question. If
-  the function returns the exact boolean value false, the event's
-  &lt;code&gt;preventDefault()&lt;/code&gt; method must then invoked. Exception:
-  for historical reasons, for the HTML &lt;code&gt;mouseover&lt;/code&gt; event,
-  the &lt;code&gt;preventDefault()&lt;/code&gt; method must be called when the
-  function returns true instead.&lt;/p&gt;
-
-  &lt;!-- IE actually uncancels the event if the function returns true --&gt;
-
-
-  &lt;p&gt;When &lt;span&gt;scripting is disabled&lt;/span&gt;, event handler attributes
-  must do nothing.&lt;/p&gt;
-
-  &lt;p&gt;When &lt;span&gt;scripting is enabled&lt;/span&gt;, all event handler
-  attributes on an element, whether set to null or to a function, must
-  be registered as event listeners on the element, as if the &lt;code
-  title=&quot;dom-EventTarget-addEventListenerNS&quot;&gt;addEventListenerNS()&lt;/code&gt;
-  method on the &lt;code&gt;Element&lt;/code&gt; object's &lt;code&gt;EventTarget&lt;/code&gt;
-  interface had been invoked when the element was created, with the
-  event type (&lt;code title=&quot;dom-event-type&quot;&gt;type&lt;/code&gt; argument) equal
-  to the type described for the event handler attribute in the list
-  above, the namespace (&lt;code
-  title=&quot;dom-event-namespaceURI&quot;&gt;namespaceURI&lt;/code&gt; argument) set to
-  null, the listener set to be a target and bubbling phase listener
-  (&lt;code title=&quot;dom-event-useCapture&quot;&gt;useCapture&lt;/code&gt; argument set
-  to false), the event group set to the default group (&lt;code
-  title=&quot;dom-event-evtGroup&quot;&gt;evtGroup&lt;/code&gt; argument set to null),
-  and the event listener itself (&lt;code
-  title=&quot;dom-event-listener&quot;&gt;listener&lt;/code&gt; argument) set to do
-  nothing while the event handler attribute is null, and set to invoke
-  the function associated with the event handler attribute
-  otherwise.&lt;/p&gt;
-
-
-  &lt;h5&gt;Event firing&lt;/h5&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;maybe this should be moved higher up
-  (terminology? conformance? DOM?) Also, the whole terminology thing
-  should be changed so that we don't define any specific events here,
-  we only define 'simple event', 'progress event', 'mouse event', 'key
-  event', and the like, and have the actual dispatch use those generic
-  terms when firing events.&lt;/p&gt;
-
-  &lt;p&gt;Certain operations and methods are defined as firing events on
-  elements. For example, the &lt;code title=&quot;dom-click&quot;&gt;click()&lt;/code&gt;
-  method on the &lt;code&gt;HTMLElement&lt;/code&gt; interface is defined as
-  firing a &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event on the
-  element.  &lt;a href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a click event&quot;&gt;Firing a &lt;code
-  title=&quot;event-click&quot;&gt;click&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
-  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-click</A>&quot;&gt;&lt;code&gt;click&lt;/code&gt;&lt;/a&gt;
-  event with no
-  namespace, which bubbles and is cancelable, and which uses the
-  &lt;code&gt;MouseEvent&lt;/code&gt; interface, must be dispatched at the given
-  element. The event object must have its &lt;code
-  title=&quot;&quot;&gt;screenX&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;screenY&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;clientX&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;clientY&lt;/code&gt;, and &lt;code
-  title=&quot;&quot;&gt;button&lt;/code&gt; attributes set to 0, its &lt;code
-  title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;, &lt;code
-  title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes
-  set according to the current state of the key input device, if any
-  (false for any keys that are not available), its &lt;code
-  title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 1, and its &lt;code
-  title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute set to null. The &lt;code
-  title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return
-  values appropriately describing the state of the key input device at
-  the time the event is created.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a change event&quot;&gt;Firing a &lt;code
-  title=&quot;event-change&quot;&gt;change&lt;/code&gt; event&lt;/dfn&gt; means that a &lt;a
-  href=&quot;<A HREF="http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change">http://www.w3.org/TR/DOM-Level-3-Events/events.html#event-change</A>&quot;&gt;&lt;code&gt;change&lt;/code&gt;&lt;/a&gt;
-  event with no namespace, which bubbles but is not cancelable, and
-  which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at
-  the given element. The event object must have its &lt;code
-  title=&quot;&quot;&gt;detail&lt;/code&gt; attribute set to 0.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a contextmenu event&quot;&gt;Firing a &lt;code
-  title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event&lt;/dfn&gt; means that
-  a &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event with no
-  namespace, which bubbles and is cancelable, and which uses the
-  &lt;code&gt;Event&lt;/code&gt; interface, must be dispatched at the given
-  element. The event object must have its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt;
-  attribute set to 0.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a simple event&quot;&gt;Firing a simple event called
-  &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means that an event with the name &lt;var
-  title=&quot;&quot;&gt;e&lt;/var&gt;, with no namespace, which does not bubble but is
-  cancelable, and which uses the &lt;code&gt;Event&lt;/code&gt; interface, must be
-  dispatched at the given element.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a show event&quot;&gt;Firing a &lt;code
-  title=&quot;event-show&quot;&gt;show&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire a
-  simple event&quot;&gt;firing a simple event called &lt;code
-  title=&quot;event-show&quot;&gt;show&lt;/code&gt;&lt;/span&gt;. &lt;span title=&quot;issue&quot;&gt;Actually
-  this should fire an event that has modifier information (shift/ctrl
-  etc).&lt;/span&gt;&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn title=&quot;fire a load event&quot;&gt;Firing a &lt;code
-  title=&quot;event-load&quot;&gt;load&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire a
-  simple event&quot;&gt;firing a simple event called &lt;code
-  title=&quot;event-load&quot;&gt;load&lt;/code&gt;&lt;/span&gt;. &lt;!--&lt;dfn title=&quot;fire a
-  DOMContentLoaded event&quot;&gt;Firing a &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt; event&lt;/dfn&gt;
-  means &lt;span title=&quot;fire a simple event&quot;&gt;firing a simple event called
-  &lt;code
-  title=&quot;event-DOMContentLoaded&quot;&gt;DOMContentLoaded&lt;/code&gt;&lt;/span&gt;.--&gt;
-  &lt;dfn title=&quot;fire an error event&quot;&gt;Firing an &lt;code
-  title=&quot;event-error&quot;&gt;error&lt;/code&gt; event&lt;/dfn&gt; means &lt;span title=&quot;fire
-  a simple event&quot;&gt;firing a simple event called &lt;code
-  title=&quot;event-error&quot;&gt;error&lt;/code&gt;&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;!-- XXX need to define the dispatching of DOMActivate --&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;&lt;dfn title=&quot;fire a progress event&quot;&gt;Firing a
-  progress event called &lt;var title=&quot;&quot;&gt;e&lt;/var&gt;&lt;/dfn&gt; means something
-  that hasn't yet been defined, in the &lt;a
-  href=&quot;#refsPROGRESS&quot;&gt;[PROGRESS]&lt;/a&gt; spec.&lt;/p&gt;
-
-  &lt;p&gt;The default action of these event is to do nothing unless
-  otherwise stated.&lt;/p&gt;
-
-  &lt;p class=&quot;big-issue&quot;&gt;If you dispatch a custom &quot;click&quot; event at an
-  element that would normally have default actions, should they get
-  triggered? If so, we need to go through the entire spec and make
-  sure that any default actions are defined in terms of &lt;em&gt;any&lt;/em&gt;
-  event of the right type on that element, not those that are
-  dispatched in expected ways.&lt;/p&gt;
-
-
-  &lt;h5&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/h5&gt;
-
-  &lt;p&gt;When an event is dispatched at a DOM node in a
-  &lt;code&gt;Document&lt;/code&gt; in a &lt;span&gt;browsing context&lt;/span&gt;, if the
-  event is not a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event, the user
-  agent must also dispatch the event to the &lt;code&gt;Window&lt;/code&gt;, as
-  follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;In the capture phase, the event must be dispatched to the
-   &lt;code&gt;Window&lt;/code&gt; object before being dispatched to any of the
-   nodes.&lt;/li&gt;
-
-   &lt;li&gt;In the bubble phase, the event must be dispatched to the
-   &lt;code&gt;Window&lt;/code&gt; object at the end of the phase, unless bubbling
-   has been prevented.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-
-
-  &lt;h5 id=&quot;runtime-script-errors&quot;&gt;Runtime script errors&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section only applies to user agents that support
-  scripting in general and ECMAScript in particular.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p&gt;Whenever a runtime script error occurs in one of the scripts
-  associated with the document, the value of the &lt;code
-  title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt; &lt;span&gt;event handler DOM
-  attribute&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object must be
-  processed, as follows:&lt;/p&gt;
-
-  &lt;dl class=&quot;switch&quot;&gt;
-
-   &lt;dt&gt;If the value is a function&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The function referenced by the &lt;code
-    title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt; attribute must be invoked
-    with three arguments, before notifying the user of the error.&lt;/p&gt;
-
-    &lt;p&gt;The three arguments passed to the function are all
-    &lt;code&gt;DOMString&lt;/code&gt;s; the first must give the message that the
-    UA is considering reporting, the second must give the URI to the
-    resource in which the error occured, and the third must give the
-    line number in that resource on which the error occured.&lt;/p&gt;
-
-    &lt;p&gt;If the function returns false, then the error should not be
-    reported to the user. Otherwise, if the function returns another
-    value (or does not return at all), the error should be reported to
-    the user.&lt;/p&gt;
-
-    &lt;p&gt;Any exceptions thrown or errors caused by this function must be
-    reported to the user immediately after the error that the function
-    was called for, without calling the function again.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;If the value is &lt;code&gt;null&lt;/code&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The error should not reported to the user.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;If the value is anything else&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The error should be reported to the user.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;The initial value of &lt;code title=&quot;handler-onerror&quot;&gt;onerror&lt;/code&gt;
-  must be &lt;code&gt;undefined&lt;/code&gt;.&lt;/p&gt;
-
-
-
-  &lt;h3&gt;User prompts&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-alert&quot;&gt;&lt;code&gt;alert(&lt;var
-  title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
-  the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent
-  may make the method wait for the user to acknowledge the message
-  before returning; if so, the user agent must &lt;span&gt;pause&lt;/span&gt;
-  while the method is waiting.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-confirm&quot;&gt;&lt;code&gt;confirm(&lt;var
-  title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
-  the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user
-  to respond with a positive or negative response. The user agent must
-  then &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
-  response. If the user response positively, the method must return
-  true, and if the user response negatively, the method must return
-  false.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-prompt&quot;&gt;&lt;code&gt;prompt(&lt;var
-  title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  method, when invoked, must show the given &lt;var
-  title=&quot;&quot;&gt;message&lt;/var&gt; to the user, and ask the user to either
-  respond with a string value or abort. The user agent must then
-  &lt;span&gt;pause&lt;/span&gt; as the the method waits for the user's
-  response. The second argument is optional. If the second argument
-  (&lt;var title=&quot;&quot;&gt;default&lt;/var&gt;) is present, then the response must be
-  defaulted to the value given by &lt;var title=&quot;&quot;&gt;default&lt;/var&gt;. If the
-  user aborts, then the method must return null; otherwise, the method
-  must return the string that the user responded with.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-print&quot;&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
-  when invoked, should offer the user the opportunity to &lt;span&gt;obtain
-  a physical form&lt;/span&gt; of the document. The user agent may make the
-  method wait for the user to either accept or decline before
-  returning; if so, the user agent must &lt;span&gt;pause&lt;/span&gt; while the
-  method is waiting.  (This does not, of course, preclude the user
-  agent from &lt;em&gt;always&lt;/em&gt; offering the user with the opportunity to
-  convert the document to whatever media the user might want.)&lt;/p&gt;
-
-
-
-  &lt;h3&gt;Browser state&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-navigator&quot;&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
-  attribute of the &lt;code&gt;Window&lt;/code&gt; interface must return an
-  instance of the &lt;code&gt;ClientInformation&lt;/code&gt; interface, which
-  represents the identity and state of the user agent (the client),
-  and allows Web pages to register themselves as potential protocol
-  and content handlers:&lt;/p&gt;
-
-  &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;ClientInformation&lt;/dfn&gt; {
-  readonly attribute boolean &lt;span title=&quot;dom-navigator-onLine&quot;&gt;onLine&lt;/span&gt;;
-  void &lt;span title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler&lt;/span&gt;(in DOMString protocol, in DOMString uri, in DOMString title);
-  void &lt;span title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler&lt;/span&gt;(in DOMString mimeType, in DOMString uri, in DOMString title);
-&lt;!-- XXX there are other attributes! --&gt;};&lt;/pre&gt;
-&lt;!-- also, see window.external.AddSearchProvider() and similar DOM APIs from IE --&gt;
-
-  &lt;h4 id=&quot;offline&quot;&gt;Offline Web applications&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-navigator-onLine&quot;&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return false if the user agent will not contact the
-  network when the user follows links or when a script requests a
-  remote page (or knows that such an attempt would fail), and must
-  return true otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;event-offline&quot;&gt;&lt;code&gt;offline&lt;/code&gt;&lt;/dfn&gt; event
-  must be fired when the value of the &lt;code
-  title=&quot;dom-navigator-onLine&quot;&gt;navigator.onLine&lt;/code&gt; attribute of
-  the &lt;code&gt;Window&lt;/code&gt; changes from true to false.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;event-online&quot;&gt;&lt;code&gt;online&lt;/code&gt;&lt;/dfn&gt; event
-  must be fired when the value of the &lt;code
-  title=&quot;dom-navigator-onLine&quot;&gt;navigator.onLine&lt;/code&gt; attribute of
-  the &lt;code&gt;Window&lt;/code&gt; changes from false to true.&lt;/p&gt;
-
-  &lt;p&gt;These events are in no namespace, do bubble, are not cancelable,
-  have no default action, and use the normal &lt;code&gt;Event&lt;/code&gt;
-  interface. They must be fired on &lt;span&gt;the body element&lt;/span&gt;. (As
-  the events bubble, they will reach the &lt;code&gt;Window&lt;/code&gt;
-  object.)&lt;/p&gt;
-
-  &lt;!-- XXX ononline onoffline need to be defined --&gt;
-
-  &lt;h4 id=&quot;custom-handlers&quot;&gt;Custom protocol and content handlers&lt;/h4&gt;
-
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;&lt;code&gt;registerProtocolHandler()&lt;/code&gt;&lt;/dfn&gt;
-  method allows Web sites to register themselves as possible handlers
-  for particular protocols. For example, an online fax service could
-  register itself as a handler of the &lt;code&gt;fax:&lt;/code&gt; protocol (&lt;a
-  href=&quot;#refsRFC2806&quot;&gt;[RFC2806]&lt;/a&gt;), so that if the user clicks on
-  such a link, he is given the opportunity to use that Web
-  site. Analogously, the &lt;dfn
-  title=&quot;dom-navigator-registerContentHandler&quot;&gt;&lt;code&gt;registerContentHandler()&lt;/code&gt;&lt;/dfn&gt;
-  method allows Web sites to register themselves as possible handlers
-  for content in a particular MIME type. For example, the same online
-  fax service could register itself as a handler for
-  &lt;code&gt;image/g3fax&lt;/code&gt; files (&lt;a
-  href=&quot;#refsRFC1494&quot;&gt;[RFC1494]&lt;/a&gt;), so that if the user has no
-  native application capable of handling G3 Facsimile byte streams,
-  his Web browser can instead suggest he use that site to view the
-  image.&lt;/p&gt;
-
-  &lt;p&gt;User agents may, within the constraints described in this
-  section, do whatever they like when the methods are called. A UA
-  could, for instance, prompt the user and offer the user the
-  opportunity to add the site to a shortlist of handlers, or make the
-  handlers his default, or cancel the request. UAs could provide such
-  a UI through modal UI or through a non-modal transient notification
-  interface. UAs could also simply silently collect the information,
-  providing it only when relevant to the user.&lt;/p&gt;
-
-  &lt;p&gt;There is &lt;a href=&quot;#sample-handler-impl&quot;&gt;an example of how these
-  methods could be presented to the user&lt;/a&gt; below.&lt;/p&gt;
-
-  &lt;p&gt;The arguments to the methods have the following meanings:&lt;/p&gt;
-
-  &lt;dl&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; (&lt;code title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt; only)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A scheme, such as &lt;code&gt;ftp&lt;/code&gt; or &lt;code&gt;fax&lt;/code&gt;. The
-    scheme must be treated case-insensitively by user agents for the
-    purposes of comparing with the scheme part of URIs that they
-    consider against the list of registered handlers.&lt;/p&gt;
-
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; value, if it contains a colon (as in
-    &quot;&lt;code&gt;ftp:&lt;/code&gt;&quot;), will never match anything, since schemes
-    don't contain colons.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; (&lt;code title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt; only)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A MIME type, such as &lt;code&gt;model/vrml&lt;/code&gt; or
-    &lt;code&gt;text/richtext&lt;/code&gt;. The MIME type must be treated
-    case-insensitively by user agents for the purposes of comparing
-    with MIME types of documents that they consider against the list
-    of registered handlers.&lt;/p&gt;
-
-    &lt;p&gt;User agents must compare the given values only to the MIME
-    type/subtype parts of content types, not to the complete type
-    including parameters. Thus, if &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values
-    passed to this method include characters such as commas or
-    whitespace, or include MIME parameters, then the handler being
-    registered will never be used.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;uri&lt;/var&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The URI of the page that will handle the requests. When the
-    user agent uses this URI, it must replace the first occurrence of
-    the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot; with an escaped version
-    of the URI of the content in question (as defined below), and then
-    fetch the resulting URI using the GET method (or equivalent for
-    non-HTTP URIs).&lt;/p&gt;
-
-    &lt;p&gt;To get the escaped version of the URI, first, the domain part
-    of the URI (if any) must be converted to its punycode
-    representation, and then, every character in the URI that is not
-    in the ranges given in the next paragraph must be replaced by its
-    UTF-8 byte representation, each byte being represented by a U+0025
-    (%) character and two digits in the range U+0030 (0) to U+0039 (9)
-    and U+0041 (A) to U+0046 (F) giving the hexadecimal representation
-    of the byte.&lt;/p&gt;
-
-    &lt;p&gt;The ranges of characters that must not be escaped are: U+002D
-    (-), U+002E (.), U+0030 (0) to U+0039 (9), U+0041 (A) to U+005A
-    (Z), U+005F (_), U+0061 (a) to U+007A (z), and U+007E (~).&lt;/p&gt;
-
-    &lt;!-- XXX move that to a common algorithms section if any other
-    part of the spec needs it --&gt;
-
-    &lt;div class=&quot;example&quot;&gt;
-
-     &lt;p&gt;If the user had visited a site that made the following call:&lt;/p&gt;
-
-     &lt;pre&gt;navigator.registerContentHandler('application/x-soup', '<A HREF="http://example.com/soup?url=%s">http://example.com/soup?url=%s</A>', 'SoupWeb&trade;')&lt;/pre&gt;
-
-     &lt;p&gt;...and then clicked on a link such as:&lt;/p&gt;
-
-     &lt;pre&gt;&lt;a href=&quot;<A HREF="http://www.example.net/chickenk&amp;#xEF;wi.soup">http://www.example.net/chickenk&amp;#xEF;wi.soup</A>&quot;&gt;Download our Chicken Kiwi soup!&lt;/a&gt;&lt;/pre&gt;
-
-     &lt;p&gt;...then, assuming this &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt; file
-     was served with the MIME type &lt;code&gt;application/x-soup&lt;/code&gt;,
-     the UA might navigate to the following URI:&lt;/p&gt;
-
-     &lt;pre&gt;<A HREF="http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre">http://example.com/soup?url=http%3A%2F%2Fwww.example.net%2Fchickenk%C3%AFwi.soup&lt;/pre</A>&gt;
-
-     &lt;p&gt;This site could then fetch the &lt;code&gt;chickenk&amp;#xEF;wi.soup&lt;/code&gt;
-     file and do whatever it is that it does with soup (synthesise it
-     and ship it to the user, or whatever).&lt;/p&gt;
-
-    &lt;/div&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A descriptive title of the handler, which the UA might use to
-    remind the user what the site in question is.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;
-
-  &lt;p&gt;User agents should raise &lt;span title=&quot;security
-  exception&quot;&gt;security exceptions&lt;/span&gt; if the methods are called with
-  &lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;mimeType&lt;/var&gt; values
-  that the UA deems to be &quot;privileged&quot;. For example, a site attempting
-  to register a handler for &lt;code&gt;http&lt;/code&gt; URIs or
-  &lt;code&gt;text/html&lt;/code&gt; content in a Web browser would likely cause
-  an exception to be raised.&lt;/p&gt;
-
-  &lt;p&gt;User agents must raise a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception if the
-  &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; argument passed to one of these methods does
-  not contain the exact literal string &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.&lt;/p&gt;
-
-  &lt;p&gt;User agents must not raise any other exceptions (other than
-  binding-specific exceptions, such as for an incorrect number of
-  arguments in an ECMAScript implementation).&lt;/p&gt;
-
-  &lt;p&gt;This section does not define how the pages registered by these
-  methods are used, beyond the requirements on how to process the
-  &lt;var title=&quot;&quot;&gt;uri&lt;/var&gt; value (see above). To some extent, the &lt;span
-  title=&quot;navigating across documents&quot;&gt;processing model for navigating
-  across documents&lt;/span&gt; defines some cases where these methods are
-  relevant, but in general UAs may use this information wherever they
-  would otherwise consider handing content to native plugins or helper
-  applications.&lt;/p&gt;
-
-  &lt;p&gt;UAs must not use registered content handlers to handle content
-  that was returned as part of a non-GET transaction (or rather, as
-  part of any non-idempotent transaction), as the remote site would
-  not be able to fetch the same data.&lt;/p&gt;
-
-
-  &lt;h5&gt;Security and privacy&lt;/h5&gt;
-
-  &lt;p&gt;These mechanisms can introduce a number of concerns, in
-  particular privacy concerns.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Hijacking all Web usage.&lt;/strong&gt; User agents should not
-  allow protocols that are key to its normal operation, such as
-  &lt;code&gt;http&lt;/code&gt; or &lt;code&gt;https&lt;/code&gt;, to be rerouted through
-  third-party sites. This would allow a user's activities to be
-  trivially tracked, and would allow user information, even in secure
-  connections, to be collected.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Hijacking defaults.&lt;/strong&gt; It is strongly recommended
-  that user agents do not automatically change any defaults, as this
-  could lead the user to send data to remote hosts that the user is
-  not expecting. New handlers registering themselves should never
-  automatically cause those sites to be used.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Registration spamming.&lt;/strong&gt; User agents should
-  consider the possibility that a site will attempt to register a
-  large number of handlers, possibly from multiple domains (e.g. by
-  redirecting through a series of pages each on a different domain,
-  and each registering a handler for &lt;code&gt;video/mpeg&lt;/code&gt; &mdash;
-  analogous practices abusing other Web browser features have been
-  used by pornography Web sites for many years). User agents should
-  gracefully handle such hostile attempts, protecting the user.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Misleading titles.&lt;/strong&gt; User agents should not rely
-  wholy on the &lt;var title=&quot;&quot;&gt;title&lt;/var&gt; argument to the methods when
-  presenting the registered handlers to the user, since sites could
-  easily lie. For example, a site &lt;code&gt;hostile.example.net&lt;/code&gt;
-  could claim that it was registering the &quot;Cuddly Bear Happy Content
-  Handler&quot;. User agents should therefore use the handler's domain in
-  any UI along with any title.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Hostile handler metadata.&lt;/strong&gt; User agents should
-  protect against typical attacks against strings embedded in their
-  interface, for example ensuring that markup or escape characters in
-  such strings are not executed, that null bytes are properly handled,
-  that over-long strings do not cause crashes or buffer overruns, and
-  so forth.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Leaking Intranet URIs.&lt;/strong&gt; The mechanism described
-  in this section can result in secret Intranet URIs being leaked, in
-  the following manner:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;The user registers a third-party content handler as the default
-   handler for a content type.&lt;/li&gt;
-
-   &lt;li&gt;The user then browses his corporate Intranet site and accesses
-   a document that uses that content type.&lt;/li&gt;
-
-   &lt;li&gt;The user agent contacts the third party and hands the third
-   party the URI to the Intranet content.&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;No actual confidential file data is leaked in this manner, but
-  the URIs themselves could contain confidential information. For
-  example, the URI could be
-  &lt;code&gt;<A HREF="https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code">https://www.corp.example.com/upcoming-aquisitions/samples.egf&lt;/code</A>&gt;,
-  which might tell the third party that Example Corporation is
-  intending to merge with Samples LLC. Implementors might wish to
-  consider allowing administrators to disable this feature for certain
-  subdomains, content types, or protocols.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Leaking secure URIs.&lt;/strong&gt; User agents should not send
-  HTTPS URIs to third-party sites registered as content handlers, in
-  the same way that user agents do not send &lt;code&gt;Referer&lt;/code&gt;
-  headers from secure sites to third-party sites.&lt;/p&gt;
-
-  &lt;p&gt;&lt;strong&gt;Leaking credentials.&lt;/strong&gt; User agents must never send
-  username or password information in the URIs that are escaped and
-  included sent to the handler sites. User agents may even avoid
-  attempting to pass to Web-based handlers the URIs of resources
-  that are known to require authentication to access, as such sites
-  would be unable to access the resources in question without
-  prompting the user for credentials themselves (a practice that would
-  require the user to know whether to trust the third-party handler, a
-  decision many users are unable to make or even understand).&lt;/p&gt;
-
-
-  &lt;h5 id=&quot;sample-handler-impl&quot;&gt;Sample user interface&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p&gt;A simple implementation of this feature for a desktop Web browser
-  might work as follows.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code
-  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt;
-  method could display a modal dialog box:&lt;/p&gt;
-
-  &lt;pre&gt;||[ Protocol Handler Registration ]|||||||||||||||||||||||||||
-|                                                            |
-| This Web page:                                             |
-|                                                            |
-|    Kittens at work                                         |
-|    <A HREF="http://kittens.example.org/">http://kittens.example.org/</A>                             |
-|                                                            |
-| ...would like permission to handle the protocol &quot;x-meow:&quot;  |
-| using the following Web-based application:                 |
-|                                                            |
-|    Kittens-at-work displayer                               |
-|    <A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>                     |
-|                                                            |
-| Do you trust the administrators of the &quot;kittens.example.   |
-| org&quot; domain?                                               |
-|                                                            |
-|              ( Trust kittens.example.org )  (( Cancel ))   |
-|____________________________________________________________|&lt;/pre&gt;
-
-  &lt;p&gt;...where &quot;Kittens at work&quot; is the title of the page that invoked
-  the method, &quot;<A HREF="http://kittens.example.org/">http://kittens.example.org/</A>&quot; is the URI of that page,
-  &quot;x-meow&quot; is the string that was passed to the &lt;code
-  title=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt;
-  method as its first argument (&lt;var title=&quot;&quot;&gt;protocol&lt;/var&gt;),
-  &quot;<A HREF="http://kittens.example.org/?show=%s">http://kittens.example.org/?show=%s</A>&quot; was the second argument (&lt;var
-  title=&quot;&quot;&gt;uri&lt;/var&gt;), and &quot;Kittens-at-work displayer&quot; was the third
-  argument (&lt;var title=&quot;&quot;&gt;title&lt;/var&gt;).&lt;/p&gt;
-
-  &lt;p&gt;If the user clicks the Cancel button, then nothing further
-  happens. If the user clicks the &quot;Trust&quot; button, then the handler is
-  remembered.&lt;/p&gt;
-
-  &lt;p&gt;When the user then attempts to fetch a URI that uses the
-  &quot;x-meow:&quot; scheme, then it might display a dialog as follows:&lt;/p&gt;
-
-  &lt;pre&gt;||[ Unknown Protocol ]||||||||||||||||||||||||||||||||||||||||
-|                                                            |
-| You have attempted to access:                              |
-|                                                            |
-|    x-meow:S2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%3D               |
-|                                                            |
-| How would you like FerretBrowser to handle this resource?  |
-|                                                            |
-|  (o) Contact the FerretBrowser plugin registry to see if   |
-|      there is an official way to handle this resource.     |
-|                                                            |
-|  ( ) Pass this URI to a local application:                 |
-|      [ /no application selected/             ] ( Choose )  |
-|                                                            |
-|  ( ) Pass this URI to the &quot;Kittens-at-work displayer&quot;      |
-|      application at &quot;kittens.example.org&quot;.                 |
-|                                                            |
-|  [ ] Always do this for resources using the &quot;x-meow&quot;       |
-|      protocol in future.                                   |
-|                                                            |
-|                                     ( Ok )  (( Cancel ))   |
-|____________________________________________________________|&lt;/pre&gt;
-
-  &lt;p&gt;...where the third option is the one that was primed by the site
-  registering itself earlier.&lt;/p&gt;
-
-  &lt;p&gt;If the user does select that option, then the browser, in
-  accordance with the requirements described in the previous two
-  sections, will redirect the user to
-  &quot;<A HREF="http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D">http://kittens.example.org/?show=x-meow%3AS2l0dGVucyBhcmUgdGhlIGN1dGVzdCE%253D</A>&quot;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code
-  title=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt;
-  method would work equivalently, but for unknown MIME types instead
-  of unknown protocols.&lt;/p&gt;
-
-
   &lt;h3 id=&quot;storage&quot;&gt;Client-side session and persistent storage of name/value pairs&lt;/h3&gt;
 
   &lt;h4&gt;Introduction&lt;/h4&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007943.html">[html5] r1035 - /
</A></li>
	<LI>Next message: <A HREF="007945.html">[html5] r1037 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7944">[ date ]</a>
              <a href="thread.html#7944">[ thread ]</a>
              <a href="subject.html#7944">[ subject ]</a>
              <a href="author.html#7944">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
