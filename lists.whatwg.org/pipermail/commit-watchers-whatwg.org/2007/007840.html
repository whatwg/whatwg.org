<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r923 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r923%20-%20/&In-Reply-To=%3C20070619054634.EC7C51238CF%40looneymail-a5.g.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007839.html">
   <LINK REL="Next"  HREF="007841.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r923 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r923%20-%20/&In-Reply-To=%3C20070619054634.EC7C51238CF%40looneymail-a5.g.dreamhost.com%3E"
       TITLE="[html5] r923 - /">whatwg at whatwg.org
       </A><BR>
    <I>Mon Jun 18 22:46:34 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007839.html">[html5] r922 - /
</A></li>
        <LI>Next message: <A HREF="007841.html">[html5] r924 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7840">[ date ]</a>
              <a href="thread.html#7840">[ thread ]</a>
              <a href="subject.html#7840">[ subject ]</a>
              <a href="author.html#7840">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2007-06-18 22:46:33 -0700 (Mon, 18 Jun 2007)
New Revision: 923

Modified:
   index
   source
Log:
[e] (2) Remove excessive 'must's in the Document.innerHTML setter; be more explicit about the handling of &lt;/foo&gt; in the innerHTML parse case when &lt;foo&gt; is not a PCDATA element (e.g. setting a SCRIPT element's innerHTML to '&lt;/script&gt;').

Modified: index
===================================================================
--- index	2007-06-19 05:37:29 UTC (rev 922)
+++ index	2007-06-19 05:46:33 UTC (rev 923)
@@ -3873,40 +3873,42 @@
 
   &lt;ol&gt;
    &lt;li&gt;
-    &lt;p&gt;Otherwise, if the document has an &lt;span&gt;active
-     parser&lt;/span&gt;&lt;!--XXX xref--&gt;, then stop that parser, and throw away any
-     pending content in the input stream. &lt;span class=big-issue&gt;what about if
-     it doesn't, because it's either like a text/plain, or Atom, or PDF, or
-     XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;
-    &lt;!-- XXX see also document.open() --&gt;
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+    xref--&gt;,
+     then stop that parser, and throw away any pending content in the input
+     stream. &lt;span class=big-issue&gt;what about if it doesn't, because it's
+     either like a text/plain, or Atom, or PDF, or XHTML, or image document,
+     or something?&lt;/span&gt;&lt;/p&gt;
+    &lt;!-- XXX see
+    also document.open() --&gt;
 
    &lt;li&gt;
-    &lt;p&gt;The user agent must remove the children nodes of the
-     &lt;code&gt;Document&lt;/code&gt; whose &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-     href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute is being set.&lt;/p&gt;
+    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose &lt;code
+     title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+     attribute is being set.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;The user agent must create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in
-     its initial state, and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
+    &lt;p&gt;Create a new &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt;, in its initial state,
+     and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
    &lt;/li&gt;
    &lt;!-- redundant, the document is forcably already so labelled if we get here
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must mark the &lt;code&gt;Document&lt;/code&gt; object as
-    being an &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
+    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 --&gt;
 
    &lt;li&gt;
-    &lt;p&gt;The user agent must place into the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt;
-     for the &lt;a href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; just created the string being
-     assigned into the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+    &lt;p&gt;Place into the &lt;a href=&quot;#input0&quot;&gt;input stream&lt;/a&gt; for the &lt;a
+     href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; just created the string being assigned
+     into the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
      href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
    &lt;li&gt;
-    &lt;p&gt;The user agent must start the parser and let it run until it has
-     consumed all the characters just inserted into the input stream. (The
+    &lt;p&gt;Start the parser and let it run until it has consumed all the
+     characters just inserted into the input stream. (The
      &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements and a
      &lt;code title=event-load&gt;&lt;a href=&quot;#load0&quot;&gt;load&lt;/a&gt;&lt;/code&gt; event will have
      fired on &lt;a href=&quot;#the-body0&quot; title=&quot;the body element&quot;&gt;its body
@@ -33756,10 +33758,13 @@
 
    &lt;dd&gt;
     &lt;p&gt;If the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the RCDATA
-     or CDATA states then examine the next few characters. If they do not
-     match the tag name of the last start tag token emitted (case
-     insensitively), or if they do but they are not immediately followed by
-     one of the following characters:&lt;/p&gt;
+     or CDATA states but no start tag token has ever been emitted by this
+     instance of the tokeniser (&lt;a href=&quot;#innerhtml1&quot;&gt;innerHTML case&lt;/a&gt;),
+     or, if the &lt;a href=&quot;#content2&quot;&gt;content model flag&lt;/a&gt; is set to the
+     RCDATA or CDATA states and the next few characters do not match the tag
+     name of the last start tag token emitted (case insensitively), or if
+     they do but they are not immediately followed by one of the following
+     characters:&lt;/p&gt;
 
     &lt;ul class=brief&gt;
      &lt;li&gt;U+0009 CHARACTER TABULATION
@@ -33780,7 +33785,7 @@
      &lt;li&gt;EOF
     &lt;/ul&gt;
 
-    &lt;p&gt;...emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+    &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
      character token, and switch to the &lt;a href=&quot;#data-state&quot;&gt;data state&lt;/a&gt;
      to process the &lt;a href=&quot;#next-input&quot;&gt;next input character&lt;/a&gt;.&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2007-06-19 05:37:29 UTC (rev 922)
+++ source	2007-06-19 05:46:33 UTC (rev 923)
@@ -2463,58 +2463,54 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Otherwise, if the document has an &lt;span&gt;active
-    parser&lt;/span&gt;&lt;!--XXX xref--&gt;, then stop that parser, and throw
-    away any pending content in the input stream. &lt;span
-    class=&quot;big-issue&quot;&gt;what about if it doesn't, because it's either
-    like a text/plain, or Atom, or PDF, or XHTML, or image document,
-    or something?&lt;/span&gt;&lt;/p&gt;&lt;!-- XXX see also document.open() --&gt;
+    &lt;p&gt;If the document has an &lt;span&gt;active parser&lt;/span&gt;&lt;!--XXX
+    xref--&gt;, then stop that parser, and throw away any pending content
+    in the input stream. &lt;span class=&quot;big-issue&quot;&gt;what about if it
+    doesn't, because it's either like a text/plain, or Atom, or PDF,
+    or XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;!-- XXX see
+    also document.open() --&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must remove the children nodes of the
-    &lt;code&gt;Document&lt;/code&gt; whose &lt;code
-    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is being
-    set.&lt;/p&gt;
+    &lt;p&gt;Remove the children nodes of the &lt;code&gt;Document&lt;/code&gt; whose
+    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute is
+    being set.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must create a new &lt;span&gt;HTML parser&lt;/span&gt;, in
-    its initial state, and associate it with the
-    &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
+    &lt;p&gt;Create a new &lt;span&gt;HTML parser&lt;/span&gt;, in its initial state,
+    and associate it with the &lt;code&gt;Document&lt;/code&gt; node.&lt;/p&gt;
 
    &lt;/li&gt;
 
 &lt;!-- redundant, the document is forcably already so labelled if we get here
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must mark the &lt;code&gt;Document&lt;/code&gt; object as
-    being an &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Mark the &lt;code&gt;Document&lt;/code&gt; object as being an &lt;span
+    title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 --&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must place into the &lt;span&gt;input stream&lt;/span&gt;
-    for the &lt;span&gt;HTML parser&lt;/span&gt; just created the string being
-    assigned into the &lt;code
-    title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
+    &lt;p&gt;Place into the &lt;span&gt;input stream&lt;/span&gt; for the &lt;span&gt;HTML
+    parser&lt;/span&gt; just created the string being assigned into the
+    &lt;code title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; attribute.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;The user agent must start the parser and let it run until it
-    has consumed all the characters just inserted into the input
-    stream. (The &lt;code&gt;Document&lt;/code&gt; node will have been populated
-    with elements and a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event
-    will have fired on &lt;span title=&quot;the body element&quot;&gt;its body
-    element&lt;/span&gt;.)&lt;/p&gt;
+    &lt;p&gt;Start the parser and let it run until it has consumed all the
+    characters just inserted into the input stream. (The
+    &lt;code&gt;Document&lt;/code&gt; node will have been populated with elements
+    and a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt; event will have fired
+    on &lt;span title=&quot;the body element&quot;&gt;its body element&lt;/span&gt;.)&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -31384,10 +31380,13 @@
    &lt;dd&gt;
 
     &lt;p&gt;If the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or
-    CDATA states then examine the next few characters. If they do not
-    match the tag name of the last start tag token emitted (case
-    insensitively), or if they do but they are not immediately
-    followed by one of the following characters:&lt;/p&gt;
+    CDATA states but no start tag token has ever been emitted by this
+    instance of the tokeniser (&lt;span&gt;innerHTML case&lt;/span&gt;), or, if
+    the &lt;span&gt;content model flag&lt;/span&gt; is set to the RCDATA or CDATA
+    states and the next few characters do not match the tag name of
+    the last start tag token emitted (case insensitively), or if they
+    do but they are not immediately followed by one of the following
+    characters:&lt;/p&gt;
 
     &lt;ul class=&quot;brief&quot;&gt;
      &lt;li&gt;U+0009 CHARACTER TABULATION&lt;/li&gt;
@@ -31401,7 +31400,7 @@
      &lt;li&gt;EOF&lt;/li&gt;
     &lt;/ul&gt;
 
-    &lt;p&gt;...emit a U+003C LESS-THAN SIGN character token, a U+002F
+    &lt;p&gt;...then emit a U+003C LESS-THAN SIGN character token, a U+002F
     SOLIDUS character token, and switch to the &lt;span&gt;data state&lt;/span&gt;
     to process the &lt;span&gt;next input character&lt;/span&gt;.&lt;/p&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007839.html">[html5] r922 - /
</A></li>
	<LI>Next message: <A HREF="007841.html">[html5] r924 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7840">[ date ]</a>
              <a href="thread.html#7840">[ thread ]</a>
              <a href="subject.html#7840">[ subject ]</a>
              <a href="author.html#7840">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
