<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r810 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r810%20-%20/&In-Reply-To=%3C20070515023653.F0A7E27F5D%40looneymail-a3.g.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007731.html">
   <LINK REL="Next"  HREF="007733.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r810 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r810%20-%20/&In-Reply-To=%3C20070515023653.F0A7E27F5D%40looneymail-a3.g.dreamhost.com%3E"
       TITLE="[html5] r810 - /">whatwg at whatwg.org
       </A><BR>
    <I>Mon May 14 19:36:53 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007731.html">[html5] r809 - /
</A></li>
        <LI>Next message: <A HREF="007733.html">[html5] r811 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7732">[ date ]</a>
              <a href="thread.html#7732">[ thread ]</a>
              <a href="subject.html#7732">[ subject ]</a>
              <a href="author.html#7732">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2007-05-14 19:36:51 -0700 (Mon, 14 May 2007)
New Revision: 810

Modified:
   index
   source
Log:
[agow] (2) &lt;canvas&gt; gradient updates, cross reference fixes, and editorial fixes

Modified: index
===================================================================
--- index	2007-05-11 23:20:38 UTC (rev 809)
+++ index	2007-05-15 02:36:51 UTC (rev 810)
@@ -22,7 +22,7 @@
 
    &lt;h1 id=html-5&gt;HTML 5&lt;/h1&gt;
 
-   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 11 May 2007&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=working&gt;Working Draft &mdash; 15 May 2007&lt;/h2&gt;
 
    &lt;p&gt;You can take part in this work. &lt;a
     href=&quot;<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&quot;&gt;Join the working group's
@@ -15455,7 +15455,7 @@
 
   &lt;p&gt;When the UA is passed an empty string or a string specifying a context
    that it does not support, then it must return null. String comparisons
-   should be literal and case-sensitive.
+   must be literal and case-sensitive.
 
   &lt;p class=note&gt;A future version of this specification will probably define a
    &lt;code&gt;3d&lt;/code&gt; context (probably based on the OpenGL ES API).
@@ -15554,15 +15554,15 @@
 --&gt;
   // compositing
            attribute float &lt;a href=&quot;#globalalpha&quot; title=dom-context-2d-globalAlpha&gt;globalAlpha&lt;/a&gt;; // (default 1.0)
-           attribute DOMString &lt;a href=&quot;#globalcompositeoperation&quot; title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default over)
+           attribute DOMString &lt;a href=&quot;#globalcompositeoperation&quot; title=dom-context-2d-globalCompositeOperation&gt;globalCompositeOperation&lt;/a&gt;; // (default source-over)
 
   // colors and styles
            attribute DOMObject &lt;a href=&quot;#strokestyle&quot; title=dom-context-2d-strokeStyle&gt;strokeStyle&lt;/a&gt;; // (default black)
            attribute DOMObject &lt;a href=&quot;#fillstyle&quot; title=dom-context-2d-fillStyle&gt;fillStyle&lt;/a&gt;; // (default black)
-  &lt;a href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt; &lt;span title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/span&gt;(in float x0, in float y0, in float x1, in float y1);
-  &lt;a href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt; &lt;span title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/span&gt;(in float x0, in float y0, in float r0, in float x1, in float y1, in float r1);
-  &lt;a href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt; &lt;span title=dom-context-2d-createPattern&gt;createPattern&lt;/span&gt;(in &lt;a href=&quot;#htmlimageelement&quot;&gt;HTMLImageElement&lt;/a&gt; image, DOMString repetition);
-  &lt;a href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt; &lt;span title=dom-context-2d-createPattern&gt;createPattern&lt;/span&gt;(in &lt;a href=&quot;#htmlcanvaselement&quot;&gt;HTMLCanvasElement&lt;/a&gt; image, DOMString repetition);
+  &lt;a href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt; &lt;a href=&quot;#createlineargradient&quot; title=dom-context-2d-createLinearGradient&gt;createLinearGradient&lt;/a&gt;(in float x0, in float y0, in float x1, in float y1);
+  &lt;a href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt; &lt;a href=&quot;#createradialgradient&quot; title=dom-context-2d-createRadialGradient&gt;createRadialGradient&lt;/a&gt;(in float x0, in float y0, in float r0, in float x1, in float y1, in float r1);
+  &lt;a href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt; &lt;a href=&quot;#createpatternimage&quot; title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;(in &lt;a href=&quot;#htmlimageelement&quot;&gt;HTMLImageElement&lt;/a&gt; image, DOMString repetition);
+  &lt;a href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt; &lt;a href=&quot;#createpatternimage&quot; title=dom-context-2d-createPattern&gt;createPattern&lt;/a&gt;(in &lt;a href=&quot;#htmlcanvaselement&quot;&gt;HTMLCanvasElement&lt;/a&gt; image, DOMString repetition);
 
   // line caps/joins
            attribute float &lt;a href=&quot;#linewidth&quot; title=dom-context-2d-lineWidth&gt;lineWidth&lt;/a&gt;; // (default 1)
@@ -15574,7 +15574,7 @@
            attribute float &lt;a href=&quot;#shadowoffsetx&quot; title=dom-context-2d-shadowOffsetX&gt;shadowOffsetX&lt;/a&gt;; // (default 0)
            attribute float &lt;a href=&quot;#shadowoffsety&quot; title=dom-context-2d-shadowOffsetY&gt;shadowOffsetY&lt;/a&gt;; // (default 0)
            attribute float &lt;a href=&quot;#shadowblur&quot; title=dom-context-2d-shadowBlur&gt;shadowBlur&lt;/a&gt;; // (default 0)
-           attribute DOMString &lt;a href=&quot;#shadowcolor&quot; title=dom-context-2d-shadowColor&gt;shadowColor&lt;/a&gt;; // (default black)
+           attribute DOMString &lt;a href=&quot;#shadowcolor&quot; title=dom-context-2d-shadowColor&gt;shadowColor&lt;/a&gt;; // (default transparent black)
 
   // rects
   void &lt;a href=&quot;#clearrect&quot; title=dom-context-2d-clearRect&gt;clearRect&lt;/a&gt;(in float x, in float y, in float w, in float h);
@@ -15676,13 +15676,13 @@
    canvas&lt;/span&gt;&lt;!-- XXX xref --&gt;, not the context.
 
   &lt;p&gt;The &lt;dfn id=save title=dom-context-2d-save&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt;
-   method pushes a copy of the current drawing state onto the drawing state
-   stack.
+   method must push a copy of the current drawing state onto the drawing
+   state stack.
 
   &lt;p&gt;The &lt;dfn id=restore
-   title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method pops the
-   top entry in the drawing state stack, and resets the drawing state it
-   describes. If there is no saved state, the method does nothing.
+   title=dom-context-2d-restore&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method must pop
+   the top entry in the drawing state stack, and reset the drawing state it
+   describes. If there is no saved state, the method must do nothing.
 
   &lt;h6 id=transformations&gt;&lt;span class=secno&gt;3.14.11.1.2. &lt;/span&gt;&lt;dfn
    id=transformations0&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
@@ -15901,9 +15901,9 @@
 
   &lt;p&gt;Both attributes can be either strings, &lt;code&gt;&lt;a
    href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt;s, or &lt;code&gt;&lt;a
-   href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On setting, strings
-   should be parsed as CSS &lt;color&gt; values and the color assigned, and
-   &lt;code&gt;&lt;a href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
+   href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;s. On setting, strings must
+   be parsed as CSS &lt;color&gt; values and the color assigned, and &lt;code&gt;&lt;a
+   href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a
    href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt; objects must be assigned
    themselves. &lt;a href=&quot;#refsCSS3COLOR&quot;&gt;[CSS3COLOR]&lt;/a&gt; If the value is a
    string but is not a valid color, or is neither a string, a &lt;code&gt;&lt;a
@@ -15932,10 +15932,10 @@
 
   &lt;p&gt;Otherwise, if it is not a color but a &lt;code&gt;&lt;a
    href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a
-   href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then an object supporting
-   those interfaces must be returned. Such objects are opaque and therefore
-   only useful for assigning to other attributes or for comparison to other
-   gradients or patterns.
+   href=&quot;#canvaspattern0&quot;&gt;CanvasPattern&lt;/a&gt;&lt;/code&gt;, then the respective
+   object must be returned. (Such objects are opaque and therefore only
+   useful for assigning to other attributes or for comparison to other
+   gradients or patterns.)
 
   &lt;p&gt;When the context is created, the &lt;code
    title=dom-context-2d-strokeStyle&gt;&lt;a
@@ -15948,12 +15948,15 @@
    both represented by objects implementing the opaque &lt;dfn
    id=canvasgradient0&gt;&lt;code&gt;CanvasGradient&lt;/code&gt;&lt;/dfn&gt; interface.
 
-  &lt;p&gt;Once a gradient has been created (see below), stops must be placed along
-   it to define how the colors are distributed along the gradient. Between
-   each such stop, the colors and the alpha component must be interpolated
-   over the RGBA space to find the color to use at that offset. Immediately
-   before the 0 offset and immediately after the 1 offset, transparent black
-   stops are be assumed.
+  &lt;p&gt;Once a gradient has been created (see below), stops are placed along it
+   to define how the colors are distributed along the gradient. The color of
+   the gradient at each stop is the color specified for that stop. Between
+   each such stop, the colors and the alpha component must be linearly
+   interpolated over the RGBA space without premultiplying the alpha value to
+   find the color to use at that offset. Before the first stop, the color
+   must be the color of the first stop. After the last stop, the color must
+   be the color of the last stop. When there are no stops, the gradient is
+   transparent black.
 
   &lt;p&gt;The &lt;dfn id=addcolorstop
    title=dom-canvasgradient-addColorStop&gt;&lt;code&gt;addColorStop(&lt;var
@@ -15963,10 +15966,17 @@
    than 0 or greater than 1 then an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception
    must be raised. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be parsed as a CSS
    color, then a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception must be raised. Otherwise,
-   the gradient must be updated with the new stop information.
+   the gradient must have a new stop placed, at offset &lt;var
+   title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient, and with the color
+   obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as a CSS &lt;color&gt;
+   value. If multiple stops are placed at the same place on a gradient, they
+   must be placed in the order added, with the first one closest to the start
+   of the gradient, and each subsequent one infinitesimally further along
+   towards the end point (in effect causing all but the first and last stop
+   added at each point to be ignored).
 
-  &lt;p&gt;The &lt;dfn id=createlineargradient title=createLinearGradient&gt;&lt;code
-   title=dom-context-2d-createLinearGradient&gt;createLinearGradient(&lt;var
+  &lt;p&gt;The &lt;dfn id=createlineargradient
+   title=dom-context-2d-createLinearGradient&gt;&lt;code&gt;createLinearGradient(&lt;var
    title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var
    title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments, representing
    the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;) and end
@@ -15975,15 +15985,23 @@
    href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialised with that
    line.
 
-  &lt;p&gt;Linear gradients must be rendered such that at the starting point on the
-   canvas the color at offset 0 is used, that at the ending point the color
-   at offset 1 is used, that all points on a line perpendicular to the line
-   between the start and end points have the color at the point where those
-   two lines cross (interpolation happening as described above), and that any
-   points beyond the start or end points are a transparent black.
+  &lt;p&gt;Linear gradients must be rendered such that at and before the starting
+   point on the canvas the color at offset 0 is used, that at and after the
+   ending point the color at offset 1 is used, and that all points on a line
+   perpendicular to the line that crosses the start and end points have the
+   color at the point where those two lines cross (with the colors coming
+   from the interpolation described above).
 
-  &lt;p&gt;The &lt;dfn id=createradialgradient title=createRadialGradient&gt;&lt;code
-   title=dom-context-2d-createRadialGradient&gt;createRadialGradient(&lt;var
+  &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the linear gradient must paint
+   nothing.&lt;/p&gt;
+  &lt;!-- XXX could make this paint the start colour,
+  or the end colour, or raise an exception --&gt;
+
+  &lt;p&gt;The &lt;dfn id=createradialgradient
+   title=dom-context-2d-createRadialGradient&gt;&lt;code&gt;createRadialGradient(&lt;var
    title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;, &lt;var
    title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var
    title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the first
@@ -15993,44 +16011,92 @@
    &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are
    in coordinate space units. The method must return a radial &lt;code&gt;&lt;a
    href=&quot;#canvasgradient0&quot;&gt;CanvasGradient&lt;/a&gt;&lt;/code&gt; initialised with those
-   two circles.
+   two circles. If either of &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;
+   are negative, an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception must be raised.
 
-  &lt;p&gt;Radial gradients must be rendered such that a cone is created from the
-   two circles, so that at the circumference of the starting circle the color
-   at offset 0 is used, that at the circumference around the ending circle
-   the color at offset 1 is used, that the circumference of a circle drawn a
-   certain fraction of the way along the line between the two origins with a
-   radius the same fraction of the way between the two radii has the color at
-   that offset (interpolation happening as described above), that the end
-   circle appear to be above the start circle when the end circle is not
-   completely enclosed by the start circle, that the end circle be filled by
-   the color at offset 1, and that any points not described by the gradient
-   are a transparent black.
+  &lt;p&gt;Radial gradients must be rendered by following these steps:
 
-  &lt;p&gt;If a gradient has no stops defined, then the gradient must be treated as
-   a solid transparent black. Gradients are, naturally, only painted where
-   the stroking or filling effect requires that they be drawn.
+  &lt;ol&gt;
+   &lt;li&gt;
+    &lt;p&gt;Let &lt;span&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+     title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+     title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
 
+    &lt;p&gt;Let &lt;span&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+     title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+     title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+     title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+     title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color of the
+     gradient at offset 0.0 for all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;
+     less than 0.0, the color at offset 1.0 for all values of &lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt; greater than 1.0, and the color at the given
+     offset for values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; in the range
+     &lt;span&gt;0.0&nbsp;&le;&nbsp;&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;&le;&nbsp;1.0&lt;/span&gt;
+
+   &lt;li&gt;
+    &lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where &lt;span&gt;r(&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;, starting with the value
+     of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to positive infinity and ending
+     with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative
+     infinity, draw the circumference of the circle with radius of radius
+     &lt;span&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span&gt;x(&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span&gt;y(&lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var
+     title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the canvas
+     that have not yet been painted on by earlier circles in this step for
+     this rendering of the gradient.
+  &lt;/ol&gt;
+
+  &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+   title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+   title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must paint
+   nothing.&lt;/p&gt;
+  &lt;!-- XXX could make this paint the start colour,
+  or the end colour, or a circle of one in the other, or raise an
+  exception --&gt;
+
+  &lt;p class=note&gt;This effectively creates a cone, touched by the two circles
+   defined in the creation of the gradient, with the part of the cone before
+   the start circle (0.0) using the color of the first offset, the part of
+   the cone after the end circle (1.0) using the color of the last offset,
+   and areas outside the cone untouched by the gradient (transparent black).
+   If the two circles overlap, the effect is as if the second (end) circle is
+   painted on top of the first circle. The end circle is always filled with
+   the color of the last stop.
+
+  &lt;p&gt;Gradients must only be painted where the relevant stroking or filling
+   effects requires that they be drawn.
+
   &lt;p&gt;Support for actually painting gradients is optional. Instead of painting
    the gradients, user agents may instead just paint the first stop's color.
-   However, &lt;code
-   title=dom-context-2d-createLinearGradient&gt;createLinearGradient()&lt;/code&gt;
-   and &lt;code
-   title=dom-context-2d-createRadialGradient&gt;createRadialGradient()&lt;/code&gt;
-   must always return objects when passed valid arguments.
+   However, &lt;code title=dom-context-2d-createLinearGradient&gt;&lt;a
+   href=&quot;#createlineargradient&quot;&gt;createLinearGradient()&lt;/a&gt;&lt;/code&gt; and &lt;code
+   title=dom-context-2d-createRadialGradient&gt;&lt;a
+   href=&quot;#createradialgradient&quot;&gt;createRadialGradient()&lt;/a&gt;&lt;/code&gt; must always
+   return objects when passed valid arguments.
 
   &lt;p&gt;Patterns are represented by objects implementing the opaque &lt;dfn
    id=canvaspattern0&gt;&lt;code&gt;CanvasPattern&lt;/code&gt;&lt;/dfn&gt; interface.
 
   &lt;p&gt;To create objects of this type, the &lt;dfn id=createpatternimage
-   title=createPattern&gt;&lt;code
-   title=dom-context-2d-createPattern&gt;createPattern(image,
+   title=dom-context-2d-createPattern&gt;&lt;code&gt;createPattern(image,
    repetition)&lt;/code&gt;&lt;/dfn&gt; method is used. The first argument gives the
    image to use as the pattern (either an &lt;code&gt;&lt;a
    href=&quot;#htmlimageelement&quot;&gt;HTMLImageElement&lt;/a&gt;&lt;/code&gt; or an &lt;code&gt;&lt;a
    href=&quot;#htmlcanvaselement&quot;&gt;HTMLCanvasElement&lt;/a&gt;&lt;/code&gt;). Modifying this
-   image after calling the &lt;code
-   title=dom-context-2d-createPattern&gt;createPattern()&lt;/code&gt; method must not
+   image after calling the &lt;code title=dom-context-2d-createPattern&gt;&lt;a
+   href=&quot;#createpatternimage&quot;&gt;createPattern()&lt;/a&gt;&lt;/code&gt; method must not
    affect the pattern. The second argument must be a string with one of the
    following values: &lt;code title=&quot;&quot;&gt;repeat&lt;/code&gt;, &lt;code
    title=&quot;&quot;&gt;repeat-x&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;repeat-y&lt;/code&gt;, &lt;code
@@ -16064,9 +16130,8 @@
    be drawn, and are affected by the current transformation matrix.
 
   &lt;p&gt;Support for patterns is optional. If the user agent doesn't support
-   patterns, then &lt;code
-   title=dom-context-2d-createPattern&gt;createPattern()&lt;/code&gt; must return
-   null.&lt;/p&gt;
+   patterns, then &lt;code title=dom-context-2d-createPattern&gt;&lt;a
+   href=&quot;#createpatternimage&quot;&gt;createPattern()&lt;/a&gt;&lt;/code&gt; must return null.&lt;/p&gt;
   &lt;!--
    Requests for v3 features:
     * apply transforms to patterns, so you don't have to create
@@ -39100,9 +39165,9 @@
    H&aring;kon Wium Lie, Henri Sivonen, Henrik Lied, Ignacio Javier, J. King,
    James Graham, James M Snell, James Perrett, Jan-Klaas Kollhof, Jasper
    Bryant-Greene, Jeff Cutsinger, Jens Bannmann, Joel Spolsky, John Harding,
-   Johnny Stenback, Jon Perlow, Jonathan Worent, Jorgen Horstink, Joshua
-   Randall, Jukka K. Korpela, Kai Hendry, &lt;!-- Keryx Web, = Lars
-  Gunther --&gt;
+   Johnny Stenback, Jon Perlow, Jonathan Worent, Jorgen Horstink, Josh
+   Levenberg, Joshua Randall, Jukka K. Korpela, Kai Hendry, &lt;!-- Keryx
+  Web, = Lars Gunther --&gt;
    Kornel Lesinski, &amp;#x9ed2;&amp;#x6fa4;&amp;#x525b;&amp;#x5fd7; (KUROSAWA Takeshi),
    Lachlan Hunt, Larry Page, Lars Gunther, Laurens Holst, Lenny Domnitser,
    L&eacute;onard Bouchet, Leons Petrazickis, Logan&lt;!-- on moz irc --&gt;,
@@ -39111,8 +39176,8 @@
    Matthew Raymond, Matthew Thomas, Mattias Waldau, Max Romantschuk, Michael
    'Ratt' Iannarelli, Michael A. Nachbaur, Michael Gratton, Michael Powers,
    Michel Fortin, Mihai &amp;#x015E;ucan&lt;!-- from ROBO Design --&gt;, Mike
-   Dierken&lt;!--
-  S. Mike Dierken --&gt;, Mike Dixon, Mike Schinkel, Mike Shaver,
+   Dierken&lt;!-- S. Mike
+  Dierken --&gt;, Mike Dixon, Mike Schinkel, Mike Shaver,
    Mikko Rantalainen, Neil Deakin, Olav Junker Kj&aelig;r, Philip Taylor,
    Rajas Moonka, Rimantas Liubertas, Robert O'Callahan, Robert Sayre, Roman
    Ivanov, S. Mike Dierken, Sam Ruby, Sean Knapp, Shadow2531, Shaun Inman,

Modified: source
===================================================================
--- source	2007-05-11 23:20:38 UTC (rev 809)
+++ source	2007-05-15 02:36:51 UTC (rev 810)
@@ -13039,7 +13039,7 @@
 
   &lt;p&gt;When the UA is passed an empty string or a string specifying a
   context that it does not support, then it must return null. String
-  comparisons should be literal and case-sensitive.&lt;/p&gt;
+  comparisons must be literal and case-sensitive.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;A future version of this specification will probably
   define a &lt;code&gt;3d&lt;/code&gt; context (probably based on the OpenGL ES
@@ -13136,7 +13136,7 @@
 --&gt;
   // compositing
            attribute float &lt;span title=&quot;dom-context-2d-globalAlpha&quot;&gt;globalAlpha&lt;/span&gt;; // (default 1.0)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/span&gt;; // (default over)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-globalCompositeOperation&quot;&gt;globalCompositeOperation&lt;/span&gt;; // (default source-over)
 
   // colors and styles
            attribute DOMObject &lt;span title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/span&gt;; // (default black)
@@ -13156,7 +13156,7 @@
            attribute float &lt;span title=&quot;dom-context-2d-shadowOffsetX&quot;&gt;shadowOffsetX&lt;/span&gt;; // (default 0)
            attribute float &lt;span title=&quot;dom-context-2d-shadowOffsetY&quot;&gt;shadowOffsetY&lt;/span&gt;; // (default 0)
            attribute float &lt;span title=&quot;dom-context-2d-shadowBlur&quot;&gt;shadowBlur&lt;/span&gt;; // (default 0)
-           attribute DOMString &lt;span title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/span&gt;; // (default black)
+           attribute DOMString &lt;span title=&quot;dom-context-2d-shadowColor&quot;&gt;shadowColor&lt;/span&gt;; // (default transparent black)
 
   // rects
   void &lt;span title=&quot;dom-context-2d-clearRect&quot;&gt;clearRect&lt;/span&gt;(in float x, in float y, in float w, in float h);
@@ -13247,14 +13247,14 @@
   the canvas&lt;/span&gt;&lt;!-- XXX xref --&gt;, not the context.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-context-2d-save&quot;&gt;&lt;code&gt;save()&lt;/code&gt;&lt;/dfn&gt;
-  method pushes a copy of the current drawing state onto the drawing
-  state stack.&lt;/p&gt;
+  method must push a copy of the current drawing state onto the
+  drawing state stack.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-context-2d-restore&quot;&gt;&lt;code&gt;restore()&lt;/code&gt;&lt;/dfn&gt; method
-  pops the top entry in the drawing state stack, and resets the
+  must pop the top entry in the drawing state stack, and reset the
   drawing state it describes. If there is no saved state, the method
-  does nothing.&lt;/p&gt;
+  must do nothing.&lt;/p&gt;
 
 
   &lt;h6&gt;&lt;dfn&gt;Transformations&lt;/dfn&gt;&lt;/h6&gt;
@@ -13473,8 +13473,8 @@
 
   &lt;p&gt;Both attributes can be either strings,
   &lt;code&gt;CanvasGradient&lt;/code&gt;s, or &lt;code&gt;CanvasPattern&lt;/code&gt;s. On
-  setting, strings should be parsed as CSS &lt;color&gt; values and
-  the color assigned, and &lt;code&gt;CanvasGradient&lt;/code&gt; and
+  setting, strings must be parsed as CSS &lt;color&gt; values and the
+  color assigned, and &lt;code&gt;CanvasGradient&lt;/code&gt; and
   &lt;code&gt;CanvasPattern&lt;/code&gt; objects must be assigned themselves. &lt;a
   href=&quot;#refsCSS3COLOR&quot;&gt;[CSS3COLOR]&lt;/a&gt; If the value is a string but
   is not a valid color, or is neither a string, a
@@ -13503,10 +13503,10 @@
   U+0029 RIGHT PARENTHESIS.&lt;/p&gt;
 
   &lt;p&gt;Otherwise, if it is not a color but a &lt;code&gt;CanvasGradient&lt;/code&gt;
-  or &lt;code&gt;CanvasPattern&lt;/code&gt;, then an object supporting those
-  interfaces must be returned. Such objects are opaque and therefore
-  only useful for assigning to other attributes or for comparison to
-  other gradients or patterns.&lt;/p&gt;
+  or &lt;code&gt;CanvasPattern&lt;/code&gt;, then the respective object must be
+  returned. (Such objects are opaque and therefore only useful for
+  assigning to other attributes or for comparison to other gradients
+  or patterns.)&lt;/p&gt;
 
   &lt;p&gt;When the context is created, the &lt;code
   title=&quot;dom-context-2d-strokeStyle&quot;&gt;strokeStyle&lt;/code&gt; and &lt;code
@@ -13517,12 +13517,16 @@
   gradients, both represented by objects implementing the opaque
   &lt;dfn&gt;&lt;code&gt;CanvasGradient&lt;/code&gt;&lt;/dfn&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;Once a gradient has been created (see below), stops must be
-  placed along it to define how the colors are distributed along the
-  gradient. Between each such stop, the colors and the alpha component
-  must be interpolated over the RGBA space to find the color to use at
-  that offset. Immediately before the 0 offset and immediately after
-  the 1 offset, transparent black stops are be assumed.&lt;/p&gt;
+  &lt;p&gt;Once a gradient has been created (see below), stops are placed
+  along it to define how the colors are distributed along the
+  gradient. The color of the gradient at each stop is the color
+  specified for that stop. Between each such stop, the colors and the
+  alpha component must be linearly interpolated over the RGBA space
+  without premultiplying the alpha value to find the color to use at
+  that offset. Before the first stop, the color must be the color of
+  the first stop. After the last stop, the color must be the color of
+  the last stop. When there are no stops, the gradient is transparent
+  black.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-canvasgradient-addColorStop&quot;&gt;&lt;code&gt;addColorStop(&lt;var
@@ -13532,11 +13536,18 @@
   greater than 1 then an &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception must be
   raised. If the &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; cannot be parsed as a CSS
   color, then a &lt;code&gt;SYNTAX_ERR&lt;/code&gt; exception must be raised.
-  Otherwise, the gradient must be updated with the new stop
-  information.&lt;/p&gt;
+  Otherwise, the gradient must have a new stop placed, at offset &lt;var
+  title=&quot;&quot;&gt;offset&lt;/var&gt; relative to the whole gradient, and with the
+  color obtained by parsing &lt;var title=&quot;&quot;&gt;color&lt;/var&gt; as a CSS
+  &lt;color&gt; value. If multiple stops are placed at the same place
+  on a gradient, they must be placed in the order added, with the
+  first one closest to the start of the gradient, and each subsequent
+  one infinitesimally further along towards the end point (in effect
+  causing all but the first and last stop added at each point to be
+  ignored).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;createLinearGradient&quot;&gt;&lt;code
-  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;createLinearGradient(&lt;var
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-createLinearGradient&quot;&gt;&lt;code&gt;createLinearGradient(&lt;var
   title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes four arguments,
   representing the start point (&lt;var title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var
@@ -13545,16 +13556,23 @@
   must return a linear &lt;code&gt;CanvasGradient&lt;/code&gt; initialised with
   that line.&lt;/p&gt;
 
-  &lt;p&gt;Linear gradients must be rendered such that at the starting point
-  on the canvas the color at offset 0 is used, that at the ending
-  point the color at offset 1 is used, that all points on a line
-  perpendicular to the line between the start and end points have the
-  color at the point where those two lines cross (interpolation
-  happening as described above), and that any points beyond the start
-  or end points are a transparent black.&lt;/p&gt;
+  &lt;p&gt;Linear gradients must be rendered such that at and before the
+  starting point on the canvas the color at offset 0 is used, that at
+  and after the ending point the color at offset 1 is used, and that
+  all points on a line perpendicular to the line that crosses the
+  start and end points have the color at the point where those two
+  lines cross (with the colors coming from the interpolation described
+  above).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;createRadialGradient&quot;&gt;&lt;code
-  title=&quot;dom-context-2d-createRadialGradient&quot;&gt;createRadialGradient(&lt;var
+  &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+  title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the linear gradient must
+  paint nothing.&lt;/p&gt; &lt;!-- XXX could make this paint the start colour,
+  or the end colour, or raise an exception --&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-context-2d-createRadialGradient&quot;&gt;&lt;code&gt;createRadialGradient(&lt;var
   title=&quot;&quot;&gt;x0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y0&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;r0&lt;/var&gt;,
   &lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;, &lt;var
   title=&quot;&quot;&gt;r1&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method takes six arguments, the
@@ -13564,26 +13582,82 @@
   with origin (&lt;var title=&quot;&quot;&gt;x1&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;y1&lt;/var&gt;) and
   radius &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt;. The values are in coordinate space
   units. The method must return a radial &lt;code&gt;CanvasGradient&lt;/code&gt;
-  initialised with those two circles.&lt;/p&gt;
+  initialised with those two circles. If either of &lt;var
+  title=&quot;&quot;&gt;r0&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;r1&lt;/var&gt; are negative, an
+  &lt;code&gt;INDEX_SIZE_ERR&lt;/code&gt; exception must be raised.&lt;/p&gt;
 
-  &lt;p&gt;Radial gradients must be rendered such that a cone is created
-  from the two circles, so that at the circumference of the starting
-  circle the color at offset 0 is used, that at the circumference
-  around the ending circle the color at offset 1 is used, that the
-  circumference of a circle drawn a certain fraction of the way along
-  the line between the two origins with a radius the same fraction of
-  the way between the two radii has the color at that offset
-  (interpolation happening as described above), that the end circle
-  appear to be above the start circle when the end circle is not
-  completely enclosed by the start circle, that the end circle be
-  filled by the color at offset 1, and that any points not described
-  by the gradient are a transparent black.&lt;/p&gt;
+  &lt;p&gt;Radial gradients must be rendered by following these steps:&lt;/p&gt;
 
-  &lt;p&gt;If a gradient has no stops defined, then the gradient must be
-  treated as a solid transparent black. Gradients are, naturally, only
-  painted where the stroking or filling effect requires that they be
-  drawn.&lt;/p&gt;
+  &lt;ol&gt;
 
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;span&gt;x(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span&gt;y(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let &lt;span&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;=&nbsp;(&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;-&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;)&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;+&nbsp;&lt;var
+    title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;&lt;/p&gt;
+
+    &lt;p&gt;Let the color at &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; be the color of
+    the gradient at offset 0.0 for all values of &lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt; less than 0.0, the color at offset 1.0 for
+    all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; greater than 1.0, and
+    the color at the given offset for values of &lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt; in the range &lt;span&gt;0.0&nbsp;&le;&nbsp;&lt;var
+    title=&quot;&quot;&gt;&omega;&lt;/var&gt;&nbsp;&le;&nbsp;1.0&lt;/span&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For all values of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; where
+   &lt;span&gt;r(&lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&nbsp;&gt;&nbsp;0&lt;/span&gt;,
+   starting with the value of &lt;var title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to
+   positive infinity and ending with the value of &lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt; nearest to negative infinity, draw the
+   circumference of the circle with radius of radius &lt;span&gt;r(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt; at position (&lt;span&gt;x(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;, &lt;span&gt;y(&lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;)&lt;/span&gt;), with the color at &lt;var
+   title=&quot;&quot;&gt;&omega;&lt;/var&gt;, but only painting on the parts of the
+   canvas that have not yet been painted on by earlier circles in this
+   step for this rendering of the gradient.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;If &lt;span&gt;&lt;var title=&quot;&quot;&gt;x&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;x&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+  title=&quot;&quot;&gt;y&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;y&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt; and &lt;span&gt;&lt;var
+  title=&quot;&quot;&gt;r&lt;sub&gt;0&lt;/sub&gt;&lt;/var&gt;&nbsp;=&nbsp;&lt;var
+  title=&quot;&quot;&gt;r&lt;sub&gt;1&lt;/sub&gt;&lt;/var&gt;&lt;/span&gt;, then the radial gradient must
+  paint nothing.&lt;/p&gt; &lt;!-- XXX could make this paint the start colour,
+  or the end colour, or a circle of one in the other, or raise an
+  exception --&gt;
+
+  &lt;p class=&quot;note&quot;&gt;This effectively creates a cone, touched by the two
+  circles defined in the creation of the gradient, with the part of
+  the cone before the start circle (0.0) using the color of the first
+  offset, the part of the cone after the end circle (1.0) using the
+  color of the last offset, and areas outside the cone untouched by
+  the gradient (transparent black). If the two circles overlap, the
+  effect is as if the second (end) circle is painted on top of the
+  first circle. The end circle is always filled with the color of the
+  last stop.&lt;/p&gt;
+
+  &lt;p&gt;Gradients must only be painted where the relevant stroking or
+  filling effects requires that they be drawn.&lt;/p&gt;
+
   &lt;p&gt;Support for actually painting gradients is optional. Instead of
   painting the gradients, user agents may instead just paint the first
   stop's color. However, &lt;code
@@ -13596,8 +13670,7 @@
   &lt;dfn&gt;&lt;code&gt;CanvasPattern&lt;/code&gt;&lt;/dfn&gt; interface.&lt;/p&gt;
 
   &lt;p&gt;To create objects of this type, the &lt;dfn
-  title=&quot;createPattern&quot;&gt;&lt;code
-  title=&quot;dom-context-2d-createPattern&quot;&gt;createPattern(image,
+  title=&quot;dom-context-2d-createPattern&quot;&gt;&lt;code&gt;createPattern(image,
   repetition)&lt;/code&gt;&lt;/dfn&gt; method is used. The first argument gives
   the image to use as the pattern (either an
   &lt;code&gt;HTMLImageElement&lt;/code&gt; or an &lt;code&gt;HTMLCanvasElement&lt;/code&gt;).
@@ -35562,18 +35635,19 @@
   Sivonen, Henrik Lied, Ignacio Javier, J. King, James Graham, James M
   Snell, James Perrett, Jan-Klaas Kollhof, Jasper Bryant-Greene, Jeff
   Cutsinger, Jens Bannmann, Joel Spolsky, John Harding, Johnny
-  Stenback, Jon Perlow, Jonathan Worent, Jorgen Horstink, Joshua
-  Randall, Jukka K. Korpela, Kai Hendry, &lt;!-- Keryx Web, = Lars
-  Gunther --&gt; Kornel Lesinski, &amp;#x9ed2;&amp;#x6fa4;&amp;#x525b;&amp;#x5fd7;
-  (KUROSAWA Takeshi), Lachlan Hunt, Larry Page, Lars Gunther, Laurens
-  Holst, Lenny Domnitser, L&eacute;onard Bouchet, Leons Petrazickis,
-  Logan&lt;!-- on moz irc --&gt;, Maciej Stachowiak, Malcolm Rowe, Mark
-  Nottingham, Mark Schenk, Martijn Wargers, Martin Atkins, Martin
-  Honnen, Mathieu Henri, Matthew Mastracci, Matthew Raymond, Matthew
-  Thomas, Mattias Waldau, Max Romantschuk, Michael 'Ratt' Iannarelli,
-  Michael A. Nachbaur, Michael Gratton, Michael Powers, Michel Fortin,
-  Mihai &amp;#x015E;ucan&lt;!-- from ROBO Design --&gt;, Mike Dierken&lt;!--
-  S. Mike Dierken --&gt;, Mike Dixon, Mike Schinkel, Mike Shaver, Mikko
+  Stenback, Jon Perlow, Jonathan Worent, Jorgen Horstink, Josh
+  Levenberg, Joshua Randall, Jukka K. Korpela, Kai Hendry, &lt;!-- Keryx
+  Web, = Lars Gunther --&gt; Kornel Lesinski,
+  &amp;#x9ed2;&amp;#x6fa4;&amp;#x525b;&amp;#x5fd7; (KUROSAWA Takeshi), Lachlan Hunt,
+  Larry Page, Lars Gunther, Laurens Holst, Lenny Domnitser,
+  L&eacute;onard Bouchet, Leons Petrazickis, Logan&lt;!-- on moz irc --&gt;,
+  Maciej Stachowiak, Malcolm Rowe, Mark Nottingham, Mark Schenk,
+  Martijn Wargers, Martin Atkins, Martin Honnen, Mathieu Henri,
+  Matthew Mastracci, Matthew Raymond, Matthew Thomas, Mattias Waldau,
+  Max Romantschuk, Michael 'Ratt' Iannarelli, Michael A. Nachbaur,
+  Michael Gratton, Michael Powers, Michel Fortin, Mihai
+  &amp;#x015E;ucan&lt;!-- from ROBO Design --&gt;, Mike Dierken&lt;!-- S. Mike
+  Dierken --&gt;, Mike Dixon, Mike Schinkel, Mike Shaver, Mikko
   Rantalainen, Neil Deakin, Olav Junker Kj&aelig;r, Philip Taylor,
   Rajas Moonka, Rimantas Liubertas, Robert O'Callahan, Robert Sayre,
   Roman Ivanov, S. Mike Dierken, Sam Ruby, Sean Knapp, Shadow2531,


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007731.html">[html5] r809 - /
</A></li>
	<LI>Next message: <A HREF="007733.html">[html5] r811 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7732">[ date ]</a>
              <a href="thread.html#7732">[ thread ]</a>
              <a href="subject.html#7732">[ subject ]</a>
              <a href="author.html#7732">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
