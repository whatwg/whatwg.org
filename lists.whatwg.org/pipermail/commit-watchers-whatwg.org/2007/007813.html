<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r893 - /
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r893%20-%20/&In-Reply-To=%3C20070614222918.53B4716DD7D%40looneymail-a2.g.dreamhost.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007812.html">
   <LINK REL="Next"  HREF="007814.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r893 - /</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r893%20-%20/&In-Reply-To=%3C20070614222918.53B4716DD7D%40looneymail-a2.g.dreamhost.com%3E"
       TITLE="[html5] r893 - /">whatwg at whatwg.org
       </A><BR>
    <I>Thu Jun 14 15:29:18 PDT 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="007812.html">[html5] r892 - /
</A></li>
        <LI>Next message: <A HREF="007814.html">[html5] r894 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7813">[ date ]</a>
              <a href="thread.html#7813">[ thread ]</a>
              <a href="subject.html#7813">[ subject ]</a>
              <a href="author.html#7813">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2007-06-14 15:29:17 -0700 (Thu, 14 Jun 2007)
New Revision: 893

Modified:
   index
   source
Log:
[] (0) Made &lt;script&gt; elements not run when set via innerHTML. Also, editorial fixes.

Modified: index
===================================================================
--- index	2007-06-14 22:17:34 UTC (rev 892)
+++ index	2007-06-14 22:29:17 UTC (rev 893)
@@ -3999,6 +3999,11 @@
      title=dom-innerHTML-HTML&gt;&lt;a href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
      attribute is being set, preserving their order.&lt;/p&gt;
   &lt;/ol&gt;
+
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+   using &lt;code title=dom-innerHTML-HTML&gt;&lt;a
+   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
+   inserted.&lt;/p&gt;
   &lt;!-- XXX must make sure we spec that innerHTML causes mutation
   events to fire, but document.write() doesn't. (the latter is already
   req-stated in the parser section, btw) --&gt;
@@ -4029,9 +4034,9 @@
 
 --&gt;
 
-  &lt;p&gt;The &lt;dfn id=innerhtml2
-   title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attributes, on the
-   other hand, in an XML context, are usable.
+  &lt;p&gt;On the other hand, however, the &lt;dfn id=innerhtml2
+   title=dom-innerHTML-XML&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is indeed
+   usable in an XML context.
 
   &lt;p&gt;On getting, the &lt;code title=dom-innerHTML-XML&gt;&lt;a
    href=&quot;#innerhtml2&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
@@ -4044,8 +4049,10 @@
    href=&quot;#refsXML&quot;&gt;[XML]&lt;/a&gt; &lt;a href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;
 
   &lt;p&gt;On setting, in an XML context, the &lt;code title=dom-innerHTML-HTML&gt;&lt;a
-   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on must run the
-   following algorithm:
+   href=&quot;#innerhtml0&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; DOM attribute on &lt;code&gt;&lt;a
+   href=&quot;#htmlelement&quot;&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;s and &lt;code&gt;&lt;a
+   href=&quot;#htmldocument&quot;&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;s must run the following
+   algorithm:
 
   &lt;ol&gt;
    &lt;li&gt;
@@ -4105,6 +4112,11 @@
      preserving their order.&lt;/p&gt;
   &lt;/ol&gt;
 
+  &lt;p class=note&gt;&lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; elements inserted
+   using &lt;code title=dom-innerHTML-XML&gt;&lt;a
+   href=&quot;#innerhtml2&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt; do not execute when they are
+   inserted.
+
   &lt;h3 id=apis-in&gt;&lt;span class=secno&gt;2.6. &lt;/span&gt;APIs in HTML documents&lt;/h3&gt;
   &lt;!-- XXX case-sensitivity training required here. --&gt;
 
@@ -18953,10 +18965,15 @@
    &lt;li&gt;
     &lt;p&gt;If &lt;a href=&quot;#scripting1&quot;&gt;scripting is disabled&lt;/a&gt;, or if the
      &lt;code&gt;Document&lt;/code&gt; has &lt;code title=dom-document-designMode&gt;&lt;a
-     href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled, or if the user agent
-     does not &lt;a href=&quot;#support&quot;&gt;support the scripting language&lt;/a&gt; given by
-     &lt;var&gt;&lt;a href=&quot;#the-scripts&quot;&gt;the script's type&lt;/a&gt;&lt;/var&gt; for this
-     &lt;code&gt;&lt;a href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element, or if the &lt;code&gt;&lt;a
+     href=&quot;#designMode&quot;&gt;designMode&lt;/a&gt;&lt;/code&gt; enabled, or if the &lt;code&gt;&lt;a
+     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element was created by a parser (an &lt;a
+     href=&quot;#html-0&quot;&gt;HTML parser&lt;/a&gt; or an &lt;span&gt;XML parser&lt;/span&gt;) that
+     itself was created as part of the processing of the &lt;code
+     title=dom-innerHTML&gt;&lt;a href=&quot;#innerhtml&quot;&gt;innerHTML&lt;/a&gt;&lt;/code&gt;
+     attribute's setter, or if the user agent does not &lt;a
+     href=&quot;#support&quot;&gt;support the scripting language&lt;/a&gt; given by &lt;var&gt;&lt;a
+     href=&quot;#the-scripts&quot;&gt;the script's type&lt;/a&gt;&lt;/var&gt; for this &lt;code&gt;&lt;a
+     href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element, or if the &lt;code&gt;&lt;a
      href=&quot;#script0&quot;&gt;script&lt;/a&gt;&lt;/code&gt; element has its &lt;a
      href=&quot;#already&quot;&gt;&quot;already executed&quot;&lt;/a&gt; flag set, then the user agent
      must abort these steps at this point. The script is not executed.&lt;/p&gt;

Modified: source
===================================================================
--- source	2007-06-14 22:17:34 UTC (rev 892)
+++ source	2007-06-14 22:29:17 UTC (rev 893)
@@ -2640,6 +2640,10 @@
 
   &lt;/ol&gt;
 
+  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
+  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
+  are inserted.&lt;/p&gt;
+
   &lt;!-- XXX must make sure we spec that innerHTML causes mutation
   events to fire, but document.write() doesn't. (the latter is already
   req-stated in the parser section, btw) --&gt;
@@ -2671,8 +2675,9 @@
 
 --&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt;
-  attributes, on the other hand, in an XML context, are usable.&lt;/p&gt;
+  &lt;p&gt;On the other hand, however, the &lt;dfn
+  title=&quot;dom-innerHTML-XML&quot;&gt;&lt;code&gt;innerHTML&lt;/code&gt;&lt;/dfn&gt; attribute is
+  indeed usable in an XML context.&lt;/p&gt;
 
   &lt;p&gt;On getting, the &lt;code title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt;
   DOM attribute on &lt;code&gt;HTMLElement&lt;/code&gt;s and
@@ -2685,8 +2690,9 @@
   href=&quot;#refsXMLNS&quot;&gt;[XMLNS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;On setting, in an XML context, the &lt;code
-  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on must
-  run the following algorithm:&lt;/p&gt;
+  title=&quot;dom-innerHTML-HTML&quot;&gt;innerHTML&lt;/code&gt; DOM attribute on
+  &lt;code&gt;HTMLElement&lt;/code&gt;s and &lt;code&gt;HTMLDocument&lt;/code&gt;s must run
+  the following algorithm:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -2781,6 +2787,9 @@
 
   &lt;/ol&gt;
 
+  &lt;p class=&quot;note&quot;&gt;&lt;code&gt;script&lt;/code&gt; elements inserted using &lt;code
+  title=&quot;dom-innerHTML-XML&quot;&gt;innerHTML&lt;/code&gt; do not execute when they
+  are inserted.&lt;/p&gt;
 
 
 
@@ -16759,11 +16768,15 @@
     &lt;p&gt;If &lt;span&gt;scripting is disabled&lt;/span&gt;, or if the
     &lt;code&gt;Document&lt;/code&gt; has &lt;code
     title=&quot;dom-document-designMode&quot;&gt;designMode&lt;/code&gt; enabled, or if
+    the &lt;code&gt;script&lt;/code&gt; element was created by a parser (an
+    &lt;span&gt;HTML parser&lt;/span&gt; or an &lt;span&gt;XML parser&lt;/span&gt;) that
+    itself was created as part of the processing of the &lt;code
+    title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/code&gt; attribute's setter, or if
     the user agent does not &lt;span&gt;support the scripting
-    language&lt;/span&gt; given by &lt;var&gt;the script's type&lt;/var&gt; for
-    this &lt;code&gt;script&lt;/code&gt; element, or if the &lt;code&gt;script&lt;/code&gt;
-    element has its &lt;span&gt;&quot;already executed&quot;&lt;/span&gt; flag set, then the
-    user agent must abort these steps at this point. The script is not
+    language&lt;/span&gt; given by &lt;var&gt;the script's type&lt;/var&gt; for this
+    &lt;code&gt;script&lt;/code&gt; element, or if the &lt;code&gt;script&lt;/code&gt; element
+    has its &lt;span&gt;&quot;already executed&quot;&lt;/span&gt; flag set, then the user
+    agent must abort these steps at this point. The script is not
     executed.&lt;/p&gt;
 
    &lt;/li&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007812.html">[html5] r892 - /
</A></li>
	<LI>Next message: <A HREF="007814.html">[html5] r894 - /
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7813">[ date ]</a>
              <a href="thread.html#7813">[ thread ]</a>
              <a href="subject.html#7813">[ subject ]</a>
              <a href="author.html#7813">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
