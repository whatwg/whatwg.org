<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8124 - [e] (0) Rejigger how scripts are described. Work in	progress. Fixing https://www [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8124%20-%20%5Be%5D%20%280%29%20Rejigger%20how%20scripts%20are%20described.%20Work%20in%0A%09progress.%20Fixing%20https%3A//www%20%5B...%5D&In-Reply-To=%3C20130802214804.B4F0C1536C6E9%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014979.html">
   <LINK REL="Next"  HREF="014981.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8124 - [e] (0) Rejigger how scripts are described. Work in	progress. Fixing https://www [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8124%20-%20%5Be%5D%20%280%29%20Rejigger%20how%20scripts%20are%20described.%20Work%20in%0A%09progress.%20Fixing%20https%3A//www%20%5B...%5D&In-Reply-To=%3C20130802214804.B4F0C1536C6E9%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8124 - [e] (0) Rejigger how scripts are described. Work in	progress. Fixing https://www [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Aug  2 14:48:04 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014979.html">[html5] r8123 - [giow] (3) Revert the regression in the definition	of 'entry script' from r8114 [...]
</A></li>
        <LI>Next message: <A HREF="014981.html">[html5] r8125 - [e] (0) Cleanup Affected topics: DOM APIs, HTML,	HTML Syntax and Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14980">[ date ]</a>
              <a href="thread.html#14980">[ thread ]</a>
              <a href="subject.html#14980">[ subject ]</a>
              <a href="author.html#14980">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-08-02 14:48:03 -0700 (Fri, 02 Aug 2013)
New Revision: 8124

Modified:
   complete.html
   index
   source
Log:
[e] (0) Rejigger how scripts are described. Work in progress.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22863">https://www.w3.org/Bugs/Public/show_bug.cgi?id=22863</A>
Affected topics: HTML, Workers

Modified: complete.html
===================================================================
--- complete.html	2013-08-02 20:34:31 UTC (rev 8123)
+++ complete.html	2013-08-02 21:48:03 UTC (rev 8124)
@@ -71259,38 +71259,61 @@
 
   &lt;hr&gt;&lt;p&gt;A &lt;dfn id=concept-script title=concept-script&gt;script&lt;/dfn&gt; has:&lt;/p&gt;
 
-  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=code-entry-point&gt;code entry-point&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
-    defined by this specification.&lt;/p&gt;
+    &lt;p&gt;A code entry-point represents a block of executable code that the script exposes to other
+    scripts and to the user agent. Typically, the code corresponding to the code entry-point is
+    executed immediately after the script is parsed, but for event handlers, it is called each time
+    the handler is invoked.&lt;/p&gt;
 
-    &lt;p class=example&gt;In JavaScript, the script execution environment consists of the interpreter,
-    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
-    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+    &lt;p class=example&gt;In JavaScript &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; blocks, this corresponds to the execution
+    context of the global code.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=list-of-code-entry-points&gt;list of code entry-points&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Optionally, a &lt;dfn id=muted-errors&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Each code entry-point represents a block of executable code that the script exposes to other
-    scripts and to the user agent.&lt;/p&gt;
+    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
+    script (used to mute errors for cross-origin scripts, since that can leak private
+    information).&lt;/p&gt;
 
-    &lt;p class=example&gt;Each &lt;code&gt;Function&lt;/code&gt; object in a JavaScript &lt;a href=#script-execution-environment&gt;script execution
-    environment&lt;/a&gt; has a corresponding code entry-point, for instance.&lt;/p&gt;
+   &lt;/dd&gt;
+&lt;!--
+   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
-    &lt;p&gt;The main program code of the script, if any, is the &lt;dfn id=initial-code-entry-point&gt;&lt;i&gt;initial code
-    entry-point&lt;/i&gt;&lt;/dfn&gt;. Typically, the code corresponding to this entry-point is executed
-    immediately after the script is parsed.&lt;/p&gt;
+   &lt;dd&gt;
 
-    &lt;p class=example&gt;In JavaScript, this corresponds to the execution context of the global
-    code.&lt;/p&gt;
+    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
+    scripts.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+  &lt;/dl&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
+  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+
+  &lt;dl&gt;
+--&gt;
+   &lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
+    defined by this specification.&lt;/p&gt;
+
+    &lt;p class=example&gt;In JavaScript, the script execution environment consists of the interpreter,
+    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
+    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-global-object&quot;&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -71371,16 +71394,6 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Optionally, a &lt;dfn id=muted-errors&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
-    script (used to mute errors for cross-origin scripts, since that can leak private
-    information).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;/div&gt;
 
 
@@ -71409,8 +71422,7 @@
    script&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Make the &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environment&lt;/a&gt;
-   for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; execute the code for the given code
-   entry-point.&lt;/li&gt;
+   for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; being invoked from the &lt;a href=#stack-of-incumbent-scripts&gt;stack of
    incumbent scripts&lt;/a&gt;.&lt;/li&gt;
@@ -71473,21 +71485,20 @@
   character encoding, a base URL, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag, the user
   agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that
+   this algorithm will subsequently initialize.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
    disabled&lt;/a&gt; for &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; passed to this
-   algorithm, then abort these steps, as if the script did nothing but
+   algorithm, then abort these steps, as if the script source described a program that did nothing but
    return void.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; as
-   appropriate for the scripting language.&lt;/li&gt;
+   appropriate for the given scripting language.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the
    &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;, as appropriate for the
-   scripting language, and thus obtain the &lt;a href=#list-of-code-entry-points&gt;list of code
-   entry-points&lt;/a&gt; for the script. If the semantics of the
-   scripting language and the given source code are such that there is
-   executable code to be immediately run, then the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
-   entry-point&lt;/a&gt;&lt;/i&gt; is the entry-point for that code.&lt;/li&gt;
+   scripting language, and thus obtain &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the
    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's
@@ -71496,18 +71507,18 @@
    &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from the settings passed to this
    algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set the script's &lt;a href=#muted-errors&gt;muted
-   errors&lt;/a&gt; flag also.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#muted-errors&gt;muted
+   errors&lt;/a&gt; flag.&lt;/li&gt;
 
    &lt;li&gt;
  
     &lt;p&gt;If all the steps above succeeded (in particular, if the script
     was compiled successfully), &lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code
-    entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
-    entry-point&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+    entry-point&quot;&gt;Jump&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code
+    entry-point&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;,
-    with the problematic position (line number and column number), using &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the target. If the
+    &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;,
+    with the problematic position (line number and column number), using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the target. If the
     error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this, then the error
     may be reported to the user.&lt;/p&gt;
 
@@ -72070,7 +72081,7 @@
       script source, the &lt;a href=#url&gt;URL&lt;/a&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
       was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
       of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
 
       &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
@@ -72091,7 +72102,7 @@
       scripting language set to JavaScript, and with the &lt;code&gt;Document&lt;/code&gt;'s object's
       &lt;span&gt;browsing context&lt;/span&gt; as the browsing context.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;initial code entry-point&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
       of this &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
       title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
       title=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
@@ -72309,8 +72320,7 @@
 
      &lt;dd&gt;The value of &lt;var title=&quot;&quot;&gt;strict&lt;/var&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p&gt;Let this new function be the only entry in the script's &lt;a href=#list-of-code-entry-points&gt;list of code
-    entry-points&lt;/a&gt;.&lt;/p&gt;
+    &lt;/dl&gt;&lt;p&gt;Let this new function be the script's &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -72421,7 +72431,7 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
+      &lt;p&gt;&lt;a href=#concept-invoke-event-handler title=concept-invoke-event-handler&gt;Invoke&lt;/a&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
       the first one having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-message&gt;&lt;a href=#dom-errorevent-message&gt;message&lt;/a&gt;&lt;/code&gt; attribute,
       the second having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-filename&gt;&lt;a href=#dom-errorevent-filename&gt;filename&lt;/a&gt;&lt;/code&gt; attribute,
       the third having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-lineno&gt;&lt;a href=#dom-errorevent-lineno&gt;lineno&lt;/a&gt;&lt;/code&gt; attribute,
@@ -72436,13 +72446,16 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
+      &lt;p&gt;&lt;a href=#concept-invoke-event-handler title=concept-invoke-event-handler&gt;Invoke&lt;/a&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
       &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;, with the &lt;i title=dfn-callback-this-value&gt;callback this value&lt;/i&gt; set to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-Event-currentTarget&gt;currentTarget&lt;/code&gt;. Let &lt;var title=&quot;&quot;&gt;return value&lt;/var&gt; be the callback's return value. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
 
      &lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;/li&gt;
+    &lt;/dl&gt;&lt;p&gt;In this step, &lt;dfn id=concept-invoke-event-handler title=concept-invoke-event-handler&gt;invoke&lt;/dfn&gt; means to run the
+    &lt;a href=#jump-to-a-code-entry-point&gt;jump to a code entry-point&lt;/a&gt; alorithm.&lt;/p&gt;
 
+   &lt;/li&gt;
+
    &lt;li&gt;
 
     &lt;p&gt;Process &lt;var title=&quot;&quot;&gt;return value&lt;/var&gt; as follows:&lt;/p&gt;
@@ -80386,7 +80399,7 @@
    environment&lt;/a&gt;. (In either case, by definition, it is a &lt;a href=#worker-environment&gt;worker
    environment&lt;/a&gt;.)&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
     &lt;p&gt;A new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is now created, as follows.&lt;/p&gt;
 
@@ -80395,8 +80408,7 @@
 
     &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;a href=#script-execution-environment&gt;script execution
     environment&lt;/a&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
-    &lt;a href=#list-of-code-entry-points&gt;list of code entry-points&lt;/a&gt;; set the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt; to the
-    entry-point for any executable code to be immediately run.&lt;/p&gt;
+    &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Set the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
 
@@ -80437,7 +80449,7 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt;, and let that run until
+    &lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;, and let that run until
     it either returns, fails to catch an exception, or gets prematurely aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a
     worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms defined below.&lt;/p&gt;
 

Modified: index
===================================================================
--- index	2013-08-02 20:34:31 UTC (rev 8123)
+++ index	2013-08-02 21:48:03 UTC (rev 8124)
@@ -71259,38 +71259,61 @@
 
   &lt;hr&gt;&lt;p&gt;A &lt;dfn id=concept-script title=concept-script&gt;script&lt;/dfn&gt; has:&lt;/p&gt;
 
-  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=code-entry-point&gt;code entry-point&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
-    defined by this specification.&lt;/p&gt;
+    &lt;p&gt;A code entry-point represents a block of executable code that the script exposes to other
+    scripts and to the user agent. Typically, the code corresponding to the code entry-point is
+    executed immediately after the script is parsed, but for event handlers, it is called each time
+    the handler is invoked.&lt;/p&gt;
 
-    &lt;p class=example&gt;In JavaScript, the script execution environment consists of the interpreter,
-    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
-    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+    &lt;p class=example&gt;In JavaScript &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; blocks, this corresponds to the execution
+    context of the global code.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=list-of-code-entry-points&gt;list of code entry-points&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Optionally, a &lt;dfn id=muted-errors&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Each code entry-point represents a block of executable code that the script exposes to other
-    scripts and to the user agent.&lt;/p&gt;
+    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
+    script (used to mute errors for cross-origin scripts, since that can leak private
+    information).&lt;/p&gt;
 
-    &lt;p class=example&gt;Each &lt;code&gt;Function&lt;/code&gt; object in a JavaScript &lt;a href=#script-execution-environment&gt;script execution
-    environment&lt;/a&gt; has a corresponding code entry-point, for instance.&lt;/p&gt;
+   &lt;/dd&gt;
+&lt;!--
+   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
-    &lt;p&gt;The main program code of the script, if any, is the &lt;dfn id=initial-code-entry-point&gt;&lt;i&gt;initial code
-    entry-point&lt;/i&gt;&lt;/dfn&gt;. Typically, the code corresponding to this entry-point is executed
-    immediately after the script is parsed.&lt;/p&gt;
+   &lt;dd&gt;
 
-    &lt;p class=example&gt;In JavaScript, this corresponds to the execution context of the global
-    code.&lt;/p&gt;
+    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
+    scripts.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+  &lt;/dl&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
+  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+
+  &lt;dl&gt;
+--&gt;
+   &lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
+    defined by this specification.&lt;/p&gt;
+
+    &lt;p class=example&gt;In JavaScript, the script execution environment consists of the interpreter,
+    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
+    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-global-object&quot;&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -71371,16 +71394,6 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Optionally, a &lt;dfn id=muted-errors&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
-    script (used to mute errors for cross-origin scripts, since that can leak private
-    information).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;/div&gt;
 
 
@@ -71409,8 +71422,7 @@
    script&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Make the &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environment&lt;/a&gt;
-   for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; execute the code for the given code
-   entry-point.&lt;/li&gt;
+   for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; being invoked from the &lt;a href=#stack-of-incumbent-scripts&gt;stack of
    incumbent scripts&lt;/a&gt;.&lt;/li&gt;
@@ -71473,21 +71485,20 @@
   character encoding, a base URL, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag, the user
   agent must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that
+   this algorithm will subsequently initialize.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
    disabled&lt;/a&gt; for &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; passed to this
-   algorithm, then abort these steps, as if the script did nothing but
+   algorithm, then abort these steps, as if the script source described a program that did nothing but
    return void.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; as
-   appropriate for the scripting language.&lt;/li&gt;
+   appropriate for the given scripting language.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the
    &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;, as appropriate for the
-   scripting language, and thus obtain the &lt;a href=#list-of-code-entry-points&gt;list of code
-   entry-points&lt;/a&gt; for the script. If the semantics of the
-   scripting language and the given source code are such that there is
-   executable code to be immediately run, then the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
-   entry-point&lt;/a&gt;&lt;/i&gt; is the entry-point for that code.&lt;/li&gt;
+   scripting language, and thus obtain &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the
    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's
@@ -71496,18 +71507,18 @@
    &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from the settings passed to this
    algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set the script's &lt;a href=#muted-errors&gt;muted
-   errors&lt;/a&gt; flag also.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#muted-errors&gt;muted
+   errors&lt;/a&gt; flag.&lt;/li&gt;
 
    &lt;li&gt;
  
     &lt;p&gt;If all the steps above succeeded (in particular, if the script
     was compiled successfully), &lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code
-    entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
-    entry-point&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+    entry-point&quot;&gt;Jump&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code
+    entry-point&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;,
-    with the problematic position (line number and column number), using &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the target. If the
+    &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;,
+    with the problematic position (line number and column number), using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the target. If the
     error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this, then the error
     may be reported to the user.&lt;/p&gt;
 
@@ -72070,7 +72081,7 @@
       script source, the &lt;a href=#url&gt;URL&lt;/a&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
       was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
       of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
 
       &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
@@ -72091,7 +72102,7 @@
       scripting language set to JavaScript, and with the &lt;code&gt;Document&lt;/code&gt;'s object's
       &lt;span&gt;browsing context&lt;/span&gt; as the browsing context.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;initial code entry-point&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
       of this &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
       title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
       title=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
@@ -72309,8 +72320,7 @@
 
      &lt;dd&gt;The value of &lt;var title=&quot;&quot;&gt;strict&lt;/var&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p&gt;Let this new function be the only entry in the script's &lt;a href=#list-of-code-entry-points&gt;list of code
-    entry-points&lt;/a&gt;.&lt;/p&gt;
+    &lt;/dl&gt;&lt;p&gt;Let this new function be the script's &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -72421,7 +72431,7 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
+      &lt;p&gt;&lt;a href=#concept-invoke-event-handler title=concept-invoke-event-handler&gt;Invoke&lt;/a&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
       the first one having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-message&gt;&lt;a href=#dom-errorevent-message&gt;message&lt;/a&gt;&lt;/code&gt; attribute,
       the second having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-filename&gt;&lt;a href=#dom-errorevent-filename&gt;filename&lt;/a&gt;&lt;/code&gt; attribute,
       the third having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-ErrorEvent-lineno&gt;&lt;a href=#dom-errorevent-lineno&gt;lineno&lt;/a&gt;&lt;/code&gt; attribute,
@@ -72436,13 +72446,16 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
+      &lt;p&gt;&lt;a href=#concept-invoke-event-handler title=concept-invoke-event-handler&gt;Invoke&lt;/a&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
       &lt;code&gt;&lt;a href=#event&gt;Event&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;, with the &lt;i title=dfn-callback-this-value&gt;callback this value&lt;/i&gt; set to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=dom-Event-currentTarget&gt;currentTarget&lt;/code&gt;. Let &lt;var title=&quot;&quot;&gt;return value&lt;/var&gt; be the callback's return value. &lt;a href=#refsWEBIDL&gt;[WEBIDL]&lt;/a&gt;&lt;/p&gt;
 
      &lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;/li&gt;
+    &lt;/dl&gt;&lt;p&gt;In this step, &lt;dfn id=concept-invoke-event-handler title=concept-invoke-event-handler&gt;invoke&lt;/dfn&gt; means to run the
+    &lt;a href=#jump-to-a-code-entry-point&gt;jump to a code entry-point&lt;/a&gt; alorithm.&lt;/p&gt;
 
+   &lt;/li&gt;
+
    &lt;li&gt;
 
     &lt;p&gt;Process &lt;var title=&quot;&quot;&gt;return value&lt;/var&gt; as follows:&lt;/p&gt;
@@ -80386,7 +80399,7 @@
    environment&lt;/a&gt;. (In either case, by definition, it is a &lt;a href=#worker-environment&gt;worker
    environment&lt;/a&gt;.)&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
     &lt;p&gt;A new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is now created, as follows.&lt;/p&gt;
 
@@ -80395,8 +80408,7 @@
 
     &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;a href=#script-execution-environment&gt;script execution
     environment&lt;/a&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
-    &lt;a href=#list-of-code-entry-points&gt;list of code entry-points&lt;/a&gt;; set the &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt; to the
-    entry-point for any executable code to be immediately run.&lt;/p&gt;
+    &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;Set the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
 
@@ -80437,7 +80449,7 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt;, and let that run until
+    &lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;, and let that run until
     it either returns, fails to catch an exception, or gets prematurely aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a
     worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms defined below.&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2013-08-02 20:34:31 UTC (rev 8123)
+++ source	2013-08-02 21:48:03 UTC (rev 8124)
@@ -79671,38 +79671,61 @@
 
   &lt;dl&gt;
 
-   &lt;dt&gt;A &lt;dfn&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn&gt;code entry-point&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
-    defined by this specification.&lt;/p&gt;
+    &lt;p&gt;A code entry-point represents a block of executable code that the script exposes to other
+    scripts and to the user agent. Typically, the code corresponding to the code entry-point is
+    executed immediately after the script is parsed, but for event handlers, it is called each time
+    the handler is invoked.&lt;/p&gt;
 
-    &lt;p class=&quot;example&quot;&gt;In JavaScript, the script execution environment consists of the interpreter,
-    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
-    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+    &lt;p class=&quot;example&quot;&gt;In JavaScript &lt;code&gt;script&lt;/code&gt; blocks, this corresponds to the execution
+    context of the global code.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn&gt;list of code entry-points&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;Optionally, a &lt;dfn&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Each code entry-point represents a block of executable code that the script exposes to other
-    scripts and to the user agent.&lt;/p&gt;
+    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
+    script (used to mute errors for cross-origin scripts, since that can leak private
+    information).&lt;/p&gt;
 
-    &lt;p class=&quot;example&quot;&gt;Each &lt;code&gt;Function&lt;/code&gt; object in a JavaScript &lt;span&gt;script execution
-    environment&lt;/span&gt; has a corresponding code entry-point, for instance.&lt;/p&gt;
+   &lt;/dd&gt;
+&lt;!--
+   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
-    &lt;p&gt;The main program code of the script, if any, is the &lt;dfn&gt;&lt;i&gt;initial code
-    entry-point&lt;/i&gt;&lt;/dfn&gt;. Typically, the code corresponding to this entry-point is executed
-    immediately after the script is parsed.&lt;/p&gt;
+   &lt;dd&gt;
 
-    &lt;p class=&quot;example&quot;&gt;In JavaScript, this corresponds to the execution context of the global
-    code.&lt;/p&gt;
+    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
+    scripts.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+  &lt;/dl&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
+  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+
+  &lt;dl&gt;
+--&gt;
+   &lt;dt&gt;A &lt;dfn&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
+    defined by this specification.&lt;/p&gt;
+
+    &lt;p class=&quot;example&quot;&gt;In JavaScript, the script execution environment consists of the interpreter,
+    the stack of &lt;i&gt;execution contexts&lt;/i&gt;, the &lt;i&gt;global code&lt;/i&gt; and &lt;i&gt;function code&lt;/i&gt; and the
+    &lt;code&gt;Function&lt;/code&gt; objects resulting, and so forth.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
    &lt;dt&gt;A relationship with the &lt;dfn&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -79790,16 +79813,6 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Optionally, a &lt;dfn&gt;muted errors&lt;/dfn&gt; flag&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A flag which, if set, means that error information will not be provided for errors in this
-    script (used to mute errors for cross-origin scripts, since that can leak private
-    information).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
   &lt;/div&gt;
@@ -79833,8 +79846,8 @@
    script&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Make the &lt;span title=&quot;script execution environment&quot;&gt;script execution environment&lt;/span&gt;
-   for the &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; execute the code for the given code
-   entry-point.&lt;/p&gt;&lt;/li&gt;
+   for the &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; execute the &lt;span
+   title=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Pop the &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; being invoked from the &lt;span&gt;stack of
    incumbent scripts&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -79906,22 +79919,22 @@
   agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
+&lt;!--CLEANUP--&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; that
+   this algorithm will subsequently initialize.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;span title=&quot;concept-bc-noscript&quot;&gt;scripting is
    disabled&lt;/span&gt; for &lt;span&gt;browsing context&lt;/span&gt; passed to this
-   algorithm, then abort these steps, as if the script did nothing but
+   algorithm, then abort these steps, as if the script source described a program that did nothing but
    return void.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Set up a &lt;span&gt;script execution environment&lt;/span&gt; as
-   appropriate for the scripting language.&lt;/p&gt;&lt;/li&gt;
+   appropriate for the given scripting language.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the
    &lt;span&gt;script execution environment&lt;/span&gt;, as appropriate for the
-   scripting language, and thus obtain the &lt;span&gt;list of code
-   entry-points&lt;/span&gt; for the script. If the semantics of the
-   scripting language and the given source code are such that there is
-   executable code to be immediately run, then the &lt;i&gt;initial code
-   entry-point&lt;/i&gt; is the entry-point for that code.&lt;/p&gt;&lt;/li&gt;
+   scripting language, and thus obtain &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set up the &lt;span&gt;script's global object&lt;/span&gt;, the
    &lt;span&gt;script's browsing context&lt;/span&gt;, the &lt;span&gt;script's
@@ -79930,19 +79943,19 @@
    &lt;span&gt;script's base URL&lt;/span&gt; from the settings passed to this
    algorithm.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set the script's &lt;span&gt;muted
-   errors&lt;/span&gt; flag also.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;muted
+   errors&lt;/span&gt; flag.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
  
     &lt;p&gt;If all the steps above succeeded (in particular, if the script
     was compiled successfully), &lt;span title=&quot;jump to a code
-    entry-point&quot;&gt;Jump&lt;/span&gt; to the &lt;span
-    title=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;i&gt;initial code
-    entry-point&lt;/i&gt;.&lt;/p&gt;
+    entry-point&quot;&gt;Jump&lt;/span&gt; to &lt;var
+    title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;code
+    entry-point&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;span&gt;report the error&lt;/span&gt; for the &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;,
-    with the problematic position (line number and column number), using &lt;span&gt;script's global object&lt;/span&gt; as the target. If the
+    &lt;p&gt;Otherwise, &lt;span&gt;report the error&lt;/span&gt; for &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;,
+    with the problematic position (line number and column number), using the &lt;span&gt;script's global object&lt;/span&gt; as the target. If the
     error is still &lt;i title=&quot;concept-error-nothandled&quot;&gt;not handled&lt;/i&gt; after this, then the error
     may be reported to the user.&lt;/p&gt;
 
@@ -80623,7 +80636,7 @@
       script source, the &lt;span&gt;URL&lt;/span&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
       was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;initial code entry-point&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
       of this &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
       title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
       title=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
@@ -80647,7 +80660,7 @@
       scripting language set to JavaScript, and with the &lt;code&gt;Document&lt;/code&gt;'s object's
       &lt;span&gt;browsing context&lt;/span&gt; as the browsing context.&lt;/p&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;i&gt;initial code entry-point&lt;/i&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
       of this &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
       title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
       title=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
@@ -80896,8 +80909,7 @@
 
     &lt;/dl&gt;
 
-    &lt;p&gt;Let this new function be the only entry in the script's &lt;span&gt;list of code
-    entry-points&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Let this new function be the script's &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -81018,7 +81030,7 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
+      &lt;p&gt;&lt;span title=&quot;concept-invoke-event-handler&quot;&gt;Invoke&lt;/span&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with five arguments,
       the first one having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=&quot;dom-ErrorEvent-message&quot;&gt;message&lt;/code&gt; attribute,
       the second having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=&quot;dom-ErrorEvent-filename&quot;&gt;filename&lt;/code&gt; attribute,
       the third having the value of &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code title=&quot;dom-ErrorEvent-lineno&quot;&gt;lineno&lt;/code&gt; attribute,
@@ -81034,7 +81046,7 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Invoke &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
+      &lt;p&gt;&lt;span title=&quot;concept-invoke-event-handler&quot;&gt;Invoke&lt;/span&gt; &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt; with one argument, the value of which is the
       &lt;code&gt;Event&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;, with the &lt;i
       title=&quot;dfn-callback-this-value&quot;&gt;callback this value&lt;/i&gt; set to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;'s &lt;code
       title=&quot;dom-Event-currentTarget&quot;&gt;currentTarget&lt;/code&gt;. Let &lt;var
@@ -81044,6 +81056,9 @@
 
     &lt;/dl&gt;
 
+    &lt;p&gt;In this step, &lt;dfn title=&quot;concept-invoke-event-handler&quot;&gt;invoke&lt;/dfn&gt; means to run the
+    &lt;span&gt;jump to a code entry-point&lt;/span&gt; alorithm.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -89485,7 +89500,7 @@
    environment&lt;/span&gt;. (In either case, by definition, it is a &lt;span&gt;worker
    environment&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
     &lt;p&gt;A new &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; is now created, as follows.&lt;/p&gt;
 
@@ -89494,8 +89509,7 @@
 
     &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;span&gt;script execution
     environment&lt;/span&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
-    &lt;span&gt;list of code entry-points&lt;/span&gt;; set the &lt;i&gt;initial code entry-point&lt;/i&gt; to the
-    entry-point for any executable code to be immediately run.&lt;/p&gt;
+    &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p&gt;Set the &lt;span&gt;script's global object&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
 
@@ -89540,7 +89554,7 @@
    &lt;li&gt;
 
     &lt;p&gt;&lt;span title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/span&gt; to the &lt;span
-    title=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;i&gt;initial code entry-point&lt;/i&gt;, and let that run until
+    title=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;code entry-point&lt;/span&gt;, and let that run until
     it either returns, fails to catch an exception, or gets prematurely aborted by the &quot;&lt;span&gt;kill a
     worker&lt;/span&gt;&quot; or &quot;&lt;span&gt;terminate a worker&lt;/span&gt;&quot; algorithms defined below.&lt;/p&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014979.html">[html5] r8123 - [giow] (3) Revert the regression in the definition	of 'entry script' from r8114 [...]
</A></li>
	<LI>Next message: <A HREF="014981.html">[html5] r8125 - [e] (0) Cleanup Affected topics: DOM APIs, HTML,	HTML Syntax and Parsing
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14980">[ date ]</a>
              <a href="thread.html#14980">[ thread ]</a>
              <a href="subject.html#14980">[ subject ]</a>
              <a href="author.html#14980">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
