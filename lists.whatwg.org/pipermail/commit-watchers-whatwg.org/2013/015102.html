<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8247 - [giow] (3) The bulk of this is editorial:	refactoring how scripts are defined so [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8247%20-%20%5Bgiow%5D%20%283%29%20The%20bulk%20of%20this%20is%20editorial%3A%0A%09refactoring%20how%20scripts%20are%20defined%20so%20%5B...%5D&In-Reply-To=%3C20131030231805.C18E51536CE49%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015101.html">
   <LINK REL="Next"  HREF="015103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8247 - [giow] (3) The bulk of this is editorial:	refactoring how scripts are defined so [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8247%20-%20%5Bgiow%5D%20%283%29%20The%20bulk%20of%20this%20is%20editorial%3A%0A%09refactoring%20how%20scripts%20are%20defined%20so%20%5B...%5D&In-Reply-To=%3C20131030231805.C18E51536CE49%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8247 - [giow] (3) The bulk of this is editorial:	refactoring how scripts are defined so [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Oct 30 16:18:05 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="015101.html">[html5] r8246 - [e] (0) typo in reference in NavigatorContentUtils	section Fixing https://www.w3 [...]
</A></li>
        <LI>Next message: <A HREF="015103.html">[html5] r8248 - [a] (0) Update conformance criteria to match what's	conforming. Fixing https://w [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15102">[ date ]</a>
              <a href="thread.html#15102">[ thread ]</a>
              <a href="subject.html#15102">[ subject ]</a>
              <a href="author.html#15102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-10-30 16:18:04 -0700 (Wed, 30 Oct 2013)
New Revision: 8247

Modified:
   complete.html
   index
   source
Log:
[giow] (3) The bulk of this is editorial: refactoring how scripts are defined so that all the common stuff is in a shared 'settings object' rather than being duplicated per script. But this also cleans up how postMessage() interacts with the event loop and a few other things I've since forgotten.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=22863">https://www.w3.org/Bugs/Public/show_bug.cgi?id=22863</A>
Affected topics: DOM APIs, HTML, HTML Syntax and Parsing, Rendering, Security, Workers

Modified: complete.html
===================================================================
--- complete.html	2013-10-28 21:49:17 UTC (rev 8246)
+++ complete.html	2013-10-30 23:18:04 UTC (rev 8247)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 October 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 30 October 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -1010,13 +1010,14 @@
      &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#script-settings-for-browsing-contexts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Script settings for browsing contexts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.6 &lt;/span&gt;Runtime script errors&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.5.1 &lt;/span&gt;Runtime script errors in documents&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.5.2 &lt;/span&gt;The &lt;code&gt;ErrorEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.6.1 &lt;/span&gt;Runtime script errors in documents&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;ErrorEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;7.1.4 &lt;/span&gt;Event loops&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
@@ -1174,8 +1175,9 @@
      &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.6.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-settings-for-workers&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Script settings for workers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
@@ -6681,7 +6683,8 @@
 
      &lt;dt&gt;If the URL came from a script (e.g. as an argument to a method)&lt;/dt&gt;
 
-     &lt;dd&gt;The URL character encoding is the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;.&lt;/dd&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;dd&gt;The URL character encoding is the &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;If the URL came from a DOM node (e.g. from an element)&lt;/dt&gt;
 
@@ -8387,10 +8390,12 @@
   their user interface. This is the primary mechanism by which a user can tell if a site is
   attempting to impersonate another.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created by a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; using
   the &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-DOMImplementation-createHTMLDocument&gt;&lt;a href=#dom-domimplementation-createhtmldocument&gt;createHTMLDocument()&lt;/a&gt;&lt;/code&gt; APIs, &lt;a href=&quot;#the-document's-address&quot;&gt;the
-  document's address&lt;/a&gt; is the same as &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; of the &lt;a href=&quot;#script's-document&quot;&gt;script's
-  document&lt;/a&gt;, and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is both &lt;a href=#ready-for-post-load-tasks&gt;ready for post-load tasks&lt;/a&gt; and
+  document's address&lt;/a&gt; is the same as &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible
+  document&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt;, and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is both &lt;a href=#ready-for-post-load-tasks&gt;ready for post-load tasks&lt;/a&gt; and
   &lt;a href=#completely-loaded&gt;completely loaded&lt;/a&gt; immediately.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn id=&quot;the-document's-referrer&quot;&gt;The document's referrer&lt;/dfn&gt; is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that can be set when the
@@ -8820,6 +8825,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;&lt;!-- multiple paragraphs --&gt;
+
   &lt;!-- these all return the same object each time because of a rule in
   the collection section --&gt;
 
@@ -9086,8 +9093,10 @@
 --&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;&lt;a href=#xmldocument&gt;XMLDocument&lt;/a&gt;&lt;/code&gt; object on which the
    method was invoked.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the method's first argument, relative to the
-   &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;. If this is not
+   &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the
+   &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;. If this is not
    successful, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is not the same as the
@@ -9112,9 +9121,10 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;success&lt;/var&gt; be false.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt;&lt;!--FETCH--&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; from the &lt;a href=#origin&gt;origin&lt;/a&gt; of
-   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's
-   referrer source&quot;&gt;referrer source&lt;/a&gt;, with the &lt;i title=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i title=&quot;&quot;&gt;force same-origin flag&lt;/i&gt; set.&lt;/li&gt;
+   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, with the &lt;i title=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i title=&quot;&quot;&gt;force same-origin flag&lt;/i&gt; set.&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -51847,29 +51857,33 @@
 
        &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;old script element&lt;/var&gt; be the value to which the
-        &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object was most recently
+        &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object was most recently
         initialized.&lt;/p&gt;
 
        &lt;/li&gt;
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;
         element.&lt;/p&gt;
 
        &lt;/li&gt;
 
        &lt;li&gt;
 
-        &lt;p&gt;&lt;a href=#create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;Create a script&lt;/a&gt; from the
-        &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element node, using &lt;var&gt;&lt;a href=&quot;#the-script-block's-source&quot;&gt;the script block's source&lt;/a&gt;&lt;/var&gt;, the
-        &lt;a href=#url&gt;URL&lt;/a&gt; from which the script was obtained, and &lt;var&gt;&lt;a href=&quot;#the-script-block's-type&quot;&gt;the script block's
-        type&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var&gt;&lt;a href=&quot;#the-script-block's-source&quot;&gt;the script block's source&lt;/a&gt;&lt;/var&gt;, the
+        &lt;a href=#url&gt;URL&lt;/a&gt; from which the script was obtained, &lt;var&gt;&lt;a href=&quot;#the-script-block's-type&quot;&gt;the script block's
+        type&lt;/a&gt;&lt;/var&gt; as the scripting language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's
+        &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;If the script came from a resource that was &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; in the
-        steps above, and the resource was &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;a href=#create-a-script-from-a-node&gt;create a script from a node&lt;/a&gt;
-        algorithm.&lt;/p&gt;
+        steps above, and the resource was &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;a href=#create-a-script&gt;create a script&lt;/a&gt;
+        algorithm as well.&lt;/p&gt;
 
         &lt;p class=note&gt;This is where the script is compiled and actually executed.&lt;/p&gt;
 
@@ -51877,7 +51891,8 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to &lt;var title=&quot;&quot;&gt;old script
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to &lt;var title=&quot;&quot;&gt;old script
         element&lt;/var&gt;.&lt;/p&gt;
 
        &lt;/li&gt;
@@ -64264,12 +64279,14 @@
   present, and as if all the properties of that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object had their [[Enumerable]]
   attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;a href=#effective-script-origin&gt;effective
   script origin&lt;/a&gt; that is not the same as the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; must be provided with a separate set
   of objects. These objects must have the prototype chain appropriate for the script for which the
-  objects are created (not those that would be appropriate for scripts whose &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
-  object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object in question).&lt;/p&gt;
+  objects are created (not those that would be appropriate for scripts whose &lt;a href=#global-object&gt;global
+  object&lt;/a&gt;, as specified by their &lt;a href=#settings-object&gt;settings object&lt;/a&gt;,
+  is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object in question).&lt;/p&gt;
 
   &lt;div class=example&gt;
 
@@ -64341,11 +64358,12 @@
 
   &lt;p&gt;The method has four arguments, though they are all optional.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, must be a &lt;a href=#valid-non-empty-url&gt;valid non-empty URL&lt;/a&gt; for a
   page to load in the browsing context. If the first argument is the empty string, then the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument must be interpreted as &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;. Otherwise, the
   argument must be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; to an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; (or
-  an error), relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-  URL&lt;/a&gt;, when the method is invoked.&lt;/p&gt;
+  an error), relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings 
+  object&lt;/a&gt; when the method was invoked.&lt;/p&gt;
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the &lt;a href=#browsing-context-name title=&quot;browsing context
   name&quot;&gt;name&lt;/a&gt; of the browsing context that is to be navigated. It must be a &lt;a href=#valid-browsing-context-name-or-keyword&gt;valid
@@ -64378,13 +64396,14 @@
   browsing context, then throw an &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort these
   steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is not &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, the user agent must
   &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV window.open()--&gt; the selected &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to the
   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; obtained from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier. If the &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is true or if the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; was just created as part of &lt;a href=#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name&gt;the rules for choosing a browsing context given a
   browsing context name&lt;/a&gt;, then &lt;a href=#replacement-enabled title=&quot;replacement enabled&quot;&gt;replacement must be
-  enabled&lt;/a&gt;. The navigation must be done with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing
-  context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source browsing
+  enabled&lt;/a&gt;. The navigation must be done with the &lt;a href=#responsible-browsing-context&gt;responsible
+  browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source browsing
   context&lt;/a&gt;. If the &lt;a href=#resolve-a-url&gt;resolve a URL&lt;/a&gt; algorithm failed, then the user agent may either
   instead &lt;a href=#navigate&gt;navigate&lt;/a&gt; to an inline error page, using the same replacement behavior and
   source browsing context behavior as described earlier in this paragraph; or treat the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, acting as described in the next paragraph.&lt;/p&gt;
@@ -64415,11 +64434,15 @@
   &lt;ul class=brief&gt;&lt;li&gt;The corresponding &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is
    &lt;a href=#script-closable&gt;script-closable&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-   script&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+   script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar
+   with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li id=sandboxClose&gt;The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the
-   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; is &lt;a href=#allowed-to-navigate&gt;allowed to navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
+&lt;!--CLEANUP--&gt;
+   &lt;li id=sandboxClose&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the
+   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   is &lt;a href=#allowed-to-navigate&gt;allowed to navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
    context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ul&gt;&lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is &lt;dfn id=script-closable&gt;script-closable&lt;/dfn&gt; if it is an &lt;a href=#auxiliary-browsing-context&gt;auxiliary
@@ -64462,13 +64485,15 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=dom-length title=dom-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; IDL attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
   interface must return the number of &lt;a href=#child-browsing-context title=&quot;child browsing context&quot;&gt;child browsing
   contexts&lt;/a&gt; that are &lt;a href=#browsing-context-nested-through title=&quot;browsing context nested through&quot;&gt;nested through&lt;/a&gt;
   elements that are &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in the &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that is the
   &lt;a href=#active-document&gt;active document&lt;/a&gt; of that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, if that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; shares the same &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's
-  browsing context&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; accessing the IDL attribute; otherwise,
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; shares the same &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=#responsible-document&gt;responsible
+  document&lt;/a&gt; specified by the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
+  &lt;a href=#entry-script&gt;entry script&lt;/a&gt; accessing the IDL attribute; otherwise,
   it must return zero.&lt;/p&gt;
 
   &lt;!-- in other words, frames are only accessible to same-thread processes --&gt;
@@ -64585,8 +64610,10 @@
   objects have &lt;a href=#implied-strong-reference title=&quot;implied strong reference&quot;&gt;implied strong references&lt;/a&gt; to the
   &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; and its &lt;a href=&quot;#script's-document&quot; title=&quot;script's
-  document&quot;&gt;document&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Each &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt;, and each &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;
+  has strong references to its &lt;a href=#global-object&gt;global object&lt;/a&gt;, &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;, and &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;.&lt;/p&gt;
 
   &lt;!-- discard a document --&gt;
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -65921,8 +65948,9 @@
 
     &lt;p&gt;If the third argument is not null, run these substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the third argument, relative to the
-     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;.&lt;/li&gt;
+    &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the third argument, relative to the
+     &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the
+     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;If that fails, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
@@ -65932,9 +65960,10 @@
      &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt;, and &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt; components, then throw a
      &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
      &lt;li&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the same as
-     the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's
-     document&quot;&gt;document&lt;/a&gt;, and either the &lt;a href=#concept-url-path title=concept-url-path&gt;path&lt;/a&gt; or &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; components of the two &lt;a href=#parsed-url title=&quot;parsed URL&quot;&gt;parsed
+     the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+     &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and either the &lt;a href=#concept-url-path title=concept-url-path&gt;path&lt;/a&gt; or &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; components of the two &lt;a href=#parsed-url title=&quot;parsed URL&quot;&gt;parsed
      URLs&lt;/a&gt; compared in the previous step differ, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
      and abort these steps. (This prevents sandboxed content from spoofing other pages on the same
      origin.)&lt;/li&gt;
@@ -66189,9 +66218,10 @@
   &lt;p&gt;The &lt;i&gt;relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;&lt;/i&gt; is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's associated
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn id=dom-location-assign title=dom-location-assign&gt;&lt;code&gt;assign(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the argument, relative
-  to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, and if that is
+  to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and if that is
   successful, must &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV location.href/assign--&gt; the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;. If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
   &lt;a href=#session-history&gt;session history&lt;/a&gt; contains only one &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, and that was the
@@ -66201,14 +66231,16 @@
   Safari doesn't check that. Thus this might need changing if testing shows the IE/Firefox behaviour
   is required here. --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn id=dom-location-replace title=dom-location-replace&gt;&lt;code&gt;replace(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the argument, relative
-  to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, and if that is
+  to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and if that is
   successful, &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV location.href/replace--&gt; the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Navigation for the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods must be done with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's
-  browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Navigation for the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods must be done with the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by
+  the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source
   browsing context&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; step of the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods is not successful, then the user agent must
@@ -66272,9 +66304,10 @@
   input&lt;/a&gt; algorithm with &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the address&lt;/a&gt; of the
   &lt;i&gt;relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;&lt;/i&gt; as the given value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The element's &lt;code&gt;&lt;a href=#urlutils&gt;URLUtils&lt;/a&gt;&lt;/code&gt; interface's &lt;a href=#concept-uu-get-the-base title=concept-uu-get-the-base&gt;get the
-  base&lt;/a&gt; algorithm must return the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base
-  URL&quot;&gt;base URL&lt;/a&gt;, if there is one, or null otherwise.&lt;/p&gt;
+  base&lt;/a&gt; algorithm must return the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, if there is one, or null otherwise.&lt;/p&gt;
 
   &lt;p&gt;The element's &lt;code&gt;&lt;a href=#urlutils&gt;URLUtils&lt;/a&gt;&lt;/code&gt; interface's &lt;a href=#concept-uu-query-encoding title=concept-uu-query-encoding&gt;query
   encoding&lt;/a&gt; is the &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt;.&lt;/p&gt;
@@ -66326,12 +66359,15 @@
   context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt;, with the
   following exceptions:&lt;/p&gt;
 
-  &lt;ul&gt;&lt;li&gt;The &lt;code title=dom-url-href&gt;&lt;a href=#dom-url-href&gt;href&lt;/a&gt;&lt;/code&gt; setter, if the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
-   &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
+  &lt;ul&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;The &lt;code title=dom-url-href&gt;&lt;a href=#dom-url-href&gt;href&lt;/a&gt;&lt;/code&gt; setter, if the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;
+   specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
    context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object is associated
 
-   &lt;li&gt;The &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; method, if the &lt;a href=#entry-script&gt;entry
-   script&lt;/a&gt;'s &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; method, if the &lt;a href=#responsible-browsing-context&gt;responsible
+   browsing context&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the
    &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object is associated
 
    &lt;li&gt;Any properties not defined in the IDL for the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object or indirectly via
@@ -66345,12 +66381,13 @@
   properties, getters, setters, etc, were not present, and as if all the properties of that
   &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object had their [[Enumerable]] attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;a href=#effective-script-origin&gt;effective
   script origin&lt;/a&gt; that is not the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;
   object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; must be provided with a
   separate set of objects. These objects must have the prototype chain appropriate for the script
   for which the objects are created (not those that would be appropriate for scripts whose
-  &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt; specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object).&lt;/p&gt;
 
   &lt;/div&gt;
@@ -67757,7 +67794,7 @@
 
   &lt;ol&gt;&lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#make-disappear&gt;Make disappear&lt;/a&gt; any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor whose global object is the
+    &lt;p&gt;&lt;a href=#make-disappear&gt;Make disappear&lt;/a&gt; any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor from the
     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
     &lt;p&gt;If this affected any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects, then set &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;i title=concept-document-salvageable&gt;&lt;a href=#concept-document-salvageable&gt;salvageable&lt;/a&gt;&lt;/i&gt; state to false.&lt;/p&gt;
@@ -69915,27 +69952,28 @@
     information).&lt;/p&gt;
 
    &lt;/dd&gt;
-&lt;!--
-   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
+   &lt;dt&gt;A &lt;dfn id=settings-object&gt;settings object&lt;/dfn&gt;&lt;/dt&gt;
+
    &lt;dd&gt;
 
-    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
-    scripts.&lt;/p&gt;
+    &lt;p&gt;A &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;, various settings that are shared with other scripts in
+    the same context.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;
+   &lt;dt&gt;An &lt;dfn title=&quot;&quot;&gt;owner&lt;/dfn&gt;, &lt;dfn title=&quot;&quot;&gt;origin&lt;/dfn&gt;, and &lt;dfn title=&quot;&quot;&gt;effective origin&lt;/dfn&gt;&lt;/dt&gt;
 
-  &lt;hr&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
-  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+    &lt;p&gt;There are defined in the &lt;a href=#origin&gt;origin&lt;/a&gt; section.&lt;/p&gt;
 
-  &lt;dl&gt;
---&gt;
-   &lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;A &lt;dfn id=script-settings-object&gt;script settings object&lt;/dfn&gt; specifies algorithms for obtaining the following:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt; for each language supported by the user agent&lt;/dt&gt;
+
    &lt;dd&gt;
 
     &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
@@ -69947,19 +69985,18 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-global-object&quot;&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
-
+   &lt;dt&gt;A &lt;dfn id=global-object&gt;global object&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;An object that provides the APIs that the code can use.&lt;/p&gt;
+    &lt;p&gt;An object that provides the APIs that can be called by the code in scripts that use this
+    &lt;a href=#script-settings-object title=&quot;script settings object&quot;&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p class=example&gt;This is typically a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. In JavaScript, this
-    corresponds to the &lt;i&gt;global object&lt;/i&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;This is typically a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or a
+    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object. When a &lt;a href=#global-object&gt;global object&lt;/a&gt; is an empty object, it
+    can't do anything that interacts with the environment.&lt;/p&gt;
 
-    &lt;p class=note&gt;When a &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is an empty object, it can't do
-    anything that interacts with the environment.&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, then in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, then, in
     JavaScript, the ThisBinding of the global execution context for this script must be the
     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, rather than the global object. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
@@ -69970,70 +70007,148 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-browsing-context&quot;&gt;script's browsing context&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-browsing-context&gt;responsible browsing context&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that is assigned responsibility for actions taken by the
-    script.&lt;/p&gt;
+    scripts that use this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p class=example&gt;When a script creates and &lt;a href=#navigate title=navigate&gt;navigates&lt;/a&gt; a new
-    &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;, the &lt;code title=dom-opener&gt;&lt;a href=#dom-opener&gt;opener&lt;/a&gt;&lt;/code&gt; attribute of
-    the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
-    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+    &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;, the &lt;code title=dom-opener&gt;&lt;a href=#dom-opener&gt;opener&lt;/a&gt;&lt;/code&gt; attribute
+    of the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
+    &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-document&quot;&gt;script's document&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-document&gt;responsible document&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the script.&lt;/p&gt;
+    &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the scripts that
+    use this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=example&gt;For example, the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
-    &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; is used to set the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
-    address&quot;&gt;address&lt;/a&gt; of any &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; elements created using &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+    &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; is used to set the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+    address&quot;&gt;address&lt;/a&gt; of any &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s created using &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;dfn id=&quot;script's-referrer-source&quot;&gt;script's referrer source&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Either a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;), or a
+    &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;An &lt;dfn id=api-referrer-source&gt;API referrer source&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Either a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;), or a
     &lt;a href=#url&gt;URL&lt;/a&gt;, which is used by some APIs to determine what value to use for the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic) header in calls to the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=&quot;script's-url-character-encoding&quot; title=&quot;script's URL character encoding&quot;&gt;URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn id=api-url-character-encoding&gt;API URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A character encoding, set when the script is created, used to encode URLs. &lt;span id=sce-not-copy title=&quot;&quot;&gt;If the character encoding is set from another source, e.g. a
-    &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt;, then the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character
-    encoding&lt;/a&gt; must follow the source, so that if the source's changes, so does the
-    script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use
+    this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=&quot;script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn id=api-base-url&gt;API base URL&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt;, set when the script is created, used to resolve &lt;a href=#relative-url title=&quot;relative
-    URL&quot;&gt;relative URLs&lt;/a&gt;. &lt;span id=sbu-not-copy title=&quot;&quot;&gt;If the base URL is set from another
-    source, e.g. a &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt;, then the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; must
-    follow the source, so that if the source's changes, so does the script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;An &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use
+    this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; to resolve &lt;a href=#relative-url title=&quot;relative
+    URL&quot;&gt;relative URLs&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;/div&gt;
+  &lt;/dl&gt;&lt;h5 id=script-settings-for-browsing-contexts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Script settings for browsing contexts&lt;/h5&gt;
 
+  &lt;p&gt;Whenever a new &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is created, it must also create a &lt;a href=#script-settings-object&gt;script
+  settings object&lt;/a&gt; whose algorithms are defined as follows:&lt;/p&gt;
 
-  &lt;div class=impl&gt;
+  &lt;dl&gt;&lt;dt&gt;The &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environments&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
 
-  &lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/h5&gt;
+    &lt;p&gt;When the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; is created, for each language supported by the
+    user agent, create an appropriate execution environment as defined by the relevant
+    specification.&lt;/p&gt;
 
+    &lt;p&gt;When a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; is needed, return the appropriate one from
+    those created when the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; was created.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object itself.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is associated with the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related
+    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing
+    context&lt;/a&gt; belongs.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of
+    the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of the
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Calling scripts&lt;/h5&gt;
+
   &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=stack-of-incumbent-scripts&gt;stack of
   incumbent scripts&lt;/dfn&gt;, which must be initially empty. When a new script is &lt;i&gt;pushed&lt;/i&gt; onto
   this stack, the specified script is to be added to the stack; when the script on this stack that
@@ -70048,8 +70163,10 @@
    new incumbent &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; and the owner &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If this returns &quot;do not run&quot; then abort these
    steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Make the &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environment&lt;/a&gt;
-   for &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Make the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;
+   specified by &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code
    entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#clean-up-after-running-a-callback&gt;Clean up after running a callback&lt;/a&gt;.&lt;/li&gt;
@@ -70059,11 +70176,12 @@
   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, and return either &quot;run&quot; or &quot;do
   not run&quot;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
    is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is not &lt;a href=#fully-active&gt;fully
    active&lt;/a&gt;, then return &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt;, then return
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt; for the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, then return
    &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Push &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; onto the &lt;a href=#stack-of-incumbent-scripts&gt;stack of incumbent scripts&lt;/a&gt;, and label it
@@ -70102,7 +70220,7 @@
   &lt;p&gt;The &lt;dfn id=entry-script&gt;entry script&lt;/dfn&gt; is the most-recently added &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; in the &lt;a href=#stack-of-incumbent-scripts&gt;stack of incumbent scripts&lt;/a&gt; that is
   labeled as a &lt;a href=#candidate-entry-scripts title=&quot;candidate entry scripts&quot;&gt;candidate entry script&lt;/a&gt;. If the stack is
   empty, or has no entries labeled as such, then there is no &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. It is used
-  to obtain, amongst other things, the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; to &lt;a href=#resolve-a-url title=&quot;resolve a
+  to obtain, amongst other things, the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; to &lt;a href=#resolve-a-url title=&quot;resolve a
   url&quot;&gt;resolve&lt;/a&gt; relative &lt;a href=#url title=URL&gt;URLs&lt;/a&gt; used in scripts running in that
   &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;.&lt;/p&gt;
 
@@ -70134,12 +70252,11 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Creating scripts&lt;/h5&gt;
+  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Creating scripts&lt;/h5&gt;
 
   &lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script title=&quot;create a script&quot;&gt;created&lt;/dfn&gt;, given some script source, a script source URL, its
-  scripting language, a global object, a browsing context, a document, a referrer source, a URL
-  character encoding, a base URL, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag, the user
-  agent must run the following steps:&lt;/p&gt;
+  scripting language, a &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;, and optionally a &lt;var title=&quot;&quot;&gt;muted
+  errors&lt;/var&gt; flag, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that
    this algorithm will subsequently initialize.&lt;/li&gt;
@@ -70148,16 +70265,14 @@
    context&lt;/a&gt; passed to this algorithm, then abort these steps, as if the script source
    described a program that did nothing but return void.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; as appropriate for the given scripting
-   language.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Obtain the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for the given scripting
+   language from the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; provided.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the &lt;a href=#script-execution-environment&gt;script execution
    environment&lt;/a&gt;, as appropriate for the scripting language, and thus obtain &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-   context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt;,
-   the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from the
-   settings passed to this algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be the &lt;a href=#script-settings-object&gt;script
+   settings object&lt;/a&gt; provided.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#muted-errors&gt;muted errors&lt;/a&gt; flag.&lt;/li&gt;
 
@@ -70167,45 +70282,20 @@
     &lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code
     entry-point&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;, with the problematic
-    position (line number and column number), using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the
+    position (line number and column number), using the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; as the
     target. If the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this,
     then the error may be reported to the user.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;created from a node&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, given some
-  script source, its URL, its scripting language, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt;
-  flag, the user agent must &lt;a href=#create-a-script&gt;create a script&lt;/a&gt;, using the given script source, URL, and
-  scripting language, &lt;a href=#the-script-settings-determined-from-the-node&gt;the script settings determined from the node&lt;/a&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, and, if the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set in the call to this
-  algorithm, the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn id=the-script-settings-determined-from-the-node&gt;The script settings determined from the node&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; are computed
-  as follows:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;
-   (or &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; itself if it is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The browsing context is the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The document is &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The referrer source is &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The URL character encoding is the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character
-   encoding&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=#sce-not-copy&gt;This is a reference,
-   not a copy&lt;/a&gt;.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The base URL is the &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=#sbu-not-copy&gt;This is a reference, not a copy&lt;/a&gt;.)&lt;/li&gt;
-
   &lt;/ol&gt;&lt;/div&gt;
 
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Killing scripts&lt;/h5&gt;
+  &lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Killing scripts&lt;/h5&gt;
 
   &lt;p&gt;User agents may impose resource limitations on scripts, for example CPU quotas, memory limits,
   total execution time limits, or bandwidth limitations. When a script exceeds a limit, the user
@@ -70241,7 +70331,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
+  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.6 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
 
   &lt;p&gt;When the user agent is required to &lt;dfn id=report-the-error title=&quot;report the error&quot;&gt;report an error&lt;/dfn&gt; for a
   particular &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; with a particular
@@ -70314,11 +70404,12 @@
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; was canceled, then the error is &lt;i title=concept-error-handled&gt;&lt;a href=#concept-error-handled&gt;handled&lt;/a&gt;&lt;/i&gt;. Otherwise, the error is &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
 
-  &lt;/ol&gt;&lt;h6 id=runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.5.1 &lt;/span&gt;Runtime script errors in documents&lt;/h6&gt;
+  &lt;/ol&gt;&lt;h6 id=runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.6.1 &lt;/span&gt;Runtime script errors in documents&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the scripts associated with a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, the user agent must &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for the relevant &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, with the problematic position (line number and column
-  number) in the resource containing the script, using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as
+  number) in the resource containing the script, using the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as
   the target. If the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this,
   then the error may be reported to the user.&lt;/p&gt;
 
@@ -70326,7 +70417,7 @@
 
 
 
-  &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.5.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
+  &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
 
   &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict)]
 interface &lt;dfn id=errorevent&gt;ErrorEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
@@ -70437,7 +70528,7 @@
   the task was queued in the context of a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, then it is the
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt; at the time the task was queued; if
   the task was queued by or for a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; then the document is
-  the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;.&lt;/p&gt;
+  the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;A &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; is intended for a specific &lt;a href=#event-loop&gt;event loop&lt;/a&gt;:
   the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is handling &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; for the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;'s associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
@@ -70529,9 +70620,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the
-    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's
-    browsing context&lt;/a&gt; belongs, using the &lt;a href=#task-wrapper-algorithm&gt;task wrapper algorithm&lt;/a&gt; as the steps to
+    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=#responsible-browsing-context&gt;responsible
+    browsing context&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; belongs, using the &lt;a href=#task-wrapper-algorithm&gt;task wrapper algorithm&lt;/a&gt; as the steps to
     invoke each callback.&lt;/p&gt;
 
     &lt;p class=note&gt;This will typically invoke scripted callbacks, which calls the &lt;a href=#jump-to-a-code-entry-point&gt;jump to a
@@ -70716,10 +70808,10 @@
       context&lt;/a&gt; being navigated has a &lt;a href=#creator-browsing-context&gt;creator browsing context&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
       &lt;a href=#creator-document&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;
 
-      &lt;p&gt;&lt;a href=#create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;Create a script&lt;/a&gt; from the
-      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; node of the &lt;a href=#active-document&gt;active document&lt;/a&gt;, using the aforementioned
-      script source, the &lt;a href=#url&gt;URL&lt;/a&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
-      was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
+      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using the aforementioned script source, the &lt;a href=#url&gt;URL&lt;/a&gt;
+      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
+      language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
+      &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
 
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
       of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
@@ -70846,8 +70938,12 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the corresponding &lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;event handler&lt;/a&gt; to null.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for JavaScript.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the
+   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object associated with the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to which belongs the
+   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the element in question.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Obtain the &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for JavaScript from &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;body&lt;/var&gt; be the &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;event
    handler content attribute&lt;/a&gt;'s new value.&lt;/li&gt;
 
@@ -70890,7 +70986,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Using the script execution environment created above, create a function object (as defined in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;Using the &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; obtained above, create a function object (as defined in
     ECMAScript edition 5 section 13.2 Creating Function Objects), with:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;Parameter list &lt;var title=&quot;&quot;&gt;FormalParameterList&lt;/var&gt;&lt;/dt&gt;
@@ -70939,15 +71036,12 @@
 
      &lt;dd&gt;The value of &lt;var title=&quot;&quot;&gt;strict&lt;/var&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p&gt;Let this new function be the script's &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
+    &lt;/dl&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;Let this new function be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-   context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt;,
-   the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from
-   &lt;a href=#the-script-settings-determined-from-the-node&gt;the script settings determined from the node&lt;/a&gt; on which the attribute is being
-   set.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let that &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be
+   &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set the corresponding &lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;event handler&lt;/a&gt; to the
    aforementioned function.&lt;/li&gt;
@@ -71745,15 +71839,22 @@
    &lt;li&gt;&lt;p&gt;Remove all child nodes of the document, without firing any mutation events.&lt;/li&gt; &lt;!--
    as of 2009-03-30, only WebKit fired mutation events here. --&gt;
 
-   &lt;li&gt;&lt;p&gt;Replace the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s singleton objects with new instances of those objects.
-   (This includes in particular the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, objects, the
-   various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects, the various
-   &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects, and objects defined by other specifications, like
-   &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
-   IDL prototypes in the JavaScript binding, including the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's
-   prototype.)&lt;/li&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Replace the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s singleton objects with new instances of those objects.
+    (This includes in particular the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;,
+    &lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, objects, the
+    various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects, the various
+    &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects, and objects defined by other specifications, like
+    &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
+    IDL prototypes in the JavaScript binding, including the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's
+    prototype.)&lt;/p&gt;
+
+    &lt;p class=note&gt;The new &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object has a new &lt;a href=#script-settings-object&gt;script settings
+    object&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%
 0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E --&gt;
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(</A>)%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E --&gt;
 
@@ -71765,8 +71866,10 @@
 
    &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;i title=concept-document-salvageable&gt;&lt;a href=#concept-document-salvageable&gt;salvageable&lt;/a&gt;&lt;/i&gt; state back to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Change &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt;'s &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
-   address&quot;&gt;address&lt;/a&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Change &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+   address&quot;&gt;address&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
+   the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
    &lt;!-- &lt;span&gt;the document's referrer&lt;/span&gt; stays the same --&gt;
 
@@ -72197,32 +72300,14 @@
 
          &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script language&lt;/var&gt; be JavaScript.&lt;/li&gt;
 
-         &lt;li&gt;
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt;'s
+         &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/li&gt;
 
-          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, let &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt;, let &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt; be the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; is associated, let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt; be the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt;, let &lt;var title=&quot;&quot;&gt;character encoding&lt;/var&gt; be the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
-          associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=#sce-not-copy&gt;this is a
-          reference, not a copy&lt;/a&gt;), and let &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=#sbu-not-copy&gt;this is a reference, not a
-          copy&lt;/a&gt;).&lt;/p&gt;
+         &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-          &lt;p&gt;Otherwise, &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object;
-          let &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;character
-          encoding&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;,
-          &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's
-          referrer source&lt;/a&gt;, &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and &lt;a href=&quot;#script's-base-url&quot;&gt;script's
-          base URL&lt;/a&gt; (respectively) of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that the
-          &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm created when it created &lt;var title=&quot;&quot;&gt;method
-          context&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
           &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt; using &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; as the script
-          source, the &lt;a href=#url&gt;URL&lt;/a&gt; where &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; can be found, &lt;var title=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, &lt;var title=&quot;&quot;&gt;global
-          object&lt;/var&gt; as the global object, &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt; as the browsing
-          context, &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; as the document, &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt;
-          as the referrer source, &lt;var title=&quot;&quot;&gt;character encoding&lt;/var&gt; as the URL character
-          encoding, and &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; as the base URL.&lt;/p&gt;
+          source, the &lt;a href=#url&gt;URL&lt;/a&gt; where &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; can be found, &lt;var title=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, and &lt;var title=&quot;&quot;&gt;settings
+          object&lt;/var&gt; as the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
          &lt;/li&gt;
 
@@ -72230,7 +72315,7 @@
 
       &lt;/dl&gt;&lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;repeat&lt;/var&gt; flag is true, then call &lt;a href=#timer-initialization-steps&gt;timer initialization
       steps&lt;/a&gt; again, passing them the same method arguments, the same &lt;var title=&quot;&quot;&gt;method
@@ -72569,7 +72654,8 @@
   &lt;ol&gt;&lt;li&gt;
 
     &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; relative to the
-    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;.&lt;/p&gt;
+    &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by
+    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If this fails, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 
@@ -72598,9 +72684,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;a href=#active-sandboxing-flag-set&gt;active sandboxing flag set&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the
-    &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; has its &lt;a href=#sandboxed-auxiliary-navigation-browsing-context-flag&gt;sandboxed auxiliary navigation browsing context flag&lt;/a&gt; set,
+    &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; has its &lt;a href=#sandboxed-auxiliary-navigation-browsing-context-flag&gt;sandboxed auxiliary navigation browsing context flag&lt;/a&gt; set,
     then return the empty string and abort these steps.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -72653,11 +72740,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Set all the flags in the new browsing context's &lt;a href=#popup-sandboxing-flag-set&gt;popup sandboxing flag set&lt;/a&gt; that
     are set in the &lt;a href=#active-sandboxing-flag-set&gt;active sandboxing flag set&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of
-    the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt;. The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing
-    context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;
+    the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;. The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
     must be set as the new browsing context's &lt;a href=#one-permitted-sandboxed-navigator&gt;one permitted sandboxed
     navigator&lt;/a&gt;.&lt;/p&gt;
 
@@ -72689,9 +72776,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;a href=#navigate&gt;Navigate&lt;/a&gt;&lt;!--DONAV showModalDialog--&gt; the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to
     the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that resulted from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt;
-    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;, and with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;
+    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;, and with the &lt;a href=#responsible-browsing-context&gt;responsible
+    browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
     as the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -73152,9 +73241,10 @@
     argument passed to one of these methods does not contain the exact literal string
     &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;User agents must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if &lt;a href=#resolve-a-url title=&quot;resolve a
-    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the &lt;a href=#entry-script&gt;entry
-    script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is not successful.&lt;/p&gt;
+    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the
+    &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is not successful.&lt;/p&gt;
 
     &lt;p class=note&gt;The resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; would by definition not be a &lt;a href=#valid-url&gt;valid
     URL&lt;/a&gt; as it would include the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; which is not a valid
@@ -73170,10 +73260,12 @@
     &lt;p&gt;The resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is the &lt;dfn id=proto-url&gt;proto-URL&lt;/dfn&gt;. It identifies the
     handler for the purposes of the methods described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When the user agent uses this handler, it must replace the first occurrence of the exact
     literal string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; in the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument with an
     escaped version of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the content in question (as defined below),
-    then &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the resulting URL, relative to the &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; at the time the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; methods were
+    then &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the resulting URL, relative to the &lt;a href=#api-base-url&gt;API
+    base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; at the time the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; methods were
     invoked, and then &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV user--&gt; an appropriate &lt;a href=#browsing-context&gt;browsing
     context&lt;/a&gt; to the resulting URL using the GET method (&lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt; for non-HTTP URLs).&lt;/p&gt;
 
@@ -73381,7 +73473,9 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the string does not contain the substring &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot;, abort these
    steps. There's no matching handler.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the string relative to the &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the string relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;
+   specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception, aborting the
    method.&lt;/li&gt;
@@ -74008,9 +74102,9 @@
     never does anything, or may arbitrarily ignore invocations with particular arguments for
     security, privacy, or usability reasons.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the method's first argument
-    relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-    URL&lt;/a&gt;.&lt;/li&gt;
+    relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, abort these steps.&lt;/li&gt;
 
@@ -74032,9 +74126,10 @@
     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host1&lt;/var&gt; be the host component of the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-    relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-    URL&lt;/a&gt;.&lt;/li&gt;
+    relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;.&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, return 0 and abort these steps.&lt;/li&gt;
 
@@ -77969,9 +78064,9 @@
   settings, if any, in the form of an &lt;code&gt;&lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt;&lt;/code&gt; dictionary. When the
   &lt;code&gt;EventSource()&lt;/code&gt; constructor is invoked, the UA must run these steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; specified in the first
-   argument, relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-   URL&lt;/a&gt;.
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; specified in the first
+   argument, relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the previous step failed, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort
@@ -77990,9 +78085,10 @@
 
    &lt;li&gt;&lt;!-- if you change this, don't forget to update the reconnecting fetch lower down as well! --&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Do a &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt;&lt;!--FETCH--&gt; of the resulting &lt;a href=#absolute-url&gt;absolute
-    URL&lt;/a&gt; using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's referrer source&quot;&gt;referrer
-    source&lt;/a&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var title=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt; being the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;&lt;!--, and the
+    URL&lt;/a&gt; using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var title=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt; being the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;&lt;!--, and the
     &lt;i&gt;default origin behaviour&lt;/i&gt; set to &lt;i&gt;fail&lt;/i&gt; (though it has no effect in the &quot;Anonymous&quot;
     and &quot;Use Credentials&quot; modes)--&gt;, and process the resource obtained in this fashion, if any, as
     described below.&lt;/p&gt;
@@ -79609,7 +79705,7 @@
 
     &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;message clone&lt;/var&gt; be the result of obtaining a &lt;a href=#structured-clone&gt;structured
     clone&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; argument, with &lt;var title=&quot;&quot;&gt;transfer map&lt;/var&gt;
@@ -79623,14 +79719,14 @@
     &lt;p&gt;If the method was invoked with a third argument &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt;, run these
     substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
       invoked.&lt;/p&gt;
 
      &lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;For each object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; in turn, obtain a new
       object &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; by &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable
@@ -79642,7 +79738,7 @@
 
     &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Make &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; into a &lt;a href=#dfn-read-only-array title=dfn-read-only-array&gt;read only&lt;/a&gt;
     array.&lt;/p&gt;
@@ -79658,9 +79754,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is a single literal U+002F SOLIDUS character
     (/), and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
-    invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt;, then abort these steps silently.&lt;/p&gt;
+    invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;, then abort these steps silently.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;,
     and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked
@@ -79674,12 +79772,16 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event that uses the
     &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface, with the event type &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is not cancelable, and has no
     default action. The &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute must be
     initialized to the value of &lt;var title=&quot;&quot;&gt;message clone&lt;/var&gt;, the &lt;code title=dom-MessageEvent-origin&gt;&lt;a href=#dom-messageevent-origin&gt;origin&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an origin&quot;&gt;Unicode serialization&lt;/a&gt; of the
     &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, the &lt;code title=dom-MessageEvent-source&gt;&lt;a href=#dom-messageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the
-    &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, and the &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; array.
+    &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object corresponding to the
+    &lt;a href=#global-object&gt;global object&lt;/a&gt; (a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object) specified by the
+    &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;,
+    and the &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; array.
     &lt;/p&gt;
     &lt;!-- invariant: the global object is always a Window if the script can see this method --&gt;
 
@@ -79914,11 +80016,14 @@
   &lt;p&gt;When the &lt;dfn id=dom-messagechannel title=dom-MessageChannel&gt;&lt;code&gt;MessageChannel()&lt;/code&gt;&lt;/dfn&gt; constructor is
   called, it must run the following algorithm:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot;&gt;script's
-   global object&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/li&gt;
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot;&gt;script's
-   global object&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/li&gt;
@@ -80000,21 +80105,30 @@
   message queue&lt;/dfn&gt;, initially empty. A &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; can be enabled or
   disabled, and is initially disabled. Once enabled, a port can never be disabled again (though
   messages in the queue can get moved to another queue or removed altogether, which has much the
-  same effect). A &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=has-been-shipped&gt;has been shipped&lt;/dfn&gt; flag. It must
-  initially be false.&lt;/p&gt;
+  same effect). A &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=has-been-shipped&gt;has been shipped&lt;/dfn&gt; flag, which must
+  initially be false, and an &lt;dfn id=concept-port-owner title=concept-port-owner&gt;owner&lt;/dfn&gt;, which is a &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; is enabled, the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must use
-  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;.&lt;/p&gt;
+  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. All &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on the &lt;a href=#port-message-queue&gt;port
+  message queue&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
+  the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p class=note&gt;If the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the port's event listeners' &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's
-  global object&quot;&gt;global object&lt;/a&gt; is not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then the messages are
+&lt;!--CLEANUP--&gt;
+  &lt;p class=note&gt;If the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; specifies a &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; that is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;,
+  but the event listeners all have scripts whose &lt;a href=#settings-object title=&quot;settings object&quot;&gt;settings objects&lt;/a&gt;
+  specify &lt;a href=#responsible-document title=&quot;responsible document&quot;&gt;responsible documents&lt;/a&gt; that are &lt;em&gt;not&lt;/em&gt; &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then the messages will be
   lost.&lt;/p&gt; &lt;!-- because of the jump-to-entry-point algorithm first step --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Each &lt;a href=#event-loop&gt;event loop&lt;/a&gt; has a &lt;a href=#task-source&gt;task source&lt;/a&gt; called the &lt;dfn id=unshipped-port-message-queue&gt;unshipped port
   message queue&lt;/dfn&gt;. This is a virtual &lt;a href=#task-source&gt;task source&lt;/a&gt;: it must act as if it contained
   the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; of each &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of each
-  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag is false and whose &lt;a href=#port-message-queue&gt;port
-  message queue&lt;/a&gt; is enabled, in the order in which they were added to their respective
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag is false, whose &lt;a href=#port-message-queue&gt;port
+  message queue&lt;/a&gt; is enabled, and whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+  specifies that &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;,
+  in the order in which they were added to their respective
   &lt;a href=#task-source&gt;task source&lt;/a&gt;. When a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; would be removed from the
   &lt;a href=#unshipped-port-message-queue&gt;unshipped port message queue&lt;/a&gt;, it must instead be removed from its &lt;a href=#port-message-queue&gt;port message
   queue&lt;/a&gt;.&lt;/p&gt;
@@ -80029,9 +80143,10 @@
   is true, its &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; acts as a first-class &lt;a href=#task-source&gt;task source&lt;/a&gt;,
   unaffected to any &lt;a href=#unshipped-port-message-queue&gt;unshipped port message queue&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user agent is to &lt;dfn id=create-a-new-messageport-object&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; owned by a
-  &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; object &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
-  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object, and let its owner be &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When the user agent is to &lt;dfn id=create-a-new-messageport-object&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; with a particular
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as its &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object, and let its &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=entangle&gt;entangle&lt;/dfn&gt; two &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects, it must run
   the following steps:&lt;/p&gt;
@@ -80069,7 +80184,7 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to
    true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt; be that object.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt; be that object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to true.&lt;/li&gt;
 
@@ -80176,7 +80291,8 @@
 
     &lt;ol&gt;&lt;li&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the owner of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, if there
+&lt;!--CLEANUP--&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, if there
       is a &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, or else some arbitrary owner. (This &lt;var title=&quot;&quot;&gt;new
       owner&lt;/var&gt; is used when transferring objects below. If there is no &lt;var title=&quot;&quot;&gt;target
       port&lt;/var&gt;, the &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; objects given in the second argument, if any, are
@@ -80238,8 +80354,9 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; be the method's first argument.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span&gt;script's
-   global object&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt; is not entangled with another port, then return
    &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!- - we don't throw an exception
@@ -80249,8 +80366,9 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt; be the port with which &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt;
    is entangled.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the owner of the &lt;var
-   title=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; of
+   the &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/p&gt;&lt;/li&gt;
@@ -80402,9 +80520,10 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is entangled, user agents must
   either act as if &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s entangled &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object has a strong
-  reference to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, or as if &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s owner has a strong reference
+  reference to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, or as if the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; has a strong reference
   to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;div class=note&gt;
@@ -81595,7 +81714,7 @@
   JavaScript&lt;/a&gt; if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#shared-worker-environment&gt;shared worker
   environment&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Shared workers receive message ports through &lt;code title=event-WorkerGlobalScope-connect&gt;connect&lt;/code&gt; events on their global object for each
+  &lt;p&gt;Shared workers receive message ports through &lt;code title=event-WorkerGlobalScope-connect&gt;connect&lt;/code&gt; events on their &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object for each
   connection.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute must return
@@ -81672,14 +81791,15 @@
   it must be removed from the list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of each
   worker whose list contains that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Given a &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Given a &lt;a href=#settings-object&gt;settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
   worker, the &lt;dfn id=list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/dfn&gt; depends on the type
-  of &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+  of &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s. If &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;
+  specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
   (i.e. if we are creating a nested worker), then the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are the
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s that are in &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s own list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's
-  &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object,
-  and the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is just the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is the &lt;a href=#active-document&gt;active
-  document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
+  &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by
+  &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object,
+  and the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is just the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;A worker is said to be a &lt;dfn id=permissible-worker&gt;permissible worker&lt;/dfn&gt; if its list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's
   &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; is not empty.&lt;/p&gt;
@@ -81698,8 +81818,9 @@
 
   &lt;h4 id=processing-model-7&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
-  &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, a
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, an &lt;a href=#origin&gt;origin&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with global scope &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;,
+  and an &lt;a href=#origin&gt;origin&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, it
   must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li id=worker-processing-model-top&gt;
@@ -81712,6 +81833,9 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified
+   by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is actually a
    &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the worker is a shared worker), and there are
    any &lt;a href=#relevant-application-cache title=&quot;relevant application cache&quot;&gt;relevant application caches&lt;/a&gt; that are
@@ -81724,8 +81848,8 @@
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resource identified by &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;,
-    from the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, using &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt; as the
-    &lt;a href=#referrer-source&gt;referrer source&lt;/a&gt;, with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
+    from the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, using the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; as the
+    &lt;a href=#referrer-source&gt;referrer source&lt;/a&gt; (not the specified &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;!), with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
     flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy sensitive (looking forward to CORS) --&gt;
 
     &lt;p&gt;If the attempt fails, then for each &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object
@@ -81745,7 +81869,7 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;In the newly created execution environment, create a &lt;a href=#javascript-global-environment&gt;JavaScript global
-   environment&lt;/a&gt; whose &lt;i&gt;global object&lt;/i&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, then this
+   environment&lt;/a&gt; whose &lt;i&gt;&lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/i&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, then this
    is a &lt;a href=#dedicated-worker-environment&gt;dedicated worker environment&lt;/a&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, and this is a &lt;a href=#shared-worker-environment&gt;shared worker
    environment&lt;/a&gt;. (In either case, by definition, it is a &lt;a href=#worker-environment&gt;worker
@@ -81753,29 +81877,18 @@
 
    &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
-    &lt;p&gt;A new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is now created, as follows.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Create a new &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; set up as appropriate for the
-    scripting language &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Obtain the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for the scripting language
+    &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/p&gt;
 
     &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;a href=#script-execution-environment&gt;script execution
     environment&lt;/a&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
     &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt; to UTF-8. (This is just used for
-    encoding non-ASCII characters in the query component of URLs.)&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -81821,8 +81934,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;strong&gt;&lt;a href=#event-loop&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/a&gt;&lt;/strong&gt;: Create a new &lt;a href=#event-loop&gt;event
-    loop&lt;/a&gt;, and run it until it is destroyed.&lt;/p&gt;
+    &lt;p&gt;&lt;strong&gt;&lt;a href=#event-loop&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/a&gt;&lt;/strong&gt;: Run the &lt;a href=#responsible-event-loop&gt;responsible
+    event loop&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; until it is destroyed.&lt;/p&gt;
 
     &lt;p class=note&gt;The handling of events or the execution of callbacks by &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; run by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; might get prematurely
     aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms
@@ -81971,8 +82084,98 @@
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
 &lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-AbstractWorker-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;h5 id=script-settings-for-workers&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Script settings for workers&lt;/h5&gt;
 
+  &lt;p&gt;When the user agent is required to &lt;dfn id=set-up-a-worker-script-settings-object&gt;set up a worker script settings object&lt;/dfn&gt;, given a
+  &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;a href=#responsible-browsing-context&gt;responsible
+   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;inherited responsible document&lt;/var&gt; be the &lt;a href=#responsible-document&gt;responsible
+   document&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop&gt;event
+   loop&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be a new &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; whose
+    algorithms are defined as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;The &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environments&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;When the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; is created, for each language supported by the
+      user agent, create an appropriate execution environment as defined by the relevant
+      specification.&lt;/p&gt;
+
+      &lt;p&gt;When a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; is needed, return the appropriate one from
+      those created when the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; was created.&lt;/p&gt;
+
+      &lt;p class=note&gt;Currently, workers only support JavaScript, so only a JavaScript execution
+      environment is actually needed here.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+      associated.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return UTF-8.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
   &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-worker-terminate title=dom-Worker-terminate&gt;terminate&lt;/a&gt;();
@@ -82027,17 +82230,21 @@
    the request violates a policy decision (e.g. if the user agent is configured to not allow the
    page to start dedicated workers).&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-   relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, when
-   the method is invoked.&lt;/li&gt;
+   relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; when
+   the method was invoked.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt; be the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; component of the resulting &lt;a href=#parsed-url&gt;parsed
-    URL&lt;/a&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-    resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
     origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
@@ -82052,16 +82259,22 @@
    origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt; be this new object.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#set-up-a-worker-script-settings-object&gt;Set up a worker script settings object&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;worker global
+   scope&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object, associated with &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
    this be the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker
-   global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;
+   Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;.&lt;/li&gt;
@@ -82079,8 +82292,9 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the
+    add&lt;/a&gt; given the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
     &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82095,25 +82309,24 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker),
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker),
     add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of
-    the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
-    object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+    the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, with the
-    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the
-    &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, with the
-    &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;,
-    and with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;worker
+    URL&lt;/var&gt;, the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;, and the
+    &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner
+    origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82160,7 +82373,7 @@
    &lt;li&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the
+    add&lt;/a&gt; given the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
     &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82172,7 +82385,9 @@
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object, which will shortly be associated with a
      &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object. Let this &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object be &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+     is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
      this be the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Assign &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; to the &lt;code title=dom-SharedWorker-port&gt;&lt;a href=#dom-sharedworker-port&gt;port&lt;/a&gt;&lt;/code&gt; attribute of &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
@@ -82217,8 +82432,13 @@
        &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
        scope&lt;/var&gt;.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let this be the &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;
+       whose &lt;a href=#global-object&gt;global object&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
+       &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+       is &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;. Let this be the &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+
        &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;
        and &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
 
@@ -82241,11 +82461,12 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-        script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+        script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global
         scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
-        &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
-        object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+        &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global
+        object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
        &lt;/li&gt;
 
@@ -82253,17 +82474,23 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
+     &lt;!-- OTHERWISE: --&gt;
+
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#worker-origin&gt;worker
      origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global
      scope&lt;/var&gt; be this new object.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&lt;a href=#set-up-a-worker-script-settings-object&gt;Set up a worker script settings object&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;worker global
+     scope&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
      scope&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-SharedWorkerGlobalScope-name&gt;&lt;a href=#dom-sharedworkerglobalscope-name&gt;name&lt;/a&gt;&lt;/code&gt; attribute of &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker
-     global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.
+     Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;inside
      port&lt;/var&gt;.&lt;/li&gt;
@@ -82291,21 +82518,18 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; that invoked the constructor is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
-    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
-    object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
+    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global
+    object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, with the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-    context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; the
-    &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, with the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
-    script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with &lt;var title=&quot;&quot;&gt;worker global
-    scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -82336,15 +82560,19 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there are no arguments, return without doing anything. Abort these steps.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the
+   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; each argument.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; each resource identified by the resulting &lt;a href=#absolute-url title=&quot;absolute URL&quot;&gt;absolute URLs&lt;/a&gt;, from the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
-    &lt;a href=#origin&gt;origin&lt;/a&gt;, using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's referrer
-    source&quot;&gt;referrer source&lt;/a&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
+    &lt;a href=#origin&gt;origin&lt;/a&gt;, using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
     http-origin privacy sensitive --&gt;
 
    &lt;/li&gt;
@@ -82373,14 +82601,13 @@
 
      &lt;li&gt;
 
-      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
-      &lt;a href=#url&gt;URL&lt;/a&gt; from which &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; was obtained, and &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, using the same global object, browsing
-      context, document, referrer source, URL character encoding, and base URL as the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that was created by the worker's &lt;a href=#run-a-worker&gt;run a
-      worker&lt;/a&gt; algorithm.&lt;/p&gt;
+      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt; using &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
+      &lt;a href=#url&gt;URL&lt;/a&gt; from which &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; was obtained, &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, and &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; as
+      the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
       &lt;p&gt;If the script came from a resource whose &lt;a href=#url&gt;URL&lt;/a&gt; does not have the &lt;a href=#same-origin&gt;same
       origin&lt;/a&gt; as the &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted
-      errors&lt;/var&gt; flag to the &lt;a href=#create-a-script-from-a-node&gt;create a script from a node&lt;/a&gt; algorithm.&lt;/p&gt;
+      errors&lt;/var&gt; flag to the &lt;a href=#create-a-script&gt;create a script&lt;/a&gt; algorithm as well.&lt;/p&gt;
 
       &lt;p&gt;Let the newly created &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; run until it either
       returns, fails to parse, fails to catch an exception, or gets prematurely aborted by the
@@ -94972,7 +95199,7 @@
    &lt;li&gt;None of the elements in the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; are in any of the following namespaces: &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;, &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;
    &lt;li&gt;The &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no &lt;a href=#focusable&gt;focusable&lt;/a&gt; elements (e.g. from XLink).
    &lt;li&gt;The &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no &lt;a href=#hyperlink title=hyperlink&gt;hyperlinks&lt;/a&gt; (e.g. from XLink).
-   &lt;li&gt;There exists no &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; whose &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt; is this &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.
+   &lt;li&gt;There exists no &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; whose &lt;a href=#settings-object&gt;settings object&lt;/a&gt; specifies this &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; as the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;.
    &lt;li&gt;None of the elements in the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; have any registered event listeners.
   &lt;/ul&gt;&lt;p&gt;&lt;dfn id=an-unstyled-document-view&gt;An unstyled document view&lt;/dfn&gt; is one where the DOM is not rendered according to CSS
   (which would, since there are no applicable styles in this context, just result in a wall of

Modified: index
===================================================================
--- index	2013-10-28 21:49:17 UTC (rev 8246)
+++ index	2013-10-30 23:18:04 UTC (rev 8247)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 28 October 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 30 October 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -1010,13 +1010,14 @@
      &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.1.3 &lt;/span&gt;Processing model&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;7.1.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#script-settings-for-browsing-contexts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Script settings for browsing contexts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.6 &lt;/span&gt;Runtime script errors&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.5.1 &lt;/span&gt;Runtime script errors in documents&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.5.2 &lt;/span&gt;The &lt;code&gt;ErrorEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.6.1 &lt;/span&gt;Runtime script errors in documents&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;ErrorEvent&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;7.1.4 &lt;/span&gt;Event loops&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
@@ -1174,8 +1175,9 @@
      &lt;li&gt;&lt;a href=#creating-workers&gt;&lt;span class=secno&gt;10.2.6 &lt;/span&gt;Creating workers&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#the-abstractworker-abstract-interface&gt;&lt;span class=secno&gt;10.2.6.1 &lt;/span&gt;The &lt;code&gt;AbstractWorker&lt;/code&gt; abstract interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-settings-for-workers&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Script settings for workers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;SharedWorker&lt;/code&gt; interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#apis-available-to-workers&gt;&lt;span class=secno&gt;10.3 &lt;/span&gt;APIs available to workers&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#importing-scripts-and-libraries&gt;&lt;span class=secno&gt;10.3.1 &lt;/span&gt;Importing scripts and libraries&lt;/a&gt;&lt;/li&gt;
@@ -6681,7 +6683,8 @@
 
      &lt;dt&gt;If the URL came from a script (e.g. as an argument to a method)&lt;/dt&gt;
 
-     &lt;dd&gt;The URL character encoding is the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;.&lt;/dd&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;dd&gt;The URL character encoding is the &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;If the URL came from a DOM node (e.g. from an element)&lt;/dt&gt;
 
@@ -8387,10 +8390,12 @@
   their user interface. This is the primary mechanism by which a user can tell if a site is
   attempting to impersonate another.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created by a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; using
   the &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-DOMImplementation-createHTMLDocument&gt;&lt;a href=#dom-domimplementation-createhtmldocument&gt;createHTMLDocument()&lt;/a&gt;&lt;/code&gt; APIs, &lt;a href=&quot;#the-document's-address&quot;&gt;the
-  document's address&lt;/a&gt; is the same as &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; of the &lt;a href=&quot;#script's-document&quot;&gt;script's
-  document&lt;/a&gt;, and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is both &lt;a href=#ready-for-post-load-tasks&gt;ready for post-load tasks&lt;/a&gt; and
+  document's address&lt;/a&gt; is the same as &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible
+  document&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt;, and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is both &lt;a href=#ready-for-post-load-tasks&gt;ready for post-load tasks&lt;/a&gt; and
   &lt;a href=#completely-loaded&gt;completely loaded&lt;/a&gt; immediately.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn id=&quot;the-document's-referrer&quot;&gt;The document's referrer&lt;/dfn&gt; is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that can be set when the
@@ -8820,6 +8825,8 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;&lt;!-- multiple paragraphs --&gt;
+
   &lt;!-- these all return the same object each time because of a rule in
   the collection section --&gt;
 
@@ -9086,8 +9093,10 @@
 --&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;&lt;a href=#xmldocument&gt;XMLDocument&lt;/a&gt;&lt;/code&gt; object on which the
    method was invoked.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the method's first argument, relative to the
-   &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;. If this is not
+   &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the
+   &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;. If this is not
    successful, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is not the same as the
@@ -9112,9 +9121,10 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;success&lt;/var&gt; be false.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt;&lt;!--FETCH--&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; from the &lt;a href=#origin&gt;origin&lt;/a&gt; of
-   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's
-   referrer source&quot;&gt;referrer source&lt;/a&gt;, with the &lt;i title=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i title=&quot;&quot;&gt;force same-origin flag&lt;/i&gt; set.&lt;/li&gt;
+   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, with the &lt;i title=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i title=&quot;&quot;&gt;force same-origin flag&lt;/i&gt; set.&lt;/li&gt;
 
    &lt;li&gt;
 
@@ -51847,29 +51857,33 @@
 
        &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;old script element&lt;/var&gt; be the value to which the
-        &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object was most recently
+        &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object was most recently
         initialized.&lt;/p&gt;
 
        &lt;/li&gt;
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt;
         element.&lt;/p&gt;
 
        &lt;/li&gt;
 
        &lt;li&gt;
 
-        &lt;p&gt;&lt;a href=#create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;Create a script&lt;/a&gt; from the
-        &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element node, using &lt;var&gt;&lt;a href=&quot;#the-script-block's-source&quot;&gt;the script block's source&lt;/a&gt;&lt;/var&gt;, the
-        &lt;a href=#url&gt;URL&lt;/a&gt; from which the script was obtained, and &lt;var&gt;&lt;a href=&quot;#the-script-block's-type&quot;&gt;the script block's
-        type&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var&gt;&lt;a href=&quot;#the-script-block's-source&quot;&gt;the script block's source&lt;/a&gt;&lt;/var&gt;, the
+        &lt;a href=#url&gt;URL&lt;/a&gt; from which the script was obtained, &lt;var&gt;&lt;a href=&quot;#the-script-block's-type&quot;&gt;the script block's
+        type&lt;/a&gt;&lt;/var&gt; as the scripting language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's
+        &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;If the script came from a resource that was &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; in the
-        steps above, and the resource was &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;a href=#create-a-script-from-a-node&gt;create a script from a node&lt;/a&gt;
-        algorithm.&lt;/p&gt;
+        steps above, and the resource was &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;a href=#create-a-script&gt;create a script&lt;/a&gt;
+        algorithm as well.&lt;/p&gt;
 
         &lt;p class=note&gt;This is where the script is compiled and actually executed.&lt;/p&gt;
 
@@ -51877,7 +51891,8 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; element's &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to &lt;var title=&quot;&quot;&gt;old script
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-document-currentScript&gt;&lt;a href=#dom-document-currentscript&gt;currentScript&lt;/a&gt;&lt;/code&gt; object to &lt;var title=&quot;&quot;&gt;old script
         element&lt;/var&gt;.&lt;/p&gt;
 
        &lt;/li&gt;
@@ -64264,12 +64279,14 @@
   present, and as if all the properties of that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object had their [[Enumerable]]
   attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;a href=#effective-script-origin&gt;effective
   script origin&lt;/a&gt; that is not the same as the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; must be provided with a separate set
   of objects. These objects must have the prototype chain appropriate for the script for which the
-  objects are created (not those that would be appropriate for scripts whose &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
-  object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object in question).&lt;/p&gt;
+  objects are created (not those that would be appropriate for scripts whose &lt;a href=#global-object&gt;global
+  object&lt;/a&gt;, as specified by their &lt;a href=#settings-object&gt;settings object&lt;/a&gt;,
+  is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object in question).&lt;/p&gt;
 
   &lt;div class=example&gt;
 
@@ -64341,11 +64358,12 @@
 
   &lt;p&gt;The method has four arguments, though they are all optional.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, must be a &lt;a href=#valid-non-empty-url&gt;valid non-empty URL&lt;/a&gt; for a
   page to load in the browsing context. If the first argument is the empty string, then the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument must be interpreted as &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;. Otherwise, the
   argument must be &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolved&lt;/a&gt; to an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; (or
-  an error), relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-  URL&lt;/a&gt;, when the method is invoked.&lt;/p&gt;
+  an error), relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings 
+  object&lt;/a&gt; when the method was invoked.&lt;/p&gt;
 
   &lt;p&gt;The second argument, &lt;var title=&quot;&quot;&gt;target&lt;/var&gt;, specifies the &lt;a href=#browsing-context-name title=&quot;browsing context
   name&quot;&gt;name&lt;/a&gt; of the browsing context that is to be navigated. It must be a &lt;a href=#valid-browsing-context-name-or-keyword&gt;valid
@@ -64378,13 +64396,14 @@
   browsing context, then throw an &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort these
   steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is not &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, the user agent must
   &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV window.open()--&gt; the selected &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to the
   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; obtained from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier. If the &lt;var title=&quot;&quot;&gt;replace&lt;/var&gt; is true or if the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; was just created as part of &lt;a href=#the-rules-for-choosing-a-browsing-context-given-a-browsing-context-name&gt;the rules for choosing a browsing context given a
   browsing context name&lt;/a&gt;, then &lt;a href=#replacement-enabled title=&quot;replacement enabled&quot;&gt;replacement must be
-  enabled&lt;/a&gt;. The navigation must be done with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing
-  context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source browsing
+  enabled&lt;/a&gt;. The navigation must be done with the &lt;a href=#responsible-browsing-context&gt;responsible
+  browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source browsing
   context&lt;/a&gt;. If the &lt;a href=#resolve-a-url&gt;resolve a URL&lt;/a&gt; algorithm failed, then the user agent may either
   instead &lt;a href=#navigate&gt;navigate&lt;/a&gt; to an inline error page, using the same replacement behavior and
   source browsing context behavior as described earlier in this paragraph; or treat the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, acting as described in the next paragraph.&lt;/p&gt;
@@ -64415,11 +64434,15 @@
   &lt;ul class=brief&gt;&lt;li&gt;The corresponding &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is
    &lt;a href=#script-closable&gt;script-closable&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-   script&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+   script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar
+   with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li id=sandboxClose&gt;The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the
-   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; is &lt;a href=#allowed-to-navigate&gt;allowed to navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
+&lt;!--CLEANUP--&gt;
+   &lt;li id=sandboxClose&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the
+   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   is &lt;a href=#allowed-to-navigate&gt;allowed to navigate&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
    context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ul&gt;&lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is &lt;dfn id=script-closable&gt;script-closable&lt;/dfn&gt; if it is an &lt;a href=#auxiliary-browsing-context&gt;auxiliary
@@ -64462,13 +64485,15 @@
 
   &lt;/dl&gt;&lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=dom-length title=dom-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; IDL attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
   interface must return the number of &lt;a href=#child-browsing-context title=&quot;child browsing context&quot;&gt;child browsing
   contexts&lt;/a&gt; that are &lt;a href=#browsing-context-nested-through title=&quot;browsing context nested through&quot;&gt;nested through&lt;/a&gt;
   elements that are &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in the &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; that is the
   &lt;a href=#active-document&gt;active document&lt;/a&gt; of that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, if that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; shares the same &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's
-  browsing context&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; accessing the IDL attribute; otherwise,
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; shares the same &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=#responsible-document&gt;responsible
+  document&lt;/a&gt; specified by the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
+  &lt;a href=#entry-script&gt;entry script&lt;/a&gt; accessing the IDL attribute; otherwise,
   it must return zero.&lt;/p&gt;
 
   &lt;!-- in other words, frames are only accessible to same-thread processes --&gt;
@@ -64585,8 +64610,10 @@
   objects have &lt;a href=#implied-strong-reference title=&quot;implied strong reference&quot;&gt;implied strong references&lt;/a&gt; to the
   &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; and its &lt;a href=&quot;#script's-document&quot; title=&quot;script's
-  document&quot;&gt;document&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Each &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; has a strong reference to its &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt;, and each &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;
+  has strong references to its &lt;a href=#global-object&gt;global object&lt;/a&gt;, &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;, and &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;.&lt;/p&gt;
 
   &lt;!-- discard a document --&gt;
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -65921,8 +65948,9 @@
 
     &lt;p&gt;If the third argument is not null, run these substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the third argument, relative to the
-     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;.&lt;/li&gt;
+    &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the third argument, relative to the
+     &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the
+     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
      &lt;li&gt;If that fails, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
@@ -65932,9 +65960,10 @@
      &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt;, and &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt; components, then throw a
      &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
      &lt;li&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the same as
-     the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's
-     document&quot;&gt;document&lt;/a&gt;, and either the &lt;a href=#concept-url-path title=concept-url-path&gt;path&lt;/a&gt; or &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; components of the two &lt;a href=#parsed-url title=&quot;parsed URL&quot;&gt;parsed
+     the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+     &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and either the &lt;a href=#concept-url-path title=concept-url-path&gt;path&lt;/a&gt; or &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; components of the two &lt;a href=#parsed-url title=&quot;parsed URL&quot;&gt;parsed
      URLs&lt;/a&gt; compared in the previous step differ, throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception
      and abort these steps. (This prevents sandboxed content from spoofing other pages on the same
      origin.)&lt;/li&gt;
@@ -66189,9 +66218,10 @@
   &lt;p&gt;The &lt;i&gt;relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;&lt;/i&gt; is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's associated
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn id=dom-location-assign title=dom-location-assign&gt;&lt;code&gt;assign(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the argument, relative
-  to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, and if that is
+  to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and if that is
   successful, must &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV location.href/assign--&gt; the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;. If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
   &lt;a href=#session-history&gt;session history&lt;/a&gt; contains only one &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, and that was the
@@ -66201,14 +66231,16 @@
   Safari doesn't check that. Thus this might need changing if testing shows the IE/Firefox behaviour
   is required here. --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn id=dom-location-replace title=dom-location-replace&gt;&lt;code&gt;replace(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the argument, relative
-  to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, and if that is
+  to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, and if that is
   successful, &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV location.href/replace--&gt; the &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; to the specified &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Navigation for the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods must be done with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's
-  browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Navigation for the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods must be done with the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by
+  the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source
   browsing context&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; step of the &lt;code title=dom-location-assign&gt;&lt;a href=#dom-location-assign&gt;assign()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; methods is not successful, then the user agent must
@@ -66272,9 +66304,10 @@
   input&lt;/a&gt; algorithm with &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the address&lt;/a&gt; of the
   &lt;i&gt;relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;&lt;/i&gt; as the given value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The element's &lt;code&gt;&lt;a href=#urlutils&gt;URLUtils&lt;/a&gt;&lt;/code&gt; interface's &lt;a href=#concept-uu-get-the-base title=concept-uu-get-the-base&gt;get the
-  base&lt;/a&gt; algorithm must return the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base
-  URL&quot;&gt;base URL&lt;/a&gt;, if there is one, or null otherwise.&lt;/p&gt;
+  base&lt;/a&gt; algorithm must return the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, if there is one, or null otherwise.&lt;/p&gt;
 
   &lt;p&gt;The element's &lt;code&gt;&lt;a href=#urlutils&gt;URLUtils&lt;/a&gt;&lt;/code&gt; interface's &lt;a href=#concept-uu-query-encoding title=concept-uu-query-encoding&gt;query
   encoding&lt;/a&gt; is the &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt;.&lt;/p&gt;
@@ -66326,12 +66359,15 @@
   context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt;, with the
   following exceptions:&lt;/p&gt;
 
-  &lt;ul&gt;&lt;li&gt;The &lt;code title=dom-url-href&gt;&lt;a href=#dom-url-href&gt;href&lt;/a&gt;&lt;/code&gt; setter, if the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
-   &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
+  &lt;ul&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;The &lt;code title=dom-url-href&gt;&lt;a href=#dom-url-href&gt;href&lt;/a&gt;&lt;/code&gt; setter, if the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;
+   specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the &lt;a href=#browsing-context&gt;browsing
    context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object is associated
 
-   &lt;li&gt;The &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; method, if the &lt;a href=#entry-script&gt;entry
-   script&lt;/a&gt;'s &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;code title=dom-location-replace&gt;&lt;a href=#dom-location-replace&gt;replace()&lt;/a&gt;&lt;/code&gt; method, if the &lt;a href=#responsible-browsing-context&gt;responsible
+   browsing context&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
+   &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is &lt;a href=#familiar-with&gt;familiar with&lt;/a&gt; the
    &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object is associated
 
    &lt;li&gt;Any properties not defined in the IDL for the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object or indirectly via
@@ -66345,12 +66381,13 @@
   properties, getters, setters, etc, were not present, and as if all the properties of that
   &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object had their [[Enumerable]] attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;a href=#effective-script-origin&gt;effective
   script origin&lt;/a&gt; that is not the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;
   object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; must be provided with a
   separate set of objects. These objects must have the prototype chain appropriate for the script
   for which the objects are created (not those that would be appropriate for scripts whose
-  &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt; specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is the &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s
   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object).&lt;/p&gt;
 
   &lt;/div&gt;
@@ -67757,7 +67794,7 @@
 
   &lt;ol&gt;&lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#make-disappear&gt;Make disappear&lt;/a&gt; any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor whose global object is the
+    &lt;p&gt;&lt;a href=#make-disappear&gt;Make disappear&lt;/a&gt; any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects that were created by the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor from the
     &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
     &lt;p&gt;If this affected any &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects, then set &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;i title=concept-document-salvageable&gt;&lt;a href=#concept-document-salvageable&gt;salvageable&lt;/a&gt;&lt;/i&gt; state to false.&lt;/p&gt;
@@ -69915,27 +69952,28 @@
     information).&lt;/p&gt;
 
    &lt;/dd&gt;
-&lt;!--
-   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
+   &lt;dt&gt;A &lt;dfn id=settings-object&gt;settings object&lt;/dfn&gt;&lt;/dt&gt;
+
    &lt;dd&gt;
 
-    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
-    scripts.&lt;/p&gt;
+    &lt;p&gt;A &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;, various settings that are shared with other scripts in
+    the same context.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;
+   &lt;dt&gt;An &lt;dfn title=&quot;&quot;&gt;owner&lt;/dfn&gt;, &lt;dfn title=&quot;&quot;&gt;origin&lt;/dfn&gt;, and &lt;dfn title=&quot;&quot;&gt;effective origin&lt;/dfn&gt;&lt;/dt&gt;
 
-  &lt;hr&gt;
+   &lt;dd&gt;
 
-  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
-  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+    &lt;p&gt;There are defined in the &lt;a href=#origin&gt;origin&lt;/a&gt; section.&lt;/p&gt;
 
-  &lt;dl&gt;
---&gt;
-   &lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;/dd&gt;
 
+  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;A &lt;dfn id=script-settings-object&gt;script settings object&lt;/dfn&gt; specifies algorithms for obtaining the following:&lt;/p&gt;
+
+  &lt;dl&gt;&lt;dt&gt;A &lt;dfn id=script-execution-environment&gt;script execution environment&lt;/dfn&gt; for each language supported by the user agent&lt;/dt&gt;
+
    &lt;dd&gt;
 
     &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
@@ -69947,19 +69985,18 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-global-object&quot;&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
-
+   &lt;dt&gt;A &lt;dfn id=global-object&gt;global object&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;An object that provides the APIs that the code can use.&lt;/p&gt;
+    &lt;p&gt;An object that provides the APIs that can be called by the code in scripts that use this
+    &lt;a href=#script-settings-object title=&quot;script settings object&quot;&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p class=example&gt;This is typically a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. In JavaScript, this
-    corresponds to the &lt;i&gt;global object&lt;/i&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;This is typically a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or a
+    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object. When a &lt;a href=#global-object&gt;global object&lt;/a&gt; is an empty object, it
+    can't do anything that interacts with the environment.&lt;/p&gt;
 
-    &lt;p class=note&gt;When a &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is an empty object, it can't do
-    anything that interacts with the environment.&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, then in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, then, in
     JavaScript, the ThisBinding of the global execution context for this script must be the
     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, rather than the global object. &lt;a href=#refsECMA262&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
 
@@ -69970,70 +70007,148 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-browsing-context&quot;&gt;script's browsing context&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-browsing-context&gt;responsible browsing context&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that is assigned responsibility for actions taken by the
-    script.&lt;/p&gt;
+    scripts that use this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p class=example&gt;When a script creates and &lt;a href=#navigate title=navigate&gt;navigates&lt;/a&gt; a new
-    &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;, the &lt;code title=dom-opener&gt;&lt;a href=#dom-opener&gt;opener&lt;/a&gt;&lt;/code&gt; attribute of
-    the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
-    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+    &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;, the &lt;code title=dom-opener&gt;&lt;a href=#dom-opener&gt;opener&lt;/a&gt;&lt;/code&gt; attribute
+    of the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object will be set to the
+    &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn id=&quot;script's-document&quot;&gt;script's document&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-document&gt;responsible document&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the script.&lt;/p&gt;
+    &lt;p&gt;A &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is assigned responsibility for actions taken by the scripts that
+    use this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=example&gt;For example, the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
-    &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; is used to set the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
-    address&quot;&gt;address&lt;/a&gt; of any &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; elements created using &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+    &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; is used to set the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+    address&quot;&gt;address&lt;/a&gt; of any &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s created using &lt;code title=dom-DOMImplementation-createDocument&gt;&lt;a href=#dom-domimplementation-createdocument&gt;createDocument()&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;dfn id=&quot;script's-referrer-source&quot;&gt;script's referrer source&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn id=responsible-event-loop&gt;responsible event loop&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Either a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;), or a
+    &lt;p&gt;An &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;An &lt;dfn id=api-referrer-source&gt;API referrer source&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Either a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; (specifically, the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;), or a
     &lt;a href=#url&gt;URL&lt;/a&gt;, which is used by some APIs to determine what value to use for the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic) header in calls to the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=&quot;script's-url-character-encoding&quot; title=&quot;script's URL character encoding&quot;&gt;URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn id=api-url-character-encoding&gt;API URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A character encoding, set when the script is created, used to encode URLs. &lt;span id=sce-not-copy title=&quot;&quot;&gt;If the character encoding is set from another source, e.g. a
-    &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt;, then the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character
-    encoding&lt;/a&gt; must follow the source, so that if the source's changes, so does the
-    script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use
+    this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn id=&quot;script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn id=api-base-url&gt;API base URL&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt;, set when the script is created, used to resolve &lt;a href=#relative-url title=&quot;relative
-    URL&quot;&gt;relative URLs&lt;/a&gt;. &lt;span id=sbu-not-copy title=&quot;&quot;&gt;If the base URL is set from another
-    source, e.g. a &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt;, then the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; must
-    follow the source, so that if the source's changes, so does the script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;An &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; used by APIs called by scripts that use
+    this &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; to resolve &lt;a href=#relative-url title=&quot;relative
+    URL&quot;&gt;relative URLs&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;/div&gt;
+  &lt;/dl&gt;&lt;h5 id=script-settings-for-browsing-contexts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Script settings for browsing contexts&lt;/h5&gt;
 
+  &lt;p&gt;Whenever a new &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is created, it must also create a &lt;a href=#script-settings-object&gt;script
+  settings object&lt;/a&gt; whose algorithms are defined as follows:&lt;/p&gt;
 
-  &lt;div class=impl&gt;
+  &lt;dl&gt;&lt;dt&gt;The &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environments&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
 
-  &lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;7.1.3.2 &lt;/span&gt;Calling scripts&lt;/h5&gt;
+    &lt;p&gt;When the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; is created, for each language supported by the
+    user agent, create an appropriate execution environment as defined by the relevant
+    specification.&lt;/p&gt;
 
+    &lt;p&gt;When a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; is needed, return the appropriate one from
+    those created when the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; was created.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object itself.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is associated with the &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related
+    similar-origin browsing contexts&lt;/a&gt; to which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing
+    context&lt;/a&gt; belongs.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of
+    the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of the
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Calling scripts&lt;/h5&gt;
+
   &lt;p&gt;Each &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; has a &lt;dfn id=stack-of-incumbent-scripts&gt;stack of
   incumbent scripts&lt;/dfn&gt;, which must be initially empty. When a new script is &lt;i&gt;pushed&lt;/i&gt; onto
   this stack, the specified script is to be added to the stack; when the script on this stack that
@@ -70048,8 +70163,10 @@
    new incumbent &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; and the owner &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If this returns &quot;do not run&quot; then abort these
    steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Make the &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environment&lt;/a&gt;
-   for &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Make the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt;
+   specified by &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt; execute the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code
    entry-point&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#clean-up-after-running-a-callback&gt;Clean up after running a callback&lt;/a&gt;.&lt;/li&gt;
@@ -70059,11 +70176,12 @@
   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, and return either &quot;run&quot; or &quot;do
   not run&quot;.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
    is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object is not &lt;a href=#fully-active&gt;fully
    active&lt;/a&gt;, then return &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt;, then return
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt; for the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;, then return
    &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Push &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; onto the &lt;a href=#stack-of-incumbent-scripts&gt;stack of incumbent scripts&lt;/a&gt;, and label it
@@ -70102,7 +70220,7 @@
   &lt;p&gt;The &lt;dfn id=entry-script&gt;entry script&lt;/dfn&gt; is the most-recently added &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; in the &lt;a href=#stack-of-incumbent-scripts&gt;stack of incumbent scripts&lt;/a&gt; that is
   labeled as a &lt;a href=#candidate-entry-scripts title=&quot;candidate entry scripts&quot;&gt;candidate entry script&lt;/a&gt;. If the stack is
   empty, or has no entries labeled as such, then there is no &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. It is used
-  to obtain, amongst other things, the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; to &lt;a href=#resolve-a-url title=&quot;resolve a
+  to obtain, amongst other things, the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; to &lt;a href=#resolve-a-url title=&quot;resolve a
   url&quot;&gt;resolve&lt;/a&gt; relative &lt;a href=#url title=URL&gt;URLs&lt;/a&gt; used in scripts running in that
   &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt;.&lt;/p&gt;
 
@@ -70134,12 +70252,11 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;7.1.3.3 &lt;/span&gt;Creating scripts&lt;/h5&gt;
+  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Creating scripts&lt;/h5&gt;
 
   &lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script title=&quot;create a script&quot;&gt;created&lt;/dfn&gt;, given some script source, a script source URL, its
-  scripting language, a global object, a browsing context, a document, a referrer source, a URL
-  character encoding, a base URL, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag, the user
-  agent must run the following steps:&lt;/p&gt;
+  scripting language, a &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;, and optionally a &lt;var title=&quot;&quot;&gt;muted
+  errors&lt;/var&gt; flag, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that
    this algorithm will subsequently initialize.&lt;/li&gt;
@@ -70148,16 +70265,14 @@
    context&lt;/a&gt; passed to this algorithm, then abort these steps, as if the script source
    described a program that did nothing but return void.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; as appropriate for the given scripting
-   language.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Obtain the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for the given scripting
+   language from the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; provided.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the &lt;a href=#script-execution-environment&gt;script execution
    environment&lt;/a&gt;, as appropriate for the scripting language, and thus obtain &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-   context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt;,
-   the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from the
-   settings passed to this algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be the &lt;a href=#script-settings-object&gt;script
+   settings object&lt;/a&gt; provided.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#muted-errors&gt;muted errors&lt;/a&gt; flag.&lt;/li&gt;
 
@@ -70167,45 +70282,20 @@
     &lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#code-entry-point&gt;code
     entry-point&lt;/a&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;, with the problematic
-    position (line number and column number), using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as the
+    position (line number and column number), using the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; as the
     target. If the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this,
     then the error may be reported to the user.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;created from a node&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, given some
-  script source, its URL, its scripting language, and optionally a &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt;
-  flag, the user agent must &lt;a href=#create-a-script&gt;create a script&lt;/a&gt;, using the given script source, URL, and
-  scripting language, &lt;a href=#the-script-settings-determined-from-the-node&gt;the script settings determined from the node&lt;/a&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, and, if the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set in the call to this
-  algorithm, the &lt;var title=&quot;&quot;&gt;muted errors&lt;/var&gt; flag.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn id=the-script-settings-determined-from-the-node&gt;The script settings determined from the node&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; are computed
-  as follows:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;
-   (or &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; itself if it is a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The browsing context is the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The document is &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The referrer source is &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The URL character encoding is the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character
-   encoding&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=#sce-not-copy&gt;This is a reference,
-   not a copy&lt;/a&gt;.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The base URL is the &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=#sbu-not-copy&gt;This is a reference, not a copy&lt;/a&gt;.)&lt;/li&gt;
-
   &lt;/ol&gt;&lt;/div&gt;
 
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;7.1.3.4 &lt;/span&gt;Killing scripts&lt;/h5&gt;
+  &lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Killing scripts&lt;/h5&gt;
 
   &lt;p&gt;User agents may impose resource limitations on scripts, for example CPU quotas, memory limits,
   total execution time limits, or bandwidth limitations. When a script exceeds a limit, the user
@@ -70241,7 +70331,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.5 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
+  &lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;7.1.3.6 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
 
   &lt;p&gt;When the user agent is required to &lt;dfn id=report-the-error title=&quot;report the error&quot;&gt;report an error&lt;/dfn&gt; for a
   particular &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; with a particular
@@ -70314,11 +70404,12 @@
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; was canceled, then the error is &lt;i title=concept-error-handled&gt;&lt;a href=#concept-error-handled&gt;handled&lt;/a&gt;&lt;/i&gt;. Otherwise, the error is &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
 
-  &lt;/ol&gt;&lt;h6 id=runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.5.1 &lt;/span&gt;Runtime script errors in documents&lt;/h6&gt;
+  &lt;/ol&gt;&lt;h6 id=runtime-script-errors-in-documents&gt;&lt;span class=secno&gt;7.1.3.6.1 &lt;/span&gt;Runtime script errors in documents&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the scripts associated with a
   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, the user agent must &lt;a href=#report-the-error&gt;report the error&lt;/a&gt; for the relevant &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, with the problematic position (line number and column
-  number) in the resource containing the script, using the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; as
+  number) in the resource containing the script, using the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as
   the target. If the error is still &lt;i title=concept-error-nothandled&gt;&lt;a href=#concept-error-nothandled&gt;not handled&lt;/a&gt;&lt;/i&gt; after this,
   then the error may be reported to the user.&lt;/p&gt;
 
@@ -70326,7 +70417,7 @@
 
 
 
-  &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.5.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
+  &lt;h6 id=the-errorevent-interface&gt;&lt;span class=secno&gt;7.1.3.6.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#errorevent&gt;ErrorEvent&lt;/a&gt;&lt;/code&gt; interface&lt;/h6&gt;
 
   &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#erroreventinit&gt;ErrorEventInit&lt;/a&gt; eventInitDict)]
 interface &lt;dfn id=errorevent&gt;ErrorEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
@@ -70437,7 +70528,7 @@
   the task was queued in the context of a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, then it is the
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt; at the time the task was queued; if
   the task was queued by or for a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; then the document is
-  the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;.&lt;/p&gt;
+  the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;A &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; is intended for a specific &lt;a href=#event-loop&gt;event loop&lt;/a&gt;:
   the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; that is handling &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; for the &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt;'s associated &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
@@ -70529,9 +70620,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;a href=#concept-mo-invoke title=concept-mo-invoke&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/a&gt; for the
-    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's
-    browsing context&lt;/a&gt; belongs, using the &lt;a href=#task-wrapper-algorithm&gt;task wrapper algorithm&lt;/a&gt; as the steps to
+    &lt;a href=#unit-of-related-similar-origin-browsing-contexts&gt;unit of related similar-origin browsing contexts&lt;/a&gt; to which the &lt;a href=#responsible-browsing-context&gt;responsible
+    browsing context&lt;/a&gt; specified by the script's &lt;a href=#settings-object&gt;settings object&lt;/a&gt; belongs, using the &lt;a href=#task-wrapper-algorithm&gt;task wrapper algorithm&lt;/a&gt; as the steps to
     invoke each callback.&lt;/p&gt;
 
     &lt;p class=note&gt;This will typically invoke scripted callbacks, which calls the &lt;a href=#jump-to-a-code-entry-point&gt;jump to a
@@ -70716,10 +70808,10 @@
       context&lt;/a&gt; being navigated has a &lt;a href=#creator-browsing-context&gt;creator browsing context&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
       &lt;a href=#creator-document&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;
 
-      &lt;p&gt;&lt;a href=#create-a-script-from-a-node title=&quot;create a script from a node&quot;&gt;Create a script&lt;/a&gt; from the
-      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; node of the &lt;a href=#active-document&gt;active document&lt;/a&gt;, using the aforementioned
-      script source, the &lt;a href=#url&gt;URL&lt;/a&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
-      was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
+      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using the aforementioned script source, the &lt;a href=#url&gt;URL&lt;/a&gt;
+      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
+      language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
+      &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
 
       &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
       of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
@@ -70846,8 +70938,12 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the corresponding &lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;event handler&lt;/a&gt; to null.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for JavaScript.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the
+   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object associated with the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to which belongs the
+   &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the element in question.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Obtain the &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for JavaScript from &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;body&lt;/var&gt; be the &lt;a href=#event-handler-content-attributes title=&quot;event handler content attributes&quot;&gt;event
    handler content attribute&lt;/a&gt;'s new value.&lt;/li&gt;
 
@@ -70890,7 +70986,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Using the script execution environment created above, create a function object (as defined in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;Using the &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; obtained above, create a function object (as defined in
     ECMAScript edition 5 section 13.2 Creating Function Objects), with:&lt;/p&gt;
 
     &lt;dl&gt;&lt;dt&gt;Parameter list &lt;var title=&quot;&quot;&gt;FormalParameterList&lt;/var&gt;&lt;/dt&gt;
@@ -70939,15 +71036,12 @@
 
      &lt;dd&gt;The value of &lt;var title=&quot;&quot;&gt;strict&lt;/var&gt;.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p&gt;Let this new function be the script's &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
+    &lt;/dl&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;Let this new function be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;, the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-   context&lt;/a&gt;, the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt;,
-   the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; from
-   &lt;a href=#the-script-settings-determined-from-the-node&gt;the script settings determined from the node&lt;/a&gt; on which the attribute is being
-   set.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let that &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be
+   &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set the corresponding &lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;event handler&lt;/a&gt; to the
    aforementioned function.&lt;/li&gt;
@@ -71745,15 +71839,22 @@
    &lt;li&gt;&lt;p&gt;Remove all child nodes of the document, without firing any mutation events.&lt;/li&gt; &lt;!--
    as of 2009-03-30, only WebKit fired mutation events here. --&gt;
 
-   &lt;li&gt;&lt;p&gt;Replace the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s singleton objects with new instances of those objects.
-   (This includes in particular the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, objects, the
-   various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects, the various
-   &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects, and objects defined by other specifications, like
-   &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
-   IDL prototypes in the JavaScript binding, including the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's
-   prototype.)&lt;/li&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Replace the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s singleton objects with new instances of those objects.
+    (This includes in particular the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;,
+    &lt;code&gt;&lt;a href=#history-0&gt;History&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, objects, the
+    various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; objects, the various
+    &lt;code&gt;&lt;a href=#htmlcollection&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects, and objects defined by other specifications, like
+    &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
+    IDL prototypes in the JavaScript binding, including the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object's
+    prototype.)&lt;/p&gt;
+
+    &lt;p class=note&gt;The new &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object has a new &lt;a href=#script-settings-object&gt;script settings
+    object&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%
 0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E --&gt;
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(</A>)%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E --&gt;
 
@@ -71765,8 +71866,10 @@
 
    &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;'s &lt;i title=concept-document-salvageable&gt;&lt;a href=#concept-document-salvageable&gt;salvageable&lt;/a&gt;&lt;/i&gt; state back to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Change &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt;'s &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
-   address&quot;&gt;address&lt;/a&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Change &lt;a href=&quot;#the-document's-address&quot;&gt;the document's address&lt;/a&gt; to the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+   address&quot;&gt;address&lt;/a&gt; of the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
+   the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
    &lt;!-- &lt;span&gt;the document's referrer&lt;/span&gt; stays the same --&gt;
 
@@ -72197,32 +72300,14 @@
 
          &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script language&lt;/var&gt; be JavaScript.&lt;/li&gt;
 
-         &lt;li&gt;
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt;'s
+         &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/li&gt;
 
-          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, let &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt;, let &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt; be the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; with which &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; is associated, let &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt; be the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt;, let &lt;var title=&quot;&quot;&gt;character encoding&lt;/var&gt; be the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;
-          associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=#sce-not-copy&gt;this is a
-          reference, not a copy&lt;/a&gt;), and let &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; associated with &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=#sbu-not-copy&gt;this is a reference, not a
-          copy&lt;/a&gt;).&lt;/p&gt;
+         &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-          &lt;p&gt;Otherwise, &lt;var title=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object;
-          let &lt;var title=&quot;&quot;&gt;global object&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;character
-          encoding&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;,
-          &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt;, &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's
-          referrer source&lt;/a&gt;, &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt;, and &lt;a href=&quot;#script's-base-url&quot;&gt;script's
-          base URL&lt;/a&gt; (respectively) of the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that the
-          &lt;a href=#run-a-worker&gt;run a worker&lt;/a&gt; algorithm created when it created &lt;var title=&quot;&quot;&gt;method
-          context&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
           &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt; using &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; as the script
-          source, the &lt;a href=#url&gt;URL&lt;/a&gt; where &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; can be found, &lt;var title=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, &lt;var title=&quot;&quot;&gt;global
-          object&lt;/var&gt; as the global object, &lt;var title=&quot;&quot;&gt;browsing context&lt;/var&gt; as the browsing
-          context, &lt;var title=&quot;&quot;&gt;document&lt;/var&gt; as the document, &lt;var title=&quot;&quot;&gt;referrer source&lt;/var&gt;
-          as the referrer source, &lt;var title=&quot;&quot;&gt;character encoding&lt;/var&gt; as the URL character
-          encoding, and &lt;var title=&quot;&quot;&gt;base URL&lt;/var&gt; as the base URL.&lt;/p&gt;
+          source, the &lt;a href=#url&gt;URL&lt;/a&gt; where &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; can be found, &lt;var title=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, and &lt;var title=&quot;&quot;&gt;settings
+          object&lt;/var&gt; as the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
          &lt;/li&gt;
 
@@ -72230,7 +72315,7 @@
 
       &lt;/dl&gt;&lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;repeat&lt;/var&gt; flag is true, then call &lt;a href=#timer-initialization-steps&gt;timer initialization
       steps&lt;/a&gt; again, passing them the same method arguments, the same &lt;var title=&quot;&quot;&gt;method
@@ -72569,7 +72654,8 @@
   &lt;ol&gt;&lt;li&gt;
 
     &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; relative to the
-    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;.&lt;/p&gt;
+    &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by
+    &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;If this fails, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 
@@ -72598,9 +72684,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;a href=#active-sandboxing-flag-set&gt;active sandboxing flag set&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the
-    &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; has its &lt;a href=#sandboxed-auxiliary-navigation-browsing-context-flag&gt;sandboxed auxiliary navigation browsing context flag&lt;/a&gt; set,
+    &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; has its &lt;a href=#sandboxed-auxiliary-navigation-browsing-context-flag&gt;sandboxed auxiliary navigation browsing context flag&lt;/a&gt; set,
     then return the empty string and abort these steps.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -72653,11 +72740,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Set all the flags in the new browsing context's &lt;a href=#popup-sandboxing-flag-set&gt;popup sandboxing flag set&lt;/a&gt; that
     are set in the &lt;a href=#active-sandboxing-flag-set&gt;active sandboxing flag set&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of
-    the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt;. The &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing
-    context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;
+    the &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;. The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
     must be set as the new browsing context's &lt;a href=#one-permitted-sandboxed-navigator&gt;one permitted sandboxed
     navigator&lt;/a&gt;.&lt;/p&gt;
 
@@ -72689,9 +72776,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;a href=#navigate&gt;Navigate&lt;/a&gt;&lt;!--DONAV showModalDialog--&gt; the new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to
     the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; that resulted from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt;
-    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;, and with the &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing context&quot;&gt;browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;
+    &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;a href=#replacement-enabled&gt;replacement enabled&lt;/a&gt;, and with the &lt;a href=#responsible-browsing-context&gt;responsible
+    browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
     as the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -73152,9 +73241,10 @@
     argument passed to one of these methods does not contain the exact literal string
     &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;User agents must throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception if &lt;a href=#resolve-a-url title=&quot;resolve a
-    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the &lt;a href=#entry-script&gt;entry
-    script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, is not successful.&lt;/p&gt;
+    url&quot;&gt;resolving&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the
+    &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is not successful.&lt;/p&gt;
 
     &lt;p class=note&gt;The resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; would by definition not be a &lt;a href=#valid-url&gt;valid
     URL&lt;/a&gt; as it would include the string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; which is not a valid
@@ -73170,10 +73260,12 @@
     &lt;p&gt;The resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is the &lt;dfn id=proto-url&gt;proto-URL&lt;/dfn&gt;. It identifies the
     handler for the purposes of the methods described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When the user agent uses this handler, it must replace the first occurrence of the exact
     literal string &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot; in the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument with an
     escaped version of the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; of the content in question (as defined below),
-    then &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the resulting URL, relative to the &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; at the time the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; methods were
+    then &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the resulting URL, relative to the &lt;a href=#api-base-url&gt;API
+    base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; at the time the &lt;code title=dom-navigator-registerContentHandler&gt;&lt;a href=#dom-navigator-registercontenthandler&gt;registerContentHandler()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-navigator-registerProtocolHandler&gt;&lt;a href=#dom-navigator-registerprotocolhandler&gt;registerProtocolHandler()&lt;/a&gt;&lt;/code&gt; methods were
     invoked, and then &lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;!--DONAV user--&gt; an appropriate &lt;a href=#browsing-context&gt;browsing
     context&lt;/a&gt; to the resulting URL using the GET method (&lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt; for non-HTTP URLs).&lt;/p&gt;
 
@@ -73381,7 +73473,9 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the string does not contain the substring &quot;&lt;code title=&quot;&quot;&gt;%s&lt;/code&gt;&quot;, abort these
    steps. There's no matching handler.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the string relative to the &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; the string relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;
+   specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception, aborting the
    method.&lt;/li&gt;
@@ -74008,9 +74102,9 @@
     never does anything, or may arbitrarily ignore invocations with particular arguments for
     security, privacy, or usability reasons.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the value of the method's first argument
-    relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-    URL&lt;/a&gt;.&lt;/li&gt;
+    relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, abort these steps.&lt;/li&gt;
 
@@ -74032,9 +74126,10 @@
     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host1&lt;/var&gt; be the host component of the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
     &lt;a href=#entry-script&gt;entry script&lt;/a&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-    relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-    URL&lt;/a&gt;.&lt;/li&gt;
+    relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;.&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, return 0 and abort these steps.&lt;/li&gt;
 
@@ -77969,9 +78064,9 @@
   settings, if any, in the form of an &lt;code&gt;&lt;a href=#eventsourceinit&gt;EventSourceInit&lt;/a&gt;&lt;/code&gt; dictionary. When the
   &lt;code&gt;EventSource()&lt;/code&gt; constructor is invoked, the UA must run these steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; specified in the first
-   argument, relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base
-   URL&lt;/a&gt;.
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; specified in the first
+   argument, relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the previous step failed, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort
@@ -77990,9 +78085,10 @@
 
    &lt;li&gt;&lt;!-- if you change this, don't forget to update the reconnecting fetch lower down as well! --&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Do a &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt;&lt;!--FETCH--&gt; of the resulting &lt;a href=#absolute-url&gt;absolute
-    URL&lt;/a&gt; using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's referrer source&quot;&gt;referrer
-    source&lt;/a&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var title=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt; being the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;&lt;!--, and the
+    URL&lt;/a&gt; using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var title=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i title=&quot;&quot;&gt;origin&lt;/i&gt; being the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#origin&gt;origin&lt;/a&gt;&lt;!--, and the
     &lt;i&gt;default origin behaviour&lt;/i&gt; set to &lt;i&gt;fail&lt;/i&gt; (though it has no effect in the &quot;Anonymous&quot;
     and &quot;Use Credentials&quot; modes)--&gt;, and process the resource obtained in this fashion, if any, as
     described below.&lt;/p&gt;
@@ -79609,7 +79705,7 @@
 
     &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;message clone&lt;/var&gt; be the result of obtaining a &lt;a href=#structured-clone&gt;structured
     clone&lt;/a&gt; of the &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; argument, with &lt;var title=&quot;&quot;&gt;transfer map&lt;/var&gt;
@@ -79623,14 +79719,14 @@
     &lt;p&gt;If the method was invoked with a third argument &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt;, run these
     substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
       invoked.&lt;/p&gt;
 
      &lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;For each object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;transfer&lt;/var&gt; in turn, obtain a new
       object &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; by &lt;a href=#transfer-a-transferable-object title=&quot;transfer a Transferable
@@ -79642,7 +79738,7 @@
 
     &lt;/ol&gt;&lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Make &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; into a &lt;a href=#dfn-read-only-array title=dfn-read-only-array&gt;read only&lt;/a&gt;
     array.&lt;/p&gt;
@@ -79658,9 +79754,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is a single literal U+002F SOLIDUS character
     (/), and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was
-    invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt;, then abort these steps silently.&lt;/p&gt;
+    invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+    object&lt;/a&gt;, then abort these steps silently.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;,
     and the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked
@@ -79674,12 +79772,16 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event that uses the
     &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface, with the event type &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is not cancelable, and has no
     default action. The &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute must be
     initialized to the value of &lt;var title=&quot;&quot;&gt;message clone&lt;/var&gt;, the &lt;code title=dom-MessageEvent-origin&gt;&lt;a href=#dom-messageevent-origin&gt;origin&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an origin&quot;&gt;Unicode serialization&lt;/a&gt; of the
     &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, the &lt;code title=dom-MessageEvent-source&gt;&lt;a href=#dom-messageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the
-    &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, and the &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; array.
+    &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object corresponding to the
+    &lt;a href=#global-object&gt;global object&lt;/a&gt; (a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object) specified by the
+    &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;,
+    and the &lt;code title=dom-MessageEvent-ports&gt;&lt;a href=#dom-messageevent-ports&gt;ports&lt;/a&gt;&lt;/code&gt; attribute must be initialized to the &lt;var title=&quot;&quot;&gt;new ports&lt;/var&gt; array.
     &lt;/p&gt;
     &lt;!-- invariant: the global object is always a Window if the script can see this method --&gt;
 
@@ -79914,11 +80016,14 @@
   &lt;p&gt;When the &lt;dfn id=dom-messagechannel title=dom-MessageChannel&gt;&lt;code&gt;MessageChannel()&lt;/code&gt;&lt;/dfn&gt; constructor is
   called, it must run the following algorithm:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot;&gt;script's
-   global object&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/li&gt;
+  &lt;ol&gt;&lt;!--CLEANUP--&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot;&gt;script's
-   global object&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt;
+   of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/li&gt;
@@ -80000,21 +80105,30 @@
   message queue&lt;/dfn&gt;, initially empty. A &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; can be enabled or
   disabled, and is initially disabled. Once enabled, a port can never be disabled again (though
   messages in the queue can get moved to another queue or removed altogether, which has much the
-  same effect). A &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=has-been-shipped&gt;has been shipped&lt;/dfn&gt; flag. It must
-  initially be false.&lt;/p&gt;
+  same effect). A &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; also has a &lt;dfn id=has-been-shipped&gt;has been shipped&lt;/dfn&gt; flag, which must
+  initially be false, and an &lt;dfn id=concept-port-owner title=concept-port-owner&gt;owner&lt;/dfn&gt;, which is a &lt;a href=#settings-object&gt;settings
+  object&lt;/a&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; is enabled, the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must use
-  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;.&lt;/p&gt;
+  it as one of its &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt;. All &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; on the &lt;a href=#port-message-queue&gt;port
+  message queue&lt;/a&gt; must be associated with the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by
+  the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p class=note&gt;If the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; of the port's event listeners' &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's
-  global object&quot;&gt;global object&lt;/a&gt; is not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then the messages are
+&lt;!--CLEANUP--&gt;
+  &lt;p class=note&gt;If the port's &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; specifies a &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; that is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;,
+  but the event listeners all have scripts whose &lt;a href=#settings-object title=&quot;settings object&quot;&gt;settings objects&lt;/a&gt;
+  specify &lt;a href=#responsible-document title=&quot;responsible document&quot;&gt;responsible documents&lt;/a&gt; that are &lt;em&gt;not&lt;/em&gt; &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then the messages will be
   lost.&lt;/p&gt; &lt;!-- because of the jump-to-entry-point algorithm first step --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Each &lt;a href=#event-loop&gt;event loop&lt;/a&gt; has a &lt;a href=#task-source&gt;task source&lt;/a&gt; called the &lt;dfn id=unshipped-port-message-queue&gt;unshipped port
   message queue&lt;/dfn&gt;. This is a virtual &lt;a href=#task-source&gt;task source&lt;/a&gt;: it must act as if it contained
   the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; of each &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; of each
-  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag is false and whose &lt;a href=#port-message-queue&gt;port
-  message queue&lt;/a&gt; is enabled, in the order in which they were added to their respective
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag is false, whose &lt;a href=#port-message-queue&gt;port
+  message queue&lt;/a&gt; is enabled, and whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+  specifies that &lt;a href=#event-loop&gt;event loop&lt;/a&gt; as the &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;,
+  in the order in which they were added to their respective
   &lt;a href=#task-source&gt;task source&lt;/a&gt;. When a &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; would be removed from the
   &lt;a href=#unshipped-port-message-queue&gt;unshipped port message queue&lt;/a&gt;, it must instead be removed from its &lt;a href=#port-message-queue&gt;port message
   queue&lt;/a&gt;.&lt;/p&gt;
@@ -80029,9 +80143,10 @@
   is true, its &lt;a href=#port-message-queue&gt;port message queue&lt;/a&gt; acts as a first-class &lt;a href=#task-source&gt;task source&lt;/a&gt;,
   unaffected to any &lt;a href=#unshipped-port-message-queue&gt;unshipped port message queue&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user agent is to &lt;dfn id=create-a-new-messageport-object&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; owned by a
-  &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; object &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
-  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object, and let its owner be &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When the user agent is to &lt;dfn id=create-a-new-messageport-object&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; with a particular
+  &lt;a href=#settings-object&gt;settings object&lt;/a&gt; as its &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
+  &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object, and let its &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn id=entangle&gt;entangle&lt;/dfn&gt; two &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects, it must run
   the following steps:&lt;/p&gt;
@@ -80069,7 +80184,7 @@
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;original port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to
    true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt; be that object.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;owner&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt; be that object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;a href=#has-been-shipped&gt;has been shipped&lt;/a&gt; flag to true.&lt;/li&gt;
 
@@ -80176,7 +80291,8 @@
 
     &lt;ol&gt;&lt;li&gt;
 
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the owner of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, if there
+&lt;!--CLEANUP--&gt;
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, if there
       is a &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, or else some arbitrary owner. (This &lt;var title=&quot;&quot;&gt;new
       owner&lt;/var&gt; is used when transferring objects below. If there is no &lt;var title=&quot;&quot;&gt;target
       port&lt;/var&gt;, the &lt;code&gt;&lt;a href=#transferable&gt;Transferable&lt;/a&gt;&lt;/code&gt; objects given in the second argument, if any, are
@@ -80238,8 +80354,9 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; be the method's first argument.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span&gt;script's
-   global object&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;, and let &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt; is not entangled with another port, then return
    &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!- - we don't throw an exception
@@ -80249,8 +80366,9 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt; be the port with which &lt;var title=&quot;&quot;&gt;source port&lt;/var&gt;
    is entangled.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the owner of the &lt;var
-   title=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span title=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; of
+   the &lt;var title=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/p&gt;&lt;/li&gt;
@@ -80402,9 +80520,10 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is entangled, user agents must
   either act as if &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s entangled &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; object has a strong
-  reference to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, or as if &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s owner has a strong reference
+  reference to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;, or as if the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; has a strong reference
   to &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;div class=note&gt;
@@ -81595,7 +81714,7 @@
   JavaScript&lt;/a&gt; if the &lt;a href=#javascript-global-environment&gt;JavaScript global environment&lt;/a&gt; is a &lt;a href=#shared-worker-environment&gt;shared worker
   environment&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Shared workers receive message ports through &lt;code title=event-WorkerGlobalScope-connect&gt;connect&lt;/code&gt; events on their global object for each
+  &lt;p&gt;Shared workers receive message ports through &lt;code title=event-WorkerGlobalScope-connect&gt;connect&lt;/code&gt; events on their &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object for each
   connection.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-sharedworkerglobalscope-name title=dom-SharedWorkerGlobalScope-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute must return
@@ -81672,14 +81791,15 @@
   it must be removed from the list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of each
   worker whose list contains that &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Given a &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Given a &lt;a href=#settings-object&gt;settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
   worker, the &lt;dfn id=list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/dfn&gt; depends on the type
-  of &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
+  of &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s. If &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;
+  specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object
   (i.e. if we are creating a nested worker), then the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s are the
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;s that are in &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;'s own list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's
-  &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object,
-  and the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is just the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; that is the &lt;a href=#active-document&gt;active
-  document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
+  &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; of the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by
+  &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;o&lt;/var&gt; specifies a &lt;a href=#global-object&gt;global object&lt;/a&gt; that is a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object,
+  and the relevant &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is just the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;A worker is said to be a &lt;dfn id=permissible-worker&gt;permissible worker&lt;/dfn&gt; if its list of &lt;a href=&quot;#the-worker's-documents&quot;&gt;the worker's
   &lt;code&gt;Document&lt;/code&gt;s&lt;/a&gt; is not empty.&lt;/p&gt;
@@ -81698,8 +81818,9 @@
 
   &lt;h4 id=processing-model-7&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;Processing model&lt;/h4&gt;
 
-  &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, a
-  &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, an &lt;a href=#origin&gt;origin&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with global scope &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=run-a-worker&gt;run a worker&lt;/dfn&gt; for a script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;,
+  and an &lt;a href=#origin&gt;origin&lt;/a&gt; &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, it
   must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li id=worker-processing-model-top&gt;
@@ -81712,6 +81833,9 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; be the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified
+   by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is actually a
    &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. the worker is a shared worker), and there are
    any &lt;a href=#relevant-application-cache title=&quot;relevant application cache&quot;&gt;relevant application caches&lt;/a&gt; that are
@@ -81724,8 +81848,8 @@
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resource identified by &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;,
-    from the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, using &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt; as the
-    &lt;a href=#referrer-source&gt;referrer source&lt;/a&gt;, with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
+    from the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, using the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; as the
+    &lt;a href=#referrer-source&gt;referrer source&lt;/a&gt; (not the specified &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;!), with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
     flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy sensitive (looking forward to CORS) --&gt;
 
     &lt;p&gt;If the attempt fails, then for each &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object
@@ -81745,7 +81869,7 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;In the newly created execution environment, create a &lt;a href=#javascript-global-environment&gt;JavaScript global
-   environment&lt;/a&gt; whose &lt;i&gt;global object&lt;/i&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, then this
+   environment&lt;/a&gt; whose &lt;i&gt;&lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/i&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. If &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#dedicatedworkerglobalscope&gt;DedicatedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, then this
    is a &lt;a href=#dedicated-worker-environment&gt;dedicated worker environment&lt;/a&gt;. Otherwise, &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt; is a &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, and this is a &lt;a href=#shared-worker-environment&gt;shared worker
    environment&lt;/a&gt;. (In either case, by definition, it is a &lt;a href=#worker-environment&gt;worker
@@ -81753,29 +81877,18 @@
 
    &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
-    &lt;p&gt;A new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is now created, as follows.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Create a new &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; set up as appropriate for the
-    scripting language &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Obtain the appropriate &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; for the scripting language
+    &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/p&gt;
 
     &lt;p&gt;Parse/compile/initialize &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;a href=#script-execution-environment&gt;script execution
     environment&lt;/a&gt;, as appropriate for &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
     &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; be &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-referrer-source&quot;&gt;script's referrer source&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character encoding&lt;/a&gt; to UTF-8. (This is just used for
-    encoding non-ASCII characters in the query component of URLs.)&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -81821,8 +81934,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;strong&gt;&lt;a href=#event-loop&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/a&gt;&lt;/strong&gt;: Create a new &lt;a href=#event-loop&gt;event
-    loop&lt;/a&gt;, and run it until it is destroyed.&lt;/p&gt;
+    &lt;p&gt;&lt;strong&gt;&lt;a href=#event-loop&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/a&gt;&lt;/strong&gt;: Run the &lt;a href=#responsible-event-loop&gt;responsible
+    event loop&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; until it is destroyed.&lt;/p&gt;
 
     &lt;p class=note&gt;The handling of events or the execution of callbacks by &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; run by the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; might get prematurely
     aborted by the &quot;&lt;a href=#kill-a-worker&gt;kill a worker&lt;/a&gt;&quot; or &quot;&lt;a href=#terminate-a-worker&gt;terminate a worker&lt;/a&gt;&quot; algorithms
@@ -81971,8 +82084,98 @@
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-abstractworker-onerror title=handler-AbstractWorker-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-error&gt;error&lt;/code&gt;
 &lt;!-- v2-onclose    &lt;tr&gt;&lt;td&gt;&lt;dfn title=&quot;handler-AbstractWorker-onclose&quot;&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; --&gt;
-  &lt;/table&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/table&gt;&lt;h5 id=script-settings-for-workers&gt;&lt;span class=secno&gt;10.2.6.2 &lt;/span&gt;Script settings for workers&lt;/h5&gt;
 
+  &lt;p&gt;When the user agent is required to &lt;dfn id=set-up-a-worker-script-settings-object&gt;set up a worker script settings object&lt;/dfn&gt;, given a
+  &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;a href=#responsible-browsing-context&gt;responsible
+   browsing context&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;inherited responsible document&lt;/var&gt; be the &lt;a href=#responsible-document&gt;responsible
+   document&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings
+   object&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker event loop&lt;/var&gt; be a newly created &lt;a href=#event-loop&gt;event
+   loop&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be a new &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; whose
+    algorithms are defined as follows:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;The &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script execution environments&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;When the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; is created, for each language supported by the
+      user agent, create an appropriate execution environment as defined by the relevant
+      specification.&lt;/p&gt;
+
+      &lt;p&gt;When a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; is needed, return the appropriate one from
+      those created when the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; was created.&lt;/p&gt;
+
+      &lt;p class=note&gt;Currently, workers only support JavaScript, so only a JavaScript execution
+      environment is actually needed here.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#global-object&gt;global object&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-browsing-context&gt;responsible browsing context&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#responsible-event-loop&gt;responsible event loop&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; with which the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; is currently
+      associated.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-url-character-encoding&gt;API URL character encoding&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return UTF-8.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;h5 id=dedicated-workers-and-the-worker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Dedicated workers and the &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+
   &lt;pre class=idl&gt;[&lt;a href=#dom-worker title=dom-Worker&gt;Constructor&lt;/a&gt;(DOMString scriptURL)]
 interface &lt;dfn id=worker&gt;Worker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   void &lt;a href=#dom-worker-terminate title=dom-Worker-terminate&gt;terminate&lt;/a&gt;();
@@ -82027,17 +82230,21 @@
    the request violates a policy decision (e.g. if the user agent is configured to not allow the
    page to start dedicated workers).&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-   relative to the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base URL&quot;&gt;base URL&lt;/a&gt;, when
-   the method is invoked.&lt;/li&gt;
+   relative to the &lt;a href=#api-base-url&gt;API base URL&lt;/a&gt; specified by the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; when
+   the method was invoked.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt; be the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; component of the resulting &lt;a href=#parsed-url&gt;parsed
-    URL&lt;/a&gt; is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-    resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not &quot;&lt;code title=data-protocol&gt;data&lt;/code&gt;&quot;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as the
     origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
@@ -82052,16 +82259,22 @@
    origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt; be this new object.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;a href=#set-up-a-worker-script-settings-object&gt;Set up a worker script settings object&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;worker global
+   scope&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#worker&gt;Worker&lt;/a&gt;&lt;/code&gt; object, associated with &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+   is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
    this be the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker
-   global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;script settings&lt;/var&gt;
+   Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;.&lt;/li&gt;
@@ -82079,8 +82292,9 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the
+    add&lt;/a&gt; given the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
     &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82095,25 +82309,24 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker),
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object (i.e. we are creating a nested worker),
     add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of
-    the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
-    object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+    the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the resulting &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, with the
-    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the
-    &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, with the
-    &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;,
-    and with &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;worker
+    URL&lt;/var&gt;, the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;, and the
+    &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner
+    origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.3 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=shared-workers-and-the-sharedworker-interface&gt;&lt;span class=secno&gt;10.2.6.4 &lt;/span&gt;Shared workers and the &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-sharedworker title=dom-SharedWorker&gt;Constructor&lt;/a&gt;(DOMString scriptURL, optional DOMString name)]
 interface &lt;dfn id=sharedworker&gt;SharedWorker&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
@@ -82160,7 +82373,7 @@
    &lt;li&gt;
 
     &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;a href=#list-of-relevant-document-objects-to-add&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/a&gt; given the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the
+    add&lt;/a&gt; given the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the
     &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82172,7 +82385,9 @@
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object, which will shortly be associated with a
      &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object. Let this &lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt; object be &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+     is the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;. Let
      this be the &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Assign &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; to the &lt;code title=dom-SharedWorker-port&gt;&lt;a href=#dom-sharedworker-port&gt;port&lt;/a&gt;&lt;/code&gt; attribute of &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/li&gt;
@@ -82217,8 +82432,13 @@
        &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
        scope&lt;/var&gt;.&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let this be the &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;
+       whose &lt;a href=#global-object&gt;global object&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
+       &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt;
+       is &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;. Let this be the &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
+
        &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt;
        and &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/li&gt;
 
@@ -82241,11 +82461,12 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-        script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent
+        script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global
         scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
-        &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
-        object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+        &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global
+        object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
        &lt;/li&gt;
 
@@ -82253,17 +82474,23 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
+     &lt;!-- OTHERWISE: --&gt;
+
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#worker-origin&gt;worker
      origin&lt;/a&gt; is the origin of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;worker global
      scope&lt;/var&gt; be this new object.&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&lt;a href=#set-up-a-worker-script-settings-object&gt;Set up a worker script settings object&lt;/a&gt; with &lt;var title=&quot;&quot;&gt;worker global
+     scope&lt;/var&gt;, and let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Associate &lt;var title=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;worker global
      scope&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set the &lt;code title=dom-SharedWorkerGlobalScope-name&gt;&lt;a href=#dom-sharedworkerglobalscope-name&gt;name&lt;/a&gt;&lt;/code&gt; attribute of &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; owned by &lt;var title=&quot;&quot;&gt;worker
-     global scope&lt;/var&gt;. Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#create-a-new-messageport-object&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/a&gt; whose &lt;a href=#concept-port-owner title=concept-port-owner&gt;owner&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt;.
+     Let &lt;var title=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;a href=#entangle&gt;Entangle&lt;/a&gt; &lt;var title=&quot;&quot;&gt;outside port&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;inside
      port&lt;/var&gt;.&lt;/li&gt;
@@ -82291,21 +82518,18 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
-    script&lt;/a&gt; that invoked the constructor is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
-    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global
-    object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;a href=#global-object&gt;global object&lt;/a&gt; specified by the &lt;a href=#settings-object&gt;settings object&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent
+    script&lt;/a&gt; is a &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object, add &lt;var title=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;a href=&quot;#the-worker's-workers&quot;&gt;the worker's workers&lt;/a&gt; of the
+    &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object that is the &lt;a href=#global-object&gt;global
+    object&lt;/a&gt; specified by the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;'s &lt;a href=#settings-object&gt;settings object&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, with the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing
-    context&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;, with the &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt; the
-    &lt;var title=&quot;&quot;&gt;owner document&lt;/var&gt;, with the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
-    script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with &lt;var title=&quot;&quot;&gt;worker global
-    scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;a href=#run-a-worker&gt;Run a worker&lt;/a&gt; for the script with &lt;a href=#url&gt;URL&lt;/a&gt; &lt;var title=&quot;&quot;&gt;scriptURL&lt;/var&gt;, the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; as the &lt;var title=&quot;&quot;&gt;owner origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -82336,15 +82560,19 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If there are no arguments, return without doing anything. Abort these steps.&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the
+   &lt;a href=#incumbent-script&gt;incumbent script&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; each argument.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Attempt to &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; each resource identified by the resulting &lt;a href=#absolute-url title=&quot;absolute URL&quot;&gt;absolute URLs&lt;/a&gt;, from the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s
-    &lt;a href=#origin&gt;origin&lt;/a&gt;, using the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;'s &lt;a href=&quot;#script's-referrer-source&quot; title=&quot;script's referrer
-    source&quot;&gt;referrer source&lt;/a&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
+    &lt;a href=#origin&gt;origin&lt;/a&gt;, using the &lt;a href=#api-referrer-source&gt;API referrer source&lt;/a&gt; specified by &lt;var title=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
     http-origin privacy sensitive --&gt;
 
    &lt;/li&gt;
@@ -82373,14 +82601,13 @@
 
      &lt;li&gt;
 
-      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
-      &lt;a href=#url&gt;URL&lt;/a&gt; from which &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; was obtained, and &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, using the same global object, browsing
-      context, document, referrer source, URL character encoding, and base URL as the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that was created by the worker's &lt;a href=#run-a-worker&gt;run a
-      worker&lt;/a&gt; algorithm.&lt;/p&gt;
+      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt; using &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
+      &lt;a href=#url&gt;URL&lt;/a&gt; from which &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; was obtained, &lt;var title=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, and &lt;var title=&quot;&quot;&gt;settings object&lt;/var&gt; as
+      the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt;.&lt;/p&gt;
 
       &lt;p&gt;If the script came from a resource whose &lt;a href=#url&gt;URL&lt;/a&gt; does not have the &lt;a href=#same-origin&gt;same
       origin&lt;/a&gt; as the &lt;a href=#worker-origin&gt;worker origin&lt;/a&gt;, then pass the &lt;var title=&quot;&quot;&gt;muted
-      errors&lt;/var&gt; flag to the &lt;a href=#create-a-script-from-a-node&gt;create a script from a node&lt;/a&gt; algorithm.&lt;/p&gt;
+      errors&lt;/var&gt; flag to the &lt;a href=#create-a-script&gt;create a script&lt;/a&gt; algorithm as well.&lt;/p&gt;
 
       &lt;p&gt;Let the newly created &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; run until it either
       returns, fails to parse, fails to catch an exception, or gets prematurely aborted by the
@@ -94972,7 +95199,7 @@
    &lt;li&gt;None of the elements in the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; are in any of the following namespaces: &lt;a href=#html-namespace-0&gt;HTML namespace&lt;/a&gt;, &lt;a href=#svg-namespace&gt;SVG namespace&lt;/a&gt;, &lt;a href=#mathml-namespace&gt;MathML namespace&lt;/a&gt;
    &lt;li&gt;The &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no &lt;a href=#focusable&gt;focusable&lt;/a&gt; elements (e.g. from XLink).
    &lt;li&gt;The &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has no &lt;a href=#hyperlink title=hyperlink&gt;hyperlinks&lt;/a&gt; (e.g. from XLink).
-   &lt;li&gt;There exists no &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; whose &lt;a href=&quot;#script's-document&quot; title=&quot;script's document&quot;&gt;document&lt;/a&gt; is this &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.
+   &lt;li&gt;There exists no &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; whose &lt;a href=#settings-object&gt;settings object&lt;/a&gt; specifies this &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; as the &lt;a href=#responsible-document&gt;responsible document&lt;/a&gt;.
    &lt;li&gt;None of the elements in the &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; have any registered event listeners.
   &lt;/ul&gt;&lt;p&gt;&lt;dfn id=an-unstyled-document-view&gt;An unstyled document view&lt;/dfn&gt; is one where the DOM is not rendered according to CSS
   (which would, since there are no applicable styles in this context, just result in a wall of

Modified: source
===================================================================
--- source	2013-10-28 21:49:17 UTC (rev 8246)
+++ source	2013-10-30 23:18:04 UTC (rev 8247)
@@ -6050,7 +6050,8 @@
 
      &lt;dt&gt;If the URL came from a script (e.g. as an argument to a method)&lt;/dt&gt;
 
-     &lt;dd&gt;The URL character encoding is the &lt;span&gt;script's URL character encoding&lt;/span&gt;.&lt;/dd&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;dd&gt;The URL character encoding is the &lt;span&gt;API URL character encoding&lt;/span&gt; specified by the script's &lt;span&gt;settings object&lt;/span&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;If the URL came from a DOM node (e.g. from an element)&lt;/dt&gt;
 
@@ -8021,11 +8022,13 @@
   their user interface. This is the primary mechanism by which a user can tell if a site is
   attempting to impersonate another.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;Document&lt;/code&gt; is created by a &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; using
   the &lt;code data-x=&quot;dom-DOMImplementation-createDocument&quot;&gt;createDocument()&lt;/code&gt; or &lt;code
   data-x=&quot;dom-DOMImplementation-createHTMLDocument&quot;&gt;createHTMLDocument()&lt;/code&gt; APIs, &lt;span&gt;the
-  document's address&lt;/span&gt; is the same as &lt;span&gt;the document's address&lt;/span&gt; of the &lt;span&gt;script's
-  document&lt;/span&gt;, and the &lt;code&gt;Document&lt;/code&gt; is both &lt;span&gt;ready for post-load tasks&lt;/span&gt; and
+  document's address&lt;/span&gt; is the same as &lt;span&gt;the document's address&lt;/span&gt; of the &lt;span&gt;responsible
+  document&lt;/span&gt; specified by the script's &lt;span&gt;settings
+  object&lt;/span&gt;, and the &lt;code&gt;Document&lt;/code&gt; is both &lt;span&gt;ready for post-load tasks&lt;/span&gt; and
   &lt;span&gt;completely loaded&lt;/span&gt; immediately.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn&gt;The document's referrer&lt;/dfn&gt; is an &lt;span&gt;absolute URL&lt;/span&gt; that can be set when the
@@ -8545,6 +8548,8 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+&lt;!--CLEANUP--&gt;&lt;!-- multiple paragraphs --&gt;
+
   &lt;!-- these all return the same object each time because of a rule in
   the collection section --&gt;
 
@@ -8865,8 +8870,10 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;XMLDocument&lt;/code&gt; object on which the
    method was invoked.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the method's first argument, relative to the
-   &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;. If this is not
+   &lt;span&gt;API base URL&lt;/span&gt; specified by the
+   &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;. If this is not
    successful, throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps. Otherwise, let &lt;var
    data-x=&quot;&quot;&gt;url&lt;/var&gt; be the resulting &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -8893,9 +8900,10 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;success&lt;/var&gt; be false.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Fetch&lt;/span&gt;&lt;!--FETCH--&gt; &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; from the &lt;span&gt;origin&lt;/span&gt; of
-   &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's
-   referrer source&quot;&gt;referrer source&lt;/span&gt;, with the &lt;i data-x=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i
+   &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt;, using the &lt;span&gt;API referrer source&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s
+   &lt;span&gt;settings object&lt;/span&gt;, with the &lt;i data-x=&quot;&quot;&gt;synchronous flag&lt;/i&gt; set and the &lt;i
    data-x=&quot;&quot;&gt;force same-origin flag&lt;/i&gt; set.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
@@ -57279,8 +57287,9 @@
 
        &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;old script element&lt;/var&gt; be the value to which the
-        &lt;code&gt;Document&lt;/code&gt; element's &lt;code
+        &lt;code&gt;script&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt;'s &lt;code
         data-x=&quot;dom-document-currentScript&quot;&gt;currentScript&lt;/code&gt; object was most recently
         initialized.&lt;/p&gt;
 
@@ -57288,7 +57297,8 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;Document&lt;/code&gt; element's &lt;code
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;script&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt;'s &lt;code
         data-x=&quot;dom-document-currentScript&quot;&gt;currentScript&lt;/code&gt; object to the &lt;code&gt;script&lt;/code&gt;
         element.&lt;/p&gt;
 
@@ -57296,15 +57306,17 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;&lt;span data-x=&quot;create a script from a node&quot;&gt;Create a script&lt;/span&gt; from the
-        &lt;code&gt;script&lt;/code&gt; element node, using &lt;var&gt;the script block's source&lt;/var&gt;, the
-        &lt;span&gt;URL&lt;/span&gt; from which the script was obtained, and &lt;var&gt;the script block's
-        type&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt;, using &lt;var&gt;the script block's source&lt;/var&gt;, the
+        &lt;span&gt;URL&lt;/span&gt; from which the script was obtained, &lt;var&gt;the script block's
+        type&lt;/var&gt; as the scripting language, and the &lt;span&gt;script settings object&lt;/span&gt; of the &lt;code&gt;script&lt;/code&gt; element's
+        &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
         &lt;p&gt;If the script came from a resource that was &lt;span data-x=&quot;fetch&quot;&gt;fetched&lt;/span&gt; in the
         steps above, and the resource was &lt;span&gt;CORS-cross-origin&lt;/span&gt;, then pass the &lt;var
-        data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;span&gt;create a script from a node&lt;/span&gt;
-        algorithm.&lt;/p&gt;
+        data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag to the &lt;span&gt;create a script&lt;/span&gt;
+        algorithm as well.&lt;/p&gt;
 
         &lt;p class=&quot;note&quot;&gt;This is where the script is compiled and actually executed.&lt;/p&gt;
 
@@ -57312,7 +57324,8 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;Initialize the &lt;code&gt;Document&lt;/code&gt; element's &lt;code
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;Initialize the &lt;code&gt;script&lt;/code&gt; element's &lt;code&gt;Document&lt;/code&gt;'s &lt;code
         data-x=&quot;dom-document-currentScript&quot;&gt;currentScript&lt;/code&gt; object to &lt;var data-x=&quot;&quot;&gt;old script
         element&lt;/var&gt;.&lt;/p&gt;
 
@@ -71495,12 +71508,14 @@
   present, and as if all the properties of that &lt;code&gt;Window&lt;/code&gt; object had their [[Enumerable]]
   attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;span&gt;effective
   script origin&lt;/span&gt; that is not the same as the &lt;code&gt;Window&lt;/code&gt; object's
   &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;effective script origin&lt;/span&gt; must be provided with a separate set
   of objects. These objects must have the prototype chain appropriate for the script for which the
-  objects are created (not those that would be appropriate for scripts whose &lt;span&gt;script's global
-  object&lt;/span&gt; is the &lt;code&gt;Window&lt;/code&gt; object in question).&lt;/p&gt;
+  objects are created (not those that would be appropriate for scripts whose &lt;span&gt;global
+  object&lt;/span&gt;, as specified by their &lt;span&gt;settings object&lt;/span&gt;,
+  is the &lt;code&gt;Window&lt;/code&gt; object in question).&lt;/p&gt;
 
   &lt;div class=&quot;example&quot;&gt;
 
@@ -71578,12 +71593,13 @@
 
   &lt;p&gt;The method has four arguments, though they are all optional.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The first argument, &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;, must be a &lt;span&gt;valid non-empty URL&lt;/span&gt; for a
   page to load in the browsing context. If the first argument is the empty string, then the &lt;var
   data-x=&quot;&quot;&gt;url&lt;/var&gt; argument must be interpreted as &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;. Otherwise, the
   argument must be &lt;span data-x=&quot;resolve a url&quot;&gt;resolved&lt;/span&gt; to an &lt;span&gt;absolute URL&lt;/span&gt; (or
-  an error), relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base
-  URL&lt;/span&gt;, when the method is invoked.&lt;/p&gt;
+  an error), relative to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings 
+  object&lt;/span&gt; when the method was invoked.&lt;/p&gt;
 
   &lt;p&gt;The second argument, &lt;var data-x=&quot;&quot;&gt;target&lt;/var&gt;, specifies the &lt;span data-x=&quot;browsing context
   name&quot;&gt;name&lt;/span&gt; of the browsing context that is to be navigated. It must be a &lt;span&gt;valid
@@ -71618,14 +71634,15 @@
   browsing context, then throw an &lt;code&gt;InvalidAccessError&lt;/code&gt; exception and abort these
   steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Otherwise, if &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; is not &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;, the user agent must
   &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV window.open()--&gt; the selected &lt;span&gt;browsing context&lt;/span&gt; to the
   &lt;span&gt;absolute URL&lt;/span&gt; obtained from &lt;span data-x=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; &lt;var
   data-x=&quot;&quot;&gt;url&lt;/var&gt; earlier. If the &lt;var data-x=&quot;&quot;&gt;replace&lt;/var&gt; is true or if the &lt;span&gt;browsing
   context&lt;/span&gt; was just created as part of &lt;span&gt;the rules for choosing a browsing context given a
   browsing context name&lt;/span&gt;, then &lt;span data-x=&quot;replacement enabled&quot;&gt;replacement must be
-  enabled&lt;/span&gt;. The navigation must be done with the &lt;span data-x=&quot;script's browsing
-  context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt; as the &lt;span&gt;source browsing
+  enabled&lt;/span&gt;. The navigation must be done with the &lt;span&gt;responsible
+  browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; as the &lt;span&gt;source browsing
   context&lt;/span&gt;. If the &lt;span&gt;resolve a URL&lt;/span&gt; algorithm failed, then the user agent may either
   instead &lt;span&gt;navigate&lt;/span&gt; to an inline error page, using the same replacement behavior and
   source browsing context behavior as described earlier in this paragraph; or treat the &lt;var
@@ -71665,12 +71682,16 @@
    &lt;li&gt;The corresponding &lt;span&gt;browsing context&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt; is
    &lt;span&gt;script-closable&lt;/span&gt;.&lt;/li&gt;
 
-   &lt;li&gt;The &lt;span data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent
-   script&lt;/span&gt; is &lt;span&gt;familiar with&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt; &lt;var
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;span&gt;responsible browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent
+   script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; is &lt;span&gt;familiar
+   with&lt;/span&gt; the &lt;span&gt;browsing context&lt;/span&gt; &lt;var
    data-x=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li id=&quot;sandboxClose&quot;&gt;The &lt;span data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; of the
-   &lt;span&gt;incumbent script&lt;/span&gt; is &lt;span&gt;allowed to navigate&lt;/span&gt; the &lt;span&gt;browsing
+&lt;!--CLEANUP--&gt;
+   &lt;li id=&quot;sandboxClose&quot;&gt;The &lt;span&gt;responsible browsing context&lt;/span&gt; specified by the
+   &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;
+   is &lt;span&gt;allowed to navigate&lt;/span&gt; the &lt;span&gt;browsing
    context&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;A&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ul&gt;
@@ -71719,13 +71740,15 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn data-x=&quot;dom-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; IDL attribute on the &lt;code&gt;Window&lt;/code&gt;
   interface must return the number of &lt;span data-x=&quot;child browsing context&quot;&gt;child browsing
   contexts&lt;/span&gt; that are &lt;span data-x=&quot;browsing context nested through&quot;&gt;nested through&lt;/span&gt;
   elements that are &lt;span data-x=&quot;in a document&quot;&gt;in the &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; that is the
   &lt;span&gt;active document&lt;/span&gt; of that &lt;code&gt;Window&lt;/code&gt; object, if that &lt;code&gt;Window&lt;/code&gt;'s
-  &lt;span&gt;browsing context&lt;/span&gt; shares the same &lt;span&gt;event loop&lt;/span&gt; as the &lt;span&gt;script's
-  browsing context&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; accessing the IDL attribute; otherwise,
+  &lt;span&gt;browsing context&lt;/span&gt; shares the same &lt;span&gt;event loop&lt;/span&gt; as the &lt;span&gt;responsible
+  document&lt;/span&gt; specified by the &lt;span&gt;settings object&lt;/span&gt; of the
+  &lt;span&gt;entry script&lt;/span&gt; accessing the IDL attribute; otherwise,
   it must return zero.&lt;/p&gt;
 
   &lt;!-- in other words, frames are only accessible to same-thread processes --&gt;
@@ -71869,9 +71892,10 @@
   objects have &lt;span data-x=&quot;implied strong reference&quot;&gt;implied strong references&lt;/span&gt; to the
   &lt;code&gt;WindowProxy&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; has a strong reference to its &lt;span
-  data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; and its &lt;span data-x=&quot;script's
-  document&quot;&gt;document&lt;/span&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Each &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; has a strong reference to its &lt;span&gt;settings
+  object&lt;/span&gt;, and each &lt;span&gt;script settings object&lt;/span&gt;
+  has strong references to its &lt;span&gt;global object&lt;/span&gt;, &lt;span&gt;responsible browsing context&lt;/span&gt;, and &lt;span&gt;responsible document&lt;/span&gt;.&lt;/p&gt;
 
   &lt;!-- discard a document --&gt;
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is to &lt;dfn&gt;discard a &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, the user
@@ -73416,8 +73440,10 @@
 
     &lt;ol&gt;
 
+&lt;!--CLEANUP--&gt;
      &lt;li&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the value of the third argument, relative to the
-     &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;.&lt;/li&gt;
+     &lt;span&gt;API base URL&lt;/span&gt; specified by the
+     &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/li&gt;
 
      &lt;li&gt;If that fails, throw a &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
@@ -73428,9 +73454,10 @@
      data-x=&quot;concept-url-fragment&quot;&gt;fragment&lt;/span&gt; components, then throw a
      &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these steps.&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
      &lt;li&gt;If the &lt;span&gt;origin&lt;/span&gt; of the resulting &lt;span&gt;absolute URL&lt;/span&gt; is not the same as
-     the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's
-     document&quot;&gt;document&lt;/span&gt;, and either the &lt;span data-x=&quot;concept-url-path&quot;&gt;path&lt;/span&gt; or &lt;span
+     the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;responsible document&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s
+     &lt;span&gt;settings object&lt;/span&gt;, and either the &lt;span data-x=&quot;concept-url-path&quot;&gt;path&lt;/span&gt; or &lt;span
      data-x=&quot;concept-url-query&quot;&gt;query&lt;/span&gt; components of the two &lt;span data-x=&quot;parsed URL&quot;&gt;parsed
      URLs&lt;/span&gt; compared in the previous step differ, throw a &lt;code&gt;SecurityError&lt;/code&gt; exception
      and abort these steps. (This prevents sandboxed content from spoofing other pages on the same
@@ -73712,9 +73739,10 @@
   &lt;p&gt;The &lt;i&gt;relevant &lt;code&gt;Document&lt;/code&gt;&lt;/i&gt; is the &lt;code&gt;Location&lt;/code&gt; object's associated
   &lt;code&gt;Document&lt;/code&gt; object's &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn data-x=&quot;dom-location-assign&quot;&gt;&lt;code&gt;assign(&lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;span data-x=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the argument, relative
-  to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, and if that is
+  to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;, and if that is
   successful, must &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV location.href/assign--&gt; the &lt;span&gt;browsing
   context&lt;/span&gt; to the specified &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;. If the &lt;span&gt;browsing context&lt;/span&gt;'s
   &lt;span&gt;session history&lt;/span&gt; contains only one &lt;code&gt;Document&lt;/code&gt;, and that was the
@@ -73724,15 +73752,17 @@
   Safari doesn't check that. Thus this might need changing if testing shows the IE/Firefox behaviour
   is required here. --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When the &lt;dfn data-x=&quot;dom-location-replace&quot;&gt;&lt;code&gt;replace(&lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
   method is invoked, the UA must &lt;span data-x=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the argument, relative
-  to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, and if that is
+  to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;, and if that is
   successful, &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV location.href/replace--&gt; the &lt;span&gt;browsing
   context&lt;/span&gt; to the specified &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; with &lt;span&gt;replacement enabled&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Navigation for the &lt;code data-x=&quot;dom-location-assign&quot;&gt;assign()&lt;/code&gt; and &lt;code
-  data-x=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; methods must be done with the &lt;span data-x=&quot;script's
-  browsing context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt; as the &lt;span&gt;source
+  data-x=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; methods must be done with the &lt;span&gt;responsible browsing context&lt;/span&gt; specified by
+  the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; as the &lt;span&gt;source
   browsing context&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the &lt;span data-x=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; step of the &lt;code
@@ -73806,9 +73836,10 @@
   input&lt;/span&gt; algorithm with &lt;span data-x=&quot;the document's address&quot;&gt;the address&lt;/span&gt; of the
   &lt;i&gt;relevant &lt;code&gt;Document&lt;/code&gt;&lt;/i&gt; as the given value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The element's &lt;code&gt;URLUtils&lt;/code&gt; interface's &lt;span data-x=&quot;concept-uu-get-the-base&quot;&gt;get the
-  base&lt;/span&gt; algorithm must return the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base
-  URL&quot;&gt;base URL&lt;/span&gt;, if there is one, or null otherwise.&lt;/p&gt;
+  base&lt;/span&gt; algorithm must return the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s
+  &lt;span&gt;settings object&lt;/span&gt;, if there is one, or null otherwise.&lt;/p&gt;
 
   &lt;p&gt;The element's &lt;code&gt;URLUtils&lt;/code&gt; interface's &lt;span data-x=&quot;concept-uu-query-encoding&quot;&gt;query
   encoding&lt;/span&gt; is the &lt;span&gt;document's character encoding&lt;/span&gt;.&lt;/p&gt;
@@ -73874,12 +73905,16 @@
 
   &lt;ul&gt;
 
-   &lt;li&gt;The &lt;code data-x=&quot;dom-url-href&quot;&gt;href&lt;/code&gt; setter, if the &lt;span&gt;entry script&lt;/span&gt;'s
-   &lt;span&gt;script's browsing context&lt;/span&gt; is &lt;span&gt;familiar with&lt;/span&gt; the &lt;span&gt;browsing
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;code data-x=&quot;dom-url-href&quot;&gt;href&lt;/code&gt; setter, if the &lt;span&gt;responsible browsing context&lt;/span&gt;
+   specified by the &lt;span&gt;entry script&lt;/span&gt;'s
+   &lt;span&gt;settings object&lt;/span&gt; is &lt;span&gt;familiar with&lt;/span&gt; the &lt;span&gt;browsing
    context&lt;/span&gt; with which the &lt;code&gt;Location&lt;/code&gt; object is associated
 
-   &lt;li&gt;The &lt;code data-x=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; method, if the &lt;span&gt;entry
-   script&lt;/span&gt;'s &lt;span&gt;script's browsing context&lt;/span&gt; is &lt;span&gt;familiar with&lt;/span&gt; the
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;The &lt;code data-x=&quot;dom-location-replace&quot;&gt;replace()&lt;/code&gt; method, if the &lt;span&gt;responsible
+   browsing context&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s
+   &lt;span&gt;settings object&lt;/span&gt; is &lt;span&gt;familiar with&lt;/span&gt; the
    &lt;span&gt;browsing context&lt;/span&gt; with which the &lt;code&gt;Location&lt;/code&gt; object is associated
 
    &lt;li&gt;Any properties not defined in the IDL for the &lt;code&gt;Location&lt;/code&gt; object or indirectly via
@@ -73896,12 +73931,13 @@
   properties, getters, setters, etc, were not present, and as if all the properties of that
   &lt;code&gt;Location&lt;/code&gt; object had their [[Enumerable]] attribute set to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;For members that return objects (including function objects), each distinct &lt;span&gt;effective
   script origin&lt;/span&gt; that is not the &lt;span&gt;same origin&lt;/span&gt; as the &lt;code&gt;Location&lt;/code&gt;
   object's &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;effective script origin&lt;/span&gt; must be provided with a
   separate set of objects. These objects must have the prototype chain appropriate for the script
   for which the objects are created (not those that would be appropriate for scripts whose
-  &lt;span&gt;script's global object&lt;/span&gt; is the &lt;code&gt;Location&lt;/code&gt; object's &lt;code&gt;Document&lt;/code&gt;'s
+  &lt;span&gt;settings object&lt;/span&gt; specifies a &lt;span&gt;global object&lt;/span&gt; that is the &lt;code&gt;Location&lt;/code&gt; object's &lt;code&gt;Document&lt;/code&gt;'s
   &lt;code&gt;Window&lt;/code&gt; object).&lt;/p&gt;
 
   &lt;/div&gt;
@@ -75522,7 +75558,7 @@
    &lt;li&gt;
 
     &lt;p&gt;&lt;span&gt;Make disappear&lt;/span&gt; any &lt;code&gt;WebSocket&lt;/code&gt; objects that were created by the &lt;code
-    data-x=&quot;dom-WebSocket&quot;&gt;WebSocket()&lt;/code&gt; constructor whose global object is the
+    data-x=&quot;dom-WebSocket&quot;&gt;WebSocket()&lt;/code&gt; constructor from the
     &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;
 
     &lt;p&gt;If this affected any &lt;code&gt;WebSocket&lt;/code&gt; objects, then set &lt;code&gt;Document&lt;/code&gt;'s &lt;i
@@ -78026,27 +78062,34 @@
     information).&lt;/p&gt;
 
    &lt;/dd&gt;
-&lt;!--
-   &lt;dt&gt;A relationship with a &lt;span&gt;script settings object&lt;/span&gt;&lt;/dt&gt;
 
+   &lt;dt&gt;A &lt;dfn&gt;settings object&lt;/dfn&gt;&lt;/dt&gt;
+
    &lt;dd&gt;
 
-    &lt;p&gt;An object (defined below) that describes various settings that can be shared with other
-    scripts.&lt;/p&gt;
+    &lt;p&gt;A &lt;span&gt;script settings object&lt;/span&gt;, various settings that are shared with other scripts in
+    the same context.&lt;/p&gt;
 
    &lt;/dd&gt;
 
+   &lt;dt&gt;An &lt;dfn data-x=&quot;&quot;&gt;owner&lt;/dfn&gt;, &lt;dfn data-x=&quot;&quot;&gt;origin&lt;/dfn&gt;, and &lt;dfn data-x=&quot;&quot;&gt;effective origin&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;There are defined in the &lt;span&gt;origin&lt;/span&gt; section.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
   &lt;/dl&gt;
 
   &lt;hr&gt;
 
-  &lt;p&gt;Each global object has a &lt;dfn&gt;script settings object&lt;/dfn&gt; shared by the scripts that use that
-  global object. A &lt;span&gt;script settings object&lt;/span&gt; consists of the following:&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn&gt;script settings object&lt;/dfn&gt; specifies algorithms for obtaining the following:&lt;/p&gt;
 
   &lt;dl&gt;
---&gt;
-   &lt;dt&gt;A &lt;dfn&gt;script execution environment&lt;/dfn&gt;&lt;/dt&gt;
 
+   &lt;dt&gt;A &lt;dfn&gt;script execution environment&lt;/dfn&gt; for each language supported by the user agent&lt;/dt&gt;
+
    &lt;dd&gt;
 
     &lt;p&gt;The characteristics of the script execution environment depend on the language, and are not
@@ -78058,19 +78101,18 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn&gt;script's global object&lt;/dfn&gt;&lt;/dt&gt;
-
+   &lt;dt&gt;A &lt;dfn&gt;global object&lt;/dfn&gt;&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;An object that provides the APIs that the code can use.&lt;/p&gt;
+    &lt;p&gt;An object that provides the APIs that can be called by the code in scripts that use this
+    &lt;span data-x=&quot;script settings object&quot;&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p class=&quot;example&quot;&gt;This is typically a &lt;code&gt;Window&lt;/code&gt; object. In JavaScript, this
-    corresponds to the &lt;i&gt;global object&lt;/i&gt;.&lt;/p&gt;
+    &lt;p class=&quot;note&quot;&gt;This is typically a &lt;code&gt;Window&lt;/code&gt; object or a
+    &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object. When a &lt;span&gt;global object&lt;/span&gt; is an empty object, it
+    can't do anything that interacts with the environment.&lt;/p&gt;
 
-    &lt;p class=&quot;note&quot;&gt;When a &lt;span&gt;script's global object&lt;/span&gt; is an empty object, it can't do
-    anything that interacts with the environment.&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;span&gt;script's global object&lt;/span&gt; is a &lt;code&gt;Window&lt;/code&gt; object, then in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;span&gt;global object&lt;/span&gt; is a &lt;code&gt;Window&lt;/code&gt; object, then, in
     JavaScript, the ThisBinding of the global execution context for this script must be the
     &lt;code&gt;Window&lt;/code&gt; object's &lt;code&gt;WindowProxy&lt;/code&gt; object, rather than the global object. &lt;a
     href=&quot;#refsECMA262&quot;&gt;[ECMA262]&lt;/a&gt;&lt;/p&gt;
@@ -78084,74 +78126,160 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn&gt;script's browsing context&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn&gt;responsible browsing context&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
     &lt;p&gt;A &lt;span&gt;browsing context&lt;/span&gt; that is assigned responsibility for actions taken by the
-    script.&lt;/p&gt;
+    scripts that use this &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p class=&quot;example&quot;&gt;When a script creates and &lt;span data-x=&quot;navigate&quot;&gt;navigates&lt;/span&gt; a new
-    &lt;span&gt;top-level browsing context&lt;/span&gt;, the &lt;code data-x=&quot;dom-opener&quot;&gt;opener&lt;/code&gt; attribute of
-    the new &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Window&lt;/code&gt; object will be set to the
-    &lt;span&gt;script's browsing context&lt;/span&gt;'s &lt;code&gt;WindowProxy&lt;/code&gt; object.&lt;/p&gt;
+    &lt;span&gt;top-level browsing context&lt;/span&gt;, the &lt;code data-x=&quot;dom-opener&quot;&gt;opener&lt;/code&gt; attribute
+    of the new &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Window&lt;/code&gt; object will be set to the
+    &lt;span&gt;responsible browsing context&lt;/span&gt;'s &lt;code&gt;WindowProxy&lt;/code&gt; object.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A relationship with the &lt;dfn&gt;script's document&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn&gt;responsible document&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; that is assigned responsibility for actions taken by the script.&lt;/p&gt;
+    &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; that is assigned responsibility for actions taken by the scripts that
+    use this &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=&quot;example&quot;&gt;For example, the &lt;span data-x=&quot;the document's address&quot;&gt;address&lt;/span&gt; of the
-    &lt;span&gt;script's document&lt;/span&gt; is used to set the &lt;span data-x=&quot;the document's
-    address&quot;&gt;address&lt;/span&gt; of any &lt;code&gt;Document&lt;/code&gt; elements created using &lt;code
+    &lt;span&gt;responsible document&lt;/span&gt; is used to set the &lt;span data-x=&quot;the document's
+    address&quot;&gt;address&lt;/span&gt; of any &lt;code&gt;Document&lt;/code&gt;s created using &lt;code
     data-x=&quot;dom-DOMImplementation-createDocument&quot;&gt;createDocument()&lt;/code&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;dfn&gt;script's referrer source&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;A &lt;dfn&gt;responsible event loop&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;Either a &lt;code&gt;Document&lt;/code&gt; (specifically, the &lt;span&gt;script's document&lt;/span&gt;), or a
+    &lt;p&gt;An &lt;span&gt;event loop&lt;/span&gt; that is used when it would not be immediately clear what event
+    loop to use.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;An &lt;dfn&gt;API referrer source&lt;/dfn&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Either a &lt;code&gt;Document&lt;/code&gt; (specifically, the &lt;span&gt;responsible document&lt;/span&gt;), or a
     &lt;span&gt;URL&lt;/span&gt;, which is used by some APIs to determine what value to use for the &lt;code
     data-x=&quot;http-referer&quot;&gt;Referer&lt;/code&gt; (sic) header in calls to the &lt;span
     data-x=&quot;fetch&quot;&gt;fetching&lt;/span&gt; algorithm.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn data-x=&quot;script's URL character encoding&quot;&gt;URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn&gt;API URL character encoding&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A character encoding, set when the script is created, used to encode URLs. &lt;span
-    id=&quot;sce-not-copy&quot; data-x=&quot;&quot;&gt;If the character encoding is set from another source, e.g. a
-    &lt;span&gt;document's character encoding&lt;/span&gt;, then the &lt;span&gt;script's URL character
-    encoding&lt;/span&gt; must follow the source, so that if the source's changes, so does the
-    script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;A character encoding used to encode URLs by APIs called by scripts that use
+    this &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;A &lt;dfn data-x=&quot;script's base URL&quot;&gt;base URL&lt;/dfn&gt;&lt;/dt&gt;
+   &lt;dt&gt;An &lt;dfn&gt;API base URL&lt;/dfn&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
 
-    &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt;, set when the script is created, used to resolve &lt;span data-x=&quot;relative
-    URL&quot;&gt;relative URLs&lt;/span&gt;. &lt;span id=&quot;sbu-not-copy&quot; data-x=&quot;&quot;&gt;If the base URL is set from another
-    source, e.g. a &lt;span&gt;document base URL&lt;/span&gt;, then the &lt;span&gt;script's base URL&lt;/span&gt; must
-    follow the source, so that if the source's changes, so does the script's.&lt;/span&gt;&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;An &lt;span&gt;absolute URL&lt;/span&gt; used by APIs called by scripts that use
+    this &lt;span&gt;script settings object&lt;/span&gt; to resolve &lt;span data-x=&quot;relative
+    URL&quot;&gt;relative URLs&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
   &lt;/dl&gt;
 
-  &lt;/div&gt;
 
 
-  &lt;div class=&quot;impl&quot;&gt;
+  &lt;h5&gt;Script settings for browsing contexts&lt;/h5&gt;
 
+  &lt;p&gt;Whenever a new &lt;code&gt;Window&lt;/code&gt; object is created, it must also create a &lt;span&gt;script
+  settings object&lt;/span&gt; whose algorithms are defined as follows:&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;The &lt;span data-x=&quot;script execution environment&quot;&gt;script execution environments&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;When the &lt;span&gt;script settings object&lt;/span&gt; is created, for each language supported by the
+    user agent, create an appropriate execution environment as defined by the relevant
+    specification.&lt;/p&gt;
+
+    &lt;p&gt;When a &lt;span&gt;script execution environment&lt;/span&gt; is needed, return the appropriate one from
+    those created when the &lt;span&gt;script settings object&lt;/span&gt; was created.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;global object&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;Window&lt;/code&gt; object itself.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;responsible browsing context&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;span&gt;browsing context&lt;/span&gt; with which the &lt;code&gt;Window&lt;/code&gt; object is
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;span&gt;event loop&lt;/span&gt; that is associated with the &lt;span&gt;unit of related
+    similar-origin browsing contexts&lt;/span&gt; to which the &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;browsing
+    context&lt;/span&gt; belongs.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;API referrer source&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently
+    associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;API URL character encoding&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;span data-x=&quot;document's character encoding&quot;&gt;character encoding&lt;/span&gt; of
+    the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;The &lt;span&gt;API base URL&lt;/span&gt;&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Return the current &lt;span data-x=&quot;document base URL&quot;&gt;base URL&lt;/span&gt; of the
+    &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently associated.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+
+
   &lt;h5&gt;Calling scripts&lt;/h5&gt;
 
   &lt;p&gt;Each &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; has a &lt;dfn&gt;stack of
@@ -78173,8 +78301,10 @@
    data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If this returns &quot;do not run&quot; then abort these
    steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Make the &lt;span data-x=&quot;script execution environment&quot;&gt;script execution environment&lt;/span&gt;
-   for &lt;var data-x=&quot;&quot;&gt;s&lt;/var&gt; execute the &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;code
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Make the appropriate &lt;span&gt;script execution environment&lt;/span&gt;
+   specified by &lt;var data-x=&quot;&quot;&gt;s&lt;/var&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt; execute the &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;code
    entry-point&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Clean up after running a callback&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -78188,12 +78318,14 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;global object&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;span&gt;settings object&lt;/span&gt;
    is a &lt;code&gt;Window&lt;/code&gt; object whose &lt;code&gt;Document&lt;/code&gt; object is not &lt;span&gt;fully
    active&lt;/span&gt;, then return &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;span data-x=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt; for &lt;var
-   data-x=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;span data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt;, then return
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;span data-x=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt; for the &lt;span&gt;responsible browsing context&lt;/span&gt; specified by &lt;var
+   data-x=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;span&gt;settings object&lt;/span&gt;, then return
    &quot;do not run&quot; and abort these steps.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Push &lt;var data-x=&quot;&quot;&gt;s&lt;/var&gt; onto the &lt;span&gt;stack of incumbent scripts&lt;/span&gt;, and label it
@@ -78244,7 +78376,7 @@
   data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; in the &lt;span&gt;stack of incumbent scripts&lt;/span&gt; that is
   labeled as a &lt;span data-x=&quot;candidate entry scripts&quot;&gt;candidate entry script&lt;/span&gt;. If the stack is
   empty, or has no entries labeled as such, then there is no &lt;span&gt;entry script&lt;/span&gt;. It is used
-  to obtain, amongst other things, the &lt;span&gt;script's base URL&lt;/span&gt; to &lt;span data-x=&quot;resolve a
+  to obtain, amongst other things, the &lt;span&gt;API base URL&lt;/span&gt; to &lt;span data-x=&quot;resolve a
   url&quot;&gt;resolve&lt;/span&gt; relative &lt;span data-x=&quot;URL&quot;&gt;URLs&lt;/span&gt; used in scripts running in that
   &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt;.&lt;/p&gt;
 
@@ -78284,9 +78416,8 @@
 
   &lt;p&gt;When the specification says that a &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; is to be &lt;dfn
   data-x=&quot;create a script&quot;&gt;created&lt;/dfn&gt;, given some script source, a script source URL, its
-  scripting language, a global object, a browsing context, a document, a referrer source, a URL
-  character encoding, a base URL, and optionally a &lt;var data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag, the user
-  agent must run the following steps:&lt;/p&gt;
+  scripting language, a &lt;span&gt;script settings object&lt;/span&gt;, and optionally a &lt;var data-x=&quot;&quot;&gt;muted
+  errors&lt;/var&gt; flag, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -78297,17 +78428,15 @@
    context&lt;/span&gt; passed to this algorithm, then abort these steps, as if the script source
    described a program that did nothing but return void.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;span&gt;script execution environment&lt;/span&gt; as appropriate for the given scripting
-   language.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Obtain the appropriate &lt;span&gt;script execution environment&lt;/span&gt; for the given scripting
+   language from the &lt;span&gt;script settings object&lt;/span&gt; provided.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Parse/compile/initialize the source of the script using the &lt;span&gt;script execution
    environment&lt;/span&gt;, as appropriate for the scripting language, and thus obtain &lt;var
    data-x=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;span&gt;script's global object&lt;/span&gt;, the &lt;span&gt;script's browsing
-   context&lt;/span&gt;, the &lt;span&gt;script's document&lt;/span&gt;, the &lt;span&gt;script's referrer source&lt;/span&gt;,
-   the &lt;span&gt;script's URL character encoding&lt;/span&gt;, and the &lt;span&gt;script's base URL&lt;/span&gt; from the
-   settings passed to this algorithm.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;settings object&lt;/span&gt; be the &lt;span&gt;script
+   settings object&lt;/span&gt; provided.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set, then set &lt;var
    data-x=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;muted errors&lt;/span&gt; flag.&lt;/p&gt;&lt;/li&gt;
@@ -78318,8 +78447,9 @@
     &lt;span data-x=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;code
     entry-point&lt;/span&gt;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, &lt;span&gt;report the error&lt;/span&gt; for &lt;var data-x=&quot;&quot;&gt;script&lt;/var&gt;, with the problematic
-    position (line number and column number), using the &lt;span&gt;script's global object&lt;/span&gt; as the
+    position (line number and column number), using the &lt;span&gt;global object&lt;/span&gt; specified by the &lt;span&gt;script settings object&lt;/span&gt; as the
     target. If the error is still &lt;i data-x=&quot;concept-error-nothandled&quot;&gt;not handled&lt;/i&gt; after this,
     then the error may be reported to the user.&lt;/p&gt;
 
@@ -78327,43 +78457,6 @@
 
   &lt;/ol&gt;
 
-  &lt;hr&gt;
-
-  &lt;p&gt;When the specification says that a &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; is to be &lt;dfn
-  data-x=&quot;create a script from a node&quot;&gt;created from a node&lt;/dfn&gt; &lt;var data-x=&quot;&quot;&gt;node&lt;/var&gt;, given some
-  script source, its URL, its scripting language, and optionally a &lt;var data-x=&quot;&quot;&gt;muted errors&lt;/var&gt;
-  flag, the user agent must &lt;span&gt;create a script&lt;/span&gt;, using the given script source, URL, and
-  scripting language, &lt;span&gt;the script settings determined from the node&lt;/span&gt; &lt;var
-  data-x=&quot;&quot;&gt;node&lt;/var&gt;, and, if the &lt;var data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag was set in the call to this
-  algorithm, the &lt;var data-x=&quot;&quot;&gt;muted errors&lt;/var&gt; flag.&lt;/p&gt;
-
-  &lt;p&gt;&lt;dfn&gt;The script settings determined from the node&lt;/dfn&gt; &lt;var data-x=&quot;&quot;&gt;node&lt;/var&gt; are computed
-  as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt; be the &lt;code&gt;Document&lt;/code&gt; of &lt;var data-x=&quot;&quot;&gt;node&lt;/var&gt;
-   (or &lt;var data-x=&quot;&quot;&gt;node&lt;/var&gt; itself if it is a &lt;code&gt;Document&lt;/code&gt;).&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;Window&lt;/code&gt; object of &lt;var
-   data-x=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The browsing context is the &lt;span&gt;browsing context&lt;/span&gt; of &lt;var
-   data-x=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The document is &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The referrer source is &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;The URL character encoding is the &lt;span data-x=&quot;document's character encoding&quot;&gt;character
-   encoding&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=&quot;#sce-not-copy&quot;&gt;This is a reference,
-   not a copy&lt;/a&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The base URL is the &lt;span data-x=&quot;document base URL&quot;&gt;base URL&lt;/span&gt; of &lt;var
-   data-x=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=&quot;#sbu-not-copy&quot;&gt;This is a reference, not a copy&lt;/a&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
   &lt;/div&gt;
 
 
@@ -78495,10 +78588,11 @@
 
   &lt;h6&gt;Runtime script errors in documents&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Whenever an uncaught runtime script error occurs in one of the scripts associated with a
   &lt;code&gt;Document&lt;/code&gt;, the user agent must &lt;span&gt;report the error&lt;/span&gt; for the relevant &lt;span
   data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;, with the problematic position (line number and column
-  number) in the resource containing the script, using the &lt;span&gt;script's global object&lt;/span&gt; as
+  number) in the resource containing the script, using the &lt;span&gt;global object&lt;/span&gt; specified by the script's &lt;span&gt;settings object&lt;/span&gt; as
   the target. If the error is still &lt;i data-x=&quot;concept-error-nothandled&quot;&gt;not handled&lt;/i&gt; after this,
   then the error may be reported to the user.&lt;/p&gt;
 
@@ -78621,7 +78715,7 @@
   the task was queued in the context of a &lt;span&gt;browsing context&lt;/span&gt;, then it is the
   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt; at the time the task was queued; if
   the task was queued by or for a &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; then the document is
-  the &lt;span&gt;script's document&lt;/span&gt;.&lt;/p&gt;
+  the &lt;span&gt;responsible document&lt;/span&gt; specified by the script's &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;A &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; is intended for a specific &lt;span&gt;event loop&lt;/span&gt;:
   the &lt;span&gt;event loop&lt;/span&gt; that is handling &lt;span data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; for the &lt;span
@@ -78735,9 +78829,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;span data-x=&quot;concept-mo-invoke&quot;&gt;Invoke &lt;code&gt;MutationObserver&lt;/code&gt; objects&lt;/span&gt; for the
-    &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; to which the &lt;span&gt;script's
-    browsing context&lt;/span&gt; belongs, using the &lt;span&gt;task wrapper algorithm&lt;/span&gt; as the steps to
+    &lt;span&gt;unit of related similar-origin browsing contexts&lt;/span&gt; to which the &lt;span&gt;responsible
+    browsing context&lt;/span&gt; specified by the script's &lt;span&gt;settings object&lt;/span&gt; belongs, using the &lt;span&gt;task wrapper algorithm&lt;/span&gt; as the steps to
     invoke each callback.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;This will typically invoke scripted callbacks, which calls the &lt;span&gt;jump to a
@@ -78970,10 +79065,10 @@
       data-x=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;span data-x=&quot;the document's address&quot;&gt;address&lt;/span&gt; of the
       &lt;span&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; instead.&lt;/p&gt;
 
-      &lt;p&gt;&lt;span data-x=&quot;create a script from a node&quot;&gt;Create a script&lt;/span&gt; from the
-      &lt;code&gt;Document&lt;/code&gt; node of the &lt;span&gt;active document&lt;/span&gt;, using the aforementioned
-      script source, the &lt;span&gt;URL&lt;/span&gt; of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL,
-      was found, and assuming the scripting language is JavaScript.&lt;/p&gt;
+      &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt;, using the aforementioned script source, the &lt;span&gt;URL&lt;/span&gt;
+      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
+      language, and the &lt;span&gt;script settings object&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object of the
+      &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
 
       &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
       of this &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
@@ -79118,8 +79213,13 @@
 
    &lt;li&gt;&lt;p&gt;Set the corresponding &lt;span data-x=&quot;event handlers&quot;&gt;event handler&lt;/span&gt; to null.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up a &lt;span&gt;script execution environment&lt;/span&gt; for JavaScript.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script settings&lt;/var&gt; be the &lt;span&gt;script settings object&lt;/span&gt; of the
+   &lt;code&gt;Window&lt;/code&gt; object associated with the &lt;span&gt;browsing context&lt;/span&gt; to which belongs the
+   &lt;code&gt;Document&lt;/code&gt; of the element in question.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Obtain the &lt;span&gt;script execution environment&lt;/span&gt; for JavaScript from &lt;var
+   data-x=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;body&lt;/var&gt; be the &lt;span data-x=&quot;event handler content attributes&quot;&gt;event
    handler content attribute&lt;/span&gt;'s new value.&lt;/p&gt;&lt;/li&gt;
 
@@ -79164,7 +79264,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;Using the script execution environment created above, create a function object (as defined in
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;Using the &lt;span&gt;script execution environment&lt;/span&gt; obtained above, create a function object (as defined in
     ECMAScript edition 5 section 13.2 Creating Function Objects), with:&lt;/p&gt;
 
     &lt;dl&gt;
@@ -79227,15 +79328,13 @@
 
     &lt;/dl&gt;
 
-    &lt;p&gt;Let this new function be the script's &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;Let this new function be a new &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Set up the &lt;span&gt;script's global object&lt;/span&gt;, the &lt;span&gt;script's browsing
-   context&lt;/span&gt;, the &lt;span&gt;script's document&lt;/span&gt;, the &lt;span&gt;script's referrer source&lt;/span&gt;,
-   the &lt;span&gt;script's URL character encoding&lt;/span&gt;, and the &lt;span&gt;script's base URL&lt;/span&gt; from
-   &lt;span&gt;the script settings determined from the node&lt;/span&gt; on which the attribute is being
-   set.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let that &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; be
+   &lt;var data-x=&quot;&quot;&gt;script settings&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set the corresponding &lt;span data-x=&quot;event handlers&quot;&gt;event handler&lt;/span&gt; to the
    aforementioned function.&lt;/p&gt;&lt;/li&gt;
@@ -80142,15 +80241,22 @@
    &lt;li&gt;&lt;p&gt;Remove all child nodes of the document, without firing any mutation events.&lt;/p&gt;&lt;/li&gt; &lt;!--
    as of 2009-03-30, only WebKit fired mutation events here. --&gt;
 
-   &lt;li&gt;&lt;p&gt;Replace the &lt;code&gt;Document&lt;/code&gt;'s singleton objects with new instances of those objects.
-   (This includes in particular the &lt;code&gt;Window&lt;/code&gt;, &lt;code&gt;Location&lt;/code&gt;,
-   &lt;code&gt;History&lt;/code&gt;, &lt;code&gt;ApplicationCache&lt;/code&gt;, and &lt;code&gt;Navigator&lt;/code&gt;, objects, the
-   various &lt;code&gt;BarProp&lt;/code&gt; objects, the two &lt;code&gt;Storage&lt;/code&gt; objects, the various
-   &lt;code&gt;HTMLCollection&lt;/code&gt; objects, and objects defined by other specifications, like
-   &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
-   IDL prototypes in the JavaScript binding, including the &lt;code&gt;Document&lt;/code&gt; object's
-   prototype.)&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;
 
+    &lt;p&gt;Replace the &lt;code&gt;Document&lt;/code&gt;'s singleton objects with new instances of those objects.
+    (This includes in particular the &lt;code&gt;Window&lt;/code&gt;, &lt;code&gt;Location&lt;/code&gt;,
+    &lt;code&gt;History&lt;/code&gt;, &lt;code&gt;ApplicationCache&lt;/code&gt;, and &lt;code&gt;Navigator&lt;/code&gt;, objects, the
+    various &lt;code&gt;BarProp&lt;/code&gt; objects, the two &lt;code&gt;Storage&lt;/code&gt; objects, the various
+    &lt;code&gt;HTMLCollection&lt;/code&gt; objects, and objects defined by other specifications, like
+    &lt;code&gt;Selection&lt;/code&gt; and the document's &lt;code&gt;UndoManager&lt;/code&gt;. It also includes all the Web
+    IDL prototypes in the JavaScript binding, including the &lt;code&gt;Document&lt;/code&gt; object's
+    prototype.)&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;The new &lt;code&gt;Window&lt;/code&gt; object has a new &lt;span&gt;script settings
+    object&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%
 0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E --&gt;
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(</A>)%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E --&gt;
 
@@ -80163,9 +80269,10 @@
    &lt;li&gt;&lt;p&gt;Set the &lt;code&gt;Document&lt;/code&gt;'s &lt;i
    data-x=&quot;concept-document-salvageable&quot;&gt;salvageable&lt;/i&gt; state back to true.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Change &lt;span&gt;the document's address&lt;/span&gt; to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span
-   data-x=&quot;script's document&quot;&gt;document&lt;/span&gt;'s &lt;span data-x=&quot;the document's
-   address&quot;&gt;address&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;Change &lt;span&gt;the document's address&lt;/span&gt; to the &lt;span data-x=&quot;the document's
+   address&quot;&gt;address&lt;/span&gt; of the &lt;span&gt;responsible document&lt;/span&gt; specified by
+   the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;!-- &lt;span&gt;the document's referrer&lt;/span&gt; stays the same --&gt;
 
@@ -80649,42 +80756,15 @@
 
          &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script language&lt;/var&gt; be JavaScript.&lt;/p&gt;&lt;/li&gt;
 
-         &lt;li&gt;
+         &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be &lt;var data-x=&quot;&quot;&gt;method context&lt;/var&gt;'s
+         &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-          &lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;Window&lt;/code&gt; object, let &lt;var
-          data-x=&quot;&quot;&gt;global object&lt;/var&gt; be &lt;var data-x=&quot;&quot;&gt;method context&lt;/var&gt;, let &lt;var
-          data-x=&quot;&quot;&gt;browsing context&lt;/var&gt; be the &lt;span&gt;browsing context&lt;/span&gt; with which &lt;var
-          data-x=&quot;&quot;&gt;global object&lt;/var&gt; is associated, let &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt; and &lt;var
-          data-x=&quot;&quot;&gt;referrer source&lt;/var&gt; be the &lt;code&gt;Document&lt;/code&gt; associated with &lt;var
-          data-x=&quot;&quot;&gt;global object&lt;/var&gt;, let &lt;var data-x=&quot;&quot;&gt;character encoding&lt;/var&gt; be the &lt;span
-          data-x=&quot;document's character encoding&quot;&gt;character encoding&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt;
-          associated with &lt;var data-x=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=&quot;#sce-not-copy&quot;&gt;this is a
-          reference, not a copy&lt;/a&gt;), and let &lt;var data-x=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;span
-          data-x=&quot;document base URL&quot;&gt;base URL&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; associated with &lt;var
-          data-x=&quot;&quot;&gt;global object&lt;/var&gt; (&lt;a href=&quot;#sbu-not-copy&quot;&gt;this is a reference, not a
-          copy&lt;/a&gt;).&lt;/p&gt;
+         &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-          &lt;p&gt;Otherwise, &lt;var data-x=&quot;&quot;&gt;method context&lt;/var&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object;
-          let &lt;var data-x=&quot;&quot;&gt;global object&lt;/var&gt;, &lt;var data-x=&quot;&quot;&gt;browsing context&lt;/var&gt;, &lt;var
-          data-x=&quot;&quot;&gt;document&lt;/var&gt;, &lt;var data-x=&quot;&quot;&gt;referrer source&lt;/var&gt;, &lt;var data-x=&quot;&quot;&gt;character
-          encoding&lt;/var&gt;, and &lt;var data-x=&quot;&quot;&gt;base URL&lt;/var&gt; be the &lt;span&gt;script's global object&lt;/span&gt;,
-          &lt;span&gt;script's browsing context&lt;/span&gt;, &lt;span&gt;script's document&lt;/span&gt;, &lt;span&gt;script's
-          referrer source&lt;/span&gt;, &lt;span&gt;script's URL character encoding&lt;/span&gt;, and &lt;span&gt;script's
-          base URL&lt;/span&gt; (respectively) of the &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; that the
-          &lt;span&gt;run a worker&lt;/span&gt; algorithm created when it created &lt;var data-x=&quot;&quot;&gt;method
-          context&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
           &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt; using &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; as the script
           source, the &lt;span&gt;URL&lt;/span&gt; where &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; can be found, &lt;var
-          data-x=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, &lt;var data-x=&quot;&quot;&gt;global
-          object&lt;/var&gt; as the global object, &lt;var data-x=&quot;&quot;&gt;browsing context&lt;/var&gt; as the browsing
-          context, &lt;var data-x=&quot;&quot;&gt;document&lt;/var&gt; as the document, &lt;var data-x=&quot;&quot;&gt;referrer source&lt;/var&gt;
-          as the referrer source, &lt;var data-x=&quot;&quot;&gt;character encoding&lt;/var&gt; as the URL character
-          encoding, and &lt;var data-x=&quot;&quot;&gt;base URL&lt;/var&gt; as the base URL.&lt;/p&gt;
+          data-x=&quot;&quot;&gt;scripting language&lt;/var&gt; as the scripting language, and &lt;var data-x=&quot;&quot;&gt;settings
+          object&lt;/var&gt; as the &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;
 
          &lt;/li&gt;
 
@@ -80696,7 +80776,7 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;If the &lt;var data-x=&quot;&quot;&gt;repeat&lt;/var&gt; flag is true, then call &lt;span&gt;timer initialization
       steps&lt;/span&gt; again, passing them the same method arguments, the same &lt;var data-x=&quot;&quot;&gt;method
@@ -81084,7 +81164,8 @@
    &lt;li&gt;
 
     &lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; relative to the
-    &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;.&lt;/p&gt;
+    &lt;span&gt;API base URL&lt;/span&gt; specified by
+    &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p&gt;If this fails, then throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;
 
@@ -81114,9 +81195,10 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;span&gt;active sandboxing flag set&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of the
-    &lt;span data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent
-    script&lt;/span&gt; has its &lt;span&gt;sandboxed auxiliary navigation browsing context flag&lt;/span&gt; set,
+    &lt;span&gt;responsible browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent
+    script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; has its &lt;span&gt;sandboxed auxiliary navigation browsing context flag&lt;/span&gt; set,
     then return the empty string and abort these steps.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -81176,11 +81258,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Set all the flags in the new browsing context's &lt;span&gt;popup sandboxing flag set&lt;/span&gt; that
     are set in the &lt;span&gt;active sandboxing flag set&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of
-    the &lt;span data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent
-    script&lt;/span&gt;. The &lt;span data-x=&quot;script's browsing
-    context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;
+    the &lt;span&gt;responsible browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent
+    script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;. The &lt;span&gt;responsible browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;
     must be set as the new browsing context's &lt;span&gt;one permitted sandboxed
     navigator&lt;/span&gt;.&lt;/p&gt;
 
@@ -81213,10 +81295,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;&lt;span&gt;Navigate&lt;/span&gt;&lt;!--DONAV showModalDialog--&gt; the new &lt;span&gt;browsing context&lt;/span&gt; to
     the &lt;span&gt;absolute URL&lt;/span&gt; that resulted from &lt;span data-x=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt;
-    &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;span&gt;replacement enabled&lt;/span&gt;, and with the &lt;span
-    data-x=&quot;script's browsing context&quot;&gt;browsing context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;
+    &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; earlier, with &lt;span&gt;replacement enabled&lt;/span&gt;, and with the &lt;span&gt;responsible
+    browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;
     as the &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -81729,9 +81812,10 @@
     argument passed to one of these methods does not contain the exact literal string
     &quot;&lt;code&gt;%s&lt;/code&gt;&quot;.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;User agents must throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception if &lt;span data-x=&quot;resolve a
-    url&quot;&gt;resolving&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the &lt;span&gt;entry
-    script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, is not successful.&lt;/p&gt;
+    url&quot;&gt;resolving&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; argument relative to the
+    &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; is not successful.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;The resulting &lt;span&gt;absolute URL&lt;/span&gt; would by definition not be a &lt;span&gt;valid
     URL&lt;/span&gt; as it would include the string &quot;&lt;code data-x=&quot;&quot;&gt;%s&lt;/code&gt;&quot; which is not a valid
@@ -81747,11 +81831,12 @@
     &lt;p&gt;The resulting &lt;span&gt;absolute URL&lt;/span&gt; is the &lt;dfn&gt;proto-URL&lt;/dfn&gt;. It identifies the
     handler for the purposes of the methods described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;When the user agent uses this handler, it must replace the first occurrence of the exact
     literal string &quot;&lt;code data-x=&quot;&quot;&gt;%s&lt;/code&gt;&quot; in the &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt; argument with an
     escaped version of the &lt;span&gt;absolute URL&lt;/span&gt; of the content in question (as defined below),
-    then &lt;span data-x=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the resulting URL, relative to the &lt;span
-    data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; at the time the &lt;code
+    then &lt;span data-x=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the resulting URL, relative to the &lt;span&gt;API
+    base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; at the time the &lt;code
     data-x=&quot;dom-navigator-registerContentHandler&quot;&gt;registerContentHandler()&lt;/code&gt; or &lt;code
     data-x=&quot;dom-navigator-registerProtocolHandler&quot;&gt;registerProtocolHandler()&lt;/code&gt; methods were
     invoked, and then &lt;span&gt;navigate&lt;/span&gt;&lt;!--DONAV user--&gt; an appropriate &lt;span&gt;browsing
@@ -81994,8 +82079,9 @@
    &lt;li&gt;&lt;p&gt;If the string does not contain the substring &quot;&lt;code data-x=&quot;&quot;&gt;%s&lt;/code&gt;&quot;, abort these
    steps. There's no matching handler.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a URL&quot;&gt;Resolve&lt;/span&gt; the string relative to the &lt;span
-   data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a URL&quot;&gt;Resolve&lt;/span&gt; the string relative to the &lt;span&gt;API base URL&lt;/span&gt;
+   specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, then throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception, aborting the
    method.&lt;/p&gt;&lt;/li&gt;
@@ -82717,9 +82803,9 @@
     never does anything, or may arbitrarily ignore invocations with particular arguments for
     security, privacy, or usability reasons.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the value of the method's first argument
-    relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base
-    URL&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+    relative to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, abort these steps.&lt;/p&gt;&lt;/li&gt;
 
@@ -82746,9 +82832,10 @@
     &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;host1&lt;/var&gt; be the host component of the &lt;span&gt;origin&lt;/span&gt; of the
     &lt;span&gt;entry script&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-    relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base
-    URL&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+    relative to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings
+    object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
     &lt;li&gt;&lt;p&gt;If this fails, return 0 and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
@@ -87304,9 +87391,10 @@
 
   &lt;ol&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; specified in the first
-   argument, relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base
-   URL&lt;/span&gt;.
+   argument, relative to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;.
    &lt;!--END complete--&gt;
    &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;
    &lt;!--START complete--&gt;
@@ -87332,9 +87420,10 @@
 
    &lt;li&gt;&lt;!-- if you change this, don't forget to update the reconnecting fetch lower down as well! --&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Do a &lt;span&gt;potentially CORS-enabled fetch&lt;/span&gt;&lt;!--FETCH--&gt; of the resulting &lt;span&gt;absolute
-    URL&lt;/span&gt; using the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's referrer source&quot;&gt;referrer
-    source&lt;/span&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var data-x=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i
+    URL&lt;/span&gt; using the &lt;span&gt;API referrer source&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings
+    object&lt;/span&gt;, with the &lt;i&gt;mode&lt;/i&gt; being &lt;var data-x=&quot;&quot;&gt;CORS mode&lt;/var&gt;, and the &lt;i
     data-x=&quot;&quot;&gt;origin&lt;/i&gt; being the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;origin&lt;/span&gt;&lt;!--, and the
     &lt;i&gt;default origin behaviour&lt;/i&gt; set to &lt;i&gt;fail&lt;/i&gt; (though it has no effect in the &quot;Anonymous&quot;
     and &quot;Use Credentials&quot; modes)--&gt;, and process the resource obtained in this fashion, if any, as
@@ -89237,7 +89326,7 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;message clone&lt;/var&gt; be the result of obtaining a &lt;span&gt;structured
     clone&lt;/span&gt; of the &lt;var data-x=&quot;&quot;&gt;message&lt;/var&gt; argument, with &lt;var data-x=&quot;&quot;&gt;transfer map&lt;/var&gt;
@@ -89253,14 +89342,14 @@
 
     &lt;ol&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;code&gt;Window&lt;/code&gt; object on which the method was
+      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;span&gt;script settings object&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the method was
       invoked.&lt;/p&gt;
 
      &lt;/li&gt;
 
-     &lt;li&gt;
+     &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
       &lt;p&gt;For each object &lt;var data-x=&quot;&quot;&gt;x&lt;/var&gt; in &lt;var data-x=&quot;&quot;&gt;transfer&lt;/var&gt; in turn, obtain a new
       object &lt;var data-x=&quot;&quot;&gt;y&lt;/var&gt; by &lt;span data-x=&quot;transfer a Transferable
@@ -89275,7 +89364,7 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;!--CLEANUP--&gt;&lt;!--no need for all this whitespace--&gt;
 
     &lt;p&gt;Make &lt;var data-x=&quot;&quot;&gt;new ports&lt;/var&gt; into a &lt;span data-x=&quot;dfn-read-only-array&quot;&gt;read only&lt;/span&gt;
     array.&lt;/p&gt;
@@ -89291,10 +89380,11 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;If the &lt;var data-x=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is a single literal U+002F SOLIDUS character
     (/), and the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the method was
-    invoked does not have the &lt;span&gt;same origin&lt;/span&gt; as the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span
-    data-x=&quot;script's document&quot;&gt;document&lt;/span&gt;, then abort these steps silently.&lt;/p&gt;
+    invoked does not have the &lt;span&gt;same origin&lt;/span&gt; as the &lt;span&gt;responsible document&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings
+    object&lt;/span&gt;, then abort these steps silently.&lt;/p&gt;
 
     &lt;p&gt;Otherwise, if the &lt;var data-x=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument is an &lt;span&gt;absolute URL&lt;/span&gt;,
     and the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the method was invoked
@@ -89308,6 +89398,7 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a &lt;span data-x=&quot;concept-events-trusted&quot;&gt;trusted&lt;/span&gt; event that uses the
     &lt;code&gt;MessageEvent&lt;/code&gt; interface, with the event type &lt;code
     data-x=&quot;event-message&quot;&gt;message&lt;/code&gt;, which does not bubble, is not cancelable, and has no
@@ -89317,7 +89408,10 @@
     data-x=&quot;Unicode serialization of an origin&quot;&gt;Unicode serialization&lt;/span&gt; of the
     &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;, the &lt;code
     data-x=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt; attribute must be initialized to the
-    &lt;span&gt;script's global object&lt;/span&gt;'s &lt;code&gt;WindowProxy&lt;/code&gt; object, and the &lt;code
+    &lt;code&gt;WindowProxy&lt;/code&gt; object corresponding to the
+    &lt;span&gt;global object&lt;/span&gt; (a &lt;code&gt;Window&lt;/code&gt; object) specified by the
+    &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;,
+    and the &lt;code
     data-x=&quot;dom-MessageEvent-ports&quot;&gt;ports&lt;/code&gt; attribute must be initialized to the &lt;var
     data-x=&quot;&quot;&gt;new ports&lt;/var&gt; array.
     &lt;!--END complete--&gt;
@@ -89575,11 +89669,15 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span&gt;script's
-   global object&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   is the &lt;span&gt;settings object&lt;/span&gt;
+   of the &lt;span&gt;incumbent script&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span&gt;script's
-   global object&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   is the &lt;span&gt;settings object&lt;/span&gt;
+   of the &lt;span&gt;incumbent script&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/p&gt;&lt;/li&gt;
@@ -89670,21 +89768,31 @@
   message queue&lt;/dfn&gt;, initially empty. A &lt;span&gt;port message queue&lt;/span&gt; can be enabled or
   disabled, and is initially disabled. Once enabled, a port can never be disabled again (though
   messages in the queue can get moved to another queue or removed altogether, which has much the
-  same effect). A &lt;code&gt;MessagePort&lt;/code&gt; also has a &lt;dfn&gt;has been shipped&lt;/dfn&gt; flag. It must
-  initially be false.&lt;/p&gt;
+  same effect). A &lt;code&gt;MessagePort&lt;/code&gt; also has a &lt;dfn&gt;has been shipped&lt;/dfn&gt; flag, which must
+  initially be false, and an &lt;dfn data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/dfn&gt;, which is a &lt;span&gt;settings
+  object&lt;/span&gt; set when the object is created, as described below.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a port's &lt;span&gt;port message queue&lt;/span&gt; is enabled, the &lt;span&gt;event loop&lt;/span&gt; must use
-  it as one of its &lt;span data-x=&quot;task source&quot;&gt;task sources&lt;/span&gt;.&lt;/p&gt;
+  it as one of its &lt;span data-x=&quot;task source&quot;&gt;task sources&lt;/span&gt;. All &lt;span
+  data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; &lt;span data-x=&quot;queue a task&quot;&gt;queued&lt;/span&gt; on the &lt;span&gt;port
+  message queue&lt;/span&gt; must be associated with the &lt;span&gt;responsible document&lt;/span&gt; specified by
+  the port's &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;If the &lt;code&gt;Document&lt;/code&gt; of the port's event listeners' &lt;span data-x=&quot;script's
-  global object&quot;&gt;global object&lt;/span&gt; is not &lt;span&gt;fully active&lt;/span&gt;, then the messages are
+&lt;!--CLEANUP--&gt;
+  &lt;p class=&quot;note&quot;&gt;If the port's &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; specifies a &lt;span&gt;responsible document&lt;/span&gt; that is &lt;span&gt;fully active&lt;/span&gt;,
+  but the event listeners all have scripts whose &lt;span data-x=&quot;settings object&quot;&gt;settings objects&lt;/span&gt;
+  specify &lt;span data-x=&quot;responsible document&quot;&gt;responsible documents&lt;/span&gt; that are &lt;em&gt;not&lt;/em&gt; &lt;span&gt;fully active&lt;/span&gt;, then the messages will be
   lost.&lt;/p&gt; &lt;!-- because of the jump-to-entry-point algorithm first step --&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Each &lt;span&gt;event loop&lt;/span&gt; has a &lt;span&gt;task source&lt;/span&gt; called the &lt;dfn&gt;unshipped port
   message queue&lt;/dfn&gt;. This is a virtual &lt;span&gt;task source&lt;/span&gt;: it must act as if it contained
   the &lt;span data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; of each &lt;span&gt;port message queue&lt;/span&gt; of each
-  &lt;code&gt;MessagePort&lt;/code&gt; whose &lt;span&gt;has been shipped&lt;/span&gt; flag is false and whose &lt;span&gt;port
-  message queue&lt;/span&gt; is enabled, in the order in which they were added to their respective
+  &lt;code&gt;MessagePort&lt;/code&gt; whose &lt;span&gt;has been shipped&lt;/span&gt; flag is false, whose &lt;span&gt;port
+  message queue&lt;/span&gt; is enabled, and whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+  specifies that &lt;span&gt;event loop&lt;/span&gt; as the &lt;span&gt;responsible event loop&lt;/span&gt;,
+  in the order in which they were added to their respective
   &lt;span&gt;task source&lt;/span&gt;. When a &lt;span data-x=&quot;concept-task&quot;&gt;task&lt;/span&gt; would be removed from the
   &lt;span&gt;unshipped port message queue&lt;/span&gt;, it must instead be removed from its &lt;span&gt;port message
   queue&lt;/span&gt;.&lt;/p&gt;
@@ -89699,9 +89807,10 @@
   is true, its &lt;span&gt;port message queue&lt;/span&gt; acts as a first-class &lt;span&gt;task source&lt;/span&gt;,
   unaffected to any &lt;span&gt;unshipped port message queue&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;When the user agent is to &lt;dfn&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; owned by a
-  &lt;span&gt;script's global object&lt;/span&gt; object &lt;var data-x=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
-  &lt;code&gt;MessagePort&lt;/code&gt; object, and let its owner be &lt;var data-x=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When the user agent is to &lt;dfn&gt;create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/dfn&gt; with a particular
+  &lt;span&gt;settings object&lt;/span&gt; as its &lt;var data-x=&quot;&quot;&gt;owner&lt;/var&gt;, it must instantiate a new
+  &lt;code&gt;MessagePort&lt;/code&gt; object, and let its &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; be &lt;var data-x=&quot;&quot;&gt;owner&lt;/var&gt;.&lt;/p&gt;
 
   &lt;p&gt;When the user agent is to &lt;dfn&gt;entangle&lt;/dfn&gt; two &lt;code&gt;MessagePort&lt;/code&gt; objects, it must run
   the following steps:&lt;/p&gt;
@@ -89745,7 +89854,7 @@
    &lt;li&gt;&lt;p&gt;Set &lt;var data-x=&quot;&quot;&gt;original port&lt;/var&gt;'s &lt;span&gt;has been shipped&lt;/span&gt; flag to
    true.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by &lt;var
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is &lt;var
    data-x=&quot;&quot;&gt;owner&lt;/var&gt;, and let &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set &lt;var data-x=&quot;&quot;&gt;new port&lt;/var&gt;'s &lt;span&gt;has been shipped&lt;/span&gt; flag to true.&lt;/p&gt;&lt;/li&gt;
@@ -89872,7 +89981,8 @@
 
      &lt;li&gt;
 
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;new owner&lt;/var&gt; be the owner of &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;, if there
+&lt;!--CLEANUP--&gt;
+      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;new owner&lt;/var&gt; be the &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;, if there
       is a &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;, or else some arbitrary owner. (This &lt;var data-x=&quot;&quot;&gt;new
       owner&lt;/var&gt; is used when transferring objects below. If there is no &lt;var data-x=&quot;&quot;&gt;target
       port&lt;/var&gt;, the &lt;code&gt;Transferable&lt;/code&gt; objects given in the second argument, if any, are
@@ -89943,8 +90053,9 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;message&lt;/var&gt; be the method's first argument.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span&gt;script's
-   global object&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;, and let &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;var data-x=&quot;&quot;&gt;source port&lt;/var&gt; is not entangled with another port, then return
    &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt; &lt;!- - we don't throw an exception
@@ -89954,8 +90065,9 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt; be the port with which &lt;var data-x=&quot;&quot;&gt;source port&lt;/var&gt;
    is entangled.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the owner of the &lt;var
-   data-x=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span
+   data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is the &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; of
+   the &lt;var data-x=&quot;&quot;&gt;target port&lt;/var&gt;, and let &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt; be that object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;port1&lt;/var&gt; and &lt;var data-x=&quot;&quot;&gt;port2&lt;/var&gt;
    objects.&lt;/p&gt;&lt;/li&gt;
@@ -90132,9 +90244,10 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a &lt;code&gt;MessagePort&lt;/code&gt; object &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; is entangled, user agents must
   either act as if &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s entangled &lt;code&gt;MessagePort&lt;/code&gt; object has a strong
-  reference to &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;, or as if &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s owner has a strong reference
+  reference to &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;, or as if the &lt;span&gt;global object&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; has a strong reference
   to &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;div class=&quot;note&quot;&gt;
@@ -90729,7 +90842,7 @@
   environment&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;Shared workers receive message ports through &lt;code
-  data-x=&quot;event-WorkerGlobalScope-connect&quot;&gt;connect&lt;/code&gt; events on their global object for each
+  data-x=&quot;event-WorkerGlobalScope-connect&quot;&gt;connect&lt;/code&gt; events on their &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object for each
   connection.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn data-x=&quot;dom-SharedWorkerGlobalScope-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute must return
@@ -90820,14 +90933,15 @@
   it must be removed from the list of &lt;span&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt; of each
   worker whose list contains that &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
-  &lt;p&gt;Given a &lt;span&gt;script's global object&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;Given a &lt;span&gt;settings object&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; when creating or obtaining a
   worker, the &lt;dfn&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to add&lt;/dfn&gt; depends on the type
-  of &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;. If &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object
+  of &lt;span&gt;global object&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s. If &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;
+  specifies a &lt;span&gt;global object&lt;/span&gt; that is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object
   (i.e. if we are creating a nested worker), then the relevant &lt;code&gt;Document&lt;/code&gt;s are the
-  &lt;code&gt;Document&lt;/code&gt;s that are in &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;'s own list of &lt;span&gt;the worker's
-  &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt;. Otherwise, &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; is a &lt;code&gt;Window&lt;/code&gt; object,
-  and the relevant &lt;code&gt;Document&lt;/code&gt; is just the &lt;code&gt;Document&lt;/code&gt; that is the &lt;span&gt;active
-  document&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
+  &lt;span&gt;the worker's &lt;code&gt;Document&lt;/code&gt;s&lt;/span&gt; of the &lt;span&gt;global object&lt;/span&gt; specified by
+  &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;. Otherwise, &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt; specifies a &lt;span&gt;global object&lt;/span&gt; that is a &lt;code&gt;Window&lt;/code&gt; object,
+  and the relevant &lt;code&gt;Document&lt;/code&gt; is just the &lt;span&gt;responsible document&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;o&lt;/var&gt;.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -90848,10 +90962,10 @@
 
   &lt;h4&gt;Processing model&lt;/h4&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a user agent is to &lt;dfn&gt;run a worker&lt;/dfn&gt; for a script with &lt;span&gt;URL&lt;/span&gt; &lt;var
-  data-x=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;span&gt;browsing context&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, a
-  &lt;code&gt;Document&lt;/code&gt; &lt;var data-x=&quot;&quot;&gt;owner document&lt;/var&gt;, an &lt;span&gt;origin&lt;/span&gt; &lt;var
-  data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with global scope &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it
+  data-x=&quot;&quot;&gt;url&lt;/var&gt;, a &lt;span&gt;script settings object&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;,
+  and an &lt;span&gt;origin&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;, it
   must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
@@ -90866,6 +90980,9 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; be the &lt;span&gt;global object&lt;/span&gt; specified
+   by &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; is actually a
    &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object (i.e. the worker is a shared worker), and there are
    any &lt;span data-x=&quot;relevant application cache&quot;&gt;relevant application caches&lt;/span&gt; that are
@@ -90878,8 +90995,8 @@
    &lt;li&gt;
 
     &lt;p&gt;Attempt to &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; the resource identified by &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;,
-    from the &lt;var data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;, using &lt;var data-x=&quot;&quot;&gt;owner document&lt;/var&gt; as the
-    &lt;span&gt;referrer source&lt;/span&gt;, with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
+    from the &lt;var data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;, using the &lt;span&gt;responsible document&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; as the
+    &lt;span&gt;referrer source&lt;/span&gt; (not the specified &lt;span&gt;API referrer source&lt;/span&gt;!), with the &lt;i&gt;synchronous flag&lt;/i&gt; set and the &lt;i&gt;force same-origin
     flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not http-origin privacy sensitive (looking forward to CORS) --&gt;
 
     &lt;p&gt;If the attempt fails, then for each &lt;code&gt;Worker&lt;/code&gt; or &lt;code&gt;SharedWorker&lt;/code&gt; object
@@ -90908,30 +91025,18 @@
 
    &lt;li&gt;&lt;!-- SCRIPT EXEC --&gt;
 
-    &lt;p&gt;A new &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; is now created, as follows.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script&lt;/var&gt; be a new &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Create a new &lt;span&gt;script execution environment&lt;/span&gt; set up as appropriate for the
-    scripting language &lt;var data-x=&quot;&quot;&gt;language&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Obtain the appropriate &lt;span&gt;script execution environment&lt;/span&gt; for the scripting language
+    &lt;var data-x=&quot;&quot;&gt;language&lt;/var&gt; from &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/p&gt;
 
     &lt;p&gt;Parse/compile/initialize &lt;var data-x=&quot;&quot;&gt;source&lt;/var&gt; using that &lt;span&gt;script execution
     environment&lt;/span&gt;, as appropriate for &lt;var data-x=&quot;&quot;&gt;language&lt;/var&gt;, and thus obtain a
     &lt;span&gt;code entry-point&lt;/span&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;span&gt;script's global object&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+    &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script&lt;/var&gt;'s &lt;span&gt;settings object&lt;/span&gt; be &lt;var data-x=&quot;&quot;&gt;settings
+    object&lt;/var&gt;.&lt;/p&gt;
 
-    &lt;p&gt;Set the &lt;span&gt;script's browsing context&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;span&gt;script's document&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;owner document&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;span&gt;script's referrer source&lt;/span&gt; to &lt;var
-    data-x=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;span&gt;script's URL character encoding&lt;/span&gt; to UTF-8. (This is just used for
-    encoding non-ASCII characters in the query component of URLs.)&lt;/p&gt;
-
-    &lt;p&gt;Set the &lt;span&gt;script's base URL&lt;/span&gt; to &lt;var data-x=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -90980,8 +91085,8 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;strong&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/strong&gt;: Create a new &lt;span&gt;event
-    loop&lt;/span&gt;, and run it until it is destroyed.&lt;/p&gt;
+    &lt;p&gt;&lt;strong&gt;Event loop&lt;!-- labeled for ease of discussion --&gt;&lt;/strong&gt;: Run the &lt;span&gt;responsible
+    event loop&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; until it is destroyed.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;The handling of events or the execution of callbacks by &lt;span
     data-x=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; run by the &lt;span&gt;event loop&lt;/span&gt; might get prematurely
@@ -91166,7 +91271,105 @@
   &lt;/table&gt;
 
 
+  &lt;h5&gt;Script settings for workers&lt;/h5&gt;
 
+  &lt;p&gt;When the user agent is required to &lt;dfn&gt;set up a worker script settings object&lt;/dfn&gt;, given a
+  &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt; be the &lt;span&gt;responsible
+   browsing context&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;inherited responsible document&lt;/var&gt; be the &lt;span&gt;responsible
+   document&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings
+   object&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;worker event loop&lt;/var&gt; be a newly created &lt;span&gt;event
+   loop&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be a new &lt;span&gt;script settings object&lt;/span&gt; whose
+    algorithms are defined as follows:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;The &lt;span data-x=&quot;script execution environment&quot;&gt;script execution environments&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;When the &lt;span&gt;script settings object&lt;/span&gt; is created, for each language supported by the
+      user agent, create an appropriate execution environment as defined by the relevant
+      specification.&lt;/p&gt;
+
+      &lt;p&gt;When a &lt;span&gt;script execution environment&lt;/span&gt; is needed, return the appropriate one from
+      those created when the &lt;span&gt;script settings object&lt;/span&gt; was created.&lt;/p&gt;
+
+      &lt;p class=&quot;note&quot;&gt;Currently, workers only support JavaScript, so only a JavaScript execution
+      environment is actually needed here.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;global object&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;responsible browsing context&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;inherited responsible browsing context&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;responsible document&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;inherited responsible document&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;responsible event loop&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;worker event loop&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;API referrer source&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return the &lt;code&gt;Document&lt;/code&gt; with which the &lt;code&gt;Window&lt;/code&gt; is currently
+      associated.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;API URL character encoding&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return UTF-8.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;The &lt;span&gt;API base URL&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;
+
+      &lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;worker URL&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+
   &lt;h5&gt;Dedicated workers and the &lt;code&gt;Worker&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=&quot;idl&quot;&gt;[&lt;span data-x=&quot;dom-Worker&quot;&gt;Constructor&lt;/span&gt;(DOMString scriptURL)]
@@ -91234,17 +91437,21 @@
    the request violates a policy decision (e.g. if the user agent is configured to not allow the
    page to start dedicated workers).&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
    &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;var data-x=&quot;&quot;&gt;scriptURL&lt;/var&gt; argument
-   relative to the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's base URL&quot;&gt;base URL&lt;/span&gt;, when
-   the method is invoked.&lt;/p&gt;&lt;/li&gt;
+   relative to the &lt;span&gt;API base URL&lt;/span&gt; specified by the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; when
+   the method was invoked.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If this fails, throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;worker URL&lt;/var&gt; be the resulting &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;span data-x=&quot;concept-url-scheme&quot;&gt;scheme&lt;/span&gt; component of the resulting &lt;span&gt;parsed
-    URL&lt;/span&gt; is not &quot;&lt;code data-x=&quot;data-protocol&quot;&gt;data&lt;/code&gt;&quot;, and the &lt;span&gt;origin&lt;/span&gt; of the
-    resulting &lt;span&gt;absolute URL&lt;/span&gt; is not the &lt;span data-x=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;span data-x=&quot;concept-url-scheme&quot;&gt;scheme&lt;/span&gt; component of &lt;var data-x=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not &quot;&lt;code data-x=&quot;data-protocol&quot;&gt;data&lt;/code&gt;&quot;, and the &lt;span&gt;origin&lt;/span&gt; of &lt;var data-x=&quot;&quot;&gt;worker URL&lt;/var&gt;
+    is not the &lt;span data-x=&quot;same origin&quot;&gt;same&lt;/span&gt; as the
     origin of the &lt;span&gt;entry script&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
@@ -91260,17 +91467,22 @@
    origin&lt;/span&gt; is the origin of the &lt;span&gt;entry script&lt;/span&gt;. Let &lt;var data-x=&quot;&quot;&gt;worker global
    scope&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Set up a worker script settings object&lt;/span&gt; with &lt;var data-x=&quot;&quot;&gt;worker global
+   scope&lt;/var&gt;, and let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;Worker&lt;/code&gt; object, associated with &lt;var data-x=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;. Let &lt;var data-x=&quot;&quot;&gt;worker&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span
-   data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;. Let
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+   is the &lt;span&gt;settings object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;. Let
    this be the &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate the &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt; with &lt;var data-x=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by &lt;var data-x=&quot;&quot;&gt;worker
-   global scope&lt;/var&gt;. Let &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is &lt;var data-x=&quot;&quot;&gt;script settings&lt;/var&gt;
+   Let &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Associate &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt; with &lt;var data-x=&quot;&quot;&gt;worker global
    scope&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -91288,8 +91500,9 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;span&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/span&gt; given the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the
+    add&lt;/span&gt; given the &lt;span&gt;settings object&lt;/span&gt; of the
     &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -91304,22 +91517,20 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent
-    script&lt;/span&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object (i.e. we are creating a nested worker),
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;span&gt;global object&lt;/span&gt; specified by the &lt;span&gt;incumbent
+    script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object (i.e. we are creating a nested worker),
     add &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;span&gt;the worker's workers&lt;/span&gt; of
-    the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span data-x=&quot;script's global
-    object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;
+    the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the resulting &lt;span&gt;absolute URL&lt;/span&gt;, with the
-    &lt;span&gt;script's browsing context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt; as the &lt;var
-    data-x=&quot;&quot;&gt;owner browsing context&lt;/var&gt;, with the &lt;span&gt;script's document&lt;/span&gt; of the
-    &lt;span&gt;incumbent script&lt;/span&gt; as the &lt;var data-x=&quot;&quot;&gt;owner document&lt;/var&gt;, with the
-    &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; as the &lt;var data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;,
-    and with &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;worker
+    URL&lt;/var&gt;, the &lt;span&gt;script settings object&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;, and the
+    &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; as the &lt;var data-x=&quot;&quot;&gt;owner
+    origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -91379,7 +91590,7 @@
    &lt;li&gt;
 
     &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;docs&lt;/var&gt; be the &lt;span&gt;list of relevant &lt;code&gt;Document&lt;/code&gt; objects to
-    add&lt;/span&gt; given the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the
+    add&lt;/span&gt; given the &lt;span&gt;settings object&lt;/span&gt; of the
     &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -91394,8 +91605,9 @@
      &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object. Let this &lt;code&gt;SharedWorker&lt;/code&gt; object be &lt;var
      data-x=&quot;&quot;&gt;worker&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by the &lt;span
-     data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;. Let
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+     is the &lt;span&gt;settings object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;. Let
      this be the &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Assign &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt; to the &lt;code
@@ -91451,9 +91663,13 @@
        &lt;li&gt;&lt;p&gt;Associate &lt;var data-x=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var data-x=&quot;&quot;&gt;worker global
        scope&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-       &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by &lt;var
-       data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;. Let this be the &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;span&gt;script settings object&lt;/span&gt;
+       whose &lt;span&gt;global object&lt;/span&gt; is &lt;var data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
+&lt;!--CLEANUP--&gt;
+       &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt;
+       is &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;. Let this be the &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
        &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt;
        and &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -91479,11 +91695,12 @@
 
        &lt;li&gt;
 
-        &lt;p&gt;If the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent
-        script&lt;/span&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object, add &lt;var data-x=&quot;&quot;&gt;worker global
+&lt;!--CLEANUP--&gt;
+        &lt;p&gt;If the &lt;span&gt;global object&lt;/span&gt; specified by the &lt;span&gt;incumbent
+        script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object, add &lt;var data-x=&quot;&quot;&gt;worker global
         scope&lt;/var&gt; to the list of &lt;span&gt;the worker's workers&lt;/span&gt; of the
-        &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span data-x=&quot;script's global
-        object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;
+        &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span&gt;global
+        object&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
        &lt;/li&gt;
 
@@ -91493,18 +91710,24 @@
 
      &lt;/li&gt;
 
+     &lt;!-- OTHERWISE: --&gt;
+
      &lt;li&gt;&lt;p&gt;Create a new &lt;code&gt;SharedWorkerGlobalScope&lt;/code&gt; object whose &lt;span&gt;worker
      origin&lt;/span&gt; is the origin of the &lt;span&gt;entry script&lt;/span&gt;. Let &lt;var data-x=&quot;&quot;&gt;worker global
      scope&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
 
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Set up a worker script settings object&lt;/span&gt; with &lt;var data-x=&quot;&quot;&gt;worker global
+     scope&lt;/var&gt;, and let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be the result.&lt;/p&gt;&lt;/li&gt;
+
      &lt;li&gt;&lt;p&gt;Associate &lt;var data-x=&quot;&quot;&gt;worker&lt;/var&gt; with &lt;var data-x=&quot;&quot;&gt;worker global
      scope&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Set the &lt;code data-x=&quot;dom-SharedWorkerGlobalScope-name&quot;&gt;name&lt;/code&gt; attribute of &lt;var
      data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; to &lt;var data-x=&quot;&quot;&gt;name&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; owned by &lt;var data-x=&quot;&quot;&gt;worker
-     global scope&lt;/var&gt;. Let &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
+&lt;!--CLEANUP--&gt;
+     &lt;li&gt;&lt;p&gt;&lt;span&gt;Create a new &lt;code&gt;MessagePort&lt;/code&gt; object&lt;/span&gt; whose &lt;span data-x=&quot;concept-port-owner&quot;&gt;owner&lt;/span&gt; is &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt;.
+     Let &lt;var data-x=&quot;&quot;&gt;inside port&lt;/var&gt; be this new object.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;&lt;span&gt;Entangle&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;outside port&lt;/var&gt; and &lt;var data-x=&quot;&quot;&gt;inside
      port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -91536,22 +91759,21 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the &lt;span data-x=&quot;script's global object&quot;&gt;global object&lt;/span&gt; of the &lt;span&gt;incumbent
-    script&lt;/span&gt; that invoked the constructor is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object, add &lt;var
+&lt;!--CLEANUP--&gt;
+    &lt;p&gt;If the &lt;span&gt;global object&lt;/span&gt; specified by the &lt;span&gt;settings object&lt;/span&gt; of the &lt;span&gt;incumbent
+    script&lt;/span&gt; is a &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object, add &lt;var
     data-x=&quot;&quot;&gt;worker global scope&lt;/var&gt; to the list of &lt;span&gt;the worker's workers&lt;/span&gt; of the
-    &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span data-x=&quot;script's global object&quot;&gt;global
-    object&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;
+    &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object that is the &lt;span&gt;global
+    object&lt;/span&gt; specified by the &lt;span&gt;incumbent script&lt;/span&gt;'s &lt;span&gt;settings object&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for &lt;var data-x=&quot;&quot;&gt;scriptURL&lt;/var&gt;, with the &lt;span&gt;script's browsing
-    context&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt; as the &lt;var data-x=&quot;&quot;&gt;owner browsing
-    context&lt;/var&gt;, with the &lt;span&gt;script's document&lt;/span&gt; of the &lt;span&gt;incumbent script&lt;/span&gt; the
-    &lt;var data-x=&quot;&quot;&gt;owner document&lt;/var&gt;, with the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry
-    script&lt;/span&gt; as the &lt;var data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;, and with &lt;var data-x=&quot;&quot;&gt;worker global
-    scope&lt;/var&gt; as the global scope.&lt;/p&gt;
+    &lt;p&gt;&lt;span&gt;Run a worker&lt;/span&gt; for the script with &lt;span&gt;URL&lt;/span&gt; &lt;var
+    data-x=&quot;&quot;&gt;scriptURL&lt;/var&gt;, the &lt;span&gt;script settings object&lt;/span&gt; &lt;var data-x=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; as the &lt;var
+    data-x=&quot;&quot;&gt;owner origin&lt;/var&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -91594,16 +91816,20 @@
 
    &lt;li&gt;&lt;p&gt;If there are no arguments, return without doing anything. Abort these steps.&lt;/p&gt;&lt;/li&gt;
 
+   &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; be the &lt;span&gt;script settings object&lt;/span&gt; of the
+   &lt;span&gt;incumbent script&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;&lt;span data-x=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; each argument.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any fail, throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Attempt to &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; each resource identified by the resulting &lt;span
     data-x=&quot;absolute URL&quot;&gt;absolute URLs&lt;/span&gt;, from the &lt;span&gt;entry script&lt;/span&gt;'s
-    &lt;span&gt;origin&lt;/span&gt;, using the &lt;span&gt;entry script&lt;/span&gt;'s &lt;span data-x=&quot;script's referrer
-    source&quot;&gt;referrer source&lt;/span&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
+    &lt;span&gt;origin&lt;/span&gt;, using the &lt;span&gt;API referrer source&lt;/span&gt; specified by &lt;var data-x=&quot;&quot;&gt;settings
+    object&lt;/var&gt;, and with the &lt;i&gt;synchronous flag&lt;/i&gt; set.&lt;/p&gt; &lt;!-- not
     http-origin privacy sensitive --&gt;
 
    &lt;/li&gt;
@@ -91634,16 +91860,14 @@
 
      &lt;li&gt;
 
-      &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt;, using &lt;var data-x=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
-      &lt;span&gt;URL&lt;/span&gt; from which &lt;var data-x=&quot;&quot;&gt;source&lt;/var&gt; was obtained, and &lt;var
-      data-x=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, using the same global object, browsing
-      context, document, referrer source, URL character encoding, and base URL as the &lt;span
-      data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; that was created by the worker's &lt;span&gt;run a
-      worker&lt;/span&gt; algorithm.&lt;/p&gt;
+      &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt; using &lt;var data-x=&quot;&quot;&gt;source&lt;/var&gt; as the script source, the
+      &lt;span&gt;URL&lt;/span&gt; from which &lt;var data-x=&quot;&quot;&gt;source&lt;/var&gt; was obtained, &lt;var
+      data-x=&quot;&quot;&gt;language&lt;/var&gt; as the scripting language, and &lt;var data-x=&quot;&quot;&gt;settings object&lt;/var&gt; as
+      the &lt;span&gt;script settings object&lt;/span&gt;.&lt;/p&gt;
 
       &lt;p&gt;If the script came from a resource whose &lt;span&gt;URL&lt;/span&gt; does not have the &lt;span&gt;same
       origin&lt;/span&gt; as the &lt;span&gt;worker origin&lt;/span&gt;, then pass the &lt;var data-x=&quot;&quot;&gt;muted
-      errors&lt;/var&gt; flag to the &lt;span&gt;create a script from a node&lt;/span&gt; algorithm.&lt;/p&gt;
+      errors&lt;/var&gt; flag to the &lt;span&gt;create a script&lt;/span&gt; algorithm as well.&lt;/p&gt;
 
       &lt;p&gt;Let the newly created &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; run until it either
       returns, fails to parse, fails to catch an exception, or gets prematurely aborted by the
@@ -105612,7 +105836,7 @@
    &lt;li&gt;None of the elements in the &lt;code&gt;Document&lt;/code&gt; are in any of the following namespaces: &lt;span&gt;HTML namespace&lt;/span&gt;, &lt;span&gt;SVG namespace&lt;/span&gt;, &lt;span&gt;MathML namespace&lt;/span&gt;
    &lt;li&gt;The &lt;code&gt;Document&lt;/code&gt; has no &lt;span&gt;focusable&lt;/span&gt; elements (e.g. from XLink).
    &lt;li&gt;The &lt;code&gt;Document&lt;/code&gt; has no &lt;span data-x=&quot;hyperlink&quot;&gt;hyperlinks&lt;/span&gt; (e.g. from XLink).
-   &lt;li&gt;There exists no &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; whose &lt;span data-x=&quot;script's document&quot;&gt;document&lt;/span&gt; is this &lt;code&gt;Document&lt;/code&gt;.
+   &lt;li&gt;There exists no &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt; whose &lt;span&gt;settings object&lt;/span&gt; specifies this &lt;code&gt;Document&lt;/code&gt; as the &lt;span&gt;responsible document&lt;/span&gt;.
    &lt;li&gt;None of the elements in the &lt;code&gt;Document&lt;/code&gt; have any registered event listeners.
   &lt;/ul&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015101.html">[html5] r8246 - [e] (0) typo in reference in NavigatorContentUtils	section Fixing https://www.w3 [...]
</A></li>
	<LI>Next message: <A HREF="015103.html">[html5] r8248 - [a] (0) Update conformance criteria to match what's	conforming. Fixing https://w [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15102">[ date ]</a>
              <a href="thread.html#15102">[ thread ]</a>
              <a href="subject.html#15102">[ subject ]</a>
              <a href="author.html#15102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
