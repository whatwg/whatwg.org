<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7792 - [giow] (1) Set the .relatedTarget attribute on	'click' events for &lt;menuitem&gt; ele [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7792%20-%20%5Bgiow%5D%20%281%29%20Set%20the%20.relatedTarget%20attribute%20on%0A%09%27click%27%20events%20for%20%3Cmenuitem%3E%20ele%20%5B...%5D&In-Reply-To=%3C20130403223111.0886A1CBC055%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014649.html">
   <LINK REL="Next"  HREF="014651.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7792 - [giow] (1) Set the .relatedTarget attribute on	'click' events for &lt;menuitem&gt; ele [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7792%20-%20%5Bgiow%5D%20%281%29%20Set%20the%20.relatedTarget%20attribute%20on%0A%09%27click%27%20events%20for%20%3Cmenuitem%3E%20ele%20%5B...%5D&In-Reply-To=%3C20130403223111.0886A1CBC055%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7792 - [giow] (1) Set the .relatedTarget attribute on	'click' events for &lt;menuitem&gt; ele [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Apr  3 15:31:11 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014649.html">[html5] r7791 - [giow] (1) Add a .relatedTarget attribute on 'show'	events for &lt;menu&gt; elements. [...]
</A></li>
        <LI>Next message: <A HREF="014651.html">[html5] r7793 - [e] (0) Fix some typos or copypasta. Fixing	https://www.w3.org/Bugs/Public/show_ [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14650">[ date ]</a>
              <a href="thread.html#14650">[ thread ]</a>
              <a href="subject.html#14650">[ subject ]</a>
              <a href="author.html#14650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-04-03 15:31:07 -0700 (Wed, 03 Apr 2013)
New Revision: 7792

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Set the .relatedTarget attribute on 'click' events for &lt;menuitem&gt; elements (and their master commands) properly.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17840">https://www.w3.org/Bugs/Public/show_bug.cgi?id=17840</A>
Affected topics: HTML

Modified: complete.html
===================================================================
--- complete.html	2013-04-03 20:23:31 UTC (rev 7791)
+++ complete.html	2013-04-03 22:31:07 UTC (rev 7792)
@@ -50169,7 +50169,8 @@
      modifier key information --&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
-     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
+     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, with the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element as the
+     subject.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/dd&gt;
 
@@ -56063,7 +56064,7 @@
   &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands (&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
    &lt;li&gt;Separators (&lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
    &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the user
+  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element and with a particular element as a subject, the user
   agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the menu be an empty list of the type described above.&lt;/li&gt;
@@ -56130,7 +56131,10 @@
     &lt;p&gt;Display the menu to the user, and let the algorithm that invoked this one continue.&lt;/p&gt;
 
     &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt; when the user selects it, then the UA must invoke that
-    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
+    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;. If the command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; is defined as &lt;a href=#fire-a-click-event title=&quot;fire a click event&quot;&gt;firing
+    a &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/a&gt;, either directly or via the &lt;a href=#run-synthetic-click-activation-steps&gt;run
+    synthetic click activation steps&lt;/a&gt; algorithm, then the &lt;code title=dom-MouseEvent-relatedTarget&gt;relatedTarget&lt;/code&gt; attribute of that &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event must be initialized to the subject passed to this
+    &lt;a href=#construct-and-show-a-menu&gt;construct and show a menu&lt;/a&gt; algorithm.&lt;/p&gt;
 
     &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
     from the DOM before being shown, and is then immutable.&lt;/p&gt;
@@ -56504,7 +56508,7 @@
   one.&lt;/p&gt;
 
   &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
-  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu
+  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;
   event's dispatch has completed. The user agent must &lt;a href=#concept-event-fire title=concept-event-fire&gt;fire&lt;/a&gt; a
   &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
   interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
@@ -56513,7 +56517,7 @@
 
   &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=event-show&gt;show&lt;/code&gt; event) is not canceled, then
   the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for
-  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; as the subject.&lt;/p&gt;
 
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
@@ -57066,7 +57070,7 @@
 
   &lt;p&gt;The &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the
   command, if the element has a defined &lt;a href=#activation-behavior&gt;activation
-  behavior&lt;/a&gt;, is to &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
+  behavior&lt;/a&gt;&lt;!-- it doesn't if the element is disabled --&gt;, is to &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
   steps&lt;/a&gt; on the element. Otherwise, it is just to &lt;a href=#fire-a-click-event&gt;fire a
   &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/a&gt; at the
   element.&lt;/p&gt;
@@ -71976,6 +71980,7 @@
   &lt;div class=impl&gt;
 
   &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;Certain operations and methods are defined as firing events on
   elements. For example, the &lt;code title=dom-click&gt;&lt;a href=#dom-click&gt;click()&lt;/a&gt;&lt;/code&gt;
@@ -71995,7 +72000,7 @@
   attributes initialized to 0, its &lt;code title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;,
   &lt;code title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes initialized according
   to the current state of the key input device, if any (false for any keys that are not available),
-  its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute initialized to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null. The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return values appropriately
+  its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute initialized to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null (except where otherwise stated). The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return values appropriately
   describing the state of the key input device at the time the event is created.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn id=fire-a-click-event title=&quot;fire a click event&quot;&gt;Firing a &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/dfn&gt;

Modified: index
===================================================================
--- index	2013-04-03 20:23:31 UTC (rev 7791)
+++ index	2013-04-03 22:31:07 UTC (rev 7792)
@@ -50169,7 +50169,8 @@
      modifier key information --&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
-     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
+     show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, with the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element as the
+     subject.&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/dd&gt;
 
@@ -56063,7 +56064,7 @@
   &lt;ul class=brief&gt;&lt;li&gt;&lt;a href=#concept-command title=concept-command&gt;Commands&lt;/a&gt;, which can be marked as default commands (&lt;code&gt;&lt;a href=#the-menuitem-element&gt;menuitem&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
    &lt;li&gt;Separators (&lt;code&gt;&lt;a href=#the-hr-element&gt;hr&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
    &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt;)&lt;/li&gt;
-  &lt;/ul&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the user
+  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;To &lt;dfn id=construct-and-show-a-menu&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element and with a particular element as a subject, the user
   agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the menu be an empty list of the type described above.&lt;/li&gt;
@@ -56130,7 +56131,10 @@
     &lt;p&gt;Display the menu to the user, and let the algorithm that invoked this one continue.&lt;/p&gt;
 
     &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;a href=#concept-command title=concept-command&gt;command&lt;/a&gt; when the user selects it, then the UA must invoke that
-    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;.&lt;/p&gt;
+    command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt;. If the command's &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; is defined as &lt;a href=#fire-a-click-event title=&quot;fire a click event&quot;&gt;firing
+    a &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/a&gt;, either directly or via the &lt;a href=#run-synthetic-click-activation-steps&gt;run
+    synthetic click activation steps&lt;/a&gt; algorithm, then the &lt;code title=dom-MouseEvent-relatedTarget&gt;relatedTarget&lt;/code&gt; attribute of that &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event must be initialized to the subject passed to this
+    &lt;a href=#construct-and-show-a-menu&gt;construct and show a menu&lt;/a&gt; algorithm.&lt;/p&gt;
 
     &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
     from the DOM before being shown, and is then immutable.&lt;/p&gt;
@@ -56504,7 +56508,7 @@
   one.&lt;/p&gt;
 
   &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
-  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu
+  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt;
   event's dispatch has completed. The user agent must &lt;a href=#concept-event-fire title=concept-event-fire&gt;fire&lt;/a&gt; a
   &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
   interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
@@ -56513,7 +56517,7 @@
 
   &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=event-show&gt;show&lt;/code&gt; event) is not canceled, then
   the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for
-  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; as the subject.&lt;/p&gt;
 
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
@@ -57066,7 +57070,7 @@
 
   &lt;p&gt;The &lt;a href=#command-facet-action title=command-facet-Action&gt;Action&lt;/a&gt; of the
   command, if the element has a defined &lt;a href=#activation-behavior&gt;activation
-  behavior&lt;/a&gt;, is to &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
+  behavior&lt;/a&gt;&lt;!-- it doesn't if the element is disabled --&gt;, is to &lt;a href=#run-synthetic-click-activation-steps&gt;run synthetic click activation
   steps&lt;/a&gt; on the element. Otherwise, it is just to &lt;a href=#fire-a-click-event&gt;fire a
   &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/a&gt; at the
   element.&lt;/p&gt;
@@ -71976,6 +71980,7 @@
   &lt;div class=impl&gt;
 
   &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;Certain operations and methods are defined as firing events on
   elements. For example, the &lt;code title=dom-click&gt;&lt;a href=#dom-click&gt;click()&lt;/a&gt;&lt;/code&gt;
@@ -71995,7 +72000,7 @@
   attributes initialized to 0, its &lt;code title=&quot;&quot;&gt;ctrlKey&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;shiftKey&lt;/code&gt;,
   &lt;code title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes initialized according
   to the current state of the key input device, if any (false for any keys that are not available),
-  its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute initialized to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null. The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return values appropriately
+  its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute initialized to 1, and its &lt;code title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null (except where otherwise stated). The &lt;code title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return values appropriately
   describing the state of the key input device at the time the event is created.&lt;/p&gt;
 
   &lt;p&gt;&lt;dfn id=fire-a-click-event title=&quot;fire a click event&quot;&gt;Firing a &lt;code title=event-click&gt;click&lt;/code&gt; event&lt;/dfn&gt;

Modified: source
===================================================================
--- source	2013-04-03 20:23:31 UTC (rev 7791)
+++ source	2013-04-03 22:31:07 UTC (rev 7792)
@@ -59544,7 +59544,8 @@
      modifier key information --&gt;&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;span title=&quot;construct and show a menu&quot;&gt;construct and
-     show&lt;/span&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+     show&lt;/span&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, with the &lt;code&gt;button&lt;/code&gt; element as the
+     subject.&lt;/p&gt;&lt;/li&gt;
 
     &lt;/ol&gt;
 
@@ -66511,8 +66512,9 @@
    &lt;li&gt;Separators (&lt;code&gt;hr&lt;/code&gt;)&lt;/li&gt;
    &lt;li&gt;Other menus, which allows the list to be nested (&lt;code&gt;menu&lt;/code&gt;)&lt;/li&gt;
   &lt;/ul&gt;
+&lt;!--CLEANUP--&gt;
 
-  &lt;p&gt;To &lt;dfn&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;menu&lt;/code&gt; element, the user
+  &lt;p&gt;To &lt;dfn&gt;construct and show a menu&lt;/dfn&gt; for a particular &lt;code&gt;menu&lt;/code&gt; element and with a particular element as a subject, the user
   agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
@@ -66586,7 +66588,13 @@
 
     &lt;p&gt;If the user selects a menu item that corresponds to an element that still represents a &lt;span
     title=&quot;concept-command&quot;&gt;command&lt;/span&gt; when the user selects it, then the UA must invoke that
-    command's &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt;.&lt;/p&gt;
+    command's &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt;. If the command's &lt;span
+    title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt; is defined as &lt;span title=&quot;fire a click event&quot;&gt;firing
+    a &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event&lt;/span&gt;, either directly or via the &lt;span&gt;run
+    synthetic click activation steps&lt;/span&gt; algorithm, then the &lt;code
+    title=&quot;dom-MouseEvent-relatedTarget&quot;&gt;relatedTarget&lt;/code&gt; attribute of that &lt;code
+    title=&quot;event-click&quot;&gt;click&lt;/code&gt; event must be initialized to the subject passed to this
+    &lt;span&gt;construct and show a menu&lt;/span&gt; algorithm.&lt;/p&gt;
 
     &lt;p&gt;Pop-up menus must not, while being shown, reflect changes in the DOM. The menu is constructed
     from the DOM before being shown, and is then immutable.&lt;/p&gt;
@@ -67031,7 +67039,7 @@
 
   &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
   let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;span&gt;assigned context menu&lt;/span&gt; of &lt;var
-  title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;
+  title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;
   event's dispatch has completed. The user agent must &lt;span title=&quot;concept-event-fire&quot;&gt;fire&lt;/span&gt; a
   &lt;span title=&quot;concept-events-trusted&quot;&gt;trusted&lt;/span&gt; event with the name &lt;code
   title=&quot;event-show&quot;&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;RelatedEvent&lt;/code&gt;
@@ -67041,7 +67049,7 @@
 
   &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; event) is not canceled, then
   the user agent must &lt;span title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/span&gt; the menu for
-  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; with &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; as the subject.&lt;/p&gt;
 
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
@@ -67704,7 +67712,7 @@
 
   &lt;p&gt;The &lt;span title=&quot;command-facet-Action&quot;&gt;Action&lt;/span&gt; of the
   command, if the element has a defined &lt;span&gt;activation
-  behavior&lt;/span&gt;, is to &lt;span&gt;run synthetic click activation
+  behavior&lt;/span&gt;&lt;!-- it doesn't if the element is disabled --&gt;, is to &lt;span&gt;run synthetic click activation
   steps&lt;/span&gt; on the element. Otherwise, it is just to &lt;span&gt;fire a
   &lt;code title=&quot;event-click&quot;&gt;click&lt;/code&gt; event&lt;/span&gt; at the
   element.&lt;/p&gt;
@@ -85062,6 +85070,7 @@
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;h5&gt;Event firing&lt;/h5&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;Certain operations and methods are defined as firing events on
   elements. For example, the &lt;code title=&quot;dom-click&quot;&gt;click()&lt;/code&gt;
@@ -85086,7 +85095,7 @@
   &lt;code title=&quot;&quot;&gt;altKey&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;metaKey&lt;/code&gt; attributes initialized according
   to the current state of the key input device, if any (false for any keys that are not available),
   its &lt;code title=&quot;&quot;&gt;detail&lt;/code&gt; attribute initialized to 1, and its &lt;code
-  title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null. The &lt;code
+  title=&quot;&quot;&gt;relatedTarget&lt;/code&gt; attribute initialized to null (except where otherwise stated). The &lt;code
   title=&quot;&quot;&gt;getModifierState()&lt;/code&gt; method on the object must return values appropriately
   describing the state of the key input device at the time the event is created.&lt;/p&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014649.html">[html5] r7791 - [giow] (1) Add a .relatedTarget attribute on 'show'	events for &lt;menu&gt; elements. [...]
</A></li>
	<LI>Next message: <A HREF="014651.html">[html5] r7793 - [e] (0) Fix some typos or copypasta. Fixing	https://www.w3.org/Bugs/Public/show_ [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14650">[ date ]</a>
              <a href="thread.html#14650">[ thread ]</a>
              <a href="subject.html#14650">[ subject ]</a>
              <a href="author.html#14650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
