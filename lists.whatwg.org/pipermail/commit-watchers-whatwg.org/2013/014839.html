<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7981 - [giow] (1) Simplify &lt;dialog&gt; positioning logic.	Basically, the CB is always the  [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7981%20-%20%5Bgiow%5D%20%281%29%20Simplify%20%3Cdialog%3E%20positioning%20logic.%0A%09Basically%2C%20the%20CB%20is%20always%20the%20%20%5B...%5D&In-Reply-To=%3C20130614235218.3C7131E7C62E%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014838.html">
   <LINK REL="Next"  HREF="014840.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7981 - [giow] (1) Simplify &lt;dialog&gt; positioning logic.	Basically, the CB is always the  [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7981%20-%20%5Bgiow%5D%20%281%29%20Simplify%20%3Cdialog%3E%20positioning%20logic.%0A%09Basically%2C%20the%20CB%20is%20always%20the%20%20%5B...%5D&In-Reply-To=%3C20130614235218.3C7131E7C62E%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7981 - [giow] (1) Simplify &lt;dialog&gt; positioning logic.	Basically, the CB is always the  [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Jun 14 16:52:18 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014838.html">[html5] r7980 - [e] (0) Lay the groundwork for DOM Core to handle	reentrant mutation observers. [...]
</A></li>
        <LI>Next message: <A HREF="014840.html">[html5] r7982 - [e] (0) fix some typos in the new &lt;dialog&gt; text	Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14839">[ date ]</a>
              <a href="thread.html#14839">[ thread ]</a>
              <a href="subject.html#14839">[ subject ]</a>
              <a href="author.html#14839">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-06-14 16:52:17 -0700 (Fri, 14 Jun 2013)
New Revision: 7981

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Simplify &lt;dialog&gt; positioning logic. Basically, the CB is always the ICB, and the static position gets reset more often than before.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=20418">https://www.w3.org/Bugs/Public/show_bug.cgi?id=20418</A>
Affected topics: HTML

Modified: complete.html
===================================================================
--- complete.html	2013-06-14 22:32:29 UTC (rev 7980)
+++ complete.html	2013-06-14 23:52:17 UTC (rev 7981)
@@ -57697,9 +57697,18 @@
   &lt;p class=note&gt;An example of such a UI mechanism would be the user
   pressing the &quot;Escape&quot; key.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static
+  &lt;hr&gt;&lt;p&gt;The containing block of all &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements that are &lt;i&gt;absolutely positioned&lt;/i&gt;
+  must be the initial containing block.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of two modes: &lt;dfn id=mundanely-aligned&gt;mundanely aligned&lt;/dfn&gt;,
+  or &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
+  in the &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; mode, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static
+  position&lt;/a&gt; for that element, without an anchor.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static
   position&lt;/dfn&gt; of an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an
-  anchor, it must set up the element such that its top static
+  anchor, if that element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, it must set up the element such that its top static
   position, for the purposes of calculating the used value of the
   'top' property, is the value that would place the element's top
   margin edge as far from the top of the viewport as the element's
@@ -57708,19 +57717,22 @@
   value that would place the element's top margin edge at the top of
   the viewport.&lt;/p&gt;
 
-  &lt;p&gt;This top static position must remain the element's top static
-  position until it is next changed by the above algorithm or the next
-  one. (The element's static position is only used in calculating the
-  used value of the 'top' property in certain situations; it's not
-  used, for instance, to position the element if its 'position'
-  property is set to 'static'.)&lt;/p&gt;
+  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; and that is
+  &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; changes viewport width (as
+  measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
+  of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again, still without anchors.&lt;/p&gt;
 
-  &lt;p&gt;If there is an element whose top static position was last set by the &lt;a href=#set-up-the-default-static-position&gt;set up the default
-  static position&lt;/a&gt; algorithm (without an anchor) when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
-  changes viewport width (as measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the
-  default static position&lt;/a&gt; of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again
-  (still without anchors).&lt;/p&gt;
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; starts &lt;a href=#being-rendered&gt;being
+  rendered&lt;/a&gt;, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of that
+  element, without an anchor.&lt;/p&gt;
 
+  &lt;p&gt;This top static position of a &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element must
+  remain the element's top static position until the &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
+  algorithm is once again invoked for that element. (The element's static position is only used in
+  calculating the used value of the 'top' property in certain situations; it's not used, for
+  instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-position&gt;set up the position&lt;/dfn&gt; of an
   element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; using an anchor &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
 
@@ -57730,7 +57742,8 @@
     object, then run these substeps:&lt;/p&gt;
 
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not
-     have a rendered box, or is in a different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then abort the &lt;a href=#set-up-the-position&gt;set up the
+     have a rendered box, or is in a different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely positioned&lt;/span&gt;, &lt;a href=#set-up-the-default-static-position&gt;set up the default static
+     position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;a href=#set-up-the-position&gt;set up the
      position&lt;/a&gt; steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous
@@ -57747,11 +57760,20 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#magically-aligned&gt;magically
    aligned&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; both have rendered boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; are both in the same &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, the following
-  requirements apply:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;
 
+    &lt;p&gt;If at any time either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
+    boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;
+    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely
+    positioned&lt;/span&gt;, and &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor.&lt;/li&gt;
+
+   
+
+   &lt;li&gt;
+
     &lt;p&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s 'position' property must compute to the keyword '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' rather than whatever it would
     otherwise compute to (i.e. the 'position' property's specified value is ignored).&lt;/p&gt;
 
@@ -57889,33 +57911,36 @@
 
    &lt;/li&gt;
 
-  &lt;/ul&gt;&lt;p class=note&gt;The trivial example of an element that does not have
+   &lt;li&gt;
+
+    &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
+    apply and must compute to 'none', the 'display' property must compute to a value as described by
+    the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS
+    2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
+    and the element's box must be positioned using the rules for absolute positioning but with its
+    static position set such that if the box is positioned in its static position, its anchor point
+    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magically-aligned&gt;magically
+    aligned&lt;/a&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
+    of determining the containing block of other elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must be treated like
+    the 'absolute' keyword.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p class=note&gt;The trivial example of an element that does not have
   a rendered box is one whose 'display' property computes to 'none'.
   However, there are many other cases; e.g. table columns do not have
   boxes (their properties merely affect other boxes).&lt;/p&gt;
 
-  &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
-  apply and must compute to 'none', the 'display' property must compute to a value as described by
-  the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS 2.1
-  describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;, the
-  element's containing block is the initial containing block, and the element's box must be
-  positioned using the rules for absolute positioning but with its static position set such that if
-  the box is positioned in its static position, its anchor point is exactly aligned over the anchor
-  point of the element to which it is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt;. Elements aligned in this way
-  are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes of determining the containing block of other
-  elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must
-  be treated like the 'absolute' keyword.&lt;/p&gt;
+  &lt;p class=note&gt;If an element to which another element is anchored changes rendering, the anchored
+  element will be be repositioned accordingly. (In other words, the requirements above are live,
+  they are not just calculated once per anchored element.)&lt;/p&gt;
 
-  &lt;p&gt;If an element to which another element is anchored changes rendering, the anchored element must
-  be repositioned accordingly. (In other words, the requirements above are live, they are not just
-  calculated once per anchored element.)&lt;/p&gt;
-
   &lt;p class=note&gt;The '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;'
   keyword is not a keyword that can be specified in CSS; the 'position' property can only compute to
   this value if the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is positioned via the APIs described above.&lt;/p&gt;
 
   &lt;p class=note&gt;Elements positioned in this way are not clipped by the 'overflow' property of
-  ancestors (nor moved by the resulting scrolling mechanisms). Anchoring to an element that
+  ancestors (nor moved by the resulting scrolling mechanisms), since the containing block is the initial containing block. Anchoring to an element that
   &lt;em&gt;is&lt;/em&gt; so clipped (and shifted) can therefore result in unexpected effects (where the
   anchored element moves along with the clipped element, but isn't itself clipped).&lt;/p&gt;
 

Modified: index
===================================================================
--- index	2013-06-14 22:32:29 UTC (rev 7980)
+++ index	2013-06-14 23:52:17 UTC (rev 7981)
@@ -57697,9 +57697,18 @@
   &lt;p class=note&gt;An example of such a UI mechanism would be the user
   pressing the &quot;Escape&quot; key.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static
+  &lt;hr&gt;&lt;p&gt;The containing block of all &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements that are &lt;i&gt;absolutely positioned&lt;/i&gt;
+  must be the initial containing block.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; elements are always in one of two modes: &lt;dfn id=mundanely-aligned&gt;mundanely aligned&lt;/dfn&gt;,
+  or &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is created, it must be placed
+  in the &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; mode, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static
+  position&lt;/a&gt; for that element, without an anchor.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-default-static-position&gt;set up the default static
   position&lt;/dfn&gt; of an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an
-  anchor, it must set up the element such that its top static
+  anchor, if that element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, it must set up the element such that its top static
   position, for the purposes of calculating the used value of the
   'top' property, is the value that would place the element's top
   margin edge as far from the top of the viewport as the element's
@@ -57708,19 +57717,22 @@
   value that would place the element's top margin edge at the top of
   the viewport.&lt;/p&gt;
 
-  &lt;p&gt;This top static position must remain the element's top static
-  position until it is next changed by the above algorithm or the next
-  one. (The element's static position is only used in calculating the
-  used value of the 'top' property in certain situations; it's not
-  used, for instance, to position the element if its 'position'
-  property is set to 'static'.)&lt;/p&gt;
+  &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; and that is
+  &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; changes viewport width (as
+  measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
+  of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again, still without anchors.&lt;/p&gt;
 
-  &lt;p&gt;If there is an element whose top static position was last set by the &lt;a href=#set-up-the-default-static-position&gt;set up the default
-  static position&lt;/a&gt; algorithm (without an anchor) when its &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
-  changes viewport width (as measured in CSS pixels), then the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the
-  default static position&lt;/a&gt; of all such elements in that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; again
-  (still without anchors).&lt;/p&gt;
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element that is &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; starts &lt;a href=#being-rendered&gt;being
+  rendered&lt;/a&gt;, the user agent must &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of that
+  element, without an anchor.&lt;/p&gt;
 
+  &lt;p&gt;This top static position of a &lt;a href=#mundanely-aligned&gt;mundanely aligned&lt;/a&gt; &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element must
+  remain the element's top static position until the &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt;
+  algorithm is once again invoked for that element. (The element's static position is only used in
+  calculating the used value of the 'top' property in certain situations; it's not used, for
+  instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a user agent is to &lt;dfn id=set-up-the-position&gt;set up the position&lt;/dfn&gt; of an
   element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; using an anchor &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
 
@@ -57730,7 +57742,8 @@
     object, then run these substeps:&lt;/p&gt;
 
     &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not
-     have a rendered box, or is in a different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then abort the &lt;a href=#set-up-the-position&gt;set up the
+     have a rendered box, or is in a different document than &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely positioned&lt;/span&gt;, &lt;a href=#set-up-the-default-static-position&gt;set up the default static
+     position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;a href=#set-up-the-position&gt;set up the
      position&lt;/a&gt; steps.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous
@@ -57747,11 +57760,20 @@
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;a href=#magically-aligned&gt;magically
    aligned&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;dfn id=magically-aligned&gt;magically aligned&lt;/dfn&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; both have rendered boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; are both in the same &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; is earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, the following
-  requirements apply:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt; to an element &lt;var title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;&lt;li&gt;
 
+    &lt;p&gt;If at any time either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
+    boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
+    &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;, or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;
+    in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely
+    positioned&lt;/span&gt;, and &lt;a href=#set-up-the-default-static-position&gt;set up the default static position&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor.&lt;/li&gt;
+
+   
+
+   &lt;li&gt;
+
     &lt;p&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s 'position' property must compute to the keyword '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' rather than whatever it would
     otherwise compute to (i.e. the 'position' property's specified value is ignored).&lt;/p&gt;
 
@@ -57889,33 +57911,36 @@
 
    &lt;/li&gt;
 
-  &lt;/ul&gt;&lt;p class=note&gt;The trivial example of an element that does not have
+   &lt;li&gt;
+
+    &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
+    apply and must compute to 'none', the 'display' property must compute to a value as described by
+    the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS
+    2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
+    and the element's box must be positioned using the rules for absolute positioning but with its
+    static position set such that if the box is positioned in its static position, its anchor point
+    is exactly aligned over the anchor point of the element to which it is &lt;a href=#magically-aligned&gt;magically
+    aligned&lt;/a&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
+    of determining the containing block of other elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must be treated like
+    the 'absolute' keyword.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p class=note&gt;The trivial example of an element that does not have
   a rendered box is one whose 'display' property computes to 'none'.
   However, there are many other cases; e.g. table columns do not have
   boxes (their properties merely affect other boxes).&lt;/p&gt;
 
-  &lt;p&gt;When an element's 'position' property computes to '&lt;dfn id=css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
-  apply and must compute to 'none', the 'display' property must compute to a value as described by
-  the table in &lt;a href=<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&gt;the section of CSS 2.1
-  describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;, the
-  element's containing block is the initial containing block, and the element's box must be
-  positioned using the rules for absolute positioning but with its static position set such that if
-  the box is positioned in its static position, its anchor point is exactly aligned over the anchor
-  point of the element to which it is &lt;a href=#magically-aligned&gt;magically aligned&lt;/a&gt;. Elements aligned in this way
-  are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes of determining the containing block of other
-  elements, the '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;' keyword must
-  be treated like the 'absolute' keyword.&lt;/p&gt;
+  &lt;p class=note&gt;If an element to which another element is anchored changes rendering, the anchored
+  element will be be repositioned accordingly. (In other words, the requirements above are live,
+  they are not just calculated once per anchored element.)&lt;/p&gt;
 
-  &lt;p&gt;If an element to which another element is anchored changes rendering, the anchored element must
-  be repositioned accordingly. (In other words, the requirements above are live, they are not just
-  calculated once per anchored element.)&lt;/p&gt;
-
   &lt;p class=note&gt;The '&lt;a href=#css-position-absolute-anchored title=css-position-absolute-anchored&gt;absolute-anchored&lt;/a&gt;'
   keyword is not a keyword that can be specified in CSS; the 'position' property can only compute to
   this value if the &lt;code&gt;&lt;a href=#the-dialog-element&gt;dialog&lt;/a&gt;&lt;/code&gt; element is positioned via the APIs described above.&lt;/p&gt;
 
   &lt;p class=note&gt;Elements positioned in this way are not clipped by the 'overflow' property of
-  ancestors (nor moved by the resulting scrolling mechanisms). Anchoring to an element that
+  ancestors (nor moved by the resulting scrolling mechanisms), since the containing block is the initial containing block. Anchoring to an element that
   &lt;em&gt;is&lt;/em&gt; so clipped (and shifted) can therefore result in unexpected effects (where the
   anchored element moves along with the clipped element, but isn't itself clipped).&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2013-06-14 22:32:29 UTC (rev 7980)
+++ source	2013-06-14 23:52:17 UTC (rev 7981)
@@ -63903,9 +63903,18 @@
 
   &lt;hr&gt;
 
+  &lt;p&gt;The containing block of all &lt;code&gt;dialog&lt;/code&gt; elements that are &lt;i&gt;absolutely positioned&lt;/i&gt;
+  must be the initial containing block.&lt;/p&gt;
+
+  &lt;p&gt;All &lt;code&gt;dialog&lt;/code&gt; elements are always in one of two modes: &lt;dfn&gt;mundanely aligned&lt;/dfn&gt;,
+  or &lt;dfn&gt;magically aligned&lt;/dfn&gt;. When a &lt;code&gt;dialog&lt;/code&gt; element is created, it must be placed
+  in the &lt;span&gt;mundanely aligned&lt;/span&gt; mode, the user agent must &lt;span&gt;set up the default static
+  position&lt;/span&gt; for that element, without an anchor.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a user agent is to &lt;dfn&gt;set up the default static
   position&lt;/dfn&gt; of an element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an
-  anchor, it must set up the element such that its top static
+  anchor, if that element is &lt;span&gt;being rendered&lt;/span&gt;, it must set up the element such that its top static
   position, for the purposes of calculating the used value of the
   'top' property, is the value that would place the element's top
   margin edge as far from the top of the viewport as the element's
@@ -63914,19 +63923,22 @@
   value that would place the element's top margin edge at the top of
   the viewport.&lt;/p&gt;
 
-  &lt;p&gt;This top static position must remain the element's top static
-  position until it is next changed by the above algorithm or the next
-  one. (The element's static position is only used in calculating the
-  used value of the 'top' property in certain situations; it's not
-  used, for instance, to position the element if its 'position'
-  property is set to 'static'.)&lt;/p&gt;
+  &lt;p&gt;If there is a &lt;code&gt;dialog&lt;/code&gt; element that is &lt;span&gt;mundanely aligned&lt;/span&gt; and that is
+  &lt;span&gt;being rendered&lt;/span&gt; when its &lt;span&gt;browsing context&lt;/span&gt; changes viewport width (as
+  measured in CSS pixels), then the user agent must &lt;span&gt;set up the default static position&lt;/span&gt;
+  of all such elements in that &lt;span&gt;browsing context&lt;/span&gt; again, still without anchors.&lt;/p&gt;
 
-  &lt;p&gt;If there is an element whose top static position was last set by the &lt;span&gt;set up the default
-  static position&lt;/span&gt; algorithm (without an anchor) when its &lt;span&gt;browsing context&lt;/span&gt;
-  changes viewport width (as measured in CSS pixels), then the user agent must &lt;span&gt;set up the
-  default static position&lt;/span&gt; of all such elements in that &lt;span&gt;browsing context&lt;/span&gt; again
-  (still without anchors).&lt;/p&gt;
+  &lt;p&gt;When a &lt;code&gt;dialog&lt;/code&gt; element that is &lt;span&gt;mundanely aligned&lt;/span&gt; starts &lt;span&gt;being
+  rendered&lt;/span&gt;, the user agent must &lt;span&gt;set up the default static position&lt;/span&gt; of that
+  element, without an anchor.&lt;/p&gt;
 
+  &lt;p&gt;This top static position of a &lt;span&gt;mundanely aligned&lt;/span&gt; &lt;code&gt;dialog&lt;/code&gt; element must
+  remain the element's top static position until the &lt;Span&gt;set up the default static position&lt;/span&gt;
+  algorithm is once again invoked for that element. (The element's static position is only used in
+  calculating the used value of the 'top' property in certain situations; it's not used, for
+  instance, to position the element if its 'position' property is set to 'static'.)&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;When a user agent is to &lt;dfn&gt;set up the position&lt;/dfn&gt; of an
   element &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; using an anchor &lt;var
   title=&quot;&quot;&gt;anchor&lt;/var&gt;, it must run the following steps:&lt;/p&gt;
@@ -63942,7 +63954,8 @@
 
      &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;anchor&lt;/var&gt;'s target element does not
      have a rendered box, or is in a different document than &lt;var
-     title=&quot;&quot;&gt;subject&lt;/var&gt;, then abort the &lt;span&gt;set up the
+     title=&quot;&quot;&gt;subject&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely positioned&lt;/span&gt;, &lt;span&gt;set up the default static
+     position&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor, and abort the &lt;span&gt;set up the
      position&lt;/span&gt; steps.&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;anchor element&lt;/var&gt; be an anonymous
@@ -63964,16 +63977,24 @@
 
   &lt;/ol&gt;
 
-  &lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;dfn&gt;magically aligned&lt;/dfn&gt; to an element &lt;var
-  title=&quot;&quot;&gt;B&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; both have rendered boxes, &lt;var
-  title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; are both in the same &lt;code&gt;Document&lt;/code&gt;, and &lt;var
-  title=&quot;&quot;&gt;B&lt;/var&gt; is earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; in &lt;span&gt;tree order&lt;/span&gt;, the following
-  requirements apply:&lt;/p&gt;
+  &lt;p&gt;While an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is &lt;span&gt;magically aligned&lt;/span&gt; to an element &lt;var
+  title=&quot;&quot;&gt;B&lt;/var&gt;, the following requirements apply:&lt;/p&gt;
 
   &lt;ul&gt;
 
    &lt;li&gt;
 
+    &lt;p&gt;If at any time either &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease having rendered
+    boxes, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; cease being in the same
+    &lt;code&gt;Document&lt;/code&gt;, or &lt;var title=&quot;&quot;&gt;B&lt;/var&gt; ceases being earlier than &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;
+    in &lt;span&gt;tree order&lt;/span&gt;, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be &lt;span&gt;mundanely
+    positioned&lt;/span&gt;, and &lt;span&gt;set up the default static position&lt;/span&gt; of &lt;var
+    title=&quot;&quot;&gt;subject&lt;/var&gt; without an anchor.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
     &lt;p&gt;&lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s 'position' property must compute to the keyword '&lt;span
     title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/span&gt;' rather than whatever it would
     otherwise compute to (i.e. the 'position' property's specified value is ignored).&lt;/p&gt;
@@ -64128,36 +64149,41 @@
 
    &lt;/li&gt;
 
+   &lt;li&gt;
+
+    &lt;p&gt;When an element's 'position' property computes to '&lt;dfn
+    title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
+    apply and must compute to 'none', the 'display' property must compute to a value as described by
+    the table in &lt;a href=&quot;<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&quot;&gt;the section of CSS
+    2.1 describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;,
+    and the element's box must be positioned using the rules for absolute positioning but with its
+    static position set such that if the box is positioned in its static position, its anchor point
+    is exactly aligned over the anchor point of the element to which it is &lt;span&gt;magically
+    aligned&lt;/span&gt;. Elements aligned in this way are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes
+    of determining the containing block of other elements, the '&lt;span
+    title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/span&gt;' keyword must be treated like
+    the 'absolute' keyword.&lt;/p&gt;
+
+   &lt;/li&gt;
+
   &lt;/ul&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p class=&quot;note&quot;&gt;The trivial example of an element that does not have
   a rendered box is one whose 'display' property computes to 'none'.
   However, there are many other cases; e.g. table columns do not have
   boxes (their properties merely affect other boxes).&lt;/p&gt;
 
-  &lt;p&gt;When an element's 'position' property computes to '&lt;dfn
-  title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/dfn&gt;', the 'float' property does not
-  apply and must compute to 'none', the 'display' property must compute to a value as described by
-  the table in &lt;a href=&quot;<A HREF="http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo">http://www.w3.org/TR/CSS21/visuren.html#dis-pos-flo</A>&quot;&gt;the section of CSS 2.1
-  describing the &lt;cite&gt;relationships between 'display', 'position', and 'float'&lt;/cite&gt;&lt;/a&gt;, the
-  element's containing block is the initial containing block, and the element's box must be
-  positioned using the rules for absolute positioning but with its static position set such that if
-  the box is positioned in its static position, its anchor point is exactly aligned over the anchor
-  point of the element to which it is &lt;span&gt;magically aligned&lt;/span&gt;. Elements aligned in this way
-  are &lt;i&gt;absolutely positioned&lt;/i&gt;. For the purposes of determining the containing block of other
-  elements, the '&lt;span title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/span&gt;' keyword must
-  be treated like the 'absolute' keyword.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;If an element to which another element is anchored changes rendering, the anchored
+  element will be be repositioned accordingly. (In other words, the requirements above are live,
+  they are not just calculated once per anchored element.)&lt;/p&gt;
 
-  &lt;p&gt;If an element to which another element is anchored changes rendering, the anchored element must
-  be repositioned accordingly. (In other words, the requirements above are live, they are not just
-  calculated once per anchored element.)&lt;/p&gt;
-
   &lt;p class=&quot;note&quot;&gt;The '&lt;span title=&quot;css-position-absolute-anchored&quot;&gt;absolute-anchored&lt;/span&gt;'
   keyword is not a keyword that can be specified in CSS; the 'position' property can only compute to
   this value if the &lt;code&gt;dialog&lt;/code&gt; element is positioned via the APIs described above.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Elements positioned in this way are not clipped by the 'overflow' property of
-  ancestors (nor moved by the resulting scrolling mechanisms). Anchoring to an element that
+  ancestors (nor moved by the resulting scrolling mechanisms), since the containing block is the initial containing block. Anchoring to an element that
   &lt;em&gt;is&lt;/em&gt; so clipped (and shifted) can therefore result in unexpected effects (where the
   anchored element moves along with the clipped element, but isn't itself clipped).&lt;/p&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014838.html">[html5] r7980 - [e] (0) Lay the groundwork for DOM Core to handle	reentrant mutation observers. [...]
</A></li>
	<LI>Next message: <A HREF="014840.html">[html5] r7982 - [e] (0) fix some typos in the new &lt;dialog&gt; text	Affected topics: HTML
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14839">[ date ]</a>
              <a href="thread.html#14839">[ thread ]</a>
              <a href="subject.html#14839">[ subject ]</a>
              <a href="author.html#14839">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
