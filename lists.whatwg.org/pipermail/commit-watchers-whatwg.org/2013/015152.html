<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8297 - [giow] (3) Move more towards the browsers for	&lt;option&gt; selectedness vs dirtiness [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8297%20-%20%5Bgiow%5D%20%283%29%20Move%20more%20towards%20the%20browsers%20for%0A%09%3Coption%3E%20selectedness%20vs%20dirtiness%20%5B...%5D&In-Reply-To=%3C20131119202048.35C971536CF7B%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015151.html">
   <LINK REL="Next"  HREF="015153.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8297 - [giow] (3) Move more towards the browsers for	&lt;option&gt; selectedness vs dirtiness [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8297%20-%20%5Bgiow%5D%20%283%29%20Move%20more%20towards%20the%20browsers%20for%0A%09%3Coption%3E%20selectedness%20vs%20dirtiness%20%5B...%5D&In-Reply-To=%3C20131119202048.35C971536CF7B%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8297 - [giow] (3) Move more towards the browsers for	&lt;option&gt; selectedness vs dirtiness [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Nov 19 12:20:48 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="015151.html">[html5] r8296 - [e] (0) Try to make this text less ambiguous	regarding crossorigin=''. Fixing ht [...]
</A></li>
        <LI>Next message: <A HREF="015153.html">[html5] r8298 - [e] (0) Reword the concept of closing a WebSocket	with prejudice so that it's mo [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15152">[ date ]</a>
              <a href="thread.html#15152">[ thread ]</a>
              <a href="subject.html#15152">[ subject ]</a>
              <a href="author.html#15152">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-11-19 12:20:46 -0800 (Tue, 19 Nov 2013)
New Revision: 8297

Modified:
   complete.html
   index
   source
Log:
[giow] (3) Move more towards the browsers for &lt;option&gt; selectedness vs dirtiness. This doesn't quite match any browser exactly, so all browsers would have to change to match it. If there's a reason (e.g. backcompat) to prefer a different model, please reopen the bug and let me know.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=23574">https://www.w3.org/Bugs/Public/show_bug.cgi?id=23574</A>
Affected topics: DOM APIs, HTML

Modified: complete.html
===================================================================
--- complete.html	2013-11-19 00:23:06 UTC (rev 8296)
+++ complete.html	2013-11-19 20:20:46 UTC (rev 8297)
@@ -43825,6 +43825,7 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is absent, and the element
   is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, then the user agent should allow the
   user to pick an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in its &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list
@@ -43833,7 +43834,7 @@
   through a click, or through unfocusing the element after changing its value, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or through any other mechanism), and before the
   relevant user interaction event &lt;!-- interaction event spec point --&gt; is queued (e.g. before the
   &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the picked &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element
-  to true and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named
+  to true, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named
   &lt;code title=event-change&gt;change&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user
   interaction task source&lt;/a&gt; as the task source.&lt;/p&gt;
 
@@ -43843,13 +43844,14 @@
   set to true is added to the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt;, the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the other &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   elements in its &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is absent and the element's
   &lt;a href=#concept-select-size title=concept-select-size&gt;display size&lt;/a&gt; is greater than 1, then the user agent
   should also allow the user to request that the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is true, if any, be unselected. Upon this
   request being conveyed to the user agent, and before the relevant user interaction event &lt;!--
   interaction event spec point --&gt; is queued (e.g. before the &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt;
   event), the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt;
-  of that &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element to false and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
+  of that &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element to false, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
   simple event&lt;/a&gt; that bubbles named &lt;code title=event-change&gt;change&lt;/code&gt; at the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user interaction task source&lt;/a&gt; as the task
   source.&lt;/p&gt;
@@ -43864,19 +43866,21 @@
   the first &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; that is not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;, if any, to true.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is present, and the element
   is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, then the user agent should allow the
   user to &lt;dfn id=concept-select-toggle title=concept-select-toggle&gt;toggle&lt;/dfn&gt; the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in its
-  &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; that are themselves not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt; (either through a click, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or any other mechanism). Upon the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of one or more &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
-  elements being changed by the user, and before the relevant user interaction event &lt;!--
-  interaction event spec point --&gt; is queued (e.g. before a related &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+  &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; that are themselves not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;. Upon such an element being &lt;a href=#concept-select-toggle title=concept-select-toggle&gt;toggled&lt;/a&gt; (either through a click, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or any other mechanism), and before the relevant user interaction event &lt;!--
+  interaction event spec point --&gt; is queued (e.g. before a related &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
+  element must be changed (from true to false or false to true), the &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; of the element must be set to true, and the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
   &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named &lt;code title=event-change&gt;change&lt;/code&gt; at
   the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user interaction task source&lt;/a&gt; as the task
   source.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; for &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;
   elements is to go through all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in the element's &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt;, set their &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to true if the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element
-  has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute, and false otherwise, and then
+  has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute, and false otherwise, set their &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to false, and then
   have the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements &lt;a href=#ask-for-a-reset&gt;ask for a reset&lt;/a&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -44038,12 +44042,13 @@
   in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; that has its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true, if any. If there isn't one,
   then it must return &minus;1.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code title=dom-select-selectedIndex&gt;&lt;a href=#dom-select-selectedindex&gt;selectedIndex&lt;/a&gt;&lt;/code&gt; attribute must set
   the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   elements in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false, and then
   the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt; whose &lt;a href=#concept-option-index title=concept-option-index&gt;index&lt;/a&gt; is the given new value, if
-  any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true.&lt;/p&gt;
+  any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true and its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; set to true.&lt;/p&gt;
 
   &lt;p class=note&gt;This can result in no element having a &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true even in the case of the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element having no &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute
@@ -44055,11 +44060,12 @@
   order&lt;/a&gt; that has its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to
   true, if any. If there isn't one, then it must return the empty string.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code title=dom-select-value&gt;&lt;a href=#dom-select-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in
   the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false, and then the first
   &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt;, in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, whose &lt;a href=#concept-option-value title=concept-option-value&gt;value&lt;/a&gt;
-  is equal to the given new value, if any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true.&lt;/p&gt;
+  is equal to the given new value, if any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true and its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; set to true.&lt;/p&gt;
 
   &lt;p class=note&gt;This can result in no element having a &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true even in the case of the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element having no &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute
@@ -44412,12 +44418,19 @@
 
   &lt;div class=impl&gt;
 
+  &lt;p&gt;The &lt;dfn id=concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/dfn&gt; of an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element is
+  a boolean state, initially false. It controls whether adding or removing the &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; content attribute has any effect.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/dfn&gt; of an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   element is a boolean state, initially false. Except where otherwise specified, when the element is
   created, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true if
   the element has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute. Whenever an
   &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute is
-  added, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true.&lt;/p&gt;
+  added, if its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; is true, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true.
+  Whenever an
+  &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute is
+  &lt;em&gt;removed&lt;/em&gt;, if its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; is true, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to false.&lt;/p&gt;
 
   &lt;p class=note&gt;The &lt;code title=dom-option&gt;&lt;a href=#dom-option&gt;Option()&lt;/a&gt;&lt;/code&gt; constructor, when called with three
   or fewer arguments, overrides the initial state of the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; state to always be false even if the third
@@ -44510,9 +44523,10 @@
   return the element's &lt;a href=#concept-option-value title=concept-option-value&gt;value&lt;/a&gt;. On setting, the element's
   &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; content attribute must be set to the new value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=dom-option-selected title=dom-option-selected&gt;&lt;code&gt;selected&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on getting,
   must return true if the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is
-  true, and false otherwise. On setting, it must set the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to the new value, and then cause the
+  true, and false otherwise. On setting, it must set the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to the new value, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then cause the
   element to &lt;a href=#ask-for-a-reset&gt;ask for a reset&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-option-index title=dom-option-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt; IDL attribute must return the

Modified: index
===================================================================
--- index	2013-11-19 00:23:06 UTC (rev 8296)
+++ index	2013-11-19 20:20:46 UTC (rev 8297)
@@ -43825,6 +43825,7 @@
 
   &lt;div class=impl&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is absent, and the element
   is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, then the user agent should allow the
   user to pick an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in its &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list
@@ -43833,7 +43834,7 @@
   through a click, or through unfocusing the element after changing its value, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or through any other mechanism), and before the
   relevant user interaction event &lt;!-- interaction event spec point --&gt; is queued (e.g. before the
   &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the picked &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element
-  to true and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named
+  to true, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named
   &lt;code title=event-change&gt;change&lt;/code&gt; at the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user
   interaction task source&lt;/a&gt; as the task source.&lt;/p&gt;
 
@@ -43843,13 +43844,14 @@
   set to true is added to the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt;, the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the other &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   elements in its &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is absent and the element's
   &lt;a href=#concept-select-size title=concept-select-size&gt;display size&lt;/a&gt; is greater than 1, then the user agent
   should also allow the user to request that the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is true, if any, be unselected. Upon this
   request being conveyed to the user agent, and before the relevant user interaction event &lt;!--
   interaction event spec point --&gt; is queued (e.g. before the &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt;
   event), the user agent must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt;
-  of that &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element to false and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
+  of that &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element to false, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a
   simple event&lt;/a&gt; that bubbles named &lt;code title=event-change&gt;change&lt;/code&gt; at the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user interaction task source&lt;/a&gt; as the task
   source.&lt;/p&gt;
@@ -43864,19 +43866,21 @@
   the first &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt; in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; that is not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;, if any, to true.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute is present, and the element
   is not &lt;a href=#concept-fe-disabled title=concept-fe-disabled&gt;disabled&lt;/a&gt;, then the user agent should allow the
   user to &lt;dfn id=concept-select-toggle title=concept-select-toggle&gt;toggle&lt;/dfn&gt; the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in its
-  &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; that are themselves not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt; (either through a click, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or any other mechanism). Upon the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of one or more &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
-  elements being changed by the user, and before the relevant user interaction event &lt;!--
-  interaction event spec point --&gt; is queued (e.g. before a related &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
+  &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; that are themselves not &lt;a href=#concept-option-disabled title=concept-option-disabled&gt;disabled&lt;/a&gt;. Upon such an element being &lt;a href=#concept-select-toggle title=concept-select-toggle&gt;toggled&lt;/a&gt; (either through a click, or through a &lt;a href=#using-the-option-element-to-define-a-command title=option-command&gt;menu command&lt;/a&gt;, or any other mechanism), and before the relevant user interaction event &lt;!--
+  interaction event spec point --&gt; is queued (e.g. before a related &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event), the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
+  element must be changed (from true to false or false to true), the &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; of the element must be set to true, and the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to
   &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; that bubbles named &lt;code title=event-change&gt;change&lt;/code&gt; at
   the &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element, using the &lt;a href=#user-interaction-task-source&gt;user interaction task source&lt;/a&gt; as the task
   source.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;a href=#concept-form-reset-control title=concept-form-reset-control&gt;reset algorithm&lt;/a&gt; for &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt;
   elements is to go through all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in the element's &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt;, set their &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to true if the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element
-  has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute, and false otherwise, and then
+  has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute, and false otherwise, set their &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to false, and then
   have the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements &lt;a href=#ask-for-a-reset&gt;ask for a reset&lt;/a&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -44038,12 +44042,13 @@
   in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; that has its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true, if any. If there isn't one,
   then it must return &minus;1.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code title=dom-select-selectedIndex&gt;&lt;a href=#dom-select-selectedindex&gt;selectedIndex&lt;/a&gt;&lt;/code&gt; attribute must set
   the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   elements in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false, and then
   the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt; whose &lt;a href=#concept-option-index title=concept-option-index&gt;index&lt;/a&gt; is the given new value, if
-  any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true.&lt;/p&gt;
+  any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true and its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; set to true.&lt;/p&gt;
 
   &lt;p class=note&gt;This can result in no element having a &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true even in the case of the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element having no &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute
@@ -44055,11 +44060,12 @@
   order&lt;/a&gt; that has its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to
   true, if any. If there isn't one, then it must return the empty string.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code title=dom-select-value&gt;&lt;a href=#dom-select-value&gt;value&lt;/a&gt;&lt;/code&gt; attribute must set the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; of all the &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements in
   the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of options&lt;/a&gt; to false, and then the first
   &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#concept-select-option-list title=concept-select-option-list&gt;list of
   options&lt;/a&gt;, in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, whose &lt;a href=#concept-option-value title=concept-option-value&gt;value&lt;/a&gt;
-  is equal to the given new value, if any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true.&lt;/p&gt;
+  is equal to the given new value, if any, must have its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true and its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; set to true.&lt;/p&gt;
 
   &lt;p class=note&gt;This can result in no element having a &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; set to true even in the case of the
   &lt;code&gt;&lt;a href=#the-select-element&gt;select&lt;/a&gt;&lt;/code&gt; element having no &lt;code title=attr-select-multiple&gt;&lt;a href=#attr-select-multiple&gt;multiple&lt;/a&gt;&lt;/code&gt; attribute
@@ -44412,12 +44418,19 @@
 
   &lt;div class=impl&gt;
 
+  &lt;p&gt;The &lt;dfn id=concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/dfn&gt; of an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element is
+  a boolean state, initially false. It controls whether adding or removing the &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; content attribute has any effect.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/dfn&gt; of an &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt;
   element is a boolean state, initially false. Except where otherwise specified, when the element is
   created, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true if
   the element has a &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute. Whenever an
   &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute is
-  added, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true.&lt;/p&gt;
+  added, if its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; is true, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to true.
+  Whenever an
+  &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-option-selected&gt;&lt;a href=#attr-option-selected&gt;selected&lt;/a&gt;&lt;/code&gt; attribute is
+  &lt;em&gt;removed&lt;/em&gt;, if its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; is true, its &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; must be set to false.&lt;/p&gt;
 
   &lt;p class=note&gt;The &lt;code title=dom-option&gt;&lt;a href=#dom-option&gt;Option()&lt;/a&gt;&lt;/code&gt; constructor, when called with three
   or fewer arguments, overrides the initial state of the &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; state to always be false even if the third
@@ -44510,9 +44523,10 @@
   return the element's &lt;a href=#concept-option-value title=concept-option-value&gt;value&lt;/a&gt;. On setting, the element's
   &lt;code title=attr-option-value&gt;&lt;a href=#attr-option-value&gt;value&lt;/a&gt;&lt;/code&gt; content attribute must be set to the new value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn id=dom-option-selected title=dom-option-selected&gt;&lt;code&gt;selected&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on getting,
   must return true if the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; is
-  true, and false otherwise. On setting, it must set the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to the new value, and then cause the
+  true, and false otherwise. On setting, it must set the element's &lt;a href=#concept-option-selectedness title=concept-option-selectedness&gt;selectedness&lt;/a&gt; to the new value, set its &lt;a href=#concept-option-dirtiness title=concept-option-dirtiness&gt;dirtiness&lt;/a&gt; to true, and then cause the
   element to &lt;a href=#ask-for-a-reset&gt;ask for a reset&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-option-index title=dom-option-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt; IDL attribute must return the

Modified: source
===================================================================
--- source	2013-11-19 00:23:06 UTC (rev 8296)
+++ source	2013-11-19 20:20:46 UTC (rev 8297)
@@ -47943,6 +47943,7 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code data-x=&quot;attr-select-multiple&quot;&gt;multiple&lt;/code&gt; attribute is absent, and the element
   is not &lt;span data-x=&quot;concept-fe-disabled&quot;&gt;disabled&lt;/span&gt;, then the user agent should allow the
   user to pick an &lt;code&gt;option&lt;/code&gt; element in its &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list
@@ -47953,7 +47954,7 @@
   relevant user interaction event &lt;!-- interaction event spec point --&gt; is queued (e.g. before the
   &lt;code data-x=&quot;event-click&quot;&gt;click&lt;/code&gt; event), the user agent must set the &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of the picked &lt;code&gt;option&lt;/code&gt; element
-  to true and then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; that bubbles named
+  to true, set its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; to true, and then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a simple event&lt;/span&gt; that bubbles named
   &lt;code data-x=&quot;event-change&quot;&gt;change&lt;/code&gt; at the &lt;code&gt;select&lt;/code&gt; element, using the &lt;span&gt;user
   interaction task source&lt;/span&gt; as the task source.&lt;/p&gt;
 
@@ -47967,6 +47968,7 @@
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of all the other &lt;code&gt;option&lt;/code&gt;
   elements in its &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of options&lt;/span&gt; to false.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code data-x=&quot;attr-select-multiple&quot;&gt;multiple&lt;/code&gt; attribute is absent and the element's
   &lt;span data-x=&quot;concept-select-size&quot;&gt;display size&lt;/span&gt; is greater than 1, then the user agent
   should also allow the user to request that the &lt;code&gt;option&lt;/code&gt; whose &lt;span
@@ -47974,7 +47976,7 @@
   request being conveyed to the user agent, and before the relevant user interaction event &lt;!--
   interaction event spec point --&gt; is queued (e.g. before the &lt;code data-x=&quot;event-click&quot;&gt;click&lt;/code&gt;
   event), the user agent must set the &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt;
-  of that &lt;code&gt;option&lt;/code&gt; element to false and then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
+  of that &lt;code&gt;option&lt;/code&gt; element to false, set its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; to true, and then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span&gt;fire a
   simple event&lt;/span&gt; that bubbles named &lt;code data-x=&quot;event-change&quot;&gt;change&lt;/code&gt; at the
   &lt;code&gt;select&lt;/code&gt; element, using the &lt;span&gt;user interaction task source&lt;/span&gt; as the task
   source.&lt;/p&gt;
@@ -47993,26 +47995,28 @@
   options&lt;/span&gt; in &lt;span&gt;tree order&lt;/span&gt; that is not &lt;span
   data-x=&quot;concept-option-disabled&quot;&gt;disabled&lt;/span&gt;, if any, to true.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;If the &lt;code data-x=&quot;attr-select-multiple&quot;&gt;multiple&lt;/code&gt; attribute is present, and the element
   is not &lt;span data-x=&quot;concept-fe-disabled&quot;&gt;disabled&lt;/span&gt;, then the user agent should allow the
   user to &lt;dfn data-x=&quot;concept-select-toggle&quot;&gt;toggle&lt;/dfn&gt; the &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of the &lt;code&gt;option&lt;/code&gt; elements in its
   &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of options&lt;/span&gt; that are themselves not &lt;span
-  data-x=&quot;concept-option-disabled&quot;&gt;disabled&lt;/span&gt; (either through a click, or through a &lt;span
-  data-x=&quot;option-command&quot;&gt;menu command&lt;/span&gt;, or any other mechanism). Upon the &lt;span
-  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of one or more &lt;code&gt;option&lt;/code&gt;
-  elements being changed by the user, and before the relevant user interaction event &lt;!--
+  data-x=&quot;concept-option-disabled&quot;&gt;disabled&lt;/span&gt;. Upon such an element being &lt;span data-x=&quot;concept-select-toggle&quot;&gt;toggled&lt;/span&gt; (either through a click, or through a &lt;span
+  data-x=&quot;option-command&quot;&gt;menu command&lt;/span&gt;, or any other mechanism), and before the relevant user interaction event &lt;!--
   interaction event spec point --&gt; is queued (e.g. before a related &lt;code
-  data-x=&quot;event-click&quot;&gt;click&lt;/code&gt; event), the user agent must &lt;span&gt;queue a task&lt;/span&gt; to
+  data-x=&quot;event-click&quot;&gt;click&lt;/code&gt; event), the &lt;span
+  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of the &lt;code&gt;option&lt;/code&gt;
+  element must be changed (from true to false or false to true), the &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; of the element must be set to true, and the user agent must &lt;span&gt;queue a task&lt;/span&gt; to
   &lt;span&gt;fire a simple event&lt;/span&gt; that bubbles named &lt;code data-x=&quot;event-change&quot;&gt;change&lt;/code&gt; at
   the &lt;code&gt;select&lt;/code&gt; element, using the &lt;span&gt;user interaction task source&lt;/span&gt; as the task
   source.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;span data-x=&quot;concept-form-reset-control&quot;&gt;reset algorithm&lt;/span&gt; for &lt;code&gt;select&lt;/code&gt;
   elements is to go through all the &lt;code&gt;option&lt;/code&gt; elements in the element's &lt;span
   data-x=&quot;concept-select-option-list&quot;&gt;list of options&lt;/span&gt;, set their &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; to true if the &lt;code&gt;option&lt;/code&gt; element
-  has a &lt;code data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute, and false otherwise, and then
+  has a &lt;code data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute, and false otherwise, set their &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; to false, and then
   have the &lt;code&gt;option&lt;/code&gt; elements &lt;span&gt;ask for a reset&lt;/span&gt;.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -48195,12 +48199,13 @@
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true, if any. If there isn't one,
   then it must return &amp;#x2212;1.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code data-x=&quot;dom-select-selectedIndex&quot;&gt;selectedIndex&lt;/code&gt; attribute must set
   the &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of all the &lt;code&gt;option&lt;/code&gt;
   elements in the &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of options&lt;/span&gt; to false, and then
   the &lt;code&gt;option&lt;/code&gt; element in the &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of
   options&lt;/span&gt; whose &lt;span data-x=&quot;concept-option-index&quot;&gt;index&lt;/span&gt; is the given new value, if
-  any, must have its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true.&lt;/p&gt;
+  any, must have its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true and its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; set to true.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;This can result in no element having a &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true even in the case of the
@@ -48213,13 +48218,14 @@
   order&lt;/span&gt; that has its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to
   true, if any. If there isn't one, then it must return the empty string.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;On setting, the &lt;code data-x=&quot;dom-select-value&quot;&gt;value&lt;/code&gt; attribute must set the &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; of all the &lt;code&gt;option&lt;/code&gt; elements in
   the &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of options&lt;/span&gt; to false, and then the first
   &lt;code&gt;option&lt;/code&gt; element in the &lt;span data-x=&quot;concept-select-option-list&quot;&gt;list of
   options&lt;/span&gt;, in &lt;span&gt;tree order&lt;/span&gt;, whose &lt;span data-x=&quot;concept-option-value&quot;&gt;value&lt;/span&gt;
   is equal to the given new value, if any, must have its &lt;span
-  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true.&lt;/p&gt;
+  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true and its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; set to true.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;This can result in no element having a &lt;span
   data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; set to true even in the case of the
@@ -48592,12 +48598,20 @@
 
   &lt;div class=&quot;impl&quot;&gt;
 
+  &lt;p&gt;The &lt;dfn data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/dfn&gt; of an &lt;code&gt;option&lt;/code&gt; element is
+  a boolean state, initially false. It controls whether adding or removing the &lt;code
+  data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; content attribute has any effect.&lt;/p&gt;
+
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/dfn&gt; of an &lt;code&gt;option&lt;/code&gt;
   element is a boolean state, initially false. Except where otherwise specified, when the element is
   created, its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; must be set to true if
   the element has a &lt;code data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute. Whenever an
   &lt;code&gt;option&lt;/code&gt; element's &lt;code data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute is
-  added, its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; must be set to true.&lt;/p&gt;
+  added, if its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; is true, its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; must be set to true.
+  Whenever an
+  &lt;code&gt;option&lt;/code&gt; element's &lt;code data-x=&quot;attr-option-selected&quot;&gt;selected&lt;/code&gt; attribute is
+  &lt;em&gt;removed&lt;/em&gt;, if its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; is true, its &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; must be set to false.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;The &lt;code data-x=&quot;dom-option&quot;&gt;Option()&lt;/code&gt; constructor, when called with three
   or fewer arguments, overrides the initial state of the &lt;span
@@ -48699,10 +48713,11 @@
   return the element's &lt;span data-x=&quot;concept-option-value&quot;&gt;value&lt;/span&gt;. On setting, the element's
   &lt;code data-x=&quot;attr-option-value&quot;&gt;value&lt;/code&gt; content attribute must be set to the new value.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn data-x=&quot;dom-option-selected&quot;&gt;&lt;code&gt;selected&lt;/code&gt;&lt;/dfn&gt; IDL attribute, on getting,
   must return true if the element's &lt;span data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; is
   true, and false otherwise. On setting, it must set the element's &lt;span
-  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; to the new value, and then cause the
+  data-x=&quot;concept-option-selectedness&quot;&gt;selectedness&lt;/span&gt; to the new value, set its &lt;span data-x=&quot;concept-option-dirtiness&quot;&gt;dirtiness&lt;/span&gt; to true, and then cause the
   element to &lt;span&gt;ask for a reset&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn data-x=&quot;dom-option-index&quot;&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt; IDL attribute must return the


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015151.html">[html5] r8296 - [e] (0) Try to make this text less ambiguous	regarding crossorigin=''. Fixing ht [...]
</A></li>
	<LI>Next message: <A HREF="015153.html">[html5] r8298 - [e] (0) Reword the concept of closing a WebSocket	with prejudice so that it's mo [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15152">[ date ]</a>
              <a href="thread.html#15152">[ thread ]</a>
              <a href="subject.html#15152">[ subject ]</a>
              <a href="author.html#15152">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
