<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7704 - [e] (0) Cleanup Affected topics: HTML, Workers
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7704%20-%20%5Be%5D%20%280%29%20Cleanup%20Affected%20topics%3A%20HTML%2C%20Workers&In-Reply-To=%3C20130207195406.9D1F11C84063%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014562.html">
   <LINK REL="Next"  HREF="014564.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7704 - [e] (0) Cleanup Affected topics: HTML, Workers</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7704%20-%20%5Be%5D%20%280%29%20Cleanup%20Affected%20topics%3A%20HTML%2C%20Workers&In-Reply-To=%3C20130207195406.9D1F11C84063%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7704 - [e] (0) Cleanup Affected topics: HTML, Workers">whatwg at whatwg.org
       </A><BR>
    <I>Thu Feb  7 11:54:06 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014562.html">[html5] r7703 - [giow] (3) Better match reality,	however weird it is. Fixing https://www.w3.org/ [...]
</A></li>
        <LI>Next message: <A HREF="014564.html">[html5] r7705 - [giow] (2) Match reality. It's a bit more useful	anyway, arguably. Fixing https: [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14563">[ date ]</a>
              <a href="thread.html#14563">[ thread ]</a>
              <a href="subject.html#14563">[ subject ]</a>
              <a href="author.html#14563">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-02-07 11:54:05 -0800 (Thu, 07 Feb 2013)
New Revision: 7704

Modified:
   complete.html
   index
   source
Log:
[e] (0) Cleanup
Affected topics: HTML, Workers

Modified: complete.html
===================================================================
--- complete.html	2013-02-07 19:40:04 UTC (rev 7703)
+++ complete.html	2013-02-07 19:54:05 UTC (rev 7704)
@@ -16849,10 +16849,11 @@
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;Uses &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; the heading of a section,
-  which consists of all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element children of the &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element. The element
-  is used to group a set of &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements when the heading has
-  multiple levels, such as subheadings, alternative titles, or taglines.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; the heading of a section, which
+  consists of all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element children of the
+  &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element. The element is used to group a set of
+  &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements when the heading has multiple levels, such as
+  subheadings, alternative titles, or taglines.&lt;/p&gt;
 
   &lt;p&gt;Other elements of &lt;a href=#heading-content&gt;heading content&lt;/a&gt; in the &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element indicate
   subheadings or subtitles.&lt;/p&gt;
@@ -25195,100 +25196,92 @@
     interfaces.&lt;/p&gt;
     &lt;/div&gt;
    &lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; an
-  integration point for an external (typically non-HTML) application
-  or interactive content.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; an integration point for an external
+  (typically non-HTML) application or interactive content.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-embed-src title=attr-embed-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute
-  gives the address of the resource being embedded. The attribute, if
-  present, must contain a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially
-  surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-embed-src title=attr-embed-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute gives the address of the
+  resource being embedded. The attribute, if present, must contain a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL
+  potentially surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;If the &lt;code title=attr-itemprop&gt;&lt;a href=#names:-the-itemprop-attribute&gt;itemprop&lt;/a&gt;&lt;/code&gt; is specified
-  on an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element, then the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute must also be
-  specified.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=attr-itemprop&gt;&lt;a href=#names:-the-itemprop-attribute&gt;itemprop&lt;/a&gt;&lt;/code&gt; is specified on an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;
+  element, then the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute must also be specified.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-embed-type title=attr-embed-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute, if present, gives the &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; by which the
-  plugin to instantiate is selected. The value must be a &lt;a href=#valid-mime-type&gt;valid
-  MIME type&lt;/a&gt;. If both the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute are present, then the
-  &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must specify the
-  same type as the &lt;a href=#content-type title=Content-Type&gt;explicit Content-Type
-  metadata&lt;/a&gt; of the resource given by the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-embed-type title=attr-embed-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute, if present, gives the
+  &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; by which the plugin to instantiate is selected. The value must be a
+  &lt;a href=#valid-mime-type&gt;valid MIME type&lt;/a&gt;. If both the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and
+  the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute are present, then the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must specify the same type as the &lt;a href=#content-type title=Content-Type&gt;explicit Content-Type metadata&lt;/a&gt; of the resource given by the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
   &lt;div class=impl&gt;
 
-  &lt;p&gt;When the element is created with neither a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute nor a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and when attributes
-  are removed such that neither attribute is present on the element
-  anymore, and when the element has a &lt;a href=#media-element&gt;media element&lt;/a&gt;
-  ancestor, and when the element has an ancestor &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;
-  element that is &lt;em&gt;not&lt;/em&gt; showing its &lt;a href=#fallback-content&gt;fallback
-  content&lt;/a&gt;, any plugins instantiated for the element must be
-  removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
+  &lt;p&gt;When the element is created with neither a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
+  nor a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and when attributes are removed such
+  that neither attribute is present on the element anymore, and when the element has a &lt;a href=#media-element&gt;media
+  element&lt;/a&gt; ancestor, and when the element has an ancestor &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is
+  &lt;em&gt;not&lt;/em&gt; showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;, any plugins instantiated for the element
+  must be removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially active&lt;/dfn&gt; when the
-  following conditions are all met simultaneously:&lt;/p&gt;
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially
+  active&lt;/dfn&gt; when the following conditions are all met simultaneously:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;The element is &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; or was &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;The element is &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; or was &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;
+   reached step 1.&lt;/li&gt;
+
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;The element has either a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set or a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set (or both).&lt;/li&gt;
-   &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value is not the empty string.&lt;/li&gt;
+
+   &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value
+   is not the empty string.&lt;/li&gt;
+
    &lt;li&gt;The element is not a descendant of a &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, or was &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
-  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was not &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; becomes &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, and whenever
-  a &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;
-  &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that is remaining &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; and has its
-  &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or
-  removed or its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute
-  set, changed, or removed, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt;
-  using the &lt;dfn id=embed-task-source&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
 
+   &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its
+   &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;The element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, or was &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; the last time
+   the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was not &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; becomes &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, and whenever a &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that is
+  remaining &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; and has its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or removed or its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set, changed, or removed, the user agent must
+  &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; using the &lt;dfn id=embed-task-source&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If another &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; has since been queued to run these steps
    for this element, then abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute set&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;
+     &lt;dd&gt;
 
-    &lt;p&gt;The user agent must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt;
-    the value of the element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt;
-    attribute, relative to the element. If that is successful, the
-    user agent should &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resulting
-    &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, from the element's &lt;a href=#browsing-context-scope-origin&gt;browsing
-    context scope origin&lt;/a&gt; if it has one&lt;!-- potentially
-    http-origin privacy sensitive --&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
-    task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt;
-    once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must
-    find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on
-    the &lt;a href=#concept-embed-type title=concept-embed-type&gt;content's type&lt;/a&gt;, and
-    hand that &lt;a href=#plugin&gt;plugin&lt;/a&gt; the content of the resource,
-    replacing any previously instantiated plugin for the element.&lt;/p&gt;
-    &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
+      &lt;p&gt;The user agent must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the value of the element's
+      &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, relative to the element. If that is
+      successful, the user agent should &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resulting &lt;a href=#absolute-url&gt;absolute
+      URL&lt;/a&gt;, from the element's &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt; if it has one&lt;!--
+      potentially http-origin privacy sensitive --&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that
+      is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once
+      the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must find and instantiate an
+      appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on the &lt;a href=#concept-embed-type title=concept-embed-type&gt;content's
+      type&lt;/a&gt;, and hand that &lt;a href=#plugin&gt;plugin&lt;/a&gt; the content of the resource, replacing any
+      previously instantiated plugin for the element.&lt;/p&gt;
+      &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
 
-    &lt;p&gt;Fetching the resource must &lt;a href=#delay-the-load-event&gt;delay the load event&lt;/a&gt; of
-    the element's document.&lt;/p&gt;
-    &lt;!-- if we add load/error events, then replace the previous
-    paragraph with the text one: --&gt;
-    &lt;!-- similar text in various places --&gt;
-    &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load
-    event&lt;/span&gt; of the element's document until the final &lt;span
-    title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
-    task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt;
-    once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has
-    been run.&lt;/p&gt;--&gt;
+      &lt;p&gt;Fetching the resource must &lt;a href=#delay-the-load-event&gt;delay the load event&lt;/a&gt; of the element's document.&lt;/p&gt;
+      &lt;!-- if we add load/error events, then replace the previous paragraph with the text one: --&gt;
+      &lt;!-- similar text in various places --&gt;
+      &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load event&lt;/span&gt; of the element's document
+      until the final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
+      task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once the resource has been
+      &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has been run.&lt;/p&gt;--&gt;
 
-   &lt;/dd&gt;
+     &lt;/dd&gt;
 
-   &lt;dt&gt;If the element has no &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
+     &lt;dt&gt;If the element has no &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on the
-   value of the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on
+     the value of the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;/li&gt;
+    &lt;/dl&gt;&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially
   active&lt;/a&gt; stops being &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, any
@@ -25397,8 +25390,8 @@
    &lt;p&gt;If the user does not have the plugin (for example if the plugin vendor doesn't support the
    user's platform), then the user will be unable to use the resource.&lt;/p&gt;
 
-   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
-   an attribute can be specified:&lt;/p&gt;
+   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;, an attribute can be
+   specified:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot; quality=&quot;high&quot;&gt;&lt;/pre&gt;
 
@@ -80269,10 +80262,10 @@
    shutting down unexpectedly.&lt;/p&gt;&lt;/li&gt;
 --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;&lt;!-- v2-onclose other than the &lt;code
-   title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just added--&gt;, discard them
-   without processing them.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the
+   &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
+   queues&lt;/a&gt;&lt;!-- v2-onclose other than the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event
+   that this algorithm just added--&gt;, discard them without processing them.&lt;/li&gt;
 
 &lt;!-- v2-onclose
    &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just queued
@@ -80296,9 +80289,9 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, discard them without processing
-   them.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the
+   &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
+   queues&lt;/a&gt;, discard them without processing them.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Abort the script currently running in the worker.&lt;/li&gt;
 
@@ -82071,118 +82064,98 @@
   void &lt;a href=#dom-websocket-send title=dom-WebSocket-send&gt;send&lt;/a&gt;(&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt; data);
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  constructor takes one or two arguments. The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to which to
-  connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is
-  either a string or an array of strings. If it is a string, it is
-  equivalent to an array consisting of just that string; if it is
-  omitted, it is equivalent to the empty array. Each string in the
-  array is a subprotocol name. The connection will only be established
-  if the server reports that it has selected one of these
-  subprotocols. The subprotocol names must all be strings that match
-  the requirements for elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-  header fields as defined by the WebSocket protocol specification. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one or two arguments. The first argument,
+  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to which to connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is either a string or an array of strings. If it is a
+  string, it is equivalent to an array consisting of just that string; if it is omitted, it is
+  equivalent to the empty array. Each string in the array is a subprotocol name. The connection will
+  only be established if the server reports that it has selected one of these subprotocols. The
+  subprotocol names must all be strings that match the requirements for elements that comprise the
+  value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as
+  defined by the WebSocket protocol specification. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA
-  must run these steps:&lt;/p&gt;
+  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA must run these steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;#parse-a-websocket-url's-components&quot;&gt;Parse a WebSocket URL's components&lt;/a&gt;&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a
-   &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;#parse-a-websocket-url's-components&quot;&gt;Parse a WebSocket URL's components&lt;/a&gt;&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to
+   obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
+   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort
+   these steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the
-   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; has a scheme
-   component that is itself a secure protocol, e.g. HTTPS, then throw
-   a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
+   script&lt;/a&gt; has a scheme component that is itself a secure protocol, e.g. HTTPS, then throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent
-    is configured to block access, then throw a
-    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. (User agents typically block
-    access to well-known ports like SMTP.)&lt;/p&gt;
-
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent is configured to block access,
+    then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. (User agents typically block access to
+    well-known ports like SMTP.)&lt;/p&gt;
     &lt;!-- e.g. <A HREF="http://www.mozilla.org/projects/netlib/PortBanning.html">http://www.mozilla.org/projects/netlib/PortBanning.html</A> --&gt;
 
-    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the
-    unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true
-    but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
+    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
+    is true but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
     &lt;!-- paragraph requested by zcorpan --&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty array.&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty
+    array.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a
-    string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array
-    consisting of just that string.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array consisting of just that string.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur
-   more than once or otherwise fail to match the requirements for
-   elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-   header fields as defined by the WebSocket protocol specification,
-   then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur more than once or otherwise
+   fail to match the requirements for elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as defined by the
+   WebSocket protocol specification, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
    steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII
-   serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the
-   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;,
-   &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII serialization of an origin&quot;&gt;ASCII
+   serialization&lt;/a&gt; of the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted
+   to ASCII lowercase&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue
-   these steps in the background (without blocking scripts).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue these steps in the background
+   (without blocking scripts).&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;Establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along
-    with the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the
-    extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;&lt;a href=#headers-to-send-appropriate-cookies&gt;headers to send
-    appropriate cookies&lt;/a&gt;&lt;/i&gt; must be a &lt;code title=http-Cookie&gt;Cookie&lt;/code&gt; header whose value is the
-    &lt;i&gt;&lt;a href=#cookie-string&gt;cookie-string&lt;/a&gt;&lt;/i&gt; computed from the user's cookie store and the
-    URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
+    &lt;p&gt;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;Establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along with
+    the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;&lt;a href=#headers-to-send-appropriate-cookies&gt;headers to send appropriate cookies&lt;/a&gt;&lt;/i&gt; must be a &lt;code title=http-Cookie&gt;Cookie&lt;/code&gt; header whose value is the &lt;i&gt;&lt;a href=#cookie-string&gt;cookie-string&lt;/a&gt;&lt;/i&gt; computed from
+    the user's cookie store and the URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
     &lt;em&gt;not&lt;/em&gt; a &quot;non-HTTP&quot; API. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's
-    response&quot;&gt;&lt;a href=&quot;#validate-the-server's-response&quot;&gt;validates the server's response&lt;/a&gt;&lt;/i&gt; during the
-    &quot;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;&quot; algorithm, if the status
-    code received from the server is not 101 (e.g. it is a redirect),
-    the user agent must &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's response&quot;&gt;&lt;a href=&quot;#validate-the-server's-response&quot;&gt;validates the server's
+    response&lt;/a&gt;&lt;/i&gt; during the &quot;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;&quot; algorithm, if the status code
+    received from the server is not 101 (e.g. it is a redirect), the user agent must &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the
+    WebSocket connection&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
 
-    &lt;p class=warning&gt;Following HTTP procedures here could introduce
-    serious security problems in a Web browser context. For example,
-    consider a host with a WebSocket server at one path and an open
-    HTTP redirector at another. Suddenly, any script that can be given
-    a particular WebSocket URL can be tricked into communicating to
-    (and potentially sharing secrets with) any host on the Internet,
-    even if the script checks that the URL has the right hostname.&lt;/p&gt;
+    &lt;p class=warning&gt;Following HTTP procedures here could introduce serious security problems in a
+    Web browser context. For example, consider a host with a WebSocket server at one path and an
+    open HTTP redirector at another. Suddenly, any script that can be given a particular WebSocket
+    URL can be tricked into communicating to (and potentially sharing secrets with) any host on the
+    Internet, even if the script checks that the URL has the right hostname.&lt;/p&gt;
     &lt;!-- <A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html">http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html</A> --&gt;
 
-    &lt;p class=note&gt;If the &lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;
-    algorithm fails, it triggers the &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket
-    connection&lt;/a&gt;&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
-    WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that
-    &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;If the &lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm fails, it triggers the
+    &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+    connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;,
+    which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as
+    described below&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
-  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
-  implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is either a
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+  interface.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the result of &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the
-  constructor. (It doesn't matter what it is resolved relative to,
-  since we already know it is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.)&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt; attribute must return the result of
+  &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the
+  constructor. (It doesn't matter what it is resolved relative to, since we already know it is an
+  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the state of the connection. It can have the
-  following values:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; attribute represents
+  the state of the connection. It can have the following values:&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
 
@@ -82200,112 +82173,96 @@
 
    &lt;dd&gt;The connection has been closed or could not be opened.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
-  &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0).&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be
+  set to &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-extensions title=dom-WebSocket-extensions&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt;
-  attribute must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the
-  WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as
-  defined below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-extensions title=dom-WebSocket-extensions&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt; attribute must
+  initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value
+  might change, as defined below.&lt;/p&gt;
 
-  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute returns
-  the extensions selected by the server, if any. (Currently this will
-  only ever be the empty string.)&lt;/p&gt;
+  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute returns the
+  extensions selected by the server, if any. (Currently this will only ever be the empty
+  string.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-protocol title=dom-WebSocket-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute
-  must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket
-  connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as defined
-  below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-protocol title=dom-WebSocket-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute must initially
+  return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value might
+  change, as defined below.&lt;/p&gt;
 
   &lt;p class=note&gt;The &lt;code title=dom-WebSocket-protocol&gt;&lt;a href=#dom-websocket-protocol&gt;protocol&lt;/a&gt;&lt;/code&gt; attribute returns the
-  subprotocol selected by the server, if any. It can be used in
-  conjunction with the array form of the constructor's second argument
-  to perform subprotocol negotiation.&lt;/p&gt;
+  subprotocol selected by the server, if any. It can be used in conjunction with the array form of
+  the constructor's second argument to perform subprotocol negotiation.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-close title=dom-WebSocket-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
-  method must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-close title=dom-WebSocket-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  steps:&lt;/p&gt;
 
-&lt;!--CLEANUP--&gt;
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an
-   integer equal to 1000 nor an integer in the range 3000 to 4999, throw an
-   &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an integer equal to 1000 nor an
+   integer in the range 3000 to 4999, throw an &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort
+   these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the method's second argument is present, then run these
-    substeps:&lt;/p&gt;
+    &lt;p&gt;If the method's second argument is present, then run these substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second
-     argument.&lt;/li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second argument.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of
-     &lt;a href=#convert-a-domstring-to-a-sequence-of-unicode-characters title=&quot;convert a DOMString to a sequence of Unicode
-     characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a
-     sequence of Unicode characters&lt;/a&gt;.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of &lt;a href=#convert-a-domstring-to-a-sequence-of-unicode-characters title=&quot;convert a DOMString
+     to a sequence of Unicode characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a sequence of
+     Unicode characters&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding
-     &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; as UTF-8.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding &lt;var title=&quot;&quot;&gt;Unicode
+     reason&lt;/var&gt; as UTF-8.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes,
-     then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
-     steps. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes, then throw a
+     &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Run the first matching steps from the following list:&lt;/p&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-     attribute is in the &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) or &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (3) state&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) or &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (3) state&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;Do nothing.&lt;/p&gt;
 
-      &lt;p class=note&gt;The connection is already closing or is already
-      closed. If it has not already, a &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will eventually fire &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The connection is already closing or is already closed. If it has not already,
+      a &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will eventually fire &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the
-     WebSocket connection is established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the WebSocket connection is
+     established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
-      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2).
-      &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;
-      algorithm invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
-      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that 
-      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the
-      &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
+      WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is
+      closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing handshake is
-     started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing
+     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; and set the
-      &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-      attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the first argument is present, then the status
-      code&lt;!--CLOSE CODE--&gt; to use in the WebSocket Close message must
-      be the integer given by the first argument. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the first argument is present, then the status code&lt;!--CLOSE CODE--&gt; to use in the
+      WebSocket Close message must be the integer given by the first argument. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in the Close message
-      after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in
+      the Close message after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;
+      &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt;
-      algorithm eventually invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
-      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
-      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; algorithm eventually invokes
+      the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
+      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described
+      below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -82314,14 +82271,12 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
-      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt;
-      (2).&lt;/p&gt;
+      &lt;p&gt;Set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2).&lt;/p&gt;
 
-      &lt;p class=note&gt;&lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;The WebSocket closing handshake is
-      started&lt;/a&gt;&lt;/i&gt;, and will eventually invoke the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
-      WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which will establish that
-      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, and thus the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will fire, &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;&lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;The WebSocket closing handshake is started&lt;/a&gt;&lt;/i&gt;, and will eventually invoke
+      the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which will establish that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
+      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, and thus the &lt;code title=event-socket-close&gt;close&lt;/code&gt;
+      event will fire, &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -82620,85 +82575,70 @@
 
   &lt;h4 id=ping-and-pong-frames&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Ping and Pong frames&lt;/h4&gt;
 
-  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames
-  that can be used for keep-alive, heart-beats, network status
-  probing, latency instrumentation, and so forth. These are not
-  currently exposed in the API.&lt;/p&gt;
+  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames that can be used for
+  keep-alive, heart-beats, network status probing, latency instrumentation, and so forth. These are
+  not currently exposed in the API.&lt;/p&gt;
 
-  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired,
-  for example in an attempt to maintain local network NAT mappings, to
-  detect failed connections, or to display latency metrics to the
-  user. User agents must not use pings or unsolicited pongs to aid the
-  server; it is assumed that servers will solicit pongs whenever
-  appropriate for the server's needs.&lt;/p&gt;
+  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired, for example in an attempt to
+  maintain local network NAT mappings, to detect failed connections, or to display latency metrics
+  to the user. User agents must not use pings or unsolicited pongs to aid the server; it is assumed
+  that servers will solicit pongs whenever appropriate for the server's needs.&lt;/p&gt;
 
-  &lt;!-- v2: we'll probably add a way to make the client send pings and
-  automatically terminate the connection if they don't get a pong
-  within an author-provided timeout; see
+  &lt;!-- v2: we'll probably add a way to make the client send pings and automatically terminate the
+  connection if they don't get a pong within an author-provided timeout; see
   <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264">https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264</A> --&gt;
 
 
   &lt;h4 id=parsing-websocket-urls&gt;&lt;span class=secno&gt;10.3.5 &lt;/span&gt;Parsing WebSocket URLs&lt;/h4&gt;
 
-  &lt;p&gt;The steps to &lt;dfn id=&quot;parse-a-websocket-url's-components&quot;&gt;parse a WebSocket URL's components&lt;/dfn&gt; from
-  a string &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return
-  either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, a
-  &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
-  flag, or they fail.&lt;/p&gt;
+  &lt;p&gt;The steps to &lt;dfn id=&quot;parse-a-websocket-url's-components&quot;&gt;parse a WebSocket URL's components&lt;/dfn&gt; from a string &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; flag,
+  or they fail.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an
-   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, then fail this algorithm.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, then fail this
+   algorithm.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL character encoding set to
-    UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL
-    character encoding is used to escape the query component --&gt;
+    &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL
+    character encoding set to UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL character
+    encoding is used to escape the query component --&gt;
 
-    &lt;p class=note&gt;It doesn't matter what it is resolved relative to,
-    since we already know it is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; at this
-    point.&lt;/p&gt;
+    &lt;p class=note&gt;It doesn't matter what it is resolved relative to, since we already know it is
+    an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; at this point.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component whose value,
-   when &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this
-   algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
+   component whose value, when &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; component, then fail
-   this algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt;
+   component, then fail this algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-   component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;,
-   set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to
-   true.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
+   is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII
-   lowercase&lt;/a&gt;.&lt;/li&gt; &lt;!-- at this point this is
-   Punycode-encoded already --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted to
+   ASCII lowercase&lt;/a&gt;.&lt;/li&gt; &lt;!-- at this point this is Punycode-encoded already --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-port title=url-port&gt;&lt;port&gt;&lt;/a&gt; component, then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is
-   no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-port title=url-port&gt;&lt;port&gt;&lt;/a&gt; component,
+   then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;
-   be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 443.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is
+   false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be
+   443.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the
-   &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component (which might
-   be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt; &lt;!-- at this point
-   this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component (which might be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt; &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string,
-   set it to a single character U+002F SOLIDUS (/).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string, set it to a single character
+   U+002F SOLIDUS (/).&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component, then append a
-   single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource
-   name&lt;/var&gt;, followed by the value of the &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component.&lt;/li&gt; &lt;!-- at
-   this point this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component,
+   then append a single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;,
+   followed by the value of the &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component.&lt;/li&gt;
+   &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource
+   name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;h4 id=event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
 
@@ -82715,22 +82655,17 @@
   DOMString reason;
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to false. It
-  represents whether the connection closed cleanly or not.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  false. It represents whether the connection closed cleanly or not.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-code title=dom-CloseEvent-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to zero. It
-  represents the WebSocket connection close code provided by the
-  server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-code title=dom-CloseEvent-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; attribute must return the value it
+  was initialized to. When the object is created, this attribute must be initialized to zero. It
+  represents the WebSocket connection close code provided by the server.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-reason title=dom-CloseEvent-reason&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to empty
-  string. It represents the WebSocket connection close reason provided
-  by the server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-reason title=dom-CloseEvent-reason&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  empty string. It represents the WebSocket connection close reason provided by the server.&lt;/p&gt;
 
 
 

Modified: index
===================================================================
--- index	2013-02-07 19:40:04 UTC (rev 7703)
+++ index	2013-02-07 19:54:05 UTC (rev 7704)
@@ -16849,10 +16849,11 @@
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dt&gt;&lt;a href=#element-dfn-dom title=element-dfn-dom&gt;DOM interface&lt;/a&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;Uses &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt;.&lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; the heading of a section,
-  which consists of all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element children of the &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element. The element
-  is used to group a set of &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements when the heading has
-  multiple levels, such as subheadings, alternative titles, or taglines.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; the heading of a section, which
+  consists of all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element children of the
+  &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element. The element is used to group a set of
+  &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements when the heading has multiple levels, such as
+  subheadings, alternative titles, or taglines.&lt;/p&gt;
 
   &lt;p&gt;Other elements of &lt;a href=#heading-content&gt;heading content&lt;/a&gt; in the &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element indicate
   subheadings or subtitles.&lt;/p&gt;
@@ -25195,100 +25196,92 @@
     interfaces.&lt;/p&gt;
     &lt;/div&gt;
    &lt;/dd&gt;
-  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; an
-  integration point for an external (typically non-HTML) application
-  or interactive content.&lt;/p&gt;
+  &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; an integration point for an external
+  (typically non-HTML) application or interactive content.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-embed-src title=attr-embed-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute
-  gives the address of the resource being embedded. The attribute, if
-  present, must contain a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL potentially
-  surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-embed-src title=attr-embed-src&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute gives the address of the
+  resource being embedded. The attribute, if present, must contain a &lt;a href=#valid-non-empty-url-potentially-surrounded-by-spaces&gt;valid non-empty URL
+  potentially surrounded by spaces&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;If the &lt;code title=attr-itemprop&gt;&lt;a href=#names:-the-itemprop-attribute&gt;itemprop&lt;/a&gt;&lt;/code&gt; is specified
-  on an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element, then the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute must also be
-  specified.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=attr-itemprop&gt;&lt;a href=#names:-the-itemprop-attribute&gt;itemprop&lt;/a&gt;&lt;/code&gt; is specified on an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt;
+  element, then the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute must also be specified.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=attr-embed-type title=attr-embed-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute, if present, gives the &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; by which the
-  plugin to instantiate is selected. The value must be a &lt;a href=#valid-mime-type&gt;valid
-  MIME type&lt;/a&gt;. If both the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute are present, then the
-  &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must specify the
-  same type as the &lt;a href=#content-type title=Content-Type&gt;explicit Content-Type
-  metadata&lt;/a&gt; of the resource given by the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=attr-embed-type title=attr-embed-type&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute, if present, gives the
+  &lt;a href=#mime-type&gt;MIME type&lt;/a&gt; by which the plugin to instantiate is selected. The value must be a
+  &lt;a href=#valid-mime-type&gt;valid MIME type&lt;/a&gt;. If both the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute and
+  the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute are present, then the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute must specify the same type as the &lt;a href=#content-type title=Content-Type&gt;explicit Content-Type metadata&lt;/a&gt; of the resource given by the &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
   &lt;div class=impl&gt;
 
-  &lt;p&gt;When the element is created with neither a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute nor a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and when attributes
-  are removed such that neither attribute is present on the element
-  anymore, and when the element has a &lt;a href=#media-element&gt;media element&lt;/a&gt;
-  ancestor, and when the element has an ancestor &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt;
-  element that is &lt;em&gt;not&lt;/em&gt; showing its &lt;a href=#fallback-content&gt;fallback
-  content&lt;/a&gt;, any plugins instantiated for the element must be
-  removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
+  &lt;p&gt;When the element is created with neither a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
+  nor a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, and when attributes are removed such
+  that neither attribute is present on the element anymore, and when the element has a &lt;a href=#media-element&gt;media
+  element&lt;/a&gt; ancestor, and when the element has an ancestor &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is
+  &lt;em&gt;not&lt;/em&gt; showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;, any plugins instantiated for the element
+  must be removed, and the &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially active&lt;/dfn&gt; when the
-  following conditions are all met simultaneously:&lt;/p&gt;
+  &lt;p&gt;An &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element is said to be &lt;dfn id=concept-embed-active title=concept-embed-active&gt;potentially
+  active&lt;/dfn&gt; when the following conditions are all met simultaneously:&lt;/p&gt;
 
-  &lt;ul class=brief&gt;&lt;li&gt;The element is &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; or was &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;The element is &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; or was &lt;a href=#in-a-document title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt;
+   reached step 1.&lt;/li&gt;
+
    &lt;li&gt;The element's &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/li&gt;
+
    &lt;li&gt;The element has either a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set or a &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set (or both).&lt;/li&gt;
-   &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value is not the empty string.&lt;/li&gt;
+
+   &lt;li&gt;The element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is either absent or its value
+   is not the empty string.&lt;/li&gt;
+
    &lt;li&gt;The element is not a descendant of a &lt;a href=#media-element&gt;media element&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, or was &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; the last time the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
-  &lt;/ul&gt;&lt;!--CLEANUP--&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was not &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; becomes &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, and whenever
-  a &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;
-  &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that is remaining &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; and has its
-  &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or
-  removed or its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute
-  set, changed, or removed, the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt;
-  using the &lt;dfn id=embed-task-source&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
 
+   &lt;li&gt;The element is not a descendant of an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element that is not showing its
+   &lt;a href=#fallback-content&gt;fallback content&lt;/a&gt;.&lt;/li&gt;
+
+   &lt;li&gt;The element is &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt;, or was &lt;a href=#being-rendered&gt;being rendered&lt;/a&gt; the last time
+   the &lt;a href=#event-loop&gt;event loop&lt;/a&gt; reached step 1.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was not &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; becomes &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, and whenever a &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that is
+  remaining &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt; and has its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;src&lt;/a&gt;&lt;/code&gt; attribute set, changed, or removed or its &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute set, changed, or removed, the user agent must
+  &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; using the &lt;dfn id=embed-task-source&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
+
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;If another &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; has since been queued to run these steps
    for this element, then abort these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute set&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the element has a &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;
+     &lt;dd&gt;
 
-    &lt;p&gt;The user agent must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt;
-    the value of the element's &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt;
-    attribute, relative to the element. If that is successful, the
-    user agent should &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resulting
-    &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, from the element's &lt;a href=#browsing-context-scope-origin&gt;browsing
-    context scope origin&lt;/a&gt; if it has one&lt;!-- potentially
-    http-origin privacy sensitive --&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that is &lt;a href=#queue-a-task title=&quot;queue a
-    task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt;
-    once the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must
-    find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on
-    the &lt;a href=#concept-embed-type title=concept-embed-type&gt;content's type&lt;/a&gt;, and
-    hand that &lt;a href=#plugin&gt;plugin&lt;/a&gt; the content of the resource,
-    replacing any previously instantiated plugin for the element.&lt;/p&gt;
-    &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
+      &lt;p&gt;The user agent must &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the value of the element's
+      &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute, relative to the element. If that is
+      successful, the user agent should &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the resulting &lt;a href=#absolute-url&gt;absolute
+      URL&lt;/a&gt;, from the element's &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt; if it has one&lt;!--
+      potentially http-origin privacy sensitive --&gt;. The &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; that
+      is &lt;a href=#queue-a-task title=&quot;queue a task&quot;&gt;queued&lt;/a&gt; by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; once
+      the resource has been &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; must find and instantiate an
+      appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on the &lt;a href=#concept-embed-type title=concept-embed-type&gt;content's
+      type&lt;/a&gt;, and hand that &lt;a href=#plugin&gt;plugin&lt;/a&gt; the content of the resource, replacing any
+      previously instantiated plugin for the element.&lt;/p&gt;
+      &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
 
-    &lt;p&gt;Fetching the resource must &lt;a href=#delay-the-load-event&gt;delay the load event&lt;/a&gt; of
-    the element's document.&lt;/p&gt;
-    &lt;!-- if we add load/error events, then replace the previous
-    paragraph with the text one: --&gt;
-    &lt;!-- similar text in various places --&gt;
-    &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load
-    event&lt;/span&gt; of the element's document until the final &lt;span
-    title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
-    task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt;
-    once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has
-    been run.&lt;/p&gt;--&gt;
+      &lt;p&gt;Fetching the resource must &lt;a href=#delay-the-load-event&gt;delay the load event&lt;/a&gt; of the element's document.&lt;/p&gt;
+      &lt;!-- if we add load/error events, then replace the previous paragraph with the text one: --&gt;
+      &lt;!-- similar text in various places --&gt;
+      &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load event&lt;/span&gt; of the element's document
+      until the final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
+      task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once the resource has been
+      &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has been run.&lt;/p&gt;--&gt;
 
-   &lt;/dd&gt;
+     &lt;/dd&gt;
 
-   &lt;dt&gt;If the element has no &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
+     &lt;dt&gt;If the element has no &lt;code title=attr-embed-src&gt;&lt;a href=#attr-embed-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on the
-   value of the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;a href=#plugin&gt;plugin&lt;/a&gt; based on
+     the value of the &lt;code title=attr-embed-type&gt;&lt;a href=#attr-embed-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;/dl&gt;&lt;/li&gt;
+    &lt;/dl&gt;&lt;/li&gt;
 
   &lt;/ol&gt;&lt;p&gt;Whenever an &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element that was &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially
   active&lt;/a&gt; stops being &lt;a href=#concept-embed-active title=concept-embed-active&gt;potentially active&lt;/a&gt;, any
@@ -25397,8 +25390,8 @@
    &lt;p&gt;If the user does not have the plugin (for example if the plugin vendor doesn't support the
    user's platform), then the user will be unable to use the resource.&lt;/p&gt;
 
-   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
-   an attribute can be specified:&lt;/p&gt;
+   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;, an attribute can be
+   specified:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot; quality=&quot;high&quot;&gt;&lt;/pre&gt;
 
@@ -80269,10 +80262,10 @@
    shutting down unexpectedly.&lt;/p&gt;&lt;/li&gt;
 --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;&lt;!-- v2-onclose other than the &lt;code
-   title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just added--&gt;, discard them
-   without processing them.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the
+   &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
+   queues&lt;/a&gt;&lt;!-- v2-onclose other than the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event
+   that this algorithm just added--&gt;, discard them without processing them.&lt;/li&gt;
 
 &lt;!-- v2-onclose
    &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just queued
@@ -80296,9 +80289,9 @@
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#dom-workerglobalscope-closing title=dom-WorkerGlobalScope-closing&gt;closing&lt;/a&gt; flag to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task queues&lt;/a&gt;, discard them without processing
-   them.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; queued in the
+   &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#event-loop&gt;event loop&lt;/a&gt;'s &lt;a href=#task-queue title=&quot;task queue&quot;&gt;task
+   queues&lt;/a&gt;, discard them without processing them.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Abort the script currently running in the worker.&lt;/li&gt;
 
@@ -82071,118 +82064,98 @@
   void &lt;a href=#dom-websocket-send title=dom-WebSocket-send&gt;send&lt;/a&gt;(&lt;a href=#arraybufferview&gt;ArrayBufferView&lt;/a&gt; data);
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  constructor takes one or two arguments. The first argument, &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to which to
-  connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is
-  either a string or an array of strings. If it is a string, it is
-  equivalent to an array consisting of just that string; if it is
-  omitted, it is equivalent to the empty array. Each string in the
-  array is a subprotocol name. The connection will only be established
-  if the server reports that it has selected one of these
-  subprotocols. The subprotocol names must all be strings that match
-  the requirements for elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-  header fields as defined by the WebSocket protocol specification. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one or two arguments. The first argument,
+  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to which to connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is either a string or an array of strings. If it is a
+  string, it is equivalent to an array consisting of just that string; if it is omitted, it is
+  equivalent to the empty array. Each string in the array is a subprotocol name. The connection will
+  only be established if the server reports that it has selected one of these subprotocols. The
+  subprotocol names must all be strings that match the requirements for elements that comprise the
+  value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as
+  defined by the WebSocket protocol specification. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA
-  must run these steps:&lt;/p&gt;
+  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA must run these steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;#parse-a-websocket-url's-components&quot;&gt;Parse a WebSocket URL's components&lt;/a&gt;&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a
-   &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;i&gt;&lt;a href=&quot;#parse-a-websocket-url's-components&quot;&gt;Parse a WebSocket URL's components&lt;/a&gt;&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to
+   obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
+   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort
+   these steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the
-   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt; has a scheme
-   component that is itself a secure protocol, e.g. HTTPS, then throw
-   a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry
+   script&lt;/a&gt; has a scheme component that is itself a secure protocol, e.g. HTTPS, then throw a
+   &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent
-    is configured to block access, then throw a
-    &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. (User agents typically block
-    access to well-known ports like SMTP.)&lt;/p&gt;
-
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent is configured to block access,
+    then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception. (User agents typically block access to
+    well-known ports like SMTP.)&lt;/p&gt;
     &lt;!-- e.g. <A HREF="http://www.mozilla.org/projects/netlib/PortBanning.html">http://www.mozilla.org/projects/netlib/PortBanning.html</A> --&gt;
 
-    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the
-    unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true
-    but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
+    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
+    is true but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
     &lt;!-- paragraph requested by zcorpan --&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty array.&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty
+    array.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a
-    string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array
-    consisting of just that string.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array consisting of just that string.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur
-   more than once or otherwise fail to match the requirements for
-   elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-   header fields as defined by the WebSocket protocol specification,
-   then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
+   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur more than once or otherwise
+   fail to match the requirements for elements that comprise the value of &lt;code title=http-sec-websocket-protocol&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as defined by the
+   WebSocket protocol specification, then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
    steps. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII
-   serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the
-   &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;,
-   &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII serialization of an origin&quot;&gt;ASCII
+   serialization&lt;/a&gt; of the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted
+   to ASCII lowercase&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue
-   these steps in the background (without blocking scripts).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue these steps in the background
+   (without blocking scripts).&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;Establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along
-    with the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the
-    extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;&lt;a href=#headers-to-send-appropriate-cookies&gt;headers to send
-    appropriate cookies&lt;/a&gt;&lt;/i&gt; must be a &lt;code title=http-Cookie&gt;Cookie&lt;/code&gt; header whose value is the
-    &lt;i&gt;&lt;a href=#cookie-string&gt;cookie-string&lt;/a&gt;&lt;/i&gt; computed from the user's cookie store and the
-    URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
+    &lt;p&gt;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;Establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along with
+    the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;&lt;a href=#headers-to-send-appropriate-cookies&gt;headers to send appropriate cookies&lt;/a&gt;&lt;/i&gt; must be a &lt;code title=http-Cookie&gt;Cookie&lt;/code&gt; header whose value is the &lt;i&gt;&lt;a href=#cookie-string&gt;cookie-string&lt;/a&gt;&lt;/i&gt; computed from
+    the user's cookie store and the URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
     &lt;em&gt;not&lt;/em&gt; a &quot;non-HTTP&quot; API. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt; &lt;a href=#refsCOOKIES&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's
-    response&quot;&gt;&lt;a href=&quot;#validate-the-server's-response&quot;&gt;validates the server's response&lt;/a&gt;&lt;/i&gt; during the
-    &quot;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;&quot; algorithm, if the status
-    code received from the server is not 101 (e.g. it is a redirect),
-    the user agent must &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
+    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's response&quot;&gt;&lt;a href=&quot;#validate-the-server's-response&quot;&gt;validates the server's
+    response&lt;/a&gt;&lt;/i&gt; during the &quot;&lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;&quot; algorithm, if the status code
+    received from the server is not 101 (e.g. it is a redirect), the user agent must &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the
+    WebSocket connection&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
 
-    &lt;p class=warning&gt;Following HTTP procedures here could introduce
-    serious security problems in a Web browser context. For example,
-    consider a host with a WebSocket server at one path and an open
-    HTTP redirector at another. Suddenly, any script that can be given
-    a particular WebSocket URL can be tricked into communicating to
-    (and potentially sharing secrets with) any host on the Internet,
-    even if the script checks that the URL has the right hostname.&lt;/p&gt;
+    &lt;p class=warning&gt;Following HTTP procedures here could introduce serious security problems in a
+    Web browser context. For example, consider a host with a WebSocket server at one path and an
+    open HTTP redirector at another. Suddenly, any script that can be given a particular WebSocket
+    URL can be tricked into communicating to (and potentially sharing secrets with) any host on the
+    Internet, even if the script checks that the URL has the right hostname.&lt;/p&gt;
     &lt;!-- <A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html">http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html</A> --&gt;
 
-    &lt;p class=note&gt;If the &lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt;
-    algorithm fails, it triggers the &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket
-    connection&lt;/a&gt;&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
-    WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that
-    &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;If the &lt;i&gt;&lt;a href=#establish-a-websocket-connection&gt;establish a WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm fails, it triggers the
+    &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
+    connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;,
+    which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as
+    described below&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global
-  object&lt;/a&gt; is either a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object
-  implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;This constructor must be visible when the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is either a
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object or an object implementing the &lt;code&gt;&lt;a href=#workerglobalscope&gt;WorkerGlobalScope&lt;/a&gt;&lt;/code&gt;
+  interface.&lt;/p&gt;
 
-  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the result of &lt;a href=#resolve-a-url title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the
-  constructor. (It doesn't matter what it is resolved relative to,
-  since we already know it is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.)&lt;/p&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt; attribute must return the result of
+  &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt; that was passed to the
+  constructor. (It doesn't matter what it is resolved relative to, since we already know it is an
+  &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the state of the connection. It can have the
-  following values:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; attribute represents
+  the state of the connection. It can have the following values:&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
 
@@ -82200,112 +82173,96 @@
 
    &lt;dd&gt;The connection has been closed or could not be opened.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
-  &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0).&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be
+  set to &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-extensions title=dom-WebSocket-extensions&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt;
-  attribute must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the
-  WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as
-  defined below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-extensions title=dom-WebSocket-extensions&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt; attribute must
+  initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value
+  might change, as defined below.&lt;/p&gt;
 
-  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute returns
-  the extensions selected by the server, if any. (Currently this will
-  only ever be the empty string.)&lt;/p&gt;
+  &lt;p class=note&gt;The &lt;code title=dom-WebSocket-extensions&gt;&lt;a href=#dom-websocket-extensions&gt;extensions&lt;/a&gt;&lt;/code&gt; attribute returns the
+  extensions selected by the server, if any. (Currently this will only ever be the empty
+  string.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-protocol title=dom-WebSocket-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute
-  must initially return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket
-  connection is established&lt;/a&gt;&lt;/i&gt;, its value might change, as defined
-  below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-protocol title=dom-WebSocket-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute must initially
+  return the empty string. After &lt;i&gt;&lt;a href=#the-websocket-connection-is-established&gt;the WebSocket connection is established&lt;/a&gt;&lt;/i&gt;, its value might
+  change, as defined below.&lt;/p&gt;
 
   &lt;p class=note&gt;The &lt;code title=dom-WebSocket-protocol&gt;&lt;a href=#dom-websocket-protocol&gt;protocol&lt;/a&gt;&lt;/code&gt; attribute returns the
-  subprotocol selected by the server, if any. It can be used in
-  conjunction with the array form of the constructor's second argument
-  to perform subprotocol negotiation.&lt;/p&gt;
+  subprotocol selected by the server, if any. It can be used in conjunction with the array form of
+  the constructor's second argument to perform subprotocol negotiation.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-websocket-close title=dom-WebSocket-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
-  method must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-websocket-close title=dom-WebSocket-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  steps:&lt;/p&gt;
 
-&lt;!--CLEANUP--&gt;
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an
-   integer equal to 1000 nor an integer in the range 3000 to 4999, throw an
-   &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an integer equal to 1000 nor an
+   integer in the range 3000 to 4999, throw an &lt;code&gt;&lt;a href=#invalidaccesserror&gt;InvalidAccessError&lt;/a&gt;&lt;/code&gt; exception and abort
+   these steps.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the method's second argument is present, then run these
-    substeps:&lt;/p&gt;
+    &lt;p&gt;If the method's second argument is present, then run these substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second
-     argument.&lt;/li&gt;
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second argument.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of
-     &lt;a href=#convert-a-domstring-to-a-sequence-of-unicode-characters title=&quot;convert a DOMString to a sequence of Unicode
-     characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a
-     sequence of Unicode characters&lt;/a&gt;.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of &lt;a href=#convert-a-domstring-to-a-sequence-of-unicode-characters title=&quot;convert a DOMString
+     to a sequence of Unicode characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a sequence of
+     Unicode characters&lt;/a&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding
-     &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; as UTF-8.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding &lt;var title=&quot;&quot;&gt;Unicode
+     reason&lt;/var&gt; as UTF-8.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes,
-     then throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these
-     steps. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes, then throw a
+     &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception and abort these steps. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/li&gt;
 
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Run the first matching steps from the following list:&lt;/p&gt;
 
-    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-     attribute is in the &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) or &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (3) state&lt;/dt&gt;
+    &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2) or &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; (3) state&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;Do nothing.&lt;/p&gt;
 
-      &lt;p class=note&gt;The connection is already closing or is already
-      closed. If it has not already, a &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will eventually fire &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The connection is already closing or is already closed. If it has not already,
+      a &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will eventually fire &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the
-     WebSocket connection is established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the WebSocket connection is
+     established&quot;&gt;&lt;a href=#the-websocket-connection-is-established&gt;established&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
-      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2).
-      &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;&lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;Fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt;
-      algorithm invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
-      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that 
-      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the
-      &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#fail-the-websocket-connection&gt;fail the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
+      WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is
+      closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing handshake is
-     started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing
+     handshake is started&quot;&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;started&lt;/a&gt;&lt;/i&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; and set the
-      &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-      attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;&lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;Start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; and set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2). &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the first argument is present, then the status
-      code&lt;!--CLOSE CODE--&gt; to use in the WebSocket Close message must
-      be the integer given by the first argument. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the first argument is present, then the status code&lt;!--CLOSE CODE--&gt; to use in the
+      WebSocket Close message must be the integer given by the first argument. &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in the Close message
-      after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt; &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in
+      the Close message after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;
+      &lt;a href=#refsWSP&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt;
-      algorithm eventually invokes the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket
-      connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
-      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;The &lt;i&gt;&lt;a href=#start-the-websocket-closing-handshake&gt;start the WebSocket closing handshake&lt;/a&gt;&lt;/i&gt; algorithm eventually invokes
+      the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
+      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, which fires the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event &lt;a href=#closeWebSocket&gt;as described
+      below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -82314,14 +82271,12 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's
-      value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt;
-      (2).&lt;/p&gt;
+      &lt;p&gt;Set the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value to &lt;code title=dom-WebSocket-CLOSING&gt;&lt;a href=#dom-websocket-closing&gt;CLOSING&lt;/a&gt;&lt;/code&gt; (2).&lt;/p&gt;
 
-      &lt;p class=note&gt;&lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;The WebSocket closing handshake is
-      started&lt;/a&gt;&lt;/i&gt;, and will eventually invoke the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the
-      WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which will establish that
-      &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, and thus the &lt;code title=event-socket-close&gt;close&lt;/code&gt; event will fire, &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=note&gt;&lt;i&gt;&lt;a href=#the-websocket-closing-handshake-is-started&gt;The WebSocket closing handshake is started&lt;/a&gt;&lt;/i&gt;, and will eventually invoke
+      the &lt;i&gt;&lt;a href=#close-the-websocket-connection&gt;close the WebSocket connection&lt;/a&gt;&lt;/i&gt; algorithm, which will establish that &lt;i&gt;&lt;a href=#the-websocket-connection-is-closed&gt;the
+      WebSocket connection is closed&lt;/a&gt;&lt;/i&gt;, and thus the &lt;code title=event-socket-close&gt;close&lt;/code&gt;
+      event will fire, &lt;a href=#closeWebSocket&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -82620,85 +82575,70 @@
 
   &lt;h4 id=ping-and-pong-frames&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Ping and Pong frames&lt;/h4&gt;
 
-  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames
-  that can be used for keep-alive, heart-beats, network status
-  probing, latency instrumentation, and so forth. These are not
-  currently exposed in the API.&lt;/p&gt;
+  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames that can be used for
+  keep-alive, heart-beats, network status probing, latency instrumentation, and so forth. These are
+  not currently exposed in the API.&lt;/p&gt;
 
-  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired,
-  for example in an attempt to maintain local network NAT mappings, to
-  detect failed connections, or to display latency metrics to the
-  user. User agents must not use pings or unsolicited pongs to aid the
-  server; it is assumed that servers will solicit pongs whenever
-  appropriate for the server's needs.&lt;/p&gt;
+  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired, for example in an attempt to
+  maintain local network NAT mappings, to detect failed connections, or to display latency metrics
+  to the user. User agents must not use pings or unsolicited pongs to aid the server; it is assumed
+  that servers will solicit pongs whenever appropriate for the server's needs.&lt;/p&gt;
 
-  &lt;!-- v2: we'll probably add a way to make the client send pings and
-  automatically terminate the connection if they don't get a pong
-  within an author-provided timeout; see
+  &lt;!-- v2: we'll probably add a way to make the client send pings and automatically terminate the
+  connection if they don't get a pong within an author-provided timeout; see
   <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264">https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264</A> --&gt;
 
 
   &lt;h4 id=parsing-websocket-urls&gt;&lt;span class=secno&gt;10.3.5 &lt;/span&gt;Parsing WebSocket URLs&lt;/h4&gt;
 
-  &lt;p&gt;The steps to &lt;dfn id=&quot;parse-a-websocket-url's-components&quot;&gt;parse a WebSocket URL's components&lt;/dfn&gt; from
-  a string &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return
-  either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, a
-  &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
-  flag, or they fail.&lt;/p&gt;
+  &lt;p&gt;The steps to &lt;dfn id=&quot;parse-a-websocket-url's-components&quot;&gt;parse a WebSocket URL's components&lt;/dfn&gt; from a string &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; flag,
+  or they fail.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an
-   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, then fail this algorithm.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, then fail this
+   algorithm.&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL character encoding set to
-    UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL
-    character encoding is used to escape the query component --&gt;
+    &lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL
+    character encoding set to UTF-8. &lt;a href=#refsRFC3629&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL character
+    encoding is used to escape the query component --&gt;
 
-    &lt;p class=note&gt;It doesn't matter what it is resolved relative to,
-    since we already know it is an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; at this
-    point.&lt;/p&gt;
+    &lt;p class=note&gt;It doesn't matter what it is resolved relative to, since we already know it is
+    an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; at this point.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component whose value,
-   when &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this
-   algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
+   component whose value, when &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII lowercase&lt;/a&gt;, is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt; component, then fail
-   this algorithm.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/a&gt;
+   component, then fail this algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-   component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;,
-   set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to
-   true.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
+   is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to true.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted to ASCII
-   lowercase&lt;/a&gt;.&lt;/li&gt; &lt;!-- at this point this is
-   Punycode-encoded already --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;a href=#converted-to-ascii-lowercase&gt;converted to
+   ASCII lowercase&lt;/a&gt;.&lt;/li&gt; &lt;!-- at this point this is Punycode-encoded already --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-port title=url-port&gt;&lt;port&gt;&lt;/a&gt; component, then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is
-   no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-port title=url-port&gt;&lt;port&gt;&lt;/a&gt; component,
+   then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;
-   be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 443.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is
+   false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be
+   443.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the
-   &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component (which might
-   be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt; &lt;!-- at this point
-   this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component (which might be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt; &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string,
-   set it to a single character U+002F SOLIDUS (/).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string, set it to a single character
+   U+002F SOLIDUS (/).&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component, then append a
-   single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource
-   name&lt;/var&gt;, followed by the value of the &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component.&lt;/li&gt; &lt;!-- at
-   this point this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component,
+   then append a single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;,
+   followed by the value of the &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component.&lt;/li&gt;
+   &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource
+   name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
 
   &lt;/ol&gt;&lt;h4 id=event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
 
@@ -82715,22 +82655,17 @@
   DOMString reason;
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to false. It
-  represents whether the connection closed cleanly or not.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-wasclean title=dom-CloseEvent-wasClean&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  false. It represents whether the connection closed cleanly or not.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-code title=dom-CloseEvent-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to zero. It
-  represents the WebSocket connection close code provided by the
-  server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-code title=dom-CloseEvent-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; attribute must return the value it
+  was initialized to. When the object is created, this attribute must be initialized to zero. It
+  represents the WebSocket connection close code provided by the server.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-closeevent-reason title=dom-CloseEvent-reason&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to empty
-  string. It represents the WebSocket connection close reason provided
-  by the server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=dom-closeevent-reason title=dom-CloseEvent-reason&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  empty string. It represents the WebSocket connection close reason provided by the server.&lt;/p&gt;
 
 
 

Modified: source
===================================================================
--- source	2013-02-07 19:40:04 UTC (rev 7703)
+++ source	2013-02-07 19:54:05 UTC (rev 7704)
@@ -17679,12 +17679,12 @@
    &lt;dt&gt;&lt;span title=&quot;element-dfn-dom&quot;&gt;DOM interface&lt;/span&gt;:&lt;/dt&gt;&lt;!--TOPIC:DOM APIs--&gt;
    &lt;dd&gt;Uses &lt;code&gt;HTMLElement&lt;/code&gt;.&lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
-&lt;!--CLEANUP--&gt;
 
-  &lt;p&gt;The &lt;code&gt;hgroup&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; the heading of a section,
-  which consists of all the &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element children of the &lt;code&gt;hgroup&lt;/code&gt; element. The element
-  is used to group a set of &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; elements when the heading has
-  multiple levels, such as subheadings, alternative titles, or taglines.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;hgroup&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; the heading of a section, which
+  consists of all the &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element children of the
+  &lt;code&gt;hgroup&lt;/code&gt; element. The element is used to group a set of
+  &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; elements when the heading has multiple levels, such as
+  subheadings, alternative titles, or taglines.&lt;/p&gt;
 
   &lt;p&gt;Other elements of &lt;span&gt;heading content&lt;/span&gt; in the &lt;code&gt;hgroup&lt;/code&gt; element indicate
   subheadings or subtitles.&lt;/p&gt;
@@ -26800,68 +26800,68 @@
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;!--TOPIC:HTML--&gt;
 
-  &lt;p&gt;The &lt;code&gt;embed&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; an
-  integration point for an external (typically non-HTML) application
-  or interactive content.&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;embed&lt;/code&gt; element &lt;span&gt;represents&lt;/span&gt; an integration point for an external
+  (typically non-HTML) application or interactive content.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-embed-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute
-  gives the address of the resource being embedded. The attribute, if
-  present, must contain a &lt;span&gt;valid non-empty URL potentially
-  surrounded by spaces&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;attr-embed-src&quot;&gt;&lt;code&gt;src&lt;/code&gt;&lt;/dfn&gt; attribute gives the address of the
+  resource being embedded. The attribute, if present, must contain a &lt;span&gt;valid non-empty URL
+  potentially surrounded by spaces&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;If the &lt;code title=&quot;attr-itemprop&quot;&gt;itemprop&lt;/code&gt; is specified
-  on an &lt;code&gt;embed&lt;/code&gt; element, then the &lt;code
-  title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute must also be
-  specified.&lt;/p&gt;
+  &lt;p&gt;If the &lt;code title=&quot;attr-itemprop&quot;&gt;itemprop&lt;/code&gt; is specified on an &lt;code&gt;embed&lt;/code&gt;
+  element, then the &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute must also be specified.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;attr-embed-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt;
-  attribute, if present, gives the &lt;span&gt;MIME type&lt;/span&gt; by which the
-  plugin to instantiate is selected. The value must be a &lt;span&gt;valid
-  MIME type&lt;/span&gt;. If both the &lt;code
-  title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute and the &lt;code
-  title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute are present, then the
-  &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute must specify the
-  same type as the &lt;span title=&quot;Content-Type&quot;&gt;explicit Content-Type
-  metadata&lt;/span&gt; of the resource given by the &lt;code
+  &lt;p&gt;The &lt;dfn title=&quot;attr-embed-type&quot;&gt;&lt;code&gt;type&lt;/code&gt;&lt;/dfn&gt; attribute, if present, gives the
+  &lt;span&gt;MIME type&lt;/span&gt; by which the plugin to instantiate is selected. The value must be a
+  &lt;span&gt;valid MIME type&lt;/span&gt;. If both the &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute and
+  the &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute are present, then the &lt;code
+  title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute must specify the same type as the &lt;span
+  title=&quot;Content-Type&quot;&gt;explicit Content-Type metadata&lt;/span&gt; of the resource given by the &lt;code
   title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute.&lt;/p&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;When the element is created with neither a &lt;code
-  title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute nor a &lt;code
-  title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute, and when attributes
-  are removed such that neither attribute is present on the element
-  anymore, and when the element has a &lt;span&gt;media element&lt;/span&gt;
-  ancestor, and when the element has an ancestor &lt;code&gt;object&lt;/code&gt;
-  element that is &lt;em&gt;not&lt;/em&gt; showing its &lt;span&gt;fallback
-  content&lt;/span&gt;, any plugins instantiated for the element must be
-  removed, and the &lt;code&gt;embed&lt;/code&gt; element represents nothing.&lt;/p&gt;
+  &lt;p&gt;When the element is created with neither a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute
+  nor a &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute, and when attributes are removed such
+  that neither attribute is present on the element anymore, and when the element has a &lt;span&gt;media
+  element&lt;/span&gt; ancestor, and when the element has an ancestor &lt;code&gt;object&lt;/code&gt; element that is
+  &lt;em&gt;not&lt;/em&gt; showing its &lt;span&gt;fallback content&lt;/span&gt;, any plugins instantiated for the element
+  must be removed, and the &lt;code&gt;embed&lt;/code&gt; element represents nothing.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;code&gt;embed&lt;/code&gt; element is said to be &lt;dfn
-  title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/dfn&gt; when the
-  following conditions are all met simultaneously:&lt;/p&gt;
+  &lt;p&gt;An &lt;code&gt;embed&lt;/code&gt; element is said to be &lt;dfn title=&quot;concept-embed-active&quot;&gt;potentially
+  active&lt;/dfn&gt; when the following conditions are all met simultaneously:&lt;/p&gt;
 
   &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;The element is &lt;span title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; or was &lt;span title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; the last time the &lt;span&gt;event loop&lt;/span&gt; reached step 1.&lt;/li&gt;
+
+   &lt;li&gt;The element is &lt;span title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; or was &lt;span
+   title=&quot;in a document&quot;&gt;in a &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; the last time the &lt;span&gt;event loop&lt;/span&gt;
+   reached step 1.&lt;/li&gt;
+
    &lt;li&gt;The element's &lt;code&gt;Document&lt;/code&gt; is &lt;span&gt;fully active&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;The element has either a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set or a &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute set (or both).&lt;/li&gt;
-   &lt;li&gt;The element's &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute is either absent or its value is not the empty string.&lt;/li&gt;
+
+   &lt;li&gt;The element has either a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set or a &lt;code
+   title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute set (or both).&lt;/li&gt;
+
+   &lt;li&gt;The element's &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute is either absent or its value
+   is not the empty string.&lt;/li&gt;
+
    &lt;li&gt;The element is not a descendant of a &lt;span&gt;media element&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is not a descendant of an &lt;code&gt;object&lt;/code&gt; element that is not showing its &lt;span&gt;fallback content&lt;/span&gt;.&lt;/li&gt;
-   &lt;li&gt;The element is &lt;span&gt;being rendered&lt;/span&gt;, or was &lt;span&gt;being rendered&lt;/span&gt; the last time the &lt;span&gt;event loop&lt;/span&gt; reached step 1.&lt;/li&gt;
+
+   &lt;li&gt;The element is not a descendant of an &lt;code&gt;object&lt;/code&gt; element that is not showing its
+   &lt;span&gt;fallback content&lt;/span&gt;.&lt;/li&gt;
+
+   &lt;li&gt;The element is &lt;span&gt;being rendered&lt;/span&gt;, or was &lt;span&gt;being rendered&lt;/span&gt; the last time
+   the &lt;span&gt;event loop&lt;/span&gt; reached step 1.&lt;/li&gt;
+
   &lt;/ul&gt;
 
-&lt;!--CLEANUP--&gt;
   &lt;p&gt;Whenever an &lt;code&gt;embed&lt;/code&gt; element that was not &lt;span
   title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt; becomes &lt;span
-  title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt;, and whenever
-  a &lt;span title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt;
-  &lt;code&gt;embed&lt;/code&gt; element that is remaining &lt;span
-  title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt; and has its
-  &lt;code title=&quot;attr-embed-type&quot;&gt;src&lt;/code&gt; attribute set, changed, or
-  removed or its &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute
-  set, changed, or removed, the user agent must &lt;span&gt;queue a task&lt;/span&gt;
-  using the &lt;dfn&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
+  title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt;, and whenever a &lt;span
+  title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt; &lt;code&gt;embed&lt;/code&gt; element that is
+  remaining &lt;span title=&quot;concept-embed-active&quot;&gt;potentially active&lt;/span&gt; and has its &lt;code
+  title=&quot;attr-embed-type&quot;&gt;src&lt;/code&gt; attribute set, changed, or removed or its &lt;code
+  title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute set, changed, or removed, the user agent must
+  &lt;span&gt;queue a task&lt;/span&gt; using the &lt;dfn&gt;embed task source&lt;/dfn&gt; to run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -26870,51 +26870,42 @@
 
    &lt;li&gt;
 
-  &lt;dl class=&quot;switch&quot;&gt;
+    &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;If the element has a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt;
-   attribute set&lt;/dt&gt;
+     &lt;dt&gt;If the element has a &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;
+     &lt;dd&gt;
 
-    &lt;p&gt;The user agent must &lt;span title=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt;
-    the value of the element's &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt;
-    attribute, relative to the element. If that is successful, the
-    user agent should &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; the resulting
-    &lt;span&gt;absolute URL&lt;/span&gt;, from the element's &lt;span&gt;browsing
-    context scope origin&lt;/span&gt; if it has one&lt;!-- potentially
-    http-origin privacy sensitive --&gt;. The &lt;span
-    title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
-    task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt;
-    once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; must
-    find and instantiate an appropriate &lt;span&gt;plugin&lt;/span&gt; based on
-    the &lt;span title=&quot;concept-embed-type&quot;&gt;content's type&lt;/span&gt;, and
-    hand that &lt;span&gt;plugin&lt;/span&gt; the content of the resource,
-    replacing any previously instantiated plugin for the element.&lt;/p&gt;
-    &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
+      &lt;p&gt;The user agent must &lt;span title=&quot;resolve a url&quot;&gt;resolve&lt;/span&gt; the value of the element's
+      &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute, relative to the element. If that is
+      successful, the user agent should &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; the resulting &lt;span&gt;absolute
+      URL&lt;/span&gt;, from the element's &lt;span&gt;browsing context scope origin&lt;/span&gt; if it has one&lt;!--
+      potentially http-origin privacy sensitive --&gt;. The &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that
+      is &lt;span title=&quot;queue a task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once
+      the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; must find and instantiate an
+      appropriate &lt;span&gt;plugin&lt;/span&gt; based on the &lt;span title=&quot;concept-embed-type&quot;&gt;content's
+      type&lt;/span&gt;, and hand that &lt;span&gt;plugin&lt;/span&gt; the content of the resource, replacing any
+      previously instantiated plugin for the element.&lt;/p&gt;
+      &lt;!-- Note that this doesn't happen when the base URL changes. --&gt;
 
-    &lt;p&gt;Fetching the resource must &lt;span&gt;delay the load event&lt;/span&gt; of
-    the element's document.&lt;/p&gt;
-    &lt;!-- if we add load/error events, then replace the previous
-    paragraph with the text one: --&gt;
-    &lt;!-- similar text in various places --&gt;
-    &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load
-    event&lt;/span&gt; of the element's document until the final &lt;span
-    title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
-    task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt;
-    once the resource has been &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has
-    been run.&lt;/p&gt;--&gt;
+      &lt;p&gt;Fetching the resource must &lt;span&gt;delay the load event&lt;/span&gt; of the element's document.&lt;/p&gt;
+      &lt;!-- if we add load/error events, then replace the previous paragraph with the text one: --&gt;
+      &lt;!-- similar text in various places --&gt;
+      &lt;!--&lt;p&gt;Fetching the resource must &lt;span&gt;delay the load event&lt;/span&gt; of the element's document
+      until the final &lt;span title=&quot;concept-task&quot;&gt;task&lt;/span&gt; that is &lt;span title=&quot;queue a
+      task&quot;&gt;queued&lt;/span&gt; by the &lt;span&gt;networking task source&lt;/span&gt; once the resource has been
+      &lt;span title=&quot;fetch&quot;&gt;fetched&lt;/span&gt; has been run.&lt;/p&gt;--&gt;
 
-   &lt;/dd&gt;
+     &lt;/dd&gt;
 
-   &lt;dt&gt;If the element has no &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set&lt;/dt&gt;
+     &lt;dt&gt;If the element has no &lt;code title=&quot;attr-embed-src&quot;&gt;src&lt;/code&gt; attribute set&lt;/dt&gt;
 
-   &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;span&gt;plugin&lt;/span&gt; based on the
-   value of the &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;The user agent should find and instantiate an appropriate &lt;span&gt;plugin&lt;/span&gt; based on
+     the value of the &lt;code title=&quot;attr-embed-type&quot;&gt;type&lt;/code&gt; attribute.&lt;/p&gt;
 
-  &lt;/dl&gt;
+    &lt;/dl&gt;
 
-  &lt;/li&gt;
+   &lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -27036,8 +27027,8 @@
    &lt;p&gt;If the user does not have the plugin (for example if the plugin vendor doesn't support the
    user's platform), then the user will be unable to use the resource.&lt;/p&gt;
 
-   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;,
-   an attribute can be specified:&lt;/p&gt;
+   &lt;p&gt;To pass the plugin a parameter &quot;quality&quot; with the value &quot;high&quot;, an attribute can be
+   specified:&lt;/p&gt;
 
    &lt;pre&gt;&lt;embed src=&quot;catgame.swf&quot; quality=&quot;high&quot;&gt;&lt;/pre&gt;
 
@@ -93083,10 +93074,10 @@
    shutting down unexpectedly.&lt;/p&gt;&lt;/li&gt;
 --&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;span title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; queued in the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's &lt;span&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task queues&lt;/span&gt;&lt;!-- v2-onclose other than the &lt;code
-   title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just added--&gt;, discard them
-   without processing them.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;span title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; queued in the
+   &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's &lt;span&gt;event loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task
+   queues&lt;/span&gt;&lt;!-- v2-onclose other than the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event
+   that this algorithm just added--&gt;, discard them without processing them.&lt;/p&gt;&lt;/li&gt;
 
 &lt;!-- v2-onclose
    &lt;li&gt;&lt;p&gt;If the &lt;code title=&quot;event-worker-close&quot;&gt;close&lt;/code&gt; event that this algorithm just queued
@@ -93117,9 +93108,9 @@
    &lt;li&gt;&lt;p&gt;Set the worker's &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's &lt;span
    title=&quot;dom-WorkerGlobalScope-closing&quot;&gt;closing&lt;/span&gt; flag to true.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there are any &lt;span title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; queued in the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's &lt;span&gt;event &lt;!--CLEANUP--&gt;
-   loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task queues&lt;/span&gt;, discard them without processing
-   them.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any &lt;span title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; queued in the
+   &lt;code&gt;WorkerGlobalScope&lt;/code&gt; object's &lt;span&gt;event loop&lt;/span&gt;'s &lt;span title=&quot;task queue&quot;&gt;task
+   queues&lt;/span&gt;, discard them without processing them.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Abort the script currently running in the worker.&lt;/p&gt;&lt;/li&gt;
 
@@ -95199,140 +95190,113 @@
   void &lt;span title=&quot;dom-WebSocket-send&quot;&gt;send&lt;/span&gt;(&lt;span&gt;ArrayBufferView&lt;/span&gt; data);
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket&quot;&gt;&lt;code&gt;WebSocket(&lt;var
-  title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt;
-  constructor takes one or two arguments. The first argument, &lt;var
-  title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;span&gt;URL&lt;/span&gt; to which to
-  connect. The second, &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is
-  either a string or an array of strings. If it is a string, it is
-  equivalent to an array consisting of just that string; if it is
-  omitted, it is equivalent to the empty array. Each string in the
-  array is a subprotocol name. The connection will only be established
-  if the server reports that it has selected one of these
-  subprotocols. The subprotocol names must all be strings that match
-  the requirements for elements that comprise the value of &lt;code
-  title=&quot;http-sec-websocket-protocol&quot;&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-  header fields as defined by the WebSocket protocol specification. &lt;a
-  href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket&quot;&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;protocols&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one or two arguments. The first argument,
+  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, specifies the &lt;span&gt;URL&lt;/span&gt; to which to connect. The second, &lt;var
+  title=&quot;&quot;&gt;protocols&lt;/var&gt;, if present, is either a string or an array of strings. If it is a
+  string, it is equivalent to an array consisting of just that string; if it is omitted, it is
+  equivalent to the empty array. Each string in the array is a subprotocol name. The connection will
+  only be established if the server reports that it has selected one of these subprotocols. The
+  subprotocol names must all be strings that match the requirements for elements that comprise the
+  value of &lt;code title=&quot;http-sec-websocket-protocol&quot;&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as
+  defined by the WebSocket protocol specification. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA
-  must run these steps:&lt;/p&gt;
+  &lt;p&gt;When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is invoked, the UA must run these steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;i&gt;Parse a WebSocket URL's components&lt;/i&gt; from the &lt;var
-   title=&quot;&quot;&gt;url&lt;/var&gt; argument, to obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a
-   &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps. &lt;a
-   href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Parse a WebSocket URL's components&lt;/i&gt; from the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument, to
+   obtain &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and
+   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;. If this fails, throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort
+   these steps. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the
-   &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; has a scheme
-   component that is itself a secure protocol, e.g. HTTPS, then throw
-   a &lt;code&gt;SecurityError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry
+   script&lt;/span&gt; has a scheme component that is itself a secure protocol, e.g. HTTPS, then throw a
+   &lt;code&gt;SecurityError&lt;/code&gt; exception.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent
-    is configured to block access, then throw a
-    &lt;code&gt;SecurityError&lt;/code&gt; exception. (User agents typically block
-    access to well-known ports like SMTP.)&lt;/p&gt;
-
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is a port to which the user agent is configured to block access,
+    then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception. (User agents typically block access to
+    well-known ports like SMTP.)&lt;/p&gt;
     &lt;!-- e.g. <A HREF="http://www.mozilla.org/projects/netlib/PortBanning.html">http://www.mozilla.org/projects/netlib/PortBanning.html</A> --&gt;
 
-    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the
-    unlikely cases when &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var
-    title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true
-    but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
+    &lt;p&gt;Access to ports 80 and 443 should not be blocked, including the unlikely cases when &lt;var
+    title=&quot;&quot;&gt;secure&lt;/var&gt; is false but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 443 or &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
+    is true but &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is 80.&lt;/p&gt;
     &lt;!-- paragraph requested by zcorpan --&gt;
 
    &lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var
-    title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty array.&lt;/p&gt;
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is absent, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; be an empty
+    array.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a
-    string, let &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array
-    consisting of just that string.&lt;/p&gt;
+    &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; is present and a string, let &lt;var
+    title=&quot;&quot;&gt;protocols&lt;/var&gt; instead be an array consisting of just that string.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur
-   more than once or otherwise fail to match the requirements for
-   elements that comprise the value of &lt;code
-   title=&quot;http-sec-websocket-protocol&quot;&gt;Sec-WebSocket-Protocol&lt;/code&gt;
-   header fields as defined by the WebSocket protocol specification,
-   then throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these
+   &lt;li&gt;&lt;p&gt;If any of the values in &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; occur more than once or otherwise
+   fail to match the requirements for elements that comprise the value of &lt;code
+   title=&quot;http-sec-websocket-protocol&quot;&gt;Sec-WebSocket-Protocol&lt;/code&gt; header fields as defined by the
+   WebSocket protocol specification, then throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these
    steps. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;span title=&quot;ASCII
-   serialization of an origin&quot;&gt;ASCII serialization&lt;/span&gt; of the
-   &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt;,
-   &lt;span&gt;converted to ASCII lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;span title=&quot;ASCII serialization of an origin&quot;&gt;ASCII
+   serialization&lt;/span&gt; of the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt;, &lt;span&gt;converted
+   to ASCII lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;WebSocket&lt;/code&gt; object, and continue
-   these steps in the background (without blocking scripts).&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;WebSocket&lt;/code&gt; object, and continue these steps in the background
+   (without blocking scripts).&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;i&gt;Establish a WebSocket connection&lt;/i&gt; given the set (&lt;var
-    title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var
-    title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along
-    with the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the
-    extensions, and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;headers to send
-    appropriate cookies&lt;/i&gt; must be a &lt;code
-    title=&quot;http-Cookie&quot;&gt;Cookie&lt;/code&gt; header whose value is the
-    &lt;i&gt;cookie-string&lt;/i&gt; computed from the user's cookie store and the
-    URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
+    &lt;p&gt;&lt;i&gt;Establish a WebSocket connection&lt;/i&gt; given the set (&lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var
+    title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;), along with
+    the &lt;var title=&quot;&quot;&gt;protocols&lt;/var&gt; list, an empty list for the extensions, and &lt;var
+    title=&quot;&quot;&gt;origin&lt;/var&gt;. The &lt;i&gt;headers to send appropriate cookies&lt;/i&gt; must be a &lt;code
+    title=&quot;http-Cookie&quot;&gt;Cookie&lt;/code&gt; header whose value is the &lt;i&gt;cookie-string&lt;/i&gt; computed from
+    the user's cookie store and the URL &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;; for these purposes this is
     &lt;em&gt;not&lt;/em&gt; a &quot;non-HTTP&quot; API. &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt; &lt;a
     href=&quot;#refsCOOKIES&quot;&gt;[COOKIES]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's
-    response&quot;&gt;validates the server's response&lt;/i&gt; during the
-    &quot;&lt;i&gt;establish a WebSocket connection&lt;/i&gt;&quot; algorithm, if the status
-    code received from the server is not 101 (e.g. it is a redirect),
-    the user agent must &lt;i&gt;fail the WebSocket connection&lt;/i&gt;.&lt;/p&gt;
+    &lt;p&gt;When the user agent &lt;i title=&quot;validate the server's response&quot;&gt;validates the server's
+    response&lt;/i&gt; during the &quot;&lt;i&gt;establish a WebSocket connection&lt;/i&gt;&quot; algorithm, if the status code
+    received from the server is not 101 (e.g. it is a redirect), the user agent must &lt;i&gt;fail the
+    WebSocket connection&lt;/i&gt;.&lt;/p&gt;
 
-    &lt;p class=&quot;warning&quot;&gt;Following HTTP procedures here could introduce
-    serious security problems in a Web browser context. For example,
-    consider a host with a WebSocket server at one path and an open
-    HTTP redirector at another. Suddenly, any script that can be given
-    a particular WebSocket URL can be tricked into communicating to
-    (and potentially sharing secrets with) any host on the Internet,
-    even if the script checks that the URL has the right hostname.&lt;/p&gt;
+    &lt;p class=&quot;warning&quot;&gt;Following HTTP procedures here could introduce serious security problems in a
+    Web browser context. For example, consider a host with a WebSocket server at one path and an
+    open HTTP redirector at another. Suddenly, any script that can be given a particular WebSocket
+    URL can be tricked into communicating to (and potentially sharing secrets with) any host on the
+    Internet, even if the script checks that the URL has the right hostname.&lt;/p&gt;
     &lt;!-- <A HREF="http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html">http://www.ietf.org/mail-archive/web/hybi/current/msg06951.html</A> --&gt;
 
-    &lt;p class=&quot;note&quot;&gt;If the &lt;i&gt;establish a WebSocket connection&lt;/i&gt;
-    algorithm fails, it triggers the &lt;i&gt;fail the WebSocket
-    connection&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;close the
-    WebSocket connection&lt;/i&gt; algorithm, which then establishes that
-    &lt;i&gt;the WebSocket connection is closed&lt;/i&gt;, which fires the &lt;code
-    title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a
-    href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+    &lt;p class=&quot;note&quot;&gt;If the &lt;i&gt;establish a WebSocket connection&lt;/i&gt; algorithm fails, it triggers the
+    &lt;i&gt;fail the WebSocket connection&lt;/i&gt; algorithm, which then invokes the &lt;i&gt;close the WebSocket
+    connection&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;the WebSocket connection is closed&lt;/i&gt;,
+    which fires the &lt;code title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a href=&quot;#closeWebSocket&quot;&gt;as
+    described below&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p&gt;This constructor must be visible when the &lt;span&gt;script's global
-  object&lt;/span&gt; is either a &lt;code&gt;Window&lt;/code&gt; object or an object
-  implementing the &lt;code&gt;WorkerGlobalScope&lt;/code&gt; interface.&lt;/p&gt;
+  &lt;p&gt;This constructor must be visible when the &lt;span&gt;script's global object&lt;/span&gt; is either a
+  &lt;code&gt;Window&lt;/code&gt; object or an object implementing the &lt;code&gt;WorkerGlobalScope&lt;/code&gt;
+  interface.&lt;/p&gt;
 
   &lt;hr&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-url&quot;&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the result of &lt;span title=&quot;resolve a
-  url&quot;&gt;resolving&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; that was passed to the
-  constructor. (It doesn't matter what it is resolved relative to,
-  since we already know it is an &lt;span&gt;absolute URL&lt;/span&gt;.)&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-url&quot;&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt; attribute must return the result of
+  &lt;span title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the &lt;span&gt;URL&lt;/span&gt; that was passed to the
+  constructor. (It doesn't matter what it is resolved relative to, since we already know it is an
+  &lt;span&gt;absolute URL&lt;/span&gt;.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-WebSocket-readyState&quot;&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the state of the connection. It can have the
-  following values:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-readyState&quot;&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt; attribute represents
+  the state of the connection. It can have the following values:&lt;/p&gt;
 
   &lt;dl&gt;
 
@@ -95346,7 +95310,8 @@
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-WebSocket-CLOSING&quot;&gt;&lt;code&gt;CLOSING&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
 
-   &lt;dd&gt;The connection is going through the closing handshake, or the &lt;code title=&quot;dom-WebSocket-close&quot;&gt;close()&lt;/code&gt; method has been invoked.&lt;/dd&gt;
+   &lt;dd&gt;The connection is going through the closing handshake, or the &lt;code
+   title=&quot;dom-WebSocket-close&quot;&gt;close()&lt;/code&gt; method has been invoked.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn title=&quot;dom-WebSocket-CLOSED&quot;&gt;&lt;code&gt;CLOSED&lt;/code&gt;&lt;/dfn&gt; (numeric value 3)&lt;/dt&gt;
 
@@ -95354,65 +95319,52 @@
 
   &lt;/dl&gt;
 
-  &lt;p&gt;When the object is created its &lt;code
-  title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; must be set to
-  &lt;code title=&quot;dom-WebSocket-CONNECTING&quot;&gt;CONNECTING&lt;/code&gt; (0).&lt;/p&gt;
+  &lt;p&gt;When the object is created its &lt;code title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; must be
+  set to &lt;code title=&quot;dom-WebSocket-CONNECTING&quot;&gt;CONNECTING&lt;/code&gt; (0).&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-WebSocket-extensions&quot;&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt;
-  attribute must initially return the empty string. After &lt;i&gt;the
-  WebSocket connection is established&lt;/i&gt;, its value might change, as
-  defined below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-extensions&quot;&gt;&lt;code&gt;extensions&lt;/code&gt;&lt;/dfn&gt; attribute must
+  initially return the empty string. After &lt;i&gt;the WebSocket connection is established&lt;/i&gt;, its value
+  might change, as defined below.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;The &lt;code
-  title=&quot;dom-WebSocket-extensions&quot;&gt;extensions&lt;/code&gt; attribute returns
-  the extensions selected by the server, if any. (Currently this will
-  only ever be the empty string.)&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-WebSocket-extensions&quot;&gt;extensions&lt;/code&gt; attribute returns the
+  extensions selected by the server, if any. (Currently this will only ever be the empty
+  string.)&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-WebSocket-protocol&quot;&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute
-  must initially return the empty string. After &lt;i&gt;the WebSocket
-  connection is established&lt;/i&gt;, its value might change, as defined
-  below.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-protocol&quot;&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt; attribute must initially
+  return the empty string. After &lt;i&gt;the WebSocket connection is established&lt;/i&gt;, its value might
+  change, as defined below.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;The &lt;code
-  title=&quot;dom-WebSocket-protocol&quot;&gt;protocol&lt;/code&gt; attribute returns the
-  subprotocol selected by the server, if any. It can be used in
-  conjunction with the array form of the constructor's second argument
-  to perform subprotocol negotiation.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;dom-WebSocket-protocol&quot;&gt;protocol&lt;/code&gt; attribute returns the
+  subprotocol selected by the server, if any. It can be used in conjunction with the array form of
+  the constructor's second argument to perform subprotocol negotiation.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
-  method must run the following steps:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-WebSocket-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt; method must run the following
+  steps:&lt;/p&gt;
 
-&lt;!--CLEANUP--&gt;
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an
-   integer equal to 1000 nor an integer in the range 3000 to 4999, throw an
-   &lt;code&gt;InvalidAccessError&lt;/code&gt; exception and abort these
-   steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the method's first argument is present but is neither an integer equal to 1000 nor an
+   integer in the range 3000 to 4999, throw an &lt;code&gt;InvalidAccessError&lt;/code&gt; exception and abort
+   these steps.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;If the method's second argument is present, then run these
-    substeps:&lt;/p&gt;
+    &lt;p&gt;If the method's second argument is present, then run these substeps:&lt;/p&gt;
 
     &lt;ol&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second
-     argument.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; be the method's second argument.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of
-     &lt;span title=&quot;convert a DOMString to a sequence of Unicode
-     characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a
-     sequence of Unicode characters&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; be the result of &lt;span title=&quot;convert a DOMString
+     to a sequence of Unicode characters&quot;&gt;converting &lt;var title=&quot;&quot;&gt;raw reason&lt;/var&gt; to a sequence of
+     Unicode characters&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding
-     &lt;var title=&quot;&quot;&gt;Unicode reason&lt;/var&gt; as UTF-8.&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; be the result of encoding &lt;var title=&quot;&quot;&gt;Unicode
+     reason&lt;/var&gt; as UTF-8.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes,
-     then throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these
-     steps. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; is longer than 123 bytes, then throw a
+     &lt;code&gt;SyntaxError&lt;/code&gt; exception and abort these steps. &lt;a
+     href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
 
     &lt;/ol&gt;
 
@@ -95422,8 +95374,7 @@
 
     &lt;dl class=&quot;switch&quot;&gt;
 
-     &lt;dt&gt;If the &lt;code title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt;
-     attribute is in the &lt;code
+     &lt;dt&gt;If the &lt;code title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute is in the &lt;code
      title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2) or &lt;code
      title=&quot;dom-WebSocket-CLOSED&quot;&gt;CLOSED&lt;/code&gt; (3) state&lt;/dt&gt;
 
@@ -95431,64 +95382,52 @@
 
       &lt;p&gt;Do nothing.&lt;/p&gt;
 
-      &lt;p class=&quot;note&quot;&gt;The connection is already closing or is already
-      closed. If it has not already, a &lt;code
-      title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event will eventually fire &lt;a
+      &lt;p class=&quot;note&quot;&gt;The connection is already closing or is already closed. If it has not already,
+      a &lt;code title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event will eventually fire &lt;a
       href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the
-     WebSocket connection is established&quot;&gt;established&lt;/i&gt; &lt;a
-     href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket connection is not yet &lt;i title=&quot;the WebSocket connection is
+     established&quot;&gt;established&lt;/i&gt; &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
       &lt;p&gt;&lt;i&gt;Fail the WebSocket connection&lt;/i&gt; and set the &lt;code
-      title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute's
-      value to &lt;code title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2).
-      &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute's value to &lt;code
+      title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2). &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=&quot;note&quot;&gt;The &lt;i&gt;fail the WebSocket connection&lt;/i&gt;
-      algorithm invokes the &lt;i&gt;close the WebSocket
-      connection&lt;/i&gt; algorithm, which then establishes that 
-      &lt;i&gt;the WebSocket connection is closed&lt;/i&gt;, which fires the
-      &lt;code title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a
+      &lt;p class=&quot;note&quot;&gt;The &lt;i&gt;fail the WebSocket connection&lt;/i&gt; algorithm invokes the &lt;i&gt;close the
+      WebSocket connection&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;the WebSocket connection is
+      closed&lt;/i&gt;, which fires the &lt;code title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a
       href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i
-     title=&quot;the WebSocket closing handshake is
-     started&quot;&gt;started&lt;/i&gt; &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
+     &lt;dt&gt;If the WebSocket closing handshake has not yet been &lt;i title=&quot;the WebSocket closing
+     handshake is started&quot;&gt;started&lt;/i&gt; &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
 
-      &lt;p&gt;&lt;i&gt;Start the WebSocket closing handshake&lt;/i&gt; and set the
-      &lt;code title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt;
-      attribute's value to &lt;code
-      title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2). &lt;a
-      href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;&lt;i&gt;Start the WebSocket closing handshake&lt;/i&gt; and set the &lt;code
+      title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute's value to &lt;code
+      title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2). &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the first argument is present, then the status
-      code&lt;!--CLOSE CODE--&gt; to use in the WebSocket Close message must
-      be the integer given by the first argument. &lt;a
+      &lt;p&gt;If the first argument is present, then the status code&lt;!--CLOSE CODE--&gt; to use in the
+      WebSocket Close message must be the integer given by the first argument. &lt;a
       href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p&gt;If the second argument is also present, then &lt;var
-      title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in the Close message
-      after the status code&lt;!--CLOSE CODE--&gt;. &lt;a
-      href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt; &lt;a
-      href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
+      &lt;p&gt;If the second argument is also present, then &lt;var title=&quot;&quot;&gt;reason&lt;/var&gt; must be provided in
+      the Close message after the status code&lt;!--CLOSE CODE--&gt;. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;
+      &lt;a href=&quot;#refsWSP&quot;&gt;[WSP]&lt;/a&gt;&lt;/p&gt;
 
-      &lt;p class=&quot;note&quot;&gt;The &lt;i&gt;start the WebSocket closing handshake&lt;/i&gt;
-      algorithm eventually invokes the &lt;i&gt;close the WebSocket
-      connection&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;the
+      &lt;p class=&quot;note&quot;&gt;The &lt;i&gt;start the WebSocket closing handshake&lt;/i&gt; algorithm eventually invokes
+      the &lt;i&gt;close the WebSocket connection&lt;/i&gt; algorithm, which then establishes that &lt;i&gt;the
       WebSocket connection is closed&lt;/i&gt;, which fires the &lt;code
-      title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a
-      href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event &lt;a href=&quot;#closeWebSocket&quot;&gt;as described
+      below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -95497,17 +95436,13 @@
 
      &lt;dd&gt;
 
-      &lt;p&gt;Set the &lt;code
-      title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute's
-      value to &lt;code title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt;
-      (2).&lt;/p&gt;
+      &lt;p&gt;Set the &lt;code title=&quot;dom-WebSocket-readyState&quot;&gt;readyState&lt;/code&gt; attribute's value to &lt;code
+      title=&quot;dom-WebSocket-CLOSING&quot;&gt;CLOSING&lt;/code&gt; (2).&lt;/p&gt;
 
-      &lt;p class=&quot;note&quot;&gt;&lt;i&gt;The WebSocket closing handshake is
-      started&lt;/i&gt;, and will eventually invoke the &lt;i&gt;close the
-      WebSocket connection&lt;/i&gt; algorithm, which will establish that
-      &lt;i&gt;the WebSocket connection is closed&lt;/i&gt;, and thus the &lt;code
-      title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt; event will fire, &lt;a
-      href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
+      &lt;p class=&quot;note&quot;&gt;&lt;i&gt;The WebSocket closing handshake is started&lt;/i&gt;, and will eventually invoke
+      the &lt;i&gt;close the WebSocket connection&lt;/i&gt; algorithm, which will establish that &lt;i&gt;the
+      WebSocket connection is closed&lt;/i&gt;, and thus the &lt;code title=&quot;event-socket-close&quot;&gt;close&lt;/code&gt;
+      event will fire, &lt;a href=&quot;#closeWebSocket&quot;&gt;as described below&lt;/a&gt;.&lt;/p&gt;
 
      &lt;/dd&gt;
 
@@ -95889,100 +95824,81 @@
 
   &lt;h4&gt;Ping and Pong frames&lt;/h4&gt;
 
-  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames
-  that can be used for keep-alive, heart-beats, network status
-  probing, latency instrumentation, and so forth. These are not
-  currently exposed in the API.&lt;/p&gt;
+  &lt;p&gt;The WebSocket protocol specification defines Ping and Pong frames that can be used for
+  keep-alive, heart-beats, network status probing, latency instrumentation, and so forth. These are
+  not currently exposed in the API.&lt;/p&gt;
 
-  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired,
-  for example in an attempt to maintain local network NAT mappings, to
-  detect failed connections, or to display latency metrics to the
-  user. User agents must not use pings or unsolicited pongs to aid the
-  server; it is assumed that servers will solicit pongs whenever
-  appropriate for the server's needs.&lt;/p&gt;
+  &lt;p&gt;User agents may send ping and unsolicited pong frames as desired, for example in an attempt to
+  maintain local network NAT mappings, to detect failed connections, or to display latency metrics
+  to the user. User agents must not use pings or unsolicited pongs to aid the server; it is assumed
+  that servers will solicit pongs whenever appropriate for the server's needs.&lt;/p&gt;
 
-  &lt;!-- v2: we'll probably add a way to make the client send pings and
-  automatically terminate the connection if they don't get a pong
-  within an author-provided timeout; see
+  &lt;!-- v2: we'll probably add a way to make the client send pings and automatically terminate the
+  connection if they don't get a pong within an author-provided timeout; see
   <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264">https://www.w3.org/Bugs/Public/show_bug.cgi?id=17264</A> --&gt;
 
 
   &lt;h4&gt;Parsing WebSocket URLs&lt;/h4&gt;
 
-  &lt;p&gt;The steps to &lt;dfn&gt;parse a WebSocket URL's components&lt;/dfn&gt; from
-  a string &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return
-  either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, a
-  &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
-  flag, or they fail.&lt;/p&gt;
+  &lt;p&gt;The steps to &lt;dfn&gt;parse a WebSocket URL's components&lt;/dfn&gt; from a string &lt;var
+  title=&quot;&quot;&gt;url&lt;/var&gt; are as follows. These steps return either a &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, a &lt;var
+  title=&quot;&quot;&gt;port&lt;/var&gt;, a &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and a &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; flag,
+  or they fail.&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an
-   &lt;span&gt;absolute URL&lt;/span&gt;, then fail this algorithm.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string is not an &lt;span&gt;absolute URL&lt;/span&gt;, then fail this
+   algorithm.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;
 
-    &lt;p&gt;&lt;span title=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;var
-    title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL character encoding set to
-    UTF-8. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL
-    character encoding is used to escape the query component --&gt;
+    &lt;p&gt;&lt;span title=&quot;resolve a url&quot;&gt;Resolve&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; string, with the URL
+    character encoding set to UTF-8. &lt;a href=&quot;#refsRFC3629&quot;&gt;[RFC3629]&lt;/a&gt;&lt;/p&gt; &lt;!-- the URL character
+    encoding is used to escape the query component --&gt;
 
-    &lt;p class=&quot;note&quot;&gt;It doesn't matter what it is resolved relative to,
-    since we already know it is an &lt;span&gt;absolute URL&lt;/span&gt; at this
-    point.&lt;/p&gt;
+    &lt;p class=&quot;note&quot;&gt;It doesn't matter what it is resolved relative to, since we already know it is
+    an &lt;span&gt;absolute URL&lt;/span&gt; at this point.&lt;/p&gt;
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;span
-   title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component whose value,
-   when &lt;span&gt;converted to ASCII lowercase&lt;/span&gt;, is either &quot;&lt;code
-   title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this
-   algorithm.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; does not have a &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt;
+   component whose value, when &lt;span&gt;converted to ASCII lowercase&lt;/span&gt;, is either &quot;&lt;code
+   title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, then fail this algorithm.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span
-   title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt; component, then fail
-   this algorithm.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/span&gt;
+   component, then fail this algorithm.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If the &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt;
-   component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;,
-   set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;span
-   title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component is &quot;&lt;code
-   title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to
-   true.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;span title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
+   is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;span
+   title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/span&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var
+   title=&quot;&quot;&gt;secure&lt;/var&gt; to true.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;span
-   title=&quot;url-host&quot;&gt;&lt;host&gt;&lt;/span&gt; component of &lt;var
-   title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;span&gt;converted to ASCII
-   lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- at this point this is
-   Punycode-encoded already --&gt;
+   title=&quot;url-host&quot;&gt;&lt;host&gt;&lt;/span&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;span&gt;converted to
+   ASCII lowercase&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- at this point this is Punycode-encoded already --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span
-   title=&quot;url-port&quot;&gt;&lt;port&gt;&lt;/span&gt; component, then let &lt;var
-   title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is
-   no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span title=&quot;url-port&quot;&gt;&lt;port&gt;&lt;/span&gt; component,
+   then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is no explicit &lt;var
+   title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if
-   &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;
-   be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 443.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is
+   false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 80, otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be
+   443.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the
-   &lt;span title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/span&gt; component (which might
-   be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- at this point
-   this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the &lt;span
+   title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/span&gt; component (which might be empty) of &lt;var
+   title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string,
-   set it to a single character U+002F SOLIDUS (/).&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string, set it to a single character
+   U+002F SOLIDUS (/).&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span
-   title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt; component, then append a
-   single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource
-   name&lt;/var&gt;, followed by the value of the &lt;span
-   title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt; component.&lt;/p&gt;&lt;/li&gt; &lt;!-- at
-   this point this is UTF-8 encoded and %-escaped --&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;span title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt; component,
+   then append a single U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;,
+   followed by the value of the &lt;span title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt; component.&lt;/p&gt;&lt;/li&gt;
+   &lt;!-- at this point this is UTF-8 encoded and %-escaped --&gt;
 
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;,
-   &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, and &lt;var
-   title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource
+   name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
@@ -96002,23 +95918,17 @@
   DOMString reason;
 };&lt;/pre&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-CloseEvent-wasClean&quot;&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to false. It
-  represents whether the connection closed cleanly or not.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-CloseEvent-wasClean&quot;&gt;&lt;code&gt;wasClean&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  false. It represents whether the connection closed cleanly or not.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-CloseEvent-code&quot;&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to zero. It
-  represents the WebSocket connection close code provided by the
-  server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-CloseEvent-code&quot;&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; attribute must return the value it
+  was initialized to. When the object is created, this attribute must be initialized to zero. It
+  represents the WebSocket connection close code provided by the server.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-CloseEvent-reason&quot;&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value it was initialized to. When the
-  object is created, this attribute must be initialized to empty
-  string. It represents the WebSocket connection close reason provided
-  by the server.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn title=&quot;dom-CloseEvent-reason&quot;&gt;&lt;code&gt;reason&lt;/code&gt;&lt;/dfn&gt; attribute must return the
+  value it was initialized to. When the object is created, this attribute must be initialized to
+  empty string. It represents the WebSocket connection close reason provided by the server.&lt;/p&gt;
 
 
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014562.html">[html5] r7703 - [giow] (3) Better match reality,	however weird it is. Fixing https://www.w3.org/ [...]
</A></li>
	<LI>Next message: <A HREF="014564.html">[html5] r7705 - [giow] (2) Match reality. It's a bit more useful	anyway, arguably. Fixing https: [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14563">[ date ]</a>
              <a href="thread.html#14563">[ thread ]</a>
              <a href="subject.html#14563">[ subject ]</a>
              <a href="author.html#14563">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
