<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7791 - [giow] (1) Add a .relatedTarget attribute on 'show'	events for &lt;menu&gt; elements. [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7791%20-%20%5Bgiow%5D%20%281%29%20Add%20a%20.relatedTarget%20attribute%20on%20%27show%27%0A%09events%20for%20%3Cmenu%3E%20elements.%20%5B...%5D&In-Reply-To=%3C20130403202333.21D2B1CBC055%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014648.html">
   <LINK REL="Next"  HREF="014650.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7791 - [giow] (1) Add a .relatedTarget attribute on 'show'	events for &lt;menu&gt; elements. [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7791%20-%20%5Bgiow%5D%20%281%29%20Add%20a%20.relatedTarget%20attribute%20on%20%27show%27%0A%09events%20for%20%3Cmenu%3E%20elements.%20%5B...%5D&In-Reply-To=%3C20130403202333.21D2B1CBC055%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7791 - [giow] (1) Add a .relatedTarget attribute on 'show'	events for &lt;menu&gt; elements. [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Apr  3 13:23:33 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014648.html">[html5] r7790 - [e] (0) Oops,	deleted some of the &lt;link&gt; element's details by mistake. Fixing ht	[...]
</A></li>
        <LI>Next message: <A HREF="014650.html">[html5] r7792 - [giow] (1) Set the .relatedTarget attribute on	'click' events for &lt;menuitem&gt; ele [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14649">[ date ]</a>
              <a href="thread.html#14649">[ thread ]</a>
              <a href="subject.html#14649">[ subject ]</a>
              <a href="author.html#14649">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-04-03 13:23:31 -0700 (Wed, 03 Apr 2013)
New Revision: 7791

Modified:
   complete.html
   index
   source
Log:
[giow] (1) Add a .relatedTarget attribute on 'show' events for &lt;menu&gt; elements.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=17840">https://www.w3.org/Bugs/Public/show_bug.cgi?id=17840</A>
Affected topics: HTML

Modified: complete.html
===================================================================
--- complete.html	2013-04-01 19:17:26 UTC (rev 7790)
+++ complete.html	2013-04-03 20:23:31 UTC (rev 7791)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 1 April 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 3 April 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -774,7 +774,8 @@
      &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-definitions-0&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/a&gt;&lt;/li&gt;
@@ -914,7 +915,7 @@
      &lt;li&gt;&lt;a href=#scroll-to-fragid&gt;&lt;span class=secno&gt;6.6.9 &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#history-traversal&gt;&lt;span class=secno&gt;6.6.10 &lt;/span&gt;History traversal&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-definitions-0&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-definitions-1&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#unloading-documents&gt;&lt;span class=secno&gt;6.6.11 &lt;/span&gt;Unloading documents&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#event-definition&gt;&lt;span class=secno&gt;6.6.11.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -1067,7 +1068,7 @@
      &lt;li&gt;&lt;a href=#worker-locations&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Worker locations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#event-definitions-1&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#server-sent-events&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Server-sent events&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -1089,7 +1090,7 @@
      &lt;li&gt;&lt;a href=#feedback-from-the-protocol&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Feedback from the protocol&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#ping-and-pong-frames&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Ping and Pong frames&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#parsing-websocket-urls&gt;&lt;span class=secno&gt;10.3.5 &lt;/span&gt;Parsing WebSocket URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#event-definitions-3&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#garbage-collection-1&gt;&lt;span class=secno&gt;10.3.7 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#web-messaging&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
     &lt;ol&gt;
@@ -50162,8 +50163,10 @@
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt;, if
      any. If there isn't one, then abort these steps.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that is
-     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#concept-event-fire title=concept-event-fire&gt;Fire&lt;/a&gt; a &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
+     interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
+     initialized to the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element. The event must be cancelable. &lt;!-- v2: include
+     modifier key information --&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
      show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
@@ -56462,10 +56465,14 @@
 
   &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/h5&gt;
 
-  &lt;p&gt;If there is no element with the ID given by an element's &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in the element's &lt;a href=#home-subtree&gt;home
-  subtree&lt;/a&gt;, or if the first such element is not a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
-  menu&lt;/a&gt; state, then the element has no assigned context menu. Otherwise, the element's
-  assigned context menu is the first such element.&lt;/p&gt;
+  &lt;p&gt;Each element has an &lt;dfn id=assigned-context-menu&gt;assigned context menu&lt;/dfn&gt;, which can be null. If an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has a &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute, and there is
+  an element with the ID given by &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s
+  &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt;, and the first such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; is a
+  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state, then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned
+  context menu&lt;/a&gt; is that element. Otherwise, if &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has a parent element,
+  then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; is the &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; of its parent element. Otherwise, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; is null.&lt;/p&gt;
 
   &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
   pressing a context menu key), the user agent must apply the appropriate rules from the following
@@ -56489,19 +56496,25 @@
   of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
   &lt;p&gt;The default action of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event depends on
-  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) when the event dispatch has completed. If
-  there is no context menu assigned, the default action must be for the user agent to show its
-  default context menu, if it has one.&lt;/p&gt;
+  whether or not the element for which the menu was requested has a non-null &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; when the event dispatch has completed, as follows.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
-  user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that
-  is cancelable at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest ancestor
-  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
-  --&gt;
+  &lt;p&gt;If the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of the element for which the menu was requested is
+  null, the default action must be for the user agent to show its default context menu, if it has
+  one.&lt;/p&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct
-  and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
+  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu
+  event's dispatch has completed. The user agent must &lt;a href=#concept-event-fire title=concept-event-fire&gt;fire&lt;/a&gt; a
+  &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
+  interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
+  initialized to &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;. The event must be cancelable. &lt;!-- v2: include
+  modifier key information --&gt;&lt;/p&gt;
 
+  &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=event-show&gt;show&lt;/code&gt; event) is not canceled, then
+  the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
@@ -56512,14 +56525,43 @@
   &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event and instead always shows the default
   context menu.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
 
   &lt;/div&gt;
 
 
+  &lt;h5 id=event-definitions-0&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Event definitions&lt;/h5&gt;
 
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#relatedeventinit&gt;RelatedEventInit&lt;/a&gt; eventInitDict)]
+interface &lt;dfn id=relatedevent&gt;RelatedEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
+  readonly attribute &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt;? &lt;a href=#dom-relatedevent-relatedtarget title=dom-RelatedEvent-relatedTarget&gt;relatedTarget&lt;/a&gt;;
+};
 
+dictionary &lt;dfn id=relatedeventinit&gt;RelatedEventInit&lt;/dfn&gt; : &lt;a href=#eventinit&gt;EventInit&lt;/a&gt; {
+  &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt;? relatedTarget;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the other event target involved in this event. For example, when a &lt;code title=event-show&gt;show&lt;/code&gt; event fires on a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the other event
+    target involved in the event would be the element for which the menu is being shown.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-relatedevent-relatedtarget title=dom-RelatedEvent-relatedTarget&gt;&lt;code&gt;relatedTarget&lt;/code&gt;&lt;/dfn&gt; attribute must
+  return the value it was initialized to. When the object is created, this attribute must be
+  initialized to null. It represents the other event target that is related to the event.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
   &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/h4&gt;
 
   &lt;h5 id=facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/h5&gt;
@@ -67986,7 +68028,7 @@
   source&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=event-definitions-0&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/h5&gt;
+  &lt;h5 id=event-definitions-1&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/h5&gt;
 
   &lt;/div&gt;
 
@@ -79902,7 +79944,7 @@
 
 
 
-  &lt;h3 id=event-definitions-1&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
+  &lt;h3 id=event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
   &lt;p&gt;Messages in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, &lt;a href=#network&gt;Web sockets&lt;/a&gt;, &lt;a href=#web-messaging&gt;cross-document
   messaging&lt;/a&gt;, and &lt;a href=#channel-messaging&gt;channel messaging&lt;/a&gt; use the &lt;dfn id=event-message title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event. &lt;/p&gt;
@@ -81537,7 +81579,7 @@
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource
    name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=event-definitions-3&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
 
   &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict)]
 interface &lt;dfn id=closeevent&gt;CloseEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
@@ -100823,6 +100865,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#portcollection&gt;PortCollection&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#propertynodelist&gt;PropertyNodeList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#radionodelist&gt;RadioNodeList&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;Screen&lt;/code&gt;, &lt;a href=#Screen-partial&gt;partial&lt;/a&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;

Modified: index
===================================================================
--- index	2013-04-01 19:17:26 UTC (rev 7790)
+++ index	2013-04-03 20:23:31 UTC (rev 7791)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 1 April 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 3 April 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -774,7 +774,8 @@
      &lt;li&gt;&lt;a href=#context-menus&gt;&lt;span class=secno&gt;4.11.5 &lt;/span&gt;Context menus&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#declaring-a-context-menu&gt;&lt;span class=secno&gt;4.11.5.1 &lt;/span&gt;Declaring a context menu&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-definitions-0&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/a&gt;&lt;/li&gt;
@@ -914,7 +915,7 @@
      &lt;li&gt;&lt;a href=#scroll-to-fragid&gt;&lt;span class=secno&gt;6.6.9 &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#history-traversal&gt;&lt;span class=secno&gt;6.6.10 &lt;/span&gt;History traversal&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-definitions-0&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-definitions-1&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#unloading-documents&gt;&lt;span class=secno&gt;6.6.11 &lt;/span&gt;Unloading documents&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#event-definition&gt;&lt;span class=secno&gt;6.6.11.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
@@ -1067,7 +1068,7 @@
      &lt;li&gt;&lt;a href=#worker-locations&gt;&lt;span class=secno&gt;9.3.4 &lt;/span&gt;Worker locations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#event-definitions-1&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#server-sent-events&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;Server-sent events&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -1089,7 +1090,7 @@
      &lt;li&gt;&lt;a href=#feedback-from-the-protocol&gt;&lt;span class=secno&gt;10.3.3 &lt;/span&gt;Feedback from the protocol&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#ping-and-pong-frames&gt;&lt;span class=secno&gt;10.3.4 &lt;/span&gt;Ping and Pong frames&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#parsing-websocket-urls&gt;&lt;span class=secno&gt;10.3.5 &lt;/span&gt;Parsing WebSocket URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#event-definitions-3&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#garbage-collection-1&gt;&lt;span class=secno&gt;10.3.7 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#web-messaging&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
     &lt;ol&gt;
@@ -50162,8 +50163,10 @@
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;a href=#designated-pop-up-menu&gt;designated pop-up menu&lt;/a&gt;, if
      any. If there isn't one, then abort these steps.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that is
-     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;a href=#concept-event-fire title=concept-event-fire&gt;Fire&lt;/a&gt; a &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
+     interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
+     initialized to the &lt;code&gt;&lt;a href=#the-button-element&gt;button&lt;/a&gt;&lt;/code&gt; element. The event must be cancelable. &lt;!-- v2: include
+     modifier key information --&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and
      show&lt;/a&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/li&gt;
@@ -56462,10 +56465,14 @@
 
   &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;4.11.5.2 &lt;/span&gt;Processing model&lt;/h5&gt;
 
-  &lt;p&gt;If there is no element with the ID given by an element's &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in the element's &lt;a href=#home-subtree&gt;home
-  subtree&lt;/a&gt;, or if the first such element is not a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup
-  menu&lt;/a&gt; state, then the element has no assigned context menu. Otherwise, the element's
-  assigned context menu is the first such element.&lt;/p&gt;
+  &lt;p&gt;Each element has an &lt;dfn id=assigned-context-menu&gt;assigned context menu&lt;/dfn&gt;, which can be null. If an element &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has a &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute, and there is
+  an element with the ID given by &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute's value in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s
+  &lt;a href=#home-subtree&gt;home subtree&lt;/a&gt;, and the first such element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; is a
+  &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-menu-type&gt;&lt;a href=#attr-menu-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute is in the &lt;a href=#popup-menu-state title=&quot;popup menu state&quot;&gt;popup menu&lt;/a&gt; state, then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned
+  context menu&lt;/a&gt; is that element. Otherwise, if &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has a parent element,
+  then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; is the &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; of its parent element. Otherwise, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; is null.&lt;/p&gt;
 
   &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
   pressing a context menu key), the user agent must apply the appropriate rules from the following
@@ -56489,19 +56496,25 @@
   of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
   &lt;p&gt;The default action of the &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event depends on
-  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; attribute) when the event dispatch has completed. If
-  there is no context menu assigned, the default action must be for the user agent to show its
-  default context menu, if it has one.&lt;/p&gt;
+  whether or not the element for which the menu was requested has a non-null &lt;a href=#assigned-context-menu&gt;assigned context
+  menu&lt;/a&gt; when the event dispatch has completed, as follows.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
-  user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-show&gt;show&lt;/code&gt; that
-  is cancelable at the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element of the context menu of the nearest ancestor
-  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
-  --&gt;
+  &lt;p&gt;If the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of the element for which the menu was requested is
+  null, the default action must be for the user agent to show its default context menu, if it has
+  one.&lt;/p&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct
-  and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for the &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
+  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;a href=#assigned-context-menu&gt;assigned context menu&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu
+  event's dispatch has completed. The user agent must &lt;a href=#concept-event-fire title=concept-event-fire&gt;fire&lt;/a&gt; a
+  &lt;a href=#concept-events-trusted title=concept-events-trusted&gt;trusted&lt;/a&gt; event with the name &lt;code title=event-show&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
+  interface, with the &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt; attribute
+  initialized to &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;. The event must be cancelable. &lt;!-- v2: include
+  modifier key information --&gt;&lt;/p&gt;
 
+  &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=event-show&gt;show&lt;/code&gt; event) is not canceled, then
+  the user agent must &lt;a href=#construct-and-show-a-menu title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/a&gt; the menu for
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
@@ -56512,14 +56525,43 @@
   &lt;code title=event-contextmenu&gt;contextmenu&lt;/code&gt; event and instead always shows the default
   context menu.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-contextmenu title=dom-contextMenu&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
   &lt;a href=#reflect&gt;reflect&lt;/a&gt; the &lt;code title=attr-contextmenu&gt;&lt;a href=#attr-contextmenu&gt;contextmenu&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
 
   &lt;/div&gt;
 
 
+  &lt;h5 id=event-definitions-0&gt;&lt;span class=secno&gt;4.11.5.3 &lt;/span&gt;Event definitions&lt;/h5&gt;
 
+  &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#relatedeventinit&gt;RelatedEventInit&lt;/a&gt; eventInitDict)]
+interface &lt;dfn id=relatedevent&gt;RelatedEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
+  readonly attribute &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt;? &lt;a href=#dom-relatedevent-relatedtarget title=dom-RelatedEvent-relatedTarget&gt;relatedTarget&lt;/a&gt;;
+};
 
+dictionary &lt;dfn id=relatedeventinit&gt;RelatedEventInit&lt;/dfn&gt; : &lt;a href=#eventinit&gt;EventInit&lt;/a&gt; {
+  &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt;? relatedTarget;
+};&lt;/pre&gt;
+
+  &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=dom-RelatedEvent-relatedTarget&gt;&lt;a href=#dom-relatedevent-relatedtarget&gt;relatedTarget&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the other event target involved in this event. For example, when a &lt;code title=event-show&gt;show&lt;/code&gt; event fires on a &lt;code&gt;&lt;a href=#the-menu-element&gt;menu&lt;/a&gt;&lt;/code&gt; element, the other event
+    target involved in the event would be the element for which the menu is being shown.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;div class=impl&gt;
+
+  &lt;p&gt;The &lt;dfn id=dom-relatedevent-relatedtarget title=dom-RelatedEvent-relatedTarget&gt;&lt;code&gt;relatedTarget&lt;/code&gt;&lt;/dfn&gt; attribute must
+  return the value it was initialized to. When the object is created, this attribute must be
+  initialized to null. It represents the other event target that is related to the event.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
   &lt;h4 id=commands&gt;&lt;span class=secno&gt;4.11.6 &lt;/span&gt;Commands&lt;/h4&gt;
 
   &lt;h5 id=facets-0&gt;&lt;span class=secno&gt;4.11.6.1 &lt;/span&gt;Facets&lt;/h5&gt;
@@ -67986,7 +68028,7 @@
   source&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=event-definitions-0&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/h5&gt;
+  &lt;h5 id=event-definitions-1&gt;&lt;span class=secno&gt;6.6.10.1 &lt;/span&gt;Event definitions&lt;/h5&gt;
 
   &lt;/div&gt;
 
@@ -79902,7 +79944,7 @@
 
 
 
-  &lt;h3 id=event-definitions-1&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
+  &lt;h3 id=event-definitions-2&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
   &lt;p&gt;Messages in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, &lt;a href=#network&gt;Web sockets&lt;/a&gt;, &lt;a href=#web-messaging&gt;cross-document
   messaging&lt;/a&gt;, and &lt;a href=#channel-messaging&gt;channel messaging&lt;/a&gt; use the &lt;dfn id=event-message title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event. &lt;/p&gt;
@@ -81537,7 +81579,7 @@
    &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;resource
    name&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=event-definitions-2&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=event-definitions-3&gt;&lt;span class=secno&gt;10.3.6 &lt;/span&gt;Event definitions&lt;/h4&gt;
 
   &lt;pre class=idl&gt;[Constructor(DOMString type, optional &lt;a href=#closeeventinit&gt;CloseEventInit&lt;/a&gt; eventInitDict)]
 interface &lt;dfn id=closeevent&gt;CloseEvent&lt;/dfn&gt; : &lt;a href=#event&gt;Event&lt;/a&gt; {
@@ -100823,6 +100865,7 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#portcollection&gt;PortCollection&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#propertynodelist&gt;PropertyNodeList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#radionodelist&gt;RadioNodeList&lt;/a&gt;&lt;/code&gt;
+   &lt;li&gt;&lt;code&gt;&lt;a href=#relatedevent&gt;RelatedEvent&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;Screen&lt;/code&gt;, &lt;a href=#Screen-partial&gt;partial&lt;/a&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#sharedworker&gt;SharedWorker&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#sharedworkerglobalscope&gt;SharedWorkerGlobalScope&lt;/a&gt;&lt;/code&gt;

Modified: source
===================================================================
--- source	2013-04-01 19:17:26 UTC (rev 7790)
+++ source	2013-04-03 20:23:31 UTC (rev 7791)
@@ -59536,8 +59536,12 @@
      &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the element's &lt;span&gt;designated pop-up menu&lt;/span&gt;, if
      any. If there isn't one, then abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; named &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; that is
-     cancelable at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;. &lt;!-- v2: include modifier key information --&gt;&lt;/p&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;&lt;span title=&quot;concept-event-fire&quot;&gt;Fire&lt;/span&gt; a &lt;span
+     title=&quot;concept-events-trusted&quot;&gt;trusted&lt;/span&gt; event with the name &lt;code
+     title=&quot;event-show&quot;&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;RelatedEvent&lt;/code&gt;
+     interface, with the &lt;code title=&quot;dom-RelatedEvent-relatedTarget&quot;&gt;relatedTarget&lt;/code&gt; attribute
+     initialized to the &lt;code&gt;button&lt;/code&gt; element. The event must be cancelable. &lt;!-- v2: include
+     modifier key information --&gt;&lt;/p&gt;&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;If the event is not canceled, then &lt;span title=&quot;construct and show a menu&quot;&gt;construct and
      show&lt;/span&gt; the menu for &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -66976,12 +66980,17 @@
 
   &lt;h5&gt;Processing model&lt;/h5&gt;
 
-  &lt;p&gt;If there is no element with the ID given by an element's &lt;code
-  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute's value in the element's &lt;span&gt;home
-  subtree&lt;/span&gt;, or if the first such element is not a &lt;code&gt;menu&lt;/code&gt; element whose &lt;code
-  title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span title=&quot;popup menu state&quot;&gt;popup
-  menu&lt;/span&gt; state, then the element has no assigned context menu. Otherwise, the element's
-  assigned context menu is the first such element.&lt;/p&gt;
+  &lt;p&gt;Each element has an &lt;dfn&gt;assigned context menu&lt;/dfn&gt;, which can be null. If an element &lt;var
+  title=&quot;&quot;&gt;A&lt;/var&gt; has a &lt;code title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute, and there is
+  an element with the ID given by &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;code
+  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute's value in &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s
+  &lt;span&gt;home subtree&lt;/span&gt;, and the first such element in &lt;span&gt;tree order&lt;/span&gt; is a
+  &lt;code&gt;menu&lt;/code&gt; element whose &lt;code title=&quot;attr-menu-type&quot;&gt;type&lt;/code&gt; attribute is in the &lt;span
+  title=&quot;popup menu state&quot;&gt;popup menu&lt;/span&gt; state, then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;span&gt;assigned
+  context menu&lt;/span&gt; is that element. Otherwise, if &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; has a parent element,
+  then &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;span&gt;assigned context menu&lt;/span&gt; is the &lt;span&gt;assigned context
+  menu&lt;/span&gt; of its parent element. Otherwise, &lt;var title=&quot;&quot;&gt;A&lt;/var&gt;'s &lt;span&gt;assigned context
+  menu&lt;/span&gt; is null.&lt;/p&gt;
 
   &lt;p&gt;When an element's context menu is requested (e.g. by the user right-clicking the element, or
   pressing a context menu key), the user agent must apply the appropriate rules from the following
@@ -67013,20 +67022,27 @@
   of events is UA-dependent, as it will vary based on platform conventions.&lt;/p&gt;
 
   &lt;p&gt;The default action of the &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event depends on
-  whether or not the element or one of its ancestors has a context menu assigned (using the &lt;code
-  title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; attribute) when the event dispatch has completed. If
-  there is no context menu assigned, the default action must be for the user agent to show its
-  default context menu, if it has one.&lt;/p&gt;
+  whether or not the element for which the menu was requested has a non-null &lt;span&gt;assigned context
+  menu&lt;/span&gt; when the event dispatch has completed, as follows.&lt;/p&gt;
 
-  &lt;p&gt;If the element or one of its ancestors &lt;em&gt;does&lt;/em&gt; have a context menu assigned, then the
-  user agent must &lt;span&gt;fire a simple event&lt;/span&gt; named &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; that
-  is cancelable at the &lt;code&gt;menu&lt;/code&gt; element of the context menu of the nearest ancestor
-  (including the element itself) with one assigned.&lt;/p&gt; &lt;!-- v2: include modifier key information
-  --&gt;
+  &lt;p&gt;If the &lt;span&gt;assigned context menu&lt;/span&gt; of the element for which the menu was requested is
+  null, the default action must be for the user agent to show its default context menu, if it has
+  one.&lt;/p&gt;
 
-  &lt;p&gt;The default action of &lt;em&gt;this&lt;/em&gt; event is that the user agent must &lt;span title=&quot;construct
-  and show a menu&quot;&gt;construct and show&lt;/span&gt; the menu for the &lt;code&gt;menu&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt; be the element for which the menu was requested, and
+  let &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt; be the &lt;span&gt;assigned context menu&lt;/span&gt; of &lt;var
+  title=&quot;&quot;&gt;target&lt;/var&gt; immediately after the code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt;
+  event's dispatch has completed. The user agent must &lt;span title=&quot;concept-event-fire&quot;&gt;fire&lt;/span&gt; a
+  &lt;span title=&quot;concept-events-trusted&quot;&gt;trusted&lt;/span&gt; event with the name &lt;code
+  title=&quot;event-show&quot;&gt;show&lt;/code&gt; at &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;, using the &lt;code&gt;RelatedEvent&lt;/code&gt;
+  interface, with the &lt;code title=&quot;dom-RelatedEvent-relatedTarget&quot;&gt;relatedTarget&lt;/code&gt; attribute
+  initialized to &lt;var title=&quot;&quot;&gt;subject&lt;/var&gt;. The event must be cancelable. &lt;!-- v2: include
+  modifier key information --&gt;&lt;/p&gt;&lt;/li&gt;
 
+  &lt;p&gt;If &lt;em&gt;this&lt;/em&gt; event (the &lt;code title=&quot;event-show&quot;&gt;show&lt;/code&gt; event) is not canceled, then
+  the user agent must &lt;span title=&quot;construct and show a menu&quot;&gt;construct and show&lt;/span&gt; the menu for
+  &lt;var title=&quot;&quot;&gt;menu&lt;/var&gt;.&lt;/p&gt;
+
   &lt;p&gt;The user agent may also provide access to its default context menu, if any, with the context
   menu shown. For example, it could merge the menu items from the two menus together, or provide the
   page's context menu as a submenu of the default menu.&lt;/p&gt;
@@ -67037,14 +67053,50 @@
   &lt;code title=&quot;event-contextmenu&quot;&gt;contextmenu&lt;/code&gt; event and instead always shows the default
   context menu.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-contextMenu&quot;&gt;&lt;code&gt;contextMenu&lt;/code&gt;&lt;/dfn&gt; IDL attribute must
   &lt;span&gt;reflect&lt;/span&gt; the &lt;code title=&quot;attr-contextmenu&quot;&gt;contextmenu&lt;/code&gt; content attribute.&lt;/p&gt;
 
   &lt;/div&gt;
 
 
+  &lt;h5&gt;Event definitions&lt;/h5&gt;
 
+  &lt;pre class=&quot;idl&quot;&gt;[Constructor(DOMString type, optional &lt;span&gt;RelatedEventInit&lt;/span&gt; eventInitDict)]
+interface &lt;dfn&gt;RelatedEvent&lt;/dfn&gt; : &lt;span&gt;Event&lt;/span&gt; {
+  readonly attribute &lt;span&gt;EventTarget&lt;/span&gt;? &lt;span title=&quot;dom-RelatedEvent-relatedTarget&quot;&gt;relatedTarget&lt;/span&gt;;
+};
 
+dictionary &lt;dfn&gt;RelatedEventInit&lt;/dfn&gt; : &lt;span&gt;EventInit&lt;/span&gt; {
+  &lt;span&gt;EventTarget&lt;/span&gt;? relatedTarget;
+};&lt;/pre&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;event&lt;/var&gt; . &lt;code title=&quot;dom-RelatedEvent-relatedTarget&quot;&gt;relatedTarget&lt;/code&gt;&lt;/dt&gt;
+
+   &lt;dd&gt;
+
+    &lt;p&gt;Returns the other event target involved in this event. For example, when a &lt;code
+    title=&quot;event-show&quot;&gt;show&lt;/code&gt; event fires on a &lt;code&gt;menu&lt;/code&gt; element, the other event
+    target involved in the event would be the element for which the menu is being shown.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-RelatedEvent-relatedTarget&quot;&gt;&lt;code&gt;relatedTarget&lt;/code&gt;&lt;/dfn&gt; attribute must
+  return the value it was initialized to. When the object is created, this attribute must be
+  initialized to null. It represents the other event target that is related to the event.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+
   &lt;h4 id=&quot;commands&quot;&gt;Commands&lt;/h4&gt;
 
   &lt;h5&gt;Facets&lt;/h5&gt;


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014648.html">[html5] r7790 - [e] (0) Oops,	deleted some of the &lt;link&gt; element's details by mistake. Fixing ht	[...]
</A></li>
	<LI>Next message: <A HREF="014650.html">[html5] r7792 - [giow] (1) Set the .relatedTarget attribute on	'click' events for &lt;menuitem&gt; ele [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14649">[ date ]</a>
              <a href="thread.html#14649">[ thread ]</a>
              <a href="subject.html#14649">[ subject ]</a>
              <a href="author.html#14649">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
