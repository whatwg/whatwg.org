<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r8284 - [giow] (2) Move javascript: processing entirely	into HTML, and fix its definitio [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8284%20-%20%5Bgiow%5D%20%282%29%20Move%20javascript%3A%20processing%20entirely%0A%09into%20HTML%2C%20and%20fix%20its%20definitio%20%5B...%5D&In-Reply-To=%3C20131115155617.C68401536CF1D%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="015138.html">
   <LINK REL="Next"  HREF="015140.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r8284 - [giow] (2) Move javascript: processing entirely	into HTML, and fix its definitio [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r8284%20-%20%5Bgiow%5D%20%282%29%20Move%20javascript%3A%20processing%20entirely%0A%09into%20HTML%2C%20and%20fix%20its%20definitio%20%5B...%5D&In-Reply-To=%3C20131115155617.C68401536CF1D%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r8284 - [giow] (2) Move javascript: processing entirely	into HTML, and fix its definitio [...]">whatwg at whatwg.org
       </A><BR>
    <I>Fri Nov 15 07:56:17 PST 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="015138.html">[html5] r8283 - [cgiow] (3) Change how dir='' works,	from being an embedding to being an overrid [...]
</A></li>
        <LI>Next message: <A HREF="015140.html">[html5] r8285 - [giow] (2) Define the task settings for the	javascript: task Fixing https://www. [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15139">[ date ]</a>
              <a href="thread.html#15139">[ thread ]</a>
              <a href="subject.html#15139">[ subject ]</a>
              <a href="author.html#15139">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-11-15 07:56:16 -0800 (Fri, 15 Nov 2013)
New Revision: 8284

Modified:
   complete.html
   index
   source
Log:
[giow] (2) Move javascript: processing entirely into HTML, and fix its definitions to match reality better at the same time.
Fixing <A HREF="https://www.w3.org/Bugs/Public/show_bug.cgi?id=13720">https://www.w3.org/Bugs/Public/show_bug.cgi?id=13720</A>
Affected topics: DOM APIs, HTML, Security, Workers

Modified: complete.html
===================================================================
--- complete.html	2013-11-14 22:19:58 UTC (rev 8283)
+++ complete.html	2013-11-15 15:56:16 UTC (rev 8284)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 14 November 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 15 November 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -1022,15 +1022,14 @@
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;7.1.4.3 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;Events&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;7.1.6.1 &lt;/span&gt;Event handlers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.6.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;Document&lt;/code&gt; objects, and &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;7.1.5.1 &lt;/span&gt;Event handlers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.5.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;Document&lt;/code&gt; objects, and &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#idl-definitions&gt;&lt;span class=secno&gt;7.1.6.2.1 &lt;/span&gt;IDL definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.6.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#idl-definitions&gt;&lt;span class=secno&gt;7.1.5.2.1 &lt;/span&gt;IDL definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;7.1.5.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.5.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#atob&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;Base64 utility methods&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#dynamic-markup-insertion&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Dynamic markup insertion&lt;/a&gt;
     &lt;ol&gt;
@@ -3540,7 +3539,7 @@
      &lt;li&gt;The &lt;dfn id=url-parser&gt;URL parser&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=parsed-url&gt;Parsed URL&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
-     &lt;li&gt;The &lt;dfn id=concept-url-scheme-data title=&quot;concept-url-scheme data&quot;&gt;scheme data&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
+     &lt;li&gt;The &lt;dfn id=concept-url-scheme-data title=concept-url-scheme-data&gt;scheme data&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-username title=concept-url-username&gt;username&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-password title=concept-url-password&gt;password&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-host title=concept-url-host&gt;host&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
@@ -6897,8 +6896,7 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;referrer&lt;/var&gt; is not the empty string, is not a &lt;a href=#data-protocol title=&quot;data
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;, is not a &lt;a href=#javascript-protocol title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and is not the &lt;a href=#url&gt;URL&lt;/a&gt;
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;, and is not the &lt;a href=#url&gt;URL&lt;/a&gt;
     &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, then generate the &lt;i&gt;address of the resource from which Request-URIs
     are obtained&lt;/i&gt; as required by HTTP for the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic)
     header from &lt;var title=&quot;&quot;&gt;referrer&lt;/var&gt;. &lt;a href=#refsHTTP&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
@@ -6944,9 +6942,10 @@
     &lt;dfn id=about:blank&gt;&lt;code&gt;about:blank&lt;/code&gt;&lt;/dfn&gt;, then the resource is immediately available and consists of
     the empty string, with no metadata.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, at a time convenient to the user and the user agent, download (or otherwise
     obtain) the resource, applying the semantics of the relevant specifications (e.g. performing an
-    HTTP GET or POST operation, or reading the file from disk, &lt;a href=#concept-js-deref title=concept-js-deref&gt;dereferencing &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs&lt;/span&gt;&lt;/a&gt;, etc).&lt;/p&gt;
+    HTTP GET or POST operation, or reading the file from disk, or expanding &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, etc).&lt;/p&gt;
 
     &lt;p&gt;For the purposes of the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic) header, use the
     &lt;i&gt;address of the resource from which Request-URIs are obtained&lt;/i&gt; generated in the earlier
@@ -7202,7 +7201,6 @@
 
   &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; has the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -7228,7 +7226,7 @@
         &lt;p&gt;Set &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; to the target URL of the redirect and return to the top of
         the &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt; algorithm (this time, one of the other
         branches below might be taken, based on the value of &lt;var title=&quot;&quot;&gt;mode&lt;/var&gt;&lt;!-- but if
-        it's a data: or javascript: URL, we'll stay here --&gt;).&lt;/p&gt;
+        it's a data: URL, we'll stay here --&gt;).&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -51601,12 +51599,6 @@
       &lt;p&gt;The resource obtained in this fashion can be either &lt;a href=#cors-same-origin&gt;CORS-same-origin&lt;/a&gt; or
       &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;. This only affects how error reporting happens.&lt;/p&gt;
 
-      &lt;p&gt;For historical reasons, if the &lt;a href=#url&gt;URL&lt;/a&gt; is a &lt;a href=#javascript-protocol title=&quot;javascript
-      protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, then the user agent must not, despite
-      the requirements in the definition of the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm,
-      actually execute the script in the URL; instead the user agent must act as if it had received
-      an empty HTTP 400 response.&lt;/p&gt;
-
       &lt;p&gt;For performance reasons, user agents may start fetching the script (as defined above) as
       soon as the &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is set, instead, in the hope
       that the element will be inserted into the document (and that the &lt;code title=attr-script-crossorigin&gt;&lt;a href=#attr-script-crossorigin&gt;crossorigin&lt;/a&gt;&lt;/code&gt; attribute won't change value in the
@@ -64958,21 +64950,6 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was generated from a &lt;a href=#javascript-protocol title=&quot;javascript
-     protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; is an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the
-      &lt;a href=#origin&gt;origin&lt;/a&gt; of the script of that &lt;a href=#javascript-protocol title=&quot;javascript
-      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;.&lt;/p&gt;
-
-      &lt;p&gt;The &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is initially an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-
      &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was served over the network and has an address that uses a URL
      scheme with a server-based naming authority&lt;/dt&gt;
 
@@ -65002,8 +64979,7 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
-     &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the initial &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot; document&lt;/dt&gt;
 
      &lt;dd&gt;
 
@@ -65014,6 +64990,20 @@
      &lt;/dd&gt;
 
 
+     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created as part of the processing for &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; is an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the
+      &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+      being navigated when the &lt;a href=#navigate&gt;navigate&lt;/a&gt; algorithm was invoked.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is initially an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; of that
+      same &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
      &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#an-iframe-srcdoc-document&gt;an &lt;code&gt;iframe&lt;/code&gt; &lt;code title=attr-iframe-srcdoc&gt;srcdoc&lt;/code&gt; document&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
@@ -66591,50 +66581,164 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the resource has already been obtained (e.g. because it is being used to populate an
-    &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's new &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;), then skip this step.&lt;/p&gt;
+    &lt;p&gt;This is the step that attempts to obtain the resource, if necessary. Jump to the first
+    appropriate substep:&lt;/p&gt;
 
-    &lt;p&gt;Otherwise:&lt;/p&gt;
+    &lt;dl&gt;&lt;dt&gt;If the resource has already been obtained (e.g. because it is being used to populate an
+     &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's new &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;)&lt;/dt&gt;
 
-    &lt;p&gt;If the new resource is to be fetched using HTTP GET &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt;, and there are &lt;a href=#relevant-application-cache title=&quot;relevant
-    application cache&quot;&gt;relevant application caches&lt;/a&gt; that are identified by a URL with the
-    &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the URL in question, and that have this URL as one of their entries,
-    excluding entries marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;, and whose
-    &lt;a href=#concept-appcache-mode title=concept-appcache-mode&gt;mode&lt;/a&gt; is &lt;a href=#concept-appcache-mode-fast title=concept-appcache-mode-fast&gt;fast&lt;/a&gt;, and the user agent is not in a mode where it
-    will avoid using &lt;a href=#application-cache title=&quot;application cache&quot;&gt;application caches&lt;/a&gt; then
-    &lt;a href=#fetch&gt;fetch&lt;/a&gt; the resource from the &lt;a href=#concept-appcache-selection title=concept-appcache-selection&gt;most
-    appropriate application cache&lt;/a&gt; of those that match.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;Skip this step. The data is already available.&lt;/dd&gt;
 
-    &lt;p class=example&gt;For example, imagine an HTML page with an associated application cache
-    displaying an image and a form, where the image is also used by several other application
-    caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
-    could decide to show the image from any of those caches, but it is likely that the most useful
-    cache for the user would be the one that was used for the aforementioned HTML page. On the other
-    hand, if the user submits the form, and the form does a POST submission, then the user agent
-    will not use an application cache at all; the submission will be made to the network.&lt;/p&gt;
+     &lt;dt&gt;If the new resource is a &lt;a href=#url&gt;URL&lt;/a&gt; whose &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; is &lt;code title=&quot;javascript
+     protocol&quot;&gt;&lt;a href=#javascript-protocol&gt;javascript&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect
-    flag&lt;/i&gt; set.&lt;/p&gt;
+     &lt;dd&gt;
 
+      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
+
+      &lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to run &lt;dfn id=javascript-protocol title=&quot;javascript protocol&quot;&gt;these &quot;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&quot; steps&lt;/dfn&gt;:&lt;/p&gt;
+
+      &lt;ol id=concept-js-deref&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; is not the
+       &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of
+       the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated, then act as if the result of evaluating
+       the script was the void value, and jump to the step labeled &lt;i&gt;process results&lt;/i&gt;
+       below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#url-parser&gt;URL parser&lt;/a&gt; to the &lt;a href=#url&gt;URL&lt;/a&gt; being navigated.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt; be the result of the &lt;a href=#url-parser&gt;URL
+       parser&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; be the empty string.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-scheme-data title=concept-url-scheme-data&gt;scheme
+       data&lt;/a&gt; component to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt;
+       component is not null, then first append a U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;, and then append &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; component to &lt;var title=&quot;&quot;&gt;script
+       source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt; component is not null, then first append a
+       U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;, and then append
+       &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt;
+       component to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the
+       &lt;a href=#percent-decode&gt;percent decode&lt;/a&gt; algorithm to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the &lt;a href=#utf-8-decode&gt;UTF-8
+       decode&lt;/a&gt; algorithm to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;!-- &lt;body onload=&quot;&amp;#xFFFE;w('test')&quot;&gt; and javascript:%EF%BB%BF'test' both work, so we assume
+            that JavaScript is stripping the BOM, and we don't have to --&gt;
+
+       &lt;!--
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639</A> -&gt; about:blank
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640</A> -&gt; javascript:'test' in Firefox, about:blank otherwise
+       --&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+       address&quot;&gt;address&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
+       context&lt;/a&gt; being navigated.&lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; as the script
+        source, &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the script source URL, JavaScript as the scripting
+        language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of
+        the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated.&lt;/p&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
+        of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;i&gt;Process results&lt;/i&gt;: If the result of executing the script is void (there is no return
+        value), then the result of obtaining the resource for the URL is &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;equivalent to&lt;/a&gt; an HTTP resource with an HTTP
+        204 No Content response.&lt;/p&gt;
+
+        &lt;p&gt;Otherwise, the result of obtaining the resource for the URL is &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;equivalent&lt;/a&gt; to an HTTP resource with a 200 OK
+        response whose &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is
+        &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt; and whose response body is the return value converted to a string
+        value.&lt;/p&gt;
+
+        &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
+        &lt;a href=#override-url&gt;override URL&lt;/a&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+      &lt;/ol&gt;&lt;div class=example&gt;
+
+       &lt;p&gt;So for example a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt;
+       URL&lt;/a&gt; in an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute of an
+       &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was &lt;a href=#following-hyperlinks title=&quot;following
+       hyperlinks&quot;&gt;followed&lt;/a&gt;, while such a URL in the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element would be
+       evaluated in the context of the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=#nested-browsing-context&gt;nested browsing
+       context&lt;/a&gt; when the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; is being set up; once evaluated, its return value
+       (if it was not void) would replace that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s document, thus also
+       changing the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+
+      &lt;/div&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If the new resource is to be fetched using HTTP GET &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt;, and there are &lt;a href=#relevant-application-cache title=&quot;relevant
+     application cache&quot;&gt;relevant application caches&lt;/a&gt; that are identified by a URL with the
+     &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the URL in question, and that have this URL as one of their
+     entries, excluding entries marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;,
+     and whose &lt;a href=#concept-appcache-mode title=concept-appcache-mode&gt;mode&lt;/a&gt; is &lt;a href=#concept-appcache-mode-fast title=concept-appcache-mode-fast&gt;fast&lt;/a&gt;, and the user agent is not in a mode where it
+     will avoid using &lt;a href=#application-cache title=&quot;application cache&quot;&gt;application caches&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt; the resource from the &lt;a href=#concept-appcache-selection title=concept-appcache-selection&gt;most
+      appropriate application cache&lt;/a&gt; of those that match.&lt;/p&gt;
+
+      &lt;p class=example&gt;For example, imagine an HTML page with an associated application cache
+      displaying an image and a form, where the image is also used by several other application
+      caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
+      could decide to show the image from any of those caches, but it is likely that the most useful
+      cache for the user would be the one that was used for the aforementioned HTML page. On the
+      other hand, if the user submits the form, and the form does a POST submission, then the user
+      agent will not use an application cache at all; the submission will be made to the
+      network.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect flag&lt;/i&gt;
+      set.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is a &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt;, then in the
+    time between this step and either the creation of a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object or the &lt;!-- XXX
+    bug 23633 --&gt; &lt;span&gt;canceling&lt;/span&gt; of the &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;
+    algorithm&lt;!-- /XXX bug 23633 --&gt;, whichever happens first, the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+    must be put in the &lt;a href=#delaying-load-events-mode&gt;delaying &lt;code title=event-load&gt;load&lt;/code&gt; events mode&lt;/a&gt;.&lt;/p&gt;
+    &lt;!-- this is what makes &lt;iframe&gt; elements delay the load event of their parent browsing context
+    when their child browsing context is in between this step and the step that starts the parser.
+    --&gt;
+
+    &lt;p&gt;If the steps above invoked the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorith, the following requirements also
+    apply:&lt;/p&gt;
+
     &lt;p&gt;If the resource is being fetched using a method other than one &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;equivalent to&lt;/a&gt; HTTP's GET&lt;!-- or HEAD (but that can't
     happen) --&gt;, or, if the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt; was invoked as a
-    result of the &lt;a href=#concept-form-submit title=concept-form-submit&gt;form submission algorithm&lt;/a&gt;, then the &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-    &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;, if any.&lt;/p&gt; &lt;!--
+    result of the &lt;a href=#concept-form-submit title=concept-form-submit&gt;form submission algorithm&lt;/a&gt;, then the
+    &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;, if any.&lt;/p&gt; &lt;!--
     potentially http-origin privacy sensitive --&gt;
 
-    &lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated is a &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;
-    for an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element, then the &lt;a href=#fetch title=fetch&gt;fetching
-    algorithm&lt;/a&gt; must be invoked from the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's
-    &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt;, if it has one.&lt;/p&gt; &lt;!-- potentially http-origin
-    privacy sensitive --&gt;
+    &lt;p&gt;Otherwise, if the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated is a &lt;a href=#child-browsing-context&gt;child browsing
+    context&lt;/a&gt; for an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element, then the &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or
+    &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt;, if it has one.&lt;/p&gt;
+    &lt;!-- potentially http-origin privacy sensitive --&gt;    
 
-    &lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is a &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt;, then in the
-    time between the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorithm being started by this step, and either the
-    creation of a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object or the canceling of the &lt;a href=#fetch&gt;fetch&lt;/a&gt; or &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithms, the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; must be put in
-    the &lt;a href=#delaying-load-events-mode&gt;delaying &lt;code title=event-load&gt;load&lt;/code&gt; events mode&lt;/a&gt;.&lt;/p&gt; &lt;!-- this is
-    what makes &lt;iframe&gt; elements delay the load event of their parent browsing context when their
-    child browsing context is in between this step and the step that starts the parser. --&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -66839,8 +66943,8 @@
     its &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; set to that &lt;a href=#url&gt;URL&lt;/a&gt;
     instead.&lt;/p&gt;
 
-    &lt;p class=note&gt;An &lt;a href=#override-url title=&quot;override URL&quot;&gt;override URL&lt;/a&gt; is set when &lt;a href=#concept-js-deref title=concept-js-deref&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt; and when performing
-    &lt;a href=#an-overridden-reload&gt;an overridden reload&lt;/a&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;An &lt;a href=#override-url title=&quot;override URL&quot;&gt;override URL&lt;/a&gt; is set when &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt; and when
+    performing &lt;a href=#an-overridden-reload&gt;an overridden reload&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;dfn id=create-a-document-object title=&quot;create a Document object&quot;&gt;Creating a new &lt;code&gt;Document&lt;/code&gt; object&lt;/dfn&gt;: when
     a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created as part of the above steps, the user agent must additionally
@@ -69890,8 +69994,7 @@
 
   &lt;ul&gt;&lt;li&gt;Processing of &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
 
-   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a href=#javascript-protocol&gt;javascript:&lt;/a&gt;&lt;/code&gt; URLs (e.g. the
-   &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt; rule in a CSS &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt; element block).&lt;/li&gt;
+   &lt;li&gt;Navigating to &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;a href=#event-handler-content-attributes&gt;event handler content attributes&lt;/a&gt;, by
    &lt;a href=#event-handler-idl-attributes&gt;event handler IDL attributes&lt;/a&gt;, or otherwise.&lt;/li&gt;
@@ -70823,106 +70926,12 @@
   &lt;/dl&gt;&lt;/div&gt;
 
 
-  &lt;div class=impl&gt;
 
-  &lt;!-- SCRIPT EXEC --&gt;
-  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;When a &lt;a href=#url&gt;URL&lt;/a&gt; using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; scheme is &lt;dfn id=concept-js-deref title=concept-js-deref&gt;dereferenced&lt;/dfn&gt;, the user agent must run the following steps:&lt;/p&gt;
+  &lt;h4 id=events&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;Events&lt;/h4&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the script source be the string obtained using the content retrieval operation defined
-   for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs. &lt;a href=#refsJSURL&gt;[JSURL]&lt;/a&gt;&lt;/li&gt;
+  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;7.1.5.1 &lt;/span&gt;Event handlers&lt;/h5&gt;
 
-   &lt;li&gt;
-
-    &lt;p&gt;Use the appropriate step from the following list:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;If a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is being &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; for that navigation,
-     if any, has &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting disabled&lt;/a&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;If a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is being &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;a href=#active-document&gt;active document&lt;/a&gt; of that browsing context has
-     the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the script given by that URL&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
-      of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated.&lt;/p&gt;
-
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; is &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;, and the &lt;a href=#browsing-context&gt;browsing
-      context&lt;/a&gt; being navigated has a &lt;a href=#creator-browsing-context&gt;creator browsing context&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
-      &lt;a href=#creator-document&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;
-
-      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using the aforementioned script source, the &lt;a href=#url&gt;URL&lt;/a&gt;
-      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
-      language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
-      &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
-      of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
-
-      &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
-      &lt;a href=#override-url&gt;override URL&lt;/a&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the result of executing the script is void (there is no return value), then the URL must
-    be treated in a manner equivalent to an HTTP resource with an HTTP 204 No Content response.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, the URL must be treated in a manner equivalent to an HTTP resource with a 200 OK
-    response whose &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt;
-    and whose response body is the return value converted to a string value.&lt;/p&gt;
-
-    &lt;p class=note&gt;Certain contexts, in particular &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;div class=example&gt;
-
-   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL for a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element would be evaluated in
-   the context of an empty object as soon as the attribute is set; it would then be sniffed to
-   determine the image type and decoded as an image.&lt;/p&gt;
-
-   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL in an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt;
-   attribute of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was &lt;a href=#following-hyperlinks title=&quot;following hyperlinks&quot;&gt;followed&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;p&gt;The &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element would
-   be evaluated in the context of the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;; once
-   evaluated, its return value (if it was not void) would replace that &lt;a href=#browsing-context&gt;browsing
-   context&lt;/a&gt;'s document, thus changing the variables visible in that &lt;a href=#browsing-context&gt;browsing
-   context&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h4 id=events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/h4&gt;
-
-  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;7.1.6.1 &lt;/span&gt;Event handlers&lt;/h5&gt;
-
   &lt;!--test: &lt;a href=&quot;<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null</A>))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E&quot;&gt;test&lt;/a&gt;--&gt;
 
   &lt;p&gt;Many objects can have &lt;dfn id=event-handlers&gt;event handlers&lt;/dfn&gt; specified. These act as non-capture event
@@ -71304,7 +71313,7 @@
   &lt;!-- onreadystatechange is also defined specially, using [LenientThis]; see IDL --&gt;
 
 
-  &lt;h5 id=event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.6.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects, and &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
+  &lt;h5 id=event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.5.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects, and &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
 
   &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their corresponding &lt;a href=#event-handler-event-type title=&quot;event
   handler event type&quot;&gt;event handler event types&lt;/a&gt;) &lt;span class=impl&gt;that must be&lt;/span&gt;
@@ -71428,7 +71437,7 @@
 
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onreadystatechange title=handler-onreadystatechange&gt;&lt;code&gt;onreadystatechange&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-readystatechange&gt;&lt;a href=#event-readystatechange&gt;readystatechange&lt;/a&gt;&lt;/code&gt;
-  &lt;/table&gt;&lt;h6 id=idl-definitions&gt;&lt;span class=secno&gt;7.1.6.2.1 &lt;/span&gt;IDL definitions&lt;/h6&gt;
+  &lt;/table&gt;&lt;h6 id=idl-definitions&gt;&lt;span class=secno&gt;7.1.5.2.1 &lt;/span&gt;IDL definitions&lt;/h6&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=globaleventhandlers&gt;GlobalEventHandlers&lt;/dfn&gt; {
@@ -71515,7 +71524,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
+  &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.5.3 &lt;/span&gt;Event firing&lt;/h5&gt;
 
   &lt;p&gt;Certain operations and methods are defined as firing events on elements. For example, the &lt;code title=dom-click&gt;&lt;a href=#dom-click&gt;click()&lt;/a&gt;&lt;/code&gt; method on the &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; interface is defined as
   firing a &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event on the element. &lt;a href=#refsDOMEVENTS&gt;[DOMEVENTS]&lt;/a&gt;&lt;/p&gt;
@@ -71546,7 +71555,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.6.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
+  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.5.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
 
   &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;, if the event is not a &lt;code title=event-load&gt;load&lt;/code&gt; event, the user agent
@@ -78278,8 +78287,7 @@
 
   &lt;p&gt;HTTP 200 OK responses that have a &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; specifying an unsupported type, or
   that have no &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; at all, must cause the user agent to &lt;a href=#fail-the-connection&gt;fail the
-  connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type; javascript: as having
-  the type text/html --&gt;
+  connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type --&gt;
 
   &lt;p&gt;HTTP 305 Use Proxy, 401 Unauthorized, and 407 Proxy Authentication Required should be treated
   transparently as for any other subresource.&lt;/p&gt;
@@ -82509,9 +82517,10 @@
     &lt;a href=#origin&gt;origin&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=note&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;.
-    For example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82624,9 +82633,10 @@
     the &lt;a href=#incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these
     steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=note&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;.
-    For example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -101102,11 +101112,6 @@
    &lt;dt id=refsJSON&gt;[JSON]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</A>&gt;The application/json Media Type for JavaScript Object Notation (JSON)&lt;/a&gt;&lt;/cite&gt;, D. Crockford. IETF.&lt;/dd&gt;
 
-   &lt;dt id=refsJSURL&gt;[JSURL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme">http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme</A>&gt;The 'javascript' resource identifier scheme&lt;/a&gt;&lt;/cite&gt;, B. H&ouml;hrmann. IETF.
-   &lt;!-- Sadly this reference has been dead for a while. Unfortunately it's the closest thing we current have to a spec. --&gt;
-   &lt;/dd&gt;
-
    &lt;dt id=refsMAILTO&gt;[MAILTO]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc6068">http://tools.ietf.org/html/rfc6068</A>&gt;The 'mailto' URI scheme&lt;/a&gt;&lt;/cite&gt;, M. Duerst, L. Masinter, J. Zawinski. IETF.&lt;/dd&gt;
 

Modified: index
===================================================================
--- index	2013-11-14 22:19:58 UTC (rev 8283)
+++ index	2013-11-15 15:56:16 UTC (rev 8284)
@@ -298,7 +298,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> class=logo&gt;&lt;img width=101 src=/images/logo alt=WHATWG height=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 14 November 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 15 November 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -1022,15 +1022,14 @@
        &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;7.1.4.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#processing-model-4&gt;&lt;span class=secno&gt;7.1.4.2 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;7.1.4.3 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;Events&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;7.1.6.1 &lt;/span&gt;Event handlers&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.6.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;Document&lt;/code&gt; objects, and &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;7.1.5.1 &lt;/span&gt;Event handlers&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.5.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;Document&lt;/code&gt; objects, and &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#idl-definitions&gt;&lt;span class=secno&gt;7.1.6.2.1 &lt;/span&gt;IDL definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.6.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#idl-definitions&gt;&lt;span class=secno&gt;7.1.5.2.1 &lt;/span&gt;IDL definitions&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;7.1.5.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.5.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#atob&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;Base64 utility methods&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#dynamic-markup-insertion&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Dynamic markup insertion&lt;/a&gt;
     &lt;ol&gt;
@@ -3540,7 +3539,7 @@
      &lt;li&gt;The &lt;dfn id=url-parser&gt;URL parser&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=parsed-url&gt;Parsed URL&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
-     &lt;li&gt;The &lt;dfn id=concept-url-scheme-data title=&quot;concept-url-scheme data&quot;&gt;scheme data&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
+     &lt;li&gt;The &lt;dfn id=concept-url-scheme-data title=concept-url-scheme-data&gt;scheme data&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-username title=concept-url-username&gt;username&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-password title=concept-url-password&gt;password&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
      &lt;li&gt;The &lt;dfn id=concept-url-host title=concept-url-host&gt;host&lt;/dfn&gt; component of a &lt;a href=#parsed-url&gt;parsed URL&lt;/a&gt;
@@ -6897,8 +6896,7 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;referrer&lt;/var&gt; is not the empty string, is not a &lt;a href=#data-protocol title=&quot;data
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;, is not a &lt;a href=#javascript-protocol title=&quot;javascript
-    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and is not the &lt;a href=#url&gt;URL&lt;/a&gt;
+    protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;, and is not the &lt;a href=#url&gt;URL&lt;/a&gt;
     &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;, then generate the &lt;i&gt;address of the resource from which Request-URIs
     are obtained&lt;/i&gt; as required by HTTP for the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic)
     header from &lt;var title=&quot;&quot;&gt;referrer&lt;/var&gt;. &lt;a href=#refsHTTP&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
@@ -6944,9 +6942,10 @@
     &lt;dfn id=about:blank&gt;&lt;code&gt;about:blank&lt;/code&gt;&lt;/dfn&gt;, then the resource is immediately available and consists of
     the empty string, with no metadata.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, at a time convenient to the user and the user agent, download (or otherwise
     obtain) the resource, applying the semantics of the relevant specifications (e.g. performing an
-    HTTP GET or POST operation, or reading the file from disk, &lt;a href=#concept-js-deref title=concept-js-deref&gt;dereferencing &lt;span title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs&lt;/span&gt;&lt;/a&gt;, etc).&lt;/p&gt;
+    HTTP GET or POST operation, or reading the file from disk, or expanding &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;, etc).&lt;/p&gt;
 
     &lt;p&gt;For the purposes of the &lt;code title=http-referer&gt;Referer&lt;/code&gt; (sic) header, use the
     &lt;i&gt;address of the resource from which Request-URIs are obtained&lt;/i&gt; generated in the earlier
@@ -7202,7 +7201,6 @@
 
   &lt;dl class=switch&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; has the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
-   &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; is &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -7228,7 +7226,7 @@
         &lt;p&gt;Set &lt;var title=&quot;&quot;&gt;URL&lt;/var&gt; to the target URL of the redirect and return to the top of
         the &lt;a href=#potentially-cors-enabled-fetch&gt;potentially CORS-enabled fetch&lt;/a&gt; algorithm (this time, one of the other
         branches below might be taken, based on the value of &lt;var title=&quot;&quot;&gt;mode&lt;/var&gt;&lt;!-- but if
-        it's a data: or javascript: URL, we'll stay here --&gt;).&lt;/p&gt;
+        it's a data: URL, we'll stay here --&gt;).&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -51601,12 +51599,6 @@
       &lt;p&gt;The resource obtained in this fashion can be either &lt;a href=#cors-same-origin&gt;CORS-same-origin&lt;/a&gt; or
       &lt;a href=#cors-cross-origin&gt;CORS-cross-origin&lt;/a&gt;. This only affects how error reporting happens.&lt;/p&gt;
 
-      &lt;p&gt;For historical reasons, if the &lt;a href=#url&gt;URL&lt;/a&gt; is a &lt;a href=#javascript-protocol title=&quot;javascript
-      protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, then the user agent must not, despite
-      the requirements in the definition of the &lt;a href=#fetch title=fetch&gt;fetching&lt;/a&gt; algorithm,
-      actually execute the script in the URL; instead the user agent must act as if it had received
-      an empty HTTP 400 response.&lt;/p&gt;
-
       &lt;p&gt;For performance reasons, user agents may start fetching the script (as defined above) as
       soon as the &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is set, instead, in the hope
       that the element will be inserted into the document (and that the &lt;code title=attr-script-crossorigin&gt;&lt;a href=#attr-script-crossorigin&gt;crossorigin&lt;/a&gt;&lt;/code&gt; attribute won't change value in the
@@ -64958,21 +64950,6 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was generated from a &lt;a href=#javascript-protocol title=&quot;javascript
-     protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; is an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the
-      &lt;a href=#origin&gt;origin&lt;/a&gt; of the script of that &lt;a href=#javascript-protocol title=&quot;javascript
-      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;.&lt;/p&gt;
-
-      &lt;p&gt;The &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is initially an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-      &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-
      &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was served over the network and has an address that uses a URL
      scheme with a server-based naming authority&lt;/dt&gt;
 
@@ -65002,8 +64979,7 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; has the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
-     &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is the initial &quot;&lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;&quot; document&lt;/dt&gt;
 
      &lt;dd&gt;
 
@@ -65014,6 +64990,20 @@
      &lt;/dd&gt;
 
 
+     &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; was created as part of the processing for &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;The &lt;a href=#origin&gt;origin&lt;/a&gt; is an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the
+      &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+      being navigated when the &lt;a href=#navigate&gt;navigate&lt;/a&gt; algorithm was invoked.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is initially an &lt;a href=#concept-origin-alias title=concept-origin-alias&gt;alias&lt;/a&gt; to the &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; of that
+      same &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
      &lt;dt&gt;If a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is &lt;a href=#an-iframe-srcdoc-document&gt;an &lt;code&gt;iframe&lt;/code&gt; &lt;code title=attr-iframe-srcdoc&gt;srcdoc&lt;/code&gt; document&lt;/a&gt;&lt;/dt&gt;
 
      &lt;dd&gt;
@@ -66591,50 +66581,164 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the resource has already been obtained (e.g. because it is being used to populate an
-    &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's new &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;), then skip this step.&lt;/p&gt;
+    &lt;p&gt;This is the step that attempts to obtain the resource, if necessary. Jump to the first
+    appropriate substep:&lt;/p&gt;
 
-    &lt;p&gt;Otherwise:&lt;/p&gt;
+    &lt;dl&gt;&lt;dt&gt;If the resource has already been obtained (e.g. because it is being used to populate an
+     &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's new &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;)&lt;/dt&gt;
 
-    &lt;p&gt;If the new resource is to be fetched using HTTP GET &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt;, and there are &lt;a href=#relevant-application-cache title=&quot;relevant
-    application cache&quot;&gt;relevant application caches&lt;/a&gt; that are identified by a URL with the
-    &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the URL in question, and that have this URL as one of their entries,
-    excluding entries marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;, and whose
-    &lt;a href=#concept-appcache-mode title=concept-appcache-mode&gt;mode&lt;/a&gt; is &lt;a href=#concept-appcache-mode-fast title=concept-appcache-mode-fast&gt;fast&lt;/a&gt;, and the user agent is not in a mode where it
-    will avoid using &lt;a href=#application-cache title=&quot;application cache&quot;&gt;application caches&lt;/a&gt; then
-    &lt;a href=#fetch&gt;fetch&lt;/a&gt; the resource from the &lt;a href=#concept-appcache-selection title=concept-appcache-selection&gt;most
-    appropriate application cache&lt;/a&gt; of those that match.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;Skip this step. The data is already available.&lt;/dd&gt;
 
-    &lt;p class=example&gt;For example, imagine an HTML page with an associated application cache
-    displaying an image and a form, where the image is also used by several other application
-    caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
-    could decide to show the image from any of those caches, but it is likely that the most useful
-    cache for the user would be the one that was used for the aforementioned HTML page. On the other
-    hand, if the user submits the form, and the form does a POST submission, then the user agent
-    will not use an application cache at all; the submission will be made to the network.&lt;/p&gt;
+     &lt;dt&gt;If the new resource is a &lt;a href=#url&gt;URL&lt;/a&gt; whose &lt;a href=#concept-url-scheme title=concept-url-scheme&gt;scheme&lt;/a&gt; is &lt;code title=&quot;javascript
+     protocol&quot;&gt;&lt;a href=#javascript-protocol&gt;javascript&lt;/a&gt;&lt;/code&gt;&lt;/dt&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=#fetch&gt;fetch&lt;/a&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect
-    flag&lt;/i&gt; set.&lt;/p&gt;
+     &lt;dd&gt;
 
+      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
+
+      &lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to run &lt;dfn id=javascript-protocol title=&quot;javascript protocol&quot;&gt;these &quot;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&quot; steps&lt;/dfn&gt;:&lt;/p&gt;
+
+      &lt;ol id=concept-js-deref&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; is not the
+       &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the &lt;a href=#origin&gt;origin&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of
+       the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated, then act as if the result of evaluating
+       the script was the void value, and jump to the step labeled &lt;i&gt;process results&lt;/i&gt;
+       below.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Apply the &lt;a href=#url-parser&gt;URL parser&lt;/a&gt; to the &lt;a href=#url&gt;URL&lt;/a&gt; being navigated.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt; be the result of the &lt;a href=#url-parser&gt;URL
+       parser&lt;/a&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; be the empty string.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-scheme-data title=concept-url-scheme-data&gt;scheme
+       data&lt;/a&gt; component to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt;
+       component is not null, then first append a U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;, and then append &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-query title=concept-url-query&gt;query&lt;/a&gt; component to &lt;var title=&quot;&quot;&gt;script
+       source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt; component is not null, then first append a
+       U+003F QUESTION MARK character (?) to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;, and then append
+       &lt;var title=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;a href=#concept-url-fragment title=concept-url-fragment&gt;fragment&lt;/a&gt;
+       component to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the
+       &lt;a href=#percent-decode&gt;percent decode&lt;/a&gt; algorithm to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the &lt;a href=#utf-8-decode&gt;UTF-8
+       decode&lt;/a&gt; algorithm to &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/li&gt;
+
+       &lt;!-- &lt;body onload=&quot;&amp;#xFFFE;w('test')&quot;&gt; and javascript:%EF%BB%BF'test' both work, so we assume
+            that JavaScript is stripping the BOM, and we don't have to --&gt;
+
+       &lt;!--
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639</A> -&gt; about:blank
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640</A> -&gt; javascript:'test' in Firefox, about:blank otherwise
+       --&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+       address&quot;&gt;address&lt;/a&gt; of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
+       context&lt;/a&gt; being navigated.&lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using &lt;var title=&quot;&quot;&gt;script source&lt;/var&gt; as the script
+        source, &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the script source URL, JavaScript as the scripting
+        language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of
+        the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated.&lt;/p&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
+        of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;i&gt;Process results&lt;/i&gt;: If the result of executing the script is void (there is no return
+        value), then the result of obtaining the resource for the URL is &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;equivalent to&lt;/a&gt; an HTTP resource with an HTTP
+        204 No Content response.&lt;/p&gt;
+
+        &lt;p&gt;Otherwise, the result of obtaining the resource for the URL is &lt;a href=#concept-http-equivalent-codes title=concept-http-equivalent-codes&gt;equivalent&lt;/a&gt; to an HTTP resource with a 200 OK
+        response whose &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is
+        &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt; and whose response body is the return value converted to a string
+        value.&lt;/p&gt;
+
+        &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
+        &lt;a href=#override-url&gt;override URL&lt;/a&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+      &lt;/ol&gt;&lt;div class=example&gt;
+
+       &lt;p&gt;So for example a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt;
+       URL&lt;/a&gt; in an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute of an
+       &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was &lt;a href=#following-hyperlinks title=&quot;following
+       hyperlinks&quot;&gt;followed&lt;/a&gt;, while such a URL in the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element would be
+       evaluated in the context of the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=#nested-browsing-context&gt;nested browsing
+       context&lt;/a&gt; when the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; is being set up; once evaluated, its return value
+       (if it was not void) would replace that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s document, thus also
+       changing the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of that &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+
+      &lt;/div&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If the new resource is to be fetched using HTTP GET &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;or equivalent&lt;/a&gt;, and there are &lt;a href=#relevant-application-cache title=&quot;relevant
+     application cache&quot;&gt;relevant application caches&lt;/a&gt; that are identified by a URL with the
+     &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the URL in question, and that have this URL as one of their
+     entries, excluding entries marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;,
+     and whose &lt;a href=#concept-appcache-mode title=concept-appcache-mode&gt;mode&lt;/a&gt; is &lt;a href=#concept-appcache-mode-fast title=concept-appcache-mode-fast&gt;fast&lt;/a&gt;, and the user agent is not in a mode where it
+     will avoid using &lt;a href=#application-cache title=&quot;application cache&quot;&gt;application caches&lt;/a&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt; the resource from the &lt;a href=#concept-appcache-selection title=concept-appcache-selection&gt;most
+      appropriate application cache&lt;/a&gt; of those that match.&lt;/p&gt;
+
+      &lt;p class=example&gt;For example, imagine an HTML page with an associated application cache
+      displaying an image and a form, where the image is also used by several other application
+      caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
+      could decide to show the image from any of those caches, but it is likely that the most useful
+      cache for the user would be the one that was used for the aforementioned HTML page. On the
+      other hand, if the user submits the form, and the form does a POST submission, then the user
+      agent will not use an application cache at all; the submission will be made to the
+      network.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect flag&lt;/i&gt;
+      set.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is a &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt;, then in the
+    time between this step and either the creation of a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object or the &lt;!-- XXX
+    bug 23633 --&gt; &lt;span&gt;canceling&lt;/span&gt; of the &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt;
+    algorithm&lt;!-- /XXX bug 23633 --&gt;, whichever happens first, the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+    must be put in the &lt;a href=#delaying-load-events-mode&gt;delaying &lt;code title=event-load&gt;load&lt;/code&gt; events mode&lt;/a&gt;.&lt;/p&gt;
+    &lt;!-- this is what makes &lt;iframe&gt; elements delay the load event of their parent browsing context
+    when their child browsing context is in between this step and the step that starts the parser.
+    --&gt;
+
+    &lt;p&gt;If the steps above invoked the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorith, the following requirements also
+    apply:&lt;/p&gt;
+
     &lt;p&gt;If the resource is being fetched using a method other than one &lt;a href=#concept-http-equivalent-get title=concept-http-equivalent-get&gt;equivalent to&lt;/a&gt; HTTP's GET&lt;!-- or HEAD (but that can't
     happen) --&gt;, or, if the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt; was invoked as a
-    result of the &lt;a href=#concept-form-submit title=concept-form-submit&gt;form submission algorithm&lt;/a&gt;, then the &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;a href=#origin&gt;origin&lt;/a&gt; of the
-    &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;, if any.&lt;/p&gt; &lt;!--
+    result of the &lt;a href=#concept-form-submit title=concept-form-submit&gt;form submission algorithm&lt;/a&gt;, then the
+    &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;a href=#origin&gt;origin&lt;/a&gt; of
+    the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;, if any.&lt;/p&gt; &lt;!--
     potentially http-origin privacy sensitive --&gt;
 
-    &lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated is a &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;
-    for an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element, then the &lt;a href=#fetch title=fetch&gt;fetching
-    algorithm&lt;/a&gt; must be invoked from the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's
-    &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt;, if it has one.&lt;/p&gt; &lt;!-- potentially http-origin
-    privacy sensitive --&gt;
+    &lt;p&gt;Otherwise, if the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated is a &lt;a href=#child-browsing-context&gt;child browsing
+    context&lt;/a&gt; for an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element, then the &lt;a href=#fetch title=fetch&gt;fetching algorithm&lt;/a&gt; must be invoked from the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; or
+    &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element's &lt;a href=#browsing-context-scope-origin&gt;browsing context scope origin&lt;/a&gt;, if it has one.&lt;/p&gt;
+    &lt;!-- potentially http-origin privacy sensitive --&gt;    
 
-    &lt;p&gt;If the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is a &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt;, then in the
-    time between the &lt;a href=#fetch&gt;fetch&lt;/a&gt; algorithm being started by this step, and either the
-    creation of a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; object or the canceling of the &lt;a href=#fetch&gt;fetch&lt;/a&gt; or &lt;a href=#navigate title=navigate&gt;navigation&lt;/a&gt; algorithms, the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; must be put in
-    the &lt;a href=#delaying-load-events-mode&gt;delaying &lt;code title=event-load&gt;load&lt;/code&gt; events mode&lt;/a&gt;.&lt;/p&gt; &lt;!-- this is
-    what makes &lt;iframe&gt; elements delay the load event of their parent browsing context when their
-    child browsing context is in between this step and the step that starts the parser. --&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -66839,8 +66943,8 @@
     its &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; set to that &lt;a href=#url&gt;URL&lt;/a&gt;
     instead.&lt;/p&gt;
 
-    &lt;p class=note&gt;An &lt;a href=#override-url title=&quot;override URL&quot;&gt;override URL&lt;/a&gt; is set when &lt;a href=#concept-js-deref title=concept-js-deref&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt; and when performing
-    &lt;a href=#an-overridden-reload&gt;an overridden reload&lt;/a&gt;.&lt;/p&gt;
+    &lt;p class=note&gt;An &lt;a href=#override-url title=&quot;override URL&quot;&gt;override URL&lt;/a&gt; is set when &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt; and when
+    performing &lt;a href=#an-overridden-reload&gt;an overridden reload&lt;/a&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;dfn id=create-a-document-object title=&quot;create a Document object&quot;&gt;Creating a new &lt;code&gt;Document&lt;/code&gt; object&lt;/dfn&gt;: when
     a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; is created as part of the above steps, the user agent must additionally
@@ -69890,8 +69994,7 @@
 
   &lt;ul&gt;&lt;li&gt;Processing of &lt;code&gt;&lt;a href=#the-script-element&gt;script&lt;/a&gt;&lt;/code&gt; elements.&lt;/li&gt;
 
-   &lt;li&gt;Processing of inline &lt;code title=&quot;javascript protocol&quot;&gt;&lt;a href=#javascript-protocol&gt;javascript:&lt;/a&gt;&lt;/code&gt; URLs (e.g. the
-   &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements, or an &lt;code title=&quot;&quot;&gt;@import&lt;/code&gt; rule in a CSS &lt;code&gt;&lt;a href=#the-style-element&gt;style&lt;/a&gt;&lt;/code&gt; element block).&lt;/li&gt;
+   &lt;li&gt;Navigating to &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code title=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;a href=#event-handler-content-attributes&gt;event handler content attributes&lt;/a&gt;, by
    &lt;a href=#event-handler-idl-attributes&gt;event handler IDL attributes&lt;/a&gt;, or otherwise.&lt;/li&gt;
@@ -70823,106 +70926,12 @@
   &lt;/dl&gt;&lt;/div&gt;
 
 
-  &lt;div class=impl&gt;
 
-  &lt;!-- SCRIPT EXEC --&gt;
-  &lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;When a &lt;a href=#url&gt;URL&lt;/a&gt; using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; scheme is &lt;dfn id=concept-js-deref title=concept-js-deref&gt;dereferenced&lt;/dfn&gt;, the user agent must run the following steps:&lt;/p&gt;
+  &lt;h4 id=events&gt;&lt;span class=secno&gt;7.1.5 &lt;/span&gt;Events&lt;/h4&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let the script source be the string obtained using the content retrieval operation defined
-   for &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs. &lt;a href=#refsJSURL&gt;[JSURL]&lt;/a&gt;&lt;/li&gt;
+  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;7.1.5.1 &lt;/span&gt;Event handlers&lt;/h5&gt;
 
-   &lt;li&gt;
-
-    &lt;p&gt;Use the appropriate step from the following list:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;If a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is being &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt; for that navigation,
-     if any, has &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting disabled&lt;/a&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;If a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is being &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;a href=#active-document&gt;active document&lt;/a&gt; of that browsing context has
-     the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as the script given by that URL&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
-      of the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being navigated.&lt;/p&gt;
-
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; is &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;, and the &lt;a href=#browsing-context&gt;browsing
-      context&lt;/a&gt; being navigated has a &lt;a href=#creator-browsing-context&gt;creator browsing context&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; of the
-      &lt;a href=#creator-document&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;
-
-      &lt;p&gt;&lt;a href=#create-a-script&gt;Create a script&lt;/a&gt;, using the aforementioned script source, the &lt;a href=#url&gt;URL&lt;/a&gt;
-      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
-      language, and the &lt;a href=#script-settings-object&gt;script settings object&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
-      &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;a href=#code-entry-point&gt;code entry-point&lt;/a&gt;
-      of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was thrown, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is disabled&lt;/a&gt;.)&lt;/p&gt;
-
-      &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt; in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use &lt;var title=&quot;&quot;&gt;address&lt;/var&gt; as the
-      &lt;a href=#override-url&gt;override URL&lt;/a&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the result of executing the script is void (there is no return value), then the URL must
-    be treated in a manner equivalent to an HTTP resource with an HTTP 204 No Content response.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, the URL must be treated in a manner equivalent to an HTTP resource with a 200 OK
-    response whose &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt; is &lt;code&gt;&lt;a href=#text/html&gt;text/html&lt;/a&gt;&lt;/code&gt;
-    and whose response body is the return value converted to a string value.&lt;/p&gt;
-
-    &lt;p class=note&gt;Certain contexts, in particular &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; elements, ignore the &lt;a href=#content-type title=Content-Type&gt;Content-Type metadata&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;div class=example&gt;
-
-   &lt;p&gt;So for example a &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL for a &lt;code title=attr-img-src&gt;&lt;a href=#attr-img-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element would be evaluated in
-   the context of an empty object as soon as the attribute is set; it would then be sniffed to
-   determine the image type and decoded as an image.&lt;/p&gt;
-
-   &lt;p&gt;A &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL in an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt;
-   attribute of an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element would only be evaluated when the link was &lt;a href=#following-hyperlinks title=&quot;following hyperlinks&quot;&gt;followed&lt;/a&gt;.&lt;/p&gt;
-
-   &lt;p&gt;The &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute of an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element would
-   be evaluated in the context of the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s own &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;; once
-   evaluated, its return value (if it was not void) would replace that &lt;a href=#browsing-context&gt;browsing
-   context&lt;/a&gt;'s document, thus changing the variables visible in that &lt;a href=#browsing-context&gt;browsing
-   context&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;h4 id=events&gt;&lt;span class=secno&gt;7.1.6 &lt;/span&gt;Events&lt;/h4&gt;
-
-  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;7.1.6.1 &lt;/span&gt;Event handlers&lt;/h5&gt;
-
   &lt;!--test: &lt;a href=&quot;<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null</A>))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E&quot;&gt;test&lt;/a&gt;--&gt;
 
   &lt;p&gt;Many objects can have &lt;dfn id=event-handlers&gt;event handlers&lt;/dfn&gt; specified. These act as non-capture event
@@ -71304,7 +71313,7 @@
   &lt;!-- onreadystatechange is also defined specially, using [LenientThis]; see IDL --&gt;
 
 
-  &lt;h5 id=event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.6.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects, and &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
+  &lt;h5 id=event-handlers-on-elements,-document-objects,-and-window-objects&gt;&lt;span class=secno&gt;7.1.5.2 &lt;/span&gt;Event handlers on elements, &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; objects, and &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
 
   &lt;p&gt;The following are the &lt;a href=#event-handlers&gt;event handlers&lt;/a&gt; (and their corresponding &lt;a href=#event-handler-event-type title=&quot;event
   handler event type&quot;&gt;event handler event types&lt;/a&gt;) &lt;span class=impl&gt;that must be&lt;/span&gt;
@@ -71428,7 +71437,7 @@
 
   &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#event-handlers title=&quot;event handlers&quot;&gt;Event handler&lt;/a&gt; &lt;th&gt;&lt;a href=#event-handler-event-type&gt;Event handler event type&lt;/a&gt;
    &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=handler-onreadystatechange title=handler-onreadystatechange&gt;&lt;code&gt;onreadystatechange&lt;/code&gt;&lt;/dfn&gt; &lt;td&gt; &lt;code title=event-readystatechange&gt;&lt;a href=#event-readystatechange&gt;readystatechange&lt;/a&gt;&lt;/code&gt;
-  &lt;/table&gt;&lt;h6 id=idl-definitions&gt;&lt;span class=secno&gt;7.1.6.2.1 &lt;/span&gt;IDL definitions&lt;/h6&gt;
+  &lt;/table&gt;&lt;h6 id=idl-definitions&gt;&lt;span class=secno&gt;7.1.5.2.1 &lt;/span&gt;IDL definitions&lt;/h6&gt;
 
   &lt;pre class=idl&gt;[NoInterfaceObject]
 interface &lt;dfn id=globaleventhandlers&gt;GlobalEventHandlers&lt;/dfn&gt; {
@@ -71515,7 +71524,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
+  &lt;h5 id=event-firing&gt;&lt;span class=secno&gt;7.1.5.3 &lt;/span&gt;Event firing&lt;/h5&gt;
 
   &lt;p&gt;Certain operations and methods are defined as firing events on elements. For example, the &lt;code title=dom-click&gt;&lt;a href=#dom-click&gt;click()&lt;/a&gt;&lt;/code&gt; method on the &lt;code&gt;&lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt;&lt;/code&gt; interface is defined as
   firing a &lt;code title=event-click&gt;&lt;a href=#event-click&gt;click&lt;/a&gt;&lt;/code&gt; event on the element. &lt;a href=#refsDOMEVENTS&gt;[DOMEVENTS]&lt;/a&gt;&lt;/p&gt;
@@ -71546,7 +71555,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.6.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
+  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;7.1.5.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
 
   &lt;p&gt;When an event is dispatched at a DOM node in a &lt;code&gt;&lt;a href=#document&gt;Document&lt;/a&gt;&lt;/code&gt; in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;, if the event is not a &lt;code title=event-load&gt;load&lt;/code&gt; event, the user agent
@@ -78278,8 +78287,7 @@
 
   &lt;p&gt;HTTP 200 OK responses that have a &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; specifying an unsupported type, or
   that have no &lt;a href=#content-type&gt;Content-Type&lt;/a&gt; at all, must cause the user agent to &lt;a href=#fail-the-connection&gt;fail the
-  connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type; javascript: as having
-  the type text/html --&gt;
+  connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type --&gt;
 
   &lt;p&gt;HTTP 305 Use Proxy, 401 Unauthorized, and 407 Proxy Authentication Required should be treated
   transparently as for any other subresource.&lt;/p&gt;
@@ -82509,9 +82517,10 @@
     &lt;a href=#origin&gt;origin&lt;/a&gt; specified by the &lt;a href=#incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=note&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;.
-    For example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -82624,9 +82633,10 @@
     the &lt;a href=#incumbent-settings-object&gt;incumbent settings object&lt;/a&gt;, then throw a &lt;code&gt;&lt;a href=#securityerror&gt;SecurityError&lt;/a&gt;&lt;/code&gt; exception and abort these
     steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=note&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;a href=#data-protocol title=&quot;data protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/a&gt;.
-    For example, you can't load a script from a &lt;a href=#javascript-protocol title=&quot;javascript protocol&quot;&gt;&lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -101102,11 +101112,6 @@
    &lt;dt id=refsJSON&gt;[JSON]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</A>&gt;The application/json Media Type for JavaScript Object Notation (JSON)&lt;/a&gt;&lt;/cite&gt;, D. Crockford. IETF.&lt;/dd&gt;
 
-   &lt;dt id=refsJSURL&gt;[JSURL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme">http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme</A>&gt;The 'javascript' resource identifier scheme&lt;/a&gt;&lt;/cite&gt;, B. H&ouml;hrmann. IETF.
-   &lt;!-- Sadly this reference has been dead for a while. Unfortunately it's the closest thing we current have to a spec. --&gt;
-   &lt;/dd&gt;
-
    &lt;dt id=refsMAILTO&gt;[MAILTO]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=<A HREF="http://tools.ietf.org/html/rfc6068">http://tools.ietf.org/html/rfc6068</A>&gt;The 'mailto' URI scheme&lt;/a&gt;&lt;/cite&gt;, M. Duerst, L. Masinter, J. Zawinski. IETF.&lt;/dd&gt;
 

Modified: source
===================================================================
--- source	2013-11-14 22:19:58 UTC (rev 8283)
+++ source	2013-11-15 15:56:16 UTC (rev 8284)
@@ -2273,7 +2273,7 @@
      &lt;li&gt;The &lt;dfn&gt;URL parser&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn&gt;Parsed URL&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-scheme&quot;&gt;scheme&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
-     &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-scheme data&quot;&gt;scheme data&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
+     &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-scheme-data&quot;&gt;scheme data&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
      &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-username&quot;&gt;username&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
      &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-password&quot;&gt;password&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
      &lt;li&gt;The &lt;dfn data-x=&quot;concept-url-host&quot;&gt;host&lt;/dfn&gt; component of a &lt;span&gt;parsed URL&lt;/span&gt;
@@ -6288,8 +6288,7 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;referrer&lt;/var&gt; is not the empty string, is not a &lt;span data-x=&quot;data
-    protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt;, is not a &lt;span data-x=&quot;javascript
-    protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and is not the &lt;span&gt;URL&lt;/span&gt;
+    protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt;, and is not the &lt;span&gt;URL&lt;/span&gt;
     &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;, then generate the &lt;i&gt;address of the resource from which Request-URIs
     are obtained&lt;/i&gt; as required by HTTP for the &lt;code data-x=&quot;http-referer&quot;&gt;Referer&lt;/code&gt; (sic)
     header from &lt;var data-x=&quot;&quot;&gt;referrer&lt;/var&gt;. &lt;a href=&quot;#refsHTTP&quot;&gt;[HTTP]&lt;/a&gt;&lt;/p&gt;
@@ -6338,11 +6337,11 @@
     &lt;dfn&gt;&lt;code&gt;about:blank&lt;/code&gt;&lt;/dfn&gt;, then the resource is immediately available and consists of
     the empty string, with no metadata.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Otherwise, at a time convenient to the user and the user agent, download (or otherwise
     obtain) the resource, applying the semantics of the relevant specifications (e.g. performing an
-    HTTP GET or POST operation, or reading the file from disk, &lt;span
-    data-x=&quot;concept-js-deref&quot;&gt;dereferencing &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code
-    data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs&lt;/span&gt;&lt;/span&gt;, etc).&lt;/p&gt;
+    HTTP GET or POST operation, or reading the file from disk, or expanding &lt;span data-x=&quot;data protocol&quot;&gt;&lt;code
+    data-x=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;, etc).&lt;/p&gt;
 
     &lt;p&gt;For the purposes of the &lt;code data-x=&quot;http-referer&quot;&gt;Referer&lt;/code&gt; (sic) header, use the
     &lt;i&gt;address of the resource from which Request-URIs are obtained&lt;/i&gt; generated in the earlier
@@ -6646,7 +6645,6 @@
 
    &lt;dt&gt;If the &lt;var data-x=&quot;&quot;&gt;URL&lt;/var&gt; has the &lt;span&gt;same origin&lt;/span&gt; as &lt;var data-x=&quot;&quot;&gt;origin&lt;/var&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var data-x=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;span data-x=&quot;data protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;data:&lt;/code&gt; URL&lt;/span&gt;&lt;/dt&gt;
-   &lt;dt&gt;If the &lt;var data-x=&quot;&quot;&gt;URL&lt;/var&gt; is a &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;&lt;/dt&gt;
    &lt;dt&gt;If the &lt;var data-x=&quot;&quot;&gt;URL&lt;/var&gt; is &lt;code&gt;about:blank&lt;/code&gt;&lt;/dt&gt;
 
    &lt;dd&gt;
@@ -6677,7 +6675,7 @@
         &lt;p&gt;Set &lt;var data-x=&quot;&quot;&gt;URL&lt;/var&gt; to the target URL of the redirect and return to the top of
         the &lt;span&gt;potentially CORS-enabled fetch&lt;/span&gt; algorithm (this time, one of the other
         branches below might be taken, based on the value of &lt;var data-x=&quot;&quot;&gt;mode&lt;/var&gt;&lt;!-- but if
-        it's a data: or javascript: URL, we'll stay here --&gt;).&lt;/p&gt;
+        it's a data: URL, we'll stay here --&gt;).&lt;/p&gt;
 
        &lt;/dd&gt;
 
@@ -56999,12 +56997,6 @@
       &lt;p&gt;The resource obtained in this fashion can be either &lt;span&gt;CORS-same-origin&lt;/span&gt; or
       &lt;span&gt;CORS-cross-origin&lt;/span&gt;. This only affects how error reporting happens.&lt;/p&gt;
 
-      &lt;p&gt;For historical reasons, if the &lt;span&gt;URL&lt;/span&gt; is a &lt;span data-x=&quot;javascript
-      protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, then the user agent must not, despite
-      the requirements in the definition of the &lt;span data-x=&quot;fetch&quot;&gt;fetching&lt;/span&gt; algorithm,
-      actually execute the script in the URL; instead the user agent must act as if it had received
-      an empty HTTP 400 response.&lt;/p&gt;
-
       &lt;p&gt;For performance reasons, user agents may start fetching the script (as defined above) as
       soon as the &lt;code data-x=&quot;attr-script-src&quot;&gt;src&lt;/code&gt; attribute is set, instead, in the hope
       that the element will be inserted into the document (and that the &lt;code
@@ -72305,22 +72297,6 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; was generated from a &lt;span data-x=&quot;javascript
-     protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The &lt;span&gt;origin&lt;/span&gt; is an &lt;span data-x=&quot;concept-origin-alias&quot;&gt;alias&lt;/span&gt; to the
-      &lt;span&gt;origin&lt;/span&gt; of the script of that &lt;span data-x=&quot;javascript
-      protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;.&lt;/p&gt;
-
-      &lt;p&gt;The &lt;span&gt;effective script origin&lt;/span&gt; is initially an &lt;span
-      data-x=&quot;concept-origin-alias&quot;&gt;alias&lt;/span&gt; to the &lt;span&gt;origin&lt;/span&gt; of the
-      &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; was served over the network and has an address that uses a URL
      scheme with a server-based naming authority&lt;/dt&gt;
 
@@ -72354,8 +72330,7 @@
      &lt;/dd&gt;
 
 
-     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; has the &lt;span data-x=&quot;the document's address&quot;&gt;address&lt;/span&gt;
-     &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot;&lt;/dt&gt;
+     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; is the initial &quot;&lt;code&gt;about:blank&lt;/code&gt;&quot; document&lt;/dt&gt;
 
      &lt;dd&gt;
 
@@ -72366,6 +72341,22 @@
      &lt;/dd&gt;
 
 
+     &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; was created as part of the processing for &lt;span
+     data-x=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/span&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;The &lt;span&gt;origin&lt;/span&gt; is an &lt;span data-x=&quot;concept-origin-alias&quot;&gt;alias&lt;/span&gt; to the
+      &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt;
+      being navigated when the &lt;span&gt;navigate&lt;/span&gt; algorithm was invoked.&lt;/p&gt;
+
+      &lt;p&gt;The &lt;span&gt;effective script origin&lt;/span&gt; is initially an &lt;span
+      data-x=&quot;concept-origin-alias&quot;&gt;alias&lt;/span&gt; to the &lt;span&gt;effective script origin&lt;/span&gt; of that
+      same &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+
      &lt;dt&gt;If a &lt;code&gt;Document&lt;/code&gt; is &lt;span&gt;an &lt;code&gt;iframe&lt;/code&gt; &lt;code
      data-x=&quot;attr-iframe-srcdoc&quot;&gt;srcdoc&lt;/code&gt; document&lt;/span&gt;&lt;/dt&gt;
 
@@ -74167,55 +74158,187 @@
 
    &lt;li&gt;
 
-    &lt;p&gt;If the resource has already been obtained (e.g. because it is being used to populate an
-    &lt;code&gt;object&lt;/code&gt; element's new &lt;span&gt;child browsing context&lt;/span&gt;), then skip this step.&lt;/p&gt;
+    &lt;p&gt;This is the step that attempts to obtain the resource, if necessary. Jump to the first
+    appropriate substep:&lt;/p&gt;
 
-    &lt;p&gt;Otherwise:&lt;/p&gt;
+    &lt;dl&gt;
 
-    &lt;p&gt;If the new resource is to be fetched using HTTP GET &lt;span
-    data-x=&quot;concept-http-equivalent-get&quot;&gt;or equivalent&lt;/span&gt;, and there are &lt;span data-x=&quot;relevant
-    application cache&quot;&gt;relevant application caches&lt;/span&gt; that are identified by a URL with the
-    &lt;span&gt;same origin&lt;/span&gt; as the URL in question, and that have this URL as one of their entries,
-    excluding entries marked as &lt;span data-x=&quot;concept-appcache-foreign&quot;&gt;foreign&lt;/span&gt;, and whose
-    &lt;span data-x=&quot;concept-appcache-mode&quot;&gt;mode&lt;/span&gt; is &lt;span
-    data-x=&quot;concept-appcache-mode-fast&quot;&gt;fast&lt;/span&gt;, and the user agent is not in a mode where it
-    will avoid using &lt;span data-x=&quot;application cache&quot;&gt;application caches&lt;/span&gt; then
-    &lt;span&gt;fetch&lt;/span&gt; the resource from the &lt;span data-x=&quot;concept-appcache-selection&quot;&gt;most
-    appropriate application cache&lt;/span&gt; of those that match.&lt;/p&gt;
+     &lt;dt&gt;If the resource has already been obtained (e.g. because it is being used to populate an
+     &lt;code&gt;object&lt;/code&gt; element's new &lt;span&gt;child browsing context&lt;/span&gt;)&lt;/dt&gt;
 
-    &lt;p class=&quot;example&quot;&gt;For example, imagine an HTML page with an associated application cache
-    displaying an image and a form, where the image is also used by several other application
-    caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
-    could decide to show the image from any of those caches, but it is likely that the most useful
-    cache for the user would be the one that was used for the aforementioned HTML page. On the other
-    hand, if the user submits the form, and the form does a POST submission, then the user agent
-    will not use an application cache at all; the submission will be made to the network.&lt;/p&gt;
+     &lt;dd&gt;&lt;p&gt;Skip this step. The data is already available.&lt;/p&gt;&lt;/dd&gt;
 
-    &lt;p&gt;Otherwise, &lt;span&gt;fetch&lt;/span&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect
-    flag&lt;/i&gt; set.&lt;/p&gt;
+     &lt;dt&gt;If the new resource is a &lt;span&gt;URL&lt;/span&gt; whose &lt;span
+     data-x=&quot;concept-url-scheme&quot;&gt;scheme&lt;/span&gt; is &lt;code data-x=&quot;javascript
+     protocol&quot;&gt;javascript&lt;/code&gt;&lt;/dt&gt;
 
+     &lt;dd&gt;
+
+      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
+
+      &lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to run &lt;dfn data-x=&quot;javascript protocol&quot;&gt;these &quot;&lt;code
+      data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&quot; steps&lt;/dfn&gt;:&lt;/p&gt;
+
+      &lt;ol id=&quot;concept-js-deref&quot;&gt;
+
+       &lt;li&gt;&lt;p&gt;If the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt; is not the
+       &lt;span&gt;same origin&lt;/span&gt; as the &lt;span&gt;origin&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of
+       the &lt;span&gt;browsing context&lt;/span&gt; being navigated, then act as if the result of evaluating
+       the script was the void value, and jump to the step labeled &lt;i&gt;process results&lt;/i&gt;
+       below.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Apply the &lt;span&gt;URL parser&lt;/span&gt; to the &lt;span&gt;URL&lt;/span&gt; being navigated.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt; be the result of the &lt;span&gt;URL
+       parser&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Append &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;span data-x=&quot;concept-url-scheme-data&quot;&gt;scheme
+       data&lt;/span&gt; component to &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;span data-x=&quot;concept-url-query&quot;&gt;query&lt;/span&gt;
+       component is not null, then first append a U+003F QUESTION MARK character (?) to &lt;var
+       data-x=&quot;&quot;&gt;script source&lt;/var&gt;, and then append &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;span
+       data-x=&quot;concept-url-query&quot;&gt;query&lt;/span&gt; component to &lt;var data-x=&quot;&quot;&gt;script
+       source&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;span
+       data-x=&quot;concept-url-fragment&quot;&gt;fragment&lt;/span&gt; component is not null, then first append a
+       U+003F QUESTION MARK character (?) to &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt;, and then append
+       &lt;var data-x=&quot;&quot;&gt;parsed URL&lt;/var&gt;'s &lt;span data-x=&quot;concept-url-fragment&quot;&gt;fragment&lt;/span&gt;
+       component to &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the
+       &lt;span&gt;percent decode&lt;/span&gt; algorithm to &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;Replace &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; with the result of applying the &lt;span&gt;UTF-8
+       decode&lt;/span&gt; algorithm to &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;!-- &lt;body onload=&quot;&amp;#xFFFE;w('test')&quot;&gt; and javascript:%EF%BB%BF'test' both work, so we assume
+            that JavaScript is stripping the BOM, and we don't have to --&gt;
+
+       &lt;!--
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2639</A> -&gt; about:blank
+         <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640">http://software.hixie.ch/utilities/js/live-dom-viewer/saved/2640</A> -&gt; javascript:'test' in Firefox, about:blank otherwise
+       --&gt;
+       &lt;li&gt;&lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;span data-x=&quot;the document's
+       address&quot;&gt;address&lt;/span&gt; of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
+       context&lt;/span&gt; being navigated.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt;, using &lt;var data-x=&quot;&quot;&gt;script source&lt;/var&gt; as the script
+        source, &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; as the script source URL, JavaScript as the scripting
+        language, and the &lt;span&gt;script settings object&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object of
+        the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; being navigated.&lt;/p&gt;
+
+        &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
+        of this &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
+        data-x=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
+        data-x=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;
+
+        &lt;p&gt;&lt;i&gt;Process results&lt;/i&gt;: If the result of executing the script is void (there is no return
+        value), then the result of obtaining the resource for the URL is &lt;span
+        data-x=&quot;concept-http-equivalent-codes&quot;&gt;equivalent to&lt;/span&gt; an HTTP resource with an HTTP
+        204 No Content response.&lt;/p&gt;
+
+        &lt;p&gt;Otherwise, the result of obtaining the resource for the URL is &lt;span
+        data-x=&quot;concept-http-equivalent-codes&quot;&gt;equivalent&lt;/span&gt; to an HTTP resource with a 200 OK
+        response whose &lt;span data-x=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; is
+        &lt;code&gt;text/html&lt;/code&gt; and whose response body is the return value converted to a string
+        value.&lt;/p&gt;
+
+        &lt;p&gt;When it comes time to &lt;span&gt;set the document's address&lt;/span&gt; in the &lt;span
+        data-x=&quot;navigate&quot;&gt;navigation algorithm&lt;/span&gt;, use &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; as the
+        &lt;span&gt;override URL&lt;/span&gt;.&lt;/p&gt;
+
+       &lt;/li&gt;
+
+      &lt;/ol&gt;
+
+      &lt;div class=&quot;example&quot;&gt;
+
+       &lt;p&gt;So for example a &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt;
+       URL&lt;/span&gt; in an &lt;code data-x=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute of an
+       &lt;code&gt;a&lt;/code&gt; element would only be evaluated when the link was &lt;span data-x=&quot;following
+       hyperlinks&quot;&gt;followed&lt;/span&gt;, while such a URL in the &lt;code
+       data-x=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute of an &lt;code&gt;iframe&lt;/code&gt; element would be
+       evaluated in the context of the &lt;code&gt;iframe&lt;/code&gt;'s own &lt;span&gt;nested browsing
+       context&lt;/span&gt; when the &lt;code&gt;iframe&lt;/code&gt; is being set up; once evaluated, its return value
+       (if it was not void) would replace that &lt;span&gt;browsing context&lt;/span&gt;'s document, thus also
+       changing the &lt;code&gt;Window&lt;/code&gt; object of that &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
+
+      &lt;/div&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If the new resource is to be fetched using HTTP GET &lt;span
+     data-x=&quot;concept-http-equivalent-get&quot;&gt;or equivalent&lt;/span&gt;, and there are &lt;span data-x=&quot;relevant
+     application cache&quot;&gt;relevant application caches&lt;/span&gt; that are identified by a URL with the
+     &lt;span&gt;same origin&lt;/span&gt; as the URL in question, and that have this URL as one of their
+     entries, excluding entries marked as &lt;span data-x=&quot;concept-appcache-foreign&quot;&gt;foreign&lt;/span&gt;,
+     and whose &lt;span data-x=&quot;concept-appcache-mode&quot;&gt;mode&lt;/span&gt; is &lt;span
+     data-x=&quot;concept-appcache-mode-fast&quot;&gt;fast&lt;/span&gt;, and the user agent is not in a mode where it
+     will avoid using &lt;span data-x=&quot;application cache&quot;&gt;application caches&lt;/span&gt;&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;span&gt;Fetch&lt;/span&gt; the resource from the &lt;span data-x=&quot;concept-appcache-selection&quot;&gt;most
+      appropriate application cache&lt;/span&gt; of those that match.&lt;/p&gt;
+
+      &lt;p class=&quot;example&quot;&gt;For example, imagine an HTML page with an associated application cache
+      displaying an image and a form, where the image is also used by several other application
+      caches. If the user right-clicks on the image and chooses &quot;View Image&quot;, then the user agent
+      could decide to show the image from any of those caches, but it is likely that the most useful
+      cache for the user would be the one that was used for the aforementioned HTML page. On the
+      other hand, if the user submits the form, and the form does a POST submission, then the user
+      agent will not use an application cache at all; the submission will be made to the
+      network.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;&lt;span&gt;Fetch&lt;/span&gt;&lt;!--FETCH--&gt; the new resource, with the &lt;i&gt;manual redirect flag&lt;/i&gt;
+      set.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;If the &lt;span&gt;browsing context&lt;/span&gt; is a &lt;span&gt;nested browsing context&lt;/span&gt;, then in the
+    time between this step and either the creation of a &lt;code&gt;Document&lt;/code&gt; object or the &lt;!-- XXX
+    bug 23633 --&gt; &lt;span&gt;canceling&lt;/span&gt; of the &lt;span data-x=&quot;navigate&quot;&gt;navigation&lt;/span&gt;
+    algorithm&lt;!-- /XXX bug 23633 --&gt;, whichever happens first, the &lt;span&gt;browsing context&lt;/span&gt;
+    must be put in the &lt;span&gt;delaying &lt;code data-x=&quot;event-load&quot;&gt;load&lt;/code&gt; events mode&lt;/span&gt;.&lt;/p&gt;
+    &lt;!-- this is what makes &lt;iframe&gt; elements delay the load event of their parent browsing context
+    when their child browsing context is in between this step and the step that starts the parser.
+    --&gt;
+
+    &lt;p&gt;If the steps above invoked the &lt;span&gt;fetch&lt;/span&gt; algorith, the following requirements also
+    apply:&lt;/p&gt;
+
     &lt;p&gt;If the resource is being fetched using a method other than one &lt;span
     data-x=&quot;concept-http-equivalent-get&quot;&gt;equivalent to&lt;/span&gt; HTTP's GET&lt;!-- or HEAD (but that can't
     happen) --&gt;, or, if the &lt;span data-x=&quot;navigate&quot;&gt;navigation algorithm&lt;/span&gt; was invoked as a
-    result of the &lt;span data-x=&quot;concept-form-submit&quot;&gt;form submission algorithm&lt;/span&gt;, then the &lt;span
-    data-x=&quot;fetch&quot;&gt;fetching algorithm&lt;/span&gt; must be invoked from the &lt;span&gt;origin&lt;/span&gt; of the
-    &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt;, if any.&lt;/p&gt; &lt;!--
+    result of the &lt;span data-x=&quot;concept-form-submit&quot;&gt;form submission algorithm&lt;/span&gt;, then the
+    &lt;span data-x=&quot;fetch&quot;&gt;fetching algorithm&lt;/span&gt; must be invoked from the &lt;span&gt;origin&lt;/span&gt; of
+    the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;source browsing context&lt;/span&gt;, if any.&lt;/p&gt; &lt;!--
     potentially http-origin privacy sensitive --&gt;
 
-    &lt;p&gt;If the &lt;span&gt;browsing context&lt;/span&gt; being navigated is a &lt;span&gt;child browsing context&lt;/span&gt;
-    for an &lt;code&gt;iframe&lt;/code&gt; or &lt;code&gt;object&lt;/code&gt; element, then the &lt;span data-x=&quot;fetch&quot;&gt;fetching
-    algorithm&lt;/span&gt; must be invoked from the &lt;code&gt;iframe&lt;/code&gt; or &lt;code&gt;object&lt;/code&gt; element's
-    &lt;span&gt;browsing context scope origin&lt;/span&gt;, if it has one.&lt;/p&gt; &lt;!-- potentially http-origin
-    privacy sensitive --&gt;
+    &lt;p&gt;Otherwise, if the &lt;span&gt;browsing context&lt;/span&gt; being navigated is a &lt;span&gt;child browsing
+    context&lt;/span&gt; for an &lt;code&gt;iframe&lt;/code&gt; or &lt;code&gt;object&lt;/code&gt; element, then the &lt;span
+    data-x=&quot;fetch&quot;&gt;fetching algorithm&lt;/span&gt; must be invoked from the &lt;code&gt;iframe&lt;/code&gt; or
+    &lt;code&gt;object&lt;/code&gt; element's &lt;span&gt;browsing context scope origin&lt;/span&gt;, if it has one.&lt;/p&gt;
+    &lt;!-- potentially http-origin privacy sensitive --&gt;    
 
-    &lt;p&gt;If the &lt;span&gt;browsing context&lt;/span&gt; is a &lt;span&gt;nested browsing context&lt;/span&gt;, then in the
-    time between the &lt;span&gt;fetch&lt;/span&gt; algorithm being started by this step, and either the
-    creation of a &lt;code&gt;Document&lt;/code&gt; object or the canceling of the &lt;span&gt;fetch&lt;/span&gt; or &lt;span
-    data-x=&quot;navigate&quot;&gt;navigation&lt;/span&gt; algorithms, the &lt;span&gt;browsing context&lt;/span&gt; must be put in
-    the &lt;span&gt;delaying &lt;code data-x=&quot;event-load&quot;&gt;load&lt;/code&gt; events mode&lt;/span&gt;.&lt;/p&gt; &lt;!-- this is
-    what makes &lt;iframe&gt; elements delay the load event of their parent browsing context when their
-    child browsing context is in between this step and the step that starts the parser. --&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -74441,8 +74564,8 @@
     instead.&lt;/p&gt;
 
     &lt;p class=&quot;note&quot;&gt;An &lt;span data-x=&quot;override URL&quot;&gt;override URL&lt;/span&gt; is set when &lt;span
-    data-x=&quot;concept-js-deref&quot;&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/span&gt; and when performing
-    &lt;span&gt;an overridden reload&lt;/span&gt;.&lt;/p&gt;
+    data-x=&quot;javascript protocol&quot;&gt;dereferencing a &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/span&gt; and when
+    performing &lt;span&gt;an overridden reload&lt;/span&gt;.&lt;/p&gt;
 
     &lt;p&gt;&lt;dfn data-x=&quot;create a Document object&quot;&gt;Creating a new &lt;code&gt;Document&lt;/code&gt; object&lt;/dfn&gt;: when
     a &lt;code&gt;Document&lt;/code&gt; is created as part of the above steps, the user agent must additionally
@@ -77996,9 +78119,7 @@
 
    &lt;li&gt;Processing of &lt;code&gt;script&lt;/code&gt; elements.&lt;/li&gt;
 
-   &lt;li&gt;Processing of inline &lt;code data-x=&quot;javascript protocol&quot;&gt;javascript:&lt;/code&gt; URLs (e.g. the
-   &lt;code data-x=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of &lt;code&gt;img&lt;/code&gt; elements, or an &lt;code
-   data-x=&quot;&quot;&gt;@import&lt;/code&gt; rule in a CSS &lt;code&gt;style&lt;/code&gt; element block).&lt;/li&gt;
+   &lt;li&gt;Navigating to &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code&gt;javascript:&lt;/code&gt; URLs&lt;/span&gt;.&lt;/li&gt;
 
    &lt;li&gt;Event handlers, whether registered through the DOM using &lt;code
    data-x=&quot;&quot;&gt;addEventListener()&lt;/code&gt;, by explicit &lt;span&gt;event handler content attributes&lt;/span&gt;, by
@@ -79083,118 +79204,8 @@
   &lt;/div&gt;
 
 
-  &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;!-- SCRIPT EXEC --&gt;
-  &lt;h4 id=&quot;javascript-protocol&quot;&gt;&lt;dfn data-x=&quot;javascript protocol&quot;&gt;The &lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL scheme&lt;/dfn&gt;&lt;/h4&gt;
 
-  &lt;p&gt;When a &lt;span&gt;URL&lt;/span&gt; using the &lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; scheme is &lt;dfn
-  data-x=&quot;concept-js-deref&quot;&gt;dereferenced&lt;/dfn&gt;, the user agent must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let the script source be the string obtained using the content retrieval operation defined
-   for &lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URLs. &lt;a href=&quot;#refsJSURL&quot;&gt;[JSURL]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Use the appropriate step from the following list:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt;If a &lt;span&gt;browsing context&lt;/span&gt; is being &lt;span data-x=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;span&gt;source browsing context&lt;/span&gt; for that navigation,
-     if any, has &lt;span data-x=&quot;concept-bc-noscript&quot;&gt;scripting disabled&lt;/span&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;If a &lt;span&gt;browsing context&lt;/span&gt; is being &lt;span data-x=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a
-     &lt;code&gt;javascript:&lt;/code&gt; URL, and the &lt;span&gt;active document&lt;/span&gt; of that browsing context has
-     the &lt;span&gt;same origin&lt;/span&gt; as the script given by that URL&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
-
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;span data-x=&quot;the document's address&quot;&gt;address&lt;/span&gt;
-      of the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; being navigated.&lt;/p&gt;
-
-      &lt;p&gt;If &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; is &lt;code&gt;about:blank&lt;/code&gt;, and the &lt;span&gt;browsing
-      context&lt;/span&gt; being navigated has a &lt;span&gt;creator browsing context&lt;/span&gt;, then let &lt;var
-      data-x=&quot;&quot;&gt;address&lt;/var&gt; be the &lt;span data-x=&quot;the document's address&quot;&gt;address&lt;/span&gt; of the
-      &lt;span&gt;creator &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; instead.&lt;/p&gt;
-
-      &lt;p&gt;&lt;span&gt;Create a script&lt;/span&gt;, using the aforementioned script source, the &lt;span&gt;URL&lt;/span&gt;
-      of the resource where the &lt;code&gt;javascript:&lt;/code&gt; URL, was found, JavaScript as the scripting
-      language, and the &lt;span&gt;script settings object&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object of the
-      &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
-
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the &lt;span&gt;code entry-point&lt;/span&gt;
-      of this &lt;span data-x=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was thrown, let &lt;var
-      data-x=&quot;&quot;&gt;result&lt;/var&gt; be void instead. (The result will be void also if &lt;span
-      data-x=&quot;concept-bc-noscript&quot;&gt;scripting is disabled&lt;/span&gt;.)&lt;/p&gt;
-
-      &lt;p&gt;When it comes time to &lt;span&gt;set the document's address&lt;/span&gt; in the &lt;span
-      data-x=&quot;navigate&quot;&gt;navigation algorithm&lt;/span&gt;, use &lt;var data-x=&quot;&quot;&gt;address&lt;/var&gt; as the
-      &lt;span&gt;override URL&lt;/span&gt;.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Let &lt;var data-x=&quot;&quot;&gt;result&lt;/var&gt; be void.&lt;/p&gt;
-
-     &lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the result of executing the script is void (there is no return value), then the URL must
-    be treated in a manner equivalent to an HTTP resource with an HTTP 204 No Content response.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, the URL must be treated in a manner equivalent to an HTTP resource with a 200 OK
-    response whose &lt;span data-x=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt; is &lt;code&gt;text/html&lt;/code&gt;
-    and whose response body is the return value converted to a string value.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;Certain contexts, in particular &lt;code&gt;img&lt;/code&gt; elements, ignore the &lt;span
-    data-x=&quot;Content-Type&quot;&gt;Content-Type metadata&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;div class=&quot;example&quot;&gt;
-
-   &lt;p&gt;So for example a &lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL for a &lt;code
-   data-x=&quot;attr-img-src&quot;&gt;src&lt;/code&gt; attribute of an &lt;code&gt;img&lt;/code&gt; element would be evaluated in
-   the context of an empty object as soon as the attribute is set; it would then be sniffed to
-   determine the image type and decoded as an image.&lt;/p&gt;
-
-   &lt;p&gt;A &lt;code data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL in an &lt;code data-x=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt;
-   attribute of an &lt;code&gt;a&lt;/code&gt; element would only be evaluated when the link was &lt;span
-   data-x=&quot;following hyperlinks&quot;&gt;followed&lt;/span&gt;.&lt;/p&gt;
-
-   &lt;p&gt;The &lt;code data-x=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute of an &lt;code&gt;iframe&lt;/code&gt; element would
-   be evaluated in the context of the &lt;code&gt;iframe&lt;/code&gt;'s own &lt;span&gt;browsing context&lt;/span&gt;; once
-   evaluated, its return value (if it was not void) would replace that &lt;span&gt;browsing
-   context&lt;/span&gt;'s document, thus changing the variables visible in that &lt;span&gt;browsing
-   context&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;/div&gt;
-
-
-
   &lt;h4&gt;Events&lt;/h4&gt;
 
   &lt;h5 id=&quot;event-handler-attributes&quot;&gt;Event handlers&lt;/h5&gt;
@@ -87647,8 +87658,7 @@
 
   &lt;p&gt;HTTP 200 OK responses that have a &lt;span&gt;Content-Type&lt;/span&gt; specifying an unsupported type, or
   that have no &lt;span&gt;Content-Type&lt;/span&gt; at all, must cause the user agent to &lt;span&gt;fail the
-  connection&lt;/span&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type; javascript: as having
-  the type text/html --&gt;
+  connection&lt;/span&gt;.&lt;/p&gt; &lt;!-- about:blank is defined as having no MIME type --&gt;
 
   &lt;p&gt;HTTP 305 Use Proxy, 401 Unauthorized, and 407 Proxy Authentication Required should be treated
   transparently as for any other subresource.&lt;/p&gt;
@@ -91761,10 +91771,10 @@
     &lt;span&gt;origin&lt;/span&gt; specified by the &lt;span&gt;incumbent settings object&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception and
     abort these steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=&quot;note&quot;&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;span data-x=&quot;data protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;.
-    For example, you can't load a script from a &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code
-    data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -91885,10 +91895,10 @@
     the &lt;span&gt;incumbent settings object&lt;/span&gt;, then throw a &lt;code&gt;SecurityError&lt;/code&gt; exception and abort these
     steps.&lt;/p&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p class=&quot;note&quot;&gt;Thus, scripts must either be external files with the same scheme, host, and port
     as the original page, or &lt;span data-x=&quot;data protocol&quot;&gt;&lt;code data-x=&quot;&quot;&gt;data:&lt;/code&gt; URLs&lt;/span&gt;.
-    For example, you can't load a script from a &lt;span data-x=&quot;javascript protocol&quot;&gt;&lt;code
-    data-x=&quot;&quot;&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
+    For example, and an &lt;code&gt;https:&lt;/code&gt; page couldn't start workers
     using scripts with &lt;code&gt;http:&lt;/code&gt; URLs.&lt;/p&gt;
 
    &lt;/li&gt;
@@ -112915,11 +112925,6 @@
    &lt;dt id=&quot;refsJSON&quot;&gt;[JSON]&lt;/dt&gt;
    &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/rfc4627">http://tools.ietf.org/html/rfc4627</A>&quot;&gt;The application/json Media Type for JavaScript Object Notation (JSON)&lt;/a&gt;&lt;/cite&gt;, D. Crockford. IETF.&lt;/dd&gt;
 
-   &lt;dt id=&quot;refsJSURL&quot;&gt;[JSURL]&lt;/dt&gt;
-   &lt;dd&gt;&lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme">http://tools.ietf.org/html/draft-hoehrmann-javascript-scheme</A>&quot;&gt;The 'javascript' resource identifier scheme&lt;/a&gt;&lt;/cite&gt;, B. H&ouml;hrmann. IETF.
-   &lt;!-- Sadly this reference has been dead for a while. Unfortunately it's the closest thing we current have to a spec. --&gt;
-   &lt;/dd&gt;
-
    &lt;dt id=&quot;refsMAILTO&quot;&gt;[MAILTO]&lt;/dt&gt;
    &lt;dd&gt;(Non-normative) &lt;cite&gt;&lt;a href=&quot;<A HREF="http://tools.ietf.org/html/rfc6068">http://tools.ietf.org/html/rfc6068</A>&quot;&gt;The 'mailto' URI scheme&lt;/a&gt;&lt;/cite&gt;, M. Duerst, L. Masinter, J. Zawinski. IETF.&lt;/dd&gt;
 


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="015138.html">[html5] r8283 - [cgiow] (3) Change how dir='' works,	from being an embedding to being an overrid [...]
</A></li>
	<LI>Next message: <A HREF="015140.html">[html5] r8285 - [giow] (2) Define the task settings for the	javascript: task Fixing https://www. [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#15139">[ date ]</a>
              <a href="thread.html#15139">[ thread ]</a>
              <a href="subject.html#15139">[ subject ]</a>
              <a href="author.html#15139">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
