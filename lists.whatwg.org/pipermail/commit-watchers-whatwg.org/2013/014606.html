<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r7748 - [agiowt] (1) Split more WebVTT-specific things into	the WebVTT spec. This also m [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7748%20-%20%5Bagiowt%5D%20%281%29%20Split%20more%20WebVTT-specific%20things%20into%0A%09the%20WebVTT%20spec.%20This%20also%20m%20%5B...%5D&In-Reply-To=%3C20130311234336.B9D3A11C7C03C%40ps20323.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="014605.html">
   <LINK REL="Next"  HREF="014607.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r7748 - [agiowt] (1) Split more WebVTT-specific things into	the WebVTT spec. This also m [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r7748%20-%20%5Bagiowt%5D%20%281%29%20Split%20more%20WebVTT-specific%20things%20into%0A%09the%20WebVTT%20spec.%20This%20also%20m%20%5B...%5D&In-Reply-To=%3C20130311234336.B9D3A11C7C03C%40ps20323.dreamhostps.com%3E"
       TITLE="[html5] r7748 - [agiowt] (1) Split more WebVTT-specific things into	the WebVTT spec. This also m [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Mar 11 16:43:36 PDT 2013</I>
    <P><UL>
        <LI>Previous message: <A HREF="014605.html">[html5] r7747 - [giow] (3) Needed for compatibility. Fixing	https://www.w3.org/Bugs/Public/show_ [...]
</A></li>
        <LI>Next message: <A HREF="014607.html">[html5] r7749 - [giow] (3) make &lt;ruby&gt; reset text-indent for	sanity's sake (like with table) Fix [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14606">[ date ]</a>
              <a href="thread.html#14606">[ thread ]</a>
              <a href="subject.html#14606">[ subject ]</a>
              <a href="author.html#14606">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2013-03-11 16:43:35 -0700 (Mon, 11 Mar 2013)
New Revision: 7748

Modified:
   complete.html
   index
   source
Log:
[agiowt] (1) Split more WebVTT-specific things into the WebVTT spec. This also makes some normative changes to HTML for handling non-WebVTT cue types, but that shouldn't affect any existing implementations.
Affected topics: HTML, Microdata, Rendering, Security, Video Text Tracks

Modified: complete.html
===================================================================
--- complete.html	2013-03-09 02:02:30 UTC (rev 7747)
+++ complete.html	2013-03-11 23:43:35 UTC (rev 7748)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 March 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 11 March 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3816,11 +3816,9 @@
      &lt;li&gt;&lt;dfn id=webvtt-file-using-chapter-title-text&gt;WebVTT file using chapter title text&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=webvtt-file-using-only-nested-cues&gt;WebVTT file using only nested cues&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=webvtt-parser&gt;WebVTT parser&lt;/dfn&gt;
-     &lt;li&gt;&lt;dfn id=webvtt-cue-settings&gt;WebVTT cue settings&lt;/dfn&gt; and how to &lt;dfn id=parse-the-webvtt-settings&gt;parse the WebVTT settings&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn id=rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-parsing-rules&gt;WebVTT cue text parsing rules&lt;/dfn&gt;
+     &lt;li&gt;The &lt;dfn id=rules-for-interpreting-webvtt-cue-text&gt;rules for interpreting WebVTT cue text&lt;/dfn&gt;
+     &lt;li&gt;The WebVTT &lt;dfn id=text-track-cue-writing-direction&gt;text track cue writing direction&lt;/dfn&gt;
     &lt;/ul&gt;&lt;/dd&gt;
 
 
@@ -25943,6 +25941,7 @@
   &lt;p&gt;Any audio associated with the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; must, if played, be played
   synchronized with the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the element's &lt;a href=#effective-media-volume&gt;effective
   media volume&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;In addition to the above, the user agent may provide messages to
   the user (such as &quot;buffering&quot;, &quot;no video loaded&quot;, &quot;error&quot;, or more
@@ -30580,139 +30579,28 @@
     end of the range to which the cue applies is reached.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn id=text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;A writing direction&lt;/dfn&gt;
+   &lt;dt&gt;Some additional format-specific data&lt;/dt&gt;
    &lt;dd&gt;
-    &lt;p&gt;A writing direction, either &lt;dfn id=text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing
-    direction&quot;&gt;horizontal&lt;/dfn&gt; (a line extends horizontally and is positioned vertically, with
-    consecutive lines displayed below each other), &lt;dfn id=text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left
-    writing direction&quot;&gt;vertical growing left&lt;/dfn&gt; (a line extends vertically and is positioned
-    horizontally, with consecutive lines displayed to the left of each other&lt;!-- used for east
-    asian--&gt;), or &lt;dfn id=text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical
-    growing right&lt;/dfn&gt; (a line extends vertically and is positioned horizontally, with consecutive
-    lines displayed to the right of each other&lt;!-- used for mongolian --&gt;).&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt; is &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;, then &lt;a href=#text-track-cue-line-position title=&quot;text
-    track cue line position&quot;&gt;line position&lt;/a&gt; percentages are relative to the height of the
-    video, and &lt;a href=#text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;text position&lt;/a&gt; and &lt;a href=#text-track-cue-size title=&quot;text
-    track cue size&quot;&gt;size&lt;/a&gt; percentages are relative to the width of the video.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line position&lt;/a&gt; percentages are
-    relative to the width of the video, and &lt;a href=#text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;text
-    position&lt;/a&gt; and &lt;a href=#text-track-cue-size title=&quot;text track cue size&quot;&gt;size&lt;/a&gt; percentages are relative to
-    the height of the video.&lt;/p&gt;
+    &lt;p&gt;Additional fields, as needed for the format. For example, WebVTT has a &lt;a href=#text-track-cue-writing-direction&gt;text track cue
+    writing direction&lt;/a&gt; and so forth. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn id=text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;A snap-to-lines flag&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;A boolean indicating whether the &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line's
-    position&lt;/a&gt; is a line position (positioned to a multiple of the line dimensions of the first
-    line of the cue), or whether it is a percentage of the dimension of the video.&lt;/p&gt;
-
-    &lt;p&gt;Cues whose &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; is set will be placed within the
-    title-safe area on user agents that use overscan. Cues with the flag unset will be positioned as
-    requested (modulo overlap avoidance if multiple cues are in the same place).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;A line position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Either a number giving the position of the lines of the cue, to be interpreted as defined by
-    the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the cue, or the special
-    value &lt;dfn id=text-track-cue-automatic-line-position title=&quot;text track cue automatic line position&quot;&gt;auto&lt;/dfn&gt;, which means the position
-    is to depend on the other active tracks.&lt;/p&gt;
-
-    &lt;p&gt;A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a &lt;dfn id=text-track-cue-computed-line-position&gt;text track cue computed line position&lt;/dfn&gt; whose
-    value is that returned by the following algorithm, which is defined in terms of the other
-    aspects of the cue:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; is numeric, the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue
-     snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is not set, and the &lt;a href=#text-track-cue-line-position&gt;text
-     track cue line position&lt;/a&gt; is negative or greater than 100, then return 100 and abort these
-     steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; is numeric, return the value of the
-     &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; and abort these steps. (Either the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track
-     cue snap-to-lines flag&lt;/a&gt; is set, so any value, not just those in the range 0..100, is
-     valid, or the value is in the range 0..100 and is thus valid regardless of the value of that
-     flag.)&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;
-     is not set, return the value 100 and abort these steps. (The &lt;a href=#text-track-cue-line-position&gt;text track cue line
-     position&lt;/a&gt; is the special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-     position&quot;&gt;auto&lt;/a&gt;.)&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is not in a &lt;a href=#text-track-list-of-cues title=&quot;text track list of cues&quot;&gt;list of
-     cues&lt;/a&gt; of a &lt;a href=#text-track&gt;text track&lt;/a&gt;, or if that &lt;a href=#text-track&gt;text track&lt;/a&gt; is not in the
-     &lt;a href=#list-of-text-tracks&gt;list of text tracks&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;, return &minus;1 and abort
-     these steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; be the &lt;a href=#text-track&gt;text track&lt;/a&gt; whose &lt;a href=#text-track-list-of-cues title=&quot;text
-     track list of cues&quot;&gt;list of cues&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the number of &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt;
-     whose &lt;a href=#text-track-mode&gt;text track mode&lt;/a&gt; is &lt;a href=#text-track-showing title=&quot;text track showing&quot;&gt;showing&lt;/a&gt; and that
-     are in the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-text-tracks&gt;list of text tracks&lt;/a&gt; before &lt;var title=&quot;&quot;&gt;track&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; by one.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;A text position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the text of the cue within each line, to be interpreted as a
-    percentage of the video, as defined by the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing
-    direction&quot;&gt;writing direction&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-size title=&quot;text track cue size&quot;&gt;A size&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the size of the box within which the text of each line of the cue is to be
-    aligned, to be interpreted as a percentage of the video, as defined by the &lt;a href=#text-track-cue-writing-direction title=&quot;text
-    track cue writing direction&quot;&gt;writing direction&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-alignment title=&quot;text track cue alignment&quot;&gt;An alignment&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;An alignment for the text of each line of the cue, one of:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;&lt;dfn id=text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its start side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned centered between its start and end sides.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its end side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the left.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the right.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p&gt;Which sides are the start and end sides depends on the Unicode bidirectional algorithm and
-    the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt;. &lt;a href=#refsBIDI&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;dfn id=text-track-cue-text title=&quot;text track cue text&quot;&gt;The text of the cue&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;The raw text of the cue, and rules for its interpretation,
-    allowing the text to be rendered and converted to a DOM fragment.&lt;/p&gt;
+    &lt;p&gt;The raw text of the cue, and &lt;dfn id=rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/dfn&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;Each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a corresponding &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object. A
-  &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;'s in-memory representation can be dynamically changed through this
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; API.&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;Each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a corresponding &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object (or more
+  specifically, an object that inherits from &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; &mdash; for example, WebVTT
+  cues use the &lt;code&gt;WebVTTCue&lt;/code&gt; interface). A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;'s in-memory
+  representation can be dynamically changed through this &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; API. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is associated with &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track
+  rendering&lt;/a&gt;, as defined by the specification for the specific kind of &lt;a href=#text-track-cue&gt;text track
+  cue&lt;/a&gt;. These rules are used specifically when the object representing the cue is added to a
+  &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object using the &lt;code title=dom-TextTrack-addCue&gt;&lt;a href=#dom-texttrack-addcue&gt;addCue()&lt;/a&gt;&lt;/code&gt;
+  method.&lt;/p&gt;
+
   &lt;p&gt;In addition, each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has two pieces of dynamic information:&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=text-track-cue-active-flag title=&quot;text track cue active flag&quot;&gt;active flag&lt;/dfn&gt;
@@ -30741,16 +30629,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;When a &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; whose &lt;a href=#text-track-cue-active-flag title=&quot;text track cue active flag&quot;&gt;active
-  flag&lt;/a&gt; is set has its &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing
-  direction&lt;/a&gt;, &lt;a href=#text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt;, &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line position&lt;/a&gt;, &lt;a href=#text-track-cue-text-position title=&quot;text track cue text
-  position&quot;&gt;text position&lt;/a&gt;, &lt;a href=#text-track-cue-size title=&quot;text track cue size&quot;&gt;size&lt;/a&gt;, &lt;a href=#text-track-cue-alignment title=&quot;text
-  track cue alignment&quot;&gt;alignment&lt;/a&gt;, or &lt;a href=#text-track-cue-text title=&quot;text track cue text&quot;&gt;text&lt;/a&gt; change
-  value, then the user agent must empty the &lt;a href=#text-track-cue-display-state&gt;text track cue display state&lt;/a&gt;, and then
-  immediately run the &lt;a href=#text-track&gt;text track&lt;/a&gt;'s &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text
-  tracks&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;a href=#text-track-cue title=&quot;text track cue&quot;&gt;text track cues&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; are ordered relative to each other in the &lt;dfn id=text-track-cue-order&gt;text track
+  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#text-track-cue title=&quot;text track cue&quot;&gt;text track cues&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; are ordered relative to each other in the &lt;dfn id=text-track-cue-order&gt;text track
   cue order&lt;/dfn&gt;, which is determined as follows: first group the &lt;a href=#text-track-cue title=&quot;text track
   cue&quot;&gt;cues&lt;/a&gt; by their &lt;a href=#text-track&gt;text track&lt;/a&gt;, with the groups being sorted in the same order
   as their &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; appear in the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
@@ -31200,30 +31079,6 @@
     &lt;p&gt;Should be set to false.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;
-    if the concept of writing direction doesn't really apply (e.g. the cue consists of a bitmap
-    image).&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to false unless the format uses a rendering and positioning model for cues that
-    is largely consistent with the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt;
-   &lt;/dt&gt;&lt;/dt&gt;&lt;/dt&gt;&lt;dd&gt;
-    &lt;p&gt;If the format uses a rendering and positioning model for cues that can be largely simulated
-    using the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;, then these should be set to the values
-    that would give the same effect for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt; cues. Otherwise, they should be set to
-    zero.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;/div&gt;
 
 
@@ -31410,18 +31265,18 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a new &lt;a href=#text-track&gt;text track&lt;/a&gt; corresponding to the new
     object, and set its &lt;a href=#text-track-kind&gt;text track kind&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;kind&lt;/var&gt;, its &lt;a href=#text-track-label&gt;text track label&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;label&lt;/var&gt;, its &lt;a href=#text-track-language&gt;text track language&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, its &lt;a href=#text-track-readiness-state&gt;text track readiness
     state&lt;/a&gt; to the &lt;a href=#text-track-loaded&gt;text track loaded&lt;/a&gt; state, its
     &lt;a href=#text-track-mode&gt;text track mode&lt;/a&gt; to the &lt;a href=#text-track-hidden&gt;text track hidden&lt;/a&gt;
     mode, and its &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; to an empty
-    list.
-    Associate the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; with the
-    &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/a&gt;
-    as its &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt;.
-    &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;
-    &lt;/p&gt;
+    list.&lt;/p&gt;
 
+    &lt;p&gt;Initially, the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; is not associated with any &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules
+    for updating the text track rendering&lt;/a&gt;. When a &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is added to it,
+    the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; has its rules permanently set accordingly.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -31542,7 +31397,16 @@
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-texttrack-addcue title=dom-TextTrack-addCue&gt;&lt;code&gt;addCue(&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
   of &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; objects, when invoked, must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in a &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;, then
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; does not yet have any associated &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules
+   for updating the text track rendering&lt;/a&gt;, then associate the &lt;a href=#text-track-list-of-cues&gt;text track list of
+   cues&lt;/a&gt; with the &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt; appropriate to &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;' associated &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text
+   track rendering&lt;/a&gt; are not the same &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt;
+   as appropriate for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in a &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;, then
    remove &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; from that &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the method's &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#text-track&gt;text
@@ -31646,25 +31510,14 @@
 
   &lt;hr&gt;&lt;pre class=idl&gt;interface &lt;dfn id=texttrackcue&gt;TextTrackCue&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;? &lt;a href=#dom-texttrackcue-track title=dom-TextTrackCue-track&gt;track&lt;/a&gt;;
-           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onenter title=handler-TextTrackCue-onenter&gt;onenter&lt;/a&gt;;
-           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onexit title=handler-TextTrackCue-onexit&gt;onexit&lt;/a&gt;;
-};
 
-enum &lt;dfn id=autokeyword&gt;AutoKeyword&lt;/dfn&gt; { &quot;auto&quot; };
-[&lt;a href=#dom-texttrackcue title=dom-TextTrackCue&gt;Constructor&lt;/a&gt;(double startTime, double endTime, DOMString text)]
-interface &lt;dfn id=webvttcue&gt;WebVTTCue&lt;/dfn&gt; : &lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-texttrackcue-id title=dom-TextTrackCue-id&gt;id&lt;/a&gt;;
            attribute double &lt;a href=#dom-texttrackcue-starttime title=dom-TextTrackCue-startTime&gt;startTime&lt;/a&gt;;
            attribute double &lt;a href=#dom-texttrackcue-endtime title=dom-TextTrackCue-endTime&gt;endTime&lt;/a&gt;;
            attribute boolean &lt;a href=#dom-texttrackcue-pauseonexit title=dom-TextTrackCue-pauseOnExit&gt;pauseOnExit&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;vertical&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;snapToLines&lt;/a&gt;;
-           attribute (long or &lt;a href=#autokeyword&gt;AutoKeyword&lt;/a&gt;) &lt;a href=#dom-texttrackcue-line title=dom-TextTrackCue-line&gt;line&lt;/a&gt;;
-           attribute long &lt;a href=#dom-texttrackcue-position title=dom-TextTrackCue-position&gt;position&lt;/a&gt;;
-           attribute long &lt;a href=#dom-texttrackcue-size title=dom-TextTrackCue-size&gt;size&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-align title=dom-TextTrackCue-align&gt;align&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-text title=dom-TextTrackCue-text&gt;text&lt;/a&gt;;
-  &lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt; &lt;a href=#dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;getCueAsHTML&lt;/a&gt;();
+
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onenter title=handler-TextTrackCue-onenter&gt;onenter&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onexit title=handler-TextTrackCue-onexit&gt;onexit&lt;/a&gt;;
 };&lt;/pre&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-track title=dom-TextTrackCue-track&gt;track&lt;/a&gt;&lt;/dt&gt;
@@ -31674,15 +31527,6 @@
     otherwise.&lt;/p&gt;
    &lt;/dd&gt;
 
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; = new &lt;code title=dom-TextTrackCue&gt;&lt;a href=#dom-texttrackcue&gt;WebVTTCue&lt;/a&gt;&lt;/code&gt;( &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; )&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a new &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object, for use with the &lt;code title=dom-TextTrack-addCue&gt;&lt;a href=#dom-texttrack-addcue&gt;addCue()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-start-time&gt;text track cue start time&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-end-time&gt;text track cue end time&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-id title=dom-TextTrackCue-id&gt;id&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Returns the &lt;a href=#text-track-cue-identifier&gt;text track cue identifier&lt;/a&gt;.&lt;/p&gt;
@@ -31707,127 +31551,10 @@
     &lt;p&gt;Can be set.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;vertical&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=switch&gt;&lt;dt&gt;If it is &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The empty string.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;.&lt;/dd&gt;
-    &lt;/dl&gt;&lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;snapToLines&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns true if the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; is set, false otherwise.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-line title=dom-TextTrackCue-line&gt;line&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt;. In the
-    case of the value being &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-    position&quot;&gt;auto&lt;/a&gt;, the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot; is
-    returned.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-position title=dom-TextTrackCue-position&gt;position&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-size title=dom-TextTrackCue-size&gt;size&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-align title=dom-TextTrackCue-align&gt;align&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=switch&gt;&lt;dt&gt;If it is &lt;a href=#text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;start alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;middle alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;end alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;left alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;right alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;.&lt;/dd&gt;
-    &lt;/dl&gt;&lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-text title=dom-TextTrackCue-text&gt;text&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; in raw unparsed form.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;fragment&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;getCueAsHTML&lt;/a&gt;()&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; as a &lt;code&gt;&lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt;&lt;/code&gt; of &lt;a href=#html-elements&gt;HTML elements&lt;/a&gt; and other DOM nodes.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue title=dom-TextTrackCue&gt;&lt;code&gt;TextTrackCue(&lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked, must
-  run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be that &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-start-time&gt;text track cue start
-   time&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-end-time&gt;text track cue end
-   time&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text&gt;text track cue
-   text&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument,
-   and let the rules for its interpretation be the &lt;a href=#webvtt-cue-text-parsing-rules&gt;WebVTT cue
-   text parsing rules&lt;/a&gt;, the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering
-   rules&lt;/a&gt;, and the &lt;a href=#webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction
-   rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;!-- default settings --&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-identifier&gt;text track cue
-   identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-pause-on-exit-flag&gt;text track cue
-   pause-on-exit flag&lt;/a&gt; be false.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-writing-direction&gt;text track cue
-   writing direction&lt;/a&gt; be &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue
-   horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue
-   snap-to-lines flag&lt;/a&gt; be true.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-line-position&gt;text track cue line
-   position&lt;/a&gt; be &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-   position&quot;&gt;auto&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text-position&gt;text track cue
-   text position&lt;/a&gt; be 50.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-size&gt;text track cue
-   size&lt;/a&gt; be 100.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-alignment&gt;text track cue
-   alignment&lt;/a&gt; be &lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle
-   alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object representing
-   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-texttrackcue-track title=dom-TextTrackCue-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-track title=dom-TextTrackCue-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt;
   attribute, on getting, must return the &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object
   of the &lt;a href=#text-track&gt;text track&lt;/a&gt; in whose &lt;a href=#text-track-list-of-cues title=&quot;text track list
   of cues&quot;&gt;list of cues&lt;/a&gt; the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that
@@ -31860,83 +31587,12 @@
   flag&lt;/a&gt; must be set if the new value is true, and must be unset
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;&lt;code&gt;vertical&lt;/code&gt;&lt;/dfn&gt;
-  attribute, on getting, must return the string from the second cell
-  of the row in the table below whose first cell is the &lt;a href=#text-track-cue-writing-direction&gt;text
-  track cue writing direction&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track
-  cue&lt;/a&gt; that the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; &lt;a href=#text-track-cue-writing-direction&gt;Text track cue writing direction&lt;/a&gt;
-         &lt;th&gt; &lt;code title=dom-TextTrackCue-direction&gt;direction&lt;/code&gt; value
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;Horizontal&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;&lt;/code&gt;&quot; (the empty string)
-    &lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left writing direction&quot;&gt;Vertical growing left&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;Vertical growing right&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;On setting, the &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt; must be set to the value given in
-  the first cell of the row in the table above whose second cell is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt;
-  match for the new value, if any. If none of the values match, then the user agent must instead
-  throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;&lt;code&gt;snapToLines&lt;/code&gt;&lt;/dfn&gt; attribute, on
-  getting, must return true if the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text
-  track cue&lt;/a&gt; that the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents is set; or false otherwise.
-  On setting, the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; must be set if the new value is
-  true, and must be unset otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-line title=dom-TextTrackCue-line&gt;&lt;code&gt;line&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. The special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue
-  automatic line position&quot;&gt;auto&lt;/a&gt; must be represented as the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;. On setting, the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; must be set to
-  the new value; if the new value is the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;, then it must be
-  interpreted as the special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-  position&quot;&gt;auto&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-position title=dom-TextTrackCue-position&gt;&lt;code&gt;position&lt;/code&gt;&lt;/dfn&gt; attribute, on getting,
-  must return the &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that
-  the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, if the new value is negative or
-  greater than 100, then an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise, the
-  &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-size title=dom-TextTrackCue-size&gt;&lt;code&gt;size&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, if the new value is negative or greater
-  than 100, then an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise, the &lt;a href=#text-track-cue-size&gt;text
-  track cue size&lt;/a&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-align title=dom-TextTrackCue-align&gt;&lt;code&gt;align&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the string from the second cell of the row in the table below whose first cell is the
-  &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#text-track-cue-alignment&gt;Text track cue alignment&lt;/a&gt; &lt;th&gt; &lt;code title=dom-TextTrackCue-align&gt;&lt;a href=#dom-texttrackcue-align&gt;align&lt;/a&gt;&lt;/code&gt; value
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;On setting, the &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt; must be set to the value given in the
-  first cell of the row in the table above whose second cell is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match
-  for the new value, if any. If none of the values match, then the user agent must instead throw a
-  &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-text title=dom-TextTrackCue-text&gt;&lt;code&gt;text&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the raw &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; must
-  be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;&lt;code&gt;getCueAsHTML()&lt;/code&gt;&lt;/dfn&gt; method must
-  convert the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; to a &lt;code&gt;&lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt;&lt;/code&gt; for the
-  &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, using the appropriate rules for
-  doing so. For example, for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt;, those rules are the &lt;a href=#webvtt-cue-text-parsing-rules&gt;WebVTT cue text parsing
-  rules&lt;/a&gt; and the &lt;a href=#webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
-
   &lt;/div&gt;
 
 
   &lt;h6 id=text-tracks-describing-chapters&gt;&lt;span class=secno&gt;4.8.10.12.6 &lt;/span&gt;Text tracks describing chapters&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Chapters are segments of a &lt;a href=#media-resource&gt;media resource&lt;/a&gt; with a
   given title. Chapters can be nested, in the same way that sections
   in a document outline can have subsections.&lt;/p&gt;
@@ -31999,9 +31655,14 @@
    cue start time&lt;/a&gt;, whose end time is &lt;var title=&quot;&quot;&gt;current
    cue&lt;/var&gt;'s &lt;a href=#text-track-cue-end-time&gt;text track cue end time&lt;/a&gt;, whose title is
    &lt;var title=&quot;&quot;&gt;current cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt;
-   interpreted according to its rules for interpretation, and whose
-   list of nested chapters is empty.&lt;/li&gt;
+   interpreted according to its &lt;a href=#rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/a&gt;, and whose
+   list of nested chapters is empty.&lt;/p&gt;
 
+    &lt;p class=note&gt;For WebVTT, the &lt;a href=#rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/a&gt; are the
+    &lt;a href=#rules-for-interpreting-webvtt-cue-text&gt;rules for interpreting WebVTT cue text&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;new chapter&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;current chapter&lt;/var&gt;'s list of nested chapters, and let
    &lt;var title=&quot;&quot;&gt;current chapter&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;new
    chapter&lt;/var&gt;'s parent.&lt;/li&gt;
@@ -94279,7 +93940,7 @@
      &lt;td&gt;On the right
     &lt;tr&gt;&lt;td&gt;&lt;code title=&quot;&quot;&gt;center&lt;/code&gt;
      &lt;td&gt;In the middle
-  &lt;/table&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
+  &lt;/table&gt;&lt;!--CLEANUP--&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
 
   &lt;h4 id=embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/h4&gt;
 
@@ -94329,7 +93990,7 @@
   &lt;p&gt;Any subtitles or captions are expected to be overlayed directly
   on top of their &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element, as defined by the
   relevant rendering rules; for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt;, those are the
-  &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+  &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the user agent starts &lt;a href=#expose-a-user-interface-to-the-user title=&quot;expose a user interface
   to the user&quot;&gt;exposing a user interface&lt;/a&gt; for a
@@ -94352,14 +94013,7 @@
 iframe[seamless] { display: block; }
 &lt;span id=video-object-fit&gt;video { object-fit: contain; }&lt;/span&gt;&lt;/pre&gt;
 
-  &lt;/div&gt;
 
-
-
-
-&lt;!--TOPIC:Rendering--&gt;
-  &lt;div class=impl&gt;
-
   &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
@@ -97223,13 +96877,11 @@
 
 
 
-
   &lt;h2 id=iana&gt;&lt;span class=secno&gt;16 &lt;/span&gt;IANA considerations&lt;/h2&gt;
 
   &lt;!-- <A HREF="http://www.w3.org/2002/06/registering-mediatype.html">http://www.w3.org/2002/06/registering-mediatype.html</A> --&gt;
 
 
-
   &lt;h3 id=text/html&gt;&lt;span class=secno&gt;16.1 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
@@ -97792,7 +97444,6 @@
   at the time of writing, no semantics at all). &lt;a href=#refsJSON&gt;[JSON]&lt;/a&gt;&lt;/p&gt;
 
 
-
 &lt;!--TOPIC:HTML--&gt;
   &lt;h3 id=ping-from&gt;&lt;span class=secno&gt;16.8 &lt;/span&gt;&lt;dfn title=http-ping-from&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
@@ -101099,7 +100750,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotrack&gt;VideoTrack&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotracklist&gt;VideoTrackList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#webvttcue&gt;WebVTTCue&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#windoweventhandlers&gt;WindowEventHandlers&lt;/a&gt;&lt;/code&gt;
@@ -101951,6 +101601,7 @@
   Laura L. Carlson,
   Laura Wisewell,
   Laurens Holst,
+  Lawrence Forooghian,
   Lee Kowalkowski,
   Leif Halvard Silli,
   Lenny Domnitser,

Modified: index
===================================================================
--- index	2013-03-09 02:02:30 UTC (rev 7747)
+++ index	2013-03-11 23:43:35 UTC (rev 7748)
@@ -248,7 +248,7 @@
 
   &lt;header class=head id=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A>&gt;&lt;img alt=WHATWG height=101 src=/images/logo width=101&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1 class=allcaps&gt;HTML&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 9 March 2013&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Living Standard &mdash; Last Updated 11 March 2013&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;dl&gt;&lt;dt&gt;&lt;strong&gt;Web developer edition:&lt;/strong&gt;&lt;/dt&gt;
     &lt;dd&gt;&lt;strong&gt;&lt;a href=<A HREF="http://developers.whatwg.org/">http://developers.whatwg.org/</A>&gt;<A HREF="http://developers.whatwg.org/&lt;/a">http://developers.whatwg.org/&lt;/a</A>&gt;&lt;/strong&gt;&lt;/dd&gt;
     &lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -3816,11 +3816,9 @@
      &lt;li&gt;&lt;dfn id=webvtt-file-using-chapter-title-text&gt;WebVTT file using chapter title text&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=webvtt-file-using-only-nested-cues&gt;WebVTT file using only nested cues&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn id=webvtt-parser&gt;WebVTT parser&lt;/dfn&gt;
-     &lt;li&gt;&lt;dfn id=webvtt-cue-settings&gt;WebVTT cue settings&lt;/dfn&gt; and how to &lt;dfn id=parse-the-webvtt-settings&gt;parse the WebVTT settings&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn id=rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn id=webvtt-cue-text-parsing-rules&gt;WebVTT cue text parsing rules&lt;/dfn&gt;
+     &lt;li&gt;The &lt;dfn id=rules-for-interpreting-webvtt-cue-text&gt;rules for interpreting WebVTT cue text&lt;/dfn&gt;
+     &lt;li&gt;The WebVTT &lt;dfn id=text-track-cue-writing-direction&gt;text track cue writing direction&lt;/dfn&gt;
     &lt;/ul&gt;&lt;/dd&gt;
 
 
@@ -25943,6 +25941,7 @@
   &lt;p&gt;Any audio associated with the &lt;a href=#media-resource&gt;media resource&lt;/a&gt; must, if played, be played
   synchronized with the &lt;a href=#current-playback-position&gt;current playback position&lt;/a&gt;, at the element's &lt;a href=#effective-media-volume&gt;effective
   media volume&lt;/a&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;In addition to the above, the user agent may provide messages to
   the user (such as &quot;buffering&quot;, &quot;no video loaded&quot;, &quot;error&quot;, or more
@@ -30580,139 +30579,28 @@
     end of the range to which the cue applies is reached.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn id=text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;A writing direction&lt;/dfn&gt;
+   &lt;dt&gt;Some additional format-specific data&lt;/dt&gt;
    &lt;dd&gt;
-    &lt;p&gt;A writing direction, either &lt;dfn id=text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing
-    direction&quot;&gt;horizontal&lt;/dfn&gt; (a line extends horizontally and is positioned vertically, with
-    consecutive lines displayed below each other), &lt;dfn id=text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left
-    writing direction&quot;&gt;vertical growing left&lt;/dfn&gt; (a line extends vertically and is positioned
-    horizontally, with consecutive lines displayed to the left of each other&lt;!-- used for east
-    asian--&gt;), or &lt;dfn id=text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical
-    growing right&lt;/dfn&gt; (a line extends vertically and is positioned horizontally, with consecutive
-    lines displayed to the right of each other&lt;!-- used for mongolian --&gt;).&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt; is &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;, then &lt;a href=#text-track-cue-line-position title=&quot;text
-    track cue line position&quot;&gt;line position&lt;/a&gt; percentages are relative to the height of the
-    video, and &lt;a href=#text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;text position&lt;/a&gt; and &lt;a href=#text-track-cue-size title=&quot;text
-    track cue size&quot;&gt;size&lt;/a&gt; percentages are relative to the width of the video.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line position&lt;/a&gt; percentages are
-    relative to the width of the video, and &lt;a href=#text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;text
-    position&lt;/a&gt; and &lt;a href=#text-track-cue-size title=&quot;text track cue size&quot;&gt;size&lt;/a&gt; percentages are relative to
-    the height of the video.&lt;/p&gt;
+    &lt;p&gt;Additional fields, as needed for the format. For example, WebVTT has a &lt;a href=#text-track-cue-writing-direction&gt;text track cue
+    writing direction&lt;/a&gt; and so forth. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn id=text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;A snap-to-lines flag&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;A boolean indicating whether the &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line's
-    position&lt;/a&gt; is a line position (positioned to a multiple of the line dimensions of the first
-    line of the cue), or whether it is a percentage of the dimension of the video.&lt;/p&gt;
-
-    &lt;p&gt;Cues whose &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; is set will be placed within the
-    title-safe area on user agents that use overscan. Cues with the flag unset will be positioned as
-    requested (modulo overlap avoidance if multiple cues are in the same place).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;A line position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Either a number giving the position of the lines of the cue, to be interpreted as defined by
-    the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt; and &lt;a href=#text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt; of the cue, or the special
-    value &lt;dfn id=text-track-cue-automatic-line-position title=&quot;text track cue automatic line position&quot;&gt;auto&lt;/dfn&gt;, which means the position
-    is to depend on the other active tracks.&lt;/p&gt;
-
-    &lt;p&gt;A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a &lt;dfn id=text-track-cue-computed-line-position&gt;text track cue computed line position&lt;/dfn&gt; whose
-    value is that returned by the following algorithm, which is defined in terms of the other
-    aspects of the cue:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; is numeric, the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue
-     snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is not set, and the &lt;a href=#text-track-cue-line-position&gt;text
-     track cue line position&lt;/a&gt; is negative or greater than 100, then return 100 and abort these
-     steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; is numeric, return the value of the
-     &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; and abort these steps. (Either the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track
-     cue snap-to-lines flag&lt;/a&gt; is set, so any value, not just those in the range 0..100, is
-     valid, or the value is in the range 0..100 and is thus valid regardless of the value of that
-     flag.)&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;
-     is not set, return the value 100 and abort these steps. (The &lt;a href=#text-track-cue-line-position&gt;text track cue line
-     position&lt;/a&gt; is the special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-     position&quot;&gt;auto&lt;/a&gt;.)&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is not in a &lt;a href=#text-track-list-of-cues title=&quot;text track list of cues&quot;&gt;list of
-     cues&lt;/a&gt; of a &lt;a href=#text-track&gt;text track&lt;/a&gt;, or if that &lt;a href=#text-track&gt;text track&lt;/a&gt; is not in the
-     &lt;a href=#list-of-text-tracks&gt;list of text tracks&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;, return &minus;1 and abort
-     these steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; be the &lt;a href=#text-track&gt;text track&lt;/a&gt; whose &lt;a href=#text-track-list-of-cues title=&quot;text
-     track list of cues&quot;&gt;list of cues&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the number of &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt;
-     whose &lt;a href=#text-track-mode&gt;text track mode&lt;/a&gt; is &lt;a href=#text-track-showing title=&quot;text track showing&quot;&gt;showing&lt;/a&gt; and that
-     are in the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#list-of-text-tracks&gt;list of text tracks&lt;/a&gt; before &lt;var title=&quot;&quot;&gt;track&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; by one.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-text-position title=&quot;text track cue text position&quot;&gt;A text position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the text of the cue within each line, to be interpreted as a
-    percentage of the video, as defined by the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing
-    direction&quot;&gt;writing direction&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-size title=&quot;text track cue size&quot;&gt;A size&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the size of the box within which the text of each line of the cue is to be
-    aligned, to be interpreted as a percentage of the video, as defined by the &lt;a href=#text-track-cue-writing-direction title=&quot;text
-    track cue writing direction&quot;&gt;writing direction&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=text-track-cue-alignment title=&quot;text track cue alignment&quot;&gt;An alignment&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;An alignment for the text of each line of the cue, one of:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;&lt;dfn id=text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its start side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned centered between its start and end sides.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its end side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the left.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn id=text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the right.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p&gt;Which sides are the start and end sides depends on the Unicode bidirectional algorithm and
-    the &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/a&gt;. &lt;a href=#refsBIDI&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;dfn id=text-track-cue-text title=&quot;text track cue text&quot;&gt;The text of the cue&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;The raw text of the cue, and rules for its interpretation,
-    allowing the text to be rendered and converted to a DOM fragment.&lt;/p&gt;
+    &lt;p&gt;The raw text of the cue, and &lt;dfn id=rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/dfn&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;Each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a corresponding &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object. A
-  &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;'s in-memory representation can be dynamically changed through this
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; API.&lt;/p&gt;
+  &lt;/dl&gt;&lt;p&gt;Each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has a corresponding &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object (or more
+  specifically, an object that inherits from &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; &mdash; for example, WebVTT
+  cues use the &lt;code&gt;WebVTTCue&lt;/code&gt; interface). A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;'s in-memory
+  representation can be dynamically changed through this &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; API. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is associated with &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track
+  rendering&lt;/a&gt;, as defined by the specification for the specific kind of &lt;a href=#text-track-cue&gt;text track
+  cue&lt;/a&gt;. These rules are used specifically when the object representing the cue is added to a
+  &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object using the &lt;code title=dom-TextTrack-addCue&gt;&lt;a href=#dom-texttrack-addcue&gt;addCue()&lt;/a&gt;&lt;/code&gt;
+  method.&lt;/p&gt;
+
   &lt;p&gt;In addition, each &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; has two pieces of dynamic information:&lt;/p&gt;
 
   &lt;dl&gt;&lt;dt&gt;The &lt;dfn id=text-track-cue-active-flag title=&quot;text track cue active flag&quot;&gt;active flag&lt;/dfn&gt;
@@ -30741,16 +30629,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;p&gt;When a &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; whose &lt;a href=#text-track-cue-active-flag title=&quot;text track cue active flag&quot;&gt;active
-  flag&lt;/a&gt; is set has its &lt;a href=#text-track-cue-writing-direction title=&quot;text track cue writing direction&quot;&gt;writing
-  direction&lt;/a&gt;, &lt;a href=#text-track-cue-snap-to-lines-flag title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/a&gt;, &lt;a href=#text-track-cue-line-position title=&quot;text track cue line position&quot;&gt;line position&lt;/a&gt;, &lt;a href=#text-track-cue-text-position title=&quot;text track cue text
-  position&quot;&gt;text position&lt;/a&gt;, &lt;a href=#text-track-cue-size title=&quot;text track cue size&quot;&gt;size&lt;/a&gt;, &lt;a href=#text-track-cue-alignment title=&quot;text
-  track cue alignment&quot;&gt;alignment&lt;/a&gt;, or &lt;a href=#text-track-cue-text title=&quot;text track cue text&quot;&gt;text&lt;/a&gt; change
-  value, then the user agent must empty the &lt;a href=#text-track-cue-display-state&gt;text track cue display state&lt;/a&gt;, and then
-  immediately run the &lt;a href=#text-track&gt;text track&lt;/a&gt;'s &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text
-  tracks&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;a href=#text-track-cue title=&quot;text track cue&quot;&gt;text track cues&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; are ordered relative to each other in the &lt;dfn id=text-track-cue-order&gt;text track
+  &lt;/dl&gt;&lt;p&gt;The &lt;a href=#text-track-cue title=&quot;text track cue&quot;&gt;text track cues&lt;/a&gt; of a &lt;a href=#media-element&gt;media element&lt;/a&gt;'s &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; are ordered relative to each other in the &lt;dfn id=text-track-cue-order&gt;text track
   cue order&lt;/dfn&gt;, which is determined as follows: first group the &lt;a href=#text-track-cue title=&quot;text track
   cue&quot;&gt;cues&lt;/a&gt; by their &lt;a href=#text-track&gt;text track&lt;/a&gt;, with the groups being sorted in the same order
   as their &lt;a href=#text-track title=&quot;text track&quot;&gt;text tracks&lt;/a&gt; appear in the &lt;a href=#media-element&gt;media element&lt;/a&gt;'s
@@ -31200,30 +31079,6 @@
     &lt;p&gt;Should be set to false.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;
-    if the concept of writing direction doesn't really apply (e.g. the cue consists of a bitmap
-    image).&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to false unless the format uses a rendering and positioning model for cues that
-    is largely consistent with the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt;
-   &lt;dt&gt;The &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt;
-   &lt;/dt&gt;&lt;/dt&gt;&lt;/dt&gt;&lt;dd&gt;
-    &lt;p&gt;If the format uses a rendering and positioning model for cues that can be largely simulated
-    using the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;, then these should be set to the values
-    that would give the same effect for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt; cues. Otherwise, they should be set to
-    zero.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;/div&gt;
 
 
@@ -31410,18 +31265,18 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a new &lt;a href=#text-track&gt;text track&lt;/a&gt; corresponding to the new
     object, and set its &lt;a href=#text-track-kind&gt;text track kind&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;kind&lt;/var&gt;, its &lt;a href=#text-track-label&gt;text track label&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;label&lt;/var&gt;, its &lt;a href=#text-track-language&gt;text track language&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;language&lt;/var&gt;, its &lt;a href=#text-track-readiness-state&gt;text track readiness
     state&lt;/a&gt; to the &lt;a href=#text-track-loaded&gt;text track loaded&lt;/a&gt; state, its
     &lt;a href=#text-track-mode&gt;text track mode&lt;/a&gt; to the &lt;a href=#text-track-hidden&gt;text track hidden&lt;/a&gt;
     mode, and its &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; to an empty
-    list.
-    Associate the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; with the
-    &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/a&gt;
-    as its &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt;.
-    &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;
-    &lt;/p&gt;
+    list.&lt;/p&gt;
 
+    &lt;p&gt;Initially, the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; is not associated with any &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules
+    for updating the text track rendering&lt;/a&gt;. When a &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; is added to it,
+    the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; has its rules permanently set accordingly.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -31542,7 +31397,16 @@
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-texttrack-addcue title=dom-TextTrack-addCue&gt;&lt;code&gt;addCue(&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
   of &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; objects, when invoked, must run the following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in a &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;, then
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt; does not yet have any associated &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules
+   for updating the text track rendering&lt;/a&gt;, then associate the &lt;a href=#text-track-list-of-cues&gt;text track list of
+   cues&lt;/a&gt; with the &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt; appropriate to &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;' associated &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text
+   track rendering&lt;/a&gt; are not the same &lt;a href=#rules-for-updating-the-text-track-rendering&gt;rules for updating the text track rendering&lt;/a&gt;
+   as appropriate for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;, then throw an &lt;code&gt;&lt;a href=#invalidstateerror&gt;InvalidStateError&lt;/a&gt;&lt;/code&gt;
+   exception and abort these steps.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in a &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;, then
    remove &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; from that &lt;a href=#text-track-list-of-cues&gt;text track list of cues&lt;/a&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the method's &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#text-track&gt;text
@@ -31646,25 +31510,14 @@
 
   &lt;hr&gt;&lt;pre class=idl&gt;interface &lt;dfn id=texttrackcue&gt;TextTrackCue&lt;/dfn&gt; : &lt;a href=#eventtarget&gt;EventTarget&lt;/a&gt; {
   readonly attribute &lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;? &lt;a href=#dom-texttrackcue-track title=dom-TextTrackCue-track&gt;track&lt;/a&gt;;
-           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onenter title=handler-TextTrackCue-onenter&gt;onenter&lt;/a&gt;;
-           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onexit title=handler-TextTrackCue-onexit&gt;onexit&lt;/a&gt;;
-};
 
-enum &lt;dfn id=autokeyword&gt;AutoKeyword&lt;/dfn&gt; { &quot;auto&quot; };
-[&lt;a href=#dom-texttrackcue title=dom-TextTrackCue&gt;Constructor&lt;/a&gt;(double startTime, double endTime, DOMString text)]
-interface &lt;dfn id=webvttcue&gt;WebVTTCue&lt;/dfn&gt; : &lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-texttrackcue-id title=dom-TextTrackCue-id&gt;id&lt;/a&gt;;
            attribute double &lt;a href=#dom-texttrackcue-starttime title=dom-TextTrackCue-startTime&gt;startTime&lt;/a&gt;;
            attribute double &lt;a href=#dom-texttrackcue-endtime title=dom-TextTrackCue-endTime&gt;endTime&lt;/a&gt;;
            attribute boolean &lt;a href=#dom-texttrackcue-pauseonexit title=dom-TextTrackCue-pauseOnExit&gt;pauseOnExit&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;vertical&lt;/a&gt;;
-           attribute boolean &lt;a href=#dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;snapToLines&lt;/a&gt;;
-           attribute (long or &lt;a href=#autokeyword&gt;AutoKeyword&lt;/a&gt;) &lt;a href=#dom-texttrackcue-line title=dom-TextTrackCue-line&gt;line&lt;/a&gt;;
-           attribute long &lt;a href=#dom-texttrackcue-position title=dom-TextTrackCue-position&gt;position&lt;/a&gt;;
-           attribute long &lt;a href=#dom-texttrackcue-size title=dom-TextTrackCue-size&gt;size&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-align title=dom-TextTrackCue-align&gt;align&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-texttrackcue-text title=dom-TextTrackCue-text&gt;text&lt;/a&gt;;
-  &lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt; &lt;a href=#dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;getCueAsHTML&lt;/a&gt;();
+
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onenter title=handler-TextTrackCue-onenter&gt;onenter&lt;/a&gt;;
+           attribute &lt;a href=#eventhandler&gt;EventHandler&lt;/a&gt; &lt;a href=#handler-texttrackcue-onexit title=handler-TextTrackCue-onexit&gt;onexit&lt;/a&gt;;
 };&lt;/pre&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-track title=dom-TextTrackCue-track&gt;track&lt;/a&gt;&lt;/dt&gt;
@@ -31674,15 +31527,6 @@
     otherwise.&lt;/p&gt;
    &lt;/dd&gt;
 
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; = new &lt;code title=dom-TextTrackCue&gt;&lt;a href=#dom-texttrackcue&gt;WebVTTCue&lt;/a&gt;&lt;/code&gt;( &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; )&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a new &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object, for use with the &lt;code title=dom-TextTrack-addCue&gt;&lt;a href=#dom-texttrack-addcue&gt;addCue()&lt;/a&gt;&lt;/code&gt; method.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-start-time&gt;text track cue start time&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-end-time&gt;text track cue end time&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument sets the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-id title=dom-TextTrackCue-id&gt;id&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Returns the &lt;a href=#text-track-cue-identifier&gt;text track cue identifier&lt;/a&gt;.&lt;/p&gt;
@@ -31707,127 +31551,10 @@
     &lt;p&gt;Can be set.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;vertical&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=switch&gt;&lt;dt&gt;If it is &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The empty string.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;.&lt;/dd&gt;
-    &lt;/dl&gt;&lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;snapToLines&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns true if the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; is set, false otherwise.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-line title=dom-TextTrackCue-line&gt;line&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt;. In the
-    case of the value being &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-    position&quot;&gt;auto&lt;/a&gt;, the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot; is
-    returned.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-position title=dom-TextTrackCue-position&gt;position&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-size title=dom-TextTrackCue-size&gt;size&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-align title=dom-TextTrackCue-align&gt;align&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=switch&gt;&lt;dt&gt;If it is &lt;a href=#text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;start alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;middle alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;end alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;left alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;.&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;a href=#text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;right alignment&lt;/a&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;.&lt;/dd&gt;
-    &lt;/dl&gt;&lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-text title=dom-TextTrackCue-text&gt;text&lt;/a&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; in raw unparsed form.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;fragment&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;a href=#dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;getCueAsHTML&lt;/a&gt;()&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; as a &lt;code&gt;&lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt;&lt;/code&gt; of &lt;a href=#html-elements&gt;HTML elements&lt;/a&gt; and other DOM nodes.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;&lt;div class=impl&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue title=dom-TextTrackCue&gt;&lt;code&gt;TextTrackCue(&lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked, must
-  run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Create a new &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be that &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-start-time&gt;text track cue start
-   time&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-end-time&gt;text track cue end
-   time&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text&gt;text track cue
-   text&lt;/a&gt; be the value of the &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument,
-   and let the rules for its interpretation be the &lt;a href=#webvtt-cue-text-parsing-rules&gt;WebVTT cue
-   text parsing rules&lt;/a&gt;, the &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering
-   rules&lt;/a&gt;, and the &lt;a href=#webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction
-   rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;!-- default settings --&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-identifier&gt;text track cue
-   identifier&lt;/a&gt; be the empty string.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-pause-on-exit-flag&gt;text track cue
-   pause-on-exit flag&lt;/a&gt; be false.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-writing-direction&gt;text track cue
-   writing direction&lt;/a&gt; be &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue
-   horizontal writing direction&quot;&gt;horizontal&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue
-   snap-to-lines flag&lt;/a&gt; be true.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-line-position&gt;text track cue line
-   position&lt;/a&gt; be &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-   position&quot;&gt;auto&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text-position&gt;text track cue
-   text position&lt;/a&gt; be 50.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-size&gt;text track cue
-   size&lt;/a&gt; be 100.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;a href=#text-track-cue-alignment&gt;text track cue
-   alignment&lt;/a&gt; be &lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle
-   alignment&quot;&gt;middle alignment&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object representing
-   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-texttrackcue-track title=dom-TextTrackCue-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt;
+&lt;!--CLEANUP--&gt;
+  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-track title=dom-TextTrackCue-track&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt;
   attribute, on getting, must return the &lt;code&gt;&lt;a href=#texttrack&gt;TextTrack&lt;/a&gt;&lt;/code&gt; object
   of the &lt;a href=#text-track&gt;text track&lt;/a&gt; in whose &lt;a href=#text-track-list-of-cues title=&quot;text track list
   of cues&quot;&gt;list of cues&lt;/a&gt; the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that
@@ -31860,83 +31587,12 @@
   flag&lt;/a&gt; must be set if the new value is true, and must be unset
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-vertical title=dom-TextTrackCue-vertical&gt;&lt;code&gt;vertical&lt;/code&gt;&lt;/dfn&gt;
-  attribute, on getting, must return the string from the second cell
-  of the row in the table below whose first cell is the &lt;a href=#text-track-cue-writing-direction&gt;text
-  track cue writing direction&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track
-  cue&lt;/a&gt; that the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt; &lt;a href=#text-track-cue-writing-direction&gt;Text track cue writing direction&lt;/a&gt;
-         &lt;th&gt; &lt;code title=dom-TextTrackCue-direction&gt;direction&lt;/code&gt; value
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-horizontal-writing-direction title=&quot;text track cue horizontal writing direction&quot;&gt;Horizontal&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;&lt;/code&gt;&quot; (the empty string)
-    &lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-vertical-growing-left-writing-direction title=&quot;text track cue vertical growing left writing direction&quot;&gt;Vertical growing left&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt; &lt;a href=#text-track-cue-vertical-growing-right-writing-direction title=&quot;text track cue vertical growing right writing direction&quot;&gt;Vertical growing right&lt;/a&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;On setting, the &lt;a href=#text-track-cue-writing-direction&gt;text track cue writing direction&lt;/a&gt; must be set to the value given in
-  the first cell of the row in the table above whose second cell is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt;
-  match for the new value, if any. If none of the values match, then the user agent must instead
-  throw a &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-snaptolines title=dom-TextTrackCue-snapToLines&gt;&lt;code&gt;snapToLines&lt;/code&gt;&lt;/dfn&gt; attribute, on
-  getting, must return true if the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text
-  track cue&lt;/a&gt; that the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents is set; or false otherwise.
-  On setting, the &lt;a href=#text-track-cue-snap-to-lines-flag&gt;text track cue snap-to-lines flag&lt;/a&gt; must be set if the new value is
-  true, and must be unset otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-line title=dom-TextTrackCue-line&gt;&lt;code&gt;line&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. The special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue
-  automatic line position&quot;&gt;auto&lt;/a&gt; must be represented as the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;. On setting, the &lt;a href=#text-track-cue-line-position&gt;text track cue line position&lt;/a&gt; must be set to
-  the new value; if the new value is the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;, then it must be
-  interpreted as the special value &lt;a href=#text-track-cue-automatic-line-position title=&quot;text track cue automatic line
-  position&quot;&gt;auto&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-position title=dom-TextTrackCue-position&gt;&lt;code&gt;position&lt;/code&gt;&lt;/dfn&gt; attribute, on getting,
-  must return the &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that
-  the &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, if the new value is negative or
-  greater than 100, then an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise, the
-  &lt;a href=#text-track-cue-text-position&gt;text track cue text position&lt;/a&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-size title=dom-TextTrackCue-size&gt;&lt;code&gt;size&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;a href=#text-track-cue-size&gt;text track cue size&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, if the new value is negative or greater
-  than 100, then an &lt;code&gt;&lt;a href=#indexsizeerror&gt;IndexSizeError&lt;/a&gt;&lt;/code&gt; exception must be thrown. Otherwise, the &lt;a href=#text-track-cue-size&gt;text
-  track cue size&lt;/a&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-align title=dom-TextTrackCue-align&gt;&lt;code&gt;align&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the string from the second cell of the row in the table below whose first cell is the
-  &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;a href=#text-track-cue-alignment&gt;Text track cue alignment&lt;/a&gt; &lt;th&gt; &lt;code title=dom-TextTrackCue-align&gt;&lt;a href=#dom-texttrackcue-align&gt;align&lt;/a&gt;&lt;/code&gt; value
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-start-alignment title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-middle-alignment title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-end-alignment title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-left-alignment title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;
-    &lt;tr&gt;&lt;td&gt;&lt;a href=#text-track-cue-right-alignment title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/a&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;
-  &lt;/table&gt;&lt;p&gt;On setting, the &lt;a href=#text-track-cue-alignment&gt;text track cue alignment&lt;/a&gt; must be set to the value given in the
-  first cell of the row in the table above whose second cell is a &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; match
-  for the new value, if any. If none of the values match, then the user agent must instead throw a
-  &lt;code&gt;&lt;a href=#syntaxerror&gt;SyntaxError&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-text title=dom-TextTrackCue-text&gt;&lt;code&gt;text&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the raw &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; of the &lt;a href=#text-track-cue&gt;text track cue&lt;/a&gt; that the
-  &lt;code&gt;&lt;a href=#texttrackcue&gt;TextTrackCue&lt;/a&gt;&lt;/code&gt; object represents. On setting, the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; must
-  be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-texttrackcue-getcueashtml title=dom-TextTrackCue-getCueAsHTML&gt;&lt;code&gt;getCueAsHTML()&lt;/code&gt;&lt;/dfn&gt; method must
-  convert the &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt; to a &lt;code&gt;&lt;a href=#documentfragment&gt;DocumentFragment&lt;/a&gt;&lt;/code&gt; for the
-  &lt;a href=&quot;#script's-document&quot;&gt;script's document&lt;/a&gt; of the &lt;a href=#entry-script&gt;entry script&lt;/a&gt;, using the appropriate rules for
-  doing so. For example, for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt;, those rules are the &lt;a href=#webvtt-cue-text-parsing-rules&gt;WebVTT cue text parsing
-  rules&lt;/a&gt; and the &lt;a href=#webvtt-cue-text-dom-construction-rules&gt;WebVTT cue text DOM construction rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
-
   &lt;/div&gt;
 
 
   &lt;h6 id=text-tracks-describing-chapters&gt;&lt;span class=secno&gt;4.8.10.12.6 &lt;/span&gt;Text tracks describing chapters&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Chapters are segments of a &lt;a href=#media-resource&gt;media resource&lt;/a&gt; with a
   given title. Chapters can be nested, in the same way that sections
   in a document outline can have subsections.&lt;/p&gt;
@@ -31999,9 +31655,14 @@
    cue start time&lt;/a&gt;, whose end time is &lt;var title=&quot;&quot;&gt;current
    cue&lt;/var&gt;'s &lt;a href=#text-track-cue-end-time&gt;text track cue end time&lt;/a&gt;, whose title is
    &lt;var title=&quot;&quot;&gt;current cue&lt;/var&gt;'s &lt;a href=#text-track-cue-text&gt;text track cue text&lt;/a&gt;
-   interpreted according to its rules for interpretation, and whose
-   list of nested chapters is empty.&lt;/li&gt;
+   interpreted according to its &lt;a href=#rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/a&gt;, and whose
+   list of nested chapters is empty.&lt;/p&gt;
 
+    &lt;p class=note&gt;For WebVTT, the &lt;a href=#rules-for-rendering-the-cue-in-isolation&gt;rules for rendering the cue in isolation&lt;/a&gt; are the
+    &lt;a href=#rules-for-interpreting-webvtt-cue-text&gt;rules for interpreting WebVTT cue text&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;new chapter&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;current chapter&lt;/var&gt;'s list of nested chapters, and let
    &lt;var title=&quot;&quot;&gt;current chapter&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;new
    chapter&lt;/var&gt;'s parent.&lt;/li&gt;
@@ -94279,7 +93940,7 @@
      &lt;td&gt;On the right
     &lt;tr&gt;&lt;td&gt;&lt;code title=&quot;&quot;&gt;center&lt;/code&gt;
      &lt;td&gt;In the middle
-  &lt;/table&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
+  &lt;/table&gt;&lt;!--CLEANUP--&gt;&lt;h3 id=replaced-elements&gt;&lt;span class=secno&gt;14.4 &lt;/span&gt;Replaced elements&lt;/h3&gt;
 
   &lt;h4 id=embedded-content-2&gt;&lt;span class=secno&gt;14.4.1 &lt;/span&gt;Embedded content&lt;/h4&gt;
 
@@ -94329,7 +93990,7 @@
   &lt;p&gt;Any subtitles or captions are expected to be overlayed directly
   on top of their &lt;code&gt;&lt;a href=#the-video-element&gt;video&lt;/a&gt;&lt;/code&gt; element, as defined by the
   relevant rendering rules; for &lt;a href=#webvtt&gt;WebVTT&lt;/a&gt;, those are the
-  &lt;a href=#webvtt-cue-text-rendering-rules&gt;WebVTT cue text rendering rules&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+  &lt;a href=#rules-for-updating-the-display-of-webvtt-text-tracks&gt;rules for updating the display of WebVTT text tracks&lt;/a&gt;. &lt;a href=#refsWEBVTT&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the user agent starts &lt;a href=#expose-a-user-interface-to-the-user title=&quot;expose a user interface
   to the user&quot;&gt;exposing a user interface&lt;/a&gt; for a
@@ -94352,14 +94013,7 @@
 iframe[seamless] { display: block; }
 &lt;span id=video-object-fit&gt;video { object-fit: contain; }&lt;/span&gt;&lt;/pre&gt;
 
-  &lt;/div&gt;
 
-
-
-
-&lt;!--TOPIC:Rendering--&gt;
-  &lt;div class=impl&gt;
-
   &lt;h4 id=images-0&gt;&lt;span class=secno&gt;14.4.2 &lt;/span&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-input-element&gt;input&lt;/a&gt;&lt;/code&gt; element
@@ -97223,13 +96877,11 @@
 
 
 
-
   &lt;h2 id=iana&gt;&lt;span class=secno&gt;16 &lt;/span&gt;IANA considerations&lt;/h2&gt;
 
   &lt;!-- <A HREF="http://www.w3.org/2002/06/registering-mediatype.html">http://www.w3.org/2002/06/registering-mediatype.html</A> --&gt;
 
 
-
   &lt;h3 id=text/html&gt;&lt;span class=secno&gt;16.1 &lt;/span&gt;&lt;dfn&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;This registration is for community review and will be submitted
@@ -97792,7 +97444,6 @@
   at the time of writing, no semantics at all). &lt;a href=#refsJSON&gt;[JSON]&lt;/a&gt;&lt;/p&gt;
 
 
-
 &lt;!--TOPIC:HTML--&gt;
   &lt;h3 id=ping-from&gt;&lt;span class=secno&gt;16.8 &lt;/span&gt;&lt;dfn title=http-ping-from&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
@@ -101099,7 +100750,6 @@
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotrack&gt;VideoTrack&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#videotracklist&gt;VideoTrackList&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt;
-   &lt;li&gt;&lt;code&gt;&lt;a href=#webvttcue&gt;WebVTTCue&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#windowbase64&gt;WindowBase64&lt;/a&gt;&lt;/code&gt;
    &lt;li&gt;&lt;code&gt;&lt;a href=#windoweventhandlers&gt;WindowEventHandlers&lt;/a&gt;&lt;/code&gt;
@@ -101951,6 +101601,7 @@
   Laura L. Carlson,
   Laura Wisewell,
   Laurens Holst,
+  Lawrence Forooghian,
   Lee Kowalkowski,
   Leif Halvard Silli,
   Lenny Domnitser,

Modified: source
===================================================================
--- source	2013-03-09 02:02:30 UTC (rev 7747)
+++ source	2013-03-11 23:43:35 UTC (rev 7748)
@@ -2694,11 +2694,9 @@
      &lt;li&gt;&lt;dfn&gt;WebVTT file using chapter title text&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn&gt;WebVTT file using only nested cues&lt;/dfn&gt;
      &lt;li&gt;&lt;dfn&gt;WebVTT parser&lt;/dfn&gt;
-     &lt;li&gt;&lt;dfn&gt;WebVTT cue settings&lt;/dfn&gt; and how to &lt;dfn&gt;parse the WebVTT settings&lt;/dfn&gt;
      &lt;li&gt;The &lt;dfn&gt;rules for updating the display of WebVTT text tracks&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn&gt;WebVTT cue text DOM construction rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn&gt;WebVTT cue text rendering rules&lt;/dfn&gt;
-     &lt;li&gt;The &lt;dfn&gt;WebVTT cue text parsing rules&lt;/dfn&gt;
+     &lt;li&gt;The &lt;dfn&gt;rules for interpreting WebVTT cue text&lt;/dfn&gt;
+     &lt;li&gt;The WebVTT &lt;dfn&gt;text track cue writing direction&lt;/dfn&gt;
     &lt;/ul&gt;
 
    &lt;/dd&gt;
@@ -27578,6 +27576,7 @@
   &lt;p&gt;Any audio associated with the &lt;span&gt;media resource&lt;/span&gt; must, if played, be played
   synchronized with the &lt;span&gt;current playback position&lt;/span&gt;, at the element's &lt;span&gt;effective
   media volume&lt;/span&gt;.&lt;/p&gt;
+&lt;!--CLEANUP--&gt;
 
   &lt;p&gt;In addition to the above, the user agent may provide messages to
   the user (such as &quot;buffering&quot;, &quot;no video loaded&quot;, &quot;error&quot;, or more
@@ -32992,153 +32991,31 @@
     end of the range to which the cue applies is reached.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue writing direction&quot;&gt;A writing direction&lt;/dfn&gt;
+   &lt;dt&gt;Some additional format-specific data&lt;/dt&gt;
    &lt;dd&gt;
-    &lt;p&gt;A writing direction, either &lt;dfn title=&quot;text track cue horizontal writing
-    direction&quot;&gt;horizontal&lt;/dfn&gt; (a line extends horizontally and is positioned vertically, with
-    consecutive lines displayed below each other), &lt;dfn title=&quot;text track cue vertical growing left
-    writing direction&quot;&gt;vertical growing left&lt;/dfn&gt; (a line extends vertically and is positioned
-    horizontally, with consecutive lines displayed to the left of each other&lt;!-- used for east
-    asian--&gt;), or &lt;dfn title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical
-    growing right&lt;/dfn&gt; (a line extends vertically and is positioned horizontally, with consecutive
-    lines displayed to the right of each other&lt;!-- used for mongolian --&gt;).&lt;/p&gt;
-
-    &lt;p&gt;If the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt; is &lt;span
-    title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;, then &lt;span title=&quot;text
-    track cue line position&quot;&gt;line position&lt;/span&gt; percentages are relative to the height of the
-    video, and &lt;span title=&quot;text track cue text position&quot;&gt;text position&lt;/span&gt; and &lt;span title=&quot;text
-    track cue size&quot;&gt;size&lt;/span&gt; percentages are relative to the width of the video.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, &lt;span title=&quot;text track cue line position&quot;&gt;line position&lt;/span&gt; percentages are
-    relative to the width of the video, and &lt;span title=&quot;text track cue text position&quot;&gt;text
-    position&lt;/span&gt; and &lt;span title=&quot;text track cue size&quot;&gt;size&lt;/span&gt; percentages are relative to
-    the height of the video.&lt;/p&gt;
+    &lt;p&gt;Additional fields, as needed for the format. For example, WebVTT has a &lt;span&gt;text track cue
+    writing direction&lt;/span&gt; and so forth. &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue snap-to-lines flag&quot;&gt;A snap-to-lines flag&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;A boolean indicating whether the &lt;span title=&quot;text track cue line position&quot;&gt;line's
-    position&lt;/span&gt; is a line position (positioned to a multiple of the line dimensions of the first
-    line of the cue), or whether it is a percentage of the dimension of the video.&lt;/p&gt;
-
-    &lt;p&gt;Cues whose &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set will be placed within the
-    title-safe area on user agents that use overscan. Cues with the flag unset will be positioned as
-    requested (modulo overlap avoidance if multiple cues are in the same place).&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue line position&quot;&gt;A line position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Either a number giving the position of the lines of the cue, to be interpreted as defined by
-    the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt; and &lt;span
-    title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt; of the cue, or the special
-    value &lt;dfn title=&quot;text track cue automatic line position&quot;&gt;auto&lt;/dfn&gt;, which means the position
-    is to depend on the other active tracks.&lt;/p&gt;
-
-    &lt;p&gt;A &lt;span&gt;text track cue&lt;/span&gt; has a &lt;dfn&gt;text track cue computed line position&lt;/dfn&gt; whose
-    value is that returned by the following algorithm, which is defined in terms of the other
-    aspects of the cue:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue line position&lt;/span&gt; is numeric, the &lt;span&gt;text track cue
-     snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; is not set, and the &lt;span&gt;text
-     track cue line position&lt;/span&gt; is negative or greater than 100, then return 100 and abort these
-     steps.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue line position&lt;/span&gt; is numeric, return the value of the
-     &lt;span&gt;text track cue line position&lt;/span&gt; and abort these steps. (Either the &lt;span&gt;text track
-     cue snap-to-lines flag&lt;/span&gt; is set, so any value, not just those in the range 0..100, is
-     valid, or the value is in the range 0..100 and is thus valid regardless of the value of that
-     flag.)&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt;
-     is not set, return the value 100 and abort these steps. (The &lt;span&gt;text track cue line
-     position&lt;/span&gt; is the special value &lt;span title=&quot;text track cue automatic line
-     position&quot;&gt;auto&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be the &lt;span&gt;text track cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is not in a &lt;span title=&quot;text track list of cues&quot;&gt;list of
-     cues&lt;/span&gt; of a &lt;span&gt;text track&lt;/span&gt;, or if that &lt;span&gt;text track&lt;/span&gt; is not in the
-     &lt;span&gt;list of text tracks&lt;/span&gt; of a &lt;span&gt;media element&lt;/span&gt;, return &amp;#x2212;1 and abort
-     these steps.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; be the &lt;span&gt;text track&lt;/span&gt; whose &lt;span title=&quot;text
-     track list of cues&quot;&gt;list of cues&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the number of &lt;span title=&quot;text track&quot;&gt;text tracks&lt;/span&gt;
-     whose &lt;span&gt;text track mode&lt;/span&gt; is &lt;span title=&quot;text track showing&quot;&gt;showing&lt;/span&gt; and that
-     are in the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;list of text tracks&lt;/span&gt; before &lt;var
-     title=&quot;&quot;&gt;track&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; by one.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue text position&quot;&gt;A text position&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the position of the text of the cue within each line, to be interpreted as a
-    percentage of the video, as defined by the &lt;span title=&quot;text track cue writing
-    direction&quot;&gt;writing direction&lt;/span&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue size&quot;&gt;A size&lt;/dfn&gt;
-   &lt;dd&gt;
-    &lt;p&gt;A number giving the size of the box within which the text of each line of the cue is to be
-    aligned, to be interpreted as a percentage of the video, as defined by the &lt;span title=&quot;text
-    track cue writing direction&quot;&gt;writing direction&lt;/span&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn title=&quot;text track cue alignment&quot;&gt;An alignment&lt;/dfn&gt;
-   &lt;dd&gt;
-
-    &lt;p&gt;An alignment for the text of each line of the cue, one of:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its start side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned centered between its start and end sides.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned towards its end side.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the left.&lt;/dd&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/dfn&gt;&lt;/dt&gt;
-     &lt;dd&gt;The text is aligned to the right.&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-    &lt;p&gt;Which sides are the start and end sides depends on the Unicode bidirectional algorithm and
-    the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt;. &lt;a
-    href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;dfn title=&quot;text track cue text&quot;&gt;The text of the cue&lt;/dfn&gt;
    &lt;dd&gt;
-    &lt;p&gt;The raw text of the cue, and rules for its interpretation,
-    allowing the text to be rendered and converted to a DOM fragment.&lt;/p&gt;
+    &lt;p&gt;The raw text of the cue, and &lt;dfn&gt;rules for rendering the cue in isolation&lt;/dfn&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
   &lt;/dl&gt;
 
-  &lt;p&gt;Each &lt;span&gt;text track cue&lt;/span&gt; has a corresponding &lt;code&gt;TextTrackCue&lt;/code&gt; object. A
-  &lt;span&gt;text track cue&lt;/span&gt;'s in-memory representation can be dynamically changed through this
-  &lt;code&gt;TextTrackCue&lt;/code&gt; API.&lt;/p&gt;
+  &lt;p&gt;Each &lt;span&gt;text track cue&lt;/span&gt; has a corresponding &lt;code&gt;TextTrackCue&lt;/code&gt; object (or more
+  specifically, an object that inherits from &lt;code&gt;TextTrackCue&lt;/code&gt; &mdash; for example, WebVTT
+  cues use the &lt;code&gt;WebVTTCue&lt;/code&gt; interface). A &lt;span&gt;text track cue&lt;/span&gt;'s in-memory
+  representation can be dynamically changed through this &lt;code&gt;TextTrackCue&lt;/code&gt; API. &lt;a
+  href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;A &lt;span&gt;text track cue&lt;/span&gt; is associated with &lt;span&gt;rules for updating the text track
+  rendering&lt;/span&gt;, as defined by the specification for the specific kind of &lt;span&gt;text track
+  cue&lt;/span&gt;. These rules are used specifically when the object representing the cue is added to a
+  &lt;code&gt;TextTrack&lt;/code&gt; object using the &lt;code title=&quot;dom-TextTrack-addCue&quot;&gt;addCue()&lt;/code&gt;
+  method.&lt;/p&gt;
+
   &lt;p&gt;In addition, each &lt;span&gt;text track cue&lt;/span&gt; has two pieces of dynamic information:&lt;/p&gt;
 
   &lt;dl&gt;
@@ -33174,16 +33051,6 @@
 
   &lt;/dl&gt;
 
-  &lt;p&gt;When a &lt;span&gt;text track cue&lt;/span&gt; whose &lt;span title=&quot;text track cue active flag&quot;&gt;active
-  flag&lt;/span&gt; is set has its &lt;span title=&quot;text track cue writing direction&quot;&gt;writing
-  direction&lt;/span&gt;, &lt;span title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt;, &lt;span
-  title=&quot;text track cue line position&quot;&gt;line position&lt;/span&gt;, &lt;span title=&quot;text track cue text
-  position&quot;&gt;text position&lt;/span&gt;, &lt;span title=&quot;text track cue size&quot;&gt;size&lt;/span&gt;, &lt;span title=&quot;text
-  track cue alignment&quot;&gt;alignment&lt;/span&gt;, or &lt;span title=&quot;text track cue text&quot;&gt;text&lt;/span&gt; change
-  value, then the user agent must empty the &lt;span&gt;text track cue display state&lt;/span&gt;, and then
-  immediately run the &lt;span&gt;text track&lt;/span&gt;'s &lt;span&gt;rules for updating the display of WebVTT text
-  tracks&lt;/span&gt;.&lt;/p&gt;
-
   &lt;p&gt;The &lt;span title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt; of a &lt;span&gt;media element&lt;/span&gt;'s &lt;span
   title=&quot;text track&quot;&gt;text tracks&lt;/span&gt; are ordered relative to each other in the &lt;dfn&gt;text track
   cue order&lt;/dfn&gt;, which is determined as follows: first group the &lt;span title=&quot;text track
@@ -33732,30 +33599,6 @@
     &lt;p&gt;Should be set to false.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;The &lt;span&gt;text track cue writing direction&lt;/span&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;
-    if the concept of writing direction doesn't really apply (e.g. the cue consists of a bitmap
-    image).&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Should be set to false unless the format uses a rendering and positioning model for cues that
-    is largely consistent with the &lt;span&gt;WebVTT cue text rendering rules&lt;/span&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;The &lt;span&gt;text track cue line position&lt;/span&gt;
-   &lt;dt&gt;The &lt;span&gt;text track cue text position&lt;/span&gt;
-   &lt;dt&gt;The &lt;span&gt;text track cue size&lt;/span&gt;
-   &lt;dt&gt;The &lt;span&gt;text track cue alignment&lt;/span&gt;
-   &lt;dd&gt;
-    &lt;p&gt;If the format uses a rendering and positioning model for cues that can be largely simulated
-    using the &lt;span&gt;WebVTT cue text rendering rules&lt;/span&gt;, then these should be set to the values
-    that would give the same effect for &lt;span&gt;WebVTT&lt;/span&gt; cues. Otherwise, they should be set to
-    zero.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
   &lt;/div&gt;
@@ -33966,6 +33809,7 @@
 
    &lt;li&gt;
 
+&lt;!--CLEANUP--&gt;
     &lt;p&gt;Create a new &lt;span&gt;text track&lt;/span&gt; corresponding to the new
     object, and set its &lt;span&gt;text track kind&lt;/span&gt; to &lt;var
     title=&quot;&quot;&gt;kind&lt;/var&gt;, its &lt;span&gt;text track label&lt;/span&gt; to &lt;var
@@ -33974,13 +33818,12 @@
     state&lt;/span&gt; to the &lt;span&gt;text track loaded&lt;/span&gt; state, its
     &lt;span&gt;text track mode&lt;/span&gt; to the &lt;span&gt;text track hidden&lt;/span&gt;
     mode, and its &lt;span&gt;text track list of cues&lt;/span&gt; to an empty
-    list.
-    Associate the &lt;span&gt;text track list of cues&lt;/span&gt; with the
-    &lt;span&gt;rules for updating the display of WebVTT text tracks&lt;/span&gt;
-    as its &lt;span&gt;rules for updating the text track rendering&lt;/span&gt;.
-    &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;
-    &lt;/p&gt;
+    list.&lt;/p&gt;
 
+    &lt;p&gt;Initially, the &lt;span&gt;text track list of cues&lt;/span&gt; is not associated with any &lt;span&gt;rules
+    for updating the text track rendering&lt;/span&gt;. When a &lt;span&gt;text track cue&lt;/span&gt; is added to it,
+    the &lt;span&gt;text track list of cues&lt;/span&gt; has its rules permanently set accordingly.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li&gt;
@@ -34122,6 +33965,16 @@
 
   &lt;ol&gt;
 
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track list of cues&lt;/span&gt; does not yet have any associated &lt;span&gt;rules
+   for updating the text track rendering&lt;/span&gt;, then associate the &lt;span&gt;text track list of
+   cues&lt;/span&gt; with the &lt;span&gt;rules for updating the text track rendering&lt;/span&gt; appropriate to &lt;var
+   title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;span&gt;text track list of cues&lt;/span&gt;' associated &lt;span&gt;rules for updating the text
+   track rendering&lt;/span&gt; are not the same &lt;span&gt;rules for updating the text track rendering&lt;/span&gt;
+   as appropriate for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;, then throw an &lt;code&gt;InvalidStateError&lt;/code&gt;
+   exception and abort these steps.&lt;/p&gt;
+
    &lt;li&gt;&lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in a &lt;span&gt;text track list of cues&lt;/span&gt;, then
    remove &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; from that &lt;span&gt;text track list of cues&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
@@ -34244,25 +34097,14 @@
 
   &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;TextTrackCue&lt;/dfn&gt; : &lt;span&gt;EventTarget&lt;/span&gt; {
   readonly attribute &lt;span&gt;TextTrack&lt;/span&gt;? &lt;span title=&quot;dom-TextTrackCue-track&quot;&gt;track&lt;/span&gt;;
-           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-TextTrackCue-onenter&quot;&gt;onenter&lt;/span&gt;;
-           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-TextTrackCue-onexit&quot;&gt;onexit&lt;/span&gt;;
-};
 
-enum &lt;dfn&gt;AutoKeyword&lt;/dfn&gt; { &quot;auto&quot; };
-[&lt;span title=&quot;dom-TextTrackCue&quot;&gt;Constructor&lt;/span&gt;(double startTime, double endTime, DOMString text)]
-interface &lt;dfn&gt;WebVTTCue&lt;/dfn&gt; : &lt;span&gt;TextTrackCue&lt;/span&gt; {
            attribute DOMString &lt;span title=&quot;dom-TextTrackCue-id&quot;&gt;id&lt;/span&gt;;
            attribute double &lt;span title=&quot;dom-TextTrackCue-startTime&quot;&gt;startTime&lt;/span&gt;;
            attribute double &lt;span title=&quot;dom-TextTrackCue-endTime&quot;&gt;endTime&lt;/span&gt;;
            attribute boolean &lt;span title=&quot;dom-TextTrackCue-pauseOnExit&quot;&gt;pauseOnExit&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-vertical&quot;&gt;vertical&lt;/span&gt;;
-           attribute boolean &lt;span title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;snapToLines&lt;/span&gt;;
-           attribute (long or &lt;span&gt;AutoKeyword&lt;/span&gt;) &lt;span title=&quot;dom-TextTrackCue-line&quot;&gt;line&lt;/span&gt;;
-           attribute long &lt;span title=&quot;dom-TextTrackCue-position&quot;&gt;position&lt;/span&gt;;
-           attribute long &lt;span title=&quot;dom-TextTrackCue-size&quot;&gt;size&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-text&quot;&gt;text&lt;/span&gt;;
-  &lt;span&gt;DocumentFragment&lt;/span&gt; &lt;span title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;getCueAsHTML&lt;/span&gt;();
+
+           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-TextTrackCue-onenter&quot;&gt;onenter&lt;/span&gt;;
+           attribute &lt;span&gt;EventHandler&lt;/span&gt; &lt;span title=&quot;handler-TextTrackCue-onexit&quot;&gt;onexit&lt;/span&gt;;
 };&lt;/pre&gt;
 
   &lt;dl class=&quot;domintro&quot;&gt;
@@ -34274,15 +34116,6 @@
     otherwise.&lt;/p&gt;
    &lt;/dd&gt;
 
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; = new &lt;code title=&quot;dom-TextTrackCue&quot;&gt;WebVTTCue&lt;/code&gt;( &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; )&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a new &lt;code&gt;TextTrackCue&lt;/code&gt; object, for use with the &lt;code title=&quot;dom-TextTrack-addCue&quot;&gt;addCue()&lt;/code&gt; method.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt; argument sets the &lt;span&gt;text track cue start time&lt;/span&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt; argument sets the &lt;span&gt;text track cue end time&lt;/span&gt;.&lt;/p&gt;
-    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument sets the &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
-   &lt;/dd&gt;
-
    &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-id&quot;&gt;id&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
    &lt;dd&gt;
     &lt;p&gt;Returns the &lt;span&gt;text track cue identifier&lt;/span&gt;.&lt;/p&gt;
@@ -34307,139 +34140,11 @@
     &lt;p&gt;Can be set.&lt;/p&gt;
    &lt;/dd&gt;
 
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-vertical&quot;&gt;vertical&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;span&gt;text track cue writing direction&lt;/span&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=&quot;switch&quot;&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The empty string.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-    &lt;/dl&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;snapToLines&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns true if the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set, false otherwise.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-line&quot;&gt;line&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;span&gt;text track cue line position&lt;/span&gt;. In the
-    case of the value being &lt;span title=&quot;text track cue automatic line
-    position&quot;&gt;auto&lt;/span&gt;, the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot; is
-    returned.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-position&quot;&gt;position&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-size&quot;&gt;size&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;span&gt;text track cue size&lt;/span&gt;.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns a string representing the &lt;span&gt;text track cue alignment&lt;/span&gt;, as follows:&lt;/p&gt;
-    &lt;dl class=&quot;switch&quot;&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue start alignment&quot;&gt;start alignment&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle alignment&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue end alignment&quot;&gt;end alignment&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue left alignment&quot;&gt;left alignment&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-     &lt;dt&gt;If it is &lt;span title=&quot;text track cue right alignment&quot;&gt;right alignment&lt;/span&gt;&lt;/dt&gt;
-     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
-    &lt;/dl&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-text&quot;&gt;text&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;span&gt;text track cue text&lt;/span&gt; in raw unparsed form.&lt;/p&gt;
-    &lt;p&gt;Can be set.&lt;/p&gt;
-   &lt;/dd&gt;
-
-   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;fragment&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;getCueAsHTML&lt;/span&gt;()&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Returns the &lt;span&gt;text track cue text&lt;/span&gt; as a &lt;code&gt;DocumentFragment&lt;/code&gt; of &lt;span&gt;HTML elements&lt;/span&gt; and other DOM nodes.&lt;/p&gt;
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue&quot;&gt;&lt;code&gt;TextTrackCue(&lt;var
-  title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked, must
-  run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Create a new &lt;span&gt;text track cue&lt;/span&gt;. Let &lt;var
-   title=&quot;&quot;&gt;cue&lt;/var&gt; be that &lt;span&gt;text track cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue start
-   time&lt;/span&gt; be the value of the &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue end
-   time&lt;/span&gt; be the value of the &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;
-   argument, interpreted as a time in seconds.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   text&lt;/span&gt; be the value of the &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument,
-   and let the rules for its interpretation be the &lt;span&gt;WebVTT cue
-   text parsing rules&lt;/span&gt;, the &lt;span&gt;WebVTT cue text rendering
-   rules&lt;/span&gt;, and the &lt;span&gt;WebVTT cue text DOM construction
-   rules&lt;/span&gt;. &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;!-- default settings --&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   identifier&lt;/span&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   pause-on-exit flag&lt;/span&gt; be false.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   writing direction&lt;/span&gt; be &lt;span title=&quot;text track cue
-   horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   snap-to-lines flag&lt;/span&gt; be true.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue line
-   position&lt;/span&gt; be &lt;span title=&quot;text track cue automatic line
-   position&quot;&gt;auto&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   text position&lt;/span&gt; be 50.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   size&lt;/span&gt; be 100.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-   alignment&lt;/span&gt; be &lt;span title=&quot;text track cue middle
-   alignment&quot;&gt;middle alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;TextTrackCue&lt;/code&gt; object representing
-   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-track&quot;&gt;&lt;code&gt;track&lt;/code&gt;&lt;/dfn&gt;
   attribute, on getting, must return the &lt;code&gt;TextTrack&lt;/code&gt; object
   of the &lt;span&gt;text track&lt;/span&gt; in whose &lt;span title=&quot;text track list
@@ -34476,96 +34181,12 @@
   flag&lt;/span&gt; must be set if the new value is true, and must be unset
   otherwise.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn
-  title=&quot;dom-TextTrackCue-vertical&quot;&gt;&lt;code&gt;vertical&lt;/code&gt;&lt;/dfn&gt;
-  attribute, on getting, must return the string from the second cell
-  of the row in the table below whose first cell is the &lt;span&gt;text
-  track cue writing direction&lt;/span&gt; of the &lt;span&gt;text track
-  cue&lt;/span&gt; that the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt; &lt;th&gt; &lt;span&gt;Text track cue writing direction&lt;/span&gt;
-         &lt;th&gt; &lt;code title=&quot;dom-TextTrackCue-direction&quot;&gt;direction&lt;/code&gt; value
-   &lt;tbody&gt;
-    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;Horizontal&lt;/span&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;&lt;/code&gt;&quot; (the empty string)
-    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;Vertical growing left&lt;/span&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;
-    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;Vertical growing right&lt;/span&gt;
-         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;
-  &lt;/table&gt;
-
-  &lt;p&gt;On setting, the &lt;span&gt;text track cue writing direction&lt;/span&gt; must be set to the value given in
-  the first cell of the row in the table above whose second cell is a &lt;span&gt;case-sensitive&lt;/span&gt;
-  match for the new value, if any. If none of the values match, then the user agent must instead
-  throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;&lt;code&gt;snapToLines&lt;/code&gt;&lt;/dfn&gt; attribute, on
-  getting, must return true if the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text
-  track cue&lt;/span&gt; that the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents is set; or false otherwise.
-  On setting, the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; must be set if the new value is
-  true, and must be unset otherwise.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-line&quot;&gt;&lt;code&gt;line&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;span&gt;text track cue line position&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
-  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. The special value &lt;span title=&quot;text track cue
-  automatic line position&quot;&gt;auto&lt;/span&gt; must be represented as the string &quot;&lt;code
-  title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;. On setting, the &lt;span&gt;text track cue line position&lt;/span&gt; must be set to
-  the new value; if the new value is the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;, then it must be
-  interpreted as the special value &lt;span title=&quot;text track cue automatic line
-  position&quot;&gt;auto&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-position&quot;&gt;&lt;code&gt;position&lt;/code&gt;&lt;/dfn&gt; attribute, on getting,
-  must return the &lt;span&gt;text track cue text position&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that
-  the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, if the new value is negative or
-  greater than 100, then an &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise, the
-  &lt;span&gt;text track cue text position&lt;/span&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-size&quot;&gt;&lt;code&gt;size&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the &lt;span&gt;text track cue size&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
-  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, if the new value is negative or greater
-  than 100, then an &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise, the &lt;span&gt;text
-  track cue size&lt;/span&gt; must be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-align&quot;&gt;&lt;code&gt;align&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the string from the second cell of the row in the table below whose first cell is the
-  &lt;span&gt;text track cue alignment&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
-  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents:&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt; &lt;th&gt;&lt;span&gt;Text track cue alignment&lt;/span&gt; &lt;th&gt; &lt;code title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/code&gt; value
-   &lt;tbody&gt;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;
-  &lt;/table&gt;
-
-  &lt;p&gt;On setting, the &lt;span&gt;text track cue alignment&lt;/span&gt; must be set to the value given in the
-  first cell of the row in the table above whose second cell is a &lt;span&gt;case-sensitive&lt;/span&gt; match
-  for the new value, if any. If none of the values match, then the user agent must instead throw a
-  &lt;code&gt;SyntaxError&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-text&quot;&gt;&lt;code&gt;text&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
-  return the raw &lt;span&gt;text track cue text&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
-  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, the &lt;span&gt;text track cue text&lt;/span&gt; must
-  be set to the new value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;&lt;code&gt;getCueAsHTML()&lt;/code&gt;&lt;/dfn&gt; method must
-  convert the &lt;span&gt;text track cue text&lt;/span&gt; to a &lt;code&gt;DocumentFragment&lt;/code&gt; for the
-  &lt;span&gt;script's document&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt;, using the appropriate rules for
-  doing so. For example, for &lt;span&gt;WebVTT&lt;/span&gt;, those rules are the &lt;span&gt;WebVTT cue text parsing
-  rules&lt;/span&gt; and the &lt;span&gt;WebVTT cue text DOM construction rules&lt;/span&gt;. &lt;a
-  href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
-
   &lt;/div&gt;
 
 
   &lt;h6&gt;Text tracks describing chapters&lt;/h6&gt;
 
+&lt;!--CLEANUP--&gt;
   &lt;p&gt;Chapters are segments of a &lt;span&gt;media resource&lt;/span&gt; with a
   given title. Chapters can be nested, in the same way that sections
   in a document outline can have subsections.&lt;/p&gt;
@@ -34636,9 +34257,14 @@
    cue start time&lt;/span&gt;, whose end time is &lt;var title=&quot;&quot;&gt;current
    cue&lt;/var&gt;'s &lt;span&gt;text track cue end time&lt;/span&gt;, whose title is
    &lt;var title=&quot;&quot;&gt;current cue&lt;/var&gt;'s &lt;span&gt;text track cue text&lt;/span&gt;
-   interpreted according to its rules for interpretation, and whose
-   list of nested chapters is empty.&lt;/p&gt;&lt;/li&gt;
+   interpreted according to its &lt;span&gt;rules for rendering the cue in isolation&lt;/span&gt;, and whose
+   list of nested chapters is empty.&lt;/p&gt;
 
+    &lt;p class=&quot;note&quot;&gt;For WebVTT, the &lt;span&gt;rules for rendering the cue in isolation&lt;/span&gt; are the
+    &lt;span&gt;rules for interpreting WebVTT cue text&lt;/span&gt;. &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/li&gt;
+
    &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;new chapter&lt;/var&gt; to &lt;var
    title=&quot;&quot;&gt;current chapter&lt;/var&gt;'s list of nested chapters, and let
    &lt;var title=&quot;&quot;&gt;current chapter&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;new
@@ -34751,8 +34377,7 @@
   &lt;/div&gt;
 
 &lt;!--END complete--&gt;
-  &lt;h5&gt;WebVTT&lt;/h5&gt;
-&lt;!--FIXUP dev-html +4--&gt;
+
 &lt;!--START webvtt--&gt;
 
   &lt;!-- v2 feature requests:
@@ -34775,7 +34400,7 @@
 
   &lt;h2&gt;Introduction&lt;/h2&gt;
 
-  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn&gt;WebVTT&lt;/dfn&gt; format (Web Video Text Tracks) is a
   format intended for marking up external text track resources.&lt;/p&gt;
@@ -34828,7 +34453,7 @@
 
   &lt;h3&gt;Cues with multiple lines&lt;/h3&gt;
 
-  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;Line breaks in cues are honored. User agents will also insert extra line breaks if necessary to
   fit the cue in the cue's width. In general, therefore, authors are encouraged to write cues all on
@@ -34896,7 +34521,7 @@
 
   &lt;h3&gt;Comments&lt;/h3&gt;
 
-  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;Comments can be included in WebVTT files.&lt;/p&gt;
 
@@ -34951,7 +34576,7 @@
 
   &lt;h3&gt;Other features&lt;/h3&gt;
 
-  &lt;!--END dev-html--&gt;&lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;&lt;!--START dev-html--&gt;
+  &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;WebVTT also supports some less-often used features.&lt;/p&gt;
 
@@ -35008,7 +34633,6 @@
   &lt;/div&gt;
 
 
-&lt;!--END dev-html--&gt;
   &lt;h2&gt;Conformance&lt;/h2&gt;
 
   &lt;p class=&quot;XXX&quot;&gt;This section remains to be written. In the meantime, please see the HTML standard. &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;&lt;/p&gt;
@@ -35042,32 +34666,180 @@
    &lt;li&gt;&lt;dfn&gt;Text track cue identifier&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue start time&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue end time&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue start alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue middle alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue end alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue left alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue right alignment&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue line position&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue automatic line position&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue computed line position&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue pause-on-exit flag&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue size&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue snap-to-lines flag&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue text position&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue writing direction&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue horizontal writing direction&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue vertical growing right writing direction&lt;/dfn&gt;
-   &lt;li&gt;&lt;dfn&gt;Text track cue vertical growing left writing direction&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue text&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue active flag&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Text track cue display state&lt;/dfn&gt;
    &lt;li&gt;&lt;dfn&gt;Rules for updating the text track rendering&lt;/dfn&gt;
+   &lt;li&gt;&lt;dfn&gt;Rules for rendering the cue in isolation&lt;/dfn&gt;
+   &lt;li&gt;&lt;dfn&gt;&lt;code&gt;TextTrackCue&lt;/code&gt;&lt;/dfn&gt; interface
   &lt;/ul&gt;
 
+
+  &lt;h2&gt;Data model&lt;/h2&gt;
+
+  &lt;p&gt;WebVTT cues are HTML &lt;span title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt; that additionally
+  consist of the following: &lt;a href=&quot;#refsHTML&quot;&gt;[HTML]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;dl&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue writing direction&quot;&gt;A writing direction&lt;/dfn&gt;
+   &lt;dd&gt;
+    &lt;p&gt;A writing direction, either &lt;dfn title=&quot;text track cue horizontal writing
+    direction&quot;&gt;horizontal&lt;/dfn&gt; (a line extends horizontally and is positioned vertically, with
+    consecutive lines displayed below each other), &lt;dfn title=&quot;text track cue vertical growing left
+    writing direction&quot;&gt;vertical growing left&lt;/dfn&gt; (a line extends vertically and is positioned
+    horizontally, with consecutive lines displayed to the left of each other&lt;!-- used for east
+    asian--&gt;), or &lt;dfn title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical
+    growing right&lt;/dfn&gt; (a line extends vertically and is positioned horizontally, with consecutive
+    lines displayed to the right of each other&lt;!-- used for mongolian --&gt;).&lt;/p&gt;
+
+    &lt;p&gt;If the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt; is &lt;span
+    title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;, then &lt;span title=&quot;text
+    track cue line position&quot;&gt;line position&lt;/span&gt; percentages are relative to the height of the
+    video, and &lt;span title=&quot;text track cue text position&quot;&gt;text position&lt;/span&gt; and &lt;span title=&quot;text
+    track cue size&quot;&gt;size&lt;/span&gt; percentages are relative to the width of the video.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, &lt;span title=&quot;text track cue line position&quot;&gt;line position&lt;/span&gt; percentages are
+    relative to the width of the video, and &lt;span title=&quot;text track cue text position&quot;&gt;text
+    position&lt;/span&gt; and &lt;span title=&quot;text track cue size&quot;&gt;size&lt;/span&gt; percentages are relative to
+    the height of the video.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue snap-to-lines flag&quot;&gt;A snap-to-lines flag&lt;/dfn&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;A boolean indicating whether the &lt;span title=&quot;text track cue line position&quot;&gt;line's
+    position&lt;/span&gt; is a line position (positioned to a multiple of the line dimensions of the first
+    line of the cue), or whether it is a percentage of the dimension of the video.&lt;/p&gt;
+
+    &lt;p&gt;Cues whose &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set will be placed within the
+    title-safe area on user agents that use overscan. Cues with the flag unset will be positioned as
+    requested (modulo overlap avoidance if multiple cues are in the same place).&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue line position&quot;&gt;A line position&lt;/dfn&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Either a number giving the position of the lines of the cue, to be interpreted as defined by
+    the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt; and &lt;span
+    title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt; of the cue, or the special
+    value &lt;dfn title=&quot;text track cue automatic line position&quot;&gt;auto&lt;/dfn&gt;, which means the position
+    is to depend on the other active tracks.&lt;/p&gt;
+
+    &lt;p&gt;A &lt;span&gt;text track cue&lt;/span&gt; has a &lt;dfn&gt;text track cue computed line position&lt;/dfn&gt; whose
+    value is that returned by the following algorithm, which is defined in terms of the other
+    aspects of the cue:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue line position&lt;/span&gt; is numeric, the &lt;span&gt;text track cue
+     snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; is not set, and the &lt;span&gt;text
+     track cue line position&lt;/span&gt; is negative or greater than 100, then return 100 and abort these
+     steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue line position&lt;/span&gt; is numeric, return the value of the
+     &lt;span&gt;text track cue line position&lt;/span&gt; and abort these steps. (Either the &lt;span&gt;text track
+     cue snap-to-lines flag&lt;/span&gt; is set, so any value, not just those in the range 0..100, is
+     valid, or the value is in the range 0..100 and is thus valid regardless of the value of that
+     flag.)&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt;
+     is not set, return the value 100 and abort these steps. (The &lt;span&gt;text track cue line
+     position&lt;/span&gt; is the special value &lt;span title=&quot;text track cue automatic line
+     position&quot;&gt;auto&lt;/span&gt;.)&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be the &lt;span&gt;text track cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is not in a &lt;span title=&quot;text track list of cues&quot;&gt;list of
+     cues&lt;/span&gt; of a &lt;span&gt;text track&lt;/span&gt;, or if that &lt;span&gt;text track&lt;/span&gt; is not in the
+     &lt;span&gt;list of text tracks&lt;/span&gt; of a &lt;span&gt;media element&lt;/span&gt;, return &amp;#x2212;1 and abort
+     these steps.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; be the &lt;span&gt;text track&lt;/span&gt; whose &lt;span title=&quot;text
+     track list of cues&quot;&gt;list of cues&lt;/span&gt; the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; is in.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; be the number of &lt;span title=&quot;text track&quot;&gt;text tracks&lt;/span&gt;
+     whose &lt;span&gt;text track mode&lt;/span&gt; is &lt;span title=&quot;text track showing&quot;&gt;showing&lt;/span&gt; and that
+     are in the &lt;span&gt;media element&lt;/span&gt;'s &lt;span&gt;list of text tracks&lt;/span&gt; before &lt;var
+     title=&quot;&quot;&gt;track&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Increment &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; by one.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue text position&quot;&gt;A text position&lt;/dfn&gt;
+   &lt;dd&gt;
+    &lt;p&gt;A number giving the position of the text of the cue within each line, to be interpreted as a
+    percentage of the video, as defined by the &lt;span title=&quot;text track cue writing
+    direction&quot;&gt;writing direction&lt;/span&gt;.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue size&quot;&gt;A size&lt;/dfn&gt;
+   &lt;dd&gt;
+    &lt;p&gt;A number giving the size of the box within which the text of each line of the cue is to be
+    aligned, to be interpreted as a percentage of the video, as defined by the &lt;span title=&quot;text
+    track cue writing direction&quot;&gt;writing direction&lt;/span&gt;.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;dfn title=&quot;text track cue alignment&quot;&gt;An alignment&lt;/dfn&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;An alignment for the text of each line of the cue, one of:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;&lt;dfn title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/dfn&gt;&lt;/dt&gt;
+     &lt;dd&gt;The text is aligned towards its start side.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;dfn title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/dfn&gt;&lt;/dt&gt;
+     &lt;dd&gt;The text is aligned centered between its start and end sides.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;dfn title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/dfn&gt;&lt;/dt&gt;
+     &lt;dd&gt;The text is aligned towards its end side.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;dfn title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/dfn&gt;&lt;/dt&gt;
+     &lt;dd&gt;The text is aligned to the left.&lt;/dd&gt;
+
+     &lt;dt&gt;&lt;dfn title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/dfn&gt;&lt;/dt&gt;
+     &lt;dd&gt;The text is aligned to the right.&lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+    &lt;p&gt;Which sides are the start and end sides depends on the Unicode bidirectional algorithm and
+    the &lt;span title=&quot;text track cue writing direction&quot;&gt;writing direction&lt;/span&gt;. &lt;a
+    href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;p&gt;The associated &lt;span&gt;rules for updating the text track rendering&lt;/span&gt; of WebVTT &lt;span
+  title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt; are the &lt;span&gt;rules for updating the display of
+  WebVTT text tracks&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;When a WebVTT &lt;span&gt;text track cue&lt;/span&gt; whose &lt;span title=&quot;text track cue active flag&quot;&gt;active
+  flag&lt;/span&gt; is set has its &lt;span title=&quot;text track cue writing direction&quot;&gt;writing
+  direction&lt;/span&gt;, &lt;span title=&quot;text track cue snap-to-lines flag&quot;&gt;snap-to-lines flag&lt;/span&gt;, &lt;span
+  title=&quot;text track cue line position&quot;&gt;line position&lt;/span&gt;, &lt;span title=&quot;text track cue text
+  position&quot;&gt;text position&lt;/span&gt;, &lt;span title=&quot;text track cue size&quot;&gt;size&lt;/span&gt;, &lt;span title=&quot;text
+  track cue alignment&quot;&gt;alignment&lt;/span&gt;, or &lt;span title=&quot;text track cue text&quot;&gt;text&lt;/span&gt; change
+  value, then the user agent must empty the &lt;span&gt;text track cue display state&lt;/span&gt;, and then
+  immediately run the &lt;span&gt;text track&lt;/span&gt;'s &lt;span&gt;rules for updating the display of WebVTT text
+  tracks&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h2&gt;The WebVTT file format&lt;/h2&gt;
-&lt;!--START dev-html--&gt;
-&lt;!--FIXUP dev-html -1--&gt;
 
   &lt;h3&gt;Syntax&lt;/h3&gt;
 
@@ -35388,7 +35160,7 @@
   &lt;p class=&quot;note&quot;&gt;A &lt;span&gt;WebVTT vertical text cue setting&lt;/span&gt;
   configures the cue to use vertical text layout rather than
   horizontal text layout. Vertical text layout is sometimes used in
-  Japanese, for example. The default is horiontal layout.&lt;/p&gt;
+  Japanese, for example. The default is horizontal layout.&lt;/p&gt;
 
   &lt;p&gt;A &lt;dfn&gt;WebVTT line position cue setting&lt;/dfn&gt; consists of the
   following components, in the order given:&lt;/p&gt;
@@ -35971,12 +35743,9 @@
 
    &lt;li&gt;&lt;p&gt;Return to the step labeled &lt;i&gt;cue text loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;i&gt;Cue text processing&lt;/i&gt;: Let the &lt;span&gt;text track cue
-   text&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;cue
-   text&lt;/var&gt;, and let the rules for its interpretation be the
-   &lt;span&gt;WebVTT cue text parsing rules&lt;/span&gt;, the &lt;span&gt;WebVTT cue
-   text rendering rules&lt;/span&gt;, and the &lt;span&gt;WebVTT cue text DOM
-   construction rules&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;i&gt;Cue text processing&lt;/i&gt;: Let the &lt;span&gt;text track cue text&lt;/span&gt; of &lt;var
+   title=&quot;&quot;&gt;cue&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;cue text&lt;/var&gt;, and let the &lt;span&gt;rules for rendering the cue
+   in isolation&lt;/span&gt; be the &lt;span&gt;rules for interpreting WebVTT cue text&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Add &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; to the &lt;span&gt;text track list of
    cues&lt;/span&gt; &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -37357,9 +37126,1565 @@
 
   &lt;/div&gt;
 
-&lt;!--FIXUP dev-html -3--&gt;
+
+  &lt;h2&gt;Rendering&lt;/h2&gt;
+
+  &lt;h3&gt;Cues in isolation&lt;/h3&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;rules for interpreting WebVTT cue text&lt;/dfn&gt; (e.g. for use as chapter titles) are as
+  follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; be the &lt;span&gt;list of WebVTT Node Objects&lt;/span&gt; obtained by
+   applying the &lt;span&gt;WebVTT cue text parsing rules&lt;/span&gt; to the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+   &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;... &lt;!-- flatten nodes and return a single string somehow --&gt;
+
+  &lt;/ol&gt;
+
+  &lt;h3&gt;Cues with video&lt;/h3&gt;
+
+  &lt;h4&gt;Processing model&lt;/h4&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;rules for updating the display of WebVTT text
+  tracks&lt;/dfn&gt; render the &lt;span title=&quot;text track&quot;&gt;text
+  tracks&lt;/span&gt; of a &lt;span&gt;media element&lt;/span&gt; (specifically, a
+  &lt;code&gt;video&lt;/code&gt; element), or of another playback mechanism, by
+  applying the steps below. All the &lt;span title=&quot;text track&quot;&gt;text
+  tracks&lt;/span&gt; that use these rules for a given &lt;span&gt;media
+  element&lt;/span&gt;, or other playback mechanism, are rendered together,
+  to avoid overlapping subtitles from multiple tracks.&lt;/p&gt;
+
+  &lt;p&gt;The output of the steps below is a set of CSS boxes that covers
+  the rendering area of the &lt;span&gt;media element&lt;/span&gt; or other
+  playback mechanism, which user agents are expected to render in a
+  manner suiting the user.&lt;/p&gt;
+
+  &lt;p&gt;The rules are as follows:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt; is an &lt;code&gt;audio&lt;/code&gt;
+   element, or is another playback mechanism with no rendering area,
+   abort these steps. There is nothing to render.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;video&lt;/var&gt; be the &lt;span&gt;media
+   element&lt;/span&gt; or other playback mechanism.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be an empty list of
+   absolutely positioned CSS block boxes.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If the user agent is &lt;span title=&quot;expose a user interface to
+   the user&quot;&gt;exposing a user interface&lt;/span&gt; for &lt;var
+   title=&quot;&quot;&gt;video&lt;/var&gt;, add to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; one or more
+   completely transparent positioned CSS block boxes that cover the
+   same region as the user interface.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;If the last time these rules were run, the user agent was
+   not &lt;span title=&quot;expose a user interface to the user&quot;&gt;exposing a
+   user interface&lt;/span&gt; for &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;, but now it is,
+   optionally let &lt;var title=&quot;&quot;&gt;reset&lt;/var&gt; be true. Otherwise, let &lt;var
+   title=&quot;&quot;&gt;reset&lt;/var&gt; be false.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tracks&lt;/var&gt; be the subset of &lt;var
+   title=&quot;&quot;&gt;video&lt;/var&gt;'s &lt;span&gt;list of text tracks&lt;/span&gt; that have
+   as their &lt;span&gt;rules for updating the text track rendering&lt;/span&gt;
+   these &lt;span&gt;rules for updating the display of WebVTT text
+   tracks&lt;/span&gt;, and whose &lt;span&gt;text track mode&lt;/span&gt; is &lt;span
+   title=&quot;text track showing&quot;&gt;showing&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; be an empty list of &lt;span
+   title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For each track &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; in &lt;var
+   title=&quot;&quot;&gt;tracks&lt;/var&gt;, append to &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; all the
+   &lt;span title=&quot;text track cue&quot;&gt;cues&lt;/span&gt; from &lt;var
+   title=&quot;&quot;&gt;track&lt;/var&gt;'s &lt;span title=&quot;text track list of cues&quot;&gt;list
+   of cues&lt;/span&gt; that have their &lt;span&gt;text track cue active
+   flag&lt;/span&gt; set.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reset&lt;/var&gt; is false, then, for each
+   &lt;span&gt;text track cue&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; in &lt;var
+   title=&quot;&quot;&gt;cues&lt;/var&gt;: if &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track
+   cue display state&lt;/span&gt; has a set of CSS boxes, then add those
+   boxes to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, and remove &lt;var
+   title=&quot;&quot;&gt;cue&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;span&gt;text track cue&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;
+    in &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; that has not yet had corresponding CSS
+    boxes added to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, in &lt;span&gt;text track
+    cue order&lt;/span&gt;, run the following substeps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; be the &lt;span&gt;list of WebVTT
+     Node Objects&lt;/span&gt; obtained by applying the &lt;span&gt;WebVTT cue
+     text parsing rules&lt;/span&gt; to the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
+     &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Apply the Unicode Bidirectional Algorithm's Paragraph Level
+      steps to the concatenation of the values of each &lt;span&gt;WebVTT
+      Text Object&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt;, in a pre-order,
+      depth-first traversal, excluding &lt;span title=&quot;WebVTT Ruby Text
+      Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; and their descendants,
+      to determine the &lt;i&gt;paragraph embedding level&lt;/i&gt; of the first
+      Unicode paragraph of the cue. &lt;a href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;p class=&quot;note&quot;&gt;Within a cue, paragraph boundaries are only denoted by Type B characters, such
+      as U+000A LINE FEED (LF), U+0085 NEXT LINE (NEL), and U+2029 PARAGRAPH SEPARATOR. (This means
+      each line of the cue is reordered as if it was a separate paragraph.)&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If the &lt;i&gt;paragraph embedding level&lt;/i&gt; determined in the
+      previous step is even (the &lt;i&gt;paragraph direction&lt;/i&gt; is
+      left-to-right), let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be 'ltr',
+      otherwise, let it be 'rtl'.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is
+     &lt;span title=&quot;text track cue horizontal writing
+     direction&quot;&gt;horizontal&lt;/span&gt;, then let &lt;var
+     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'horizontal-tb'. Otherwise, if the
+     &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
+     title=&quot;text track cue vertical growing left writing
+     direction&quot;&gt;vertical growing left&lt;/span&gt;, then let &lt;var
+     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'vertical-rl'. Otherwise, the
+     &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
+     title=&quot;text track cue vertical growing right writing
+     direction&quot;&gt;vertical growing right&lt;/span&gt;; let &lt;var
+     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'vertical-lr'.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Determine the value of &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; for
+      &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the appropriate rules from the
+      following list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+          and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
+              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
+              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+          and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
+              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
+              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
+              the &lt;span&gt;text track cue text position&lt;/span&gt; is less than or equal to 50&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; multiplied by two.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
+              the &lt;span&gt;text track cue text position&lt;/span&gt; is greater than &lt;!-- or equal to --&gt; 50&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the result of subtracting &lt;span&gt;text track cue text position&lt;/span&gt; from 100 and then multiplying the result by two.&lt;/p&gt;
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue size&lt;/span&gt; is less than &lt;var
+     title=&quot;&quot;&gt;maximum size&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; be
+     &lt;span&gt;text track cue size&lt;/span&gt;. Otherwise, let &lt;var
+     title=&quot;&quot;&gt;size&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is
+     &lt;span title=&quot;text track cue horizontal writing
+     direction&quot;&gt;horizontal&lt;/span&gt;, then let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;
+     be '&lt;var title=&quot;&quot;&gt;size&lt;/var&gt;&amp;#x2009;vw' and &lt;var
+     title=&quot;&quot;&gt;height&lt;/var&gt; be 'auto'. Otherwise, let &lt;var
+     title=&quot;&quot;&gt;width&lt;/var&gt; be 'auto' and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be
+     '&lt;var title=&quot;&quot;&gt;size&lt;/var&gt;&amp;#x2009;vh'. (These are CSS values used
+     by the next section to set CSS properties for the rendering; 'vw'
+     and 'vh' are CSS units.) &lt;a
+     href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Determine the value of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; or &lt;var
+      title=&quot;&quot;&gt;y-position&lt;/var&gt; for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the
+      appropriate rules from the following list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100, minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
+              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
+              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
+              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
+              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
+              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100, minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Determine the value of whichever of &lt;var
+      title=&quot;&quot;&gt;x-position&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is
+      not yet calculated for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the
+      appropriate rules from the following list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be zero.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be zero.&lt;/p&gt;
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
+              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
+       &lt;dd&gt;
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+      &lt;p class=&quot;note&quot;&gt;These are not final positions, they are merely
+      temporary positions used to calculate box dimensions below.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set, then run the appropriate
+      steps from the following list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+
+        &lt;ol&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; be a user-agent-defined horizontal length,
+         expressed as a percentage of the width of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area,
+         which will be used to define a margin at the left and right edges of the video into which
+         this cue will not be placed. In situations with overscan, this margin should be sufficient
+         to place the cue within the title-safe area. In the absence of overscan, this value should
+         be picked for aesthetics (to avoid text being aligned precisely on the left or right edge
+         of the video, which can be ugly).&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; and
+         the sum of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is more than &lt;var
+         title=&quot;&quot;&gt;edge margin&lt;/var&gt;, then increase &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; by &lt;var
+         title=&quot;&quot;&gt;edge margin&lt;/var&gt; and decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by the same
+         amount.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt; be 100 minus &lt;var title=&quot;&quot;&gt;edge
+         margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;right margin
+         edge&lt;/var&gt;, and the sum of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is
+         more than &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt;, then decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by
+         &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
+       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
+       &lt;dd&gt;
+
+        &lt;ol&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; be a user-agent-defined vertical length,
+         expressed as a percentage of the height of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area,
+         which will be used to define a margin at the top and bottom edges of the video into which
+         this cue will not be placed. In situations with overscan, this margin should be sufficient
+         to place the cue within the title-safe area. In the absence of overscan, this value should
+         be picked for aesthetics (to avoid text being aligned precisely on the top or bottom edge
+         of the video, which can be ugly).&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; and
+         the sum of &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is more than &lt;var
+         title=&quot;&quot;&gt;edge margin&lt;/var&gt;, then increase &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; by &lt;var
+         title=&quot;&quot;&gt;edge margin&lt;/var&gt; and decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by the same
+         amount.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;bottom margin edge&lt;/var&gt; be 100 minus &lt;var title=&quot;&quot;&gt;edge
+         margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;bottom margin
+         edge&lt;/var&gt;, and the sum of &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is
+         more than &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt;, then decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by
+         &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;left&lt;/var&gt; be '&lt;var
+     title=&quot;&quot;&gt;x-position&lt;/var&gt;&amp;#x2009;vw' and &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;
+     be '&lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt;&amp;#x2009;vh'. (These again are
+     CSS values used by the next section to set CSS properties for the
+     rendering; 'vw' and 'vh' are CSS units.) &lt;a
+     href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Apply the terms of the CSS specifications to &lt;var
+      title=&quot;&quot;&gt;nodes&lt;/var&gt; within the following constraints, thus
+      obtaining a set of CSS boxes positioned relative to an initial
+      containing block: &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+      &lt;ul&gt;
+
+       &lt;li&gt;&lt;p&gt;The &lt;i&gt;document tree&lt;/i&gt; is the tree of &lt;span
+       title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; rooted at
+       &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;&lt;p&gt;For the purposes of processing by the CSS specification,
+       &lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
+       Objects&lt;/span&gt; are equivalent to elements with the same
+       contents.&lt;/p&gt;&lt;/li&gt;
+
+       &lt;li&gt;For the purposes of processing by the CSS
+       specification, &lt;span title=&quot;WebVTT Text Object&quot;&gt;WebVTT Text
+       Objects&lt;/span&gt; are equivalent to &lt;code&gt;Text&lt;/code&gt; nodes.&lt;/li&gt;
+
+       &lt;li&gt;No style sheets are associated with &lt;var
+       title=&quot;&quot;&gt;nodes&lt;/var&gt;. (The nodes are subsequently restyled
+       using style sheets after their boxes are generated, as
+       described below.)&lt;/li&gt;
+
+       &lt;li&gt;The children of the &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; must be
+       wrapped in an anonymous box whose 'display' property has the
+       value 'inline'. This is the &lt;dfn&gt;WebVTT cue background
+       box&lt;/dfn&gt;.&lt;/li&gt;
+
+       &lt;li&gt;Runs of children of &lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT
+       Ruby Objects&lt;/span&gt; that are not &lt;span title=&quot;WebVTT Ruby Text
+       Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; must be wrapped in
+       anonymous boxes whose 'display' property has the value
+       'ruby-base'. &lt;a href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/li&gt;
+
+       &lt;li&gt;Properties on &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+       Objects&lt;/span&gt; have their values set as defined in the next
+       section. (That section uses some of the variables whose values
+       were calculated earlier in this algorithm.)&lt;/li&gt;
+
+       &lt;li&gt;Text runs must be wrapped according to the CSS
+       line-wrapping rules, with the following additional constraints:
+
+        &lt;ul&gt;
+
+         &lt;li&gt;Regardless of the value of the 'white-space' property,
+         lines must be wrapped at the edge of their containing blocks,
+         even if doing so requires splitting a word where there is no
+         line breaking opportunity. (Thus, normally text wraps as
+         needed, but if there is a particularly long word, it does not
+         overflow as it normally would in CSS, it is instead forcibly
+         wrapped at the box's edge.)&lt;/li&gt;
+
+         &lt;li&gt;Regardless of the value of the 'white-space' property,
+         any line breaks inserted by the user agent for the purposes
+         of line wrapping must be placed so as to minimize &Delta;
+         across each run of consecutive lines between preserved
+         newlines in the source. &Delta; for a set of lines is defined
+         as the sum over each line of the absolute of the difference
+         between the line's length and the mean line length of the
+         set.&lt;/li&gt;
+
+        &lt;/ul&gt;
+
+       &lt;/li&gt;
+
+       &lt;li&gt;The viewport (and initial containing block) is
+       &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/li&gt;
+
+      &lt;/ul&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; be the boxes generated as
+      descendants of the initial containing block, along with their
+      positions.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;If there are no line boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;,
+     skip the remainder of these substeps for &lt;var
+     title=&quot;&quot;&gt;cue&lt;/var&gt;. The cue is ignored.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Adjust the positions of &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; according
+      to the appropriate steps from the following list:&lt;/p&gt;
+
+      &lt;dl class=&quot;switch&quot;&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;Many of the steps in this algorithm vary according to the
+        &lt;span&gt;text track cue writing direction&lt;/span&gt;. Steps labeled
+        &quot;&lt;strong&gt;Horizontal&lt;/strong&gt;&quot; must be followed only when the
+        &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
+        title=&quot;text track cue horizontal writing
+        direction&quot;&gt;horizontal&lt;/span&gt;, steps labeled
+        &quot;&lt;strong&gt;Vertical&lt;/strong&gt;&quot; must be followed when the
+        &lt;span&gt;text track cue writing direction&lt;/span&gt; is either &lt;span
+        title=&quot;text track cue vertical growing left writing
+        direction&quot;&gt;vertical growing left&lt;/span&gt; or &lt;span title=&quot;text
+        track cue vertical growing right writing direction&quot;&gt;vertical
+        growing right&lt;/span&gt;, steps labeled &quot;&lt;strong&gt;Vertical Growing
+        Left&lt;/strong&gt;&quot; must be followed only when the &lt;span&gt;text
+        track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track
+        cue vertical growing left writing direction&quot;&gt;vertical growing
+        left&lt;/span&gt;, and steps labeled &quot;&lt;strong&gt;Vertical Growing
+        Right&lt;/strong&gt;&quot; must be followed only when the &lt;span&gt;text
+        track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track
+        cue vertical growing right writing direction&quot;&gt;vertical growing
+        right&lt;/span&gt;.&lt;/p&gt;
+
+        &lt;ol&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt; be a user-agent-defined
+          vertical length which will be used to define a margin at the top and bottom edges of the
+          video into which cues will not be placed. In situations with overscan, this margin should
+          be sufficient to place all cues within the title-safe area. In the absence of overscan,
+          this value should be picked for aesthetics (to avoid text being aligned precisely on the
+          bottom edge of the video, which can be ugly).&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt; be a user-agent-defined
+          horizontal length which will be used to define a margin at the left and right edges of the
+          video into which cues will not be placed. In situations with overscan, this margin should
+          be sufficient to place all cues within the title-safe area. In the absence of overscan,
+          this value should be picked for aesthetics (to avoid text being aligned precisely on the
+          left or right edges of the video, which can be ugly).&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;full dimension&lt;/var&gt; be the height of
+          &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;full dimension&lt;/var&gt; be the width of &lt;var
+          title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/p&gt;
+
+          &lt;p&gt;These dimensions must not be adjusted for overscan. (The algorithm does that
+          separately.)&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;max dimension&lt;/var&gt; be &lt;span title=&quot;&quot;&gt;&lt;var
+          title=&quot;&quot;&gt;full&nbsp;dimension&lt;/var&gt;&nbsp;-&nbsp;(2&nbsp;&times;&nbsp;&lt;var
+          title=&quot;&quot;&gt;margin&lt;/var&gt;)&lt;/span&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;
+          be the height of the first line box in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;
+          be the width of the first line box in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is zero, then jump to the
+         step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; be the
+         &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;&lt;strong&gt;Vertical Growing Left&lt;/strong&gt;: Add one to
+         &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; then negate it.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be the result of
+         multiplying &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;line
+         position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;&lt;strong&gt;Vertical Growing Left&lt;/strong&gt;: Decrease &lt;var
+         title=&quot;&quot;&gt;position&lt;/var&gt; by the width of the bounding box of
+         the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;, then increase &lt;var
+         title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; is less than zero then increase &lt;var
+          title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;max dimension&lt;/var&gt;, and negate &lt;var
+          title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;
+
+          &lt;p&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Move all the boxes in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt; down by the distance given by &lt;var
+          title=&quot;&quot;&gt;position&lt;/var&gt;.&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Move all the boxes in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt; right by the distance given by &lt;var
+          title=&quot;&quot;&gt;position&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Remember the position of all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; as their &lt;var
+         title=&quot;&quot;&gt;specified position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt; be null. It will hold a position for &lt;var
+         title=&quot;&quot;&gt;boxes&lt;/var&gt;, much like &lt;var title=&quot;&quot;&gt;specified position&lt;/var&gt; in the previous
+         step.&lt;/p&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; be false.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; be a box that covers
+          all of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area except for a height of &lt;var
+          title=&quot;&quot;&gt;margin&lt;/var&gt; at the top of the rendering area and a height of &lt;var
+          title=&quot;&quot;&gt;margin&lt;/var&gt; at the bottom of the rendering area.&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; be a box that covers all
+          of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area except for a width of &lt;var
+          title=&quot;&quot;&gt;margin&lt;/var&gt; at the left of the rendering area and a width of &lt;var
+          title=&quot;&quot;&gt;margin&lt;/var&gt; at the right of the rendering area.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;&lt;i&gt;Step loop&lt;/i&gt;: If none of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; would overlap
+         any of the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, and all of the boxes in &lt;var
+         title=&quot;&quot;&gt;output&lt;/var&gt; are entirely within the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; box, then jump
+         to the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current position score&lt;/var&gt; be the percentage of the area of the
+         bounding box of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; that &lt;!--overlaps the boxes in &lt;var
+         title=&quot;&quot;&gt;output&lt;/var&gt; (if any) or that--&gt; is outside the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;
+         box.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt; is null (i.e. this is the first run through this
+          loop, &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; is still false, the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
+          are at their &lt;var title=&quot;&quot;&gt;specified position&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;best position
+          score&lt;/var&gt; is still null), or if &lt;var title=&quot;&quot;&gt;current position score&lt;/var&gt; is a lower
+          percentage than that in &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt;, then remember the
+          position of all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; as their &lt;var title=&quot;&quot;&gt;best
+          position&lt;/var&gt;, and set &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;current
+          position score&lt;/var&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is negative and the top of the
+          first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now above the top of the &lt;var
+          title=&quot;&quot;&gt;title area&lt;/var&gt;, or if &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is positive and the bottom of
+          the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now below the bottom of the &lt;var
+          title=&quot;&quot;&gt;title area&lt;/var&gt;, jump to the step labeled &lt;i&gt;switch direction&lt;/i&gt;.&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is negative and the left edge of
+          the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now to the left of the left edge of the
+          &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;, or if &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is positive and the right
+          edge of the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now to the right of the right
+          edge of the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;, jump to the step labeled &lt;i&gt;switch
+          direction&lt;/i&gt;.&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Move all the boxes in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt; down by the distance given by &lt;var
+          title=&quot;&quot;&gt;step&lt;/var&gt;. (If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is
+          negative, then this will actually result in an upwards
+          movement of the boxes in absolute terms.)&lt;/p&gt;
+
+          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Move all the boxes in &lt;var
+          title=&quot;&quot;&gt;boxes&lt;/var&gt; right by the distance given by &lt;var
+          title=&quot;&quot;&gt;step&lt;/var&gt;. (If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is
+          negative, then this will actually result in a leftwards
+          movement of the boxes in absolute terms.)&lt;/p&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;step loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;&lt;i&gt;Switch direction&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; is true, then move all the
+         boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; back to their &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt;, and
+         jump to the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Otherwise, move all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; back to their &lt;var
+         title=&quot;&quot;&gt;specified position&lt;/var&gt; as determined in the earlier step.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; to true.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;step loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
+       &lt;dd&gt;
+
+        &lt;ol&gt;
+
+         &lt;li&gt;
+
+          &lt;p&gt;Set up &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; as
+          follows:&lt;/p&gt;
+
+          &lt;dl class=&quot;switch&quot;&gt;
+
+           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+                  and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
+           &lt;dd&gt;
+            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
+            &lt;span&gt;text track cue text position&lt;/span&gt;, and let &lt;var
+            title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given by the &lt;span&gt;text
+            track cue computed line position&lt;/span&gt;.&lt;/p&gt;
+           &lt;/dd&gt;
+
+           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
+                  and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
+           &lt;dd&gt;
+            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
+            &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from
+            100, and let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given
+            by the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
+           &lt;/dd&gt;
+
+           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
+           &lt;dd&gt;
+            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
+            &lt;span&gt;text track cue computed line position&lt;/span&gt; subtracted from
+            100, and let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given
+            by the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
+           &lt;/dd&gt;
+
+           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
+           &lt;dd&gt;
+            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
+            &lt;span&gt;text track cue computed line position&lt;/span&gt;, and let &lt;var
+            title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given by the &lt;span&gt;text
+            track cue text position&lt;/span&gt;.&lt;/p&gt;
+           &lt;/dd&gt;
+
+          &lt;/dl&gt;
+
+         &lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Position the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; such
+         that the point &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;% along the width of the
+         bounding box of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is
+         &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;% of the way across the width of the
+         &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, and the point
+         &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;% along the height of the bounding box
+         of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is &lt;var
+         title=&quot;&quot;&gt;y&lt;/var&gt;% of the way across the height of the &lt;var
+         title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, while maintaining the
+         relative positions of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
+         to each other.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If none of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
+         would overlap any of the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;,
+         and all the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; are within
+         the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, then jump to
+         the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;If there is a position to which the boxes in &lt;var
+         title=&quot;&quot;&gt;boxes&lt;/var&gt; can be moved while maintaining the
+         relative positions of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
+         to each other such that none of the boxes in &lt;var
+         title=&quot;&quot;&gt;boxes&lt;/var&gt; would overlap any of the boxes in &lt;var
+         title=&quot;&quot;&gt;output&lt;/var&gt;, and all the boxes in &lt;var
+         title=&quot;&quot;&gt;output&lt;/var&gt; would be within the &lt;var
+         title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, then move the boxes in
+         &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; to the closest such position to
+         their current position, and then jump to the step labeled
+         &lt;i&gt;done positioning&lt;/i&gt; below. If there are multiple such
+         positions that are equidistant from their current position,
+         use the highest one amongst them; if there are several at
+         that height, then use the leftmost one amongst them.&lt;/p&gt;&lt;/li&gt;
+
+         &lt;li&gt;&lt;p&gt;Otherwise, jump to the step labeled &lt;i&gt;done
+         positioning&lt;/i&gt; below. (The boxes will unfortunately
+         overlap.)&lt;/p&gt;&lt;/li&gt;
+
+        &lt;/ol&gt;
+
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;&lt;i&gt;Done positioning&lt;/i&gt;: If there are any line boxes in
+     the (possibly now repositioned) &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; that do
+     not completely fit inside &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering
+     area, remove those offending line boxes from &lt;var
+     title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+     display state&lt;/span&gt; have the CSS boxes in &lt;var
+     title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Add the CSS boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; to &lt;var
+     title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;User agents may allow the user to override the above algorithm's
+  positioning of cues, e.g. by dragging them to another location on
+  the &lt;code&gt;video&lt;/code&gt;, or even off the &lt;code&gt;video&lt;/code&gt;
+  entirely.&lt;/p&gt;
+
+
+  &lt;h4&gt;Applying CSS properties to &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt;&lt;/h4&gt;
+
+  &lt;p&gt;When following the &lt;span&gt;rules for updating the display of WebVTT
+  text tracks&lt;/span&gt;, user agents must set properties of &lt;span
+  title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; at the CSS
+  user agent cascade layer as defined in this section. &lt;a
+  href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;On the (root) &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;, the
+  'position' property must be set to 'absolute', the 'unicode-bidi'
+  property must be set to 'plaintext', the 'direction' property must
+  be set to &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, the 'writing-mode' property
+  must be set to &lt;var title=&quot;&quot;&gt;writing-mode&lt;/var&gt;, the 'top' property
+  must be set to &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;, the 'left' property must be
+  set to &lt;var title=&quot;&quot;&gt;left&lt;/var&gt;, the 'width' property must be set to
+  &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, and the 'height' property must be set to
+  &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;,
+  &lt;var title=&quot;&quot;&gt;writing-mode&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;left&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, and &lt;var
+  title=&quot;&quot;&gt;height&lt;/var&gt; are the values with those names determined by
+  the &lt;span&gt;rules for updating the display of WebVTT text
+  tracks&lt;/span&gt; for the &lt;span&gt;text track cue&lt;/span&gt; from whose &lt;span
+  title=&quot;text track cue text&quot;&gt;text&lt;/span&gt; the &lt;span&gt;List of WebVTT
+  Node Objects&lt;/span&gt; was constructed.&lt;/p&gt;
+
+  &lt;p&gt;The 'text-align' property on the (root) &lt;span&gt;List of WebVTT Node
+  Objects&lt;/span&gt; must be set to the value in the second cell of the
+  row of the table below whose first cell is the value of the
+  corresponding &lt;span title=&quot;text track cue&quot;&gt;cue&lt;/span&gt;'s &lt;span&gt;text
+  track cue alignment&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt; &lt;th&gt;&lt;span&gt;Text track cue alignment&lt;/span&gt; &lt;th&gt; 'text-align' value
+   &lt;tbody&gt;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/span&gt; &lt;td&gt; 'start'
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/span&gt; &lt;td&gt; 'center'
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/span&gt; &lt;td&gt; 'end'
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/span&gt; &lt;td&gt; 'left'
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/span&gt; &lt;td&gt; 'right'
+  &lt;/table&gt;
+
+  &lt;p&gt;The 'font' shorthand property on the (root) &lt;span&gt;List of WebVTT
+  Node Objects&lt;/span&gt; must be set to '5vh sans-serif'. &lt;a
+  href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt; &lt;a
+  href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The 'color' property on the (root) &lt;span&gt;List of WebVTT Node
+  Objects&lt;/span&gt; must be set to 'rgba(255,255,255,1)'. &lt;a
+  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The 'background' shorthand property on the &lt;span&gt;WebVTT cue
+  background box&lt;/span&gt; must be set to 'rgba(0,0,0,0.8)'. &lt;a
+  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;A text outline or stroke may also be set on the (root) &lt;span&gt;List
+  of WebVTT Node Objects&lt;/span&gt;, if supported.&lt;/p&gt; &lt;!-- 'text-outline'
+  is in CSS3 Text, but Tab says that's awaiting medical attention. --&gt;
+
+  &lt;p&gt;The 'white-space' property on the (root) &lt;span&gt;List of WebVTT
+  Node Objects&lt;/span&gt; must be set to 'pre-line'. &lt;a
+  href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The 'font-style' property on &lt;span title=&quot;WebVTT Italic
+  Object&quot;&gt;WebVTT Italic Objects&lt;/span&gt; must be set to 'italic'.&lt;/p&gt;
+
+  &lt;p&gt;The 'font-weight' property on &lt;span title=&quot;WebVTT Bold
+  Object&quot;&gt;WebVTT Bold Objects&lt;/span&gt; must be set to 'bold'.&lt;/p&gt;
+
+  &lt;p&gt;The 'text-decoration' property on &lt;span title=&quot;WebVTT Underline
+  Object&quot;&gt;WebVTT Underline Objects&lt;/span&gt; must be set to 'underline'.&lt;/p&gt;
+
+  &lt;p&gt;The 'display' property on &lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT
+  Ruby Objects&lt;/span&gt; must be set to 'ruby'. &lt;a
+  href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The 'display' property on &lt;span title=&quot;WebVTT Ruby Text
+  Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; must be set to
+  'ruby-text'. &lt;a href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;All other non-inherited properties must be set to their initial
+  values; inherited properties on the root &lt;span&gt;List of WebVTT Node
+  Objects&lt;/span&gt; must inherit their values from the &lt;span&gt;media
+  element&lt;/span&gt; for which the &lt;span&gt;text track cue&lt;/span&gt; is being
+  rendered, if any. If there is no &lt;span&gt;media element&lt;/span&gt; (i.e. if
+  the &lt;span&gt;text track&lt;/span&gt; is being rendered for another media
+  playback mechanism), then inherited properties on the root
+  &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt; must take their initial
+  values.&lt;/p&gt;
+
+  &lt;p&gt;If there are style sheets that apply to the &lt;span&gt;media
+  element&lt;/span&gt; or other playback mechanism, then they must be
+  interpreted as defined in the next section.&lt;/p&gt;
+
+
+  &lt;h4&gt;CSS extensions&lt;/h4&gt;
+
+  &lt;p&gt;When a user agent is rendering one or more &lt;span title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt;
+  according to the &lt;span&gt;rules for updating the display of WebVTT text tracks&lt;/span&gt;, &lt;span
+  title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; in the &lt;span&gt;list of WebVTT Node
+  Objects&lt;/span&gt; used in the rendering can be matched by certain pseudo-selectors as defined below.
+  These selectors can begin or stop matching individual &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+  Objects&lt;/span&gt; while a &lt;span title=&quot;text track cue&quot;&gt;cue&lt;/span&gt; is being rendered, even in between
+  applications of the &lt;span&gt;rules for updating the display of WebVTT text tracks&lt;/span&gt; (which are
+  only run when the set of active cues changes). User agents that support the pseudo-element
+  described below must dynamically update renderings accordingly. When either 'white-space' or one
+  of the properties corresponding to the 'font' shorthand (including 'line-height') changes value,
+  then the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;text track cue display state&lt;/span&gt; must be emptied
+  and the &lt;span&gt;text track&lt;/span&gt;'s &lt;span&gt;rules for updating the text track rendering&lt;/span&gt; must be
+  immediately rerun.&lt;/p&gt;
+
+  &lt;p&gt;Pseudo-elements apply to elements that are matched by
+  selectors. For the purpose of this section, that element is the
+  &lt;i&gt;matched element&lt;/i&gt;. The pseudo-elements defined in the following
+  sections affect the styling of parts of &lt;span title=&quot;text track
+  cue&quot;&gt;text track cues&lt;/span&gt; that are being rendered for the
+  &lt;i&gt;matched element&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;If the &lt;i&gt;matched element&lt;/i&gt; is not a
+  &lt;code&gt;video&lt;/code&gt; element, the pseudo-elements defined below won't
+  have any effect according to this specification.&lt;/p&gt;
+
+  &lt;p&gt;A CSS user agent that implements the &lt;span title=&quot;text
+  track&quot;&gt;text tracks&lt;/span&gt; model must implement the '::cue' and
+  '::cue(&lt;var title=&quot;&quot;&gt;selector&lt;/var&gt;)' pseudo-elements, and the &lt;span
+  title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
+  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes.&lt;/p&gt;
+
+
+  &lt;h5&gt;The '::cue' pseudo-element&lt;/h5&gt;
+
+  &lt;p&gt;The '&lt;dfn title=&quot;pseudo-cue&quot;&gt;::cue&lt;/dfn&gt;' pseudo-element (with no
+  argument) matches any &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;
+  constructed for the &lt;i&gt;matched element&lt;/i&gt;, with the exception that
+  the properties corresponding to the 'background' shorthand must be
+  applied to the &lt;span&gt;WebVTT cue background box&lt;/span&gt; rather than
+  the &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The following properties apply to the '::cue' pseudo-element with
+  no argument; other properties set on the pseudo-element must be
+  ignored:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;'color'&lt;/li&gt;
+   &lt;li&gt;'opacity'&lt;/li&gt;
+   &lt;li&gt;'visibility'&lt;/li&gt;
+   &lt;li&gt;'text-decoration'&lt;/li&gt;
+   &lt;li&gt;'text-outline'&lt;/li&gt;
+   &lt;li&gt;'text-shadow'&lt;/li&gt;
+   &lt;li&gt;the properties corresponding to the 'background' shorthand&lt;/li&gt;
+   &lt;li&gt;the properties corresponding to the 'outline' shorthand&lt;/li&gt;
+   &lt;li&gt;the properties corresponding to the 'font' shorthand, including 'line-height'&lt;/li&gt;
+   &lt;li&gt;'white-space'&lt;/li&gt;
+   &lt;!-- add more... --&gt;
+   &lt;!-- definitely not:
+          display, float, position, top, left, right, bottom, width,
+          height, margin-top, margin-bottom, margin-left, margin-right,
+          clip, clear, content, cursor, direction, max-height,
+          min-height, max-width, min-width, orphans, overflow,
+          page-break-*, text-align, unicode-bidi, widows, z-index
+   --&gt;
+  &lt;/ul&gt;
+
+  &lt;p&gt;The '&lt;dfn title=&quot;pseudo-cue-selector&quot;&gt;::cue(&lt;var
+  title=&quot;&quot;&gt;selector&lt;/var&gt;)&lt;/dfn&gt;' pseudo-element with an argument must
+  have an argument that consists of a group of selectors. It matches
+  any &lt;span&gt;WebVTT Internal Node Object&lt;/span&gt; constructed for the
+  &lt;i&gt;matched element&lt;/i&gt; that also matches the given group of
+  selectors, with the nodes being treated as follows:&lt;/p&gt;
+
+  &lt;ul&gt;
+
+   &lt;li&gt;&lt;p&gt;The &lt;i&gt;document tree&lt;/i&gt; against which the selectors are
+   matched is the tree of &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+   Objects&lt;/span&gt; rooted at the &lt;span&gt;list of WebVTT Node
+   Objects&lt;/span&gt; for the cue.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal
+   Node Objects&lt;/span&gt; are elements in the tree.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;span title=&quot;WebVTT Leaf Node Object&quot;&gt;WebVTT Leaf Node
+   Objects&lt;/span&gt; cannot be matched.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For the purposes of element type selectors, the names of &lt;span
+    title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
+    Objects&lt;/span&gt; are as given by the following table, where objects
+    having the concrete class given in a cell in the first column have
+    the name given by the second column of the same row:&lt;/p&gt;
+
+    &lt;table&gt;
+
+     &lt;thead&gt;
+      &lt;tr&gt;
+       &lt;th&gt;Concrete class
+       &lt;th&gt;Name
+
+     &lt;tbody&gt;
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Class Object&quot;&gt;WebVTT Class Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;c&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Italic Object&quot;&gt;WebVTT Italic Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;i&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Bold Object&quot;&gt;WebVTT Bold Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;b&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Underline Object&quot;&gt;WebVTT Underline Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;u&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT Ruby Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;ruby&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Ruby Text Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;rt&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Voice Object&quot;&gt;WebVTT Voice Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;v&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;&lt;span title=&quot;WebVTT Language Object&quot;&gt;WebVTT Language Objects&lt;/span&gt;
+       &lt;td&gt;&lt;code title=&quot;&quot;&gt;lang&lt;/code&gt;
+
+      &lt;tr&gt;
+       &lt;td&gt;Other elements (specifically, &lt;span title=&quot;List of WebVTT Node Objects&quot;&gt;Lists of WebVTT Node Objects&lt;/span&gt;)
+       &lt;td&gt;No explicit name.
+
+    &lt;/table&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For the purposes of element type and universal selectors,
+   &lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
+   Objects&lt;/span&gt; are considered as being in the namespace expressed
+   as the empty string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For the purposes of attribute selector matching, &lt;span title=&quot;WebVTT Internal Node
+   Object&quot;&gt;WebVTT Internal Node Objects&lt;/span&gt; have no attributes, except for &lt;span title=&quot;WebVTT
+   Voice Object&quot;&gt;WebVTT Voice Objects&lt;/span&gt;, which have a single attribute named &quot;&lt;code
+   title=&quot;&quot;&gt;voice&lt;/code&gt;&quot; whose value is the value of the &lt;span&gt;WebVTT Voice Object&lt;/span&gt;, and
+   &lt;span title=&quot;WebVTT Language Object&quot;&gt;WebVTT Language Objects&lt;/span&gt;, which have a single
+   attribute named &quot;&lt;code title=&quot;&quot;&gt;lang&lt;/code&gt;&quot; whose value is the object's &lt;span title=&quot;WebVTT Node
+   Object's applicable language&quot;&gt;applicable language&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For the purposes of class selector matching, &lt;span
+   title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
+   Objects&lt;/span&gt; have the classes described as the &lt;span&gt;WebVTT
+   Node Object's applicable classes&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- ok, this
+   isn't especially well-defined, but the Selectors spec doesn't
+   really give one much to go on here. --&gt;
+
+   &lt;li&gt;&lt;p&gt;For the purposes of the &lt;code title=&quot;selector-lang&quot;&gt;:lang()&lt;/code&gt; pseudo-class, &lt;span
+   title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node Objects&lt;/span&gt; have the language
+   described as the &lt;span&gt;WebVTT Node Object's applicable language&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;For the purposes of ID selector matching, &lt;span title=&quot;List
+   of WebVTT Node Objects&quot;&gt;Lists of WebVTT Node Objects&lt;/span&gt; have
+   the ID given by the cue's &lt;span&gt;text track cue identifier&lt;/span&gt;,
+   if any.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ul&gt;
+
+  &lt;p&gt;The following properties apply to the '::cue()' pseudo-element
+  with an argument:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;'color'&lt;/li&gt;
+   &lt;li&gt;'opacity'&lt;/li&gt;
+   &lt;li&gt;'visibility'&lt;/li&gt;
+   &lt;li&gt;'text-decoration'&lt;/li&gt;
+   &lt;li&gt;'text-outline'&lt;/li&gt;
+   &lt;li&gt;'text-shadow'&lt;/li&gt;
+   &lt;li&gt;the properties corresponding to the 'background' shorthand&lt;/li&gt;
+   &lt;li&gt;the properties corresponding to the 'outline' shorthand&lt;/li&gt;
+   &lt;li&gt;properties relating to the transition and animation features&lt;/li&gt;
+   &lt;!-- add more... --&gt;
+   &lt;!-- but definitely not anything that affects dimensions of boxes, e.g. the 'font' shorthand's properties or 'white-space'; those are listed below instead --&gt;
+  &lt;/ul&gt;
+
+  &lt;!--v2
+   Would be nice to support transitions that are directional,
+   e.g. changing text fill colour or shadow size of the start of a
+   segment when the segment becomes &quot;past&quot;, and having the change
+   propagate towards the end of the segment so that it reaches the end
+   of the segment when the next segment becomes &quot;past&quot;.
+  --&gt;
+
+  &lt;p&gt;In addition, the following properties apply to the '::cue()'
+  pseudo-element with an argument when the selector does not contain
+  the &lt;span title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
+  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes:&lt;/p&gt;
+
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;the properties corresponding to the 'font' shorthand, including 'line-height'&lt;/li&gt;
+   &lt;li&gt;'white-space'&lt;/li&gt;
+   &lt;!-- add more... --&gt;
+   &lt;!-- definitely not:
+          display, float, position, top, left, right, bottom, width,
+          height, margin-top, margin-bottom, margin-left, margin-right,
+          clip, clear, content, cursor, direction, max-height,
+          min-height, max-width, min-width, orphans, overflow,
+          page-break-*, text-align, unicode-bidi, widows, z-index
+   --&gt;
+  &lt;/ul&gt;
+
+  &lt;p&gt;Properties that do not apply must be ignored.&lt;/p&gt;
+
+  &lt;p&gt;As a special exception, the properties corresponding to the
+  'background' shorthand, when they would have been applied to the
+  &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;, must instead be applied to
+  the &lt;span&gt;WebVTT cue background box&lt;/span&gt;.&lt;/p&gt;
+
+
+  &lt;h5&gt;The ':past' and ':future' pseudo-classes&lt;/h5&gt;
+
+  &lt;p&gt;The &lt;span title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
+  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes
+  sometimes match &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+  Objects&lt;/span&gt;. &lt;a href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/dfn&gt; pseudo-class
+  only matches &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+  Objects&lt;/span&gt; that are &lt;i&gt;in the past&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is
+  &lt;dfn&gt;in the past&lt;/dfn&gt; if, in a pre-order, depth-first traversal of
+  the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;List of WebVTT Node
+  Objects&lt;/span&gt;, there exists a &lt;span&gt;WebVTT Timestamp Object&lt;/span&gt;
+  whose value is less than the &lt;span&gt;current playback position&lt;/span&gt;
+  of the &lt;span&gt;media element&lt;/span&gt; that is the &lt;i&gt;matched
+  element&lt;/i&gt;, entirely after the &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var
+  title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/dfn&gt; pseudo-class
+  only matches &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
+  Objects&lt;/span&gt; that are &lt;i&gt;in the future&lt;/i&gt;.&lt;/p&gt;
+
+  &lt;p&gt;A &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is
+  &lt;dfn&gt;in the future&lt;/dfn&gt; if, in a pre-order, depth-first traversal
+  of the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;List of WebVTT Node
+  Objects&lt;/span&gt;, there exists a &lt;span&gt;WebVTT Timestamp Object&lt;/span&gt;
+  whose value is greater than the &lt;span&gt;current playback
+  position&lt;/span&gt; of the &lt;span&gt;media element&lt;/span&gt; that is the
+  &lt;i&gt;matched element&lt;/i&gt;, entirely before the &lt;span&gt;WebVTT Node
+  Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
+
+
+
+  &lt;h2&gt;WebVTT API&lt;/h2&gt;
+
+  &lt;p&gt;The following interface is used to expose WebVTT cues in the DOM API:&lt;/p&gt;
+
+  &lt;pre class=&quot;idl&quot;&gt;enum &lt;dfn&gt;AutoKeyword&lt;/dfn&gt; { &quot;auto&quot; };
+[&lt;span title=&quot;dom-TextTrackCue&quot;&gt;Constructor&lt;/span&gt;(double startTime, double endTime, DOMString text)]
+interface &lt;dfn&gt;WebVTTCue&lt;/dfn&gt; : &lt;span&gt;TextTrackCue&lt;/span&gt; {
+           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-vertical&quot;&gt;vertical&lt;/span&gt;;
+           attribute boolean &lt;span title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;snapToLines&lt;/span&gt;;
+           attribute (long or &lt;span&gt;AutoKeyword&lt;/span&gt;) &lt;span title=&quot;dom-TextTrackCue-line&quot;&gt;line&lt;/span&gt;;
+           attribute long &lt;span title=&quot;dom-TextTrackCue-position&quot;&gt;position&lt;/span&gt;;
+           attribute long &lt;span title=&quot;dom-TextTrackCue-size&quot;&gt;size&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-TextTrackCue-text&quot;&gt;text&lt;/span&gt;;
+  &lt;span&gt;DocumentFragment&lt;/span&gt; &lt;span title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;getCueAsHTML&lt;/span&gt;();
+};&lt;/pre&gt;
+
+  &lt;dl class=&quot;domintro&quot;&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; = new &lt;code title=&quot;dom-TextTrackCue&quot;&gt;WebVTTCue&lt;/code&gt;( &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; )&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns a new &lt;code&gt;TextTrackCue&lt;/code&gt; object, for use with the &lt;code title=&quot;dom-TextTrack-addCue&quot;&gt;addCue()&lt;/code&gt; method.&lt;/p&gt;
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt; argument sets the &lt;span&gt;text track cue start time&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt; argument sets the &lt;span&gt;text track cue end time&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;The &lt;var title=&quot;&quot;&gt;text&lt;/var&gt; argument sets the &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-vertical&quot;&gt;vertical&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns a string representing the &lt;span&gt;text track cue writing direction&lt;/span&gt;, as follows:&lt;/p&gt;
+    &lt;dl class=&quot;switch&quot;&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The empty string.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+    &lt;/dl&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;snapToLines&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns true if the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set, false otherwise.&lt;/p&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-line&quot;&gt;line&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns the &lt;span&gt;text track cue line position&lt;/span&gt;. In the
+    case of the value being &lt;span title=&quot;text track cue automatic line
+    position&quot;&gt;auto&lt;/span&gt;, the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot; is
+    returned.&lt;/p&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-position&quot;&gt;position&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-size&quot;&gt;size&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns the &lt;span&gt;text track cue size&lt;/span&gt;.&lt;/p&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns a string representing the &lt;span&gt;text track cue alignment&lt;/span&gt;, as follows:&lt;/p&gt;
+    &lt;dl class=&quot;switch&quot;&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue start alignment&quot;&gt;start alignment&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle alignment&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue end alignment&quot;&gt;end alignment&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue left alignment&quot;&gt;left alignment&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+     &lt;dt&gt;If it is &lt;span title=&quot;text track cue right alignment&quot;&gt;right alignment&lt;/span&gt;&lt;/dt&gt;
+     &lt;dd&gt;&lt;p&gt;The string &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;.&lt;/p&gt;&lt;/dd&gt;
+    &lt;/dl&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-text&quot;&gt;text&lt;/span&gt; [ = &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; ]&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns the &lt;span&gt;text track cue text&lt;/span&gt; in raw unparsed form.&lt;/p&gt;
+    &lt;p&gt;Can be set.&lt;/p&gt;
+   &lt;/dd&gt;
+
+   &lt;dt&gt;&lt;var title=&quot;&quot;&gt;fragment&lt;/var&gt; = &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; . &lt;span title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;getCueAsHTML&lt;/span&gt;()&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Returns the &lt;span&gt;text track cue text&lt;/span&gt; as a &lt;code&gt;DocumentFragment&lt;/code&gt; of &lt;span&gt;HTML elements&lt;/span&gt; and other DOM nodes.&lt;/p&gt;
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+  &lt;div class=&quot;impl&quot;&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue&quot;&gt;&lt;code&gt;WebVTTCue(&lt;var
+  title=&quot;&quot;&gt;startTime&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;, &lt;var
+  title=&quot;&quot;&gt;text&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor, when invoked, must
+  run the following steps:&lt;/p&gt;
+
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;Create a new &lt;span&gt;text track cue&lt;/span&gt;. Let &lt;var
+   title=&quot;&quot;&gt;cue&lt;/var&gt; be that &lt;span&gt;text track cue&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue start
+   time&lt;/span&gt; be the value of the &lt;var title=&quot;&quot;&gt;startTime&lt;/var&gt;
+   argument, interpreted as a time in seconds.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue end
+   time&lt;/span&gt; be the value of the &lt;var title=&quot;&quot;&gt;endTime&lt;/var&gt;
+   argument, interpreted as a time in seconds.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue text&lt;/span&gt; be the value of the &lt;var
+   title=&quot;&quot;&gt;text&lt;/var&gt; argument, and let the &lt;span&gt;rules for rendering the cue in isolation&lt;/span&gt;
+   be the &lt;span&gt;rules for interpreting WebVTT cue text&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;!-- default settings --&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   identifier&lt;/span&gt; be the empty string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   pause-on-exit flag&lt;/span&gt; be false.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   writing direction&lt;/span&gt; be &lt;span title=&quot;text track cue
+   horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   snap-to-lines flag&lt;/span&gt; be true.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue line
+   position&lt;/span&gt; be &lt;span title=&quot;text track cue automatic line
+   position&quot;&gt;auto&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   text position&lt;/span&gt; be 50.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   size&lt;/span&gt; be 100.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
+   alignment&lt;/span&gt; be &lt;span title=&quot;text track cue middle
+   alignment&quot;&gt;middle alignment&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the &lt;code&gt;TextTrackCue&lt;/code&gt; object representing
+   &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn
+  title=&quot;dom-TextTrackCue-vertical&quot;&gt;&lt;code&gt;vertical&lt;/code&gt;&lt;/dfn&gt;
+  attribute, on getting, must return the string from the second cell
+  of the row in the table below whose first cell is the &lt;span&gt;text
+  track cue writing direction&lt;/span&gt; of the &lt;span&gt;text track
+  cue&lt;/span&gt; that the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents:&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt; &lt;th&gt; &lt;span&gt;Text track cue writing direction&lt;/span&gt;
+         &lt;th&gt; &lt;code title=&quot;dom-TextTrackCue-direction&quot;&gt;direction&lt;/code&gt; value
+   &lt;tbody&gt;
+    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;Horizontal&lt;/span&gt;
+         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;&lt;/code&gt;&quot; (the empty string)
+    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;Vertical growing left&lt;/span&gt;
+         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;rl&lt;/code&gt;&quot;
+    &lt;tr&gt; &lt;td&gt; &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;Vertical growing right&lt;/span&gt;
+         &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;lr&lt;/code&gt;&quot;
+  &lt;/table&gt;
+
+  &lt;p&gt;On setting, the &lt;span&gt;text track cue writing direction&lt;/span&gt; must be set to the value given in
+  the first cell of the row in the table above whose second cell is a &lt;span&gt;case-sensitive&lt;/span&gt;
+  match for the new value, if any. If none of the values match, then the user agent must instead
+  throw a &lt;code&gt;SyntaxError&lt;/code&gt; exception.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-snapToLines&quot;&gt;&lt;code&gt;snapToLines&lt;/code&gt;&lt;/dfn&gt; attribute, on
+  getting, must return true if the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; of the &lt;span&gt;text
+  track cue&lt;/span&gt; that the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents is set; or false otherwise.
+  On setting, the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; must be set if the new value is
+  true, and must be unset otherwise.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-line&quot;&gt;&lt;code&gt;line&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the &lt;span&gt;text track cue line position&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
+  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. The special value &lt;span title=&quot;text track cue
+  automatic line position&quot;&gt;auto&lt;/span&gt; must be represented as the string &quot;&lt;code
+  title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;. On setting, the &lt;span&gt;text track cue line position&lt;/span&gt; must be set to
+  the new value; if the new value is the string &quot;&lt;code title=&quot;&quot;&gt;auto&lt;/code&gt;&quot;, then it must be
+  interpreted as the special value &lt;span title=&quot;text track cue automatic line
+  position&quot;&gt;auto&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-position&quot;&gt;&lt;code&gt;position&lt;/code&gt;&lt;/dfn&gt; attribute, on getting,
+  must return the &lt;span&gt;text track cue text position&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that
+  the &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, if the new value is negative or
+  greater than 100, then an &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise, the
+  &lt;span&gt;text track cue text position&lt;/span&gt; must be set to the new value.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-size&quot;&gt;&lt;code&gt;size&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the &lt;span&gt;text track cue size&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
+  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, if the new value is negative or greater
+  than 100, then an &lt;code&gt;IndexSizeError&lt;/code&gt; exception must be thrown. Otherwise, the &lt;span&gt;text
+  track cue size&lt;/span&gt; must be set to the new value.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-align&quot;&gt;&lt;code&gt;align&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the string from the second cell of the row in the table below whose first cell is the
+  &lt;span&gt;text track cue alignment&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
+  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents:&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;thead&gt;
+    &lt;tr&gt; &lt;th&gt;&lt;span&gt;Text track cue alignment&lt;/span&gt; &lt;th&gt; &lt;code title=&quot;dom-TextTrackCue-align&quot;&gt;align&lt;/code&gt; value
+   &lt;tbody&gt;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;middle&lt;/code&gt;&quot;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;end&lt;/code&gt;&quot;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;left&lt;/code&gt;&quot;
+    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/span&gt; &lt;td&gt; &quot;&lt;code title=&quot;&quot;&gt;right&lt;/code&gt;&quot;
+  &lt;/table&gt;
+
+  &lt;p&gt;On setting, the &lt;span&gt;text track cue alignment&lt;/span&gt; must be set to the value given in the
+  first cell of the row in the table above whose second cell is a &lt;span&gt;case-sensitive&lt;/span&gt; match
+  for the new value, if any. If none of the values match, then the user agent must instead throw a
+  &lt;code&gt;SyntaxError&lt;/code&gt; exception.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-text&quot;&gt;&lt;code&gt;text&lt;/code&gt;&lt;/dfn&gt; attribute, on getting, must
+  return the raw &lt;span&gt;text track cue text&lt;/span&gt; of the &lt;span&gt;text track cue&lt;/span&gt; that the
+  &lt;code&gt;TextTrackCue&lt;/code&gt; object represents. On setting, the &lt;span&gt;text track cue text&lt;/span&gt; must
+  be set to the new value.&lt;/p&gt;
+
+  &lt;p&gt;The &lt;dfn title=&quot;dom-TextTrackCue-getCueAsHTML&quot;&gt;&lt;code&gt;getCueAsHTML()&lt;/code&gt;&lt;/dfn&gt; method must
+  convert the &lt;span&gt;text track cue text&lt;/span&gt; to a &lt;code&gt;DocumentFragment&lt;/code&gt; for the
+  &lt;span&gt;script's document&lt;/span&gt; of the &lt;span&gt;entry script&lt;/span&gt; by applying the &lt;span&gt;WebVTT cue
+  text DOM construction rules&lt;/span&gt; to the result of applying the &lt;span&gt;WebVTT cue text parsing
+  rules&lt;/span&gt; to the &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
+
+  &lt;/div&gt;
+
+
+
+  &lt;h2&gt;IANA considerations&lt;/h2&gt;
+
+  &lt;!-- <A HREF="http://www.w3.org/2002/06/registering-mediatype.html">http://www.w3.org/2002/06/registering-mediatype.html</A> --&gt;
+
+  &lt;h3&gt;&lt;dfn&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
+
+  &lt;p&gt;This registration is for community review and will be submitted
+  to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
+
+  &lt;!--
+   To: <A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ietf-types at iana.org</A>
+   Subject: Registration of media type text/cues
+  --&gt;
+
+  &lt;dl&gt;
+   &lt;dt&gt;Type name:&lt;/dt&gt;
+   &lt;dd&gt;text&lt;/dd&gt;
+   &lt;dt&gt;Subtype name:&lt;/dt&gt;
+   &lt;dd&gt;vtt&lt;/dd&gt;
+   &lt;dt&gt;Required parameters:&lt;/dt&gt;
+   &lt;dd&gt;No parameters&lt;/dd&gt;
+   &lt;dt&gt;Optional parameters:&lt;/dt&gt;
+   &lt;dd&gt;No parameters&lt;/dd&gt;
+   &lt;dt&gt;Encoding considerations:&lt;/dt&gt;
+   &lt;dd&gt;8bit (always UTF-8)&lt;/dd&gt;
+&lt;!--ADD-TOPIC:Security--&gt;
+   &lt;dt&gt;Security considerations:&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Text track files themselves pose no immediate risk unless
+    sensitive information is included within the
+    data. Implementations, however, are required to follow specific
+    rules when processing text tracks, to ensure that certain
+    origin-based restrictions are honored. Failure to correctly
+    implement these rules can result in information leakage,
+    cross-site scripting attacks, and the like.&lt;/p&gt;
+   &lt;/dd&gt;
+&lt;!--REMOVE-TOPIC:Security--&gt;
+   &lt;dt&gt;Interoperability considerations:&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;p&gt;Rules for processing both conforming and non-conforming content
+    are defined in this specification.&lt;/p&gt;
+   &lt;/dd&gt;
+   &lt;dt&gt;Published specification:&lt;/dt&gt;
+   &lt;dd&gt;
+    This document is the relevant specification.
+   &lt;/dd&gt;
+   &lt;dt&gt;Applications that use this media type:&lt;/dt&gt;
+   &lt;dd&gt;
+    Web browsers and other video players.
+   &lt;/dd&gt;
+   &lt;dt&gt;Additional information:&lt;/dt&gt;
+   &lt;dd&gt;
+    &lt;dl&gt;
+     &lt;dt&gt;Magic number(s):&lt;/dt&gt;
+     &lt;dd&gt;
+      &lt;p&gt;WebVTT files all begin with one of the following byte sequences (where &quot;EOF&quot; means the end of the file):&lt;/p&gt;
+      &lt;ul class=&quot;brief&quot;&gt;
+       &lt;li&gt; EF BB BF 57 45 42 56 54 54 0A
+       &lt;li&gt; EF BB BF 57 45 42 56 54 54 0D
+       &lt;li&gt; EF BB BF 57 45 42 56 54 54 20
+       &lt;li&gt; EF BB BF 57 45 42 56 54 54 09
+       &lt;li&gt; EF BB BF 57 45 42 56 54 54 EOF
+       &lt;li&gt;          57 45 42 56 54 54 0A
+       &lt;li&gt;          57 45 42 56 54 54 0D
+       &lt;li&gt;          57 45 42 56 54 54 20
+       &lt;li&gt;          57 45 42 56 54 54 09
+       &lt;li&gt;          57 45 42 56 54 54 EOF
+      &lt;/ul&gt;
+      &lt;p class=&quot;note&quot;&gt;(An optional UTF-8 BOM, the ASCII string &quot;&lt;code title=&quot;&quot;&gt;WEBVTT&lt;/code&gt;&quot;, and finally a space, tab, line break, or the end of the file.)
+     &lt;/dd&gt;
+     &lt;dt&gt;File extension(s):&lt;/dt&gt;
+     &lt;dd&gt;&quot;&lt;code title=&quot;&quot;&gt;vtt&lt;/code&gt;&quot;&lt;/dd&gt;
+     &lt;dt&gt;Macintosh file type code(s):&lt;/dt&gt;
+     &lt;dd&gt;No specific Macintosh file type codes are recommended for this type.&lt;/dd&gt;
+    &lt;/dl&gt;
+   &lt;/dd&gt;
+   &lt;dt&gt;Person &amp; email address to contact for further information:&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Intended usage:&lt;/dt&gt;
+   &lt;dd&gt;Common&lt;/dd&gt;
+   &lt;dt&gt;Restrictions on usage:&lt;/dt&gt;
+   &lt;dd&gt;No restrictions apply.&lt;/dd&gt;
+   &lt;dt&gt;Author:&lt;/dt&gt;
+   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
+   &lt;dt&gt;Change controller:&lt;/dt&gt;
+   &lt;dd&gt;W3C&lt;/dd&gt;
+  &lt;/dl&gt;
+
+  &lt;p&gt;Fragment identifiers have no meaning with
+  &lt;code&gt;text/vtt&lt;/code&gt; resources.&lt;/p&gt;
+
 &lt;!--END webvtt--&gt;
 
+
 &lt;!--START complete--&gt;
 
 &lt;!--TOPIC:Video and Audio--&gt;
@@ -108454,6 +109779,7 @@
   &lt;/table&gt;
 
 
+&lt;!--CLEANUP--&gt;
   &lt;h3&gt;Replaced elements&lt;/h3&gt;
 
   &lt;h4&gt;Embedded content&lt;/h4&gt;
@@ -108505,7 +109831,7 @@
   &lt;p&gt;Any subtitles or captions are expected to be overlayed directly
   on top of their &lt;code&gt;video&lt;/code&gt; element, as defined by the
   relevant rendering rules; for &lt;span&gt;WebVTT&lt;/span&gt;, those are the
-  &lt;span&gt;WebVTT cue text rendering rules&lt;/span&gt;. &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
+  &lt;span&gt;rules for updating the display of WebVTT text tracks&lt;/span&gt;. &lt;a href=&quot;#refsWEBVTT&quot;&gt;[WEBVTT]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p&gt;When the user agent starts &lt;span title=&quot;expose a user interface
   to the user&quot;&gt;exposing a user interface&lt;/span&gt; for a
@@ -108531,1220 +109857,7 @@
 iframe[seamless] { display: block; }
 &lt;span id=&quot;video-object-fit&quot;&gt;video { object-fit: contain; }&lt;/span&gt;&lt;/pre&gt;
 
-  &lt;/div&gt;
 
-
-&lt;!--END complete--&gt;&lt;!--END dev-html--&gt;
-&lt;!--START webvtt--&gt;&lt;!--TOPIC:Video Text Tracks--&gt;
-
-  &lt;h3&gt;&lt;dfn&gt;WebVTT cue text rendering rules&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;The &lt;dfn&gt;rules for updating the display of WebVTT text
-  tracks&lt;/dfn&gt; render the &lt;span title=&quot;text track&quot;&gt;text
-  tracks&lt;/span&gt; of a &lt;span&gt;media element&lt;/span&gt; (specifically, a
-  &lt;code&gt;video&lt;/code&gt; element), or of another playback mechanism, by
-  applying the steps below. All the &lt;span title=&quot;text track&quot;&gt;text
-  tracks&lt;/span&gt; that use these rules for a given &lt;span&gt;media
-  element&lt;/span&gt;, or other playback mechanism, are rendered together,
-  to avoid overlapping subtitles from multiple tracks.&lt;/p&gt;
-
-  &lt;p&gt;The output of the steps below is a set of CSS boxes that covers
-  the rendering area of the &lt;span&gt;media element&lt;/span&gt; or other
-  playback mechanism, which user agents are expected to render in a
-  manner suiting the user.&lt;/p&gt;
-
-  &lt;p&gt;The rules are as follows:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;media element&lt;/span&gt; is an &lt;code&gt;audio&lt;/code&gt;
-   element, or is another playback mechanism with no rendering area,
-   abort these steps. There is nothing to render.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;video&lt;/var&gt; be the &lt;span&gt;media
-   element&lt;/span&gt; or other playback mechanism.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; be an empty list of
-   absolutely positioned CSS block boxes.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the user agent is &lt;span title=&quot;expose a user interface to
-   the user&quot;&gt;exposing a user interface&lt;/span&gt; for &lt;var
-   title=&quot;&quot;&gt;video&lt;/var&gt;, add to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; one or more
-   completely transparent positioned CSS block boxes that cover the
-   same region as the user interface.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;If the last time these rules were run, the user agent was
-   not &lt;span title=&quot;expose a user interface to the user&quot;&gt;exposing a
-   user interface&lt;/span&gt; for &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;, but now it is,
-   optionally let &lt;var title=&quot;&quot;&gt;reset&lt;/var&gt; be true. Otherwise, let &lt;var
-   title=&quot;&quot;&gt;reset&lt;/var&gt; be false.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;tracks&lt;/var&gt; be the subset of &lt;var
-   title=&quot;&quot;&gt;video&lt;/var&gt;'s &lt;span&gt;list of text tracks&lt;/span&gt; that have
-   as their &lt;span&gt;rules for updating the text track rendering&lt;/span&gt;
-   these &lt;span&gt;rules for updating the display of WebVTT text
-   tracks&lt;/span&gt;, and whose &lt;span&gt;text track mode&lt;/span&gt; is &lt;span
-   title=&quot;text track showing&quot;&gt;showing&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; be an empty list of &lt;span
-   title=&quot;text track cue&quot;&gt;text track cues&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For each track &lt;var title=&quot;&quot;&gt;track&lt;/var&gt; in &lt;var
-   title=&quot;&quot;&gt;tracks&lt;/var&gt;, append to &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; all the
-   &lt;span title=&quot;text track cue&quot;&gt;cues&lt;/span&gt; from &lt;var
-   title=&quot;&quot;&gt;track&lt;/var&gt;'s &lt;span title=&quot;text track list of cues&quot;&gt;list
-   of cues&lt;/span&gt; that have their &lt;span&gt;text track cue active
-   flag&lt;/span&gt; set.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;reset&lt;/var&gt; is false, then, for each
-   &lt;span&gt;text track cue&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; in &lt;var
-   title=&quot;&quot;&gt;cues&lt;/var&gt;: if &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track
-   cue display state&lt;/span&gt; has a set of CSS boxes, then add those
-   boxes to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, and remove &lt;var
-   title=&quot;&quot;&gt;cue&lt;/var&gt; from &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;For each &lt;span&gt;text track cue&lt;/span&gt; &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;
-    in &lt;var title=&quot;&quot;&gt;cues&lt;/var&gt; that has not yet had corresponding CSS
-    boxes added to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, in &lt;span&gt;text track
-    cue order&lt;/span&gt;, run the following substeps:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; be the &lt;span&gt;list of WebVTT
-     Node Objects&lt;/span&gt; obtained by applying the &lt;span&gt;WebVTT cue
-     text parsing rules&lt;/span&gt; to the &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s
-     &lt;span&gt;text track cue text&lt;/span&gt;.&lt;/p&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Apply the Unicode Bidirectional Algorithm's Paragraph Level
-      steps to the concatenation of the values of each &lt;span&gt;WebVTT
-      Text Object&lt;/span&gt; in &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt;, in a pre-order,
-      depth-first traversal, excluding &lt;span title=&quot;WebVTT Ruby Text
-      Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; and their descendants,
-      to determine the &lt;i&gt;paragraph embedding level&lt;/i&gt; of the first
-      Unicode paragraph of the cue. &lt;a href=&quot;#refsBIDI&quot;&gt;[BIDI]&lt;/a&gt;&lt;/p&gt;
-
-      &lt;p class=&quot;note&quot;&gt;Within a cue, paragraph boundaries are only denoted by Type B characters, such
-      as U+000A LINE FEED (LF), U+0085 NEXT LINE (NEL), and U+2029 PARAGRAPH SEPARATOR. (This means
-      each line of the cue is reordered as if it was a separate paragraph.)&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;If the &lt;i&gt;paragraph embedding level&lt;/i&gt; determined in the
-      previous step is even (the &lt;i&gt;paragraph direction&lt;/i&gt; is
-      left-to-right), let &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; be 'ltr',
-      otherwise, let it be 'rtl'.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is
-     &lt;span title=&quot;text track cue horizontal writing
-     direction&quot;&gt;horizontal&lt;/span&gt;, then let &lt;var
-     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'horizontal-tb'. Otherwise, if the
-     &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
-     title=&quot;text track cue vertical growing left writing
-     direction&quot;&gt;vertical growing left&lt;/span&gt;, then let &lt;var
-     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'vertical-rl'. Otherwise, the
-     &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
-     title=&quot;text track cue vertical growing right writing
-     direction&quot;&gt;vertical growing right&lt;/span&gt;; let &lt;var
-     title=&quot;&quot;&gt;writing-mode&lt;/var&gt; be 'vertical-lr'.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Determine the value of &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; for
-      &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the appropriate rules from the
-      following list:&lt;/p&gt;
-
-      &lt;dl class=&quot;switch&quot;&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-          and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
-              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
-              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-          and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
-              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
-              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
-              the &lt;span&gt;text track cue text position&lt;/span&gt; is less than or equal to 50&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; multiplied by two.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
-              the &lt;span&gt;text track cue text position&lt;/span&gt; is greater than &lt;!-- or equal to --&gt; 50&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt; be the result of subtracting &lt;span&gt;text track cue text position&lt;/span&gt; from 100 and then multiplying the result by two.&lt;/p&gt;
-       &lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue size&lt;/span&gt; is less than &lt;var
-     title=&quot;&quot;&gt;maximum size&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; be
-     &lt;span&gt;text track cue size&lt;/span&gt;. Otherwise, let &lt;var
-     title=&quot;&quot;&gt;size&lt;/var&gt; be &lt;var title=&quot;&quot;&gt;maximum size&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is
-     &lt;span title=&quot;text track cue horizontal writing
-     direction&quot;&gt;horizontal&lt;/span&gt;, then let &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;
-     be '&lt;var title=&quot;&quot;&gt;size&lt;/var&gt;&amp;#x2009;vw' and &lt;var
-     title=&quot;&quot;&gt;height&lt;/var&gt; be 'auto'. Otherwise, let &lt;var
-     title=&quot;&quot;&gt;width&lt;/var&gt; be 'auto' and &lt;var title=&quot;&quot;&gt;height&lt;/var&gt; be
-     '&lt;var title=&quot;&quot;&gt;size&lt;/var&gt;&amp;#x2009;vh'. (These are CSS values used
-     by the next section to set CSS properties for the rendering; 'vw'
-     and 'vh' are CSS units.) &lt;a
-     href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Determine the value of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; or &lt;var
-      title=&quot;&quot;&gt;y-position&lt;/var&gt; for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the
-      appropriate rules from the following list:&lt;/p&gt;
-
-      &lt;dl class=&quot;switch&quot;&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100, minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
-              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue start alignment&quot;&gt;start&lt;/span&gt;
-              or &lt;span title=&quot;text track cue left alignment&quot;&gt;left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
-              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue end alignment&quot;&gt;end&lt;/span&gt;
-              or &lt;span title=&quot;text track cue right alignment&quot;&gt;right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;,
-              and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from 100, minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue alignment&lt;/span&gt; is &lt;span title=&quot;text track cue middle alignment&quot;&gt;middle&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue text position&lt;/span&gt; minus half of &lt;var title=&quot;&quot;&gt;size&lt;/var&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Determine the value of whichever of &lt;var
-      title=&quot;&quot;&gt;x-position&lt;/var&gt; or &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is
-      not yet calculated for &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt; as per the
-      appropriate rules from the following list:&lt;/p&gt;
-
-      &lt;dl class=&quot;switch&quot;&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be zero.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; be the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be zero.&lt;/p&gt;
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;,
-              and the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
-       &lt;dd&gt;
-        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; be the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
-       &lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-      &lt;p class=&quot;note&quot;&gt;These are not final positions, they are merely
-      temporary positions used to calculate box dimensions below.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;If the &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set, then run the appropriate
-      steps from the following list:&lt;/p&gt;
-
-      &lt;dl class=&quot;switch&quot;&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-
-        &lt;ol&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; be a user-agent-defined horizontal length,
-         expressed as a percentage of the width of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area,
-         which will be used to define a margin at the left and right edges of the video into which
-         this cue will not be placed. In situations with overscan, this margin should be sufficient
-         to place the cue within the title-safe area. In the absence of overscan, this value should
-         be picked for aesthetics (to avoid text being aligned precisely on the left or right edge
-         of the video, which can be ugly).&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; and
-         the sum of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is more than &lt;var
-         title=&quot;&quot;&gt;edge margin&lt;/var&gt;, then increase &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; by &lt;var
-         title=&quot;&quot;&gt;edge margin&lt;/var&gt; and decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by the same
-         amount.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt; be 100 minus &lt;var title=&quot;&quot;&gt;edge
-         margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;right margin
-         edge&lt;/var&gt;, and the sum of &lt;var title=&quot;&quot;&gt;x-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is
-         more than &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt;, then decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by
-         &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-        &lt;/ol&gt;
-
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
-       &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
-       &lt;dd&gt;
-
-        &lt;ol&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; be a user-agent-defined vertical length,
-         expressed as a percentage of the height of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area,
-         which will be used to define a margin at the top and bottom edges of the video into which
-         this cue will not be placed. In situations with overscan, this margin should be sufficient
-         to place the cue within the title-safe area. In the absence of overscan, this value should
-         be picked for aesthetics (to avoid text being aligned precisely on the top or bottom edge
-         of the video, which can be ugly).&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt; and
-         the sum of &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is more than &lt;var
-         title=&quot;&quot;&gt;edge margin&lt;/var&gt;, then increase &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; by &lt;var
-         title=&quot;&quot;&gt;edge margin&lt;/var&gt; and decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by the same
-         amount.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;bottom margin edge&lt;/var&gt; be 100 minus &lt;var title=&quot;&quot;&gt;edge
-         margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; is less than &lt;var title=&quot;&quot;&gt;bottom margin
-         edge&lt;/var&gt;, and the sum of &lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; is
-         more than &lt;var title=&quot;&quot;&gt;right margin edge&lt;/var&gt;, then decrease &lt;var title=&quot;&quot;&gt;size&lt;/var&gt; by
-         &lt;var title=&quot;&quot;&gt;edge margin&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-        &lt;/ol&gt;
-
-       &lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;left&lt;/var&gt; be '&lt;var
-     title=&quot;&quot;&gt;x-position&lt;/var&gt;&amp;#x2009;vw' and &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;
-     be '&lt;var title=&quot;&quot;&gt;y-position&lt;/var&gt;&amp;#x2009;vh'. (These again are
-     CSS values used by the next section to set CSS properties for the
-     rendering; 'vw' and 'vh' are CSS units.) &lt;a
-     href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Apply the terms of the CSS specifications to &lt;var
-      title=&quot;&quot;&gt;nodes&lt;/var&gt; within the following constraints, thus
-      obtaining a set of CSS boxes positioned relative to an initial
-      containing block: &lt;a href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-      &lt;ul&gt;
-
-       &lt;li&gt;&lt;p&gt;The &lt;i&gt;document tree&lt;/i&gt; is the tree of &lt;span
-       title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; rooted at
-       &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;For the purposes of processing by the CSS specification,
-       &lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
-       Objects&lt;/span&gt; are equivalent to elements with the same
-       contents.&lt;/p&gt;&lt;/li&gt;
-
-       &lt;li&gt;For the purposes of processing by the CSS
-       specification, &lt;span title=&quot;WebVTT Text Object&quot;&gt;WebVTT Text
-       Objects&lt;/span&gt; are equivalent to &lt;code&gt;Text&lt;/code&gt; nodes.&lt;/li&gt;
-
-       &lt;li&gt;No style sheets are associated with &lt;var
-       title=&quot;&quot;&gt;nodes&lt;/var&gt;. (The nodes are subsequently restyled
-       using style sheets after their boxes are generated, as
-       described below.)&lt;/li&gt;
-
-       &lt;li&gt;The children of the &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; must be
-       wrapped in an anonymous box whose 'display' property has the
-       value 'inline'. This is the &lt;dfn&gt;WebVTT cue background
-       box&lt;/dfn&gt;.&lt;/li&gt;
-
-       &lt;li&gt;Runs of children of &lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT
-       Ruby Objects&lt;/span&gt; that are not &lt;span title=&quot;WebVTT Ruby Text
-       Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; must be wrapped in
-       anonymous boxes whose 'display' property has the value
-       'ruby-base'. &lt;a href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/li&gt;
-
-       &lt;li&gt;Properties on &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
-       Objects&lt;/span&gt; have their values set as defined in the next
-       section. (That section uses some of the variables whose values
-       were calculated earlier in this algorithm.)&lt;/li&gt;
-
-       &lt;li&gt;Text runs must be wrapped according to the CSS
-       line-wrapping rules, with the following additional constraints:
-
-        &lt;ul&gt;
-
-         &lt;li&gt;Regardless of the value of the 'white-space' property,
-         lines must be wrapped at the edge of their containing blocks,
-         even if doing so requires splitting a word where there is no
-         line breaking opportunity. (Thus, normally text wraps as
-         needed, but if there is a particularly long word, it does not
-         overflow as it normally would in CSS, it is instead forcibly
-         wrapped at the box's edge.)&lt;/li&gt;
-
-         &lt;li&gt;Regardless of the value of the 'white-space' property,
-         any line breaks inserted by the user agent for the purposes
-         of line wrapping must be placed so as to minimize &Delta;
-         across each run of consecutive lines between preserved
-         newlines in the source. &Delta; for a set of lines is defined
-         as the sum over each line of the absolute of the difference
-         between the line's length and the mean line length of the
-         set.&lt;/li&gt;
-
-        &lt;/ul&gt;
-
-       &lt;/li&gt;
-
-       &lt;li&gt;The viewport (and initial containing block) is
-       &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/li&gt;
-
-      &lt;/ul&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; be the boxes generated as
-      descendants of the initial containing block, along with their
-      positions.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If there are no line boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;,
-     skip the remainder of these substeps for &lt;var
-     title=&quot;&quot;&gt;cue&lt;/var&gt;. The cue is ignored.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;p&gt;Adjust the positions of &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; according
-      to the appropriate steps from the following list:&lt;/p&gt;
-
-      &lt;dl class=&quot;switch&quot;&gt;
-
-       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is set&lt;/dt&gt;
-
-       &lt;dd&gt;
-
-        &lt;p&gt;Many of the steps in this algorithm vary according to the
-        &lt;span&gt;text track cue writing direction&lt;/span&gt;. Steps labeled
-        &quot;&lt;strong&gt;Horizontal&lt;/strong&gt;&quot; must be followed only when the
-        &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span
-        title=&quot;text track cue horizontal writing
-        direction&quot;&gt;horizontal&lt;/span&gt;, steps labeled
-        &quot;&lt;strong&gt;Vertical&lt;/strong&gt;&quot; must be followed when the
-        &lt;span&gt;text track cue writing direction&lt;/span&gt; is either &lt;span
-        title=&quot;text track cue vertical growing left writing
-        direction&quot;&gt;vertical growing left&lt;/span&gt; or &lt;span title=&quot;text
-        track cue vertical growing right writing direction&quot;&gt;vertical
-        growing right&lt;/span&gt;, steps labeled &quot;&lt;strong&gt;Vertical Growing
-        Left&lt;/strong&gt;&quot; must be followed only when the &lt;span&gt;text
-        track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track
-        cue vertical growing left writing direction&quot;&gt;vertical growing
-        left&lt;/span&gt;, and steps labeled &quot;&lt;strong&gt;Vertical Growing
-        Right&lt;/strong&gt;&quot; must be followed only when the &lt;span&gt;text
-        track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track
-        cue vertical growing right writing direction&quot;&gt;vertical growing
-        right&lt;/span&gt;.&lt;/p&gt;
-
-        &lt;ol&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt; be a user-agent-defined
-          vertical length which will be used to define a margin at the top and bottom edges of the
-          video into which cues will not be placed. In situations with overscan, this margin should
-          be sufficient to place all cues within the title-safe area. In the absence of overscan,
-          this value should be picked for aesthetics (to avoid text being aligned precisely on the
-          bottom edge of the video, which can be ugly).&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt; be a user-agent-defined
-          horizontal length which will be used to define a margin at the left and right edges of the
-          video into which cues will not be placed. In situations with overscan, this margin should
-          be sufficient to place all cues within the title-safe area. In the absence of overscan,
-          this value should be picked for aesthetics (to avoid text being aligned precisely on the
-          left or right edges of the video, which can be ugly).&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;full dimension&lt;/var&gt; be the height of
-          &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;full dimension&lt;/var&gt; be the width of &lt;var
-          title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area.&lt;/p&gt;
-
-          &lt;p&gt;These dimensions must not be adjusted for overscan. (The algorithm does that
-          separately.)&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;max dimension&lt;/var&gt; be &lt;span title=&quot;&quot;&gt;&lt;var
-          title=&quot;&quot;&gt;full&nbsp;dimension&lt;/var&gt;&nbsp;-&nbsp;(2&nbsp;&times;&nbsp;&lt;var
-          title=&quot;&quot;&gt;margin&lt;/var&gt;)&lt;/span&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;
-          be the height of the first line box in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;
-          be the width of the first line box in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is zero, then jump to the
-         step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; be the
-         &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;&lt;strong&gt;Vertical Growing Left&lt;/strong&gt;: Add one to
-         &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; then negate it.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be the result of
-         multiplying &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;line
-         position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;&lt;strong&gt;Vertical Growing Left&lt;/strong&gt;: Decrease &lt;var
-         title=&quot;&quot;&gt;position&lt;/var&gt; by the width of the bounding box of
-         the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;, then increase &lt;var
-         title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;line position&lt;/var&gt; is less than zero then increase &lt;var
-          title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;max dimension&lt;/var&gt;, and negate &lt;var
-          title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;
-
-          &lt;p&gt;Otherwise, increase &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; by &lt;var title=&quot;&quot;&gt;margin&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Move all the boxes in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt; down by the distance given by &lt;var
-          title=&quot;&quot;&gt;position&lt;/var&gt;.&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Move all the boxes in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt; right by the distance given by &lt;var
-          title=&quot;&quot;&gt;position&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Remember the position of all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; as their &lt;var
-         title=&quot;&quot;&gt;specified position&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt; be null. It will hold a position for &lt;var
-         title=&quot;&quot;&gt;boxes&lt;/var&gt;, much like &lt;var title=&quot;&quot;&gt;specified position&lt;/var&gt; in the previous
-         step.&lt;/p&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt; be null.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; be false.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; be a box that covers
-          all of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area except for a height of &lt;var
-          title=&quot;&quot;&gt;margin&lt;/var&gt; at the top of the rendering area and a height of &lt;var
-          title=&quot;&quot;&gt;margin&lt;/var&gt; at the bottom of the rendering area.&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Let &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; be a box that covers all
-          of the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area except for a width of &lt;var
-          title=&quot;&quot;&gt;margin&lt;/var&gt; at the left of the rendering area and a width of &lt;var
-          title=&quot;&quot;&gt;margin&lt;/var&gt; at the right of the rendering area.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;&lt;i&gt;Step loop&lt;/i&gt;: If none of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; would overlap
-         any of the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;, and all of the boxes in &lt;var
-         title=&quot;&quot;&gt;output&lt;/var&gt; are entirely within the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt; box, then jump
-         to the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;current position score&lt;/var&gt; be the percentage of the area of the
-         bounding box of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; that &lt;!--overlaps the boxes in &lt;var
-         title=&quot;&quot;&gt;output&lt;/var&gt; (if any) or that--&gt; is outside the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;
-         box.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;If &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt; is null (i.e. this is the first run through this
-          loop, &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; is still false, the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
-          are at their &lt;var title=&quot;&quot;&gt;specified position&lt;/var&gt;, and &lt;var title=&quot;&quot;&gt;best position
-          score&lt;/var&gt; is still null), or if &lt;var title=&quot;&quot;&gt;current position score&lt;/var&gt; is a lower
-          percentage than that in &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt;, then remember the
-          position of all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; as their &lt;var title=&quot;&quot;&gt;best
-          position&lt;/var&gt;, and set &lt;var title=&quot;&quot;&gt;best position score&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;current
-          position score&lt;/var&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is negative and the top of the
-          first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now above the top of the &lt;var
-          title=&quot;&quot;&gt;title area&lt;/var&gt;, or if &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is positive and the bottom of
-          the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now below the bottom of the &lt;var
-          title=&quot;&quot;&gt;title area&lt;/var&gt;, jump to the step labeled &lt;i&gt;switch direction&lt;/i&gt;.&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is negative and the left edge of
-          the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now to the left of the left edge of the
-          &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;, or if &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is positive and the right
-          edge of the first line box in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is now to the right of the right
-          edge of the &lt;var title=&quot;&quot;&gt;title area&lt;/var&gt;, jump to the step labeled &lt;i&gt;switch
-          direction&lt;/i&gt;.&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;&lt;strong&gt;Horizontal&lt;/strong&gt;: Move all the boxes in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt; down by the distance given by &lt;var
-          title=&quot;&quot;&gt;step&lt;/var&gt;. (If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is
-          negative, then this will actually result in an upwards
-          movement of the boxes in absolute terms.)&lt;/p&gt;
-
-          &lt;p&gt;&lt;strong&gt;Vertical&lt;/strong&gt;: Move all the boxes in &lt;var
-          title=&quot;&quot;&gt;boxes&lt;/var&gt; right by the distance given by &lt;var
-          title=&quot;&quot;&gt;step&lt;/var&gt;. (If &lt;var title=&quot;&quot;&gt;step&lt;/var&gt; is
-          negative, then this will actually result in a leftwards
-          movement of the boxes in absolute terms.)&lt;/p&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;step loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;&lt;i&gt;Switch direction&lt;/i&gt;: If &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; is true, then move all the
-         boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; back to their &lt;var title=&quot;&quot;&gt;best position&lt;/var&gt;, and
-         jump to the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Otherwise, move all the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; back to their &lt;var
-         title=&quot;&quot;&gt;specified position&lt;/var&gt; as determined in the earlier step.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Negate &lt;var title=&quot;&quot;&gt;step&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Set &lt;var title=&quot;&quot;&gt;switched&lt;/var&gt; to true.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Jump back to the step labeled &lt;i&gt;step loop&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
-
-        &lt;/ol&gt;
-
-       &lt;/dd&gt;
-
-       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue snap-to-lines flag&lt;/span&gt; is not set&lt;/dt&gt;
-       &lt;dd&gt;
-
-        &lt;ol&gt;
-
-         &lt;li&gt;
-
-          &lt;p&gt;Set up &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; as
-          follows:&lt;/p&gt;
-
-          &lt;dl class=&quot;switch&quot;&gt;
-
-           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-                  and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'ltr'&lt;/dt&gt;
-           &lt;dd&gt;
-            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
-            &lt;span&gt;text track cue text position&lt;/span&gt;, and let &lt;var
-            title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given by the &lt;span&gt;text
-            track cue computed line position&lt;/span&gt;.&lt;/p&gt;
-           &lt;/dd&gt;
-
-           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue horizontal writing direction&quot;&gt;horizontal&lt;/span&gt;,
-                  and &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt; is 'rtl'&lt;/dt&gt;
-           &lt;dd&gt;
-            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
-            &lt;span&gt;text track cue text position&lt;/span&gt; subtracted from
-            100, and let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given
-            by the &lt;span&gt;text track cue computed line position&lt;/span&gt;.&lt;/p&gt;
-           &lt;/dd&gt;
-
-           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing left writing direction&quot;&gt;vertical growing left&lt;/span&gt;&lt;/dt&gt;
-           &lt;dd&gt;
-            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
-            &lt;span&gt;text track cue computed line position&lt;/span&gt; subtracted from
-            100, and let &lt;var title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given
-            by the &lt;span&gt;text track cue text position&lt;/span&gt;.&lt;/p&gt;
-           &lt;/dd&gt;
-
-           &lt;dt&gt;If the &lt;span&gt;text track cue writing direction&lt;/span&gt; is &lt;span title=&quot;text track cue vertical growing right writing direction&quot;&gt;vertical growing right&lt;/span&gt;&lt;/dt&gt;
-           &lt;dd&gt;
-            &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a percentage given by the
-            &lt;span&gt;text track cue computed line position&lt;/span&gt;, and let &lt;var
-            title=&quot;&quot;&gt;y&lt;/var&gt; be a percentage given by the &lt;span&gt;text
-            track cue text position&lt;/span&gt;.&lt;/p&gt;
-           &lt;/dd&gt;
-
-          &lt;/dl&gt;
-
-         &lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Position the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; such
-         that the point &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;% along the width of the
-         bounding box of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is
-         &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;% of the way across the width of the
-         &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, and the point
-         &lt;var title=&quot;&quot;&gt;y&lt;/var&gt;% along the height of the bounding box
-         of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; is &lt;var
-         title=&quot;&quot;&gt;y&lt;/var&gt;% of the way across the height of the &lt;var
-         title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, while maintaining the
-         relative positions of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
-         to each other.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If none of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
-         would overlap any of the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;,
-         and all the boxes in &lt;var title=&quot;&quot;&gt;output&lt;/var&gt; are within
-         the &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, then jump to
-         the step labeled &lt;i&gt;done positioning&lt;/i&gt; below.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;If there is a position to which the boxes in &lt;var
-         title=&quot;&quot;&gt;boxes&lt;/var&gt; can be moved while maintaining the
-         relative positions of the boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt;
-         to each other such that none of the boxes in &lt;var
-         title=&quot;&quot;&gt;boxes&lt;/var&gt; would overlap any of the boxes in &lt;var
-         title=&quot;&quot;&gt;output&lt;/var&gt;, and all the boxes in &lt;var
-         title=&quot;&quot;&gt;output&lt;/var&gt; would be within the &lt;var
-         title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering area, then move the boxes in
-         &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; to the closest such position to
-         their current position, and then jump to the step labeled
-         &lt;i&gt;done positioning&lt;/i&gt; below. If there are multiple such
-         positions that are equidistant from their current position,
-         use the highest one amongst them; if there are several at
-         that height, then use the leftmost one amongst them.&lt;/p&gt;&lt;/li&gt;
-
-         &lt;li&gt;&lt;p&gt;Otherwise, jump to the step labeled &lt;i&gt;done
-         positioning&lt;/i&gt; below. (The boxes will unfortunately
-         overlap.)&lt;/p&gt;&lt;/li&gt;
-
-        &lt;/ol&gt;
-
-       &lt;/dd&gt;
-
-      &lt;/dl&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;i&gt;Done positioning&lt;/i&gt;: If there are any line boxes in
-     the (possibly now repositioned) &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; that do
-     not completely fit inside &lt;var title=&quot;&quot;&gt;video&lt;/var&gt;'s rendering
-     area, remove those offending line boxes from &lt;var
-     title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;cue&lt;/var&gt;'s &lt;span&gt;text track cue
-     display state&lt;/span&gt; have the CSS boxes in &lt;var
-     title=&quot;&quot;&gt;boxes&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Add the CSS boxes in &lt;var title=&quot;&quot;&gt;boxes&lt;/var&gt; to &lt;var
-     title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;User agents may allow the user to override the above algorithm's
-  positioning of cues, e.g. by dragging them to another location on
-  the &lt;code&gt;video&lt;/code&gt;, or even off the &lt;code&gt;video&lt;/code&gt;
-  entirely.&lt;/p&gt;
-
-
-  &lt;h4&gt;Applying CSS properties to &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt;&lt;/h4&gt;
-
-  &lt;p&gt;When following the &lt;span&gt;rules for updating the display of WebVTT
-  text tracks&lt;/span&gt;, user agents must set properties of &lt;span
-  title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; at the CSS
-  user agent cascade layer as defined in this section. &lt;a
-  href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;On the (root) &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;, the
-  'position' property must be set to 'absolute', the 'unicode-bidi'
-  property must be set to 'plaintext', the 'direction' property must
-  be set to &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;, the 'writing-mode' property
-  must be set to &lt;var title=&quot;&quot;&gt;writing-mode&lt;/var&gt;, the 'top' property
-  must be set to &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;, the 'left' property must be
-  set to &lt;var title=&quot;&quot;&gt;left&lt;/var&gt;, the 'width' property must be set to
-  &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, and the 'height' property must be set to
-  &lt;var title=&quot;&quot;&gt;height&lt;/var&gt;, where &lt;var title=&quot;&quot;&gt;direction&lt;/var&gt;,
-  &lt;var title=&quot;&quot;&gt;writing-mode&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;top&lt;/var&gt;, &lt;var
-  title=&quot;&quot;&gt;left&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;width&lt;/var&gt;, and &lt;var
-  title=&quot;&quot;&gt;height&lt;/var&gt; are the values with those names determined by
-  the &lt;span&gt;rules for updating the display of WebVTT text
-  tracks&lt;/span&gt; for the &lt;span&gt;text track cue&lt;/span&gt; from whose &lt;span
-  title=&quot;text track cue text&quot;&gt;text&lt;/span&gt; the &lt;span&gt;List of WebVTT
-  Node Objects&lt;/span&gt; was constructed.&lt;/p&gt;
-
-  &lt;p&gt;The 'text-align' property on the (root) &lt;span&gt;List of WebVTT Node
-  Objects&lt;/span&gt; must be set to the value in the second cell of the
-  row of the table below whose first cell is the value of the
-  corresponding &lt;span title=&quot;text track cue&quot;&gt;cue&lt;/span&gt;'s &lt;span&gt;text
-  track cue alignment&lt;/span&gt;:&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;thead&gt;
-    &lt;tr&gt; &lt;th&gt;&lt;span&gt;Text track cue alignment&lt;/span&gt; &lt;th&gt; 'text-align' value
-   &lt;tbody&gt;
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue start alignment&quot;&gt;Start alignment&lt;/span&gt; &lt;td&gt; 'start'
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue middle alignment&quot;&gt;Middle alignment&lt;/span&gt; &lt;td&gt; 'center'
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue end alignment&quot;&gt;End alignment&lt;/span&gt; &lt;td&gt; 'end'
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue left alignment&quot;&gt;Left alignment&lt;/span&gt; &lt;td&gt; 'left'
-    &lt;tr&gt; &lt;td&gt;&lt;span title=&quot;text track cue right alignment&quot;&gt;Right alignment&lt;/span&gt; &lt;td&gt; 'right'
-  &lt;/table&gt;
-
-  &lt;p&gt;The 'font' shorthand property on the (root) &lt;span&gt;List of WebVTT
-  Node Objects&lt;/span&gt; must be set to '5vh sans-serif'. &lt;a
-  href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt; &lt;a
-  href=&quot;#refsCSSVALUES&quot;&gt;[CSSVALUES]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The 'color' property on the (root) &lt;span&gt;List of WebVTT Node
-  Objects&lt;/span&gt; must be set to 'rgba(255,255,255,1)'. &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The 'background' shorthand property on the &lt;span&gt;WebVTT cue
-  background box&lt;/span&gt; must be set to 'rgba(0,0,0,0.8)'. &lt;a
-  href=&quot;#refsCSSCOLOR&quot;&gt;[CSSCOLOR]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;A text outline or stroke may also be set on the (root) &lt;span&gt;List
-  of WebVTT Node Objects&lt;/span&gt;, if supported.&lt;/p&gt; &lt;!-- 'text-outline'
-  is in CSS3 Text, but Tab says that's awaiting medical attention. --&gt;
-
-  &lt;p&gt;The 'white-space' property on the (root) &lt;span&gt;List of WebVTT
-  Node Objects&lt;/span&gt; must be set to 'pre-line'. &lt;a
-  href=&quot;#refsCSS&quot;&gt;[CSS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The 'font-style' property on &lt;span title=&quot;WebVTT Italic
-  Object&quot;&gt;WebVTT Italic Objects&lt;/span&gt; must be set to 'italic'.&lt;/p&gt;
-
-  &lt;p&gt;The 'font-weight' property on &lt;span title=&quot;WebVTT Bold
-  Object&quot;&gt;WebVTT Bold Objects&lt;/span&gt; must be set to 'bold'.&lt;/p&gt;
-
-  &lt;p&gt;The 'text-decoration' property on &lt;span title=&quot;WebVTT Underline
-  Object&quot;&gt;WebVTT Underline Objects&lt;/span&gt; must be set to 'underline'.&lt;/p&gt;
-
-  &lt;p&gt;The 'display' property on &lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT
-  Ruby Objects&lt;/span&gt; must be set to 'ruby'. &lt;a
-  href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The 'display' property on &lt;span title=&quot;WebVTT Ruby Text
-  Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt; must be set to
-  'ruby-text'. &lt;a href=&quot;#refsCSSRUBY&quot;&gt;[CSSRUBY]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;All other non-inherited properties must be set to their initial
-  values; inherited properties on the root &lt;span&gt;List of WebVTT Node
-  Objects&lt;/span&gt; must inherit their values from the &lt;span&gt;media
-  element&lt;/span&gt; for which the &lt;span&gt;text track cue&lt;/span&gt; is being
-  rendered, if any. If there is no &lt;span&gt;media element&lt;/span&gt; (i.e. if
-  the &lt;span&gt;text track&lt;/span&gt; is being rendered for another media
-  playback mechanism), then inherited properties on the root
-  &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt; must take their initial
-  values.&lt;/p&gt;
-
-  &lt;p&gt;If there are style sheets that apply to the &lt;span&gt;media
-  element&lt;/span&gt; or other playback mechanism, then they must be
-  interpreted as defined in the next section.&lt;/p&gt;
-
-
-  &lt;h4&gt;CSS extensions&lt;/h4&gt;
-
-  &lt;p&gt;When a user agent is rendering one or more &lt;span title=&quot;text
-  track cue&quot;&gt;text track cues&lt;/span&gt; according to the &lt;span&gt;WebVTT cue
-  text rendering rules&lt;/span&gt;, &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT
-  Node Objects&lt;/span&gt; in the &lt;span&gt;list of WebVTT Node Objects&lt;/span&gt;
-  used in the rendering can be matched by certain pseudo-selectors as
-  defined below. These selectors can begin or stop matching individual
-  &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node Objects&lt;/span&gt; while a
-  &lt;span title=&quot;text track cue&quot;&gt;cue&lt;/span&gt; is being rendered, even in
-  between applications of the &lt;span&gt;WebVTT cue text rendering
-  rules&lt;/span&gt; (which are only run when the set of active cues
-  changes). User agents that support the pseudo-element described
-  below must dynamically update renderings accordingly.
-  When either 'white-space' or one of the properties corresponding to the 'font' shorthand
-  (including 'line-height') changes value, then the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;text track
-  cue display state&lt;/span&gt; must be emptied and the &lt;span&gt;text track&lt;/span&gt;'s &lt;span&gt;rules for
-  updating the text track rendering&lt;/span&gt; must be immediately rerun.&lt;/p&gt;
-
-  &lt;p&gt;Pseudo-elements apply to elements that are matched by
-  selectors. For the purpose of this section, that element is the
-  &lt;i&gt;matched element&lt;/i&gt;. The pseudo-elements defined in the following
-  sections affect the styling of parts of &lt;span title=&quot;text track
-  cue&quot;&gt;text track cues&lt;/span&gt; that are being rendered for the
-  &lt;i&gt;matched element&lt;/i&gt;.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;If the &lt;i&gt;matched element&lt;/i&gt; is not a
-  &lt;code&gt;video&lt;/code&gt; element, the pseudo-elements defined below won't
-  have any effect according to this specification.&lt;/p&gt;
-
-  &lt;p&gt;A CSS user agent that implements the &lt;span title=&quot;text
-  track&quot;&gt;text tracks&lt;/span&gt; model must implement the '::cue' and
-  '::cue(&lt;var title=&quot;&quot;&gt;selector&lt;/var&gt;)' pseudo-elements, and the &lt;span
-  title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
-  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes.&lt;/p&gt;
-
-
-  &lt;h5&gt;The '::cue' pseudo-element&lt;/h5&gt;
-
-  &lt;p&gt;The '&lt;dfn title=&quot;pseudo-cue&quot;&gt;::cue&lt;/dfn&gt;' pseudo-element (with no
-  argument) matches any &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;
-  constructed for the &lt;i&gt;matched element&lt;/i&gt;, with the exception that
-  the properties corresponding to the 'background' shorthand must be
-  applied to the &lt;span&gt;WebVTT cue background box&lt;/span&gt; rather than
-  the &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The following properties apply to the '::cue' pseudo-element with
-  no argument; other properties set on the pseudo-element must be
-  ignored:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;'color'&lt;/li&gt;
-   &lt;li&gt;'opacity'&lt;/li&gt;
-   &lt;li&gt;'visibility'&lt;/li&gt;
-   &lt;li&gt;'text-decoration'&lt;/li&gt;
-   &lt;li&gt;'text-outline'&lt;/li&gt;
-   &lt;li&gt;'text-shadow'&lt;/li&gt;
-   &lt;li&gt;the properties corresponding to the 'background' shorthand&lt;/li&gt;
-   &lt;li&gt;the properties corresponding to the 'outline' shorthand&lt;/li&gt;
-   &lt;li&gt;the properties corresponding to the 'font' shorthand, including 'line-height'&lt;/li&gt;
-   &lt;li&gt;'white-space'&lt;/li&gt;
-   &lt;!-- add more... --&gt;
-   &lt;!-- definitely not:
-          display, float, position, top, left, right, bottom, width,
-          height, margin-top, margin-bottom, margin-left, margin-right,
-          clip, clear, content, cursor, direction, max-height,
-          min-height, max-width, min-width, orphans, overflow,
-          page-break-*, text-align, unicode-bidi, widows, z-index
-   --&gt;
-  &lt;/ul&gt;
-
-  &lt;p&gt;The '&lt;dfn title=&quot;pseudo-cue-selector&quot;&gt;::cue(&lt;var
-  title=&quot;&quot;&gt;selector&lt;/var&gt;)&lt;/dfn&gt;' pseudo-element with an argument must
-  have an argument that consists of a group of selectors. It matches
-  any &lt;span&gt;WebVTT Internal Node Object&lt;/span&gt; constructed for the
-  &lt;i&gt;matched element&lt;/i&gt; that also matches the given group of
-  selectors, with the nodes being treated as follows:&lt;/p&gt;
-
-  &lt;ul&gt;
-
-   &lt;li&gt;&lt;p&gt;The &lt;i&gt;document tree&lt;/i&gt; against which the selectors are
-   matched is the tree of &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
-   Objects&lt;/span&gt; rooted at the &lt;span&gt;list of WebVTT Node
-   Objects&lt;/span&gt; for the cue.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal
-   Node Objects&lt;/span&gt; are elements in the tree.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;span title=&quot;WebVTT Leaf Node Object&quot;&gt;WebVTT Leaf Node
-   Objects&lt;/span&gt; cannot be matched.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;For the purposes of element type selectors, the names of &lt;span
-    title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
-    Objects&lt;/span&gt; are as given by the following table, where objects
-    having the concrete class given in a cell in the first column have
-    the name given by the second column of the same row:&lt;/p&gt;
-
-    &lt;table&gt;
-
-     &lt;thead&gt;
-      &lt;tr&gt;
-       &lt;th&gt;Concrete class
-       &lt;th&gt;Name
-
-     &lt;tbody&gt;
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Class Object&quot;&gt;WebVTT Class Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;c&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Italic Object&quot;&gt;WebVTT Italic Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;i&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Bold Object&quot;&gt;WebVTT Bold Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;b&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Underline Object&quot;&gt;WebVTT Underline Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;u&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Ruby Object&quot;&gt;WebVTT Ruby Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;ruby&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Ruby Text Object&quot;&gt;WebVTT Ruby Text Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;rt&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Voice Object&quot;&gt;WebVTT Voice Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;v&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;&lt;span title=&quot;WebVTT Language Object&quot;&gt;WebVTT Language Objects&lt;/span&gt;
-       &lt;td&gt;&lt;code title=&quot;&quot;&gt;lang&lt;/code&gt;
-
-      &lt;tr&gt;
-       &lt;td&gt;Other elements (specifically, &lt;span title=&quot;List of WebVTT Node Objects&quot;&gt;Lists of WebVTT Node Objects&lt;/span&gt;)
-       &lt;td&gt;No explicit name.
-
-    &lt;/table&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For the purposes of element type and universal selectors,
-   &lt;span title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
-   Objects&lt;/span&gt; are considered as being in the namespace expressed
-   as the empty string.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For the purposes of attribute selector matching, &lt;span title=&quot;WebVTT Internal Node
-   Object&quot;&gt;WebVTT Internal Node Objects&lt;/span&gt; have no attributes, except for &lt;span title=&quot;WebVTT
-   Voice Object&quot;&gt;WebVTT Voice Objects&lt;/span&gt;, which have a single attribute named &quot;&lt;code
-   title=&quot;&quot;&gt;voice&lt;/code&gt;&quot; whose value is the value of the &lt;span&gt;WebVTT Voice Object&lt;/span&gt;, and
-   &lt;span title=&quot;WebVTT Language Object&quot;&gt;WebVTT Language Objects&lt;/span&gt;, which have a single
-   attribute named &quot;&lt;code title=&quot;&quot;&gt;lang&lt;/code&gt;&quot; whose value is the object's &lt;span title=&quot;WebVTT Node
-   Object's applicable language&quot;&gt;applicable language&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For the purposes of class selector matching, &lt;span
-   title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node
-   Objects&lt;/span&gt; have the classes described as the &lt;span&gt;WebVTT
-   Node Object's applicable classes&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt; &lt;!-- ok, this
-   isn't especially well-defined, but the Selectors spec doesn't
-   really give one much to go on here. --&gt;
-
-   &lt;li&gt;&lt;p&gt;For the purposes of the &lt;code title=&quot;selector-lang&quot;&gt;:lang()&lt;/code&gt; pseudo-class, &lt;span
-   title=&quot;WebVTT Internal Node Object&quot;&gt;WebVTT Internal Node Objects&lt;/span&gt; have the language
-   described as the &lt;span&gt;WebVTT Node Object's applicable language&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;For the purposes of ID selector matching, &lt;span title=&quot;List
-   of WebVTT Node Objects&quot;&gt;Lists of WebVTT Node Objects&lt;/span&gt; have
-   the ID given by the cue's &lt;span&gt;text track cue identifier&lt;/span&gt;,
-   if any.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ul&gt;
-
-  &lt;p&gt;The following properties apply to the '::cue()' pseudo-element
-  with an argument:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;'color'&lt;/li&gt;
-   &lt;li&gt;'opacity'&lt;/li&gt;
-   &lt;li&gt;'visibility'&lt;/li&gt;
-   &lt;li&gt;'text-decoration'&lt;/li&gt;
-   &lt;li&gt;'text-outline'&lt;/li&gt;
-   &lt;li&gt;'text-shadow'&lt;/li&gt;
-   &lt;li&gt;the properties corresponding to the 'background' shorthand&lt;/li&gt;
-   &lt;li&gt;the properties corresponding to the 'outline' shorthand&lt;/li&gt;
-   &lt;li&gt;properties relating to the transition and animation features&lt;/li&gt;
-   &lt;!-- add more... --&gt;
-   &lt;!-- but definitely not anything that affects dimensions of boxes, e.g. the 'font' shorthand's properties or 'white-space'; those are listed below instead --&gt;
-  &lt;/ul&gt;
-
-  &lt;!--v2
-   Would be nice to support transitions that are directional,
-   e.g. changing text fill colour or shadow size of the start of a
-   segment when the segment becomes &quot;past&quot;, and having the change
-   propagate towards the end of the segment so that it reaches the end
-   of the segment when the next segment becomes &quot;past&quot;.
-  --&gt;
-
-  &lt;p&gt;In addition, the following properties apply to the '::cue()'
-  pseudo-element with an argument when the selector does not contain
-  the &lt;span title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
-  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes:&lt;/p&gt;
-
-  &lt;ul class=&quot;brief&quot;&gt;
-   &lt;li&gt;the properties corresponding to the 'font' shorthand, including 'line-height'&lt;/li&gt;
-   &lt;li&gt;'white-space'&lt;/li&gt;
-   &lt;!-- add more... --&gt;
-   &lt;!-- definitely not:
-          display, float, position, top, left, right, bottom, width,
-          height, margin-top, margin-bottom, margin-left, margin-right,
-          clip, clear, content, cursor, direction, max-height,
-          min-height, max-width, min-width, orphans, overflow,
-          page-break-*, text-align, unicode-bidi, widows, z-index
-   --&gt;
-  &lt;/ul&gt;
-
-  &lt;p&gt;Properties that do not apply must be ignored.&lt;/p&gt;
-
-  &lt;p&gt;As a special exception, the properties corresponding to the
-  'background' shorthand, when they would have been applied to the
-  &lt;span&gt;List of WebVTT Node Objects&lt;/span&gt;, must instead be applied to
-  the &lt;span&gt;WebVTT cue background box&lt;/span&gt;.&lt;/p&gt;
-
-
-  &lt;h5&gt;The ':past' and ':future' pseudo-classes&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;span title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/span&gt; and &lt;span
-  title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/span&gt; pseudo-classes
-  sometimes match &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
-  Objects&lt;/span&gt;. &lt;a href=&quot;#refsSELECTORS&quot;&gt;[SELECTORS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;past-pseudo-class&quot;&gt;':past'&lt;/dfn&gt; pseudo-class
-  only matches &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
-  Objects&lt;/span&gt; that are &lt;i&gt;in the past&lt;/i&gt;.&lt;/p&gt;
-
-  &lt;p&gt;A &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is
-  &lt;dfn&gt;in the past&lt;/dfn&gt; if, in a pre-order, depth-first traversal of
-  the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;List of WebVTT Node
-  Objects&lt;/span&gt;, there exists a &lt;span&gt;WebVTT Timestamp Object&lt;/span&gt;
-  whose value is less than the &lt;span&gt;current playback position&lt;/span&gt;
-  of the &lt;span&gt;media element&lt;/span&gt; that is the &lt;i&gt;matched
-  element&lt;/i&gt;, entirely after the &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var
-  title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn title=&quot;future-pseudo-class&quot;&gt;':future'&lt;/dfn&gt; pseudo-class
-  only matches &lt;span title=&quot;WebVTT Node Object&quot;&gt;WebVTT Node
-  Objects&lt;/span&gt; that are &lt;i&gt;in the future&lt;/i&gt;.&lt;/p&gt;
-
-  &lt;p&gt;A &lt;span&gt;WebVTT Node Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt; is
-  &lt;dfn&gt;in the future&lt;/dfn&gt; if, in a pre-order, depth-first traversal
-  of the &lt;span&gt;text track cue&lt;/span&gt;'s &lt;span&gt;List of WebVTT Node
-  Objects&lt;/span&gt;, there exists a &lt;span&gt;WebVTT Timestamp Object&lt;/span&gt;
-  whose value is greater than the &lt;span&gt;current playback
-  position&lt;/span&gt; of the &lt;span&gt;media element&lt;/span&gt; that is the
-  &lt;i&gt;matched element&lt;/i&gt;, entirely before the &lt;span&gt;WebVTT Node
-  Object&lt;/span&gt; &lt;var title=&quot;&quot;&gt;c&lt;/var&gt;.&lt;/p&gt;
-
-&lt;!--END webvtt--&gt;
-&lt;!--START complete--&gt;&lt;!--START dev-html--&gt;
-
-
-&lt;!--TOPIC:Rendering--&gt;
-  &lt;div class=&quot;impl&quot;&gt;
-
   &lt;h4&gt;Images&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code&gt;img&lt;/code&gt; element or an &lt;code&gt;input&lt;/code&gt; element
@@ -113083,13 +113196,11 @@
   &lt;/div&gt;
 
 
-&lt;!--START webvtt--&gt;
 
   &lt;h2 id=&quot;iana&quot;&gt;IANA considerations&lt;/h2&gt;
 
   &lt;!-- <A HREF="http://www.w3.org/2002/06/registering-mediatype.html">http://www.w3.org/2002/06/registering-mediatype.html</A> --&gt;
 
-&lt;!--END webvtt--&gt;
 
   &lt;h3&gt;&lt;dfn&gt;&lt;code&gt;text/html&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
@@ -113702,98 +113813,6 @@
   href=&quot;#refsJSON&quot;&gt;[JSON]&lt;/a&gt;&lt;/p&gt;
 
 
-&lt;!--END complete--&gt;&lt;!--END dev-html--&gt;
-&lt;!--START webvtt--&gt;
-&lt;!--TOPIC:Video Text Tracks--&gt;
-  &lt;h3&gt;&lt;dfn&gt;&lt;code&gt;text/vtt&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;p&gt;This registration is for community review and will be submitted
-  to the IESG for review, approval, and registration with IANA.&lt;/p&gt;
-
-  &lt;!--
-   To: <A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ietf-types at iana.org</A>
-   Subject: Registration of media type text/cues
-  --&gt;
-
-  &lt;dl&gt;
-   &lt;dt&gt;Type name:&lt;/dt&gt;
-   &lt;dd&gt;text&lt;/dd&gt;
-   &lt;dt&gt;Subtype name:&lt;/dt&gt;
-   &lt;dd&gt;vtt&lt;/dd&gt;
-   &lt;dt&gt;Required parameters:&lt;/dt&gt;
-   &lt;dd&gt;No parameters&lt;/dd&gt;
-   &lt;dt&gt;Optional parameters:&lt;/dt&gt;
-   &lt;dd&gt;No parameters&lt;/dd&gt;
-   &lt;dt&gt;Encoding considerations:&lt;/dt&gt;
-   &lt;dd&gt;8bit (always UTF-8)&lt;/dd&gt;
-&lt;!--ADD-TOPIC:Security--&gt;
-   &lt;dt&gt;Security considerations:&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Text track files themselves pose no immediate risk unless
-    sensitive information is included within the
-    data. Implementations, however, are required to follow specific
-    rules when processing text tracks, to ensure that certain
-    origin-based restrictions are honored. Failure to correctly
-    implement these rules can result in information leakage,
-    cross-site scripting attacks, and the like.&lt;/p&gt;
-   &lt;/dd&gt;
-&lt;!--REMOVE-TOPIC:Security--&gt;
-   &lt;dt&gt;Interoperability considerations:&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;p&gt;Rules for processing both conforming and non-conforming content
-    are defined in this specification.&lt;/p&gt;
-   &lt;/dd&gt;
-   &lt;dt&gt;Published specification:&lt;/dt&gt;
-   &lt;dd&gt;
-    This document is the relevant specification.
-   &lt;/dd&gt;
-   &lt;dt&gt;Applications that use this media type:&lt;/dt&gt;
-   &lt;dd&gt;
-    Web browsers and other video players.
-   &lt;/dd&gt;
-   &lt;dt&gt;Additional information:&lt;/dt&gt;
-   &lt;dd&gt;
-    &lt;dl&gt;
-     &lt;dt&gt;Magic number(s):&lt;/dt&gt;
-     &lt;dd&gt;
-      &lt;p&gt;WebVTT files all begin with one of the following byte sequences (where &quot;EOF&quot; means the end of the file):&lt;/p&gt;
-      &lt;ul class=&quot;brief&quot;&gt;
-       &lt;li&gt; EF BB BF 57 45 42 56 54 54 0A
-       &lt;li&gt; EF BB BF 57 45 42 56 54 54 0D
-       &lt;li&gt; EF BB BF 57 45 42 56 54 54 20
-       &lt;li&gt; EF BB BF 57 45 42 56 54 54 09
-       &lt;li&gt; EF BB BF 57 45 42 56 54 54 EOF
-       &lt;li&gt;          57 45 42 56 54 54 0A
-       &lt;li&gt;          57 45 42 56 54 54 0D
-       &lt;li&gt;          57 45 42 56 54 54 20
-       &lt;li&gt;          57 45 42 56 54 54 09
-       &lt;li&gt;          57 45 42 56 54 54 EOF
-      &lt;/ul&gt;
-      &lt;p class=&quot;note&quot;&gt;(An optional UTF-8 BOM, the ASCII string &quot;&lt;code title=&quot;&quot;&gt;WEBVTT&lt;/code&gt;&quot;, and finally a space, tab, line break, or the end of the file.)
-     &lt;/dd&gt;
-     &lt;dt&gt;File extension(s):&lt;/dt&gt;
-     &lt;dd&gt;&quot;&lt;code title=&quot;&quot;&gt;vtt&lt;/code&gt;&quot;&lt;/dd&gt;
-     &lt;dt&gt;Macintosh file type code(s):&lt;/dt&gt;
-     &lt;dd&gt;No specific Macintosh file type codes are recommended for this type.&lt;/dd&gt;
-    &lt;/dl&gt;
-   &lt;/dd&gt;
-   &lt;dt&gt;Person &amp; email address to contact for further information:&lt;/dt&gt;
-   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
-   &lt;dt&gt;Intended usage:&lt;/dt&gt;
-   &lt;dd&gt;Common&lt;/dd&gt;
-   &lt;dt&gt;Restrictions on usage:&lt;/dt&gt;
-   &lt;dd&gt;No restrictions apply.&lt;/dd&gt;
-   &lt;dt&gt;Author:&lt;/dt&gt;
-   &lt;dd&gt;Ian Hickson &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">ian at hixie.ch</A>&gt;&lt;/dd&gt;
-   &lt;dt&gt;Change controller:&lt;/dt&gt;
-   &lt;dd&gt;W3C&lt;/dd&gt;
-  &lt;/dl&gt;
-
-  &lt;p&gt;Fragment identifiers have no meaning with
-  &lt;code&gt;text/vtt&lt;/code&gt; resources.&lt;/p&gt;
-&lt;!--END webvtt--&gt;
-&lt;!--START complete--&gt;&lt;!--START dev-html--&gt;
-
 &lt;!--TOPIC:HTML--&gt;
   &lt;h3&gt;&lt;dfn title=&quot;http-ping-from&quot;&gt;&lt;code&gt;Ping-From&lt;/code&gt;&lt;/dfn&gt;&lt;/h3&gt;
 
@@ -118810,6 +118829,7 @@
   Laura L. Carlson,
   Laura Wisewell,
   Laurens Holst,
+  Lawrence Forooghian,
   Lee Kowalkowski,
   Leif Halvard Silli,
   Lenny Domnitser,


</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="014605.html">[html5] r7747 - [giow] (3) Needed for compatibility. Fixing	https://www.w3.org/Bugs/Public/show_ [...]
</A></li>
	<LI>Next message: <A HREF="014607.html">[html5] r7749 - [giow] (3) make &lt;ruby&gt; reset text-indent for	sanity's sake (like with table) Fix [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#14606">[ date ]</a>
              <a href="thread.html#14606">[ thread ]</a>
              <a href="subject.html#14606">[ subject ]</a>
              <a href="author.html#14606">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
