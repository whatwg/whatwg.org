<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4178 - [acgiow] (2) Redefine how to parse RCDATA and	RAWTEXT elements, and introduce a  [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4178%20-%20%5Bacgiow%5D%20%282%29%20Redefine%20how%20to%20parse%20RCDATA%20and%0A%09RAWTEXT%20elements%2C%20and%20introduce%20a%20%20%5B...%5D&In-Reply-To=%3C20091020003204.680D51389D7%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011049.html">
   <LINK REL="Next"  HREF="011051.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4178 - [acgiow] (2) Redefine how to parse RCDATA and	RAWTEXT elements, and introduce a  [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4178%20-%20%5Bacgiow%5D%20%282%29%20Redefine%20how%20to%20parse%20RCDATA%20and%0A%09RAWTEXT%20elements%2C%20and%20introduce%20a%20%20%5B...%5D&In-Reply-To=%3C20091020003204.680D51389D7%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r4178 - [acgiow] (2) Redefine how to parse RCDATA and	RAWTEXT elements, and introduce a  [...]">whatwg at whatwg.org
       </A><BR>
    <I>Mon Oct 19 17:32:04 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011049.html">[html5] r4177 - [ct] (0) Remove the 'content model flag' and expand	it into separate states inst [...]
</A></li>
        <LI>Next message: <A HREF="011051.html">[html5] r4179 - [c] (0) Change how &lt;script&gt;'s content restrictions	are written to make it more c [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11050">[ date ]</a>
              <a href="thread.html#11050">[ thread ]</a>
              <a href="subject.html#11050">[ subject ]</a>
              <a href="author.html#11050">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-10-19 17:32:01 -0700 (Mon, 19 Oct 2009)
New Revision: 4178

Modified:
   complete.html
   index
   source
Log:
[acgiow] (2) Redefine how to parse RCDATA and RAWTEXT elements, and introduce a whole new way to parse &lt;script&gt; blocks, along with new rules for authors. This should improve compatibility with &lt;script&gt; parsing on the Web, but it might need a few more tweaks.

Modified: complete.html
===================================================================
--- complete.html	2009-10-19 11:00:31 UTC (rev 4177)
+++ complete.html	2009-10-20 00:32:01 UTC (rev 4178)
@@ -110,7 +110,7 @@
 
   &lt;header class=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;Web Applications 1.0&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 19 October 2009&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 20 October 2009&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -359,7 +359,8 @@
      &lt;li&gt;&lt;a href=#script&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;The &lt;code&gt;script&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#scriptingLanguages&gt;&lt;span class=secno&gt;4.3.1.1 &lt;/span&gt;Scripting languages&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;Inline documentation for external scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#restrictions-for-contents-of-script-elements&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;Restrictions for contents of &lt;code&gt;script&lt;/code&gt; elements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.3 &lt;/span&gt;Inline documentation for external scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-noscript-element&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The &lt;code&gt;noscript&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#sections&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Sections&lt;/a&gt;
     &lt;ol&gt;
@@ -1074,43 +1075,52 @@
        &lt;li&gt;&lt;a href=#script-data-escaped-state&gt;&lt;span class=secno&gt;11.2.4.21 &lt;/span&gt;Script data escaped state&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#script-data-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.22 &lt;/span&gt;Script data escaped dash state&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.23 &lt;/span&gt;Script data escaped dash dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-space-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;Comment end space state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;Script data escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;Script data escaped end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;Script data escaped end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;Script data double escape start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;Script data double escaped state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;Script data double escaped dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;Script data double escaped dash dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;Script data double escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-end-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;Script data double escape end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-space-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;Comment end space state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.61 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.62 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.63 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.64 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.65 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.66 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.67 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.68 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#tree-construction&gt;&lt;span class=secno&gt;11.2.5 &lt;/span&gt;Tree construction&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;11.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
@@ -12193,10 +12203,12 @@
    &lt;dd&gt;Where &lt;a href=#phrasing-content&gt;phrasing content&lt;/a&gt; is expected.&lt;/dd&gt;
    &lt;dt&gt;Content model:&lt;/dt&gt;
    &lt;dd&gt;If there is no &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute, depends on the value of the &lt;code title=attr-script-type&gt;&lt;a href=#attr-script-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/dd&gt;
+   attribute, depends on the value of the &lt;code title=attr-script-type&gt;&lt;a href=#attr-script-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, but must match
+   &lt;a href=#restrictions-for-contents-of-script-elements&gt;script content restrictions&lt;/a&gt;.&lt;/dd&gt;
    &lt;dd&gt;If there &lt;em&gt;is&lt;/em&gt; a &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute, the element must be either empty or contain only
-   &lt;a href=#inline-documentation-for-external-scripts&gt;script documentation&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#inline-documentation-for-external-scripts&gt;script documentation&lt;/a&gt; that also matches &lt;a href=#restrictions-for-contents-of-script-elements&gt;script
+   content restrictions&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -12804,8 +12816,59 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;&lt;dfn title=&quot;script documentation&quot;&gt;Inline documentation for external scripts&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=restrictions-for-contents-of-script-elements&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;&lt;dfn title=&quot;script content restrictions&quot;&gt;Restrictions for contents of &lt;code&gt;script&lt;/code&gt; elements&lt;/dfn&gt;&lt;/h5&gt;
 
+  &lt;p&gt;The contents of a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element must match the
+  &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; production in the following ABNF, the
+  character set for which is Unicode. &lt;a href=#refsABNF&gt;[ABNF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;pre&gt;script        = body1
+
+body1         = *( text1 / body2 )
+body2         = &quot;&lt;!--&quot; *( text2 / body3 script-end ) [ body3 ] &quot;--&gt;&quot;
+body3         = script-start *text3
+
+script-start  = lt       s c r i p t tag-end
+script-end    = lt slash s c r i p t tag-end
+
+text1         = &lt;anything that doesn't match not-text1&gt;
+text2         = &lt;anything that doesn't match not-text2&gt;
+text3         = &lt;anything that doesn't match not-text3&gt;
+
+not-text1     = &quot;&lt;!--&quot; / script-end
+not-text2     = script-start / script-end / &quot;--&gt;&quot;
+not-text3     = script-end / &quot;--&gt;&quot;
+
+lt            =  %x003C ; U+003C LESS-THAN SIGN character (&lt;)
+slash         =  %x002F ; U+002F SOLIDUS character (/)
+
+s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
+s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
+c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
+c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
+r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
+r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
+i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
+i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
+p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
+p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
+t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
+t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T
+
+tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION
+tag-end       =/ %x000A ; U+000A LINE FEED (LF)
+tag-end       =/ %x000C ; U+000C FORM FEED (FF)
+tag-end       =/ %x0020 ; U+0020 SPACE
+tag-end       =/ %x002F ; U+002F SOLIDUS (/)
+tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)&lt;/pre&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element contains &lt;a href=#inline-documentation-for-external-scripts&gt;script
+  documentation&lt;/a&gt;, there are further restrictions on the contents
+  of the element, as described in the section below.&lt;/p&gt;
+
+
+  &lt;h5 id=inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.3 &lt;/span&gt;&lt;dfn title=&quot;script documentation&quot;&gt;Inline documentation for external scripts&lt;/dfn&gt;&lt;/h5&gt;
+
   &lt;p&gt;If a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is specified, then the
   contents of the &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element, if any, must be such
   that the value of the DOM &lt;code title=dom-script-text&gt;&lt;a href=#dom-script-text&gt;text&lt;/a&gt;&lt;/code&gt;
@@ -12833,6 +12896,10 @@
   &lt;p class=note&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
 
+  &lt;p class=note&gt;This requirement is in addition to the earlier
+  restrictiosn on the syntax of contents of &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;
+  elements.&lt;/p&gt;
+
   &lt;div class=example&gt;
 
    &lt;p&gt;This allows authors to include documentation, such as license
@@ -68948,41 +69015,9 @@
   case-insensitively match the tag name of the element followed by one
   of U+0009 CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM
   FEED (FF), U+000D CARRIAGE RETURN (CR), U+0020 SPACE, U+003E
-  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/), unless that string is
-  part of an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping text
-  span&lt;/a&gt;.&lt;/p&gt;
+  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/).&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn id=syntax-escape title=syntax-escape&gt;escaping text span&lt;/dfn&gt; is a span
-  of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that starts with an &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span start&lt;/a&gt; that is
-  not itself in an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping text
-  span&lt;/a&gt;, and ends at the next &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text span end&lt;/a&gt;. There
-  cannot be any &lt;a href=#syntax-charref title=syntax-charref&gt;character
-  references&lt;/a&gt; inside an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping
-  text span&lt;/a&gt; &mdash; sequences of characters that would look
-  like &lt;a href=#syntax-charref title=syntax-charref&gt;character references&lt;/a&gt; do not
-  have special meaning.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn id=syntax-escape-start title=syntax-escape-start&gt;escaping text span
-  start&lt;/dfn&gt; is a part of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that
-  consists of the four character sequence &quot;&lt;code title=&quot;&quot;&gt;&lt;!--&lt;/code&gt;&quot; (U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
-  MARK, U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;dfn id=syntax-escape-end title=syntax-escape-end&gt;escaping text span end&lt;/dfn&gt; is
-  a part of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that consists of the
-  three character sequence &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
-  HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span
-  start&lt;/a&gt; may share its U+002D HYPHEN-MINUS characters with its
-  corresponding &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text span
-  end&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The text in &lt;a href=#raw-text-elements&gt;raw text elements&lt;/a&gt; and &lt;a href=#rcdata-elements&gt;RCDATA
-  elements&lt;/a&gt; must not have an &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span start&lt;/a&gt; that is
-  not followed by an &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text
-  span end&lt;/a&gt;.&lt;/p&gt;
-
-
   &lt;h4 id=text-0&gt;&lt;span class=secno&gt;11.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
@@ -70881,13 +70916,13 @@
    character&lt;/a&gt; (add 0x0020 to the character's code point) to the
    current tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
-   &lt;a href=#script-data-end-tag-name-state&gt;Script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#script-data-end-tag-name-state&gt;script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
-   &lt;a href=#script-data-end-tag-name-state&gt;Script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#script-data-end-tag-name-state&gt;script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
@@ -70928,13 +70963,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;a href=#script-data-escaped-dash-state&gt;script data escaped dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Stay in
-   the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Stay in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.22 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -70944,13 +70983,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;a href=#script-data-escaped-dash-dash-state&gt;script data escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.23 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -70960,6 +71003,10 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
    &lt;a href=#script-data-escaped-dash-dash-state&gt;script data escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
    &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
@@ -70969,18 +71016,269 @@
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.24 &lt;/span&gt;&lt;dfn&gt;Script data escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Set the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Switch
+   to the &lt;a href=#script-data-escaped-end-tag-open-state&gt;script data escaped end tag open state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token. Set the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Append the
+   lowercase version of the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; (add
+   0x0020 to the character's code point) to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt;. Switch to the &lt;a href=#script-data-double-escape-start-state&gt;script data double escape start
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token. Set the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Append the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt;. Switch to the &lt;a href=#script-data-double-escape-start-state&gt;script data double escape start
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and reconsume the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data
+   escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   lowercase version of the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; (add
+   0x0020 to the character's code point). Append the &lt;a href=#current-input-character&gt;current
+   input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Finally,
+   switch to the &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name
+   state&lt;/a&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;. Append the &lt;a href=#current-input-character&gt;current
+   input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Finally,
+   switch to the &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name
+   state&lt;/a&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, and reconsume the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
   &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
    &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
    &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
    &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
    &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then switch to the &lt;a href=#before-attribute-name-state&gt;before attribute name
+   state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then switch to the &lt;a href=#self-closing-start-tag-state&gt;self-closing start tag
+   state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then emit the current tag token and switch to the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything
+   else&quot; entry below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   current tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
+   &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
+   tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
+   &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, a character token for each of the characters in
+   the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; (in the order they were added to
+   the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
+   in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-start-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;&lt;dfn&gt;Script data double escape start state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. If the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; is the string &quot;&lt;code title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;a href=#script-data-double-escaped-state&gt;script data
+   double escaped state&lt;/a&gt;. Otherwise, switch to the &lt;a href=#script-data-escaped-state&gt;script
+   data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-start-state&gt;script data double
+   escape start state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-start-state&gt;script data double
+   escape start state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;&lt;dfn&gt;Script data double escaped state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;a href=#script-data-double-escaped-dash-state&gt;script data double escaped dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Stay in the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;a href=#script-data-double-escaped-dash-dash-state&gt;script data double escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
+   &lt;a href=#script-data-double-escaped-dash-dash-state&gt;script data double escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;&lt;dfn&gt;Script data double escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002F SOLIDUS character token. Set the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Switch to the &lt;a href=#script-data-double-escape-end-state&gt;script data
+   double escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-end-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;&lt;dfn&gt;Script data double escape end state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. If the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; is the string &quot;&lt;code title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;a href=#script-data-escaped-state&gt;script data
+   escaped state&lt;/a&gt;. Otherwise, switch to the &lt;a href=#script-data-double-escaped-state&gt;script data
+   double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-end-state&gt;script data double
+   escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-end-state&gt;script data double
+   escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
    &lt;dd&gt;Stay in the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
@@ -71014,7 +71312,7 @@
    the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.25 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71065,7 +71363,7 @@
   associated with it (if any).&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.26 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71109,7 +71407,7 @@
    its value to the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.27 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71149,7 +71447,7 @@
    attribute's value. Switch to the &lt;a href=#attribute-value-(unquoted)-state&gt;attribute value (unquoted)
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.28 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71171,7 +71469,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(double-quoted)-state&gt;attribute value
    (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.29 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71193,7 +71491,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(single-quoted)-state&gt;attribute value
    (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.30 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71230,7 +71528,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(unquoted)-state&gt;attribute value (unquoted)
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.31 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Attempt to &lt;a href=#consume-a-character-reference&gt;consume a character reference&lt;/a&gt;.&lt;/p&gt;
 
@@ -71244,7 +71542,7 @@
   in when were switched into this state.&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.32 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71270,7 +71568,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.33 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71287,7 +71585,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.34 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to and including the first U+003E
   GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
@@ -71305,7 +71603,7 @@
   character.&lt;/p&gt;
 
 
-  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.35 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
   characters, consume those two characters, create a comment token
@@ -71330,7 +71628,7 @@
   comment.&lt;/p&gt;
 
 
-  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;11.2.4.36 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71350,7 +71648,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.37 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71371,7 +71669,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;11.2.4.38 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71387,7 +71685,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data. Stay in the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.39 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71404,7 +71702,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;11.2.4.40 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71445,7 +71743,7 @@
    comment token's data. Switch to the &lt;a href=#comment-state&gt;comment
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.41 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71469,7 +71767,7 @@
    character&lt;/a&gt; to the comment token's data. Switch to the
    &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-space-state&gt;&lt;span class=secno&gt;11.2.4.42 &lt;/span&gt;&lt;dfn&gt;Comment end space state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-space-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;&lt;dfn&gt;Comment end space state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71497,7 +71795,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's data. Switch
    to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;11.2.4.43 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71517,7 +71815,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current
    character in the &lt;a href=#before-doctype-name-state&gt;before DOCTYPE name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.44 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71549,7 +71847,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;. Switch to the &lt;a href=#doctype-name-state&gt;DOCTYPE name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.45 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71580,7 +71878,7 @@
    DOCTYPE token's name. Stay in the &lt;a href=#doctype-name-state&gt;DOCTYPE name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.46 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71620,7 +71918,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.47 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71641,7 +71939,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current character in
    the &lt;a href=#before-doctype-public-identifier-state&gt;before DOCTYPE public identifier state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.48 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71677,7 +71975,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.49 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71699,7 +71997,7 @@
    token's public identifier. Stay in the &lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;DOCTYPE public
    identifier (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.50 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71721,7 +72019,7 @@
    token's public identifier. Stay in the &lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;DOCTYPE public
    identifier (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.51 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71757,7 +72055,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.52 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;11.2.4.61 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71793,7 +72091,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.53 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;11.2.4.62 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71814,7 +72112,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current character in
    the &lt;a href=#before-doctype-system-identifier-state&gt;before DOCTYPE system identifier state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.54 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.63 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71850,7 +72148,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.55 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.64 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71873,7 +72171,7 @@
    DOCTYPE token's system identifier. Stay in the &lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;DOCTYPE system
    identifier (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.56 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;11.2.4.65 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71896,7 +72194,7 @@
    DOCTYPE token's system identifier. Stay in the &lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;DOCTYPE system
    identifier (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.57 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;11.2.4.66 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71922,7 +72220,7 @@
    state&lt;/a&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the DOCTYPE token's
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.58 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;11.2.4.67 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -71937,7 +72235,7 @@
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Stay in the &lt;a href=#bogus-doctype-state&gt;bogus DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.59 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;11.2.4.68 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to the next occurrence of the three
   character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
@@ -71954,7 +72252,7 @@
 
 
 
-  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.60 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
+  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;11.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn id=consume-a-character-reference&gt;consume a character
   reference&lt;/dfn&gt;. This definition is used when parsing character

Modified: index
===================================================================
--- index	2009-10-19 11:00:31 UTC (rev 4177)
+++ index	2009-10-20 00:32:01 UTC (rev 4178)
@@ -111,7 +111,7 @@
 
   &lt;header class=head&gt;&lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;hgroup&gt;&lt;h1&gt;HTML5&lt;/h1&gt;
-    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 19 October 2009&lt;/h2&gt;
+    &lt;h2 class=&quot;no-num no-toc&quot;&gt;Draft Standard &mdash; 20 October 2009&lt;/h2&gt;
    &lt;/hgroup&gt;&lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -349,7 +349,8 @@
      &lt;li&gt;&lt;a href=#script&gt;&lt;span class=secno&gt;4.3.1 &lt;/span&gt;The &lt;code&gt;script&lt;/code&gt; element&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#scriptingLanguages&gt;&lt;span class=secno&gt;4.3.1.1 &lt;/span&gt;Scripting languages&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;Inline documentation for external scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#restrictions-for-contents-of-script-elements&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;Restrictions for contents of &lt;code&gt;script&lt;/code&gt; elements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.3 &lt;/span&gt;Inline documentation for external scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-noscript-element&gt;&lt;span class=secno&gt;4.3.2 &lt;/span&gt;The &lt;code&gt;noscript&lt;/code&gt; element&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#sections&gt;&lt;span class=secno&gt;4.4 &lt;/span&gt;Sections&lt;/a&gt;
     &lt;ol&gt;
@@ -903,43 +904,52 @@
        &lt;li&gt;&lt;a href=#script-data-escaped-state&gt;&lt;span class=secno&gt;9.2.4.21 &lt;/span&gt;Script data escaped state&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#script-data-escaped-dash-state&gt;&lt;span class=secno&gt;9.2.4.22 &lt;/span&gt;Script data escaped dash state&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;9.2.4.23 &lt;/span&gt;Script data escaped dash dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.24 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.25 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.26 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.27 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.28 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.29 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;9.2.4.30 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.31 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;9.2.4.32 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;9.2.4.33 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;9.2.4.34 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;9.2.4.35 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;9.2.4.36 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;9.2.4.37 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;9.2.4.38 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;9.2.4.39 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;9.2.4.40 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;9.2.4.41 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#comment-end-space-state&gt;&lt;span class=secno&gt;9.2.4.42 &lt;/span&gt;Comment end space state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;9.2.4.43 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.44 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.45 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.46 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;9.2.4.47 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.48 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.49 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.50 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.51 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;9.2.4.52 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;9.2.4.53 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.54 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.55 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.56 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.57 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;9.2.4.58 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;9.2.4.59 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;9.2.4.60 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;9.2.4.24 &lt;/span&gt;Script data escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;9.2.4.25 &lt;/span&gt;Script data escaped end tag open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;9.2.4.26 &lt;/span&gt;Script data escaped end tag name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-start-state&gt;&lt;span class=secno&gt;9.2.4.27 &lt;/span&gt;Script data double escape start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-state&gt;&lt;span class=secno&gt;9.2.4.28 &lt;/span&gt;Script data double escaped state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;9.2.4.29 &lt;/span&gt;Script data double escaped dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;9.2.4.30 &lt;/span&gt;Script data double escaped dash dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;9.2.4.31 &lt;/span&gt;Script data double escaped less-than sign state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#script-data-double-escape-end-state&gt;&lt;span class=secno&gt;9.2.4.32 &lt;/span&gt;Script data double escape end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.33 &lt;/span&gt;Before attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.34 &lt;/span&gt;Attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.35 &lt;/span&gt;After attribute name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.36 &lt;/span&gt;Before attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.37 &lt;/span&gt;Attribute value (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.38 &lt;/span&gt;Attribute value (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;9.2.4.39 &lt;/span&gt;Attribute value (unquoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.40 &lt;/span&gt;Character reference in attribute value state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;9.2.4.41 &lt;/span&gt;After attribute value (quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#self-closing-start-tag-state&gt;&lt;span class=secno&gt;9.2.4.42 &lt;/span&gt;Self-closing start tag state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-comment-state&gt;&lt;span class=secno&gt;9.2.4.43 &lt;/span&gt;Bogus comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#markup-declaration-open-state&gt;&lt;span class=secno&gt;9.2.4.44 &lt;/span&gt;Markup declaration open state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-state&gt;&lt;span class=secno&gt;9.2.4.45 &lt;/span&gt;Comment start state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-start-dash-state&gt;&lt;span class=secno&gt;9.2.4.46 &lt;/span&gt;Comment start dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-state&gt;&lt;span class=secno&gt;9.2.4.47 &lt;/span&gt;Comment state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-dash-state&gt;&lt;span class=secno&gt;9.2.4.48 &lt;/span&gt;Comment end dash state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-state&gt;&lt;span class=secno&gt;9.2.4.49 &lt;/span&gt;Comment end state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-bang-state&gt;&lt;span class=secno&gt;9.2.4.50 &lt;/span&gt;Comment end bang state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#comment-end-space-state&gt;&lt;span class=secno&gt;9.2.4.51 &lt;/span&gt;Comment end space state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-state&gt;&lt;span class=secno&gt;9.2.4.52 &lt;/span&gt;DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.53 &lt;/span&gt;Before DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.54 &lt;/span&gt;DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.55 &lt;/span&gt;After DOCTYPE name state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;9.2.4.56 &lt;/span&gt;After DOCTYPE public keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.57 &lt;/span&gt;Before DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.58 &lt;/span&gt;DOCTYPE public identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.59 &lt;/span&gt;DOCTYPE public identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.60 &lt;/span&gt;After DOCTYPE public identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;9.2.4.61 &lt;/span&gt;Between DOCTYPE public and system identifiers state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;9.2.4.62 &lt;/span&gt;After DOCTYPE system keyword state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.63 &lt;/span&gt;Before DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.64 &lt;/span&gt;DOCTYPE system identifier (double-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.65 &lt;/span&gt;DOCTYPE system identifier (single-quoted) state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.66 &lt;/span&gt;After DOCTYPE system identifier state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#bogus-doctype-state&gt;&lt;span class=secno&gt;9.2.4.67 &lt;/span&gt;Bogus DOCTYPE state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cdata-section-state&gt;&lt;span class=secno&gt;9.2.4.68 &lt;/span&gt;CDATA section state&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#tokenizing-character-references&gt;&lt;span class=secno&gt;9.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#tree-construction&gt;&lt;span class=secno&gt;9.2.5 &lt;/span&gt;Tree construction&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#creating-and-inserting-elements&gt;&lt;span class=secno&gt;9.2.5.1 &lt;/span&gt;Creating and inserting elements&lt;/a&gt;&lt;/li&gt;
@@ -12022,10 +12032,12 @@
    &lt;dd&gt;Where &lt;a href=#phrasing-content&gt;phrasing content&lt;/a&gt; is expected.&lt;/dd&gt;
    &lt;dt&gt;Content model:&lt;/dt&gt;
    &lt;dd&gt;If there is no &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;
-   attribute, depends on the value of the &lt;code title=attr-script-type&gt;&lt;a href=#attr-script-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute.&lt;/dd&gt;
+   attribute, depends on the value of the &lt;code title=attr-script-type&gt;&lt;a href=#attr-script-type&gt;type&lt;/a&gt;&lt;/code&gt; attribute, but must match
+   &lt;a href=#restrictions-for-contents-of-script-elements&gt;script content restrictions&lt;/a&gt;.&lt;/dd&gt;
    &lt;dd&gt;If there &lt;em&gt;is&lt;/em&gt; a &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;
    attribute, the element must be either empty or contain only
-   &lt;a href=#inline-documentation-for-external-scripts&gt;script documentation&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#inline-documentation-for-external-scripts&gt;script documentation&lt;/a&gt; that also matches &lt;a href=#restrictions-for-contents-of-script-elements&gt;script
+   content restrictions&lt;/a&gt;.&lt;/dd&gt;
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
@@ -12633,8 +12645,59 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;&lt;dfn title=&quot;script documentation&quot;&gt;Inline documentation for external scripts&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=restrictions-for-contents-of-script-elements&gt;&lt;span class=secno&gt;4.3.1.2 &lt;/span&gt;&lt;dfn title=&quot;script content restrictions&quot;&gt;Restrictions for contents of &lt;code&gt;script&lt;/code&gt; elements&lt;/dfn&gt;&lt;/h5&gt;
 
+  &lt;p&gt;The contents of a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element must match the
+  &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; production in the following ABNF, the
+  character set for which is Unicode. &lt;a href=#refsABNF&gt;[ABNF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;pre&gt;script        = body1
+
+body1         = *( text1 / body2 )
+body2         = &quot;&lt;!--&quot; *( text2 / body3 script-end ) [ body3 ] &quot;--&gt;&quot;
+body3         = script-start *text3
+
+script-start  = lt       s c r i p t tag-end
+script-end    = lt slash s c r i p t tag-end
+
+text1         = &lt;anything that doesn't match not-text1&gt;
+text2         = &lt;anything that doesn't match not-text2&gt;
+text3         = &lt;anything that doesn't match not-text3&gt;
+
+not-text1     = &quot;&lt;!--&quot; / script-end
+not-text2     = script-start / script-end / &quot;--&gt;&quot;
+not-text3     = script-end / &quot;--&gt;&quot;
+
+lt            =  %x003C ; U+003C LESS-THAN SIGN character (&lt;)
+slash         =  %x002F ; U+002F SOLIDUS character (/)
+
+s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
+s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
+c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
+c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
+r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
+r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
+i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
+i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
+p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
+p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
+t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
+t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T
+
+tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION
+tag-end       =/ %x000A ; U+000A LINE FEED (LF)
+tag-end       =/ %x000C ; U+000C FORM FEED (FF)
+tag-end       =/ %x0020 ; U+0020 SPACE
+tag-end       =/ %x002F ; U+002F SOLIDUS (/)
+tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)&lt;/pre&gt;
+
+  &lt;p&gt;When a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element contains &lt;a href=#inline-documentation-for-external-scripts&gt;script
+  documentation&lt;/a&gt;, there are further restrictions on the contents
+  of the element, as described in the section below.&lt;/p&gt;
+
+
+  &lt;h5 id=inline-documentation-for-external-scripts&gt;&lt;span class=secno&gt;4.3.1.3 &lt;/span&gt;&lt;dfn title=&quot;script documentation&quot;&gt;Inline documentation for external scripts&lt;/dfn&gt;&lt;/h5&gt;
+
   &lt;p&gt;If a &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element's &lt;code title=attr-script-src&gt;&lt;a href=#attr-script-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute is specified, then the
   contents of the &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt; element, if any, must be such
   that the value of the DOM &lt;code title=dom-script-text&gt;&lt;a href=#dom-script-text&gt;text&lt;/a&gt;&lt;/code&gt;
@@ -12662,6 +12725,10 @@
   &lt;p class=note&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
 
+  &lt;p class=note&gt;This requirement is in addition to the earlier
+  restrictiosn on the syntax of contents of &lt;code&gt;&lt;a href=#script&gt;script&lt;/a&gt;&lt;/code&gt;
+  elements.&lt;/p&gt;
+
   &lt;div class=example&gt;
 
    &lt;p&gt;This allows authors to include documentation, such as license
@@ -60006,41 +60073,9 @@
   case-insensitively match the tag name of the element followed by one
   of U+0009 CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM
   FEED (FF), U+000D CARRIAGE RETURN (CR), U+0020 SPACE, U+003E
-  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/), unless that string is
-  part of an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping text
-  span&lt;/a&gt;.&lt;/p&gt;
+  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/).&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn id=syntax-escape title=syntax-escape&gt;escaping text span&lt;/dfn&gt; is a span
-  of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that starts with an &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span start&lt;/a&gt; that is
-  not itself in an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping text
-  span&lt;/a&gt;, and ends at the next &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text span end&lt;/a&gt;. There
-  cannot be any &lt;a href=#syntax-charref title=syntax-charref&gt;character
-  references&lt;/a&gt; inside an &lt;a href=#syntax-escape title=syntax-escape&gt;escaping
-  text span&lt;/a&gt; &mdash; sequences of characters that would look
-  like &lt;a href=#syntax-charref title=syntax-charref&gt;character references&lt;/a&gt; do not
-  have special meaning.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn id=syntax-escape-start title=syntax-escape-start&gt;escaping text span
-  start&lt;/dfn&gt; is a part of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that
-  consists of the four character sequence &quot;&lt;code title=&quot;&quot;&gt;&lt;!--&lt;/code&gt;&quot; (U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
-  MARK, U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;dfn id=syntax-escape-end title=syntax-escape-end&gt;escaping text span end&lt;/dfn&gt; is
-  a part of &lt;a href=#syntax-text title=syntax-text&gt;text&lt;/a&gt; that consists of the
-  three character sequence &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
-  HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span
-  start&lt;/a&gt; may share its U+002D HYPHEN-MINUS characters with its
-  corresponding &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text span
-  end&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The text in &lt;a href=#raw-text-elements&gt;raw text elements&lt;/a&gt; and &lt;a href=#rcdata-elements&gt;RCDATA
-  elements&lt;/a&gt; must not have an &lt;a href=#syntax-escape-start title=syntax-escape-start&gt;escaping text span start&lt;/a&gt; that is
-  not followed by an &lt;a href=#syntax-escape-end title=syntax-escape-end&gt;escaping text
-  span end&lt;/a&gt;.&lt;/p&gt;
-
-
   &lt;h4 id=text-0&gt;&lt;span class=secno&gt;9.1.3 &lt;/span&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=syntax-text title=syntax-text&gt;Text&lt;/dfn&gt; is allowed inside elements,
@@ -61939,13 +61974,13 @@
    character&lt;/a&gt; (add 0x0020 to the character's code point) to the
    current tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
-   &lt;a href=#script-data-end-tag-name-state&gt;Script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#script-data-end-tag-name-state&gt;script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
    tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
    character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
-   &lt;a href=#script-data-end-tag-name-state&gt;Script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;a href=#script-data-end-tag-name-state&gt;script data end tag name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
@@ -61986,13 +62021,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;a href=#script-data-escaped-dash-state&gt;script data escaped dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Stay in
-   the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Stay in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-state&gt;&lt;span class=secno&gt;9.2.4.22 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -62002,13 +62041,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;a href=#script-data-escaped-dash-dash-state&gt;script data escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;&lt;h5 id=script-data-escaped-dash-dash-state&gt;&lt;span class=secno&gt;9.2.4.23 &lt;/span&gt;&lt;dfn&gt;Script data escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
 
@@ -62018,6 +62061,10 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
    &lt;a href=#script-data-escaped-dash-dash-state&gt;script data escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;a href=#script-data-escaped-less-than-sign-state&gt;script data escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
    &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
    &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
@@ -62027,18 +62074,269 @@
    &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.24 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;9.2.4.24 &lt;/span&gt;&lt;dfn&gt;Script data escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Set the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Switch
+   to the &lt;a href=#script-data-escaped-end-tag-open-state&gt;script data escaped end tag open state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token. Set the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Append the
+   lowercase version of the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; (add
+   0x0020 to the character's code point) to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt;. Switch to the &lt;a href=#script-data-double-escape-start-state&gt;script data double escape start
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character token. Set the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Append the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt;. Switch to the &lt;a href=#script-data-double-escape-start-state&gt;script data double escape start
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and reconsume the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data
+   escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-open-state&gt;&lt;span class=secno&gt;9.2.4.25 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   lowercase version of the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; (add
+   0x0020 to the character's code point). Append the &lt;a href=#current-input-character&gt;current
+   input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Finally,
+   switch to the &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name
+   state&lt;/a&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;. Append the &lt;a href=#current-input-character&gt;current
+   input character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Finally,
+   switch to the &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name
+   state&lt;/a&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, and reconsume the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-escaped-end-tag-name-state&gt;&lt;span class=secno&gt;9.2.4.26 &lt;/span&gt;&lt;dfn&gt;Script data escaped end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
   &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
    &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
    &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
    &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
    &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then switch to the &lt;a href=#before-attribute-name-state&gt;before attribute name
+   state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then switch to the &lt;a href=#self-closing-start-tag-state&gt;self-closing start tag
+   state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;a href=#appropriate-end-tag-token&gt;appropriate end tag
+   token&lt;/a&gt;, then emit the current tag token and switch to the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;. Otherwise, treat it as per the &quot;anything
+   else&quot; entry below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   current tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
+   &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the current
+   tag token's tag name. Append the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; to the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the
+   &lt;a href=#script-data-escaped-end-tag-name-state&gt;script data escaped end tag name state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, a character token for each of the characters in
+   the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; (in the order they were added to
+   the buffer), and reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;
+   in the &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-start-state&gt;&lt;span class=secno&gt;9.2.4.27 &lt;/span&gt;&lt;dfn&gt;Script data double escape start state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. If the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; is the string &quot;&lt;code title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;a href=#script-data-double-escaped-state&gt;script data
+   double escaped state&lt;/a&gt;. Otherwise, switch to the &lt;a href=#script-data-escaped-state&gt;script
+   data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-start-state&gt;script data double
+   escape start state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-start-state&gt;script data double
+   escape start state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-escaped-state&gt;script data escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-state&gt;&lt;span class=secno&gt;9.2.4.28 &lt;/span&gt;&lt;dfn&gt;Script data double escaped state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;a href=#script-data-double-escaped-dash-state&gt;script data double escaped dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Stay in the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-state&gt;&lt;span class=secno&gt;9.2.4.29 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;a href=#script-data-double-escaped-dash-dash-state&gt;script data double escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-dash-dash-state&gt;&lt;span class=secno&gt;9.2.4.30 &lt;/span&gt;&lt;dfn&gt;Script data double escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
+   &lt;a href=#script-data-double-escaped-dash-dash-state&gt;script data double escaped dash dash state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-double-escaped-less-than-sign-state&gt;script data double escaped less-than sign
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
+   &lt;a href=#script-data-state&gt;script data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the EOF character in the
+   &lt;a href=#data-state&gt;data state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Switch to the &lt;a href=#script-data-double-escaped-state&gt;script data double escaped
+   state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escaped-less-than-sign-state&gt;&lt;span class=secno&gt;9.2.4.31 &lt;/span&gt;&lt;dfn&gt;Script data double escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002F SOLIDUS character token. Set the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary
+   buffer&lt;/a&gt;&lt;/var&gt; to the empty string. Switch to the &lt;a href=#script-data-double-escape-end-state&gt;script data
+   double escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=script-data-double-escape-end-state&gt;&lt;span class=secno&gt;9.2.4.32 &lt;/span&gt;&lt;dfn&gt;Script data double escape end state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. If the &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt; is the string &quot;&lt;code title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;a href=#script-data-escaped-state&gt;script data
+   escaped state&lt;/a&gt;. Otherwise, switch to the &lt;a href=#script-data-double-escaped-state&gt;script data
+   double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the lowercase version of the &lt;a href=#current-input-character&gt;current input
+   character&lt;/a&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-end-state&gt;script data double
+   escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; as a character
+   token. Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the
+   &lt;var&gt;&lt;a href=#temporary-buffer&gt;temporary buffer&lt;/a&gt;&lt;/var&gt;. Stay in the &lt;a href=#script-data-double-escape-end-state&gt;script data double
+   escape end state&lt;/a&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; in the
+   &lt;a href=#script-data-double-escaped-state&gt;script data double escaped state&lt;/a&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=before-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.33 &lt;/span&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
    &lt;dd&gt;Stay in the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
@@ -62072,7 +62370,7 @@
    the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.25 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.34 &lt;/span&gt;&lt;dfn&gt;Attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62123,7 +62421,7 @@
   associated with it (if any).&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.26 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-name-state&gt;&lt;span class=secno&gt;9.2.4.35 &lt;/span&gt;&lt;dfn&gt;After attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62167,7 +62465,7 @@
    its value to the empty string. Switch to the &lt;a href=#attribute-name-state&gt;attribute name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.27 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.36 &lt;/span&gt;&lt;dfn&gt;Before attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62207,7 +62505,7 @@
    attribute's value. Switch to the &lt;a href=#attribute-value-(unquoted)-state&gt;attribute value (unquoted)
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.28 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.37 &lt;/span&gt;&lt;dfn&gt;Attribute value (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62229,7 +62527,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(double-quoted)-state&gt;attribute value
    (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.29 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.38 &lt;/span&gt;&lt;dfn&gt;Attribute value (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62251,7 +62549,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(single-quoted)-state&gt;attribute value
    (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;9.2.4.30 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=attribute-value-(unquoted)-state&gt;&lt;span class=secno&gt;9.2.4.39 &lt;/span&gt;&lt;dfn&gt;Attribute value (unquoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62288,7 +62586,7 @@
    attribute's value. Stay in the &lt;a href=#attribute-value-(unquoted)-state&gt;attribute value (unquoted)
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.31 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=character-reference-in-attribute-value-state&gt;&lt;span class=secno&gt;9.2.4.40 &lt;/span&gt;&lt;dfn&gt;Character reference in attribute value state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Attempt to &lt;a href=#consume-a-character-reference&gt;consume a character reference&lt;/a&gt;.&lt;/p&gt;
 
@@ -62302,7 +62600,7 @@
   in when were switched into this state.&lt;/p&gt;
 
 
-  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;9.2.4.32 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=after-attribute-value-(quoted)-state&gt;&lt;span class=secno&gt;9.2.4.41 &lt;/span&gt;&lt;dfn&gt;After attribute value (quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62328,7 +62626,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;9.2.4.33 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=self-closing-start-tag-state&gt;&lt;span class=secno&gt;9.2.4.42 &lt;/span&gt;&lt;dfn&gt;Self-closing start tag state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62345,7 +62643,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the character in
    the &lt;a href=#before-attribute-name-state&gt;before attribute name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;9.2.4.34 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-comment-state&gt;&lt;span class=secno&gt;9.2.4.43 &lt;/span&gt;&lt;dfn&gt;Bogus comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to and including the first U+003E
   GREATER-THAN SIGN character (&gt;) or the end of the file (EOF),
@@ -62363,7 +62661,7 @@
   character.&lt;/p&gt;
 
 
-  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;9.2.4.35 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=markup-declaration-open-state&gt;&lt;span class=secno&gt;9.2.4.44 &lt;/span&gt;&lt;dfn&gt;Markup declaration open state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;If the next two characters are both U+002D HYPHEN-MINUS (-)
   characters, consume those two characters, create a comment token
@@ -62388,7 +62686,7 @@
   comment.&lt;/p&gt;
 
 
-  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;9.2.4.36 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=comment-start-state&gt;&lt;span class=secno&gt;9.2.4.45 &lt;/span&gt;&lt;dfn&gt;Comment start state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62408,7 +62706,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;9.2.4.37 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-start-dash-state&gt;&lt;span class=secno&gt;9.2.4.46 &lt;/span&gt;&lt;dfn&gt;Comment start dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62429,7 +62727,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;9.2.4.38 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-state&gt;&lt;span class=secno&gt;9.2.4.47 &lt;/span&gt;&lt;dfn id=comment&gt;Comment state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62445,7 +62743,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment
    token's data. Stay in the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;9.2.4.39 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-dash-state&gt;&lt;span class=secno&gt;9.2.4.48 &lt;/span&gt;&lt;dfn&gt;Comment end dash state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62462,7 +62760,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's
    data. Switch to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;9.2.4.40 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-state&gt;&lt;span class=secno&gt;9.2.4.49 &lt;/span&gt;&lt;dfn&gt;Comment end state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62503,7 +62801,7 @@
    comment token's data. Switch to the &lt;a href=#comment-state&gt;comment
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;9.2.4.41 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-bang-state&gt;&lt;span class=secno&gt;9.2.4.50 &lt;/span&gt;&lt;dfn&gt;Comment end bang state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62527,7 +62825,7 @@
    character&lt;/a&gt; to the comment token's data. Switch to the
    &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=comment-end-space-state&gt;&lt;span class=secno&gt;9.2.4.42 &lt;/span&gt;&lt;dfn&gt;Comment end space state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=comment-end-space-state&gt;&lt;span class=secno&gt;9.2.4.51 &lt;/span&gt;&lt;dfn&gt;Comment end space state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62555,7 +62853,7 @@
    &lt;dd&gt;Append the &lt;a href=#current-input-character&gt;current input character&lt;/a&gt; to the comment token's data. Switch
    to the &lt;a href=#comment-state&gt;comment state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;9.2.4.43 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-state&gt;&lt;span class=secno&gt;9.2.4.52 &lt;/span&gt;&lt;dfn&gt;DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62575,7 +62873,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current
    character in the &lt;a href=#before-doctype-name-state&gt;before DOCTYPE name state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.44 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.53 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62607,7 +62905,7 @@
    &lt;a href=#current-input-character&gt;current input character&lt;/a&gt;. Switch to the &lt;a href=#doctype-name-state&gt;DOCTYPE name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.45 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.54 &lt;/span&gt;&lt;dfn&gt;DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62638,7 +62936,7 @@
    DOCTYPE token's name. Stay in the &lt;a href=#doctype-name-state&gt;DOCTYPE name
    state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.46 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-name-state&gt;&lt;span class=secno&gt;9.2.4.55 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62678,7 +62976,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;9.2.4.47 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-keyword-state&gt;&lt;span class=secno&gt;9.2.4.56 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62699,7 +62997,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current character in
    the &lt;a href=#before-doctype-public-identifier-state&gt;before DOCTYPE public identifier state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.48 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.57 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62735,7 +63033,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.49 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.58 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62757,7 +63055,7 @@
    token's public identifier. Stay in the &lt;a href=#doctype-public-identifier-(double-quoted)-state&gt;DOCTYPE public
    identifier (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.50 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-public-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.59 &lt;/span&gt;&lt;dfn&gt;DOCTYPE public identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62779,7 +63077,7 @@
    token's public identifier. Stay in the &lt;a href=#doctype-public-identifier-(single-quoted)-state&gt;DOCTYPE public
    identifier (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.51 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-public-identifier-state&gt;&lt;span class=secno&gt;9.2.4.60 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE public identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62815,7 +63113,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;9.2.4.52 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=between-doctype-public-and-system-identifiers-state&gt;&lt;span class=secno&gt;9.2.4.61 &lt;/span&gt;&lt;dfn&gt;Between DOCTYPE public and system identifiers state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62851,7 +63149,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;9.2.4.53 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-keyword-state&gt;&lt;span class=secno&gt;9.2.4.62 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system keyword state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62872,7 +63170,7 @@
    &lt;dd&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Reconsume the current character in
    the &lt;a href=#before-doctype-system-identifier-state&gt;before DOCTYPE system identifier state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.54 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=before-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.63 &lt;/span&gt;&lt;dfn&gt;Before DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62908,7 +63206,7 @@
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;. Switch to the &lt;a href=#bogus-doctype-state&gt;bogus
    DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.55 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(double-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.64 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (double-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62931,7 +63229,7 @@
    DOCTYPE token's system identifier. Stay in the &lt;a href=#doctype-system-identifier-(double-quoted)-state&gt;DOCTYPE system
    identifier (double-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.56 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=doctype-system-identifier-(single-quoted)-state&gt;&lt;span class=secno&gt;9.2.4.65 &lt;/span&gt;&lt;dfn&gt;DOCTYPE system identifier (single-quoted) state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62954,7 +63252,7 @@
    DOCTYPE token's system identifier. Stay in the &lt;a href=#doctype-system-identifier-(single-quoted)-state&gt;DOCTYPE system
    identifier (single-quoted) state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.57 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=after-doctype-system-identifier-state&gt;&lt;span class=secno&gt;9.2.4.66 &lt;/span&gt;&lt;dfn&gt;After DOCTYPE system identifier state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62980,7 +63278,7 @@
    state&lt;/a&gt;. (This does &lt;em&gt;not&lt;/em&gt; set the DOCTYPE token's
    &lt;i&gt;force-quirks flag&lt;/i&gt; to &lt;i&gt;on&lt;/i&gt;.)&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;9.2.4.58 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=bogus-doctype-state&gt;&lt;span class=secno&gt;9.2.4.67 &lt;/span&gt;&lt;dfn&gt;Bogus DOCTYPE state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;a href=#next-input-character&gt;next input character&lt;/a&gt;:&lt;/p&gt;
 
@@ -62995,7 +63293,7 @@
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Stay in the &lt;a href=#bogus-doctype-state&gt;bogus DOCTYPE state&lt;/a&gt;.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;9.2.4.59 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=cdata-section-state&gt;&lt;span class=secno&gt;9.2.4.68 &lt;/span&gt;&lt;dfn&gt;CDATA section state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume every character up to the next occurrence of the three
   character sequence U+005D RIGHT SQUARE BRACKET U+005D RIGHT SQUARE
@@ -63012,7 +63310,7 @@
 
 
 
-  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;9.2.4.60 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
+  &lt;h5 id=tokenizing-character-references&gt;&lt;span class=secno&gt;9.2.4.69 &lt;/span&gt;Tokenizing character references&lt;/h5&gt;
 
   &lt;p&gt;This section defines how to &lt;dfn id=consume-a-character-reference&gt;consume a character
   reference&lt;/dfn&gt;. This definition is used when parsing character

Modified: source
===================================================================
--- source	2009-10-19 11:00:31 UTC (rev 4177)
+++ source	2009-10-20 00:32:01 UTC (rev 4178)
@@ -12701,10 +12701,12 @@
    &lt;dt&gt;Content model:&lt;/dt&gt;
    &lt;dd&gt;If there is no &lt;code title=&quot;attr-script-src&quot;&gt;src&lt;/code&gt;
    attribute, depends on the value of the &lt;code
-   title=&quot;attr-script-type&quot;&gt;type&lt;/code&gt; attribute.&lt;/dd&gt;
+   title=&quot;attr-script-type&quot;&gt;type&lt;/code&gt; attribute, but must match
+   &lt;span&gt;script content restrictions&lt;/span&gt;.&lt;/dd&gt;
    &lt;dd&gt;If there &lt;em&gt;is&lt;/em&gt; a &lt;code title=&quot;attr-script-src&quot;&gt;src&lt;/code&gt;
    attribute, the element must be either empty or contain only
-   &lt;span&gt;script documentation&lt;/span&gt;.&lt;/dd&gt;
+   &lt;span&gt;script documentation&lt;/span&gt; that also matches &lt;span&gt;script
+   content restrictions&lt;/span&gt;.&lt;/dd&gt;
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-script-src&quot;&gt;src&lt;/code&gt;&lt;/dd&gt;
@@ -13416,6 +13418,58 @@
   &lt;/div&gt;
 
 
+  &lt;h5&gt;&lt;dfn title=&quot;script content restrictions&quot;&gt;Restrictions for contents of &lt;code&gt;script&lt;/code&gt; elements&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;The contents of a &lt;code&gt;script&lt;/code&gt; element must match the
+  &lt;code title=&quot;&quot;&gt;script&lt;/code&gt; production in the following ABNF, the
+  character set for which is Unicode. &lt;a
+  href=&quot;#refsABNF&quot;&gt;[ABNF]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;pre&gt;script        = body1
+
+body1         = *( text1 / body2 )
+body2         = &quot;&lt;!--&quot; *( text2 / body3 script-end ) [ body3 ] &quot;--&gt;&quot;
+body3         = script-start *text3
+
+script-start  = lt       s c r i p t tag-end
+script-end    = lt slash s c r i p t tag-end
+
+text1         = &lt;anything that doesn't match not-text1&gt;
+text2         = &lt;anything that doesn't match not-text2&gt;
+text3         = &lt;anything that doesn't match not-text3&gt;
+
+not-text1     = &quot;&lt;!--&quot; / script-end
+not-text2     = script-start / script-end / &quot;--&gt;&quot;
+not-text3     = script-end / &quot;--&gt;&quot;
+
+lt            =  %x003C ; U+003C LESS-THAN SIGN character (&lt;)
+slash         =  %x002F ; U+002F SOLIDUS character (/)
+
+s             =  %x0053 ; U+0053 LATIN CAPITAL LETTER S
+s             =/ %x0073 ; U+0073 LATIN SMALL LETTER S
+c             =  %x0043 ; U+0043 LATIN CAPITAL LETTER C
+c             =/ %x0063 ; U+0063 LATIN SMALL LETTER C
+r             =  %x0052 ; U+0052 LATIN CAPITAL LETTER R
+r             =/ %x0072 ; U+0072 LATIN SMALL LETTER R
+i             =  %x0049 ; U+0049 LATIN CAPITAL LETTER I
+i             =/ %x0069 ; U+0069 LATIN SMALL LETTER I
+p             =  %x0050 ; U+0050 LATIN CAPITAL LETTER P
+p             =/ %x0070 ; U+0070 LATIN SMALL LETTER P
+t             =  %x0054 ; U+0054 LATIN CAPITAL LETTER T
+t             =/ %x0074 ; U+0074 LATIN SMALL LETTER T
+
+tag-end       =  %x0009 ; U+0009 CHARACTER TABULATION
+tag-end       =/ %x000A ; U+000A LINE FEED (LF)
+tag-end       =/ %x000C ; U+000C FORM FEED (FF)
+tag-end       =/ %x0020 ; U+0020 SPACE
+tag-end       =/ %x002F ; U+002F SOLIDUS (/)
+tag-end       =/ %x003E ; U+003E GREATER-THAN SIGN (&gt;)&lt;/pre&gt;
+
+  &lt;p&gt;When a &lt;code&gt;script&lt;/code&gt; element contains &lt;span&gt;script
+  documentation&lt;/span&gt;, there are further restrictions on the contents
+  of the element, as described in the section below.&lt;/p&gt;
+
+
   &lt;h5&gt;&lt;dfn title=&quot;script documentation&quot;&gt;Inline documentation for external scripts&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;If a &lt;code&gt;script&lt;/code&gt; element's &lt;code
@@ -13447,6 +13501,10 @@
   &lt;p class=&quot;note&quot;&gt;This corresponds to putting the contents of the
   element in JavaScript comments.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;This requirement is in addition to the earlier
+  restrictiosn on the syntax of contents of &lt;code&gt;script&lt;/code&gt;
+  elements.&lt;/p&gt;
+
   &lt;div class=&quot;example&quot;&gt;
 
    &lt;p&gt;This allows authors to include documentation, such as license
@@ -77549,45 +77607,9 @@
   case-insensitively match the tag name of the element followed by one
   of U+0009 CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM
   FEED (FF), U+000D CARRIAGE RETURN (CR), U+0020 SPACE, U+003E
-  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/), unless that string is
-  part of an &lt;span title=&quot;syntax-escape&quot;&gt;escaping text
-  span&lt;/span&gt;.&lt;/p&gt;
+  GREATER-THAN SIGN (&gt;), or U+002F SOLIDUS (/).&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn title=&quot;syntax-escape&quot;&gt;escaping text span&lt;/dfn&gt; is a span
-  of &lt;span title=&quot;syntax-text&quot;&gt;text&lt;/span&gt; that starts with an &lt;span
-  title=&quot;syntax-escape-start&quot;&gt;escaping text span start&lt;/span&gt; that is
-  not itself in an &lt;span title=&quot;syntax-escape&quot;&gt;escaping text
-  span&lt;/span&gt;, and ends at the next &lt;span
-  title=&quot;syntax-escape-end&quot;&gt;escaping text span end&lt;/span&gt;. There
-  cannot be any &lt;span title=&quot;syntax-charref&quot;&gt;character
-  references&lt;/span&gt; inside an &lt;span title=&quot;syntax-escape&quot;&gt;escaping
-  text span&lt;/span&gt; &mdash; sequences of characters that would look
-  like &lt;span title=&quot;syntax-charref&quot;&gt;character references&lt;/span&gt; do not
-  have special meaning.&lt;/p&gt;
 
-  &lt;p&gt;An &lt;dfn title=&quot;syntax-escape-start&quot;&gt;escaping text span
-  start&lt;/dfn&gt; is a part of &lt;span title=&quot;syntax-text&quot;&gt;text&lt;/span&gt; that
-  consists of the four character sequence &quot;&lt;code
-  title=&quot;&quot;&gt;&lt;!--&lt;/code&gt;&quot; (U+003C LESS-THAN SIGN, U+0021 EXCLAMATION
-  MARK, U+002D HYPHEN-MINUS, U+002D HYPHEN-MINUS).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;dfn title=&quot;syntax-escape-end&quot;&gt;escaping text span end&lt;/dfn&gt; is
-  a part of &lt;span title=&quot;syntax-text&quot;&gt;text&lt;/span&gt; that consists of the
-  three character sequence &quot;&lt;code title=&quot;&quot;&gt;--&gt;&lt;/code&gt;&quot; (U+002D
-  HYPHEN-MINUS, U+002D HYPHEN-MINUS, U+003E GREATER-THAN SIGN).&lt;/p&gt;
-
-  &lt;p&gt;An &lt;span title=&quot;syntax-escape-start&quot;&gt;escaping text span
-  start&lt;/span&gt; may share its U+002D HYPHEN-MINUS characters with its
-  corresponding &lt;span title=&quot;syntax-escape-end&quot;&gt;escaping text span
-  end&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The text in &lt;span&gt;raw text elements&lt;/span&gt; and &lt;span&gt;RCDATA
-  elements&lt;/span&gt; must not have an &lt;span
-  title=&quot;syntax-escape-start&quot;&gt;escaping text span start&lt;/span&gt; that is
-  not followed by an &lt;span title=&quot;syntax-escape-end&quot;&gt;escaping text
-  span end&lt;/span&gt;.&lt;/p&gt;
-
-
   &lt;h4&gt;Text&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn title=&quot;syntax-text&quot;&gt;Text&lt;/dfn&gt; is allowed inside elements,
@@ -79793,13 +79815,13 @@
    character&lt;/span&gt; (add 0x0020 to the character's code point) to the
    current tag token's tag name. Append the &lt;span&gt;current input
    character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the
-   &lt;span&gt;Script data end tag name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;span&gt;script data end tag name state&lt;/span&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
    &lt;dd&gt;Append the &lt;span&gt;current input character&lt;/span&gt; to the current
    tag token's tag name. Append the &lt;span&gt;current input
    character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the
-   &lt;span&gt;Script data end tag name state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;span&gt;script data end tag name state&lt;/span&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
@@ -79855,13 +79877,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;span&gt;script data escaped dash state&lt;/span&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;span&gt;script data escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the EOF character in the
    &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Stay in
-   the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Stay in the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;
 
@@ -79876,13 +79902,17 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
    &lt;span&gt;script data escaped dash dash state&lt;/span&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;span&gt;script data escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
    &lt;dt&gt;EOF&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the EOF character in the
    &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Switch to the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;
 
@@ -79897,6 +79927,10 @@
    &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
    &lt;span&gt;script data escaped dash dash state&lt;/span&gt;.&lt;/dd&gt;
 
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Switch to the &lt;span&gt;script data escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
    &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
    &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
    &lt;span&gt;script data state&lt;/span&gt;.&lt;/dd&gt;
@@ -79906,12 +79940,310 @@
    &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
 
    &lt;dt&gt;Anything else&lt;/dt&gt;
-   &lt;dd&gt;Emit the current input character as a character token. Switch
-   to the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Switch to the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
 
   &lt;/dl&gt;
 
 
+  &lt;h5&gt;&lt;dfn&gt;Script data escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Set the &lt;var&gt;temporary buffer&lt;/var&gt; to the empty string. Switch
+   to the &lt;span&gt;script data escaped end tag open state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;span&gt;current input character&lt;/span&gt; as a character token. Set the
+   &lt;var&gt;temporary buffer&lt;/var&gt; to the empty string. Append the
+   lowercase version of the &lt;span&gt;current input character&lt;/span&gt; (add
+   0x0020 to the character's code point) to the &lt;var&gt;temporary
+   buffer&lt;/var&gt;. Switch to the &lt;span&gt;script data double escape start
+   state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and the
+   &lt;span&gt;current input character&lt;/span&gt; as a character token. Set the
+   &lt;var&gt;temporary buffer&lt;/var&gt; to the empty string. Append the
+   &lt;span&gt;current input character&lt;/span&gt; to the &lt;var&gt;temporary
+   buffer&lt;/var&gt;. Switch to the &lt;span&gt;script data double escape start
+   state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token and reconsume the
+   &lt;span&gt;current input character&lt;/span&gt; in the &lt;span&gt;script data
+   escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data escaped end tag open state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   lowercase version of the &lt;span&gt;current input character&lt;/span&gt; (add
+   0x0020 to the character's code point). Append the &lt;span&gt;current
+   input character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Finally,
+   switch to the &lt;span&gt;script data escaped end tag name
+   state&lt;/span&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Create a new end tag token, and set its tag name to the
+   &lt;span&gt;current input character&lt;/span&gt;. Append the &lt;span&gt;current
+   input character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Finally,
+   switch to the &lt;span&gt;script data escaped end tag name
+   state&lt;/span&gt;. (Don't emit the token yet; further details will be
+   filled in before it is emitted.)&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, and reconsume the &lt;span&gt;current input
+   character&lt;/span&gt; in the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data escaped end tag name state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;span&gt;appropriate end tag
+   token&lt;/span&gt;, then switch to the &lt;span&gt;before attribute name
+   state&lt;/span&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;span&gt;appropriate end tag
+   token&lt;/span&gt;, then switch to the &lt;span&gt;self-closing start tag
+   state&lt;/span&gt;. Otherwise, treat it as per the &quot;anything else&quot; entry
+   below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;If the current end tag token is an &lt;span&gt;appropriate end tag
+   token&lt;/span&gt;, then emit the current tag token and switch to the
+   &lt;span&gt;data state&lt;/span&gt;. Otherwise, treat it as per the &quot;anything
+   else&quot; entry below.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the lowercase version of the &lt;span&gt;current input
+   character&lt;/span&gt; (add 0x0020 to the character's code point) to the
+   current tag token's tag name. Append the &lt;span&gt;current input
+   character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the
+   &lt;span&gt;script data escaped end tag name state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Append the &lt;span&gt;current input character&lt;/span&gt; to the current
+   tag token's tag name. Append the &lt;span&gt;current input
+   character&lt;/span&gt; to the &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the
+   &lt;span&gt;script data escaped end tag name state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003C LESS-THAN SIGN character token, a U+002F SOLIDUS
+   character token, a character token for each of the characters in
+   the &lt;var&gt;temporary buffer&lt;/var&gt; (in the order they were added to
+   the buffer), and reconsume the &lt;span&gt;current input character&lt;/span&gt;
+   in the &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escape start state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. If the &lt;var&gt;temporary buffer&lt;/var&gt; is the string &quot;&lt;code
+   title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;span&gt;script data
+   double escaped state&lt;/span&gt;. Otherwise, switch to the &lt;span&gt;script
+   data escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Append the lowercase version of the &lt;span&gt;current input
+   character&lt;/span&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the &lt;span&gt;script data double
+   escape start state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Append the &lt;span&gt;current input character&lt;/span&gt; to the
+   &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the &lt;span&gt;script data double
+   escape start state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;span&gt;current input character&lt;/span&gt; in the
+   &lt;span&gt;script data escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escaped state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;span&gt;script data double escaped dash state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;span&gt;script data double escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the EOF character in the
+   &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Stay in the &lt;span&gt;script data double escaped
+   state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escaped dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Switch to the
+   &lt;span&gt;script data double escaped dash dash state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;span&gt;script data double escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the EOF character in the
+   &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Switch to the &lt;span&gt;script data double escaped
+   state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escaped dash dash state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+002D HYPHEN-MINUS (-)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002D HYPHEN-MINUS character token. Stay in the
+   &lt;span&gt;script data double escaped dash dash state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+003C LESS-THAN SIGN (&lt;)&lt;/dt&gt;
+   &lt;dd&gt;&lt;p&gt;Emit a U+003C LESS-THAN SIGN character token. Switch to the
+   &lt;span&gt;script data double escaped less-than sign
+   state&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+003E GREATER-THAN SIGN character token. Switch to the
+   &lt;span&gt;script data state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;EOF&lt;/dt&gt;
+   &lt;dd&gt;&lt;span&gt;Parse error&lt;/span&gt;. Reconsume the EOF character in the
+   &lt;span&gt;data state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Switch to the &lt;span&gt;script data double escaped
+   state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escaped less-than sign state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dd&gt;Emit a U+002F SOLIDUS character token. Set the &lt;var&gt;temporary
+   buffer&lt;/var&gt; to the empty string. Switch to the &lt;span&gt;script data
+   double escape end state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;span&gt;current input character&lt;/span&gt; in the
+   &lt;span&gt;script data double escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
+  &lt;h5&gt;&lt;dfn&gt;Script data double escape end state&lt;/dfn&gt;&lt;/h5&gt;
+
+  &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;U+0009 CHARACTER TABULATION&lt;/dt&gt;
+   &lt;dt&gt;U+000A LINE FEED (LF)&lt;/dt&gt;
+   &lt;dt&gt;U+000C FORM FEED (FF)&lt;/dt&gt;
+   &lt;!--&lt;dt&gt;U+000D CARRIAGE RETURN (CR)&lt;/dt&gt;--&gt;
+   &lt;dt&gt;U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;U+002F SOLIDUS (/)&lt;/dt&gt;
+   &lt;dt&gt;U+003E GREATER-THAN SIGN (&gt;)&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. If the &lt;var&gt;temporary buffer&lt;/var&gt; is the string &quot;&lt;code
+   title=&quot;&quot;&gt;script&lt;/code&gt;&quot;, then switch to the &lt;span&gt;script data
+   escaped state&lt;/span&gt;. Otherwise, switch to the &lt;span&gt;script data
+   double escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0041 LATIN CAPITAL LETTER A through to U+005A LATIN CAPITAL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Append the lowercase version of the &lt;span&gt;current input
+   character&lt;/span&gt; (add 0x0020 to the character's code point) to the
+   &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the &lt;span&gt;script data double
+   escape end state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;U+0061 LATIN SMALL LETTER A through to U+007A LATIN SMALL LETTER Z&lt;/dt&gt;
+   &lt;dd&gt;Emit the &lt;span&gt;current input character&lt;/span&gt; as a character
+   token. Append the &lt;span&gt;current input character&lt;/span&gt; to the
+   &lt;var&gt;temporary buffer&lt;/var&gt;. Stay in the &lt;span&gt;script data double
+   escape end state&lt;/span&gt;.&lt;/dd&gt;
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;Reconsume the &lt;span&gt;current input character&lt;/span&gt; in the
+   &lt;span&gt;script data double escaped state&lt;/span&gt;.&lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
   &lt;h5&gt;&lt;dfn&gt;Before attribute name state&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;Consume the &lt;span&gt;next input character&lt;/span&gt;:&lt;/p&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011049.html">[html5] r4177 - [ct] (0) Remove the 'content model flag' and expand	it into separate states inst [...]
</A></li>
	<LI>Next message: <A HREF="011051.html">[html5] r4179 - [c] (0) Change how &lt;script&gt;'s content restrictions	are written to make it more c [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11050">[ date ]</a>
              <a href="thread.html#11050">[ thread ]</a>
              <a href="subject.html#11050">[ subject ]</a>
              <a href="author.html#11050">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
