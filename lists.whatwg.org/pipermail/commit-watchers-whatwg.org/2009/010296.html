<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3418 - [e] (0) Split Web Storage into two: Web Storage and	Web Database.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3418%20-%20%5Be%5D%20%280%29%20Split%20Web%20Storage%20into%20two%3A%20Web%20Storage%20and%0A%09Web%20Database.&In-Reply-To=%3C20090715105337.DF3ED1389C3%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010295.html">
   <LINK REL="Next"  HREF="010297.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3418 - [e] (0) Split Web Storage into two: Web Storage and	Web Database.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3418%20-%20%5Be%5D%20%280%29%20Split%20Web%20Storage%20into%20two%3A%20Web%20Storage%20and%0A%09Web%20Database.&In-Reply-To=%3C20090715105337.DF3ED1389C3%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3418 - [e] (0) Split Web Storage into two: Web Storage and	Web Database.">whatwg at whatwg.org
       </A><BR>
    <I>Wed Jul 15 03:53:37 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010295.html">[html5] r3417 - [t] (0) Drop the 'applies to section' concept.
</A></li>
        <LI>Next message: <A HREF="010297.html">[html5] r3419 - [e] (0) idl typo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10296">[ date ]</a>
              <a href="thread.html#10296">[ thread ]</a>
              <a href="subject.html#10296">[ subject ]</a>
              <a href="author.html#10296">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-07-15 03:53:36 -0700 (Wed, 15 Jul 2009)
New Revision: 3418

Modified:
   index
   source
Log:
[e] (0) Split Web Storage into two: Web Storage and Web Database.

Modified: index
===================================================================
--- index	2009-07-15 09:05:54 UTC (rev 3417)
+++ index	2009-07-15 10:53:36 UTC (rev 3418)
@@ -133,7 +133,6 @@
   &lt;p&gt;This specification is intended to replace (be the new version of)
   what was previously the HTML4, XHTML 1.x, and DOM2 HTML
   specifications.&lt;/p&gt;
-&lt;!--START html5--&gt;
 
   &lt;h3 class=&quot;no-num no-toc&quot; id=stability-0&gt;Stability&lt;/h3&gt;
 

Modified: source
===================================================================
--- source	2009-07-15 09:05:54 UTC (rev 3417)
+++ source	2009-07-15 10:53:36 UTC (rev 3418)
@@ -59350,13 +59350,8 @@
 
   &lt;h3&gt;Structured client-side storage&lt;/h3&gt;  &lt;!--START storage--&gt;
 
-  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
-  &lt;!--BOILERPLATE middle-w3c-js-disclaimer--&gt;
+  &lt;h4&gt;Introduction&lt;/h4&gt;
 
-  &lt;h4 id=&quot;storage&quot;&gt;Storing name/value pairs&lt;/h4&gt;
-
-  &lt;h5&gt;Introduction&lt;/h5&gt;
-
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
   &lt;p&gt;This specification introduces two related mechanisms, similar to
@@ -59459,6 +59454,13 @@
   convert it to a string.&lt;/p&gt;
 
 
+
+  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
+  &lt;!--BOILERPLATE middle-w3c-js-disclaimer--&gt;
+
+
+  &lt;h4 id=&quot;storage&quot;&gt;The API&lt;/h4&gt;
+
   &lt;h5&gt;The &lt;code&gt;Storage&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;Storage&lt;/dfn&gt; {
@@ -59831,14 +59833,9 @@
   executing, other than in a way that is predictable by the script
   itself.&lt;/p&gt;
 
+  &lt;!--END storage--&gt;
+  &lt;!--START database--&gt;
 
-
-
-  &lt;h4 id=&quot;sql&quot;&gt;&lt;!--XXX Database storage--&gt;Structured storage&lt;/h4&gt;
-
-  &lt;p class=&quot;XXX&quot;&gt;The working group is currently debating whether SQL
-  is the right abstraction for this API.&lt;/p&gt;
-
   &lt;!-- Feature requests for future versions (v2):
         * deleting databases
         * determining how much storage room is left
@@ -59848,7 +59845,7 @@
   should delete it properly when it is deleted
   --&gt;
 
-  &lt;h5&gt;Introduction&lt;/h5&gt;
+  &lt;h4&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -59864,6 +59861,11 @@
 --&gt;
 
 
+  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
+  &lt;!--BOILERPLATE middle-w3c-js-disclaimer--&gt;
+
+  &lt;h4 id=&quot;sql&quot;&gt;The API&lt;/h4&gt;
+
   &lt;h5&gt;Databases&lt;/h5&gt;
 
   &lt;p&gt;Each &lt;i&gt;origin&lt;/i&gt; has an associated set of databases. Each
@@ -60749,17 +60751,23 @@
 
   &lt;/table&gt;
 
+  &lt;!--START storage--&gt;
 
-
   &lt;h4&gt;Disk space&lt;/h4&gt;
 
   &lt;p&gt;User agents should limit the total amount of space allowed for
-  storage areas and databases.&lt;/p&gt;
+  &lt;!--END database--&gt;
+  storage areas.
+  &lt;!--END storage--&gt;
+  &lt;!--START database--&gt;
+  databases.
+  &lt;!--START storage--&gt;
+  &lt;/p&gt;
 
-  &lt;p&gt;User agents should guard against sites storing data in the
-  storage areas or databases of other affiliated sites, e.g. storing
-  up to the limit in a1.example.com, a2.example.com, a3.example.com,
-  etc, circumventing the main example.com storage limit.&lt;/p&gt;
+  &lt;p&gt;User agents should guard against sites storing data under the
+  origins other affiliated sites, e.g. storing up to the limit in
+  a1.example.com, a2.example.com, a3.example.com, etc, circumventing
+  the main example.com storage limit.&lt;/p&gt;
 
   &lt;p&gt;User agents may prompt the user when quotas are reached, allowing
   the user to grant a site more space. This enables sites to store
@@ -60769,9 +60777,11 @@
   &lt;p&gt;User agents should allow users to see how much space each domain
   is using.&lt;/p&gt;
 
+  &lt;!--END database--&gt;
   &lt;!--&lt;p&gt;If the storage area space limit is reached during a &lt;code
   title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
   raise an exception.&lt;/p&gt;--&gt;
+  &lt;!--START database--&gt;
 
   &lt;p&gt;A mostly arbitrary limit of five megabytes per
   &lt;span&gt;origin&lt;/span&gt; is recommended. Implementation feedback is
@@ -60785,8 +60795,14 @@
 
   &lt;p&gt;A third-party advertiser (or any entity capable of getting
   content distributed to multiple sites) could use a unique identifier
-  stored in its local storage area or in its client-side database to
-  track a user across multiple sessions, building a profile of the
+  stored in its
+  &lt;!--END database--&gt;
+  local storage area
+  &lt;!--END storage--&gt;
+  &lt;!--START database--&gt;
+  client-side database
+  &lt;!--START storage--&gt;
+  to track a user across multiple sessions, building a profile of the
   user's interests to allow for highly targeted advertising. In
   conjunction with a site that is aware of the user's real identity
   (for example an e-commerce site that requires authenticated
@@ -60797,28 +60813,37 @@
   &lt;p&gt;There are a number of techniques that can be used to mitigate the
   risk of user tracking:&lt;/p&gt;
 
-  &lt;ul&gt;
+  &lt;dl&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Blocking third-party storage&lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;Blocking third-party storage: user agents may restrict access
-    to the &lt;code title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt; and
-    database objects to scripts originating at the domain of the
-    top-level document of the &lt;span&gt;browsing context&lt;/span&gt;, for
-    instance denying access to the API for pages from other domains
-    running in &lt;code&gt;iframe&lt;/code&gt;s.&lt;/p&gt;
+    &lt;p&gt;User agents may restrict access to
+    &lt;!--END database--&gt;
+    the &lt;code title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt; objects
+    &lt;!--END storage--&gt;
+    &lt;!--START database--&gt;
+    the database objects
+    &lt;!--START storage--&gt;
+    to scripts originating at the domain of the top-level document of
+    the &lt;span&gt;browsing context&lt;/span&gt;, for instance denying access to
+    the API for pages from other domains running in
+    &lt;code&gt;iframe&lt;/code&gt;s.&lt;/p&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Expiring stored data&lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;Expiring stored data: user agents may automatically delete
-    stored data after a period of time.&lt;/p&gt;
+    &lt;p&gt;User agents may automatically delete stored data after a period
+    of time.&lt;/p&gt;
 
+    &lt;!--END database--&gt;
     &lt;p&gt;For example, a user agent could treat third-party local
     storage areas as session-only storage, deleting the data once the
     user had closed all the &lt;span&gt;browsing contexts&lt;/span&gt; that could
     access it.&lt;/p&gt;
+    &lt;!--START database--&gt;
 
     &lt;p&gt;This can restrict the ability of a site to track a user, as the
     site would then only be able to track the user across multiple
@@ -60831,35 +60856,55 @@
     data should expire? as in
     localStorage.expireData(365); ? --&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Treating persistent storage as cookies&lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;Treating persistent storage as cookies: user agents should
-    present the persistent storage and database features to the user
-    in a way that does not distinguish them from HTTP session
-    cookies. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt; &lt;a
+    &lt;p&gt;User agents should present the
+    &lt;!--END database--&gt;
+    persistent storage feature
+    &lt;!--END storage--&gt;
+    &lt;!--START database--&gt;
+    database feature
+    &lt;!--START storage--&gt;
+    to the user in a way that does not distinguish them from HTTP
+    session cookies. &lt;a href=&quot;#refsRFC2109&quot;&gt;[RFC2109]&lt;/a&gt; &lt;a
     href=&quot;#refsRFC2965&quot;&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
 
-    &lt;p&gt;This might encourage users to view persistent storage with
-    healthy suspicion.&lt;/p&gt;
+    &lt;p&gt;This might encourage users to view such storage with healthy
+    suspicion.&lt;/p&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Site-specific white-listing of access to
+   &lt;!--END database--&gt;
+   local storage areas
+   &lt;!--END storage--&gt;
+   &lt;!--START database--&gt;
+   databases
+   &lt;!--START storage--&gt;
+   &lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;Site-specific white-listing of access to local storage areas
-    and databases: user agents may allow sites to access session
-    storage areas in an unrestricted manner, but require the user to
-    authorize access to local storage areas and databases.&lt;/p&gt;
+    &lt;!--END database--&gt;
+    &lt;p&gt;User agents may allow sites to access session storage areas in
+    an unrestricted manner, but require the user to authorize access
+    to local storage areas.&lt;/p&gt;
+    &lt;!--END storage--&gt;
+    &lt;!--START database--&gt;
+    &lt;p&gt;User agents may require the user to authorize access to
+    databases before a site can use the feature.&lt;/p&gt;
+    &lt;!--START storage--&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Origin-tracking of stored data&lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;&lt;span&gt;Origin&lt;/span&gt;-tracking of persistent storage data: user
-    agents may record the origins of sites that contained content from
-    third-party origins that caused data to be stored.&lt;/p&gt;
+    &lt;p&gt;User agents may record the &lt;span title=&quot;origin&quot;&gt;origins&lt;/span&gt;
+    of sites that contained content from third-party origins that
+    caused data to be stored.&lt;/p&gt;
 
     &lt;p&gt;If this information is then used to present the view of data
     currently in persistent storage, it would allow the user to make
@@ -60868,24 +60913,25 @@
     this domain from ever storing data again&quot;), the user can restrict
     the use of persistent storage to sites that he trusts.&lt;/p&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-   &lt;li&gt;
+   &lt;dt&gt;Shared blacklists&lt;/dt&gt;
+   &lt;dd&gt;
 
-    &lt;p&gt;Shared blacklists: user agents may allow users to share their
-    persistent storage domain blacklists.&lt;/p&gt;
+    &lt;p&gt;User agents may allow users to share their persistent storage
+    domain blacklists.&lt;/p&gt;
 
     &lt;p&gt;This would allow communities to act together to protect their
     privacy.&lt;/p&gt;
 
-   &lt;/li&gt;
+   &lt;/dd&gt;
 
-  &lt;/ul&gt;
+  &lt;/dl&gt;
 
-  &lt;p&gt;While these suggestions prevent trivial use of these APIs for
-  user tracking, they do not block it altogether. Within a single
-  domain, a site can continue to track the user during a session, and
-  can then pass all this information to the third party along with any
+  &lt;p&gt;While these suggestions prevent trivial use of this API for user
+  tracking, they do not block it altogether. Within a single domain, a
+  site can continue to track the user during a session, and can then
+  pass all this information to the third party along with any
   identifying information (names, credit card numbers, addresses)
   obtained by the site. If a third party cooperates with multiple
   sites to obtain such information, a profile can still be
@@ -60904,11 +60950,11 @@
   &lt;h5&gt;Cookie resurrection&lt;/h5&gt;
 
   &lt;p&gt;If the user interface for persistent storage presents data in the
-  persistent storage features separately from data in HTTP session
-  cookies, then users are likely to delete data in one and not the
-  other. This would allow sites to use the two features as redundant
-  backup for each other, defeating a user's attempts to protect his
-  privacy.&lt;/p&gt;
+  persistent storage features described in this specification
+  separately from data in HTTP session cookies, then users are likely
+  to delete data in one and not the other. This would allow sites to
+  use the two features as redundant backup for each other, defeating a
+  user's attempts to protect his privacy.&lt;/p&gt;
 
 
   &lt;h4&gt;Security&lt;/h4&gt;
@@ -60920,18 +60966,29 @@
   from that domain. To mitigate this, pages can use SSL. Pages using
   SSL can be sure that only pages using SSL that have certificates
   identifying them as being from the same domain can access their
-  local storage areas and databases.&lt;/p&gt;
+  &lt;!--END database--&gt;
+  storage areas.
+  &lt;!--END storage--&gt;
+  &lt;!--START database--&gt;
+  databases.
+  &lt;!--START storage--&gt;
+  &lt;/p&gt;
 
 
   &lt;h5&gt;Cross-directory attacks&lt;/h5&gt;
 
   &lt;p&gt;Different authors sharing one host name, for example users
   hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one
-  persistent storage object and one set of databases. There is no
-  feature to restrict the access by pathname. Authors on shared hosts
-  are therefore recommended to avoid using the persistent storage
-  features, as it would be trivial for other authors to read from and
-  write to the same storage area or database.&lt;/p&gt;
+  &lt;!--END database--&gt;
+  persistent storage object.
+  &lt;!--END storage--&gt;
+  &lt;!--START database--&gt;
+  set of databases.
+  &lt;!--START storage--&gt;
+  There is no feature to restrict the access by pathname. Authors on
+  shared hosts are therefore recommended to avoid using these
+  features, as it would be trivial for other authors to read the data
+  and overwrite it.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Even if a path-restriction feature was made
   available, the usual DOM scripting security model would make it
@@ -60953,7 +61010,7 @@
   work-in-progress confidential documents stored by a word-processing
   site could be examined by the site of a competing company.&lt;/p&gt;
 
-  &lt;p&gt;Letting third-party sites write data to the storage areas of
+  &lt;p&gt;Letting third-party sites write data to the persistent storage of
   other domains can result in &lt;em&gt;information spoofing&lt;/em&gt;, which is
   equally dangerous. For example, a hostile site could add items to a
   user's wishlist; or a hostile site could set a user's session
@@ -60964,6 +61021,8 @@
   in this specification is important for user security.&lt;/p&gt;
 
 
+  &lt;!--END storage--&gt;
+
   &lt;h5&gt;SQL and user agents&lt;/h5&gt;
 
   &lt;p&gt;User agent implementors are strongly encouraged to audit all
@@ -60986,7 +61045,7 @@
   and to never construct SQL statements on the fly.&lt;/p&gt;
 
 
-  &lt;!--END storage--&gt;
+  &lt;!--END database--&gt;
 
 
 
@@ -68374,8 +68433,8 @@
 
   &lt;p&gt;The &lt;code title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt; and
   &lt;code title=&quot;dom-opendatabase-sync&quot;&gt;openDatabaseSync()&lt;/code&gt;
-  methods are defined in the Web Storage specification. &lt;a
-  href=&quot;#refsWEBSTORAGE&quot;&gt;[WEBSTORAGE]&lt;/a&gt;&lt;/p&gt;
+  methods are defined in the Web Database specification. &lt;a
+  href=&quot;#refsWEBDATABASE&quot;&gt;[WEBDATABASE]&lt;/a&gt;&lt;/p&gt;
 
 
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010295.html">[html5] r3417 - [t] (0) Drop the 'applies to section' concept.
</A></li>
	<LI>Next message: <A HREF="010297.html">[html5] r3419 - [e] (0) idl typo
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10296">[ date ]</a>
              <a href="thread.html#10296">[ thread ]</a>
              <a href="subject.html#10296">[ subject ]</a>
              <a href="author.html#10296">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
