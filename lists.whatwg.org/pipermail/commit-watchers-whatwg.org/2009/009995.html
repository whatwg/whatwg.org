<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3114 - [] (0) Include microdata when dragging-and-dropping	or copying-and-pasting.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3114%20-%20%5B%5D%20%280%29%20Include%20microdata%20when%20dragging-and-dropping%0A%09or%20copying-and-pasting.&In-Reply-To=%3C20090518082318.8516C140A26%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009994.html">
   <LINK REL="Next"  HREF="009996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3114 - [] (0) Include microdata when dragging-and-dropping	or copying-and-pasting.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3114%20-%20%5B%5D%20%280%29%20Include%20microdata%20when%20dragging-and-dropping%0A%09or%20copying-and-pasting.&In-Reply-To=%3C20090518082318.8516C140A26%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3114 - [] (0) Include microdata when dragging-and-dropping	or copying-and-pasting.">whatwg at whatwg.org
       </A><BR>
    <I>Mon May 18 01:23:18 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009994.html">[html5] r3113 - [e] (0) typo
</A></li>
        <LI>Next message: <A HREF="009996.html">[html5] r3115 - [giw] (2) Fix how drag and drop exports data.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9995">[ date ]</a>
              <a href="thread.html#9995">[ thread ]</a>
              <a href="subject.html#9995">[ subject ]</a>
              <a href="author.html#9995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-05-18 01:23:17 -0700 (Mon, 18 May 2009)
New Revision: 3114

Modified:
   index
   source
Log:
[] (0) Include microdata when dragging-and-dropping or copying-and-pasting.

Modified: index
===================================================================
--- index	2009-05-18 06:20:08 UTC (rev 3113)
+++ index	2009-05-18 08:23:17 UTC (rev 3114)
@@ -43926,19 +43926,18 @@
 
   &lt;/ul&gt;&lt;h4 id=json&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;JSON&lt;/h4&gt;
 
-  &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract that node's
-  microdata into a JSON form:&lt;/p&gt;
+  &lt;p&gt;Given a list of nodes &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; in a
+  &lt;code&gt;Document&lt;/code&gt;, a user agent must run the following algorithm
+  to &lt;dfn id=extracting-json title=&quot;extracting JSON&quot;&gt;extract the microdata from those
+  nodes into a JSON form&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be an empty object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;items&lt;/var&gt; be an empty array.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;For &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; and each element that is a
-   descendant of &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, check if the element is a
-   &lt;a href=#top-level-microdata-items title=&quot;top-level microdata items&quot;&gt;top-level microdata
-   item&lt;/a&gt;, and if it is then &lt;a href=#get-the-object&gt;get the object&lt;/a&gt; for that
-   element and add it to &lt;var title=&quot;&quot;&gt;items&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;For each &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt;, check if the element is a &lt;a href=#top-level-microdata-items title=&quot;top-level microdata items&quot;&gt;top-level microdata item&lt;/a&gt;,
+   and if it is then &lt;a href=#get-the-object&gt;get the object&lt;/a&gt; for that element and
+   add it to &lt;var title=&quot;&quot;&gt;items&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Add an entry to &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; called &quot;&lt;code title=&quot;&quot;&gt;items&lt;/code&gt;&quot; whose value is the array &lt;var title=&quot;&quot;&gt;items&lt;/var&gt;.&lt;/li&gt;
 
@@ -44742,7 +44741,8 @@
   &lt;h4 id=icalendar&gt;&lt;span class=secno&gt;5.5.4 &lt;/span&gt;iCalendar&lt;/h4&gt;
 
   &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract any &lt;code title=md-vevent&gt;&lt;a href=#md-vevent&gt;vevent&lt;/a&gt;&lt;/code&gt; data represented by that node:&lt;/p&gt;
+  a user agent must run the following algorithm to &lt;dfn id=extracting-a-vevent title=&quot;extracting a vEvent&quot;&gt;extract any &lt;code title=md-vevent&gt;vevent&lt;/code&gt; data represented by that
+  node&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;
 
@@ -44930,9 +44930,9 @@
   &lt;h4 id=bibtex-0&gt;&lt;span class=secno&gt;5.5.5 &lt;/span&gt;BibTeX&lt;/h4&gt;
 
   &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract any &lt;code title=md-bibtex&gt;&lt;a href=#md-bibtex&gt;bibtex&lt;/a&gt;&lt;/code&gt; data represented by that node into a
+  a user agent must run the following algorithm to &lt;dfn id=extracting-bibtex title=&quot;extracting BibTeX&quot;&gt;extract any &lt;code title=md-bibtex&gt;bibtex&lt;/code&gt; data represented by that node into a
   form that vaguely resembles the format used by BibTeX
-  processors:&lt;/p&gt;
+  processors&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;
 
@@ -44987,8 +44987,7 @@
 
      &lt;li&gt;&lt;p&gt;Append two U+0020 SPACE characters to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; to var
-     title=&quot;&quot;&gt;output.&lt;/li&gt;
+     &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Append a U+0020 SPACE character, a U+003D EQUALS SIGN
      character (=), and another U+0020 SPACE character to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
@@ -55309,45 +55308,79 @@
 
   &lt;p&gt;If the user agent determines that something can be dragged, a
   &lt;code title=event-dragstart&gt;&lt;a href=#event-dragstart&gt;dragstart&lt;/a&gt;&lt;/code&gt; event must then be
-  fired.&lt;/p&gt;
+  fired at the &lt;a href=#source-node&gt;source node&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;If it is a selection that is being dragged, then this event must
-  be fired on the node that the user started the drag on (typically
-  the text node that the user originally clicked). If the user did not
-  specify a particular node, for example if the user just told the
-  user agent to begin a drag of &quot;the selection&quot;, then the event must
-  be fired on the deepest node that is a common ancestor of all parts
-  of the selection.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=source-node&gt;source node&lt;/dfn&gt; depends on the kind of drag and how it
+  was initiated. If it is a selection that is being dragged, then the
+  &lt;a href=#source-node&gt;source node&lt;/a&gt; is the node that the user started the drag
+  on (typically the text node that the user originally clicked). If
+  the user did not specify a particular node, for example if the user
+  just told the user agent to begin a drag of &quot;the selection&quot;, then
+  the &lt;a href=#source-node&gt;source node&lt;/a&gt; is the deepest node that is a common
+  ancestor of all parts of the selection. If it is not a selection
+  that is being dragged, then the &lt;a href=#source-node&gt;source node&lt;/a&gt; is the
+  element that is being dragged.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;We should look into how browsers do other types
-  (e.g. Firefox apparently also adds text/html for internal drag and
-  drop of a selection).&lt;/p&gt;
+  &lt;p&gt;Multiple events are fired on the &lt;a href=#source-node&gt;source node&lt;/a&gt; during
+  the course of the drag-and-drop operation.&lt;/p&gt;
 
-  &lt;p&gt;If it is not a selection that is being dragged, then the event
-  must be fired on the element that is being dragged.&lt;/p&gt;
-
-  &lt;p&gt;The node on which the event is fired is the &lt;dfn id=source-node&gt;source
-  node&lt;/dfn&gt;. Multiple events are fired on this node during the course
-  of the drag-and-drop operation.&lt;/p&gt;
-
-  &lt;p&gt;If it is a selection that is being dragged, the &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a href=#dom-dragevent-datatransfer&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; member of the event
+  &lt;hr&gt;&lt;p&gt;If it is a selection that is being dragged, the &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a href=#dom-dragevent-datatransfer&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; member of the event
   must be created with no nodes. Otherwise, it must be created
   containing just the &lt;a href=#source-node&gt;source node&lt;/a&gt;. Script can use the
   &lt;code title=dom-DataTransfer-addElement&gt;&lt;a href=#dom-datatransfer-addelement&gt;addElement()&lt;/a&gt;&lt;/code&gt; method
   to add further elements to the list of what is being dragged.&lt;/p&gt;
 
-  &lt;p&gt;If it is a selection that is being dragged, the &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a href=#dom-dragevent-datatransfer&gt;dataTransfer&lt;/a&gt;&lt;/code&gt; member of the
-  event must have the text of the selection added to it as the data
-  associated with the &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
-  format. Otherwise, if it is an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element being
-  dragged, then the value of the element's &lt;code title=dom-img-src&gt;&lt;a href=#dom-img-src&gt;src&lt;/a&gt;&lt;/code&gt; DOM attribute must be added,
-  associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt;
-  format. Otherwise, if it is an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element being dragged,
-  then the value of the element's &lt;code title=dom-a-href&gt;&lt;a href=#dom-a-href&gt;href&lt;/a&gt;&lt;/code&gt;
-  DOM attribute must be added, associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt; format. Otherwise, no data is added to
-  the object by the user agent.&lt;/p&gt;
+  &lt;p&gt;The &lt;code title=dom-DragEvent-dataTransfer&gt;&lt;a href=#dom-dragevent-datatransfer&gt;dataTransfer&lt;/a&gt;&lt;/code&gt;
+  member of the event must have added to it the following:&lt;/p&gt;
 
-  &lt;p&gt;If the event is canceled, then the drag-and-drop operation must
+  &lt;ul&gt;&lt;li&gt;If it is a selection that is being dragged, the text of the
+   selection, associated with the &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
+   format.&lt;/li&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;a href=#extracting-json title=&quot;extracting
+   JSON&quot;&gt;extracting the microdata from those nodes into a JSON
+   form&lt;/a&gt;, associated with the &lt;code title=&quot;&quot;&gt;application/microdata+json&lt;/code&gt; format.&lt;/li&gt; &lt;!-- XXX
+   register --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;a href=#extracting-a-vcard title=&quot;extracting a
+   vCard&quot;&gt;extracting the vCard data&lt;/a&gt; from the first node in that
+   list that is an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; with the
+   type &lt;code title=md-vcard&gt;&lt;a href=#md-vcard&gt;vcard&lt;/a&gt;&lt;/code&gt;, if any, associated with
+   the &lt;code title=&quot;&quot;&gt;text/directory;profile=vcard&lt;/code&gt; format.&lt;/li&gt;
+   &lt;!-- v2 more than one? --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;a href=#extracting-a-vevent title=&quot;extracting a
+   vEvent&quot;&gt;extracting the vEvent data&lt;/a&gt; from the first node in
+   that list that is an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; with
+   the type &lt;code title=md-vevent&gt;&lt;a href=#md-vevent&gt;vevent&lt;/a&gt;&lt;/code&gt;, if any, associated
+   with the &lt;code title=&quot;&quot;&gt;text/calendar;component=vevent&lt;/code&gt;
+   format.&lt;/li&gt; &lt;!-- v2 more than one? --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and concatenating the strings
+   obtained from &lt;a href=#extracting-bibtex title=&quot;extracting BibTeX&quot;&gt;extracting BibTeX
+   data&lt;/a&gt; from all the nodes in that list that are &lt;a href=#concept-item title=concept-item&gt;items&lt;/a&gt; with the type &lt;code title=md-bibtex&gt;&lt;a href=#md-bibtex&gt;bibtex&lt;/a&gt;&lt;/code&gt;, if any, associated with the &lt;code title=&quot;&quot;&gt;application/microdata+bibtex&lt;/code&gt; format.&lt;/li&gt; &lt;!-- XXX
+   register --&gt;
+
+   &lt;li&gt;&lt;p class=XXX&gt;text/html fragment&lt;/p&gt;
+
+   &lt;li&gt;If it is an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element being dragged, the value
+   of the element's &lt;code title=dom-img-src&gt;&lt;a href=#dom-img-src&gt;src&lt;/a&gt;&lt;/code&gt; DOM
+   attribute, associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt;
+   format.&lt;/li&gt;
+
+   &lt;li&gt;If it is an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; element being dragged, the value of
+   the element's &lt;code title=dom-a-href&gt;&lt;a href=#dom-a-href&gt;href&lt;/a&gt;&lt;/code&gt; DOM attribute,
+   associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt; format.&lt;/li&gt;
+
+  &lt;/ul&gt;&lt;p&gt;If the event is canceled, then the drag-and-drop operation must
   not occur; the user agent must not continue with this algorithm.&lt;/p&gt;
 
   &lt;p&gt;If it is not canceled, then the drag-and-drop operation must be

Modified: source
===================================================================
--- source	2009-05-18 06:20:08 UTC (rev 3113)
+++ source	2009-05-18 08:23:17 UTC (rev 3114)
@@ -49708,9 +49708,10 @@
 
   &lt;h4&gt;JSON&lt;/h4&gt;
 
-  &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract that node's
-  microdata into a JSON form:&lt;/p&gt;
+  &lt;p&gt;Given a list of nodes &lt;var title=&quot;&quot;&gt;nodes&lt;/var&gt; in a
+  &lt;code&gt;Document&lt;/code&gt;, a user agent must run the following algorithm
+  to &lt;dfn title=&quot;extracting JSON&quot;&gt;extract the microdata from those
+  nodes into a JSON form&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -49718,11 +49719,11 @@
 
    &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;items&lt;/var&gt; be an empty array.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;For &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; and each element that is a
-   descendant of &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, check if the element is a
-   &lt;span title=&quot;top-level microdata items&quot;&gt;top-level microdata
-   item&lt;/span&gt;, and if it is then &lt;span&gt;get the object&lt;/span&gt; for that
-   element and add it to &lt;var title=&quot;&quot;&gt;items&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;For each &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in &lt;var
+   title=&quot;&quot;&gt;nodes&lt;/var&gt;, check if the element is a &lt;span
+   title=&quot;top-level microdata items&quot;&gt;top-level microdata item&lt;/span&gt;,
+   and if it is then &lt;span&gt;get the object&lt;/span&gt; for that element and
+   add it to &lt;var title=&quot;&quot;&gt;items&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Add an entry to &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; called &quot;&lt;code
    title=&quot;&quot;&gt;items&lt;/code&gt;&quot; whose value is the array &lt;var
@@ -50860,8 +50861,10 @@
   &lt;h4&gt;iCalendar&lt;/h4&gt;
 
   &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract any &lt;code
-  title=&quot;md-vevent&quot;&gt;vevent&lt;/code&gt; data represented by that node:&lt;/p&gt;
+  a user agent must run the following algorithm to &lt;dfn
+  title=&quot;extracting a vEvent&quot;&gt;extract any &lt;code
+  title=&quot;md-vevent&quot;&gt;vevent&lt;/code&gt; data represented by that
+  node&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -51116,10 +51119,11 @@
   &lt;h4&gt;BibTeX&lt;/h4&gt;
 
   &lt;p&gt;Given a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; in a &lt;code&gt;Document&lt;/code&gt;,
-  a user agent must run the following algorithm to extract any &lt;code
+  a user agent must run the following algorithm to &lt;dfn
+  title=&quot;extracting BibTeX&quot;&gt;extract any &lt;code
   title=&quot;md-bibtex&quot;&gt;bibtex&lt;/code&gt; data represented by that node into a
   form that vaguely resembles the format used by BibTeX
-  processors:&lt;/p&gt;
+  processors&lt;/dfn&gt;:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -51201,7 +51205,7 @@
      &lt;li&gt;&lt;p&gt;Append two U+0020 SPACE characters to &lt;var
      title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-     &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; to var
+     &lt;li&gt;&lt;p&gt;Append &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; to &lt;var
      title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
      &lt;li&gt;&lt;p&gt;Append a U+0020 SPACE character, a U+003D EQUALS SIGN
@@ -64820,27 +64824,24 @@
 
   &lt;p&gt;If the user agent determines that something can be dragged, a
   &lt;code title=&quot;event-dragstart&quot;&gt;dragstart&lt;/code&gt; event must then be
-  fired.&lt;/p&gt;
+  fired at the &lt;span&gt;source node&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;If it is a selection that is being dragged, then this event must
-  be fired on the node that the user started the drag on (typically
-  the text node that the user originally clicked). If the user did not
-  specify a particular node, for example if the user just told the
-  user agent to begin a drag of &quot;the selection&quot;, then the event must
-  be fired on the deepest node that is a common ancestor of all parts
-  of the selection.&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn&gt;source node&lt;/dfn&gt; depends on the kind of drag and how it
+  was initiated. If it is a selection that is being dragged, then the
+  &lt;span&gt;source node&lt;/span&gt; is the node that the user started the drag
+  on (typically the text node that the user originally clicked). If
+  the user did not specify a particular node, for example if the user
+  just told the user agent to begin a drag of &quot;the selection&quot;, then
+  the &lt;span&gt;source node&lt;/span&gt; is the deepest node that is a common
+  ancestor of all parts of the selection. If it is not a selection
+  that is being dragged, then the &lt;span&gt;source node&lt;/span&gt; is the
+  element that is being dragged.&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;We should look into how browsers do other types
-  (e.g. Firefox apparently also adds text/html for internal drag and
-  drop of a selection).&lt;/p&gt;
+  &lt;p&gt;Multiple events are fired on the &lt;span&gt;source node&lt;/span&gt; during
+  the course of the drag-and-drop operation.&lt;/p&gt;
 
-  &lt;p&gt;If it is not a selection that is being dragged, then the event
-  must be fired on the element that is being dragged.&lt;/p&gt;
+  &lt;hr&gt;
 
-  &lt;p&gt;The node on which the event is fired is the &lt;dfn&gt;source
-  node&lt;/dfn&gt;. Multiple events are fired on this node during the course
-  of the drag-and-drop operation.&lt;/p&gt;
-
   &lt;p&gt;If it is a selection that is being dragged, the &lt;code
   title=&quot;dom-DragEvent-dataTransfer&quot;&gt;dataTransfer&lt;/code&gt; member of the event
   must be created with no nodes. Otherwise, it must be created
@@ -64848,20 +64849,64 @@
   &lt;code title=&quot;dom-DataTransfer-addElement&quot;&gt;addElement()&lt;/code&gt; method
   to add further elements to the list of what is being dragged.&lt;/p&gt;
 
-  &lt;p&gt;If it is a selection that is being dragged, the &lt;code
-  title=&quot;dom-DragEvent-dataTransfer&quot;&gt;dataTransfer&lt;/code&gt; member of the
-  event must have the text of the selection added to it as the data
-  associated with the &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
-  format. Otherwise, if it is an &lt;code&gt;img&lt;/code&gt; element being
-  dragged, then the value of the element's &lt;code
-  title=&quot;dom-img-src&quot;&gt;src&lt;/code&gt; DOM attribute must be added,
-  associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt;
-  format. Otherwise, if it is an &lt;code&gt;a&lt;/code&gt; element being dragged,
-  then the value of the element's &lt;code title=&quot;dom-a-href&quot;&gt;href&lt;/code&gt;
-  DOM attribute must be added, associated with the &lt;code
-  title=&quot;&quot;&gt;text/uri-list&lt;/code&gt; format. Otherwise, no data is added to
-  the object by the user agent.&lt;/p&gt;
+  &lt;p&gt;The &lt;code title=&quot;dom-DragEvent-dataTransfer&quot;&gt;dataTransfer&lt;/code&gt;
+  member of the event must have added to it the following:&lt;/p&gt;
 
+  &lt;ul&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, the text of the
+   selection, associated with the &lt;code title=&quot;&quot;&gt;text/plain&lt;/code&gt;
+   format.&lt;/li&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;span title=&quot;extracting
+   JSON&quot;&gt;extracting the microdata from those nodes into a JSON
+   form&lt;/span&gt;, associated with the &lt;code
+   title=&quot;&quot;&gt;application/microdata+json&lt;/code&gt; format.&lt;/li&gt; &lt;!-- XXX
+   register --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;span title=&quot;extracting a
+   vCard&quot;&gt;extracting the vCard data&lt;/span&gt; from the first node in that
+   list that is an &lt;span title=&quot;concept-item&quot;&gt;item&lt;/span&gt; with the
+   type &lt;code title=&quot;md-vcard&quot;&gt;vcard&lt;/code&gt;, if any, associated with
+   the &lt;code title=&quot;&quot;&gt;text/directory;profile=vcard&lt;/code&gt; format.&lt;/li&gt;
+   &lt;!-- v2 more than one? --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and &lt;span title=&quot;extracting a
+   vEvent&quot;&gt;extracting the vEvent data&lt;/span&gt; from the first node in
+   that list that is an &lt;span title=&quot;concept-item&quot;&gt;item&lt;/span&gt; with
+   the type &lt;code title=&quot;md-vevent&quot;&gt;vevent&lt;/code&gt;, if any, associated
+   with the &lt;code title=&quot;&quot;&gt;text/calendar;component=vevent&lt;/code&gt;
+   format.&lt;/li&gt; &lt;!-- v2 more than one? --&gt;
+
+   &lt;li&gt;If it is a selection that is being dragged, then the string
+   resulting from making a list of every node that is partially or
+   completely included in the selection and concatenating the strings
+   obtained from &lt;span title=&quot;extracting BibTeX&quot;&gt;extracting BibTeX
+   data&lt;/span&gt; from all the nodes in that list that are &lt;span
+   title=&quot;concept-item&quot;&gt;items&lt;/span&gt; with the type &lt;code
+   title=&quot;md-bibtex&quot;&gt;bibtex&lt;/code&gt;, if any, associated with the &lt;code
+   title=&quot;&quot;&gt;application/microdata+bibtex&lt;/code&gt; format.&lt;/li&gt; &lt;!-- XXX
+   register --&gt;
+
+   &lt;li&gt;&lt;p class=&quot;XXX&quot;&gt;text/html fragment&lt;/p&gt;
+
+   &lt;li&gt;If it is an &lt;code&gt;img&lt;/code&gt; element being dragged, the value
+   of the element's &lt;code title=&quot;dom-img-src&quot;&gt;src&lt;/code&gt; DOM
+   attribute, associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt;
+   format.&lt;/li&gt;
+
+   &lt;li&gt;If it is an &lt;code&gt;a&lt;/code&gt; element being dragged, the value of
+   the element's &lt;code title=&quot;dom-a-href&quot;&gt;href&lt;/code&gt; DOM attribute,
+   associated with the &lt;code title=&quot;&quot;&gt;text/uri-list&lt;/code&gt; format.&lt;/li&gt;
+
+  &lt;/ul&gt;
+
   &lt;p&gt;If the event is canceled, then the drag-and-drop operation must
   not occur; the user agent must not continue with this algorithm.&lt;/p&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009994.html">[html5] r3113 - [e] (0) typo
</A></li>
	<LI>Next message: <A HREF="009996.html">[html5] r3115 - [giw] (2) Fix how drag and drop exports data.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9995">[ date ]</a>
              <a href="thread.html#9995">[ thread ]</a>
              <a href="subject.html#9995">[ subject ]</a>
              <a href="author.html#9995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
