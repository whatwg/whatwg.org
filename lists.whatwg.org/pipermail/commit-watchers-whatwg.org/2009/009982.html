<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3101 - [e] (0) Add examples for vEvent.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3101%20-%20%5Be%5D%20%280%29%20Add%20examples%20for%20vEvent.&In-Reply-To=%3C20090514234723.6A4961389F2%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009981.html">
   <LINK REL="Next"  HREF="009983.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3101 - [e] (0) Add examples for vEvent.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3101%20-%20%5Be%5D%20%280%29%20Add%20examples%20for%20vEvent.&In-Reply-To=%3C20090514234723.6A4961389F2%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3101 - [e] (0) Add examples for vEvent.">whatwg at whatwg.org
       </A><BR>
    <I>Thu May 14 16:47:23 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009981.html">[html5] r3100 - [e] (0) note future extension ideas for microdata
</A></li>
        <LI>Next message: <A HREF="009983.html">[html5] r3102 - [e] (0) oops, forgot to rename attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9982">[ date ]</a>
              <a href="thread.html#9982">[ thread ]</a>
              <a href="subject.html#9982">[ subject ]</a>
              <a href="author.html#9982">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-05-14 16:47:22 -0700 (Thu, 14 May 2009)
New Revision: 3101

Modified:
   index
   source
Log:
[e] (0) Add examples for vEvent.

Modified: index
===================================================================
--- index	2009-05-14 23:11:59 UTC (rev 3100)
+++ index	2009-05-14 23:47:22 UTC (rev 3101)
@@ -682,7 +682,9 @@
    &lt;li&gt;&lt;a href=#predefined-vocabularies&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Predefined vocabularies&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#vcard&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;vCard&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#vevent&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;vEvent&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#vevent&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;vEvent&lt;/a&gt;
+      &lt;ol&gt;
+       &lt;li&gt;&lt;a href=#examples&gt;&lt;span class=secno&gt;5.4.2.1 &lt;/span&gt;Examples&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#bibtex&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;BibTeX&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#rdf&gt;&lt;span class=secno&gt;5.4.4 &lt;/span&gt;RDF&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#converting-html-to-other-formats&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;Converting HTML to other formats&lt;/a&gt;
@@ -42993,14 +42995,92 @@
 
     &lt;/ul&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;!--XXX
+  &lt;/ol&gt;&lt;h5 id=examples&gt;&lt;span class=secno&gt;5.4.2.1 &lt;/span&gt;Examples&lt;/h5&gt;
 
-  &lt;h5&gt;Examples&lt;/h5&gt;
+&lt;!-- get more from <A HREF="http://www.ietf.org/rfc/rfc2445.txt">http://www.ietf.org/rfc/rfc2445.txt</A> --&gt;
 
-from <A HREF="http://www.ietf.org/rfc/rfc2445.txt">http://www.ietf.org/rfc/rfc2445.txt</A>
+  &lt;div class=example&gt;
 
---&gt;&lt;h4 id=bibtex&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;BibTeX&lt;/h4&gt;
+   &lt;p&gt;Here is an example of a page that uses the &lt;code title=md-vevent&gt;&lt;a href=#md-vevent&gt;vevent&lt;/a&gt;&lt;/code&gt; vocabulary to mark up an event:&lt;/p&gt;
 
+   &lt;pre&gt;&lt;body item=&quot;vevent&quot;&gt;
+ ...
+ &lt;h1 property=&quot;summary&quot;&gt;Bluesday Tuesday: Money Road&lt;/h1&gt;
+ ...
+ &lt;time property=&quot;dtstart&quot; datetime=&quot;2009-05-05T19:00:00Z&quot;&gt;May 5th @ 7pm&lt;/time&gt;
+ (until &lt;time property=&quot;dtend&quot; datetime=&quot;2009-05-05T21:00:00Z&quot;&gt;9pm&lt;/time&gt;)
+ ...
+ &lt;a href=&quot;<A HREF="http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road">http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road</A>&quot;
+    rel=&quot;bookmark&quot; property=&quot;url&quot;&gt;Link to this page&lt;/a&gt;
+ ...
+ &lt;p&gt;Location: &lt;span property=&quot;location&quot;&gt;The RoadHouse&lt;/span&gt;&lt;/p&gt;
+ ...
+ &lt;p&gt;&lt;input type=button value=&quot;Add to Calendar&quot;
+           onclick=&quot;location = getCalendar(this)&quot;&gt;&lt;/p&gt;
+ ...
+ &lt;meta property=&quot;description&quot; content=&quot;via livebrum.co.uk&quot;&gt;
+&lt;/body&gt;&lt;/pre&gt;
+
+   &lt;p&gt;The &quot;&lt;code title=&quot;&quot;&gt;getCalendar()&lt;/code&gt;&quot; method could look like
+   this:&lt;/p&gt;
+
+   &lt;pre&gt;function getCalendar(node) {
+  while (node &amp;&amp; !node.item.has('vevent'))
+    node = node.parentNode;
+  if (!node) {
+    alert('No event data found.');
+    return;
+  }
+  var stamp = new Date();
+  var stampString = '' + stamp.getUTCFullYear() + (stamp.getUTCMonth() + 1) + stamp.getUTCDate() + 'T' +
+                         stamp.getUTCHours() + stamp.getUTCMinutes() + stamp.getUTCSeconds() + 'Z';
+  var calendar = 'BEGIN:VCALENDAR\r\nPRODID:HTML5\r\nVERSION:2.0\r\nBEGIN:VEVENT\r\nDTSTAMP:' + stampString + '\r\n';
+  for (var propIndex = 0; propIndex &lt; node.properties.length; propIndex += 1) {
+    var prop = node.properties[propIndex];
+    var value = prop.content;
+    var parameters = '';
+    if (prop.localName == 'time') {
+      value = value.replace(/[:-]/g, '');
+      if (prop.date &amp;&amp; prop.time)
+        parameters = ';VALUE=DATE';
+      else
+        parameters = ';VALUE=DATE-TIME';
+    } else {
+      value = value.replace(/\\/g, '\\n');
+      value = value.replace(/;/g, '\\;');
+      value = value.replace(/,/g, \\,');
+      value = value.replace(/[\r\n]/g, '\\n');
+    }
+    for (var nameIndex = 0; nameIndex &lt; prop.itemprop.length; nameIndex += 1) {
+      var name = prop.itemprop[nameIndex];
+      if (!name.match(':') &amp;&amp; !name.match('.')) {
+        calendar += name.toUpperCase() + parameters + ':' + value + '\r\n';
+      }
+    }
+  }
+  calendar += 'END:VEVENT\r\nEND:VCALENDAR\r\n';
+  return 'data:text/calendar;component=vevent,' + encodeURI(calendar);
+}&lt;/pre&gt;
+
+   &lt;p&gt;The same page could offer some markup, such as the following,
+   for copy-and-pasting into blogs:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;div item=&quot;vevent&quot;&gt;
+ &lt;p&gt;I'm going to
+ &lt;strong property=&quot;summary&quot;&gt;Bluesday Tuesday: Money Road&lt;/strong&gt;,
+ &lt;time property=&quot;dtstart&quot; datetime=&quot;2009-05-05T19:00:00Z&quot;&gt;May 5th at 7pm&lt;/time&gt;
+ to &lt;time property=&quot;dtend&quot; content=&quot;2009-05-05T21:00:00Z&quot;&gt;9pm&lt;/time&gt;,
+ at &lt;span property=&quot;location&quot;&gt;The RoadHouse&lt;/span&gt;!&lt;/p&gt;
+ &lt;p&gt;&lt;a href=&quot;<A HREF="http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road">http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road</A>&quot;
+       property=&quot;url&quot;&gt;See this event on livebrum.co.uk&lt;/a&gt;.&lt;/p&gt;
+ &lt;meta property=&quot;description&quot; content=&quot;via livebrum.co.uk&quot;&gt;
+&lt;/div&gt;&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
+  &lt;h4 id=bibtex&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;BibTeX&lt;/h4&gt;
+
   &lt;p&gt;An item with the &lt;a href=#predefined-type&gt;predefined type&lt;/a&gt; &lt;dfn id=md-bibtex title=md-bibtex&gt;&lt;code&gt;bibtex&lt;/code&gt;&lt;/dfn&gt; represents a
   bibliography entry.&lt;/p&gt;
 

Modified: source
===================================================================
--- source	2009-05-14 23:11:59 UTC (rev 3100)
+++ source	2009-05-14 23:47:22 UTC (rev 3101)
@@ -48664,15 +48664,91 @@
   &lt;/ol&gt;
 
 
-&lt;!--XXX
-
   &lt;h5&gt;Examples&lt;/h5&gt;
 
-from <A HREF="http://www.ietf.org/rfc/rfc2445.txt">http://www.ietf.org/rfc/rfc2445.txt</A>
+&lt;!-- get more from <A HREF="http://www.ietf.org/rfc/rfc2445.txt">http://www.ietf.org/rfc/rfc2445.txt</A> --&gt;
 
---&gt;
+  &lt;div class=&quot;example&quot;&gt;
 
+   &lt;p&gt;Here is an example of a page that uses the &lt;code
+   title=&quot;md-vevent&quot;&gt;vevent&lt;/code&gt; vocabulary to mark up an event:&lt;/p&gt;
 
+   &lt;pre&gt;&lt;body item=&quot;vevent&quot;&gt;
+ ...
+ &lt;h1 property=&quot;summary&quot;&gt;Bluesday Tuesday: Money Road&lt;/h1&gt;
+ ...
+ &lt;time property=&quot;dtstart&quot; datetime=&quot;2009-05-05T19:00:00Z&quot;&gt;May 5th @ 7pm&lt;/time&gt;
+ (until &lt;time property=&quot;dtend&quot; datetime=&quot;2009-05-05T21:00:00Z&quot;&gt;9pm&lt;/time&gt;)
+ ...
+ &lt;a href=&quot;<A HREF="http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road">http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road</A>&quot;
+    rel=&quot;bookmark&quot; property=&quot;url&quot;&gt;Link to this page&lt;/a&gt;
+ ...
+ &lt;p&gt;Location: &lt;span property=&quot;location&quot;&gt;The RoadHouse&lt;/span&gt;&lt;/p&gt;
+ ...
+ &lt;p&gt;&lt;input type=button value=&quot;Add to Calendar&quot;
+           onclick=&quot;location = getCalendar(this)&quot;&gt;&lt;/p&gt;
+ ...
+ &lt;meta property=&quot;description&quot; content=&quot;via livebrum.co.uk&quot;&gt;
+&lt;/body&gt;&lt;/pre&gt;
+
+   &lt;p&gt;The &quot;&lt;code title=&quot;&quot;&gt;getCalendar()&lt;/code&gt;&quot; method could look like
+   this:&lt;/p&gt;
+
+   &lt;pre&gt;function getCalendar(node) {
+  while (node &amp;&amp; !node.item.has('vevent'))
+    node = node.parentNode;
+  if (!node) {
+    alert('No event data found.');
+    return;
+  }
+  var stamp = new Date();
+  var stampString = '' + stamp.getUTCFullYear() + (stamp.getUTCMonth() + 1) + stamp.getUTCDate() + 'T' +
+                         stamp.getUTCHours() + stamp.getUTCMinutes() + stamp.getUTCSeconds() + 'Z';
+  var calendar = 'BEGIN:VCALENDAR\r\nPRODID:HTML5\r\nVERSION:2.0\r\nBEGIN:VEVENT\r\nDTSTAMP:' + stampString + '\r\n';
+  for (var propIndex = 0; propIndex &lt; node.properties.length; propIndex += 1) {
+    var prop = node.properties[propIndex];
+    var value = prop.content;
+    var parameters = '';
+    if (prop.localName == 'time') {
+      value = value.replace(/[:-]/g, '');
+      if (prop.date &amp;&amp; prop.time)
+        parameters = ';VALUE=DATE';
+      else
+        parameters = ';VALUE=DATE-TIME';
+    } else {
+      value = value.replace(/\\/g, '\\n');
+      value = value.replace(/;/g, '\\;');
+      value = value.replace(/,/g, \\,');
+      value = value.replace(/[\r\n]/g, '\\n');
+    }
+    for (var nameIndex = 0; nameIndex &lt; prop.itemprop.length; nameIndex += 1) {
+      var name = prop.itemprop[nameIndex];
+      if (!name.match(':') &amp;&amp; !name.match('.')) {
+        calendar += name.toUpperCase() + parameters + ':' + value + '\r\n';
+      }
+    }
+  }
+  calendar += 'END:VEVENT\r\nEND:VCALENDAR\r\n';
+  return 'data:text/calendar;component=vevent,' + encodeURI(calendar);
+}&lt;/pre&gt;
+
+   &lt;p&gt;The same page could offer some markup, such as the following,
+   for copy-and-pasting into blogs:&lt;/p&gt;
+
+   &lt;pre&gt;&lt;div item=&quot;vevent&quot;&gt;
+ &lt;p&gt;I'm going to
+ &lt;strong property=&quot;summary&quot;&gt;Bluesday Tuesday: Money Road&lt;/strong&gt;,
+ &lt;time property=&quot;dtstart&quot; datetime=&quot;2009-05-05T19:00:00Z&quot;&gt;May 5th at 7pm&lt;/time&gt;
+ to &lt;time property=&quot;dtend&quot; content=&quot;2009-05-05T21:00:00Z&quot;&gt;9pm&lt;/time&gt;,
+ at &lt;span property=&quot;location&quot;&gt;The RoadHouse&lt;/span&gt;!&lt;/p&gt;
+ &lt;p&gt;&lt;a href=&quot;<A HREF="http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road">http://livebrum.co.uk/2009/05/05/bluesday-tuesday-money-road</A>&quot;
+       property=&quot;url&quot;&gt;See this event on livebrum.co.uk&lt;/a&gt;.&lt;/p&gt;
+ &lt;meta property=&quot;description&quot; content=&quot;via livebrum.co.uk&quot;&gt;
+&lt;/div&gt;&lt;/pre&gt;
+
+  &lt;/div&gt;
+
+
   &lt;h4&gt;BibTeX&lt;/h4&gt;
 
   &lt;p&gt;An item with the &lt;span&gt;predefined type&lt;/span&gt; &lt;dfn


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009981.html">[html5] r3100 - [e] (0) note future extension ideas for microdata
</A></li>
	<LI>Next message: <A HREF="009983.html">[html5] r3102 - [e] (0) oops, forgot to rename attributes
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9982">[ date ]</a>
              <a href="thread.html#9982">[ thread ]</a>
              <a href="subject.html#9982">[ subject ]</a>
              <a href="author.html#9982">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
