<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2877 - [] (0) Extract Web Sockets, Event Source,	and Web Storage out of HTML5.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2877%20-%20%5B%5D%20%280%29%20Extract%20Web%20Sockets%2C%20Event%20Source%2C%0A%09and%20Web%20Storage%20out%20of%20HTML5.&In-Reply-To=%3C20090318193154.A0D66150BB3%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009759.html">
   <LINK REL="Next"  HREF="009761.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2877 - [] (0) Extract Web Sockets, Event Source,	and Web Storage out of HTML5.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2877%20-%20%5B%5D%20%280%29%20Extract%20Web%20Sockets%2C%20Event%20Source%2C%0A%09and%20Web%20Storage%20out%20of%20HTML5.&In-Reply-To=%3C20090318193154.A0D66150BB3%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2877 - [] (0) Extract Web Sockets, Event Source,	and Web Storage out of HTML5.">whatwg at whatwg.org
       </A><BR>
    <I>Wed Mar 18 12:31:54 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009759.html">[html5] r2875 - [e] (0) Make clear that EventSource objects don't	reconnect on failure.
</A></li>
        <LI>Next message: <A HREF="009761.html">[html5] r2878 - [e] (0) Clarify &lt;time&gt;'s use cases and provide	examples. (bug 6536)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9760">[ date ]</a>
              <a href="thread.html#9760">[ thread ]</a>
              <a href="subject.html#9760">[ subject ]</a>
              <a href="author.html#9760">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-03-18 12:31:53 -0700 (Wed, 18 Mar 2009)
New Revision: 2877

Modified:
   index
   source
Log:
[] (0) Extract Web Sockets, Event Source, and Web Storage out of HTML5.

Modified: index
===================================================================
--- index	2009-03-18 06:49:56 UTC (rev 2876)
+++ index	2009-03-18 19:31:53 UTC (rev 2877)
@@ -183,7 +183,7 @@
      document.getElementById('updatesEnabled').checked = true;
      configureUpdates(true);
    }
-  &lt;/script&gt;&lt;h3 class=&quot;no-num no-toc&quot; id=stability-0&gt;Stability&lt;/h3&gt;
+  &lt;/script&gt;&lt;!--START html5--&gt;&lt;h3 class=&quot;no-num no-toc&quot; id=stability-0&gt;Stability&lt;/h3&gt;
 
   &lt;p&gt;Different parts of this specification are at different levels of
   maturity.&lt;/p&gt;
@@ -749,74 +749,42 @@
      &lt;li&gt;&lt;a href=#unloading-documents&gt;&lt;span class=secno&gt;5.10.10 &lt;/span&gt;Unloading documents&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#event-definition&gt;&lt;span class=secno&gt;5.10.10.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#structured-client-side-storage&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Structured client-side storage&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#storage&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Storing name/value pairs&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#following-hyperlinks&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Following hyperlinks&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;5.11.1.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-storage-interface&gt;&lt;span class=secno&gt;5.11.1.2 &lt;/span&gt;The &lt;code&gt;Storage&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;sessionStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-localstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-storage-event&gt;&lt;span class=secno&gt;5.11.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;storage&lt;/code&gt; event&lt;/a&gt;
-        &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#event-definition-0&gt;&lt;span class=secno&gt;5.11.1.5.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#threads&gt;&lt;span class=secno&gt;5.11.1.6 &lt;/span&gt;Threads&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#sql&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Database storage&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#hyperlink-auditing&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Hyperlink auditing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#linkTypes&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link types&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#introduction-4&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#databases&gt;&lt;span class=secno&gt;5.11.2.2 &lt;/span&gt;Databases&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#executing-sql-statements&gt;&lt;span class=secno&gt;5.11.2.3 &lt;/span&gt;Executing SQL statements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#database-query-results&gt;&lt;span class=secno&gt;5.11.2.4 &lt;/span&gt;Database query results&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#errors&gt;&lt;span class=secno&gt;5.11.2.5 &lt;/span&gt;Errors&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;5.11.2.6 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#disk-space&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Disk space&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#privacy&gt;&lt;span class=secno&gt;5.11.4 &lt;/span&gt;Privacy&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#user-tracking&gt;&lt;span class=secno&gt;5.11.4.1 &lt;/span&gt;User tracking&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cookie-resurrection&gt;&lt;span class=secno&gt;5.11.4.2 &lt;/span&gt;Cookie resurrection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#security-4&gt;&lt;span class=secno&gt;5.11.5 &lt;/span&gt;Security&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.11.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cross-directory-attacks&gt;&lt;span class=secno&gt;5.11.5.2 &lt;/span&gt;Cross-directory attacks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#implementation-risks&gt;&lt;span class=secno&gt;5.11.5.3 &lt;/span&gt;Implementation risks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sql-and-user-agents&gt;&lt;span class=secno&gt;5.11.5.4 &lt;/span&gt;SQL and user agents&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sql-injection&gt;&lt;span class=secno&gt;5.11.5.5 &lt;/span&gt;SQL injection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;5.12 &lt;/span&gt;Links&lt;/a&gt;
-    &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;5.12.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#following-hyperlinks&gt;&lt;span class=secno&gt;5.12.2 &lt;/span&gt;Following hyperlinks&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#hyperlink-auditing&gt;&lt;span class=secno&gt;5.12.2.1 &lt;/span&gt;Hyperlink auditing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#linkTypes&gt;&lt;span class=secno&gt;5.12.3 &lt;/span&gt;Link types&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#link-type-alternate&gt;&lt;span class=secno&gt;5.12.3.1 &lt;/span&gt;Link type &quot;&lt;code&gt;alternate&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-archives&gt;&lt;span class=secno&gt;5.12.3.2 &lt;/span&gt;Link type &quot;&lt;code&gt;archives&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-author&gt;&lt;span class=secno&gt;5.12.3.3 &lt;/span&gt;Link type &quot;&lt;code&gt;author&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-bookmark&gt;&lt;span class=secno&gt;5.12.3.4 &lt;/span&gt;Link type &quot;&lt;code&gt;bookmark&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-external&gt;&lt;span class=secno&gt;5.12.3.5 &lt;/span&gt;Link type &quot;&lt;code&gt;external&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-feed&gt;&lt;span class=secno&gt;5.12.3.6 &lt;/span&gt;Link type &quot;&lt;code&gt;feed&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-help&gt;&lt;span class=secno&gt;5.12.3.7 &lt;/span&gt;Link type &quot;&lt;code&gt;help&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rel-icon&gt;&lt;span class=secno&gt;5.12.3.8 &lt;/span&gt;Link type &quot;&lt;code&gt;icon&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-license&gt;&lt;span class=secno&gt;5.12.3.9 &lt;/span&gt;Link type &quot;&lt;code&gt;license&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-nofollow&gt;&lt;span class=secno&gt;5.12.3.10 &lt;/span&gt;Link type &quot;&lt;code&gt;nofollow&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-noreferrer&gt;&lt;span class=secno&gt;5.12.3.11 &lt;/span&gt;Link type &quot;&lt;code&gt;noreferrer&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-pingback&gt;&lt;span class=secno&gt;5.12.3.12 &lt;/span&gt;Link type &quot;&lt;code&gt;pingback&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-prefetch&gt;&lt;span class=secno&gt;5.12.3.13 &lt;/span&gt;Link type &quot;&lt;code&gt;prefetch&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-search&gt;&lt;span class=secno&gt;5.12.3.14 &lt;/span&gt;Link type &quot;&lt;code&gt;search&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-stylesheet&gt;&lt;span class=secno&gt;5.12.3.15 &lt;/span&gt;Link type &quot;&lt;code&gt;stylesheet&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-sidebar&gt;&lt;span class=secno&gt;5.12.3.16 &lt;/span&gt;Link type &quot;&lt;code&gt;sidebar&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-tag&gt;&lt;span class=secno&gt;5.12.3.17 &lt;/span&gt;Link type &quot;&lt;code&gt;tag&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#hierarchical-link-types&gt;&lt;span class=secno&gt;5.12.3.18 &lt;/span&gt;Hierarchical link types&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#link-type-alternate&gt;&lt;span class=secno&gt;5.11.3.1 &lt;/span&gt;Link type &quot;&lt;code&gt;alternate&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-archives&gt;&lt;span class=secno&gt;5.11.3.2 &lt;/span&gt;Link type &quot;&lt;code&gt;archives&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-author&gt;&lt;span class=secno&gt;5.11.3.3 &lt;/span&gt;Link type &quot;&lt;code&gt;author&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-bookmark&gt;&lt;span class=secno&gt;5.11.3.4 &lt;/span&gt;Link type &quot;&lt;code&gt;bookmark&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-external&gt;&lt;span class=secno&gt;5.11.3.5 &lt;/span&gt;Link type &quot;&lt;code&gt;external&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-feed&gt;&lt;span class=secno&gt;5.11.3.6 &lt;/span&gt;Link type &quot;&lt;code&gt;feed&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-help&gt;&lt;span class=secno&gt;5.11.3.7 &lt;/span&gt;Link type &quot;&lt;code&gt;help&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rel-icon&gt;&lt;span class=secno&gt;5.11.3.8 &lt;/span&gt;Link type &quot;&lt;code&gt;icon&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-license&gt;&lt;span class=secno&gt;5.11.3.9 &lt;/span&gt;Link type &quot;&lt;code&gt;license&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-nofollow&gt;&lt;span class=secno&gt;5.11.3.10 &lt;/span&gt;Link type &quot;&lt;code&gt;nofollow&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-noreferrer&gt;&lt;span class=secno&gt;5.11.3.11 &lt;/span&gt;Link type &quot;&lt;code&gt;noreferrer&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-pingback&gt;&lt;span class=secno&gt;5.11.3.12 &lt;/span&gt;Link type &quot;&lt;code&gt;pingback&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-prefetch&gt;&lt;span class=secno&gt;5.11.3.13 &lt;/span&gt;Link type &quot;&lt;code&gt;prefetch&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-search&gt;&lt;span class=secno&gt;5.11.3.14 &lt;/span&gt;Link type &quot;&lt;code&gt;search&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-stylesheet&gt;&lt;span class=secno&gt;5.11.3.15 &lt;/span&gt;Link type &quot;&lt;code&gt;stylesheet&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-sidebar&gt;&lt;span class=secno&gt;5.11.3.16 &lt;/span&gt;Link type &quot;&lt;code&gt;sidebar&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-tag&gt;&lt;span class=secno&gt;5.11.3.17 &lt;/span&gt;Link type &quot;&lt;code&gt;tag&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#hierarchical-link-types&gt;&lt;span class=secno&gt;5.11.3.18 &lt;/span&gt;Hierarchical link types&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#link-type-index&gt;&lt;span class=secno&gt;5.12.3.18.1 &lt;/span&gt;Link type &quot;&lt;code&gt;index&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-up&gt;&lt;span class=secno&gt;5.12.3.18.2 &lt;/span&gt;Link type &quot;&lt;code&gt;up&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sequential-link-types&gt;&lt;span class=secno&gt;5.12.3.19 &lt;/span&gt;Sequential link types&lt;/a&gt;
+         &lt;li&gt;&lt;a href=#link-type-index&gt;&lt;span class=secno&gt;5.11.3.18.1 &lt;/span&gt;Link type &quot;&lt;code&gt;index&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-up&gt;&lt;span class=secno&gt;5.11.3.18.2 &lt;/span&gt;Link type &quot;&lt;code&gt;up&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#sequential-link-types&gt;&lt;span class=secno&gt;5.11.3.19 &lt;/span&gt;Sequential link types&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#link-type-first&gt;&lt;span class=secno&gt;5.12.3.19.1 &lt;/span&gt;Link type &quot;&lt;code&gt;first&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-last&gt;&lt;span class=secno&gt;5.12.3.19.2 &lt;/span&gt;Link type &quot;&lt;code&gt;last&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-next&gt;&lt;span class=secno&gt;5.12.3.19.3 &lt;/span&gt;Link type &quot;&lt;code&gt;next&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-prev&gt;&lt;span class=secno&gt;5.12.3.19.4 &lt;/span&gt;Link type &quot;&lt;code&gt;prev&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#other-link-types&gt;&lt;span class=secno&gt;5.12.3.20 &lt;/span&gt;Other link types&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-first&gt;&lt;span class=secno&gt;5.11.3.19.1 &lt;/span&gt;Link type &quot;&lt;code&gt;first&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-last&gt;&lt;span class=secno&gt;5.11.3.19.2 &lt;/span&gt;Link type &quot;&lt;code&gt;last&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-next&gt;&lt;span class=secno&gt;5.11.3.19.3 &lt;/span&gt;Link type &quot;&lt;code&gt;next&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-prev&gt;&lt;span class=secno&gt;5.11.3.19.4 &lt;/span&gt;Link type &quot;&lt;code&gt;prev&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#other-link-types&gt;&lt;span class=secno&gt;5.11.3.20 &lt;/span&gt;Other link types&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#editing&gt;&lt;span class=secno&gt;6 &lt;/span&gt;User Interaction&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#editing-intro&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -840,7 +808,7 @@
    &lt;li&gt;&lt;a href=#spelling-and-grammar-checking&gt;&lt;span class=secno&gt;6.8 &lt;/span&gt;Spelling and grammar checking&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#dnd&gt;&lt;span class=secno&gt;6.9 &lt;/span&gt;Drag and drop&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-5&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-dragevent-and-datatransfer-interfaces&gt;&lt;span class=secno&gt;6.9.2 &lt;/span&gt;The &lt;code&gt;DragEvent&lt;/code&gt; and &lt;code&gt;DataTransfer&lt;/code&gt; interfaces&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#events-fired-during-a-drag-and-drop-action&gt;&lt;span class=secno&gt;6.9.3 &lt;/span&gt;Events fired during a drag-and-drop action&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#drag-and-drop-processing-model&gt;&lt;span class=secno&gt;6.9.4 &lt;/span&gt;Drag-and-drop processing model&lt;/a&gt;
@@ -859,7 +827,7 @@
      &lt;li&gt;&lt;a href=#security-risks-in-the-drag-and-drop-model&gt;&lt;span class=secno&gt;6.9.7 &lt;/span&gt;Security risks in the drag-and-drop model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#undo&gt;&lt;span class=secno&gt;6.10 &lt;/span&gt;Undo history&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;6.10.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-4&gt;&lt;span class=secno&gt;6.10.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#definitions-1&gt;&lt;span class=secno&gt;6.10.2 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-undomanager-interface&gt;&lt;span class=secno&gt;6.10.3 &lt;/span&gt;The &lt;code&gt;UndoManager&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#undo:-moving-back-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;6.10.4 &lt;/span&gt;Undo: moving back in the undo transaction history&lt;/a&gt;&lt;/li&gt;
@@ -870,60 +838,22 @@
  &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;7 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#event-definitions&gt;&lt;span class=secno&gt;7.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#server-sent-events&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;Server-sent events&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#crossDocumentMessages&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#server-sent-events-intro&gt;&lt;span class=secno&gt;7.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-eventsource-interface&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-3&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#parsing-an-event-stream&gt;&lt;span class=secno&gt;7.2.4 &lt;/span&gt;Parsing an event stream&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#event-stream-interpretation&gt;&lt;span class=secno&gt;7.2.5 &lt;/span&gt;Interpreting an event stream&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#notes&gt;&lt;span class=secno&gt;7.2.6 &lt;/span&gt;Notes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#garbage-collection-0&gt;&lt;span class=secno&gt;7.2.7 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#network&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Web sockets&lt;/a&gt;
-    &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#network-intro&gt;&lt;span class=secno&gt;7.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-websocket-interface&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;The &lt;code&gt;WebSocket&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#feedback-from-the-protocol&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Feedback from the protocol&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-5&gt;&lt;span class=secno&gt;7.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#security-4&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;Security&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#garbage-collection-1&gt;&lt;span class=secno&gt;7.3.3.1 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#websocket-protocol title=&quot;This protocol enables two-way
-  communication between a user agent running untrusted code running in
-  a controlled environment to a remote host that understands the
-  protocol. It is intended to fail to communicate with servers of
-  pre-existing protocols like SMTP or HTTP, while allowing HTTP
-  servers to opt-in to supporting this protocol if desired. It is
-  designed to be easy to implement on the server side.&quot;&gt;&lt;span class=secno&gt;7.3.4 &lt;/span&gt;The Web Socket
-  protocol&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;7.3.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#client-side-requirements&gt;&lt;span class=secno&gt;7.3.4.2 &lt;/span&gt;Client-side requirements&lt;/a&gt;
-        &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#handshake&gt;&lt;span class=secno&gt;7.3.4.2.1 &lt;/span&gt;Handshake&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#data-framing&gt;&lt;span class=secno&gt;7.3.4.2.2 &lt;/span&gt;Data framing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#server-side-requirements&gt;&lt;span class=secno&gt;7.3.4.3 &lt;/span&gt;Server-side requirements&lt;/a&gt;
-        &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#minimal-handshake&gt;&lt;span class=secno&gt;7.3.4.3.1 &lt;/span&gt;Minimal handshake&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#handshake-details&gt;&lt;span class=secno&gt;7.3.4.3.2 &lt;/span&gt;Handshake details&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#ws-sd-framing&gt;&lt;span class=secno&gt;7.3.4.3.3 &lt;/span&gt;Data framing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#closing-the-connection&gt;&lt;span class=secno&gt;7.3.4.4 &lt;/span&gt;Closing the connection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#security-considerations&gt;&lt;span class=secno&gt;7.3.4.5 &lt;/span&gt;Security considerations&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#iana-considerations&gt;&lt;span class=secno&gt;7.3.4.6 &lt;/span&gt;IANA considerations&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#crossDocumentMessages&gt;&lt;span class=secno&gt;7.4 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#authors&gt;&lt;span class=secno&gt;7.2.2.1 &lt;/span&gt;Authors&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#user-agents&gt;&lt;span class=secno&gt;7.2.2.2 &lt;/span&gt;User agents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#posting-messages&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Posting messages&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#posting-messages-with-message-ports&gt;&lt;span class=secno&gt;7.2.4 &lt;/span&gt;Posting messages with message ports&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;Channel messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;7.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#security-5&gt;&lt;span class=secno&gt;7.4.2 &lt;/span&gt;Security&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;7.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Message ports&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#authors&gt;&lt;span class=secno&gt;7.4.2.1 &lt;/span&gt;Authors&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#user-agents&gt;&lt;span class=secno&gt;7.4.2.2 &lt;/span&gt;User agents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#posting-messages&gt;&lt;span class=secno&gt;7.4.3 &lt;/span&gt;Posting messages&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#posting-messages-with-message-ports&gt;&lt;span class=secno&gt;7.4.4 &lt;/span&gt;Posting messages with message ports&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;7.5 &lt;/span&gt;Channel messaging&lt;/a&gt;
-    &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;7.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;7.5.3 &lt;/span&gt;Message ports&lt;/a&gt;
-      &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;7.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#ports-and-garbage-collection&gt;&lt;span class=secno&gt;7.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#syntax&gt;&lt;span class=secno&gt;8 &lt;/span&gt;The HTML syntax&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#writing-html-documents&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;Writing HTML documents&lt;/a&gt;
@@ -1038,10 +968,10 @@
    &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;9.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;10 &lt;/span&gt;Rendering&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#introduction-10&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-11&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#display-types&gt;&lt;span class=secno&gt;10.2.2 &lt;/span&gt;Display types&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#margins-and-padding&gt;&lt;span class=secno&gt;10.2.3 &lt;/span&gt;Margins and padding&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#alignment&gt;&lt;span class=secno&gt;10.2.4 &lt;/span&gt;Alignment&lt;/a&gt;&lt;/li&gt;
@@ -1059,7 +989,7 @@
      &lt;li&gt;&lt;a href=#tool-bars-0&gt;&lt;span class=secno&gt;10.3.5 &lt;/span&gt;Tool bars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-12&gt;&lt;span class=secno&gt;10.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;10.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-bb-element-0&gt;&lt;span class=secno&gt;10.4.2 &lt;/span&gt;The &lt;code&gt;bb&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;10.4.3 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-datagrid-element&gt;&lt;span class=secno&gt;10.4.4 &lt;/span&gt;The &lt;code&gt;datagrid&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
@@ -8869,7 +8799,7 @@
    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#undomanager&gt;UndoManager&lt;/a&gt;&lt;/code&gt;,
    &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#selection-0&gt;Selection&lt;/a&gt;&lt;/code&gt; objects, the
-   various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt;
+   various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;Storage&lt;/code&gt;
    objects, and the various &lt;code&gt;&lt;a href=#htmlcollection-0&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects. It
    also includes all the WebIDL prototypes in the ECMAScript binding,
    including the &lt;code&gt;Document&lt;/code&gt; object's prototype.)&lt;/li&gt;
@@ -38771,9 +38701,9 @@
 
   // the user agent
   readonly attribute &lt;a href=#navigator&gt;Navigator&lt;/a&gt; &lt;a href=#dom-navigator title=dom-navigator&gt;navigator&lt;/a&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
-  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-localstorage title=dom-localStorage&gt;localStorage&lt;/a&gt;;
-  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-sessionstorage title=dom-sessionStorage&gt;sessionStorage&lt;/a&gt;;
-  &lt;a href=#database&gt;Database&lt;/a&gt; &lt;a href=#dom-opendatabase title=dom-opendatabase&gt;openDatabase&lt;/a&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize);
+  readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=dom-localStorage&gt;localStorage&lt;/span&gt;; &lt;!-- XXX split into separate interface --&gt;
+  readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=dom-sessionStorage&gt;sessionStorage&lt;/span&gt;;
+  &lt;span&gt;Database&lt;/span&gt; &lt;span title=dom-opendatabase&gt;openDatabase&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize); &lt;!-- XXX split into separate interface --&gt;
   readonly attribute &lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt; &lt;a href=#dom-applicationcache title=dom-applicationCache&gt;applicationCache&lt;/a&gt;;
 
   // user prompts
@@ -40796,7 +40726,7 @@
 
    &lt;dt&gt;&lt;dfn id=handler-window-onstorage title=handler-window-onstorage&gt;&lt;code&gt;onstorage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- new --&gt;
 
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event is targeted at or bubbles
+   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code title=event-storage&gt;storage&lt;/code&gt; event is targeted at or bubbles
    through the object.&lt;/dd&gt;
 
    &lt;dt&gt;&lt;dfn id=handler-window-onunload title=handler-window-onunload&gt;&lt;code&gt;onunload&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt; &lt;!-- widely used --&gt;
@@ -45005,1187 +44935,12 @@
 
 
 
-  &lt;h3 id=structured-client-side-storage&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Structured client-side storage&lt;/h3&gt;
 
-  &lt;h4 id=storage&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Storing name/value pairs&lt;/h4&gt;
+  &lt;h3 id=links&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/h3&gt;
 
-  &lt;h5 id=introduction-3&gt;&lt;span class=secno&gt;5.11.1.1 &lt;/span&gt;Introduction&lt;/h5&gt;
 
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
+  &lt;h4 id=hyperlink-elements&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
 
-  &lt;p&gt;This specification introduces two related mechanisms, similar to
-  HTTP session cookies, for storing structured data on the client
-  side. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The first is designed for scenarios where the user is carrying
-  out a single transaction, but could be carrying out multiple
-  transactions in different windows at the same time.&lt;/p&gt;
-
-  &lt;p&gt;Cookies don't really handle this case well. For example, a user
-  could be buying plane tickets in two different windows, using the
-  same site. If the site used cookies to keep track of which ticket
-  the user was buying, then as the user clicked from page to page in
-  both windows, the ticket currently being purchased would &quot;leak&quot; from
-  one window to the other, potentially causing the user to buy two
-  tickets for the same flight without really noticing.&lt;/p&gt;
-
-  &lt;p&gt;To address this, this specification introduces the &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; DOM attribute.
-  Sites can add data to the session storage, and it will be accessible
-  to any page from the same site opened in that window.&lt;/p&gt; &lt;!-- we're
-  not using xrefs here because this is just an intro --&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;For example, a page could have a checkbox that the user ticks to
-   indicate that he wants insurance:&lt;/p&gt;
-
-   &lt;pre&gt;&lt;label&gt;
- &lt;input type=&quot;checkbox&quot; onchange=&quot;sessionStorage.insurance = checked&quot;&gt;
- I want insurance on this trip.
-&lt;/label&gt;&lt;/pre&gt;
-
-   &lt;p&gt;A later page could then check, from script, whether the user had
-   checked the checkbox or not:&lt;/p&gt;
-
-   &lt;pre&gt;if (sessionStorage.insurance) { ... }&lt;/pre&gt;
-
-   &lt;p&gt;If the user had multiple windows opened on the site, each one
-   would have its own individual copy of the session storage object.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;!--
-
-   sessionStorage.flightDeparture = 'OSL';
-   sessionStorage.flightArrival = 'NYC';
-
-   for (var i in forms[0].elements)
-      sessionStorage[&quot;data_&quot; + i.name] = i.value;
-
-   if (!sessionStorage[documents])
-     sessionStorage[documents] = {};
-   sessionStorage[documents][filename] = &lt;document/&gt;;
-
-  --&gt;
-
-  &lt;p&gt;The second storage mechanism is designed for storage that spans
-  multiple windows, and lasts beyond the current session. In
-  particular, Web applications may wish to store megabytes of user
-  data, such as entire user-authored documents or a user's mailbox, on
-  the client side for performance reasons.&lt;/p&gt;
-
-  &lt;p&gt;Again, cookies do not handle this case well, because they are
-  transmitted with every request.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; DOM
-  attribute is used to access a page's local storage area.&lt;/p&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;The site at example.com can display a count of how many times
-   the user has loaded its page by putting the following at the bottom
-   of its page:&lt;/p&gt;
-
-   &lt;pre&gt;&lt;p&gt;
-  You have viewed this page
-  &lt;span id=&quot;count&quot;&gt;an untold number of&lt;/span&gt;
-  time(s).
-&lt;/p&gt;
-&lt;script&gt;
-  if (!localStorage.pageLoadCount)
-    localStorage.pageLoadCount = 0;
-  localStorage.pageLoadCount = parseInt(localStorage.pageLoadCount, 10) + 1;
-  document.getElementById('count').textContent = localStorage.pageLoadCount;
-&lt;/script&gt;&lt;/pre&gt;
-
-   &lt;p&gt;The use of &lt;code title=&quot;&quot;&gt;parseInt()&lt;/code&gt; is needed when
-   dealing with numbers (integers in this case) because the storage
-   APIs are all string-based.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;p&gt;Each site has its own separate storage area.&lt;/p&gt;
-
-  &lt;p&gt;Storage areas (both session storage and local storage) store
-  strings. To store structured data in a storage area, you must first
-  convert it to a string.&lt;/p&gt;
-
-
-
-  &lt;h5 id=the-storage-interface&gt;&lt;span class=secno&gt;5.11.1.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=storage-0&gt;Storage&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=#dom-storage-length title=dom-Storage-length&gt;length&lt;/a&gt;;
-  [IndexGetter] DOMString &lt;a href=#dom-storage-key title=dom-Storage-key&gt;key&lt;/a&gt;(in unsigned long index);
-  [NameGetter] DOMString &lt;a href=#dom-storage-getitem title=dom-Storage-getItem&gt;getItem&lt;/a&gt;(in DOMString key);
-  [NameSetter] void &lt;a href=#dom-storage-setitem title=dom-Storage-setItem&gt;setItem&lt;/a&gt;(in DOMString key, in DOMString data);
-  [NameDeleter] void &lt;a href=#dom-storage-removeitem title=dom-Storage-removeItem&gt;removeItem&lt;/a&gt;(in DOMString key);
-  void &lt;a href=#dom-storage-clear title=dom-Storage-clear&gt;clear&lt;/a&gt;();
-};&lt;/pre&gt;
-
-  &lt;!-- v2 ideas:
-    a getInfo() method that returns an object that tells you:
-       - when the key was added
-       - when the key was last modified
-       - which page was the last to modify the key
-    [-Mihai Sucan]
-  --&gt;  
-
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object provides access to a list of
-  key/value pairs, which are sometimes called items. Keys and values
-  are strings. Any string (including the empty string) is a valid
-  key.&lt;/p&gt;
-
-  &lt;p class=note&gt;To store more structured data, authors may consider
-  using the &lt;a href=#sql&gt;SQL interfaces&lt;/a&gt; instead.&lt;/p&gt;
-
-  &lt;p&gt;Each &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with a list of
-  key/value pairs when it is created, as defined in the sections on
-  the &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attributes. Multiple
-  separate objects implementing the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface can
-  all be associated with the same list of key/value pairs
-  simultaneously.&lt;/p&gt;
-
-  &lt;p&gt;The object's &lt;span&gt;indices of the supported indexed
-  properties&lt;/span&gt; are the numbers in the range zero to one less than
-  the number of key/value pairs currently present in the list
-  associated with the object. If the list is empty, then there are no
-  &lt;span&gt;supported indexed properties&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-length title=dom-Storage-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of key/value pairs currently
-  present in the list associated with the object.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-key title=dom-Storage-key&gt;&lt;code&gt;key(&lt;var title=&quot;&quot;&gt;n&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the name of the
-  &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th key in the list. The order of keys is
-  user-agent defined, but must be consistent within an object between
-  changes to the number of keys. (Thus, &lt;a href=#dom-storage-setitem title=dom-Storage-setItem&gt;adding&lt;/a&gt; or &lt;a href=#dom-storage-removeitem title=dom-Storage-removeItem&gt;removing&lt;/a&gt; a key may change the
-  order of the keys, but merely changing the value of an existing key
-  must not.) &lt;!--The order of keys may differ between instances of the
-  &lt;code&gt;Storage&lt;/code&gt; interface accessing the same list. [removed for
-  now for clarity, but if people ask, put it back. this is part of the
-  spec.]--&gt; If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is &lt;!--less than zero or [can't,
-  unsigned]--&gt; greater than or equal to the number of key/value pairs
-  in the object, then this method must raise an
-  &lt;code&gt;&lt;a href=#index_size_err&gt;INDEX_SIZE_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;span&gt;names of the supported named properties&lt;/span&gt; on a
-  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object are the keys of each key/value pair
-  currently present in the list associated with the object.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-getitem title=dom-Storage-getItem&gt;&lt;code&gt;getItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the current
-  value associated with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt;. If the
-  given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; does not exist in the list associated
-  with the object then this method must return null.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-setitem title=dom-Storage-setItem&gt;&lt;code&gt;setItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method
-  must first check if a key/value pair with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; already exists in the list associated with the
-  object.&lt;/p&gt;
-
-  &lt;p&gt;If it does not, then a new key/value pair must be added to the
-  list, with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p&gt;If the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; &lt;em&gt;does&lt;/em&gt; exist in the
-  list, then it must have its value updated to the value given in the
-  &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; argument.&lt;/p&gt;
-
-  &lt;p&gt;If it couldn't set the new value, the method must raise an
-  &lt;code&gt;&lt;a href=#quota_exceeded_err&gt;QUOTA_EXCEEDED_ERR&lt;/a&gt;&lt;/code&gt; exception. (Setting could fail if,
-  e.g., the user has disabled storage for the domain, or if the quota
-  has been exceeded.)&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-removeitem title=dom-Storage-removeItem&gt;&lt;code&gt;removeItem(&lt;var title=&quot;&quot;&gt;key&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must cause the key/value
-  pair with the given &lt;var title=&quot;&quot;&gt;key&lt;/var&gt; to be removed from the
-  list associated with the object, if it exists. If no item with that
-  key exists, the method must do nothing.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt; methods must be
-  atomic with respect to failure. In the case of failure, the method
-  does nothing. That is, changes to the data storage area must either
-  be successful, or the data storage area must not be changed at
-  all.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storage-clear title=dom-Storage-clear&gt;&lt;code&gt;clear()&lt;/code&gt;&lt;/dfn&gt;
-  method must atomically cause the list associated with the object to
-  be emptied of all key/value pairs, if there are any. If there are
-  none, then the method must do nothing.&lt;/p&gt;
-
-  &lt;p class=note&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are invoked, events
-  are fired on other &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; objects that can access
-  the newly stored or removed data, as defined in the sections on the
-  &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attributes.&lt;/p&gt; &lt;!--
-  not normative, see the sections below for the normative statement
-  --&gt;
-
-  &lt;p class=note&gt;This specification does not require that the above
-  methods wait until the data has been physically written to
-  disk. Only consistency in what different scripts accessing the same
-  underlying list of key/value pairs see is required.&lt;/p&gt;
-
-
-
-  &lt;h5 id=the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sessionstorage title=dom-sessionStorage&gt;&lt;code&gt;sessionStorage&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the set of storage areas specific to the
-  current &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Each &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; has a unique set of
-  session storage areas, one for each &lt;a href=#origin-0&gt;origin&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;User agents should not expire data from a browsing context's
-  session storage areas, but may do so when the user requests that
-  such data be deleted, or when the UA detects that it has limited
-  storage space, or for security reasons. User agents should always
-  avoid deleting data while a script that could access that data is
-  running. When a top-level browsing context is destroyed (and
-  therefore permanently inaccessible to the user) the data stored in
-  its session storage areas can be discarded with it, as the API
-  described in this specification provides no way for that data to
-  ever be subsequently retrieved.&lt;/p&gt;
-
-  &lt;p class=note&gt;The lifetime of a browsing context can be unrelated
-  to the lifetime of the actual user agent process itself, as the user
-  agent may support resuming sessions after a restart.&lt;/p&gt;
-
-  &lt;p&gt;When a new &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; is created, the user agent
-  must check to see if the document's &lt;a href=#top-level-browsing-context&gt;top-level browsing
-  context&lt;/a&gt; has allocated a session storage area for that
-  document's &lt;a href=#origin-0&gt;origin&lt;/a&gt;. If it has not, a new storage area
-  for that document's &lt;a href=#origin-0&gt;origin&lt;/a&gt; must be created.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt;
-  attribute must return the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object associated
-  with that session storage area. Each &lt;code&gt;Document&lt;/code&gt; object
-  must have a separate object for its &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-  &lt;p&gt;When a new &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; is created by
-  cloning an existing &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, the new browsing
-  context must start with the same session storage areas as the
-  original, but the two sets must from that point on be considered
-  separate, not affecting each other in any way.&lt;/p&gt;
-
-  &lt;p&gt;When a new &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; is created by
-  a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; in an existing
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, or by the user following a link in an
-  existing browsing context, or in some other way related to a
-  specific &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;, then the session storage area of
-  the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of that &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; must be
-  copied into the new browsing context when it is created.  From that
-  point on, however, the two session storage areas must be considered
-  separate, not affecting each other in any way.&lt;/p&gt;
-
-  &lt;p id=sessionStorageEvent&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are called on a
-  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; that is associated
-  with a session storage area, if the methods did something, then in
-  every &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-  object's &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt;
-  attribute's &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with the same
-  storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
-
-
-  &lt;h5 id=the-localstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-localstorage title=dom-localStorage&gt;&lt;code&gt;localStorage&lt;/code&gt;&lt;/dfn&gt;
-  object provides a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object for an
-  &lt;a href=#origin-0&gt;origin&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;User agents must have a set of local storage areas, one for each
-  &lt;a href=#origin-0&gt;origin&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;User agents should expire data from the local storage areas only
-  for security reasons or when requested to do so by the user. User
-  agents should always avoid deleting data while a script that could
-  access that data is running. Data stored in local storage areas
-  should be considered potentially user-critical. It is expected that
-  Web applications will use the local storage areas for storing
-  user-written documents.&lt;/p&gt;
-
-  &lt;p&gt;When the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;
-  attribute is accessed, the user agent must check to see if it has
-  allocated a local storage area for the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
-  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-  method was invoked. If it has not, a new storage area for that
-  &lt;a href=#origin-0&gt;origin&lt;/a&gt; must be created.&lt;/p&gt;
-
-  &lt;p&gt;The user agent must then return the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object
-  associated with that origin's local storage area. Each
-  &lt;code&gt;Document&lt;/code&gt; object must have a separate object for its
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute.&lt;/p&gt;
-
-  &lt;p id=localStorageEvent&gt;When the &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; methods are called on a
-  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; that is associated
-  with a local storage area, if the methods did something, then in
-  every &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-  object's &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;
-  attribute's &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object is associated with the same
-  storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
-
-
-  &lt;h5 id=the-storage-event&gt;&lt;span class=secno&gt;5.11.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event&lt;/h5&gt;
-
-  &lt;!-- XXX fix up for workers: target is wrong, source and storageArea
-  definitions are wrong --&gt;
-
-  &lt;p&gt;The &lt;dfn id=event-storage title=event-storage&gt;&lt;code&gt;storage&lt;/code&gt;&lt;/dfn&gt; event
-  is fired when a storage area changes, as described in the previous
-  two sections (&lt;a href=#sessionStorageEvent&gt;for session
-  storage&lt;/a&gt;, &lt;a href=#localStorageEvent&gt;for local
-  storage&lt;/a&gt;).&lt;/p&gt;
-
-  &lt;p&gt;When this happens, the user agent must dispatch an event with the
-  name &lt;code&gt;&lt;a href=#storage-0&gt;storage&lt;/a&gt;&lt;/code&gt;, with no namespace, which does not bubble
-  but is cancelable, and which uses the &lt;code&gt;&lt;a href=#storageevent&gt;StorageEvent&lt;/a&gt;&lt;/code&gt;
-  interface, at each &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose
-  &lt;code&gt;Document&lt;/code&gt; object both has a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object
-  that is affected, and is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;If the event is being fired due to an invocation of the
-  &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt; methods, the
-  event must have its &lt;code title=dom-StorageEvent-key&gt;&lt;a href=#dom-storageevent-key&gt;key&lt;/a&gt;&lt;/code&gt;
-  attribute set to the name of the key in question, its &lt;code title=dom-StorageEvent-oldValue&gt;&lt;a href=#dom-storageevent-oldvalue&gt;oldValue&lt;/a&gt;&lt;/code&gt; attribute set to
-  the old value of the key in question, or null if the key is newly
-  added, and its &lt;code title=dom-StorageEvent-newValue&gt;&lt;a href=#dom-storageevent-newvalue&gt;newValue&lt;/a&gt;&lt;/code&gt;
-  attribute set to the new value of the key in question, or null if
-  the key was removed.&lt;/p&gt;
-
-  &lt;p&gt;Otherwise, if the event is being fired due to an invocation of
-  the &lt;code title=dom-Storage-clear&gt;&lt;a href=#dom-storage-clear&gt;clear()&lt;/a&gt;&lt;/code&gt; method, the event
-  must have its &lt;code title=dom-StorageEvent-key&gt;&lt;a href=#dom-storageevent-key&gt;key&lt;/a&gt;&lt;/code&gt;, &lt;code title=dom-StorageEvent-oldValue&gt;&lt;a href=#dom-storageevent-oldvalue&gt;oldValue&lt;/a&gt;&lt;/code&gt;, and &lt;code title=dom-StorageEvent-newValue&gt;&lt;a href=#dom-storageevent-newvalue&gt;newValue&lt;/a&gt;&lt;/code&gt; attributes set to
-  null.&lt;/p&gt;
-
-  &lt;p&gt;In addition, the event must have its &lt;code title=dom-StorageEvent-url&gt;&lt;a href=#dom-storageevent-url&gt;url&lt;/a&gt;&lt;/code&gt; attribute set to &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the address of the document&lt;/a&gt;
-  whose &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object was affected; its &lt;code title=dom-StorageEvent-source&gt;&lt;a href=#dom-storageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute set to the
-  that document's &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
-  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, if the two documents are in the
-  same &lt;a href=#unit-of-related-browsing-contexts&gt;unit of related browsing contexts&lt;/a&gt;, or null
-  otherwise; and its &lt;code title=dom-StorageEvent-storageArea&gt;&lt;a href=#dom-storageevent-storagearea&gt;storageArea&lt;/a&gt;&lt;/code&gt; attribute
-  set to the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object from the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-  object of the target &lt;code&gt;Document&lt;/code&gt; that represents the same
-  kind of &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; area as was affected (i.e. session or
-  local).&lt;/p&gt;
-
-
-  &lt;h6 id=event-definition-0&gt;&lt;span class=secno&gt;5.11.1.5.1 &lt;/span&gt;Event definition&lt;/h6&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=storageevent&gt;StorageEvent&lt;/dfn&gt; : Event {
-  readonly attribute DOMString &lt;a href=#dom-storageevent-key title=dom-StorageEvent-key&gt;key&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=#dom-storageevent-oldvalue title=dom-StorageEvent-oldValue&gt;oldValue&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=#dom-storageevent-newvalue title=dom-StorageEvent-newValue&gt;newValue&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=#dom-storageevent-url title=dom-StorageEvent-url&gt;url&lt;/a&gt;;
-  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-storageevent-source title=dom-StorageEvent-source&gt;source&lt;/a&gt;;
-  readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;storageArea&lt;/a&gt;;
-  void &lt;a href=#dom-storageevent-initstorageevent title=dom-StorageEvent-initStorageEvent&gt;initStorageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
-  void &lt;a href=#dom-storageevent-initstorageeventns title=dom-StorageEvent-initStorageEventNS&gt;initStorageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-initstorageevent title=dom-StorageEvent-initStorageEvent&gt;&lt;code&gt;initStorageEvent()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-storageevent-initstorageeventns title=dom-StorageEvent-initStorageEventNS&gt;&lt;code&gt;initStorageEventNS()&lt;/code&gt;&lt;/dfn&gt;
-  methods must initialize the event in a manner analogous to the
-  similarly-named methods in the DOM3 Events interfaces. &lt;a href=#refsDOM3EVENTS&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-key title=dom-StorageEvent-key&gt;&lt;code&gt;key&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the key being changed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-oldvalue title=dom-StorageEvent-oldValue&gt;&lt;code&gt;oldValue&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the old value of the key being changed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-newvalue title=dom-StorageEvent-newValue&gt;&lt;code&gt;newValue&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the new value of the key being changed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-url title=dom-StorageEvent-url&gt;&lt;code&gt;url&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the address of the document whose key
-  changed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-source title=dom-StorageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
-  represents the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; of the document whose key changed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;&lt;code&gt;storageArea&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object that was
-  affected.&lt;/p&gt;
-
-
-
-  &lt;h5 id=threads&gt;&lt;span class=secno&gt;5.11.1.6 &lt;/span&gt;Threads&lt;/h5&gt;
-
-  &lt;p&gt;Multiple browsing contexts must be able to access the local
-  storage areas simultaneously in such a manner that scripts cannot
-  detect any concurrent script execution.&lt;/p&gt;
-
-  &lt;p&gt;This is required to guarantee that the &lt;code title=dom-Storage-length&gt;&lt;a href=#dom-storage-length&gt;length&lt;/a&gt;&lt;/code&gt; attribute of a
-  &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object never changes while a script is
-  executing, other than in a way that is predictable by the script
-  itself.&lt;/p&gt;
-
-  &lt;p class=note&gt;There are various ways of implementing this
-  requirement. One is to just have one &lt;a href=#event-loop&gt;event loop&lt;/a&gt; for all
-  &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt;. Another is
-  that if a script running in one browsing context accesses a storage
-  area, the user agent blocks scripts in other browsing contexts when
-  they try to access the same storage area until the &lt;a href=#event-loop&gt;event
-  loop&lt;/a&gt; running the first script has completed running the task
-  that started that script. Another (potentially more efficient but
-  certainly more complex) implementation strategy is to use optimistic
-  transactional script execution. This specification does not require
-  any particular implementation strategy, so long as the requirement
-  above is met.&lt;/p&gt;
-
-
-  &lt;h4 id=sql&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Database storage&lt;/h4&gt;
-
-  &lt;!-- Feature requests for future versions (v2):
-        * deleting databases
-        * determining how much storage room is left
-        * handling the database getting corrupted
-  --&gt;
-
-  &lt;h5 id=introduction-4&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Introduction&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p class=XXX&gt;...&lt;/p&gt;
-
-&lt;!-- include an example that does something like the following to show
-you should never embed strings straight into the statement, even when you
-have a variable and unknowable number of literals coming:
-   var q = &quot;&quot;;
-   for each (var i in array)
-     q += (q == &quot;&quot; ? &quot;&quot; : &quot;, &quot;) + &quot;?&quot;;
-   executeSql('SELECT rowid FROM t WHERE c IN (' + q + ')', array, ...);
---&gt;
-
-
-  &lt;h5 id=databases&gt;&lt;span class=secno&gt;5.11.2.2 &lt;/span&gt;Databases&lt;/h5&gt;
-
-  &lt;p&gt;Each &lt;i&gt;&lt;a href=#origin-0&gt;origin&lt;/a&gt;&lt;/i&gt; has an associated set of databases. Each
-  database has a name and a current version. There is no way to
-  enumerate or delete the databases available for a domain from this
-  API.&lt;/p&gt;
-
-  &lt;p class=note&gt;Each database has one version at a time; a database
-  can't exist in multiple versions at once. Versions are intended to
-  allow authors to manage schema changes incrementally and
-  non-destructively, and without running the risk of old code (e.g. in
-  another browser window) trying to write to a database with incorrect
-  assumptions.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-opendatabase title=dom-opendatabase&gt;&lt;code&gt;openDatabase()&lt;/code&gt;&lt;/dfn&gt; method
-  returns a &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object. The method takes four
-  arguments: a database name, a database version, a display name, and
-  an estimated size, in bytes, of the data that will be stored in the
-  database.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;code title=dom-opendatabase&gt;&lt;a href=#dom-opendatabase&gt;openDatabase()&lt;/a&gt;&lt;/code&gt; method
-  must use and create databases from the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
-  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-  method was invoked.&lt;/p&gt;
-
-  &lt;p&gt;If the database version provided is not the empty string, and the
-  database already exists but has a different version, or no version,
-  then the method must raise an &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-
-  &lt;p&gt;Otherwise, if the database version provided is the empty string,
-  or if the database doesn't yet exist, or if the database exists and
-  the version provided to the &lt;code title=dom-opendatabase&gt;&lt;a href=#dom-opendatabase&gt;openDatabase()&lt;/a&gt;&lt;/code&gt; method is the same as
-  the current version associated with the database, then the method
-  must return a &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object representing the database
-  that has the name that was given. If no such database exists, it
-  must be created first.&lt;/p&gt;
-
-  &lt;p&gt;All strings including the empty string are valid database
-  names. Database names must be compared in a
-  &lt;a href=#case-sensitive&gt;case-sensitive&lt;/a&gt; manner.&lt;/p&gt;
-
-  &lt;p&gt;The user agent may raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception
-  instead of returning a &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object if the request
-  violates a policy decision (e.g. if the user agent is configured to
-  not allow the page to open databases).&lt;/p&gt;
-
-  &lt;p class=note&gt;Implementations can support this even in
-  environments that only support a subset of all strings as database
-  names by mapping database names (e.g. using a hashing algorithm) to
-  the supported set of names.&lt;/p&gt;
-
-  &lt;p&gt;User agents are expected to use the display name and the
-  estimated database size to optimize the user experience. For
-  example, a user agent could use the estimated size to suggest an
-  initial quota to the user. This allows a site that is aware that it
-  will try to use hundreds of megabytes to declare this upfront,
-  instead of the user agent prompting the user for permission to
-  increase the quota every five megabytes.&lt;/p&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=database&gt;Database&lt;/dfn&gt; {
-  void &lt;a href=#dom-database-transaction title=dom-database-transaction&gt;transaction&lt;/a&gt;(in &lt;a href=#sqltransactioncallback&gt;SQLTransactionCallback&lt;/a&gt; callback, [Optional] in &lt;a href=#sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/a&gt; errorCallback, [Optional] in &lt;a href=#sqlvoidcallback&gt;SQLVoidCallback&lt;/a&gt; successCallback);
-  void &lt;a href=#dom-database-readtransaction title=dom-database-readTransaction&gt;readTransaction&lt;/a&gt;(in &lt;a href=#sqltransactioncallback&gt;SQLTransactionCallback&lt;/a&gt; callback, [Optional] in &lt;a href=#sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/a&gt; errorCallback, [Optional] in &lt;a href=#sqlvoidcallback&gt;SQLVoidCallback&lt;/a&gt; successCallback);
-
-  readonly attribute DOMString &lt;a href=#dom-database-version title=dom-database-version&gt;version&lt;/a&gt;;
-  void &lt;a href=#dom-database-changeversion title=dom-database-changeVersion&gt;changeVersion&lt;/a&gt;(in DOMString oldVersion, in DOMString newVersion, in &lt;a href=#sqltransactioncallback&gt;SQLTransactionCallback&lt;/a&gt; callback, in &lt;a href=#sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/a&gt; errorCallback, in &lt;a href=#sqlvoidcallback&gt;SQLVoidCallback&lt;/a&gt; successCallback);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn id=sqlvoidcallback&gt;SQLVoidCallback&lt;/dfn&gt; {
-  void &lt;span title=dom-sqlvoidcallback-handleEvent&gt;handleEvent&lt;/span&gt;();
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn id=sqltransactioncallback&gt;SQLTransactionCallback&lt;/dfn&gt; {
-  void &lt;span title=dom-sqltransactioncallback-handleEvent&gt;handleEvent&lt;/span&gt;(in &lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt; transaction);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn id=sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/dfn&gt; {
-  void &lt;span title=dom-sqltransactionerrorcallback-handleEvent&gt;handleEvent&lt;/span&gt;(in &lt;a href=#sqlerror&gt;SQLError&lt;/a&gt; error);
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-database-transaction title=dom-database-transaction&gt;&lt;code&gt;transaction()&lt;/code&gt;&lt;/dfn&gt;
-  and &lt;dfn id=dom-database-readtransaction title=dom-database-readTransaction&gt;&lt;code&gt;readTransaction()&lt;/code&gt;&lt;/dfn&gt;
-  methods takes one to three arguments. When called, these method must
-  immediately return and then asynchronously run the &lt;a href=#transaction-steps&gt;transaction
-  steps&lt;/a&gt; with the &lt;i&gt;transaction callback&lt;/i&gt; being the first
-  argument, the &lt;i&gt;error callback&lt;/i&gt; being the second argument, if
-  any, the &lt;i&gt;success callback&lt;/i&gt; being the third argument, if any,
-  and with no &lt;i&gt;preflight operation&lt;/i&gt; or &lt;i&gt;postflight
-  operation&lt;/i&gt;.&lt;/p&gt;
-
-  &lt;p&gt;For the &lt;code title=dom-database-transaction&gt;&lt;a href=#dom-database-transaction&gt;transaction()&lt;/a&gt;&lt;/code&gt; method, the
-  &lt;i&gt;mode&lt;/i&gt; must be read/write. For the &lt;code title=dom-database-readTransaction&gt;&lt;a href=#dom-database-readtransaction&gt;readTransaction()&lt;/a&gt;&lt;/code&gt;
-  method, the &lt;i&gt;mode&lt;/i&gt; must be read-only.&lt;/p&gt;
-
-  &lt;p&gt;The version that the database was opened with is the &lt;dfn id=concept-database-expected-version title=concept-database-expected-version&gt;expected version&lt;/dfn&gt; of
-  this &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object. It can be the empty string, in
-  which case there is no expected version &mdash; any version is
-  fine.&lt;/p&gt;
-
-  &lt;p&gt;On getting, the &lt;dfn id=dom-database-version title=dom-database-version&gt;&lt;code&gt;version&lt;/code&gt;&lt;/dfn&gt; attribute
-  must return the current version of the database (as opposed to the
-  &lt;a href=#concept-database-expected-version title=concept-database-expected-version&gt;expected
-  version&lt;/a&gt; of the &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-database-changeversion title=dom-database-changeVersion&gt;&lt;code&gt;changeVersion()&lt;/code&gt;&lt;/dfn&gt;
-  method allows scripts to atomically verify the version number and
-  change it at the same time as doing a schema update. When the method
-  is invoked, it must immediately return, and then asynchronously run
-  the &lt;a href=#transaction-steps&gt;transaction steps&lt;/a&gt; with the &lt;i&gt;transaction
-  callback&lt;/i&gt; being the third argument, the &lt;i&gt;error callback&lt;/i&gt;
-  being the fourth argument, the &lt;i&gt;success callback&lt;/i&gt; being the
-  fifth argument, the &lt;i&gt;preflight operation&lt;/i&gt; being the
-  following:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Check that the value of the first argument to the &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt; method
-   exactly matches the database's actual version. If it does not, then
-   the &lt;i&gt;preflight operation&lt;/i&gt; fails.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;...the &lt;i&gt;postflight operation&lt;/i&gt; being the following:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;Change the database's actual version to the value of the second
-   argument to the &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
-   method.&lt;/li&gt;
-
-   &lt;li&gt;Change the &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object's expected version to
-   the value of the second argument to the &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
-   method.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;...and the &lt;i&gt;mode&lt;/i&gt; being read/write.&lt;/p&gt;
-
-
-  &lt;h5 id=executing-sql-statements&gt;&lt;span class=secno&gt;5.11.2.3 &lt;/span&gt;Executing SQL statements&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code title=dom-database-transaction&gt;&lt;a href=#dom-database-transaction&gt;transaction()&lt;/a&gt;&lt;/code&gt;
-  and &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
-  methods invoke callbacks with &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt;
-  objects.&lt;/p&gt;
-
-  &lt;pre class=idl&gt;typedef sequence&lt;any&gt; &lt;dfn id=objectarray&gt;ObjectArray&lt;/dfn&gt;;
-
-interface &lt;dfn id=sqltransaction&gt;SQLTransaction&lt;/dfn&gt; {
-  void &lt;a href=#dom-sqltransaction-executesql title=dom-sqltransaction-executeSql&gt;executeSql&lt;/a&gt;(in DOMString sqlStatement, [Optional] in &lt;a href=#objectarray&gt;ObjectArray&lt;/a&gt; arguments, [Optional] in &lt;a href=#sqlstatementcallback&gt;SQLStatementCallback&lt;/a&gt; callback, [Optional] in &lt;a href=#sqlstatementerrorcallback&gt;SQLStatementErrorCallback&lt;/a&gt; errorCallback);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn id=sqlstatementcallback&gt;SQLStatementCallback&lt;/dfn&gt; {
-  void &lt;span title=dom-sqlstatementcallback-handleEvent&gt;handleEvent&lt;/span&gt;(in &lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt; transaction, in &lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt; resultSet);
-};
-
-[Callback=FunctionOnly, NoInterfaceObject]
-interface &lt;dfn id=sqlstatementerrorcallback&gt;SQLStatementErrorCallback&lt;/dfn&gt; {
-  boolean &lt;span title=dom-sqlstatementerrorcallback-handleEvent&gt;handleEvent&lt;/span&gt;(in &lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt; transaction, in &lt;a href=#sqlerror&gt;SQLError&lt;/a&gt; error);
-};&lt;/pre&gt;
-
-  &lt;p&gt;When the &lt;dfn id=dom-sqltransaction-executesql title=dom-sqltransaction-executeSql&gt;&lt;code&gt;executeSql(&lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;callback&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;errorCallback&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method is invoked, the
-  user agent must run the following algorithm. (This algorithm is
-  relatively simple in that it doesn't actually execute any SQL
-  &mdash; the bulk of the work is actually done as part of the
-  &lt;a href=#transaction-steps&gt;transaction steps&lt;/a&gt;.)&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the method was not invoked during the execution of a
-   &lt;code&gt;&lt;a href=#sqltransactioncallback&gt;SQLTransactionCallback&lt;/a&gt;&lt;/code&gt;,
-   &lt;code&gt;&lt;a href=#sqlstatementcallback&gt;SQLStatementCallback&lt;/a&gt;&lt;/code&gt;, or
-   &lt;code&gt;&lt;a href=#sqlstatementerrorcallback&gt;SQLStatementErrorCallback&lt;/a&gt;&lt;/code&gt; then raise an
-   &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception. (Calls from inside a
-   &lt;code&gt;&lt;a href=#sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/a&gt;&lt;/code&gt; thus raise an
-   exception. The &lt;code&gt;&lt;a href=#sqltransactionerrorcallback&gt;SQLTransactionErrorCallback&lt;/a&gt;&lt;/code&gt; handler is
-   only called once a transaction has failed, and no SQL statements
-   can be added to a failed transaction.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Parse the first argument to the method (&lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt;) as a SQL statement, with the exception
-   that U+003F QUESTION MARK (?) characters can be used in place of
-   SQL literals in the statement. &lt;a href=#refsSQL&gt;[SQL]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Replace each &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder with the value
-    of the argument in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array with
-    the same position. (So the first &lt;code title=&quot;&quot;&gt;?&lt;/code&gt;
-    placeholder gets replaced by the first value in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array, and generally the &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder gets
-    replaced by the &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th value in the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array.)&lt;/p&gt;
-
-    &lt;p class=note&gt;Substitutions for &lt;code title=&quot;&quot;&gt;?&lt;/code&gt;
-    placeholders are done at the literal level, not as string
-    concatenations, so this provides a way to dynamically insert
-    parameters into a statement without risk of a SQL injection
-    attack.&lt;/p&gt;
-
-    &lt;p&gt;If the second argument is omitted or null, then treat the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array as empty.&lt;/p&gt;
-
-    &lt;p&gt;The result is &lt;i&gt;the statement&lt;/i&gt;.&lt;/p&gt;
-
-    &lt;p class=XXX&gt;Implementation feedback is requested on what
-    to do with arguments that are of types that are not supported by
-    the underlying SQL backend. For example, SQLite doesn't support
-    booleans, so what should the UA do if passed a boolean? The Gears
-    team suggests failing, not silently converting types.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the syntax of &lt;var title=&quot;&quot;&gt;sqlStatement&lt;/var&gt; is not
-   valid (except for the use of &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; characters in
-   the place of literals), or the statement uses features that are not
-   supported (e.g. due to security reasons), or the number of items in
-   the &lt;var title=&quot;&quot;&gt;arguments&lt;/var&gt; array is not equal to the number
-   of &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholders in the statement, or the
-   statement cannot be parsed for some other reason, then mark &lt;i&gt;the
-   statement&lt;/i&gt; as bogus.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;&lt;a href=#database&gt;Database&lt;/a&gt;&lt;/code&gt; object that the
-   &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt; object was created from has an &lt;a href=#concept-database-expected-version title=concept-database-expected-version&gt;expected version&lt;/a&gt;
-   that is neither the empty string nor the actual version of the
-   database, then mark &lt;i&gt;the statement&lt;/i&gt; as bogus. (&lt;a href=#dom-sqlerror-code-2 title=dom-sqlerror-code-2&gt;Error code 2&lt;/a&gt;.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Queue up &lt;i&gt;the statement&lt;/i&gt; in the transaction, along with
-   the third argument (if any) as the statement's result set callback
-   and the fourth argument (if any) as the error callback.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The user agent must act as if the database was hosted in an
-  otherwise completely empty environment with no resources. For
-  example, attempts to read from or write to the file system will
-  fail.&lt;/p&gt;
-
-
-  &lt;p&gt;SQL inherently supports multiple concurrent connections. Authors
-  should make appropriate use of the transaction features to handle
-  the case of multiple scripts interacting with the same database
-  simultaneously (as could happen if the same page was opened in two
-  different &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing
-  contexts&lt;/a&gt;).&lt;/p&gt;
-
-  &lt;p&gt;User agents must consider statements that use the &lt;code title=&quot;&quot;&gt;BEGIN&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;COMMIT&lt;/code&gt;, and &lt;code title=&quot;&quot;&gt;ROLLBACK&lt;/code&gt; SQL features as being unsupported (and thus
-  will mark them as bogus), so as to not let these statements
-  interfere with the explicit transactions managed by the database API
-  itself.&lt;/p&gt;
-
-  &lt;p class=note&gt;A future version of this specification will probably
-  define the exact SQL subset required in more detail.&lt;/p&gt;
-
-
-  &lt;h5 id=database-query-results&gt;&lt;span class=secno&gt;5.11.2.4 &lt;/span&gt;Database query results&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;code title=dom-transaction-executeSql&gt;executeSql()&lt;/code&gt;
-  method invokes its callback with a &lt;code&gt;&lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt;&lt;/code&gt; object
-  as an argument.&lt;/p&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=sqlresultset&gt;SQLResultSet&lt;/dfn&gt; {
-  readonly attribute long &lt;a href=#dom-sqlresultset-insertid title=dom-SQLResultSet-insertId&gt;insertId&lt;/a&gt;;
-  readonly attribute long &lt;a href=#dom-sqlresultset-rowsaffected title=dom-SQLResultSet-rowsAffected&gt;rowsAffected&lt;/a&gt;;
-  readonly attribute &lt;a href=#sqlresultsetrowlist&gt;SQLResultSetRowList&lt;/a&gt; &lt;a href=#dom-sqlresultset-rows title=dom-SQLResultSet-rows&gt;rows&lt;/a&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlresultset-insertid title=dom-SQLResultSet-insertId&gt;&lt;code&gt;insertId&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the row ID of the row that the
-  &lt;code&gt;&lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt;&lt;/code&gt; object's SQL statement inserted into the
-  database, if the statement inserted a row. If the statement inserted
-  multiple rows, the ID of the last row must be the one returned. If
-  the statement did not insert a row, then the attribute must instead
-  raise an &lt;code&gt;&lt;a href=#invalid_access_err&gt;INVALID_ACCESS_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlresultset-rowsaffected title=dom-SQLResultSet-rowsAffected&gt;&lt;code&gt;rowsAffected&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the number of rows that were affected by the
-  SQL statement. If the statement did not affected any rows, then the
-  attribute must return zero. For &quot;SELECT&quot; statements, this returns
-  zero (querying the database doesn't affect any rows).&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlresultset-rows title=dom-SQLResultSet-rows&gt;&lt;code&gt;rows&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return a &lt;code&gt;&lt;a href=#sqlresultsetrowlist&gt;SQLResultSetRowList&lt;/a&gt;&lt;/code&gt;
-  representing the rows returned, in the order returned by the
-  database. If no rows were returned, then the object will be empty
-  (its &lt;code title=dom-SQLResultSetRowList-length&gt;&lt;a href=#dom-sqlresultsetrowlist-length&gt;length&lt;/a&gt;&lt;/code&gt; will
-  be zero).&lt;/p&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=sqlresultsetrowlist&gt;SQLResultSetRowList&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=#dom-sqlresultsetrowlist-length title=dom-SQLResultSetRowList-length&gt;length&lt;/a&gt;;
-  [IndexGetter] &lt;span&gt;any&lt;/span&gt; &lt;a href=#dom-sqlresultsetrowlist-item title=dom-SQLResultSetRowList-item&gt;item&lt;/a&gt;(in unsigned long index);
-};&lt;/pre&gt;
-
-  &lt;p&gt;&lt;code&gt;&lt;a href=#sqlresultsetrowlist&gt;SQLResultSetRowList&lt;/a&gt;&lt;/code&gt; objects have a &lt;dfn id=dom-sqlresultsetrowlist-length title=dom-SQLResultSetRowList-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt;
-  attribute that must return the number of rows it represents (the
-  number of rows returned by the database). This is the &lt;var title=dom-SQLResultSetRowList-length&gt;&lt;a href=#dom-sqlresultsetrowlist-length&gt;length&lt;/a&gt;&lt;/var&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The object's &lt;span&gt;indices of the supported indexed
-  properties&lt;/span&gt; are the numbers in the range zero to &lt;span&gt;&lt;var title=dom-SQLResultSetRowList-length&gt;&lt;a href=#dom-sqlresultsetrowlist-length&gt;length&lt;/a&gt;&lt;/var&gt;-1&lt;/span&gt;, unless
-  the &lt;var title=dom-SQLResultSetRowList-length&gt;&lt;a href=#dom-sqlresultsetrowlist-length&gt;length&lt;/a&gt;&lt;/var&gt; is
-  zero, in which case there are no &lt;span&gt;supported indexed
-  properties&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlresultsetrowlist-item title=dom-SQLResultSetRowList-item&gt;&lt;code&gt;item(&lt;var title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; attribute must return the row
-  with the given index &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;. If there is no such
-  row, then the method must raise an &lt;code&gt;&lt;a href=#index_size_err&gt;INDEX_SIZE_ERR&lt;/a&gt;&lt;/code&gt;
-  exception.&lt;/p&gt;
-
-  &lt;p&gt;Each row must be represented by a native ordered dictionary data
-  type. In the ECMAScript binding, this must be &lt;code&gt;&lt;a href=#the-object-element&gt;Object&lt;/a&gt;&lt;/code&gt;.
-  Each row object must have one property (or dictionary entry) per
-  column, with those properties enumerating in the order that these
-  columns were returned by the database. Each property must have the
-  name of the column and the value of the cell, as they were returned
-  by the database.&lt;/p&gt;
-
-
-  &lt;h5 id=errors&gt;&lt;span class=secno&gt;5.11.2.5 &lt;/span&gt;Errors&lt;/h5&gt;
-
-  &lt;p&gt;Errors in the database API are reported using callbacks that have
-  a &lt;code&gt;&lt;a href=#sqlerror&gt;SQLError&lt;/a&gt;&lt;/code&gt; object as one of their arguments.&lt;/p&gt;
-
-  &lt;pre class=idl&gt;interface &lt;dfn id=sqlerror&gt;SQLError&lt;/dfn&gt; {
-  readonly attribute unsigned long &lt;a href=#dom-sqlerror-code title=dom-SQLError-code&gt;code&lt;/a&gt;;
-  readonly attribute DOMString &lt;a href=#dom-sqlerror-message title=dom-SQLError-message&gt;message&lt;/a&gt;;
-};&lt;/pre&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlerror-code title=dom-SQLError-code&gt;&lt;code&gt;code&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must return the most appropriate code from the following
-  table:&lt;/p&gt;
-
-  &lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Code
-     &lt;th&gt;Situation
-   &lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-0 title=dom-sqlerror-code-0&gt;0&lt;/dfn&gt;
-     &lt;td&gt;The transaction failed for reasons unrelated to the database
-     itself and not covered by any other error code.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-1 title=dom-sqlerror-code-1&gt;1&lt;/dfn&gt;
-     &lt;td&gt;The statement failed for database reasons not covered by any
-     other error code.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-2 title=dom-sqlerror-code-2&gt;2&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because the &lt;a href=#concept-database-expected-version title=concept-database-expected-version&gt;expected version&lt;/a&gt;
-     of the database didn't match the actual database version.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-3 title=dom-sqlerror-code-3&gt;3&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because the data returned from the
-     database was too large. The SQL &quot;LIMIT&quot; modifier might be useful
-     to reduce the size of the result set.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-4 title=dom-sqlerror-code-4&gt;4&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because there was not enough remaining
-     storage space, or the storage quota was reached and the user
-     declined to give more space to the database.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-5 title=dom-sqlerror-code-5&gt;5&lt;/dfn&gt;
-     &lt;td&gt;The statement failed because the transaction's first
-     statement was a read-only statement, and a subsequent statement
-     in the same transaction tried to modify the database, but the
-     transaction failed to obtain a write lock before another
-     transaction obtained a write lock and changed a part of the
-     database that the former transaction was depending upon.
-
-    &lt;tr&gt;&lt;td&gt;&lt;dfn id=dom-sqlerror-code-6 title=dom-sqlerror-code-6&gt;6&lt;/dfn&gt;
-     &lt;td&gt;An &lt;code title=&quot;&quot;&gt;INSERT&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;UPDATE&lt;/code&gt;, or &lt;code title=&quot;&quot;&gt;REPLACE&lt;/code&gt;
-     statement failed due to a constraint failure. For example,
-     because a row was being inserted and the value given for the
-     primary key column duplicated the value of an existing row.
-
-  &lt;/table&gt;&lt;p class=XXX&gt;We should define a more thorough list of
-  codes. Implementation feedback is requested to determine what codes
-  are needed.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-sqlerror-message title=dom-SQLError-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute must return an error message describing the error
-  encountered. The message should be localized to the user's
-  language.&lt;/p&gt;
-
-
-
-  &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;5.11.2.6 &lt;/span&gt;Processing model&lt;/h5&gt;
-
-  &lt;p&gt;The &lt;dfn id=transaction-steps&gt;transaction steps&lt;/dfn&gt; are as follows. These steps must
-  be run asynchronously. These steps are invoked with a &lt;i&gt;transaction
-  callback&lt;/i&gt;, optionally an &lt;i&gt;error callback&lt;/i&gt;, optionally a
-  &lt;i&gt;success callback&lt;/i&gt;, optionally a &lt;i&gt;preflight operation&lt;/i&gt;,
-  optionally a &lt;i&gt;postflight operation&lt;/i&gt;, and with a &lt;i&gt;mode&lt;/i&gt;
-  that is either read/write or read-only.&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Open a new SQL transaction to the database, and create a
-   &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt; object that represents that
-   transaction. If the &lt;i&gt;mode&lt;/i&gt; is read/write, the transaction must
-   have an exclusive write lock over the entire database. If the
-   &lt;i&gt;mode&lt;/i&gt; is read-only, the transaction must have a shared read
-   lock over the entire database. The user agent should wait for an
-   appropriate lock to be available.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the opening of the transaction
-   (e.g. if the user agent failed to obtain an appropriate lock after
-   an appropriate delay), jump to the last step.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If a &lt;i&gt;preflight operation&lt;/i&gt; was defined for this
-   instance of the transaction steps, run that. If it fails, then jump
-   to the last step. (This is basically a hook for the &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
-   method.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the &lt;i&gt;transaction
-   callback&lt;/i&gt; with the aforementioned &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt;
-   object as its only argument, and wait for that task to be
-   run.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the callback couldn't be called (e.g. it was null), or if
-   the callback was invoked and raised an exception, jump to the last
-   step.&lt;/li&gt;
-&lt;!--
-   &lt;li&gt;&lt;p&gt;If the callback could be called and returned false, let
-   &lt;i&gt;callback-canceled&lt;/i&gt; be true. Otherwise, let it be
-   false.&lt;/p&gt;&lt;/li&gt;
---&gt;
-   &lt;li&gt;&lt;p&gt;While there are any statements queued up in the transaction,
-   perform the following steps for each queued up statement in the
-   transaction, oldest first. Each statement has a statement,
-   optionally a result set callback, and optionally an error
-   callback.&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the statement is marked as bogus, jump to the &quot;in case
-     of error&quot; steps below.&lt;/li&gt;
-
-     &lt;li id=modifications-fail-if-read-only&gt;
-
-      &lt;p&gt;If the &lt;i&gt;mode&lt;/i&gt; is read-only but the statement's main verb
-      can modify the database, jump to the &quot;in case of error&quot; steps
-      below.&lt;/p&gt;
-
-      &lt;p class=note&gt;Only the statement's main verb (e.g. &lt;code title=&quot;&quot;&gt;UPDATE&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;SELECT&lt;/code&gt;, &lt;code title=&quot;&quot;&gt;DROP&lt;/code&gt;) is considered here. Thus, a statement like
-      &quot;&lt;code title=&quot;&quot;&gt;UPDATE test SET id=0 WHERE 0=1&lt;/code&gt;&quot; would be
-      treated as potentially modifying the database for the purposes
-      of this step, even though it could never in fact have any
-      side-effects.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Execute the statement in the context of the transaction.
-     &lt;a href=#refsSQL&gt;[SQL]&lt;/a&gt;&lt;/p&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement failed, jump to the &quot;in case of error&quot;
-     steps below.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Create a &lt;code&gt;&lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt;&lt;/code&gt; object that represents
-     the result of the statement.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the statement has a result set callback, &lt;a href=#queue-a-task&gt;queue a
-     task&lt;/a&gt; to invoke it with the &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt;
-     object as its first argument and the new
-     &lt;code&gt;&lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt;&lt;/code&gt; object as its second argument, and wait
-     for that task to be run.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the callback was invoked and raised an exception, jump
-     to the last step in the overall steps.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Move on to the next statement, if any, or onto the next
-     overall step otherwise.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;p&gt;In case of error (or more specifically, if the above substeps
-    say to jump to the &quot;in case of error&quot; steps), run the following
-    substeps:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the statement had an associated error callback, then
-     &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to invoke that error callback with the
-     &lt;code&gt;&lt;a href=#sqltransaction&gt;SQLTransaction&lt;/a&gt;&lt;/code&gt; object and a newly constructed
-     &lt;code&gt;&lt;a href=#sqlerror&gt;SQLError&lt;/a&gt;&lt;/code&gt; object that represents the error that
-     caused these substeps to be run as the two arguments,
-     respectively, and wait for the task to be run.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If the error callback returns false, then move on to the
-     next statement, if any, or onto the next overall step
-     otherwise.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, the error callback did not return false, or
-     there was no error callback. Jump to the last step in the overall
-     steps.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If a &lt;i&gt;postflight operation&lt;/i&gt; was defined for this
-   instance of the transaction steps, run that. If it fails, then jump
-   to the last step. &lt;!--The operation, if any, might depend
-   &lt;i&gt;callback-canceled&lt;/i&gt;.--&gt; (This is basically a hook for the
-   &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
-   method.)&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Commit the transaction.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If an error occurred in the committing of the transaction,
-   jump to the last step.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the &lt;i&gt;success
-   callback&lt;/i&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;End these steps. The next step is only used when something
-   goes wrong.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to invoke the &lt;i&gt;error
-   callback&lt;/i&gt; with a newly constructed &lt;code&gt;&lt;a href=#sqlerror&gt;SQLError&lt;/a&gt;&lt;/code&gt; object
-   that represents the last error to have occurred in this
-   transaction. Rollback the transaction. Any still-pending statements
-   in the transaction are discarded.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;h4 id=disk-space&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Disk space&lt;/h4&gt;
-
-  &lt;p&gt;User agents should limit the total amount of space allowed for
-  storage areas and databases.&lt;/p&gt;
-
-  &lt;p&gt;User agents should guard against sites storing data in the
-  storage areas or databases of subdomains, e.g. storing up to the
-  limit in a1.example.com, a2.example.com, a3.example.com, etc,
-  circumventing the main example.com storage limit.&lt;/p&gt;
-
-  &lt;p&gt;User agents may prompt the user when quotas are reached, allowing
-  the user to grant a site more space. This enables sites to store
-  many user-created documents on the user's computer, for
-  instance.&lt;/p&gt;
-
-  &lt;p&gt;User agents should allow users to see how much space each domain
-  is using.&lt;/p&gt;
-
-  &lt;!--&lt;p&gt;If the storage area space limit is reached during a &lt;code
-  title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
-  raise an exception.&lt;/p&gt;--&gt;
-
-  &lt;p&gt;A mostly arbitrary limit of five megabytes per domain is
-  recommended. Implementation feedback is welcome and will be used to
-  update this suggestion in future.&lt;/p&gt;
-
-
-  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;5.11.4 &lt;/span&gt;Privacy&lt;/h4&gt;
-
-  &lt;h5 id=user-tracking&gt;&lt;span class=secno&gt;5.11.4.1 &lt;/span&gt;User tracking&lt;/h5&gt;
-
-  &lt;p&gt;A third-party advertiser (or any entity capable of getting
-  content distributed to multiple sites) could use a unique identifier
-  stored in its local storage area or in its client-side database to
-  track a user across multiple sessions, building a profile of the
-  user's interests to allow for highly targeted advertising. In
-  conjunction with a site that is aware of the user's real identity
-  (for example an e-commerce site that requires authenticated
-  credentials), this could allow oppressive groups to target
-  individuals with greater accuracy than in a world with purely
-  anonymous Web usage.&lt;/p&gt;
-
-  &lt;p&gt;There are a number of techniques that can be used to mitigate the
-  risk of user tracking:&lt;/p&gt;
-
-  &lt;ul&gt;&lt;li&gt;
-
-    &lt;p&gt;Blocking third-party storage: user agents may restrict access
-    to the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; and
-    database objects to scripts originating at the domain of the
-    top-level document of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, for
-    instance denying access to the API for pages from other domains
-    running in &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;s.&lt;/p&gt;
-
-   &lt;/li&gt;
- 
-   &lt;li&gt;
-
-    &lt;p&gt;Expiring stored data: user agents may automatically delete
-    stored data after a period of time.&lt;/p&gt;
-
-    &lt;p&gt;For example, a user agent could treat third-party local
-    storage areas as session-only storage, deleting the data once the
-    user had closed all the &lt;span&gt;browsing contexts&lt;/span&gt; that could
-    access it.&lt;/p&gt;
-
-    &lt;p&gt;This can restrict the ability of a site to track a user, as the
-    site would then only be able to track the user across multiple
-    sessions when he authenticates with the site itself (e.g. by
-    making a purchase or logging in to a service).&lt;/p&gt;
-
-    &lt;p&gt;However, this also puts the user's data at risk.&lt;/p&gt;
-
-    &lt;!-- XXX should there be an explicit way for sites to state when
-    data should expire? as in
-    localStorage.expireData(365); ? --&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Treating persistent storage as cookies: user agents should
-    present the persistent storage and database features to the user
-    in a way that does not distinguish them from HTTP session
-    cookies. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;This might encourage users to view persistent storage with
-    healthy suspicion.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Site-specific white-listing of access to local storage areas
-    and databases: user agents may allow sites to access session
-    storage areas in an unrestricted manner, but require the user to
-    authorize access to local storage areas and databases.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;a href=#origin-0&gt;Origin&lt;/a&gt;-tracking of persistent storage data: user
-    agents may record the origins of sites that contained content from
-    third-party origins that caused data to be stored.&lt;/p&gt;
-
-    &lt;p&gt;If this information is then used to present the view of data
-    currently in persistent storage, it would allow the user to make
-    informed decisions about which parts of the persistent storage to
-    prune. Combined with a blacklist (&quot;delete this data and prevent
-    this domain from ever storing data again&quot;), the user can restrict
-    the use of persistent storage to sites that he trusts.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Shared blacklists: user agents may allow users to share their
-    persistent storage domain blacklists.&lt;/p&gt;
-
-    &lt;p&gt;This would allow communities to act together to protect their
-    privacy.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ul&gt;&lt;p&gt;While these suggestions prevent trivial use of these APIs for
-  user tracking, they do not block it altogether. Within a single
-  domain, a site can continue to track the user during a session, and
-  can then pass all this information to the third party along with any
-  identifying information (names, credit card numbers, addresses)
-  obtained by the site. If a third party cooperates with multiple
-  sites to obtain such information, a profile can still be
-  created.&lt;/p&gt;
-
-  &lt;p&gt;However, user tracking is to some extent possible even with no
-  cooperation from the user agent whatsoever, for instance by using
-  session identifiers in URLs, a technique already commonly used for
-  innocuous purposes but easily repurposed for user tracking (even
-  retroactively). This information can then be shared with other
-  sites, using using visitors' IP addresses and other user-specific
-  data (e.g. user-agent headers and configuration settings) to combine
-  separate sessions into coherent user profiles.&lt;/p&gt;
-
-
-  &lt;h5 id=cookie-resurrection&gt;&lt;span class=secno&gt;5.11.4.2 &lt;/span&gt;Cookie resurrection&lt;/h5&gt;
-
-  &lt;p&gt;If the user interface for persistent storage presents data in the
-  persistent storage features separately from data in HTTP session
-  cookies, then users are likely to delete data in one and not the
-  other. This would allow sites to use the two features as redundant
-  backup for each other, defeating a user's attempts to protect his
-  privacy.&lt;/p&gt;
-
-
-  &lt;h4 id=security-4&gt;&lt;span class=secno&gt;5.11.5 &lt;/span&gt;Security&lt;/h4&gt;
-
-  &lt;h5 id=dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.11.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/h5&gt;
-
-  &lt;p&gt;Because of the potential for DNS spoofing attacks, one cannot
-  guarantee that a host claiming to be in a certain domain really is
-  from that domain. To mitigate this, pages can use SSL. Pages using
-  SSL can be sure that only pages using SSL that have certificates
-  identifying them as being from the same domain can access their
-  local storage areas and databases.&lt;/p&gt;
-
-
-  &lt;h5 id=cross-directory-attacks&gt;&lt;span class=secno&gt;5.11.5.2 &lt;/span&gt;Cross-directory attacks&lt;/h5&gt;
-
-  &lt;p&gt;Different authors sharing one host name, for example users
-  hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one
-  persistent storage object and one set of databases. There is no
-  feature to restrict the access by pathname. Authors on shared hosts
-  are therefore recommended to avoid using the persistent storage
-  features, as it would be trivial for other authors to read from and
-  write to the same storage area or database.&lt;/p&gt;
-
-  &lt;p class=note&gt;Even if a path-restriction feature was made
-  available, the usual DOM scripting security model would make it
-  trivial to bypass this protection and access the data from any
-  path.&lt;/p&gt;
-
-
-  &lt;h5 id=implementation-risks&gt;&lt;span class=secno&gt;5.11.5.3 &lt;/span&gt;Implementation risks&lt;/h5&gt;
-
-  &lt;p&gt;The two primary risks when implementing these persistent storage
-  features are letting hostile sites read information from other
-  domains, and letting hostile sites write information that is then
-  read from other domains.&lt;/p&gt;
-
-  &lt;p&gt;Letting third-party sites read data that is not supposed to be
-  read from their domain causes &lt;em&gt;information leakage&lt;/em&gt;, For
-  example, a user's shopping wishlist on one domain could be used by
-  another domain for targeted advertising; or a user's
-  work-in-progress confidential documents stored by a word-processing
-  site could be examined by the site of a competing company.&lt;/p&gt;
-
-  &lt;p&gt;Letting third-party sites write data to the storage areas of
-  other domains can result in &lt;em&gt;information spoofing&lt;/em&gt;, which is
-  equally dangerous. For example, a hostile site could add items to a
-  user's wishlist; or a hostile site could set a user's session
-  identifier to a known ID that the hostile site can then use to track
-  the user's actions on the victim site.&lt;/p&gt;
-
-  &lt;p&gt;Thus, strictly following the &lt;a href=#origin-0&gt;origin&lt;/a&gt; model described
-  in this specification is important for user security.&lt;/p&gt;
-
-
-  &lt;h5 id=sql-and-user-agents&gt;&lt;span class=secno&gt;5.11.5.4 &lt;/span&gt;SQL and user agents&lt;/h5&gt;
-
-  &lt;p&gt;User agent implementors are strongly encouraged to audit all
-  their supported SQL statements for security implications. For
-  example, &lt;code title=&quot;&quot;&gt;LOAD DATA INFILE&lt;/code&gt; is likely to pose
-  security risks and there is little reason to support it.&lt;/p&gt;
-
-  &lt;p&gt;In general, it is recommended that user agents not support
-  features that control how databases are stored on disk. For example,
-  there is little reason to allow Web authors to control the character
-  encoding used in the disk representation of the data, as all data in
-  ECMAScript is implicitly UTF-16.&lt;/p&gt;
-
-
-  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;5.11.5.5 &lt;/span&gt;SQL injection&lt;/h5&gt;
-
-  &lt;p&gt;Authors are strongly recommended to make use of the &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code title=dom-sqltransaction-executeSql&gt;&lt;a href=#dom-sqltransaction-executesql&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method,
-  and to never construct SQL statements on the fly.&lt;/p&gt;
-
-
-
-
-  &lt;h3 id=links&gt;&lt;span class=secno&gt;5.12 &lt;/span&gt;Links&lt;/h3&gt;
-
-
-  &lt;h4 id=hyperlink-elements&gt;&lt;span class=secno&gt;5.12.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
-
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;
   elements can, in certain situations described in the definitions of
   those elements, represent &lt;dfn id=hyperlink title=hyperlink&gt;hyperlinks&lt;/dfn&gt;.&lt;/p&gt;
@@ -46261,7 +45016,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=following-hyperlinks&gt;&lt;span class=secno&gt;5.12.2 &lt;/span&gt;&lt;dfn&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=following-hyperlinks&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;&lt;dfn&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user &lt;em&gt;follows a hyperlink&lt;/em&gt;, the user agent must
   &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt;
@@ -46319,7 +45074,7 @@
   &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=hyperlink-auditing&gt;&lt;span class=secno&gt;5.12.2.1 &lt;/span&gt;&lt;dfn&gt;Hyperlink auditing&lt;/dfn&gt;&lt;/h5&gt;
+  &lt;h5 id=hyperlink-auditing&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;&lt;dfn&gt;Hyperlink auditing&lt;/dfn&gt;&lt;/h5&gt;
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; hyperlink element has a
   &lt;code title=attr-hyperlink-ping&gt;&lt;a href=#ping&gt;ping&lt;/a&gt;&lt;/code&gt; attribute, and the
@@ -46449,7 +45204,7 @@
 
 
 
-  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;5.12.3 &lt;/span&gt;Link types&lt;/h4&gt;
+  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link types&lt;/h4&gt;
 
   &lt;p&gt;The following table summarizes the link types that are defined by
   this specification. This table is non-normative; the actual
@@ -46627,7 +45382,7 @@
     --&gt;
 
 
-  &lt;h5 id=link-type-alternate&gt;&lt;span class=secno&gt;5.12.3.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-alternate&gt;&lt;code&gt;alternate&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-alternate&gt;&lt;span class=secno&gt;5.11.3.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-alternate&gt;&lt;code&gt;alternate&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-alternate&gt;&lt;a href=#link-type-alternate&gt;alternate&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -46692,7 +45447,7 @@
   alternative representations of each other.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-archives&gt;&lt;span class=secno&gt;5.12.3.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-archives&gt;&lt;code&gt;archives&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-archives&gt;&lt;span class=secno&gt;5.11.3.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-archives&gt;&lt;code&gt;archives&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-archives&gt;&lt;a href=#link-type-archives&gt;archives&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -46714,7 +45469,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-author&gt;&lt;span class=secno&gt;5.12.3.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-author&gt;&lt;code&gt;author&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-author&gt;&lt;span class=secno&gt;5.11.3.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-author&gt;&lt;code&gt;author&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-author&gt;&lt;a href=#link-type-author&gt;author&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -46743,7 +45498,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-bookmark&gt;&lt;span class=secno&gt;5.12.3.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-bookmark&gt;&lt;code&gt;bookmark&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-bookmark&gt;&lt;span class=secno&gt;5.11.3.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-bookmark&gt;&lt;code&gt;bookmark&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-bookmark&gt;&lt;a href=#link-type-bookmark&gt;bookmark&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -46809,7 +45564,7 @@
 --&gt;
 
 
-  &lt;h5 id=link-type-external&gt;&lt;span class=secno&gt;5.12.3.5 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-external&gt;&lt;code&gt;external&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-external&gt;&lt;span class=secno&gt;5.11.3.5 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-external&gt;&lt;code&gt;external&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-external&gt;&lt;a href=#link-type-external&gt;external&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -46819,7 +45574,7 @@
   that the current document forms a part of.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-feed&gt;&lt;span class=secno&gt;5.12.3.6 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-feed&gt;&lt;code&gt;feed&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-feed&gt;&lt;span class=secno&gt;5.11.3.6 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-feed&gt;&lt;code&gt;feed&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-feed&gt;&lt;a href=#link-type-feed&gt;feed&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -46861,7 +45616,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-help&gt;&lt;span class=secno&gt;5.12.3.7 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-help&gt;&lt;code&gt;help&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-help&gt;&lt;span class=secno&gt;5.11.3.7 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-help&gt;&lt;code&gt;help&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-help&gt;&lt;a href=#link-type-help&gt;help&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -46886,7 +45641,7 @@
   document provides help for the page as a whole.&lt;/p&gt;
 
 
-  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;5.12.3.8 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;5.11.3.8 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-icon&gt;&lt;a href=#rel-icon&gt;icon&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -47012,7 +45767,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-license&gt;&lt;span class=secno&gt;5.12.3.9 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-license&gt;&lt;code&gt;license&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-license&gt;&lt;span class=secno&gt;5.11.3.9 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-license&gt;&lt;code&gt;license&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-license&gt;&lt;a href=#link-type-license&gt;license&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47031,7 +45786,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-nofollow&gt;&lt;span class=secno&gt;5.12.3.10 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-nofollow&gt;&lt;code&gt;nofollow&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-nofollow&gt;&lt;span class=secno&gt;5.11.3.10 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-nofollow&gt;&lt;code&gt;nofollow&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-nofollow&gt;&lt;a href=#link-type-nofollow&gt;nofollow&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -47043,7 +45798,7 @@
   affiliated with the two pages.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-noreferrer&gt;&lt;span class=secno&gt;5.12.3.11 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-noreferrer&gt;&lt;code&gt;noreferrer&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-noreferrer&gt;&lt;span class=secno&gt;5.11.3.11 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-noreferrer&gt;&lt;code&gt;noreferrer&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-noreferrer&gt;&lt;a href=#link-type-noreferrer&gt;noreferrer&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -47064,7 +45819,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-pingback&gt;&lt;span class=secno&gt;5.12.3.12 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-pingback&gt;&lt;code&gt;pingback&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-pingback&gt;&lt;span class=secno&gt;5.11.3.12 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-pingback&gt;&lt;code&gt;pingback&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-pingback&gt;&lt;a href=#link-type-pingback&gt;pingback&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -47073,7 +45828,7 @@
   specification. &lt;a href=#refsPINGBACK&gt;[PINGBACK]&lt;/a&gt;&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-prefetch&gt;&lt;span class=secno&gt;5.12.3.13 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prefetch&gt;&lt;code&gt;prefetch&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-prefetch&gt;&lt;span class=secno&gt;5.11.3.13 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prefetch&gt;&lt;code&gt;prefetch&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-prefetch&gt;&lt;a href=#link-type-prefetch&gt;prefetch&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -47086,7 +45841,7 @@
   &lt;p&gt;There is no default type for resources given by the &lt;code title=rel-prefetch&gt;&lt;a href=#link-type-prefetch&gt;prefetch&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-search&gt;&lt;span class=secno&gt;5.12.3.14 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-search&gt;&lt;span class=secno&gt;5.11.3.14 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=#link-type-search&gt;search&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47103,7 +45858,7 @@
   --&gt;
 
 
-  &lt;h5 id=link-type-stylesheet&gt;&lt;span class=secno&gt;5.12.3.15 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-stylesheet&gt;&lt;code&gt;stylesheet&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-stylesheet&gt;&lt;span class=secno&gt;5.11.3.15 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-stylesheet&gt;&lt;code&gt;stylesheet&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-stylesheet&gt;&lt;a href=#link-type-stylesheet&gt;stylesheet&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt; that
@@ -47130,7 +45885,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-sidebar&gt;&lt;span class=secno&gt;5.12.3.16 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-sidebar&gt;&lt;code&gt;sidebar&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-sidebar&gt;&lt;span class=secno&gt;5.11.3.16 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-sidebar&gt;&lt;code&gt;sidebar&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-sidebar&gt;&lt;a href=#link-type-sidebar&gt;sidebar&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47145,7 +45900,7 @@
   &lt;code title=rel-sidebar&gt;&lt;a href=#link-type-sidebar&gt;sidebar&lt;/a&gt;&lt;/code&gt; keyword specified is a &lt;dfn id=rel-sidebar-hyperlink title=rel-sidebar-hyperlink&gt;sidebar hyperlink&lt;/dfn&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-tag&gt;&lt;span class=secno&gt;5.12.3.17 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-tag&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-tag&gt;&lt;span class=secno&gt;5.11.3.17 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-tag&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-tag&gt;&lt;a href=#link-type-tag&gt;tag&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47161,7 +45916,7 @@
   the popular tag across a set of pages.&lt;/p&gt;
 
 
-  &lt;h5 id=hierarchical-link-types&gt;&lt;span class=secno&gt;5.12.3.18 &lt;/span&gt;Hierarchical link types&lt;/h5&gt;
+  &lt;h5 id=hierarchical-link-types&gt;&lt;span class=secno&gt;5.11.3.18 &lt;/span&gt;Hierarchical link types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a hierarchical structure of
   documents.&lt;/p&gt;
@@ -47174,7 +45929,7 @@
   &lt;p&gt;A document may be part of multiple hierarchies.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-index&gt;&lt;span class=secno&gt;5.12.3.18.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-index&gt;&lt;span class=secno&gt;5.11.3.18.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-index&gt;&lt;a href=#link-type-index&gt;index&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47194,7 +45949,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=link-type-up&gt;&lt;span class=secno&gt;5.12.3.18.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-up&gt;&lt;code&gt;up&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-up&gt;&lt;span class=secno&gt;5.11.3.18.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-up&gt;&lt;code&gt;up&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-up&gt;&lt;a href=#link-type-up&gt;up&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47261,7 +46016,7 @@
   interface hides duplicates).&lt;/p&gt;
 
 
-  &lt;h5 id=sequential-link-types&gt;&lt;span class=secno&gt;5.12.3.19 &lt;/span&gt;Sequential link types&lt;/h5&gt;
+  &lt;h5 id=sequential-link-types&gt;&lt;span class=secno&gt;5.11.3.19 &lt;/span&gt;Sequential link types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a sequence of documents.&lt;/p&gt;
 
@@ -47273,7 +46028,7 @@
   &lt;p&gt;A document may be part of multiple sequences.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-first&gt;&lt;span class=secno&gt;5.12.3.19.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-first&gt;&lt;code&gt;first&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-first&gt;&lt;span class=secno&gt;5.11.3.19.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-first&gt;&lt;code&gt;first&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-first&gt;&lt;a href=#link-type-first&gt;first&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47292,7 +46047,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=link-type-last&gt;&lt;span class=secno&gt;5.12.3.19.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-last&gt;&lt;code&gt;last&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-last&gt;&lt;span class=secno&gt;5.11.3.19.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-last&gt;&lt;code&gt;last&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-last&gt;&lt;a href=#link-type-last&gt;last&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47311,7 +46066,7 @@
   &lt;/div&gt;
 
 
-  &lt;h6 id=link-type-next&gt;&lt;span class=secno&gt;5.12.3.19.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-next&gt;&lt;code&gt;next&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-next&gt;&lt;span class=secno&gt;5.11.3.19.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-next&gt;&lt;code&gt;next&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-next&gt;&lt;a href=#link-type-next&gt;next&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47322,7 +46077,7 @@
   document that is the next logical document in the sequence.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-prev&gt;&lt;span class=secno&gt;5.12.3.19.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prev&gt;&lt;code&gt;prev&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-prev&gt;&lt;span class=secno&gt;5.11.3.19.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prev&gt;&lt;code&gt;prev&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-prev&gt;&lt;a href=#link-type-prev&gt;prev&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -47341,7 +46096,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=other-link-types&gt;&lt;span class=secno&gt;5.12.3.20 &lt;/span&gt;Other link types&lt;/h5&gt;
+  &lt;h5 id=other-link-types&gt;&lt;span class=secno&gt;5.11.3.20 &lt;/span&gt;Other link types&lt;/h5&gt;
 
   &lt;p&gt;Other than the types defined above, only types defined as
   extensions in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/RelExtensions">http://wiki.whatwg.org/wiki/RelExtensions</A>&gt;WHATWG Wiki
@@ -49102,7 +47857,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=introduction-5&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-3&gt;&lt;span class=secno&gt;6.9.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -50033,7 +48788,7 @@
   &lt;p class=XXX&gt;There has got to be a better way of doing this, surely.&lt;/p&gt;
 
 
-  &lt;h4 id=introduction-6&gt;&lt;span class=secno&gt;6.10.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-4&gt;&lt;span class=secno&gt;6.10.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p class=XXX&gt;...&lt;/p&gt;
 
@@ -50879,8 +49634,9 @@
 
   &lt;h3 id=event-definitions&gt;&lt;span class=secno&gt;7.1 &lt;/span&gt;Event definitions&lt;/h3&gt;
 
-  &lt;p&gt;Messages in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, &lt;a href=#network&gt;Web
-  sockets&lt;/a&gt;, &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;, and
+  &lt;!-- XXX cross-references for SSE and WS need fixing now that this is cross-spec --&gt;
+  &lt;p&gt;Messages in &lt;span&gt;server-sent events&lt;/span&gt;, &lt;span&gt;Web
+  sockets&lt;/span&gt;, &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;, and
   &lt;a href=#channel-messaging&gt;channel messaging&lt;/a&gt; use the &lt;dfn id=event-message title=event-message&gt;&lt;code&gt;message&lt;/code&gt;&lt;/dfn&gt; event.&lt;/p&gt;
 
   &lt;p&gt;The following interface is defined for this event:&lt;/p&gt;
@@ -50907,8 +49663,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the origin of the message, for &lt;a href=#server-sent-events&gt;server-sent
-    events&lt;/a&gt; and &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Returns the origin of the message, for &lt;span&gt;server-sent
+    events&lt;/span&gt; and &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -50916,8 +49672,8 @@
 
    &lt;dd&gt;
 
-    &lt;p&gt;Returns the last event ID, for &lt;a href=#server-sent-events&gt;server-sent
-    events&lt;/a&gt;.&lt;/p&gt;
+    &lt;p&gt;Returns the last event ID, for &lt;span&gt;server-sent
+    events&lt;/span&gt;.&lt;/p&gt;
 
    &lt;/dd&gt;
 
@@ -50951,14 +49707,14 @@
   attribute represents the message being sent.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-origin title=dom-MessageEvent-origin&gt;&lt;code&gt;origin&lt;/code&gt;&lt;/dfn&gt; attribute
-  represents, in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt; and
+  represents, in &lt;span&gt;server-sent events&lt;/span&gt; and
   &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;, the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of
   the document that sent the message (typically the scheme, hostname,
   and port of the document, but not its path or fragment
   identifier).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-lasteventid title=dom-MessageEvent-lastEventId&gt;&lt;code&gt;lastEventId&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents, in &lt;a href=#server-sent-events&gt;server-sent events&lt;/a&gt;, the
+  attribute represents, in &lt;span&gt;server-sent events&lt;/span&gt;, the
   &lt;span&gt;last event ID string&lt;/span&gt; of the event source.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-source title=dom-MessageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
@@ -50983,1485 +49739,13 @@
 
 
 
-  &lt;h3 id=server-sent-events&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;&lt;dfn&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt;
-  &lt;!-- eventsource --&gt;
 
-  &lt;h4 id=server-sent-events-intro&gt;&lt;span class=secno&gt;7.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
-  &lt;p&gt;To enable servers to push data to Web pages over HTTP or using
-  dedicated server-push protocols, this specification introduces the
-  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;An introduction to the client-side and
-  server-side of using the direct connection APIs.&lt;/p&gt;
 
-  &lt;!--BOILERPLATE--&gt;
+  &lt;h3 id=crossDocumentMessages&gt;&lt;span class=secno&gt;7.2 &lt;/span&gt;&lt;dfn&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=the-eventsource-interface&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
-
-  &lt;pre class=idl&gt;[&lt;a href=#dom-eventsource title=dom-EventSource&gt;Constructor&lt;/a&gt;(in DOMString url)]
-interface &lt;dfn id=eventsource&gt;EventSource&lt;/dfn&gt; {
-  readonly attribute DOMString &lt;a href=#dom-eventsource-url title=dom-EventSource-URL&gt;URL&lt;/a&gt;;
-
-  // ready state
-  const unsigned short &lt;a href=#dom-eventsource-connecting title=dom-EventSource-CONNECTING&gt;CONNECTING&lt;/a&gt; = 0;
-  const unsigned short &lt;a href=#dom-eventsource-open title=dom-EventSource-OPEN&gt;OPEN&lt;/a&gt; = 1;
-  const unsigned short &lt;a href=#dom-eventsource-closed title=dom-EventSource-CLOSED&gt;CLOSED&lt;/a&gt; = 2;
-  readonly attribute long &lt;a href=#dom-eventsource-readystate title=dom-EventSource-readyState&gt;readyState&lt;/a&gt;;
-
-  // networking
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-eventsource-onopen title=handler-EventSource-onopen&gt;onopen&lt;/a&gt;;
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-eventsource-onmessage title=handler-EventSource-onmessage&gt;onmessage&lt;/a&gt;;
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-eventsource-onerror title=handler-EventSource-onerror&gt;onerror&lt;/a&gt;;
-  void &lt;a href=#dom-eventsource-disconnect title=dom-EventSource-disconnect&gt;disconnect&lt;/a&gt;();
-};&lt;/pre&gt;
-
-  &lt;p&gt;&lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; objects must also implement the
-  &lt;code&gt;EventTarget&lt;/code&gt; interface. &lt;a href=#refsDOM3EVENTS&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-eventsource title=dom-EventSource&gt;&lt;code&gt;EventSource(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one argument,
-  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, which specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to
-  which to connect. When the &lt;code&gt;EventSource()&lt;/code&gt; constructor is
-  invoked, the UA must run these steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;Resolve&lt;/a&gt; the
-   &lt;a href=#url&gt;URL&lt;/a&gt; specified in &lt;var title=&quot;&quot;&gt;src&lt;/var&gt;, relative to
-   the &lt;a href=#first-script&gt;first script&lt;/a&gt;'s &lt;a href=&quot;#script's-base-url&quot; title=&quot;script's base
-   URL&quot;&gt;base URL&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the previous step failed, then throw a
-   &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object, and continue
-   these steps in the background (without blocking scripts).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#fetch&gt;Fetch&lt;/a&gt; the resource identified by the resulting
-   &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;, as described below.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=dom-eventsource-url title=dom-EventSource-URL&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value that was passed to the
-  constructor.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-eventsource-readystate title=dom-EventSource-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the state of the connection. It can have the
-  following values:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-eventsource-connecting title=dom-EventSource-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
-
-   &lt;dd&gt;The connection has not yet been established, or it was closed
-   and the user agent is reconnecting.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-eventsource-open title=dom-EventSource-OPEN&gt;&lt;code&gt;OPEN&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
-
-   &lt;dd&gt;The user agent has an open connection and is dispatching events
-   as it receives them.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-eventsource-closed title=dom-EventSource-CLOSED&gt;&lt;code&gt;CLOSED&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
-
-   &lt;dd&gt;The connection is not open, and the user agent is not trying to
-   reconnect. Either there was a fatal error or the &lt;code title=dom-EventSource-disconnect&gt;&lt;a href=#dom-eventsource-disconnect&gt;disconnect()&lt;/a&gt;&lt;/code&gt; method was
-   invoked.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
-  &lt;code title=dom-EventSource-CONNECTING&gt;&lt;a href=#dom-eventsource-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0). The
-  rules given below for handling the connection define when the value
-  changes.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-eventsource-disconnect title=dom-EventSource-disconnect&gt;&lt;code&gt;disconnect()&lt;/code&gt;&lt;/dfn&gt;
-  method must close the connection, if any, and must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
-  &lt;code title=dom-EventSource-CLOSED&gt;&lt;a href=#dom-eventsource-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt;. If the
-  connection is already closed, the method must do nothing.&lt;/p&gt;
-
-  &lt;p&gt;The following are the &lt;a href=#event-handler-attributes-0&gt;event handler attributes&lt;/a&gt; that
-  must be supported, as DOM attributes, by all objects implementing
-  the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=handler-eventsource-onopen title=handler-EventSource-onopen&gt;&lt;code&gt;onopen&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-open&gt;open&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=handler-eventsource-onmessage title=handler-EventSource-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=handler-eventsource-onerror title=handler-EventSource-onerror&gt;&lt;code&gt;onerror&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;hr&gt;&lt;p&gt;In addition to the above, each &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object
-  has the following associated with it:&lt;/p&gt;
-
-  &lt;ul&gt;&lt;li&gt;A &lt;dfn id=concept-event-stream-reconnection-time title=concept-event-stream-reconnection-time&gt;reconnection
-   time&lt;/dfn&gt;, in milliseconds. This must initially be a
-   user-agent-defined value, probably in the region of a few
-   seconds.&lt;/li&gt;
-
-   &lt;li&gt;A &lt;dfn id=concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event
-   ID string&lt;/dfn&gt;. This must initially be the empty string.&lt;/li&gt;
-
-  &lt;/ul&gt;&lt;p&gt;These values are not currently exposed on the interface.&lt;/p&gt;
-
-
-  &lt;h4 id=processing-model-3&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Processing model&lt;/h4&gt;
-
-  &lt;p&gt;The resource indicated in the argument to the &lt;code title=dom-EventSource&gt;&lt;a href=#dom-eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; constructor is &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt; when the constructor is run.&lt;/p&gt;
-
-  &lt;p&gt;For HTTP connections, the &lt;code title=&quot;&quot;&gt;Accept&lt;/code&gt; header may
-  be included; if included, it must contain only formats of event
-  framing that are supported by the user agent (one of which must be
-  &lt;code&gt;text/event-stream&lt;/code&gt;, as described below).&lt;/p&gt;
-
-  &lt;p&gt;If the event source's last event ID string is not the empty
-  string, then a &lt;code title=&quot;&quot;&gt;Last-Event-ID&lt;/code&gt; HTTP header must
-  be included with the request, whose value is the value of the event
-  source's last event ID string.&lt;/p&gt;
-
-  &lt;p&gt;User agents should use the &lt;code&gt;Cache-Control: no-cache&lt;/code&gt;
-  header in requests to bypass any caches for requests of event
-  sources. User agents should ignore HTTP cache headers in the
-  response, never caching event sources.&lt;/p&gt;
-
-  &lt;p class=XXX&gt;Cross-origin loads are expected to follow the
-  Access-Control semantics of CORS; without this header, they are
-  expected to fail as if the site was down.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;As data is received, the &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt;
-  queued by the &lt;a href=#networking-task-source&gt;networking task source&lt;/a&gt; to handle the data
-  must act as follows.&lt;/p&gt;
-
-  &lt;p&gt;HTTP 200 OK responses with a &lt;a href=#content-type-0&gt;Content-Type&lt;/a&gt; header
-  specifying the type &lt;code&gt;text/event-stream&lt;/code&gt; must be processed
-  line by line &lt;a href=#event-stream-interpretation&gt;as described
-  below&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;When a successful response with a supported MIME type is
-  received, such that the user agent begins parsing the contents of
-  the stream, the user agent must &lt;a href=#announce-the-connection&gt;announce the
-  connection&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;If such a resource (with the correct MIME type) completes loading
-  (i.e. the entire HTTP response body is received or the connection
-  itself closes), the user agent must &lt;a href=#reset-the-connection&gt;reset the
-  connection&lt;/a&gt;. This doesn't apply for the error cases that are
-  listed below.&lt;/p&gt;
-
-  &lt;p&gt;HTTP 200 OK responses that have a &lt;a href=#content-type-0&gt;Content-Type&lt;/a&gt; other
-  than &lt;code&gt;text/event-stream&lt;/code&gt; (or some other supported type)
-  must cause the user agent to &lt;a href=#fail-the-connection&gt;fail the connection&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;HTTP 204 No Content, and 205 Reset Content responses are
-  equivalent to 200 OK responses with the right MIME type but no
-  content, and thus must &lt;a href=#reset-the-connection&gt;reset the connection&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Other HTTP response codes in the 2xx range &lt;!--201 Created, 202
-  Accepted, 203 Non-Authoritative Information, and 206 Partial
-  Content--&gt;must similarly &lt;a href=#reset-the-connection&gt;reset the connection&lt;/a&gt;. They
-  are, however, likely to indicate an error has occurred somewhere and
-  may cause the user agent to emit a warning.&lt;/p&gt;
-
-  &lt;p&gt;HTTP 301 Moved Permanently responses must cause the user agent to
-  reconnect using the new server specified URL instead of the
-  previously specified URL for all subsequent requests for this event
-  source. (It doesn't affect other &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; objects
-  with the same URL unless they also receive 301 responses, and it
-  doesn't affect future sessions, e.g. if the page is reloaded.)&lt;/p&gt;
-
-  &lt;p&gt;HTTP 302 Found, 303 See Other, and 307 Temporary Redirect
-  responses must cause the user agent to connect to the new
-  server-specified URL, but if the user agent needs to again request
-  the resource at a later point, it must return to the previously
-  specified URL for this event source.&lt;/p&gt;
-
-  &lt;p&gt;HTTP 305 Use Proxy, HTTP 401 Unauthorized, and 407 Proxy
-  Authentication Required should be treated transparently as for any
-  other subresource.&lt;/p&gt;
-
-  &lt;p&gt;Any other HTTP response code not listed here or network error
-  (e.g. DNS errors) must cause the user agent to &lt;a href=#fail-the-connection&gt;fail the
-  connection&lt;/a&gt;.&lt;/p&gt; &lt;!-- including: HTTP 300 Multiple Choices,
-  HTTP 304 Not Modified, HTTP 400 Bad Request, 403 Forbidden, 404 Not
-  Found, 405 Method Not Allowed, 406 Not Acceptable, 408 Request
-  Timeout, 409 Conflict, 410 Gone, 411 Length Required, 412
-  Precondition Failed, 413 Request Entity Too Large, 414 Request-URI
-  Too Long, 415 Unsupported Media Type, 416 Requested Range Not
-  Satisfiable, 417 Expectation Failed, 500 Internal Server Error, 501
-  Not Implemented, 502 Bad Gateway, 503 Service Unavailable, 504
-  Gateway Timeout, and 505 HTTP Version Not Supported responses --&gt;
-
-  &lt;p&gt;For non-HTTP protocols, UAs should act in equivalent ways.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;When a user agent is to &lt;dfn id=announce-the-connection&gt;announce the connection&lt;/dfn&gt;, the
-  user agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
-  &lt;code title=dom-EventSource-OPEN&gt;&lt;a href=#dom-eventsource-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; and &lt;a href=#queue-a-task&gt;queue a
-  task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-open&gt;open&lt;/code&gt; at the
-  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
-  &lt;p&gt;When a user agent is to &lt;dfn id=reset-the-connection&gt;reset the connection&lt;/dfn&gt;, the user
-  agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
-  &lt;code title=dom-EventSource-CONNECTING&gt;&lt;a href=#dom-eventsource-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt;,
-  &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named
-  &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the
-  &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object, and then &lt;a href=#fetch&gt;fetch&lt;/a&gt; the
-  event source resource again after a delay equal to the reconnection
-  time of the event source. &lt;strong&gt;Only if the user agent &lt;a href=#reset-the-connection title=&quot;reset the connection&quot;&gt;resets the connection&lt;/a&gt; does the
-  connection get opened anew!&lt;/strong&gt;&lt;/p&gt;
-
-  &lt;p&gt;When a user agent is to &lt;dfn id=fail-the-connection&gt;fail the connection&lt;/dfn&gt;, the user
-  agent must set the &lt;code title=dom-EventSource-readyState&gt;&lt;a href=#dom-eventsource-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute to
-  &lt;code title=dom-EventSource-CLOSED&gt;&lt;a href=#dom-eventsource-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt; and &lt;a href=#queue-a-task&gt;queue a
-  task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; named &lt;code title=event-error&gt;&lt;a href=#event-error&gt;error&lt;/a&gt;&lt;/code&gt; at the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;
-  object. &lt;strong&gt;Once the user agent has &lt;a href=#fail-the-connection title=&quot;fail the
-  connection&quot;&gt;failed the connection&lt;/a&gt;, it does &lt;em&gt;not&lt;/em&gt;
-  attempt to reconnect!&lt;/strong&gt;&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; that are &lt;a href=#queue-a-task title=&quot;queue a
-  task&quot;&gt;queued&lt;/a&gt; by &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; objects is the
-  &lt;dfn id=remote-event-task-source&gt;remote event task source&lt;/dfn&gt;.&lt;/p&gt;
-
-
-  &lt;h4 id=parsing-an-event-stream&gt;&lt;span class=secno&gt;7.2.4 &lt;/span&gt;Parsing an event stream&lt;/h4&gt;
-
-  &lt;p&gt;This event stream format's MIME type is
-  &lt;code&gt;text/event-stream&lt;/code&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The event stream format is as described by the &lt;code title=&quot;&quot;&gt;stream&lt;/code&gt; production of the following ABNF, the
-  character set for which is Unicode. &lt;a href=#refsABNF&gt;[ABNF]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXX
-  <A HREF="ftp://ftp.rfc-editor.org/in-notes/std/std68.txt">ftp://ftp.rfc-editor.org/in-notes/std/std68.txt</A> --&gt;
-
-  &lt;pre&gt;stream        = [ bom ] *event
-event         = *( comment / field ) end-of-line
-comment       = colon *any-char end-of-line
-field         = 1*name-char [ colon [ space ] *any-char ] end-of-line
-end-of-line   = ( cr lf / cr / lf / eof )
-eof           = &lt; matches repeatedly at the end of the stream &gt;
-
-; characters
-lf            = %x000A ; U+000A LINE FEED
-cr            = %x000D ; U+000D CARRIAGE RETURN
-space         = %x0020 ; U+0020 SPACE
-colon         = %x003A ; U+003A COLON
-bom           = %xFEFF ; U+FEFF BYTE ORDER MARK
-name-char     = %x0000-0009 / %x000B-000C / %x000E-0039 / %x003B-10FFFF
-                ; a Unicode character other than U+000A LINE FEED, U+000D CARRIAGE RETURN, or U+003A COLON
-any-char      = %x0000-0009 / %x000B-000C / %x000E-10FFFF
-                ; a Unicode character other than U+000D CARRIAGE RETURN or U+003A COLON&lt;/pre&gt;
-
-  &lt;p&gt;Event streams in this format must always be encoded as
-  UTF-8.&lt;/p&gt;
-
-  &lt;p&gt;Lines must be separated by either a U+000D CARRIAGE RETURN U+000A
-  LINE FEED (CRLF) character pair, a single U+000A LINE FEED (LF)
-  character, or a single U+000D CARRIAGE RETURN (CR) character.&lt;/p&gt;
-
-  &lt;p&gt;Since connections established to remote servers for such
-  resources are expected to be long-lived, UAs should ensure that
-  appropriate buffering is used. In particular, while line buffering
-  with lines are defined to end with a single U+000A LINE FEED
-  character is safe, block buffering or line buffering with different
-  expected line endings can cause delays in event dispatch.&lt;/p&gt;
-
-
-  &lt;h4 id=event-stream-interpretation&gt;&lt;span class=secno&gt;7.2.5 &lt;/span&gt;Interpreting an event stream&lt;/h4&gt;
-
-  &lt;p&gt;Bytes or sequences of bytes that are not valid UTF-8 sequences
-  must be interpreted as the U+FFFD REPLACEMENT CHARACTER.&lt;/p&gt;
-
-  &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
-  any are present.&lt;/p&gt;
-
-  &lt;p&gt;The stream must then be parsed by reading everything line by
-  line, with a U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF)
-  character pair, a single U+000A LINE FEED (LF) character, a single
-  U+000D CARRIAGE RETURN (CR) character, and the end of the file being
-  the four ways in which a line can end.&lt;/p&gt;
-
-  &lt;p&gt;When a stream is parsed, a &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and an
-  &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer must be associated with
-  it. They must be initialized to the empty string&lt;/p&gt;
-
-  &lt;p&gt;Lines must be processed, in the order they are received, as
-  follows:&lt;/p&gt;
-
-  &lt;dl class=switch&gt;&lt;dt&gt;If the line is empty (a blank line)&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;&lt;a href=#dispatchMessage&gt;Dispatch the event&lt;/a&gt;, as
-   defined below.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If the line starts with a U+003A COLON character (':')&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Ignore the line.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If the line contains a U+003A COLON character (':') character&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Collect the characters on the line before the first U+003A
-    COLON character (':'), and let &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; be that
-    string.&lt;/p&gt;
-
-    &lt;p&gt;Collect the characters on the line after the first U+003A COLON
-    character (':'), and let &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be that
-    string. If &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; starts with a single U+0020
-    SPACE character, remove it from &lt;var title=&quot;&quot;&gt;value&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;p&gt;&lt;a href=#processField&gt;Process the field&lt;/a&gt; using the steps
-    described below, using &lt;var title=&quot;&quot;&gt;field&lt;/var&gt; as the field name
-    and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; as the field value.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-
-   &lt;dt&gt;Otherwise, the string is not empty but does not contain a U+003A COLON character (':') character&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;&lt;a href=#processField&gt;Process the field&lt;/a&gt; using the steps
-    described below, using the whole line as the field name, and
-    the empty string as the field value.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;Once the end of the file is reached, the user agent must &lt;a href=#dispatchMessage&gt;dispatch the event&lt;/a&gt; one final time, as
-  defined below.&lt;/p&gt;
-
-
-  &lt;p id=processField&gt;The steps to &lt;dfn title=&quot;&quot;&gt;process the
-  field&lt;/dfn&gt; given a field name and a field value depend on the field
-  name, as given in the following list. Field names must be compared
-  literally, with no case folding performed.&lt;/p&gt;
-
-  &lt;dl class=switch&gt;&lt;dt&gt;If the field name is &quot;event&quot;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer the to field
-   value.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If the field name is &quot;data&quot;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer is not the empty
-   string, then append a single U+000A LINE FEED character to the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer. Append the field value to the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If the field name is &quot;id&quot;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Set the event stream's &lt;a href=#concept-event-stream-last-event-id title=concept-event-stream-last-event-id&gt;last event ID&lt;/a&gt; to
-   the field value.&lt;/dd&gt;
-
-
-   &lt;dt&gt;If the field name is &quot;retry&quot;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;If the field value consists of only characters in the range
-   U+0030 DIGIT ZERO ('0') U+0039 DIGIT NINE ('9'), then interpret the
-   field value as an integer in base ten, and set the event stream's
-   &lt;a href=#concept-event-stream-reconnection-time title=concept-event-stream-reconnection-time&gt;reconnection
-   time&lt;/a&gt; to that integer. Otherwise, ignore the field.&lt;/dd&gt;
-
-&lt;!-- v2 feature request from John Fallows - <A HREF="http://www.w3.org/mid/c5b3a7130810271238h11e40a4fybfcd5983ed5dc08d@mail.gmail.com">http://www.w3.org/mid/c5b3a7130810271238h11e40a4fybfcd5983ed5dc08d@mail.gmail.com</A>
-
-   &lt;dt&gt;If the field name is &quot;reconnect&quot;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;If the field value is the empty string, then: &lt;a
-   href=&quot;#dispatchMessage&quot;&gt;dispatch the event&lt;/a&gt; as defined below,
-   and then drop the connection and immediately reconnect as if the
-   &lt;span title=&quot;concept-event-stream-reconnection-time&quot;&gt;reconnection
-   time&lt;/span&gt; was zero for this one time.&lt;/p&gt;&lt;/dd&gt;
-
-  --&gt;
-
-   &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;The field is ignored.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p id=dispatchMessage&gt;When the user agent is required to &lt;dfn title=&quot;&quot;&gt;dispatch the event&lt;/dfn&gt;, then the user agent must act as
-  follows:
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer is an empty string,
-   set the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and the &lt;var title=&quot;&quot;&gt;event
-   name&lt;/var&gt; buffer to the empty string and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer is not the
-   empty string but is also not a valid &lt;a href=<A HREF="http://www.w3.org/TR/REC-xml-names/#NT-NCName">http://www.w3.org/TR/REC-xml-names/#NT-NCName</A>&gt;NCName&lt;/a&gt;,
-   set the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and the &lt;var title=&quot;&quot;&gt;event
-   name&lt;/var&gt; buffer to the empty string and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Otherwise, create an event that uses the
-   &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface, with the event name &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is
-   cancelable, and has no default action. The &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute must be set to
-   the value of the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer, the &lt;code title=dom-MessageEvent-origin&gt;&lt;a href=#dom-messageevent-origin&gt;origin&lt;/a&gt;&lt;/code&gt; attribute must be set
-   to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an origin&quot;&gt;Unicode
-   serialization&lt;/a&gt; of the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the event
-   stream's URL, and the &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a href=#dom-messageevent-lasteventid&gt;lastEventId&lt;/a&gt;&lt;/code&gt; attribute
-   must be set to the &lt;span&gt;last event ID string&lt;/span&gt; of the event
-   source.&lt;/li&gt;
-   
-   &lt;li&gt;&lt;p&gt;If the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer has a value
-   other than the empty string, change the type of the newly created
-   event to equal the value of the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt;
-   buffer.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Set the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer and the &lt;var title=&quot;&quot;&gt;event name&lt;/var&gt; buffer to the empty string.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to dispatch the newly created
-   event at the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p class=note&gt;If an event doesn't have an &quot;id&quot; field, but an
-  earlier event did set the event source's &lt;span&gt;last event ID
-  string&lt;/span&gt;, then the event's &lt;code title=dom-MessageEvent-lastEventId&gt;&lt;a href=#dom-messageevent-lasteventid&gt;lastEventId&lt;/a&gt;&lt;/code&gt; field will
-  be set to the value of whatever the last seen &quot;id&quot; field was.&lt;/p&gt;
-
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;The following event stream, once followed by a blank line:&lt;/p&gt;
-   &lt;pre&gt;data: YHOO
-data: +2
-data: 10&lt;/pre&gt;
-
-   &lt;p&gt;...would cause an event &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; with the interface
-   &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; to be dispatched on the
-   &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object. The event's &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute would contain
-   the string &lt;code&gt;YHOO\n+2\n10&lt;/code&gt; (where &lt;code&gt;\n&lt;/code&gt;
-   represents a newline).&lt;/p&gt;
-
-   &lt;p&gt;This could be used as follows:
-   &lt;pre&gt;var stocks = new EventSource(&quot;<A HREF="http://stocks.example.com/ticker.php">http://stocks.example.com/ticker.php</A>&quot;);
-stocks.onmessage = function (event) {
-  var data = event.data.split('\n');
-  updateStocks(data[0], data[1], data[2]);
-};&lt;/pre&gt;
-
-   &lt;p&gt;...where &lt;code title=&quot;&quot;&gt;updateStocks()&lt;/code&gt; is a function defined as:&lt;/p&gt;
-
-   &lt;pre&gt;function updateStocks(symbol, delta, value) { ... }&lt;/pre&gt;
-
-   &lt;p&gt;...or some such.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;The following stream contains four blocks. The first block has
-   just a comment, and will fire nothing. The second block has two
-   fields with names &quot;data&quot; and &quot;id&quot; respectively; an event will be
-   fired for this block, with the data &quot;first event&quot;, and will then
-   set the last event ID to &quot;1&quot; so that if the connection died between
-   this block and the next, the server would be sent a &lt;code title=&quot;&quot;&gt;Last-Event-ID&lt;/code&gt; header with the value &quot;1&quot;. The third
-   block fires an event with data &quot;second event&quot;, and also has an &quot;id&quot;
-   field, this time with no value, which resets the last event ID to
-   the empty string (meaning no &lt;code title=&quot;&quot;&gt;Last-Event-ID&lt;/code&gt;
-   header will now be sent in the event of a reconnection being
-   attempted). Finally the last block just fires an event with the
-   data &quot;third event&quot;. Note that the last block doesn't have to end
-   with a blank line, the end of the stream is enough to trigger the
-   dispatch of the last event.&lt;/p&gt;
-
-   &lt;pre&gt;: test stream
-
-data: first event
-id: 1
-
-data: second event
-id
-
-data: third event&lt;/pre&gt;
-  &lt;/div&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;The following stream fires just one event:&lt;/p&gt;
-
-   &lt;pre&gt;data
-
-data
-data
-
-data:&lt;/pre&gt;
-
-   &lt;p&gt;The first and last blocks do nothing, since they do not contain
-   any actual data (the &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; buffer remains at the
-   empty string, and so nothing gets dispatched). The middle block
-   fires an event with the data set to a single newline character.&lt;/p&gt;
-  &lt;/div&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;The following stream fires two identical events:&lt;/p&gt;
-
-   &lt;pre&gt;data:test
-
-data:&nbsp;test&lt;/pre&gt;
-
-   &lt;p&gt;This is because the space after the colon is ignored if
-   present.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;h4 id=notes&gt;&lt;span class=secno&gt;7.2.6 &lt;/span&gt;Notes&lt;/h4&gt;
-
-  &lt;p&gt;Legacy proxy servers are known to, in certain cases, drop HTTP
-  connections after a short timeout. To protect against such proxy
-  servers, authors can include a comment line (one starting with a ':'
-  character) every 15 seconds or so.&lt;/p&gt;
-
-  &lt;p&gt;Authors wishing to relate event source connections to each other
-  or to specific documents previously served might find that relying
-  on IP addresses doesn't work, as individual clients can have
-  multiple IP addresses (due to having multiple proxy servers) and
-  individual IP addresses can have multiple clients (due to sharing a
-  proxy server). It is better to include a unique identifier in the
-  document when it is served and then pass that identifier as part of
-  the URL in the &lt;code title=attr-eventsource-src&gt;src&lt;/code&gt;
-  attribute of the &lt;code&gt;&lt;a href=#eventsource&gt;eventsource&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
-
-  &lt;p&gt;Authors are also cautioned that HTTP chunking can have unexpected
-  negative effects on the reliability of this protocol. Where
-  possible, chunking should be disabled for serving event streams
-  unless the rate of messages is high enough for this not to
-  matter.&lt;/p&gt; &lt;!-- v2 can we get a better solution? --&gt;
-
-  &lt;p&gt;Implementations that support HTTP's per-server connection
-  limitation might run into trouble when opening multiple pages from a
-  site if each page has an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; to the same
-  domain. Authors can avoid this using the relatively complex
-  mechanism of using unique domain names per connection, or by
-  allowing the user to enable or disable the &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt;
-  functionality on a per-page basis.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;Other formats of event framing may also be supported in addition
-  to &lt;code&gt;text/event-stream&lt;/code&gt;, but this specification does not
-  define how they are to be parsed or processed.&lt;/p&gt;
-
-  &lt;p class=note&gt;Such formats could include systems like SMS-push;
-  for example servers could use &lt;code title=&quot;&quot;&gt;Accept&lt;/code&gt; headers
-  and HTTP redirects to an SMS-push mechanism as a kind of protocol
-  negotiation to reduce network load in GSM environments.&lt;/p&gt;
-
-
-  &lt;h4 id=garbage-collection-0&gt;&lt;span class=secno&gt;7.2.7 &lt;/span&gt;Garbage collection&lt;/h4&gt;
-
-  &lt;p&gt;An &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object with an open connection must not
-  be garbage collected if there are any event listeners registered for
-  &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events.&lt;/p&gt;
-
-  &lt;p&gt;If an &lt;code&gt;&lt;a href=#eventsource&gt;EventSource&lt;/a&gt;&lt;/code&gt; object is garbage collected while
-  its connection is still open, the connection must be closed.&lt;/p&gt;
-
-
-
-  &lt;h3 id=network&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;&lt;dfn&gt;Web sockets&lt;/dfn&gt;&lt;/h3&gt;
-
-  &lt;h4 id=network-intro&gt;&lt;span class=secno&gt;7.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
-
-  &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p&gt;To enable Web applications to maintain bidirectional
-  communications with server-side processes, this specification
-  introduces the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
-
-  &lt;p class=note&gt;This interface does not allow for raw access to the
-  underlying network. For example, this interface could not be used to
-  implement an IRC client without proxying messages through a custom
-  server.&lt;/p&gt;
-
-  &lt;p class=XXX&gt;An introduction to the client-side and
-  server-side of using the direct connection APIs.&lt;/p&gt;
-
-  &lt;!--BOILERPLATE--&gt;
-
-  &lt;h4 id=the-websocket-interface&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
- 
-  &lt;pre class=idl&gt;[&lt;a href=#dom-websocket title=dom-WebSocket&gt;Constructor&lt;/a&gt;(in DOMString url)]
-interface &lt;dfn id=websocket&gt;WebSocket&lt;/dfn&gt; {
-  readonly attribute DOMString &lt;a href=#dom-websocket-url title=dom-WebSocket-URL&gt;URL&lt;/a&gt;;
-
-  // ready state
-  const unsigned short &lt;a href=#dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;CONNECTING&lt;/a&gt; = 0;
-  const unsigned short &lt;a href=#dom-websocket-open title=dom-WebSocket-OPEN&gt;OPEN&lt;/a&gt; = 1;
-  const unsigned short &lt;a href=#dom-websocket-closed title=dom-WebSocket-CLOSED&gt;CLOSED&lt;/a&gt; = 2;
-  readonly attribute long &lt;a href=#dom-websocket-readystate title=dom-WebSocket-readyState&gt;readyState&lt;/a&gt;;
-
-  // networking
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-websocket-onopen title=handler-WebSocket-onopen&gt;onopen&lt;/a&gt;;
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-websocket-onmessage title=handler-WebSocket-onmessage&gt;onmessage&lt;/a&gt;;
-           attribute &lt;a href=#function&gt;Function&lt;/a&gt; &lt;a href=#handler-websocket-onclose title=handler-WebSocket-onclose&gt;onclose&lt;/a&gt;;
-  void &lt;a href=#dom-websocket-postmessage title=dom-WebSocket-postMessage&gt;postMessage&lt;/a&gt;(in DOMString data);
-  void &lt;a href=#dom-websocket-disconnect title=dom-WebSocket-disconnect&gt;disconnect&lt;/a&gt;();
-};&lt;/pre&gt;
-
-  &lt;p&gt;&lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; objects must also implement the
-  &lt;code&gt;EventTarget&lt;/code&gt; interface. &lt;a href=#refsDOM3EVENTS&gt;[DOM3EVENTS]&lt;/a&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-websocket title=dom-WebSocket&gt;&lt;code&gt;WebSocket(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; constructor takes one argument,
-  &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, which specifies the &lt;a href=#url&gt;URL&lt;/a&gt; to
-  which to connect. When the &lt;code&gt;WebSocket()&lt;/code&gt; constructor is
-  invoked, the UA must run these steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#parse-a-url title=&quot;parse a url&quot;&gt;Parse&lt;/a&gt; the &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; argument.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the previous step failed, or if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-   does not have a &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-   component whose value is either &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; or
-   &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, when compared in an &lt;a href=#ascii-case-insensitive&gt;ASCII
-   case-insensitive&lt;/a&gt; manner, then throw a
-   &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return a new &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object, and continue
-   these steps in the background (without blocking scripts).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; be the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII
-   serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the
-   &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the script that invoked the &lt;code title=dom-WebSocket&gt;&lt;a href=#dom-websocket&gt;WebSocket()&lt;/a&gt;&lt;/code&gt; constructor,
-   &lt;a href=#converted-to-lowercase&gt;converted to lowercase&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt;
-   component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; is &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot;,
-   set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to false; otherwise, the &lt;a href=#url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/a&gt; component is &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot;, set &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; to
-   true.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; be the value of the &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;a href=#converted-to-lowercase&gt;converted to lowercase&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-port title=url-port&gt;&lt;port&gt;&lt;/a&gt; component, then let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be that component's value; otherwise, there is
-   no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; be the value of the
-   &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component (which might
-   be empty) of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; is the empty string,
-   set it to a single character U+002F SOLIDUS (/).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; has a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component, then append a
-   single U+003F QUESTION MARK (?) character to &lt;var title=&quot;&quot;&gt;resource
-   name&lt;/var&gt;, followed by the value of the &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#establish-a-web-socket-connection&gt;Establish a Web Socket connection&lt;/a&gt; to a host
-   &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, on port &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; (if one
-   was specified), from &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;, with the flag &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;, and with &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;
-   as the resource name.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-websocket-url title=dom-WebSocket-URL&gt;&lt;code&gt;URL&lt;/code&gt;&lt;/dfn&gt;
-  attribute must return the value that was passed to the
-  constructor.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-websocket-readystate title=dom-WebSocket-readyState&gt;&lt;code&gt;readyState&lt;/code&gt;&lt;/dfn&gt;
-  attribute represents the state of the connection. It can have the
-  following values:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=dom-websocket-connecting title=dom-WebSocket-CONNECTING&gt;&lt;code&gt;CONNECTING&lt;/code&gt;&lt;/dfn&gt; (numeric value 0)&lt;/dt&gt;
-
-   &lt;dd&gt;The connection has not yet been established.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-websocket-open title=dom-WebSocket-OPEN&gt;&lt;code&gt;OPEN&lt;/code&gt;&lt;/dfn&gt; (numeric value 1)&lt;/dt&gt;
-
-   &lt;dd&gt;The &lt;a href=#web-socket-connection-is-established&gt;Web Socket connection is established&lt;/a&gt; and communication is possible.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=dom-websocket-closed title=dom-WebSocket-CLOSED&gt;&lt;code&gt;CLOSED&lt;/code&gt;&lt;/dfn&gt; (numeric value 2)&lt;/dt&gt;
-
-   &lt;dd&gt;The connection has been closed or could not be opened.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p&gt;When the object is created its &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; must be set to
-  &lt;code title=dom-WebSocket-CONNECTING&gt;&lt;a href=#dom-websocket-connecting&gt;CONNECTING&lt;/a&gt;&lt;/code&gt; (0). The
-  steps executed when the constructor is invoked change this
-  attribute's value.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-websocket-postmessage title=dom-WebSocket-postMessage&gt;&lt;code&gt;postMessage(&lt;var title=&quot;&quot;&gt;data&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method transmits data using the
-  connection. If the connection is not established (&lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; is not &lt;code title=dom-WebSocket-OPEN&gt;&lt;a href=#dom-websocket-open&gt;OPEN&lt;/a&gt;&lt;/code&gt;), it must raise an
-  &lt;code&gt;&lt;a href=#invalid_state_err&gt;INVALID_STATE_ERR&lt;/a&gt;&lt;/code&gt; exception. If the connection
-  &lt;em&gt;is&lt;/em&gt; established, then the user agent must &lt;a href=#send-data-using-the-web-socket&gt;send &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using the Web Socket&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;p&gt;The &lt;dfn id=dom-websocket-disconnect title=dom-WebSocket-disconnect&gt;&lt;code&gt;disconnect()&lt;/code&gt;&lt;/dfn&gt;
-  method must &lt;a href=#close-the-web-socket-connection&gt;close the Web Socket connection&lt;/a&gt; or
-  connection attempt, if any. If the connection is already closed, it
-  must do nothing. Closing the connection causes a &lt;code title=event-close&gt;close&lt;/code&gt; event to be fired and
-  the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt;
-  attribute's value to change, as &lt;a href=#closeWebSocket&gt;described
-  below&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;The following are the &lt;a href=#event-handler-attributes-0&gt;event handler attributes&lt;/a&gt; that
-  must be supported, as DOM attributes, by all objects implementing
-  the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;&lt;dfn id=handler-websocket-onopen title=handler-WebSocket-onopen&gt;&lt;code&gt;onopen&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-open&gt;open&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=handler-websocket-onmessage title=handler-WebSocket-onmessage&gt;&lt;code&gt;onmessage&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever a &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-   &lt;dt&gt;&lt;dfn id=handler-websocket-onclose title=handler-WebSocket-onclose&gt;&lt;code&gt;onclose&lt;/code&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-close&gt;close&lt;/code&gt; event is targeted at or
-   bubbles through the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;h4 id=feedback-from-the-protocol&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Feedback from the protocol&lt;/h4&gt;
-
-  &lt;p&gt;When the &lt;i&gt;&lt;a href=#web-socket-connection-is-established&gt;Web Socket connection is established&lt;/a&gt;&lt;/i&gt;, the user
-  agent must run the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;
-
-    &lt;p&gt;Change the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value
-    to &lt;code title=dom-WebSocket-OPEN&gt;&lt;a href=#dom-websocket-open&gt;OPEN&lt;/a&gt;&lt;/code&gt; (1).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt;
-    named &lt;code title=event-open&gt;open&lt;/code&gt; at the
-    &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;When &lt;i&gt;a Web Socket message has been received&lt;/i&gt; with text &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, the user agent must create an event that uses
-  the &lt;code&gt;&lt;a href=#messageevent&gt;MessageEvent&lt;/a&gt;&lt;/code&gt; interface, with the event name &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt;, which does not bubble, is
-  cancelable, has no default action, and whose &lt;code title=dom-MessageEvent-data&gt;&lt;a href=#dom-messageevent-data&gt;data&lt;/a&gt;&lt;/code&gt; attribute is set to &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;, and &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to dispatch it at
-  the &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p id=closeWebSocket&gt;When the &lt;i&gt;&lt;a href=#web-socket-connection-is-closed&gt;Web Socket connection is
-  closed&lt;/a&gt;&lt;/i&gt;, the &lt;code title=dom-WebSocket-readyState&gt;&lt;a href=#dom-websocket-readystate&gt;readyState&lt;/a&gt;&lt;/code&gt; attribute's value
-  must be changed to &lt;code title=dom-WebSocket-CLOSED&gt;&lt;a href=#dom-websocket-closed&gt;CLOSED&lt;/a&gt;&lt;/code&gt;
-  (2), and the user agent must &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-simple-event&gt;fire
-  a simple event&lt;/a&gt; named &lt;code title=event-close&gt;close&lt;/code&gt; at the
-  &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;The &lt;a href=#task-source&gt;task source&lt;/a&gt; for all &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; &lt;a href=#queue-a-task title=&quot;queue a
-  task&quot;&gt;queued&lt;/a&gt; in this section is the &lt;dfn id=web-socket-task-source&gt;Web Socket task
-  source&lt;/dfn&gt;.&lt;/p&gt;
-
-
-  &lt;h5 id=garbage-collection-1&gt;&lt;span class=secno&gt;7.3.3.1 &lt;/span&gt;Garbage collection&lt;/h5&gt;
-
-  &lt;p&gt;A &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object with an open connection must not
-  be garbage collected if there are any event listeners registered for
-  &lt;code title=event-message&gt;&lt;a href=#event-message&gt;message&lt;/a&gt;&lt;/code&gt; events.&lt;/p&gt;
-
-  &lt;p&gt;If a &lt;code&gt;&lt;a href=#websocket&gt;WebSocket&lt;/a&gt;&lt;/code&gt; object is garbage collected while its
-  connection is still open, the user agent must &lt;a href=#close-the-web-socket-connection&gt;close the Web
-  Socket connection&lt;/a&gt;.&lt;/p&gt;
-
-
-
-  &lt;h4 id=websocket-protocol title=&quot;This protocol enables two-way
-  communication between a user agent running untrusted code running in
-  a controlled environment to a remote host that understands the
-  protocol. It is intended to fail to communicate with servers of
-  pre-existing protocols like SMTP or HTTP, while allowing HTTP
-  servers to opt-in to supporting this protocol if desired. It is
-  designed to be easy to implement on the server side.&quot;&gt;&lt;span class=secno&gt;7.3.4 &lt;/span&gt;The Web Socket
-  protocol&lt;/h4&gt;
-
-  &lt;div class=no-rfc&gt;
-   &lt;p class=note&gt;This section will be extracted into an RFC in due
-   course.&lt;/p&gt;
-  &lt;/div&gt;
-
-  &lt;h5 id=introduction-7&gt;&lt;span class=secno&gt;7.3.4.1 &lt;/span&gt;Introduction&lt;/h5&gt;
-
-  &lt;p class=XXX&gt;...&lt;/p&gt;
-
-  &lt;h5 id=client-side-requirements&gt;&lt;span class=secno&gt;7.3.4.2 &lt;/span&gt;Client-side requirements&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section only applies to user agents, not to
-  servers.&lt;/em&gt;&lt;/p&gt;
-
-  &lt;p class=note&gt;This specification doesn't currently define a limit
-  to the number of simultaneous connections that a client can
-  establish to a server.&lt;/p&gt;
-
-
-  &lt;h6 id=handshake&gt;&lt;span class=secno&gt;7.3.4.2.1 &lt;/span&gt;Handshake&lt;/h6&gt;
-
-  &lt;p&gt;When the user agent is to &lt;dfn id=establish-a-web-socket-connection&gt;establish a Web Socket
-  connection&lt;/dfn&gt; to a host &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, optionally on
-  port &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, from an origin &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;, with a flag &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;, and
-  with a particular &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;, it must run the
-  following steps.&lt;/p&gt;
-
-  &lt;p class=note&gt;The &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; strings will be all-lowercase when this
-  algorithm is invoked.&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;
-
-    &lt;p&gt;If there is no explicit &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then: if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false, let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 81,
-    otherwise let &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; be 815.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the user agent is configured to use a proxy to connect to
-    host &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; and/or port &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, then connect to that proxy and ask it to open
-    a TCP/IP connection to the host given by &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;
-    and the port given by &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/p&gt;
-
-    &lt;div class=example&gt;
-
-     &lt;p&gt;For example, if the user agent uses an HTTP proxy for all
-     traffic, then if it was to try to connect to port 80 on server
-     example.com, it might send the following lines to the proxy
-     server:&lt;/p&gt;
-
-     &lt;pre&gt;CONNECT example.com HTTP/1.1&lt;/pre&gt;
-
-     &lt;p&gt;If there was a password, the connection might look like:&lt;/p&gt;
-
-     &lt;pre&gt;CONNECT example.com HTTP/1.1
-Proxy-authorization: Basic ZWRuYW1vZGU6bm9jYXBlcyE=&lt;/pre&gt;
-
-    &lt;/div&gt;
-
-    &lt;p&gt;Otherwise, if the user agent is not configured to use a proxy,
-    then open a TCP/IP connection to the host given by &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; and the port given by &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If the connection could not be opened, then &lt;a href=#fail-the-web-socket-connection&gt;fail the
-   Web Socket connection&lt;/a&gt; and abort these steps.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true, perform a TLS
-   handshake over the connection. If this fails (e.g. the server's
-   certificate could not be verified), then &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket
-   connection&lt;/a&gt; and abort these steps. Otherwise, all further
-   communication on this channel must run through the encrypted
-   tunnel. &lt;a href=#refsRFC2246&gt;[RFC2246]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Send the following bytes to the remote side (the server):&lt;/p&gt;
-
-    &lt;pre&gt;47 45 54 20&lt;/pre&gt;
-
-    &lt;p&gt;Send the &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; value, encoded as
-    US-ASCII.&lt;/p&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;20 48 54 54 50 2f 31 2e  31 0d 0a 55 70 67 72 61
-64 65 3a 20 57 65 62 53  6f 63 6b 65 74 0d 0a 43
-6f 6e 6e 65 63 74 69 6f  6e 3a 20 55 70 67 72 61
-64 65 0d 0a&lt;/pre&gt;
-
-    &lt;p class=note&gt;The string &quot;GET&nbsp;&quot;, the path,
-    &quot;&nbsp;HTTP/1.1&quot;, CRLF, the string &quot;Upgrade:&nbsp;WebSocket&quot;,
-    CRLF, and the string &quot;Connection:&nbsp;Upgrade&quot;, CRLF.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;48 6f 73 74 3a 20&lt;/pre&gt;
-
-    &lt;p&gt;Send the &lt;var title=&quot;&quot;&gt;host&lt;/var&gt; value, encoded as
-    US-ASCII.&lt;/p&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;0d 0a&lt;/pre&gt;
-
-    &lt;p class=note&gt;The string &quot;Host:&nbsp;&quot;, the host, and CRLF.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;4f 72 69 67 69 6e 3a 20&lt;/pre&gt;
-
-    &lt;p&gt;Send the &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; value, encoded as US-ASCII.&lt;/p&gt;
-
-    &lt;p class=note&gt;The &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt; value is a string
-    that was passed to this algorithm.&lt;/p&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;0d 0a&lt;/pre&gt;
-
-    &lt;p class=note&gt;The string &quot;Origin:&nbsp;&quot;, the origin, and CRLF.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the client has any authentication information or cookies
-    that would be relevant to a resource accessed over HTTP, if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false, or HTTPS, if it is true, on host
-    &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, port &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, with &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt; as the path (and possibly query
-    parameters), then HTTP headers that would be appropriate for that
-    information should be sent at this point. &lt;a href=#refsRFC2616&gt;[RFC2616]&lt;/a&gt; &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;Each header must be on a line of its own (each ending with a CR
-    LF sequence). For the purposes of this step, each header must not
-    be split into multiple lines (despite HTTP otherwise allowing this
-    with continuation lines).&lt;/p&gt;
-
-    &lt;div class=example&gt;
-
-     &lt;p&gt;For example, if the server had a username and password that
-     applied to &lt;code title=&quot;&quot;&gt;<A HREF="http://example.com/socket&lt;/code">http://example.com/socket&lt;/code</A>&gt;, and
-     the Web Socket was being opened to &lt;code title=&quot;&quot;&gt;<A HREF="ws://example.com:80/socket&lt;/code">ws://example.com:80/socket&lt;/code</A>&gt;, it could send
-     them:&lt;/p&gt;
-
-     &lt;pre&gt;Authorization: Basic d2FsbGU6ZXZl&lt;/pre&gt;
-
-     &lt;p&gt;However, it would not send them if the Web Socket was being
-     opened to &lt;code title=&quot;&quot;&gt;<A HREF="ws://example.com/socket&lt;/code">ws://example.com/socket&lt;/code</A>&gt;, as that
-     uses a different port (81, not 80).&lt;/p&gt;
-
-    &lt;/div&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Send the following bytes:&lt;/p&gt;
-
-    &lt;pre&gt;0d 0a&lt;/pre&gt;
-
-    &lt;p class=note&gt;Just a CRLF (a blank line).&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Read the first 85 bytes from the server. If the connection
-    closes before 85 bytes are received, or if the first 85 bytes
-    aren't exactly equal to the following bytes, then &lt;a href=#fail-the-web-socket-connection&gt;fail the
-    Web Socket connection&lt;/a&gt; and abort these steps.&lt;/p&gt;
-
-    &lt;pre&gt;48 54 54 50 2f 31 2e 31  20 31 30 31 20 57 65 62
-20 53 6f 63 6b 65 74 20  50 72 6f 74 6f 63 6f 6c
-20 48 61 6e 64 73 68 61  6b 65 0d 0a 55 70 67 72
-61 64 65 3a 20 57 65 62  53 6f 63 6b 65 74 0d 0a
-43 6f 6e 6e 65 63 74 69  6f 6e 3a 20 55 70 67 72
-61 64 65 0d 0a&lt;/pre&gt;
-
-    &lt;p class=note&gt;The string
-    &quot;HTTP/1.1&nbsp;101&nbsp;Web&nbsp;Socket&nbsp;Protocol&nbsp;Handshake&quot;, CRLF, the
-    string &quot;Upgrade:&nbsp;WebSocket&quot;, CRLF, the string
-    &quot;Connection:&nbsp;Upgrade&quot;, CRLF.&lt;/p&gt;
-
-    &lt;!-- v2 if we ever support the server requiring credentials, this
-    is where it goes --&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; be a list of name-value
-   pairs, initially empty.&lt;/li&gt;
-
-   &lt;li id=ws-ua-header-loop&gt;&lt;p&gt;&lt;em&gt;Header&lt;/em&gt;: Let &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; be empty byte
-   arrays.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Read a byte from the server.&lt;/p&gt;
-
-    &lt;p&gt;If the connection closes before this byte is received, then
-    &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/a&gt; and abort these
-    steps.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, handle the byte as described in the appropriate
-    entry below:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;&lt;dt&gt;If the byte is 0x0d (ASCII CR)&lt;/dt&gt;
-
-     &lt;dd&gt;If the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; byte array is empty, then
-     jump to the &lt;a href=#ws-ua-headers-processing&gt;headers
-     processing&lt;/a&gt; step. Otherwise, &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket
-     connection&lt;/a&gt; and abort these steps.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the byte is 0x0a (ASCII LF)&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;a href=#fail-the-web-socket-connection&gt;Fail the Web Socket connection&lt;/a&gt; and abort these
-     steps.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the byte is 0x3a (ASCII &quot;:&quot;)&lt;/dt&gt;
-
-     &lt;dd&gt;Move on to the next step.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the byte is in the range 0x41 .. 0x5a (ASCII &quot;A&quot; .. &quot;Z&quot;)&lt;/dt&gt;
-
-     &lt;dd&gt;Append a byte whose value is the byte's value plus 0x20 to
-     the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; byte array and redo this step for
-     the next byte.&lt;/dd&gt;
-
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;Append the byte to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; byte
-     array and redo this step for the next byte.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p class=note&gt;This reads a header name, terminated by a colon,
-    converting upper-case ASCII letters to lowercase, and aborting if
-    a stray CR or LF is found.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Read a byte from the server.&lt;/p&gt;
-
-    &lt;p&gt;If the connection closes before this byte is received, then
-    &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/a&gt; and abort these
-    steps.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, handle the byte as described in the appropriate
-    entry below:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;&lt;dt&gt;If the byte is 0x20 (ASCII space)&lt;/dt&gt;
-
-     &lt;dd&gt;Ignore the byte and move on to the next step.&lt;/dd&gt;
-
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;Treat the byte as described by the list in the next step,
-     then move on to that next step for real.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p class=note&gt;This skips past a space character after the colon,
-    if necessary.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Read a byte from the server.&lt;/p&gt;
-
-    &lt;p&gt;If the connection closes before this byte is received, then
-    &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/a&gt; and abort these
-    steps.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, handle the byte as described in the appropriate
-    entry below:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;&lt;dt&gt;If the byte is 0x0d (ASCII CR)&lt;/dt&gt;
-
-     &lt;dd&gt;Move on to the next step.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the byte is 0x0a (ASCII LF)&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;a href=#fail-the-web-socket-connection&gt;Fail the Web Socket connection&lt;/a&gt; and abort these
-     steps.&lt;/dd&gt;
-
-
-     &lt;dt&gt;Otherwise&lt;/dt&gt;
-
-     &lt;dd&gt;Append the byte to the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; byte array
-     and redo this step for the next byte.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;p class=note&gt;This reads a header value, terminated by a
-    CRLF.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Read a byte from the server.&lt;/p&gt;
-
-    &lt;p&gt;If the connection closes before this byte is received, or if
-    the byte is not a 0x0a byte (ASCII LF), then &lt;a href=#fail-the-web-socket-connection&gt;fail the Web
-    Socket connection&lt;/a&gt; and abort these steps.&lt;/p&gt;
-
-    &lt;p class=note&gt;This skips past the LF byte of the CRLF after the
-    header.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Append an entry to the &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; list that
-    has the name given by the string obtained by interpreting the &lt;var title=&quot;&quot;&gt;name&lt;/var&gt; byte array as a UTF-8 byte stream and the
-    value given by the string obtained by interpreting the &lt;var title=&quot;&quot;&gt;value&lt;/var&gt; byte array as a UTF-8 byte stream.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Return to the &lt;a href=#ws-ua-header-loop&gt;header&lt;/a&gt; step
-    above.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li id=ws-ua-headers-processing&gt;
-
-    &lt;p&gt;&lt;em&gt;Headers processing&lt;/em&gt;: If there is not exactly one entry
-    in the &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; list whose name is &quot;&lt;code title=&quot;&quot;&gt;websocket-origin&lt;/code&gt;&quot;, or if there is not exactly one
-    entry in the &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; list whose name is &quot;&lt;code title=&quot;&quot;&gt;websocket-location&lt;/code&gt;&quot;, or if there are any entries
-    in the &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; list whose names are the empty
-    string, then &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/a&gt; and abort
-    these steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Handle each entry in the &lt;var title=&quot;&quot;&gt;headers&lt;/var&gt; list as
-    follows:&lt;/p&gt;
-
-    &lt;dl class=switch&gt;&lt;dt&gt;If the entry's name is &quot;&lt;code title=&quot;&quot;&gt;websocket-origin&lt;/code&gt;&quot;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;If the value is not exactly equal to &lt;var title=&quot;&quot;&gt;origin&lt;/var&gt;, &lt;a href=#converted-to-lowercase&gt;converted to lowercase&lt;/a&gt;, then
-     &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/a&gt; and abort these
-     steps.&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the entry's name is &quot;&lt;code title=&quot;&quot;&gt;websocket-location&lt;/code&gt;&quot;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;If the value is not exactly equal to a string consisting of
-      the following components in the same order, then &lt;a href=#fail-the-web-socket-connection&gt;fail the
-      Web Socket connection&lt;/a&gt; and abort these steps:&lt;/p&gt;
-
-      &lt;ol&gt;&lt;li&gt;The string &quot;&lt;code title=&quot;&quot;&gt;ws&lt;/code&gt;&quot; if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false and &quot;&lt;code title=&quot;&quot;&gt;wss&lt;/code&gt;&quot; if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is
-       true&lt;/li&gt;
-
-       &lt;li&gt;The three characters &quot;&lt;code title=&quot;&quot;&gt;://&lt;/code&gt;&quot;.&lt;/li&gt;
-
-       &lt;li&gt;The value of &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;.&lt;/li&gt;
-
-       &lt;li&gt;If &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false and &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is not 81, or if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt;
-       is true and &lt;var title=&quot;&quot;&gt;port&lt;/var&gt; is not 815: a &quot;&lt;code title=&quot;&quot;&gt;:&lt;/code&gt;&quot; character followed by the value of &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;.&lt;/li&gt;
-
-       &lt;li&gt;The value of &lt;var title=&quot;&quot;&gt;resource name&lt;/var&gt;.&lt;/li&gt;
-
-      &lt;/ol&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;If the entry's name is &quot;&lt;code title=&quot;&quot;&gt;set-cookie&lt;/code&gt;&quot; or
-     &quot;&lt;code title=&quot;&quot;&gt;set-cookie2&lt;/code&gt;&quot; or another cookie-related
-     header name&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;Handle the cookie as defined by the appropriate spec, with
-     the resource being the one with the host &lt;var title=&quot;&quot;&gt;host&lt;/var&gt;, the port &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, the path
-     (and possibly query parameters) &lt;var title=&quot;&quot;&gt;resource
-     name&lt;/var&gt;, and the scheme &lt;code title=&quot;&quot;&gt;http&lt;/code&gt; if &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is false and &lt;code title=&quot;&quot;&gt;https&lt;/code&gt; if
-     &lt;var title=&quot;&quot;&gt;secure&lt;/var&gt; is true. &lt;a href=#refsRFC2109&gt;[RFC2109]&lt;/a&gt; &lt;a href=#refsRFC2965&gt;[RFC2965]&lt;/a&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;Any other name&lt;/dt&gt;
-
-     &lt;dd&gt;Ignore it.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;The &lt;dfn id=web-socket-connection-is-established&gt;Web Socket connection is established&lt;/dfn&gt;. Now the
-    user agent must send and receive to and from the connection as
-    described in the next section.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;To &lt;dfn id=fail-the-web-socket-connection&gt;fail the Web Socket connection&lt;/dfn&gt;, the user agent must
-  &lt;a href=#close-the-web-socket-connection&gt;close the Web Socket connection&lt;/a&gt;, and may report the
-  problem to the user (which would be especially useful for
-  developers). However, user agents must not convey the failure
-  information to the script that attempted the connection in a way
-  distinguishable from the Web Socket being closed normally.&lt;/p&gt;
-
-
-  &lt;h6 id=data-framing&gt;&lt;span class=secno&gt;7.3.4.2.2 &lt;/span&gt;Data framing&lt;/h6&gt;
-
-  &lt;p&gt;Once a &lt;a href=#web-socket-connection-is-established&gt;Web Socket connection is established&lt;/a&gt;, the
-  user agent must run through the following state machine for the
-  bytes sent by the server.&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;
-
-    &lt;p&gt;Try to read a byte from the server. Let &lt;var title=&quot;&quot;&gt;frame
-    type&lt;/var&gt; be that byte.&lt;/p&gt;
-
-    &lt;p&gt;If no byte could be read because the &lt;a href=#web-socket-connection-is-closed&gt;Web Socket
-    connection is closed&lt;/a&gt;, then abort.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Handle the &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; byte as follows:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;If the high-order bit of the &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt;
-     byte is set (i.e. if &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; &lt;i title=&quot;&quot;&gt;and&lt;/i&gt;ed with 0x80 returns 0x80)&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Run these steps. If at any point during these steps a read is
-      attempted but fails because the &lt;a href=#web-socket-connection-is-closed&gt;Web Socket connection is
-      closed&lt;/a&gt;, then abort.&lt;/p&gt;
-
-      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; be zero.&lt;/li&gt;
-
-       &lt;li id=ws-cd-length&gt;&lt;p&gt;&lt;em&gt;Length&lt;/em&gt;: Read a byte, let &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; be that byte.&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;b&lt;sub title=&quot;&quot;&gt;v&lt;/sub&gt;&lt;/var&gt; be
-       integer corresponding to the low 7 bits of &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;
-       (the value you would get by &lt;i&gt;and&lt;/i&gt;ing &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;
-       with 0x7f).&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Multiply &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; by 128, add &lt;var title=&quot;&quot;&gt;b&lt;sub title=&quot;&quot;&gt;v&lt;/sub&gt;&lt;/var&gt; to that result, and store
-       the final result in &lt;var title=&quot;&quot;&gt;length&lt;/var&gt;.&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;If the high-order bit of &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is set
-       (i.e. if &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; &lt;i title=&quot;&quot;&gt;and&lt;/i&gt;ed with 0x80
-       returns 0x80), then return to the step above labeled &lt;a href=#ws-cd-length&gt;&lt;i&gt;length&lt;/i&gt;&lt;/a&gt;.&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Read &lt;var title=&quot;&quot;&gt;length&lt;/var&gt; bytes.&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Discard the read bytes.&lt;/li&gt;
-
-      &lt;/ol&gt;&lt;/dd&gt;
-
-     &lt;dt&gt;If the high-order bit of the &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt;
-     byte is &lt;em&gt;not&lt;/em&gt; set (i.e. if &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt;
-     &lt;i title=&quot;&quot;&gt;and&lt;/i&gt;ed with 0x80 returns 0x00)&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;Run these steps. If at any point during these steps a read is
-      attempted but fails because the &lt;a href=#web-socket-connection-is-closed&gt;Web Socket connection is
-      closed&lt;/a&gt;, then abort.&lt;/p&gt;
-
-      &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; be an empty byte array.&lt;/li&gt;
-
-       &lt;li id=ws-cd-data&gt;&lt;p&gt;&lt;em&gt;Data&lt;/em&gt;: Read a byte, let &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; be that byte.&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is not 0xff, then append &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; and return to
-       the previous step (labeled &lt;a href=#ws-cd-data&gt;&lt;i&gt;data&lt;/i&gt;&lt;/a&gt;).&lt;/li&gt;
-
-       &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; as a UTF-8
-       string, and store that string in &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.&lt;/p&gt;
-
-       &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;frame type&lt;/var&gt; is 0x00, then &lt;dfn id=a-message-has-been-received&gt;a
-       message has been received&lt;/dfn&gt; with text &lt;var title=&quot;&quot;&gt;data&lt;/var&gt;.  Otherwise, discard the data.&lt;/li&gt;
-
-      &lt;/ol&gt;&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return to the first step to read the next byte.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;If the user agent is faced with content that is too large to be
-  handled appropriately, then it must &lt;a href=#fail-the-web-socket-connection&gt;fail the Web Socket
-  connection&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;hr&gt;&lt;p&gt;Once a &lt;a href=#web-socket-connection-is-established&gt;Web Socket connection is established&lt;/a&gt;, the
-  user agent must use the following steps to &lt;dfn id=send-data-using-the-web-socket&gt;send &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using the Web Socket&lt;/dfn&gt;:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Send a 0x00 byte to the server.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Encode &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using UTF-8 and send the
-   resulting byte stream to the server.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Send a 0xff byte to the server.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;!-- v2: People often request the ability to send binary blobs over
-  this API; we should also look into allowing name/value pairs,
-  arrays, and numbers using postMessage() instead of just strings and
-  binary data. --&gt;&lt;h5 id=server-side-requirements&gt;&lt;span class=secno&gt;7.3.4.3 &lt;/span&gt;Server-side requirements&lt;/h5&gt;
-
-  &lt;p&gt;&lt;em&gt;This section only applies to servers.&lt;/em&gt;&lt;/p&gt; &lt;!-- XXX that's not a defined conformance class --&gt;
-
-  &lt;h6 id=minimal-handshake&gt;&lt;span class=secno&gt;7.3.4.3.1 &lt;/span&gt;Minimal handshake&lt;/h6&gt;
-
-  &lt;p class=note&gt;This section describes the minimal requirements for
-  a server-side implementation of Web Sockets.&lt;/p&gt;
-
-  &lt;p&gt;Listen on a port for TCP/IP. Upon receiving a connection request,
-  open a connection and send the following bytes back to the
-  client:&lt;/p&gt;
-
-  &lt;pre&gt;48 54 54 50 2f 31 2e 31  20 31 30 31 20 57 65 62
-20 53 6f 63 6b 65 74 20  50 72 6f 74 6f 63 6f 6c
-20 48 61 6e 64 73 68 61  6b 65 0d 0a 55 70 67 72
-61 64 65 3a 20 57 65 62  53 6f 63 6b 65 74 0d 0a
-43 6f 6e 6e 65 63 74 69  6f 6e 3a 20 55 70 67 72
-61 64 65 0d 0a&lt;/pre&gt;
-
-  &lt;p&gt;Send the string &quot;&lt;code title=&quot;&quot;&gt;WebSocket-Origin&lt;/code&gt;&quot; followed
-  by a U+003A COLON (&quot;:&quot;) followed by the &lt;a href=#ascii-serialization-of-an-origin title=&quot;ASCII
-  serialization of an origin&quot;&gt;ASCII serialization&lt;/a&gt; of the origin
-  from which the server is willing to accept connections, followed by
-  a CRLF pair (0x0d 0x0a).&lt;/p&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;For instance:&lt;/p&gt;
-
-   &lt;pre&gt;WebSocket-Origin: <A HREF="http://example.com&lt;/pre">http://example.com&lt;/pre</A>&gt;
-
-  &lt;/div&gt;
-
-  &lt;p&gt;Send the string &quot;&lt;code title=&quot;&quot;&gt;WebSocket-Location&lt;/code&gt;&quot;
-  followed by a U+003A COLON (&quot;:&quot;) followed by the &lt;a href=#url&gt;URL&lt;/a&gt; of
-  the Web Socket script, followed by a CRLF pair (0x0d 0x0a).&lt;/p&gt;
-
-  &lt;div class=example&gt;
-
-   &lt;p&gt;For instance:&lt;/p&gt;
-
-   &lt;pre&gt;WebSocket-Location: <A HREF="ws://example.com:80/demo&lt;/pre">ws://example.com:80/demo&lt;/pre</A>&gt;
-
-  &lt;/div&gt;
-
-  &lt;p&gt;Send another CRLF pair (0x0d 0x0a).&lt;/p&gt;
-
-  &lt;p&gt;Read (and discard) data from the client until four bytes 0x0d
-  0x0a 0x0d 0x0a are read.&lt;/p&gt;
-
-  &lt;p&gt;If the connection isn't dropped at this point, go to the &lt;a href=#ws-sd-framing&gt;data framing&lt;/a&gt; section.&lt;/p&gt;
-
-
-  &lt;h6 id=handshake-details&gt;&lt;span class=secno&gt;7.3.4.3.2 &lt;/span&gt;Handshake details&lt;/h6&gt;
-
-  &lt;p&gt;The previous section ignores the data that is transmitted by the
-  client during the handshake.&lt;/p&gt;
-
-  &lt;p&gt;The data sent by the client consists of a number of fields
-  separated by CR LF pairs (bytes 0x0d 0x0a).&lt;/p&gt;
-
-  &lt;p&gt;The first field consists of three tokens separated by space
-  characters (byte 0x20). The middle token is the path being
-  opened. If the server supports multiple paths, then the server
-  should echo the value of this field in the initial handshake, as
-  part of the &lt;a href=#url&gt;URL&lt;/a&gt; given on the &lt;code title=&quot;&quot;&gt;WebSocket-Location&lt;/code&gt; line (after the appropriate
-  scheme and host).&lt;/p&gt;
-
-  &lt;p&gt;The remaining fields consist of name-value pairs, with the name
-  part separated from the value part by a colon and a space (bytes
-  0x3a 0x20). Of these, several are interesting:&lt;/p&gt;
-
-  &lt;dl&gt;&lt;dt&gt;Host (bytes 48 6f 73 74)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The value gives the hostname that the client intended to use
-    when opening the Web Socket. It would be of interest in particular
-    to virtual hosting environments, where one server might serve
-    multiple hosts, and might therefore want to return different
-    data.&lt;/p&gt;
-
-    &lt;p&gt;The right host has to be output as part of the &lt;a href=#url&gt;URL&lt;/a&gt;
-    given on the &lt;code title=&quot;&quot;&gt;WebSocket-Location&lt;/code&gt; line of the
-    handshake described above, to verify that the server knows that it
-    is really representing that host.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Origin (bytes 4f 72 69 67 69 6e)&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;The value gives the scheme, hostname, and port (if it's not the
-    default port for the given scheme) of the page that asked the
-    client to open the Web Socket. It would be interesting if the
-    server's operator had deals with operators of other sites, since
-    the server could then decide how to respond (or indeed,
-    &lt;em&gt;whether&lt;/em&gt; to respond) based on which site was requesting a
-    connection.&lt;/p&gt;
-
-    &lt;p&gt;If the server supports connections from more than one origin,
-    then the server should echo the value of this field in the initial
-    handshake, on the &lt;code title=&quot;&quot;&gt;WebSocket-Origin&lt;/code&gt; line.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-   &lt;dt&gt;Other fields&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;Other fields can be used, such as &quot;&lt;code title=&quot;&quot;&gt;Cookie&lt;/code&gt;&quot; or &quot;&lt;code&gt;Authorization&lt;/code&gt;&quot;, for
-    authentication purposes.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;h6 id=ws-sd-framing&gt;&lt;span class=secno&gt;7.3.4.3.3 &lt;/span&gt;Data framing&lt;/h6&gt;
-
-  &lt;p class=note&gt;This section only describes how to handle content
-  that this specification allows user agents to send (text). It
-  doesn't handle any arbitrary content in the same way that the
-  requirements on user agents defined earlier handle any content
-  including possible future extensions to the protocols.&lt;/p&gt;
-
-  &lt;p&gt;The server should run through the following steps to process the
-  bytes sent by the client:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Read a byte from the client. Assuming everything is going
-   according to plan, it will be a 0x00 byte. Behaviour for the server
-   is undefined if the byte is not 0x00.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; be an empty byte
-   array.&lt;/li&gt;
-
-   &lt;li id=ws-sd-data&gt;&lt;p&gt;&lt;i&gt;Data&lt;/i&gt;: Read a byte, let &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; be that byte.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is not 0xff, then append &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; and return to the
-   previous step (labeled &lt;a href=#ws-sd-data&gt;&lt;i&gt;data&lt;/i&gt;&lt;/a&gt;).&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Interpret &lt;var title=&quot;&quot;&gt;raw data&lt;/var&gt; as a UTF-8 string,
-   and apply whatever server-specific processing should occur for the
-   resulting string.&lt;/p&gt;
-
-   &lt;li&gt;&lt;p&gt;Return to the first step to read the next byte.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;hr&gt;&lt;p&gt;The server should run through the following steps to send strings
-  to the client:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Send a 0x00 byte to the client to indicate the start of a
-   string.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Encode &lt;var title=&quot;&quot;&gt;data&lt;/var&gt; using UTF-8 and send the
-   resulting byte stream to the client.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Send a 0xff byte to the client to indicate the end of the
-   message.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;h5 id=closing-the-connection&gt;&lt;span class=secno&gt;7.3.4.4 &lt;/span&gt;Closing the connection&lt;/h5&gt;
-
-  &lt;p&gt;To &lt;dfn id=close-the-web-socket-connection&gt;close the Web Socket connection&lt;/dfn&gt;, either the user
-  agent or the server closes the TCP/IP connection. There is no
-  closing handshake. Whether the user agent or the server closes the
-  connection, it is said that the &lt;dfn id=web-socket-connection-is-closed&gt;Web Socket connection is
-  closed&lt;/dfn&gt;.&lt;/p&gt;
-
-  &lt;p&gt;Servers may &lt;a href=#close-the-web-socket-connection&gt;close the Web Socket connection&lt;/a&gt; whenever
-  desired.&lt;/p&gt;
-
-  &lt;p&gt;User agents should not &lt;a href=#close-the-web-socket-connection&gt;close the Web Socket
-  connection&lt;/a&gt; arbitrarily.&lt;/p&gt;
-
-
-  &lt;h5 id=security-considerations&gt;&lt;span class=secno&gt;7.3.4.5 &lt;/span&gt;Security considerations&lt;/h5&gt;
-
-  &lt;p class=XXX&gt;...&lt;/p&gt;
-
-
-  &lt;h5 id=iana-considerations&gt;&lt;span class=secno&gt;7.3.4.6 &lt;/span&gt;IANA considerations&lt;/h5&gt;
-
-  &lt;p class=XXX&gt;...(two URI schemes, two ports, HTTP Upgrade keyword)&lt;/p&gt;
-
-
-  &lt;h3 id=crossDocumentMessages&gt;&lt;span class=secno&gt;7.4 &lt;/span&gt;&lt;dfn&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
-
   &lt;p&gt;Web browsers, for security and privacy reasons, prevent documents
   in different domains from affecting each other; that is, cross-site
   scripting is disallowed.&lt;/p&gt;
@@ -52481,7 +49765,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=introduction-8&gt;&lt;span class=secno&gt;7.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-5&gt;&lt;span class=secno&gt;7.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -52522,11 +49806,11 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=security-5&gt;&lt;span class=secno&gt;7.4.2 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security-4&gt;&lt;span class=secno&gt;7.2.2 &lt;/span&gt;Security&lt;/h4&gt;
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=authors&gt;&lt;span class=secno&gt;7.4.2.1 &lt;/span&gt;Authors&lt;/h5&gt;
+  &lt;h5 id=authors&gt;&lt;span class=secno&gt;7.2.2.1 &lt;/span&gt;Authors&lt;/h5&gt;
 
   &lt;/div&gt;
 
@@ -52547,7 +49831,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=user-agents&gt;&lt;span class=secno&gt;7.4.2.2 &lt;/span&gt;User agents&lt;/h5&gt;
+  &lt;h5 id=user-agents&gt;&lt;span class=secno&gt;7.2.2.2 &lt;/span&gt;User agents&lt;/h5&gt;
 
   &lt;p&gt;The integrity of this API is based on the inability for scripts
   of one &lt;a href=#origin-0&gt;origin&lt;/a&gt; to post arbitrary events (using &lt;code title=&quot;&quot;&gt;dispatchEvent()&lt;/code&gt; or otherwise) to objects in other
@@ -52563,7 +49847,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=posting-messages&gt;&lt;span class=secno&gt;7.4.3 &lt;/span&gt;Posting messages&lt;/h4&gt;
+  &lt;h4 id=posting-messages&gt;&lt;span class=secno&gt;7.2.3 &lt;/span&gt;Posting messages&lt;/h4&gt;
 
   &lt;dl class=domintro&gt;&lt;dt&gt;&lt;var title=&quot;&quot;&gt;window&lt;/var&gt; . &lt;code title=dom-window-postMessage-2&gt;&lt;a href=#dom-window-postmessage-2&gt;postMessage&lt;/a&gt;&lt;/code&gt;(&lt;var title=&quot;&quot;&gt;message&lt;/var&gt;, [ &lt;var title=&quot;&quot;&gt;port&lt;/var&gt;, ] &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;)&lt;/dt&gt;
 
@@ -52652,7 +49936,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=posting-messages-with-message-ports&gt;&lt;span class=secno&gt;7.4.4 &lt;/span&gt;Posting messages with message ports&lt;/h4&gt;
+  &lt;h4 id=posting-messages-with-message-ports&gt;&lt;span class=secno&gt;7.2.4 &lt;/span&gt;Posting messages with message ports&lt;/h4&gt;
 
   &lt;p&gt;When a script invokes the &lt;dfn id=dom-window-postmessage-3 title=dom-window-postMessage-3&gt;&lt;code&gt;postMessage(&lt;var title=&quot;&quot;&gt;message&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;messagePort&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method (with three
   arguments) on a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, the user agent must
@@ -52758,9 +50042,9 @@
 
 
 
-  &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;7.5 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
+  &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;7.3 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;7.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-6&gt;&lt;span class=secno&gt;7.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -52769,7 +50053,7 @@
 
 
 
-  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;7.5.2 &lt;/span&gt;Message channels&lt;/h4&gt;
+  &lt;h4 id=message-channels&gt;&lt;span class=secno&gt;7.3.2 &lt;/span&gt;Message channels&lt;/h4&gt;
 
   &lt;pre class=idl&gt;[&lt;a href=#dom-messagechannel title=dom-MessageChannel&gt;Constructor&lt;/a&gt;]
 interface &lt;dfn id=messagechannel&gt;MessageChannel&lt;/dfn&gt; {
@@ -52834,7 +50118,7 @@
 
 
 
-  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;7.5.3 &lt;/span&gt;Message ports&lt;/h4&gt;
+  &lt;h4 id=message-ports&gt;&lt;span class=secno&gt;7.3.3 &lt;/span&gt;Message ports&lt;/h4&gt;
 
   &lt;p&gt;Each channel has two message ports. Data sent through one port is
   received by the other port, and vice versa.&lt;/p&gt;
@@ -53109,7 +50393,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;7.5.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
+  &lt;h5 id=ports-and-garbage-collection&gt;&lt;span class=secno&gt;7.3.3.1 &lt;/span&gt;Ports and garbage collection&lt;/h5&gt;
 
   &lt;p&gt;User agents must act as if &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt; objects have
   a strong reference to their entangled &lt;code&gt;&lt;a href=#messageport&gt;MessagePort&lt;/a&gt;&lt;/code&gt;
@@ -62653,7 +59937,7 @@
   lead to this experience.&lt;/em&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=introduction-10&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=introduction-7&gt;&lt;span class=secno&gt;10.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;In general, user agents are expected to support CSS, and many of
   the suggestions in this section are expressed in CSS terms. User
@@ -62675,7 +59959,7 @@
 
   &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;10.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
 
-  &lt;h4 id=introduction-11&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-8&gt;&lt;span class=secno&gt;10.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;The CSS rules given in these subsections are, unless otherwise
   specified, expected to be used as part of the user-agent level style
@@ -63846,7 +61130,7 @@
 
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Bindings&lt;/h3&gt;
 
-  &lt;h4 id=introduction-12&gt;&lt;span class=secno&gt;10.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;10.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;A number of elements have their rendering defined in terms of the
   'binding' property. &lt;a href=#refsBECSS&gt;[BECSS]&lt;/a&gt;&lt;/p&gt;

Modified: source
===================================================================
--- source	2009-03-18 06:49:56 UTC (rev 2876)
+++ source	2009-03-18 19:31:53 UTC (rev 2877)
@@ -1,3 +1,4 @@
+&lt;!--START html5--&gt;
 
   &lt;h3 class=&quot;no-num no-toc&quot;&gt;Stability&lt;/h3&gt;
 
@@ -43868,9 +43869,9 @@
 
   // the user agent
   readonly attribute &lt;span&gt;Navigator&lt;/span&gt; &lt;span title=&quot;dom-navigator&quot;&gt;navigator&lt;/span&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
-  readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/span&gt;;
+  readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/span&gt;; &lt;!-- XXX split into separate interface --&gt;
   readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=&quot;dom-sessionStorage&quot;&gt;sessionStorage&lt;/span&gt;;
-  &lt;span&gt;Database&lt;/span&gt; &lt;span title=&quot;dom-opendatabase&quot;&gt;openDatabase&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize);
+  &lt;span&gt;Database&lt;/span&gt; &lt;span title=&quot;dom-opendatabase&quot;&gt;openDatabase&lt;/span&gt;(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize); &lt;!-- XXX split into separate interface --&gt;
   readonly attribute &lt;span&gt;ApplicationCache&lt;/span&gt; &lt;span title=&quot;dom-applicationCache&quot;&gt;applicationCache&lt;/span&gt;;
 
   // user prompts
@@ -51081,10 +51082,10 @@
   &lt;/div&gt;
 
 
+  &lt;h3&gt;Structured client-side storage&lt;/h3&gt;  &lt;!--START storage--&gt;
 
+  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
 
-  &lt;h3&gt;Structured client-side storage&lt;/h3&gt;
-
   &lt;h4 id=&quot;storage&quot;&gt;Storing name/value pairs&lt;/h4&gt;
 
   &lt;h5&gt;Introduction&lt;/h5&gt;
@@ -52387,8 +52388,10 @@
   and to never construct SQL statements on the fly.&lt;/p&gt;
 
 
+  &lt;!--END storage--&gt;
 
 
+
   &lt;h3 id=&quot;links&quot;&gt;Links&lt;/h3&gt;
 
 
@@ -57853,6 +57856,7 @@
 
   &lt;h3&gt;Event definitions&lt;/h3&gt;
 
+  &lt;!-- XXX cross-references for SSE and WS need fixing now that this is cross-spec --&gt;
   &lt;p&gt;Messages in &lt;span&gt;server-sent events&lt;/span&gt;, &lt;span&gt;Web
   sockets&lt;/span&gt;, &lt;span&gt;cross-document messaging&lt;/span&gt;, and
   &lt;span&gt;channel messaging&lt;/span&gt; use the &lt;dfn
@@ -57973,8 +57977,7 @@
 
 
 
-  &lt;h3 id=&quot;server-sent-events&quot;&gt;&lt;dfn&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt;
-  &lt;!-- eventsource --&gt;
+  &lt;h3 id=&quot;server-sent-events&quot;&gt;&lt;dfn&gt;Server-sent events&lt;/dfn&gt;&lt;/h3&gt; &lt;!--START eventsource--&gt;
 
   &lt;h4 id=&quot;server-sent-events-intro&quot;&gt;Introduction&lt;/h4&gt;
 
@@ -57987,7 +57990,7 @@
   &lt;p class=&quot;XXX&quot;&gt;An introduction to the client-side and
   server-side of using the direct connection APIs.&lt;/p&gt;
 
-  &lt;!--BOILERPLATE--&gt;
+  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
 
   &lt;h4&gt;The &lt;code&gt;EventSource&lt;/code&gt; interface&lt;/h4&gt;
 
@@ -58622,10 +58625,12 @@
   &lt;p&gt;If an &lt;code&gt;EventSource&lt;/code&gt; object is garbage collected while
   its connection is still open, the connection must be closed.&lt;/p&gt;
 
+  &lt;!--END eventsource--&gt;
 
 
-  &lt;h3 id=&quot;network&quot;&gt;&lt;dfn&gt;Web sockets&lt;/dfn&gt;&lt;/h3&gt;
 
+  &lt;h3 id=&quot;network&quot;&gt;&lt;dfn&gt;Web sockets&lt;/dfn&gt;&lt;/h3&gt; &lt;!--START websocket--&gt;&lt;!--START websocket-api--&gt;
+
   &lt;h4 id=&quot;network-intro&quot;&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
@@ -58642,7 +58647,7 @@
   &lt;p class=&quot;XXX&quot;&gt;An introduction to the client-side and
   server-side of using the direct connection APIs.&lt;/p&gt;
 
-  &lt;!--BOILERPLATE--&gt;
+  &lt;!--BOILERPLATE middle-w3c-api-intro--&gt;
 
   &lt;h4&gt;The &lt;code&gt;WebSocket&lt;/code&gt; interface&lt;/h4&gt;
  
@@ -58880,6 +58885,7 @@
   Socket connection&lt;/span&gt;.&lt;/p&gt;
 
 
+  &lt;!--END websocket-api--&gt;
 
   &lt;h4 id=&quot;websocket-protocol&quot; title=&quot;This protocol enables two-way
   communication between a user agent running untrusted code running in
@@ -59694,7 +59700,9 @@
 
   &lt;p class=&quot;XXX&quot;&gt;...(two URI schemes, two ports, HTTP Upgrade keyword)&lt;/p&gt;
 
+  &lt;!--END websocket--&gt;
 
+
   &lt;h3 id=&quot;crossDocumentMessages&quot;&gt;&lt;dfn&gt;Cross-document messaging&lt;/dfn&gt;&lt;/h3&gt;
 
   &lt;p&gt;Web browsers, for security and privacy reasons, prevent documents
@@ -71852,3 +71860,4 @@
 
  &lt;/body&gt;
 &lt;/html&gt;
+&lt;!--END html5--&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009759.html">[html5] r2875 - [e] (0) Make clear that EventSource objects don't	reconnect on failure.
</A></li>
	<LI>Next message: <A HREF="009761.html">[html5] r2878 - [e] (0) Clarify &lt;time&gt;'s use cases and provide	examples. (bug 6536)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9760">[ date ]</a>
              <a href="thread.html#9760">[ thread ]</a>
              <a href="subject.html#9760">[ subject ]</a>
              <a href="author.html#9760">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
