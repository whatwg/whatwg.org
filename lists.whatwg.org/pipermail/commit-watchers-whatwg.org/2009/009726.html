<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2842 - [] (0) Abstract out the encoding stuff from the	parser to the infrastructure sec [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2842%20-%20%5B%5D%20%280%29%20Abstract%20out%20the%20encoding%20stuff%20from%20the%0A%09parser%20to%20the%20infrastructure%20sec%20%5B...%5D&In-Reply-To=%3C20090219110455.5231238E079%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009725.html">
   <LINK REL="Next"  HREF="009727.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2842 - [] (0) Abstract out the encoding stuff from the	parser to the infrastructure sec [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2842%20-%20%5B%5D%20%280%29%20Abstract%20out%20the%20encoding%20stuff%20from%20the%0A%09parser%20to%20the%20infrastructure%20sec%20%5B...%5D&In-Reply-To=%3C20090219110455.5231238E079%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2842 - [] (0) Abstract out the encoding stuff from the	parser to the infrastructure sec [...]">whatwg at whatwg.org
       </A><BR>
    <I>Thu Feb 19 03:04:55 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009725.html">[html5] r2841 - [e] (0) remove XXX markers for canvas v4 notes,	since they probably won't make t [...]
</A></li>
        <LI>Next message: <A HREF="009727.html">[html5] r2843 - [e] (0) Flesh out minor point about text nodes.	Remove redundant internal note.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9726">[ date ]</a>
              <a href="thread.html#9726">[ thread ]</a>
              <a href="subject.html#9726">[ subject ]</a>
              <a href="author.html#9726">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-02-19 03:04:54 -0800 (Thu, 19 Feb 2009)
New Revision: 2842

Modified:
   index
   source
Log:
[] (0) Abstract out the encoding stuff from the parser to the infrastructure section so that it also affects form submission

Modified: index
===================================================================
--- index	2009-02-19 10:20:04 UTC (rev 2841)
+++ index	2009-02-19 11:04:54 UTC (rev 2842)
@@ -277,20 +277,21 @@
      &lt;li&gt;&lt;a href=#content-type-sniffing:-unknown-type&gt;&lt;span class=secno&gt;2.7.4 &lt;/span&gt;Content-Type sniffing: unknown type&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#content-type-sniffing:-image&gt;&lt;span class=secno&gt;2.7.5 &lt;/span&gt;Content-Type sniffing: image&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#content-type-sniffing:-feed-or-html&gt;&lt;span class=secno&gt;2.7.6 &lt;/span&gt;Content-Type sniffing: feed or HTML&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#character-encodings-0&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Character encodings&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#common-dom-interfaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Common DOM interfaces&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-dom-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in DOM attributes&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#collections&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#reflecting-content-attributes-in-dom-attributes&gt;&lt;span class=secno&gt;2.9.1 &lt;/span&gt;Reflecting content attributes in DOM attributes&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#collections&gt;&lt;span class=secno&gt;2.9.2 &lt;/span&gt;Collections&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#htmlcollection&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#htmloptionscollection&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domtokenlist&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#domstringmap&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlcollection&gt;&lt;span class=secno&gt;2.9.2.1 &lt;/span&gt;HTMLCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.9.2.2 &lt;/span&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#htmloptionscollection&gt;&lt;span class=secno&gt;2.9.2.3 &lt;/span&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domtokenlist&gt;&lt;span class=secno&gt;2.9.3 &lt;/span&gt;DOMTokenList&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.9.4 &lt;/span&gt;Safe passing of structured data&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#domstringmap&gt;&lt;span class=secno&gt;2.9.5 &lt;/span&gt;DOMStringMap&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dom-feature-strings&gt;&lt;span class=secno&gt;2.9.6 &lt;/span&gt;DOM feature strings&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#exceptions&gt;&lt;span class=secno&gt;2.9.7 &lt;/span&gt;Exceptions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#garbage-collection&gt;&lt;span class=secno&gt;2.9.8 &lt;/span&gt;Garbage collection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#dom&gt;&lt;span class=secno&gt;3 &lt;/span&gt;Semantics and structure of HTML documents&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#semantics-intro&gt;&lt;span class=secno&gt;3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -940,9 +941,8 @@
      &lt;li&gt;&lt;a href=#the-input-stream&gt;&lt;span class=secno&gt;8.2.2 &lt;/span&gt;The input stream&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#determining-the-character-encoding&gt;&lt;span class=secno&gt;8.2.2.1 &lt;/span&gt;Determining the character encoding&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#character-encoding-requirements&gt;&lt;span class=secno&gt;8.2.2.2 &lt;/span&gt;Character encoding requirements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#preprocessing-the-input-stream&gt;&lt;span class=secno&gt;8.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;8.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#preprocessing-the-input-stream&gt;&lt;span class=secno&gt;8.2.2.2 &lt;/span&gt;Preprocessing the input stream&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;8.2.2.3 &lt;/span&gt;Changing the encoding while parsing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#parse-state&gt;&lt;span class=secno&gt;8.2.3 &lt;/span&gt;Parse state&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#the-insertion-mode&gt;&lt;span class=secno&gt;8.2.3.1 &lt;/span&gt;The insertion mode&lt;/a&gt;&lt;/li&gt;
@@ -5513,10 +5513,90 @@
 
 
 
-  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
+  &lt;h3 id=character-encodings-0&gt;&lt;span class=secno&gt;2.8 &lt;/span&gt;Character encodings&lt;/h3&gt;
 
-  &lt;h4 id=reflecting-content-attributes-in-dom-attributes&gt;&lt;span class=secno&gt;2.8.1 &lt;/span&gt;Reflecting content attributes in DOM attributes&lt;/h4&gt;
+  &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
+  encodings, but may support more.&lt;/p&gt;
 
+  &lt;p class=note&gt;It is not unusual for Web browsers to support dozens
+  if not upwards of a hundred distinct character encodings.&lt;/p&gt;
+
+  &lt;p&gt;User agents must support the preferred MIME name of every
+  character encoding they support that has a preferred MIME name, and
+  should support all the IANA-registered aliases. &lt;a href=#refsIANACHARSET&gt;[IANACHARSET]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;When comparing a string specifying a character encoding with the
+  name or alias of a character encoding to determine if they are
+  equal, user agents must use the Charset Alias Matching rules defined
+  in Unicode Technical Standard #22. &lt;a href=#refsUTS22&gt;[UTS22]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXXrefs
+  <A HREF="http://unicode.org/reports/tr22/#Charset_Alias_Matching">http://unicode.org/reports/tr22/#Charset_Alias_Matching</A> --&gt;
+
+  &lt;p class=example&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
+  considered equivalent names.&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;When a user agent would otherwise use an encoding given in the
+  first column of the following table to either convert content to
+  Unicode characters or convert Unicode characters to bytes, it must
+  instead use the encoding given in the cell in the second column of
+  the same row. When a byte or sequence of bytes is treated
+  differently due to this encoding aliasing, it is said to have been
+  &lt;dfn id=misinterpreted-for-compatibility&gt;misinterpreted for compatibility&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;table&gt;&lt;caption&gt;Character encoding overrides&lt;/caption&gt;
+   &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Input encoding &lt;th&gt; Replacement encoding &lt;th&gt; References
+   &lt;tbody&gt;&lt;!-- how about EUC-JP? --&gt;&lt;tr&gt;&lt;td&gt; EUC-KR &lt;td&gt; Windows-949 &lt;td&gt;
+         &lt;a href=#refsEUCKR&gt;[EUCKR]&lt;/a&gt; &lt;!-- see reference for [EUC-KR] in RFC1557 --&gt;
+         &lt;a href=#refsWin949&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; GB2312 &lt;td&gt; GBK &lt;td&gt;
+         &lt;a href=#refsGB2312&gt;[GB2312]&lt;/a&gt;&lt;!-- XXX ? --&gt;
+         &lt;a href=#refsGBK&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; GB_2312-80 &lt;td&gt; GBK &lt;td&gt;
+         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=#refsGBK&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; ISO-8859-1 &lt;td&gt; Windows-1252 &lt;td&gt;
+         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=#refsWin1252&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; ISO-8859-9 &lt;td&gt; Windows-1254 &lt;td&gt;
+         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=#refsWin1254&gt;[WIN1254]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1254.htm">http://www.microsoft.com/globaldev/reference/sbcs/1254.htm</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; ISO-8859-11 &lt;td&gt; Windows-874 &lt;td&gt;
+         &lt;a href=#refsISO885911&gt;[ISO885911]&lt;/a&gt;&lt;!-- get reference from <A HREF="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263</A> --&gt;
+         &lt;a href=#refsWin874&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; KS_C_5601-1987 &lt;td&gt; Windows-949 &lt;td&gt;
+         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=#refsWin949&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; TIS-620 &lt;td&gt; Windows-874 &lt;td&gt;
+         &lt;a href=#refsTIS620&gt;[TIS620]&lt;/a&gt; &lt;!-- <A HREF="http://www.nectec.or.th/it-standards/std620/std620.htm">http://www.nectec.or.th/it-standards/std620/std620.htm</A> --&gt;
+         &lt;a href=#refsWin874&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; US-ASCII &lt;td&gt; Windows-1252 &lt;td&gt;
+         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=#refsWin1252&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
+    &lt;tr&gt;&lt;td&gt; x-x-big5 &lt;td&gt; Big5 &lt;td&gt;
+         &lt;a href=#refsBIG5&gt;[BIG5]&lt;/a&gt; &lt;!-- XXX ? --&gt;
+   &lt;/table&gt;&lt;p class=note&gt;The requirement to treat certain encodings as other
+  encodings according to the table above is a willful violation of the
+  W3C Character Model specification. &lt;a href=#refsCHARMOD&gt;[CHARMOD]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;hr&gt;&lt;p&gt;User agents must not support the CESU-8, UTF-7, BOCU-1 and SCSU
+  encodings. &lt;a href=#refsCESU8&gt;[CESU8]&lt;/a&gt; &lt;a href=#refsUTF7&gt;[UTF7]&lt;/a&gt; &lt;a href=#refsBOCU1&gt;[BOCU1]&lt;/a&gt; &lt;a href=#refsSCSU&gt;[SCSU]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Support for encodings based on EBCDIC is not recommended. This
+  encoding is rarely used for publicly-facing Web content.&lt;/p&gt;
+
+  &lt;p&gt;Support for UTF-32 is not recommended. This encoding is rarely
+  used, and frequently misimplemented.&lt;/p&gt;
+
+  &lt;p class=note&gt;This specification does not make any attempt to
+  support EBCDIC-based encodings and UTF-32 in its algorithms; support
+  and use of these encodings can thus lead to unexpected behavior in
+  implementations of this specification.&lt;/p&gt;
+
+
+
+  &lt;h3 id=common-dom-interfaces&gt;&lt;span class=secno&gt;2.9 &lt;/span&gt;Common DOM interfaces&lt;/h3&gt;
+
+  &lt;h4 id=reflecting-content-attributes-in-dom-attributes&gt;&lt;span class=secno&gt;2.9.1 &lt;/span&gt;Reflecting content attributes in DOM attributes&lt;/h4&gt;
+
   &lt;p&gt;Some &lt;span title=&quot;DOM attribute&quot;&gt;DOM attributes&lt;/span&gt; are
   defined to &lt;dfn id=reflect&gt;reflect&lt;/dfn&gt; a particular &lt;span&gt;content
   attribute&lt;/span&gt;. This means that on getting, the DOM attribute
@@ -5673,7 +5753,7 @@
 
 
 
-  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.8.2 &lt;/span&gt;Collections&lt;/h4&gt;
+  &lt;h4 id=collections&gt;&lt;span class=secno&gt;2.9.2 &lt;/span&gt;Collections&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection-0&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#htmlformcontrolscollection-0&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt;, and
@@ -5704,7 +5784,7 @@
   object every time it is retrieved.&lt;/p&gt;
 
 
-  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.8.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
+  &lt;h5 id=htmlcollection&gt;&lt;span class=secno&gt;2.9.2.1 &lt;/span&gt;HTMLCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlcollection-0&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; interface represents a generic
   &lt;a href=#collections-0 title=collections&gt;collection&lt;/a&gt; of elements.&lt;/p&gt;
@@ -5755,7 +5835,7 @@
 
 
 
-  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.8.2.2 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
+  &lt;h5 id=htmlformcontrolscollection&gt;&lt;span class=secno&gt;2.9.2.2 &lt;/span&gt;HTMLFormControlsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmlformcontrolscollection-0&gt;HTMLFormControlsCollection&lt;/a&gt;&lt;/code&gt; interface represents
   a &lt;a href=#collections-0 title=collections&gt;collection&lt;/a&gt; of &lt;a href=#category-listed title=category-listed&gt;listed&lt;/a&gt; elements in &lt;code&gt;&lt;a href=#the-form-element&gt;form&lt;/a&gt;&lt;/code&gt;
@@ -5806,7 +5886,7 @@
 
   &lt;/ol&gt;&lt;!--
 <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C%21DOCTYPE%20html%3E...%0A%3Cform%20name%3D%22a%22%3E%3Cinput%20id%3D%22x%22%20name%3D%22y%22%3E%3Cinput%20name%3D%22x%22%20id%3D%22y%22%3E%3C/form%3E%0A%3Cscript%3E%0A%20%20var%20x%3B%0A%20%20w%28x%20%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20x%5B0%5D.parentNode.removeChild%28x%5B0%5D%29%3B%0A%20%20w%28x.length%29%3B%0A%20%20w%28x%20%3D%3D%20document.forms%5B%27a%27%5D%5B%27x%27%5D%29%3B%0A%3C/script%3E%0A</A>
---&gt;&lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.8.2.3 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
+--&gt;&lt;h5 id=htmloptionscollection&gt;&lt;span class=secno&gt;2.9.2.3 &lt;/span&gt;HTMLOptionsCollection&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#htmloptionscollection-0&gt;HTMLOptionsCollection&lt;/a&gt;&lt;/code&gt; interface represents a
   list of &lt;code&gt;&lt;a href=#the-option-element&gt;option&lt;/a&gt;&lt;/code&gt; elements. It is always rooted on a
@@ -5924,7 +6004,7 @@
    &lt;li&gt;&lt;p&gt;Remove &lt;var title=&quot;&quot;&gt;element&lt;/var&gt; from its parent
    node.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;&lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.8.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
+  &lt;/ol&gt;&lt;!-- see also <A HREF="http://ln.hixie.ch/?start=1161042744&amp;count=1">http://ln.hixie.ch/?start=1161042744&amp;count=1</A> --&gt;&lt;h4 id=domtokenlist&gt;&lt;span class=secno&gt;2.9.3 &lt;/span&gt;DOMTokenList&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domtokenlist-0&gt;DOMTokenList&lt;/a&gt;&lt;/code&gt; interface represents an interface
   to an underlying string that consists of an &lt;a href=#unordered-set-of-unique-space-separated-tokens&gt;unordered set of
@@ -6047,7 +6127,7 @@
   underlying string representation.&lt;/p&gt;
 
 
-  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.8.4 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
+  &lt;h4 id=safe-passing-of-structured-data&gt;&lt;span class=secno&gt;2.9.4 &lt;/span&gt;Safe passing of structured data&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is required to obtain a &lt;dfn id=structured-clone&gt;structured
   clone&lt;/dfn&gt; of an object, it must run the following algorithm, which
@@ -6130,7 +6210,7 @@
 
     &lt;/ol&gt;&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.8.5 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
+  &lt;/dl&gt;&lt;h4 id=domstringmap&gt;&lt;span class=secno&gt;2.9.5 &lt;/span&gt;DOMStringMap&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#domstringmap-0&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; interface represents a set of
   name-value pairs. When a &lt;code&gt;&lt;a href=#domstringmap-0&gt;DOMStringMap&lt;/a&gt;&lt;/code&gt; object is
@@ -6169,7 +6249,7 @@
   implemented for those languages.&lt;/p&gt;
 
 
-  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.8.6 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
+  &lt;h4 id=dom-feature-strings&gt;&lt;span class=secno&gt;2.9.6 &lt;/span&gt;DOM feature strings&lt;/h4&gt;
 
   &lt;p&gt;DOM3 Core defines mechanisms for checking for interface support,
   and for obtaining implementations of interfaces, using &lt;a href=<A HREF="http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures">http://www.w3.org/TR/DOM-Level-3-Core/core.html#DOMFeatures</A>&gt;feature
@@ -6200,7 +6280,7 @@
   not guaranteed that an implementation that supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;5.0&lt;/code&gt;&quot; also supports &quot;&lt;code title=&quot;&quot;&gt;HTML&lt;/code&gt;&quot; &quot;&lt;code&gt;2.0&lt;/code&gt;&quot;.&lt;/p&gt;
 
 
-  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.8.7 &lt;/span&gt;Exceptions&lt;/h4&gt;
+  &lt;h4 id=exceptions&gt;&lt;span class=secno&gt;2.9.7 &lt;/span&gt;Exceptions&lt;/h4&gt;
 
   &lt;p&gt;The following &lt;code&gt;DOMException&lt;/code&gt; codes are defined in DOM
   Core. &lt;a href=#refsDOMCORE&gt;[DOMCORE]&lt;/a&gt;&lt;/p&gt;
@@ -6232,7 +6312,7 @@
    &lt;li value=23&gt;&lt;dfn id=unavailable_script_err&gt;&lt;code&gt;UNAVAILABLE_SCRIPT_ERR&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt; &lt;!-- actually defined right here for now --&gt;
    &lt;li value=81&gt;&lt;dfn id=parse_err&gt;&lt;code&gt;PARSE_ERR&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt; &lt;!-- actually defined in dom3ls --&gt;
    &lt;li value=82&gt;&lt;dfn id=serialise_err&gt;&lt;code&gt;SERIALISE_ERR&lt;/code&gt;&lt;/dfn&gt;&lt;/li&gt; &lt;!-- actually defined in dom3ls --&gt;
-  &lt;/ol&gt;&lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.8.8 &lt;/span&gt;Garbage collection&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=garbage-collection&gt;&lt;span class=secno&gt;2.9.8 &lt;/span&gt;Garbage collection&lt;/h4&gt;
 
   &lt;p&gt;There is an &lt;dfn id=implied-strong-reference&gt;implied strong reference&lt;/dfn&gt; from any DOM
   attribute that returns a pre-existing object to that object.&lt;/p&gt;
@@ -48679,92 +48759,9 @@
   use for the input stream.&lt;/p&gt;
 
 
-  &lt;h5 id=character-encoding-requirements&gt;&lt;span class=secno&gt;8.2.2.2 &lt;/span&gt;Character encoding requirements&lt;/h5&gt;
 
-  &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
-  encodings, but may support more.&lt;/p&gt;
+  &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;8.2.2.2 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
 
-  &lt;p class=note&gt;It is not unusual for Web browsers to support dozens
-  if not upwards of a hundred distinct character encodings.&lt;/p&gt;
-
-  &lt;p&gt;User agents must support the preferred MIME name of every
-  character encoding they support that has a preferred MIME name, and
-  should support all the IANA-registered aliases. &lt;a href=#refsIANACHARSET&gt;[IANACHARSET]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;!-- XXX should all this be abstracted out so it can be used for
-  &lt;script charset=&quot;&quot;&gt; and &lt;form accept-charset=&quot;&quot;&gt;? Maybe move this
-  stuff and the 'character encodings' section of the terminology
-  section into its own infrastructure subsection? --&gt;
-
-  &lt;p&gt;When comparing a string specifying a character encoding with the
-  name or alias of a character encoding to determine if they are
-  equal, user agents must use the Charset Alias Matching rules defined
-  in Unicode Technical Standard #22. &lt;a href=#refsUTS22&gt;[UTS22]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXXrefs
-  <A HREF="http://unicode.org/reports/tr22/#Charset_Alias_Matching">http://unicode.org/reports/tr22/#Charset_Alias_Matching</A> --&gt;
-
-  &lt;p class=example&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
-  considered equivalent names.&lt;/p&gt;
-
-  &lt;p&gt;When a user agent would otherwise use an encoding given in the
-  first column of the following table, it must instead use the
-  encoding given in the cell in the second column of the same row. Any
-  bytes that are treated differently due to this encoding aliasing
-  must be considered &lt;a href=#parse-error title=&quot;parse error&quot;&gt;parse
-  errors&lt;/a&gt;.&lt;/p&gt;
-
-  &lt;table&gt;&lt;caption&gt;Character encoding overrides&lt;/caption&gt;
-   &lt;thead&gt;&lt;tr&gt;&lt;th&gt; Input encoding &lt;th&gt; Replacement encoding &lt;th&gt; References
-   &lt;tbody&gt;&lt;!-- how about EUC-JP? --&gt;&lt;tr&gt;&lt;td&gt; EUC-KR &lt;td&gt; Windows-949 &lt;td&gt;
-         &lt;a href=#refsEUCKR&gt;[EUCKR]&lt;/a&gt; &lt;!-- see reference for [EUC-KR] in RFC1557 --&gt;
-         &lt;a href=#refsWin949&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; GB2312 &lt;td&gt; GBK &lt;td&gt;
-         &lt;a href=#refsGB2312&gt;[GB2312]&lt;/a&gt;&lt;!-- XXX ? --&gt;
-         &lt;a href=#refsGBK&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; GB_2312-80 &lt;td&gt; GBK &lt;td&gt;
-         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=#refsGBK&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; ISO-8859-1 &lt;td&gt; Windows-1252 &lt;td&gt;
-         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=#refsWin1252&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; ISO-8859-9 &lt;td&gt; Windows-1254 &lt;td&gt;
-         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=#refsWin1254&gt;[WIN1254]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1254.htm">http://www.microsoft.com/globaldev/reference/sbcs/1254.htm</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; ISO-8859-11 &lt;td&gt; Windows-874 &lt;td&gt;
-         &lt;a href=#refsISO885911&gt;[ISO885911]&lt;/a&gt;&lt;!-- get reference from <A HREF="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263</A> --&gt;
-         &lt;a href=#refsWin874&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; KS_C_5601-1987 &lt;td&gt; Windows-949 &lt;td&gt;
-         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=#refsWin949&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; TIS-620 &lt;td&gt; Windows-874 &lt;td&gt;
-         &lt;a href=#refsTIS620&gt;[TIS620]&lt;/a&gt; &lt;!-- <A HREF="http://www.nectec.or.th/it-standards/std620/std620.htm">http://www.nectec.or.th/it-standards/std620/std620.htm</A> --&gt;
-         &lt;a href=#refsWin874&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; US-ASCII &lt;td&gt; Windows-1252 &lt;td&gt;
-         &lt;a href=#refsRFC1345&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=#refsWin1252&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
-    &lt;tr&gt;&lt;td&gt; x-x-big5 &lt;td&gt; Big5 &lt;td&gt;
-         &lt;a href=#refsBIG5&gt;[BIG5]&lt;/a&gt; &lt;!-- XXX ? --&gt;
-   &lt;/table&gt;&lt;p class=note&gt;The requirement to treat certain encodings as other
-  encodings according to the table above is a willful violation of the
-  W3C Character Model specification. &lt;a href=#refsCHARMOD&gt;[CHARMOD]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;User agents must not support the CESU-8, UTF-7, BOCU-1 and SCSU
-  encodings. &lt;a href=#refsCESU8&gt;[CESU8]&lt;/a&gt; &lt;a href=#refsUTF7&gt;[UTF7]&lt;/a&gt; &lt;a href=#refsBOCU1&gt;[BOCU1]&lt;/a&gt; &lt;a href=#refsSCSU&gt;[SCSU]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;Support for encodings based on EBCDIC is not recommended. This
-  encoding is rarely used for publicly-facing Web content.&lt;/p&gt;
-
-  &lt;p&gt;Support for UTF-32 is not recommended. This encoding is rarely
-  used, and frequently misimplemented.&lt;/p&gt;
-
-  &lt;p class=note&gt;This specification does not make any attempt to
-  support EBCDIC-based encodings and UTF-32 in its algorithms; support
-  and use of these encodings can thus lead to unexpected behavior in
-  implementations of this specification.&lt;/p&gt;
-
-
-
-  &lt;h5 id=preprocessing-the-input-stream&gt;&lt;span class=secno&gt;8.2.2.3 &lt;/span&gt;Preprocessing the input stream&lt;/h5&gt;
-
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
   converted to Unicode characters for the tokeniser, as described by
   the rules for that encoding, except that the leading U+FEFF BYTE
@@ -48782,6 +48779,10 @@
   (e.g. invalid UTF-8 byte sequences in a UTF-8 input stream) are
   errors that conformance checkers are expected to report.&lt;/p&gt;
 
+  &lt;p&gt;Any byte or sequences of bytes in the original byte stream that
+  is &lt;a href=#misinterpreted-for-compatibility&gt;misinterpreted for compatibility&lt;/a&gt; is a &lt;a href=#parse-error&gt;parse
+  error&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
   any are present.&lt;/p&gt;
 
@@ -48834,7 +48835,7 @@
   the stream, but rather the lack of any further characters.&lt;/p&gt;
 
 
-  &lt;h5 id=changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;8.2.2.4 &lt;/span&gt;Changing the encoding while parsing&lt;/h5&gt;
+  &lt;h5 id=changing-the-encoding-while-parsing&gt;&lt;span class=secno&gt;8.2.2.3 &lt;/span&gt;Changing the encoding while parsing&lt;/h5&gt;
 
   &lt;p&gt;When the parser requires the user agent to &lt;dfn id=change-the-encoding&gt;change the
   encoding&lt;/dfn&gt;, it must run the following steps. This might happen

Modified: source
===================================================================
--- source	2009-02-19 10:20:04 UTC (rev 2841)
+++ source	2009-02-19 11:04:54 UTC (rev 2842)
@@ -5335,6 +5335,102 @@
 
 
 
+  &lt;h3&gt;Character encodings&lt;/h3&gt;
+
+  &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
+  encodings, but may support more.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;It is not unusual for Web browsers to support dozens
+  if not upwards of a hundred distinct character encodings.&lt;/p&gt;
+
+  &lt;p&gt;User agents must support the preferred MIME name of every
+  character encoding they support that has a preferred MIME name, and
+  should support all the IANA-registered aliases. &lt;a
+  href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;When comparing a string specifying a character encoding with the
+  name or alias of a character encoding to determine if they are
+  equal, user agents must use the Charset Alias Matching rules defined
+  in Unicode Technical Standard #22. &lt;a
+  href=&quot;#refsUTS22&quot;&gt;[UTS22]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXXrefs
+  <A HREF="http://unicode.org/reports/tr22/#Charset_Alias_Matching">http://unicode.org/reports/tr22/#Charset_Alias_Matching</A> --&gt;
+
+  &lt;p class=&quot;example&quot;&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
+  considered equivalent names.&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;When a user agent would otherwise use an encoding given in the
+  first column of the following table to either convert content to
+  Unicode characters or convert Unicode characters to bytes, it must
+  instead use the encoding given in the cell in the second column of
+  the same row. When a byte or sequence of bytes is treated
+  differently due to this encoding aliasing, it is said to have been
+  &lt;dfn&gt;misinterpreted for compatibility&lt;/dfn&gt;.&lt;/p&gt;
+
+  &lt;table&gt;
+   &lt;caption&gt;Character encoding overrides&lt;/caption&gt;
+   &lt;thead&gt;
+    &lt;tr&gt; &lt;th&gt; Input encoding &lt;th&gt; Replacement encoding &lt;th&gt; References
+   &lt;tbody&gt;
+    &lt;!-- how about EUC-JP? --&gt;
+    &lt;tr&gt; &lt;td&gt; EUC-KR &lt;td&gt; Windows-949 &lt;td&gt;
+         &lt;a href=&quot;#refsEUCKR&quot;&gt;[EUCKR]&lt;/a&gt; &lt;!-- see reference for [EUC-KR] in RFC1557 --&gt;
+         &lt;a href=&quot;#refsWin949&quot;&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; GB2312 &lt;td&gt; GBK &lt;td&gt;
+         &lt;a href=&quot;#refsGB2312&quot;&gt;[GB2312]&lt;/a&gt;&lt;!-- XXX ? --&gt;
+         &lt;a href=&quot;#refsGBK&quot;&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; GB_2312-80 &lt;td&gt; GBK &lt;td&gt;
+         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=&quot;#refsGBK&quot;&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; ISO-8859-1 &lt;td&gt; Windows-1252 &lt;td&gt;
+         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=&quot;#refsWin1252&quot;&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; ISO-8859-9 &lt;td&gt; Windows-1254 &lt;td&gt;
+         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=&quot;#refsWin1254&quot;&gt;[WIN1254]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1254.htm">http://www.microsoft.com/globaldev/reference/sbcs/1254.htm</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; ISO-8859-11 &lt;td&gt; Windows-874 &lt;td&gt;
+         &lt;a href=&quot;#refsISO885911&quot;&gt;[ISO885911]&lt;/a&gt;&lt;!-- get reference from <A HREF="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263</A> --&gt;
+         &lt;a href=&quot;#refsWin874&quot;&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; KS_C_5601-1987 &lt;td&gt; Windows-949 &lt;td&gt;
+         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=&quot;#refsWin949&quot;&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; TIS-620 &lt;td&gt; Windows-874 &lt;td&gt;
+         &lt;a href=&quot;#refsTIS620&quot;&gt;[TIS620]&lt;/a&gt; &lt;!-- <A HREF="http://www.nectec.or.th/it-standards/std620/std620.htm">http://www.nectec.or.th/it-standards/std620/std620.htm</A> --&gt;
+         &lt;a href=&quot;#refsWin874&quot;&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; US-ASCII &lt;td&gt; Windows-1252 &lt;td&gt;
+         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
+         &lt;a href=&quot;#refsWin1252&quot;&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
+    &lt;tr&gt; &lt;td&gt; x-x-big5 &lt;td&gt; Big5 &lt;td&gt;
+         &lt;a href=&quot;#refsBIG5&quot;&gt;[BIG5]&lt;/a&gt; &lt;!-- XXX ? --&gt;
+   &lt;/tbody&gt;
+  &lt;/table&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The requirement to treat certain encodings as other
+  encodings according to the table above is a willful violation of the
+  W3C Character Model specification. &lt;a
+  href=&quot;#refsCHARMOD&quot;&gt;[CHARMOD]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;hr&gt;
+
+  &lt;p&gt;User agents must not support the CESU-8, UTF-7, BOCU-1 and SCSU
+  encodings. &lt;a href=&quot;#refsCESU8&quot;&gt;[CESU8]&lt;/a&gt; &lt;a
+  href=&quot;#refsUTF7&quot;&gt;[UTF7]&lt;/a&gt; &lt;a href=&quot;#refsBOCU1&quot;&gt;[BOCU1]&lt;/a&gt; &lt;a
+  href=&quot;#refsSCSU&quot;&gt;[SCSU]&lt;/a&gt;&lt;/p&gt;
+
+  &lt;p&gt;Support for encodings based on EBCDIC is not recommended. This
+  encoding is rarely used for publicly-facing Web content.&lt;/p&gt;
+
+  &lt;p&gt;Support for UTF-32 is not recommended. This encoding is rarely
+  used, and frequently misimplemented.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;This specification does not make any attempt to
+  support EBCDIC-based encodings and UTF-32 in its algorithms; support
+  and use of these encodings can thus lead to unexpected behavior in
+  implementations of this specification.&lt;/p&gt;
+
+
+
   &lt;h3&gt;Common DOM interfaces&lt;/h3&gt;
 
   &lt;h4&gt;Reflecting content attributes in DOM attributes&lt;/h4&gt;
@@ -55624,102 +55720,7 @@
   use for the input stream.&lt;/p&gt;
 
 
-  &lt;h5&gt;Character encoding requirements&lt;/h5&gt;
 
-  &lt;p&gt;User agents must at a minimum support the UTF-8 and Windows-1252
-  encodings, but may support more.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;It is not unusual for Web browsers to support dozens
-  if not upwards of a hundred distinct character encodings.&lt;/p&gt;
-
-  &lt;p&gt;User agents must support the preferred MIME name of every
-  character encoding they support that has a preferred MIME name, and
-  should support all the IANA-registered aliases. &lt;a
-  href=&quot;#refsIANACHARSET&quot;&gt;[IANACHARSET]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;!-- XXX should all this be abstracted out so it can be used for
-  &lt;script charset=&quot;&quot;&gt; and &lt;form accept-charset=&quot;&quot;&gt;? Maybe move this
-  stuff and the 'character encodings' section of the terminology
-  section into its own infrastructure subsection? --&gt;
-
-  &lt;p&gt;When comparing a string specifying a character encoding with the
-  name or alias of a character encoding to determine if they are
-  equal, user agents must use the Charset Alias Matching rules defined
-  in Unicode Technical Standard #22. &lt;a
-  href=&quot;#refsUTS22&quot;&gt;[UTS22]&lt;/a&gt;&lt;/p&gt; &lt;!-- XXXrefs
-  <A HREF="http://unicode.org/reports/tr22/#Charset_Alias_Matching">http://unicode.org/reports/tr22/#Charset_Alias_Matching</A> --&gt;
-
-  &lt;p class=&quot;example&quot;&gt;For instance, &quot;GB_2312-80&quot; and &quot;g.b.2312(80)&quot; are
-  considered equivalent names.&lt;/p&gt;
-
-  &lt;p&gt;When a user agent would otherwise use an encoding given in the
-  first column of the following table, it must instead use the
-  encoding given in the cell in the second column of the same row. Any
-  bytes that are treated differently due to this encoding aliasing
-  must be considered &lt;span title=&quot;parse error&quot;&gt;parse
-  errors&lt;/span&gt;.&lt;/p&gt;
-
-  &lt;table&gt;
-   &lt;caption&gt;Character encoding overrides&lt;/caption&gt;
-   &lt;thead&gt;
-    &lt;tr&gt; &lt;th&gt; Input encoding &lt;th&gt; Replacement encoding &lt;th&gt; References
-   &lt;tbody&gt;
-    &lt;!-- how about EUC-JP? --&gt;
-    &lt;tr&gt; &lt;td&gt; EUC-KR &lt;td&gt; Windows-949 &lt;td&gt;
-         &lt;a href=&quot;#refsEUCKR&quot;&gt;[EUCKR]&lt;/a&gt; &lt;!-- see reference for [EUC-KR] in RFC1557 --&gt;
-         &lt;a href=&quot;#refsWin949&quot;&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; GB2312 &lt;td&gt; GBK &lt;td&gt;
-         &lt;a href=&quot;#refsGB2312&quot;&gt;[GB2312]&lt;/a&gt;&lt;!-- XXX ? --&gt;
-         &lt;a href=&quot;#refsGBK&quot;&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; GB_2312-80 &lt;td&gt; GBK &lt;td&gt;
-         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=&quot;#refsGBK&quot;&gt;[GBK]&lt;/a&gt;&lt;!-- <A HREF="http://www.iana.org/assignments/charset-reg/GBK">http://www.iana.org/assignments/charset-reg/GBK</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; ISO-8859-1 &lt;td&gt; Windows-1252 &lt;td&gt;
-         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=&quot;#refsWin1252&quot;&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; ISO-8859-9 &lt;td&gt; Windows-1254 &lt;td&gt;
-         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=&quot;#refsWin1254&quot;&gt;[WIN1254]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1254.htm">http://www.microsoft.com/globaldev/reference/sbcs/1254.htm</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; ISO-8859-11 &lt;td&gt; Windows-874 &lt;td&gt;
-         &lt;a href=&quot;#refsISO885911&quot;&gt;[ISO885911]&lt;/a&gt;&lt;!-- get reference from <A HREF="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263">http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm?csnumber=28263</A> --&gt;
-         &lt;a href=&quot;#refsWin874&quot;&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; KS_C_5601-1987 &lt;td&gt; Windows-949 &lt;td&gt;
-         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=&quot;#refsWin949&quot;&gt;[WIN949]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/dbcs/949.mspx">http://www.microsoft.com/globaldev/reference/dbcs/949.mspx</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; TIS-620 &lt;td&gt; Windows-874 &lt;td&gt;
-         &lt;a href=&quot;#refsTIS620&quot;&gt;[TIS620]&lt;/a&gt; &lt;!-- <A HREF="http://www.nectec.or.th/it-standards/std620/std620.htm">http://www.nectec.or.th/it-standards/std620/std620.htm</A> --&gt;
-         &lt;a href=&quot;#refsWin874&quot;&gt;[WIN874]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/874.mspx">http://www.microsoft.com/globaldev/reference/sbcs/874.mspx</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; US-ASCII &lt;td&gt; Windows-1252 &lt;td&gt;
-         &lt;a href=&quot;#refsRFC1345&quot;&gt;[RFC1345]&lt;/a&gt;&lt;!-- XXX consider more direct reference? --&gt;
-         &lt;a href=&quot;#refsWin1252&quot;&gt;[WIN1252]&lt;/a&gt;&lt;!-- <A HREF="http://www.microsoft.com/globaldev/reference/sbcs/1252.htm">http://www.microsoft.com/globaldev/reference/sbcs/1252.htm</A> --&gt;
-    &lt;tr&gt; &lt;td&gt; x-x-big5 &lt;td&gt; Big5 &lt;td&gt;
-         &lt;a href=&quot;#refsBIG5&quot;&gt;[BIG5]&lt;/a&gt; &lt;!-- XXX ? --&gt;
-   &lt;/tbody&gt;
-  &lt;/table&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The requirement to treat certain encodings as other
-  encodings according to the table above is a willful violation of the
-  W3C Character Model specification. &lt;a
-  href=&quot;#refsCHARMOD&quot;&gt;[CHARMOD]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;User agents must not support the CESU-8, UTF-7, BOCU-1 and SCSU
-  encodings. &lt;a href=&quot;#refsCESU8&quot;&gt;[CESU8]&lt;/a&gt; &lt;a
-  href=&quot;#refsUTF7&quot;&gt;[UTF7]&lt;/a&gt; &lt;a href=&quot;#refsBOCU1&quot;&gt;[BOCU1]&lt;/a&gt; &lt;a
-  href=&quot;#refsSCSU&quot;&gt;[SCSU]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;p&gt;Support for encodings based on EBCDIC is not recommended. This
-  encoding is rarely used for publicly-facing Web content.&lt;/p&gt;
-
-  &lt;p&gt;Support for UTF-32 is not recommended. This encoding is rarely
-  used, and frequently misimplemented.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;This specification does not make any attempt to
-  support EBCDIC-based encodings and UTF-32 in its algorithms; support
-  and use of these encodings can thus lead to unexpected behavior in
-  implementations of this specification.&lt;/p&gt;
-
-
-
   &lt;h5&gt;Preprocessing the input stream&lt;/h5&gt;
 
   &lt;p&gt;Given an encoding, the bytes in the input stream must be
@@ -55739,6 +55740,10 @@
   (e.g. invalid UTF-8 byte sequences in a UTF-8 input stream) are
   errors that conformance checkers are expected to report.&lt;/p&gt;
 
+  &lt;p&gt;Any byte or sequences of bytes in the original byte stream that
+  is &lt;span&gt;misinterpreted for compatibility&lt;/span&gt; is a &lt;span&gt;parse
+  error&lt;/span&gt;.&lt;/p&gt;
+
   &lt;p&gt;One leading U+FEFF BYTE ORDER MARK character must be ignored if
   any are present.&lt;/p&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009725.html">[html5] r2841 - [e] (0) remove XXX markers for canvas v4 notes,	since they probably won't make t [...]
</A></li>
	<LI>Next message: <A HREF="009727.html">[html5] r2843 - [e] (0) Flesh out minor point about text nodes.	Remove redundant internal note.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9726">[ date ]</a>
              <a href="thread.html#9726">[ thread ]</a>
              <a href="subject.html#9726">[ subject ]</a>
              <a href="author.html#9726">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
