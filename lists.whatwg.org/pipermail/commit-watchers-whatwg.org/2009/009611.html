<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2727 - [giow] (2) Change from the 'prevent scripts from	running when documents are acti [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2727%20-%20%5Bgiow%5D%20%282%29%20Change%20from%20the%20%27prevent%20scripts%20from%0A%09running%20when%20documents%20are%20acti%20%5B...%5D&In-Reply-To=%3C20090131102210.354F9138A05%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009610.html">
   <LINK REL="Next"  HREF="009612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2727 - [giow] (2) Change from the 'prevent scripts from	running when documents are acti [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2727%20-%20%5Bgiow%5D%20%282%29%20Change%20from%20the%20%27prevent%20scripts%20from%0A%09running%20when%20documents%20are%20acti%20%5B...%5D&In-Reply-To=%3C20090131102210.354F9138A05%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2727 - [giow] (2) Change from the 'prevent scripts from	running when documents are acti [...]">whatwg at whatwg.org
       </A><BR>
    <I>Sat Jan 31 02:22:10 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009610.html">[html5] r2726 - [e] (0) oops
</A></li>
        <LI>Next message: <A HREF="009612.html">[html5] r2728 - [e] (0) Tweak wording in table header algorithm.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9611">[ date ]</a>
              <a href="thread.html#9611">[ thread ]</a>
              <a href="subject.html#9611">[ subject ]</a>
              <a href="author.html#9611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-01-31 02:22:09 -0800 (Sat, 31 Jan 2009)
New Revision: 2727

Modified:
   index
   source
Log:
[giow] (2) Change from the 'prevent scripts from running when documents are active' model to the 'split window' model, as it has better performance characteristics.

Modified: index
===================================================================
--- index	2009-01-30 08:39:28 UTC (rev 2726)
+++ index	2009-01-31 10:22:09 UTC (rev 2727)
@@ -34,7 +34,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 30 January 2009&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 31 January 2009&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -659,157 +659,158 @@
      &lt;li&gt;&lt;a href=#security-1&gt;&lt;span class=secno&gt;5.1.4 &lt;/span&gt;Security&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#groupings-of-browsing-contexts&gt;&lt;span class=secno&gt;5.1.5 &lt;/span&gt;Groupings of browsing contexts&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#browsing-context-names&gt;&lt;span class=secno&gt;5.1.6 &lt;/span&gt;Browsing context names&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#the-default-view&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The default view&lt;/a&gt;
+   &lt;li&gt;&lt;a href=#the-windowproxy-object&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The &lt;code&gt;WindowProxy&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#the-window-object&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;The &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#security-2&gt;&lt;span class=secno&gt;5.2.1 &lt;/span&gt;Security&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#apis-for-creating-and-navigating-browsing-contexts-by-name&gt;&lt;span class=secno&gt;5.2.2 &lt;/span&gt;APIs for creating and navigating browsing contexts by name&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#accessing-other-browsing-contexts&gt;&lt;span class=secno&gt;5.2.3 &lt;/span&gt;Accessing other browsing contexts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#garbage-collection-and-browsing-contexts&gt;&lt;span class=secno&gt;5.2.4 &lt;/span&gt;Garbage collection and browsing contexts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#named-access-on-the-window-object&gt;&lt;span class=secno&gt;5.2.5 &lt;/span&gt;Named access on the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#browser-interface-elements&gt;&lt;span class=secno&gt;5.2.6 &lt;/span&gt;Browser interface elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#origin&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Origin&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#security-2&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Security&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#apis-for-creating-and-navigating-browsing-contexts-by-name&gt;&lt;span class=secno&gt;5.3.2 &lt;/span&gt;APIs for creating and navigating browsing contexts by name&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#accessing-other-browsing-contexts&gt;&lt;span class=secno&gt;5.3.3 &lt;/span&gt;Accessing other browsing contexts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#garbage-collection-and-browsing-contexts&gt;&lt;span class=secno&gt;5.3.4 &lt;/span&gt;Garbage collection and browsing contexts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#named-access-on-the-window-object&gt;&lt;span class=secno&gt;5.3.5 &lt;/span&gt;Named access on the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#browser-interface-elements&gt;&lt;span class=secno&gt;5.3.6 &lt;/span&gt;Browser interface elements&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#origin&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Origin&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#relaxing-the-same-origin-restriction&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Relaxing the same-origin restriction&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#scripting&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scripting&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#relaxing-the-same-origin-restriction&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Relaxing the same-origin restriction&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#scripting&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;Scripting&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-0&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;Enabling and disabling scripting&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#processing-model-1&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;Processing model&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-0&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Enabling and disabling scripting&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#processing-model-1&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Processing model&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;5.4.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;5.4.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;5.4.3.3 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;5.4.3.4 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;5.4.4 &lt;/span&gt;Event loops&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#definitions-0&gt;&lt;span class=secno&gt;5.5.3.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#calling-scripts&gt;&lt;span class=secno&gt;5.5.3.2 &lt;/span&gt;Calling scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#creating-scripts&gt;&lt;span class=secno&gt;5.5.3.3 &lt;/span&gt;Creating scripts&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#killing-scripts&gt;&lt;span class=secno&gt;5.5.3.4 &lt;/span&gt;Killing scripts&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#event-loops&gt;&lt;span class=secno&gt;5.5.4 &lt;/span&gt;Event loops&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;5.4.4.1 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;5.4.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;5.4.6 &lt;/span&gt;Events&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#generic-task-sources&gt;&lt;span class=secno&gt;5.5.4.1 &lt;/span&gt;Generic task sources&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#javascript-protocol&gt;&lt;span class=secno&gt;5.5.5 &lt;/span&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#events&gt;&lt;span class=secno&gt;5.5.6 &lt;/span&gt;Events&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;5.4.6.1 &lt;/span&gt;Event handler attributes&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-handler-attributes-on-elements-and-on-window-objects&gt;&lt;span class=secno&gt;5.4.6.2 &lt;/span&gt;Event handler attributes on elements and on &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;5.4.6.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;5.4.6.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;5.4.6.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#user-prompts&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;User prompts&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-handler-attributes&gt;&lt;span class=secno&gt;5.5.6.1 &lt;/span&gt;Event handler attributes&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-handler-attributes-on-elements-and-on-window-objects&gt;&lt;span class=secno&gt;5.5.6.2 &lt;/span&gt;Event handler attributes on elements and on &lt;code&gt;Window&lt;/code&gt; objects&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#event-firing&gt;&lt;span class=secno&gt;5.5.6.3 &lt;/span&gt;Event firing&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#events-and-the-window-object&gt;&lt;span class=secno&gt;5.5.6.4 &lt;/span&gt;Events and the &lt;code&gt;Window&lt;/code&gt; object&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#runtime-script-errors&gt;&lt;span class=secno&gt;5.5.6.5 &lt;/span&gt;Runtime script errors&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#user-prompts&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;User prompts&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#simple-dialogs&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Simple dialogs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#printing&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Printing&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dialogs-implemented-using-separate-documents&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Dialogs implemented using separate documents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#system-state-and-capabilities&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;System state and capabilities&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#simple-dialogs&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Simple dialogs&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#printing&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;Printing&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dialogs-implemented-using-separate-documents&gt;&lt;span class=secno&gt;5.6.3 &lt;/span&gt;Dialogs implemented using separate documents&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#system-state-and-capabilities&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;System state and capabilities&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#client-identification&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Client identification&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;Custom protocol and content handlers&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#client-identification&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;Client identification&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#custom-handlers&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Custom protocol and content handlers&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;5.6.2.1 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;5.6.2.2 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#offline&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;Offline Web applications&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#security-and-privacy&gt;&lt;span class=secno&gt;5.7.2.1 &lt;/span&gt;Security and privacy&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#sample-handler-impl&gt;&lt;span class=secno&gt;5.7.2.2 &lt;/span&gt;Sample user interface&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#offline&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Offline Web applications&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-1&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#appcache&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Application caches&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#manifests&gt;&lt;span class=secno&gt;5.7.3 &lt;/span&gt;The cache manifest syntax&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#introduction-1&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#appcache&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;Application caches&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#manifests&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;The cache manifest syntax&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#a-sample-manifest&gt;&lt;span class=secno&gt;5.7.3.1 &lt;/span&gt;A sample manifest&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#writing-cache-manifests&gt;&lt;span class=secno&gt;5.7.3.2 &lt;/span&gt;Writing cache manifests&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-cache-manifests&gt;&lt;span class=secno&gt;5.7.3.3 &lt;/span&gt;Parsing cache manifests&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#updating-an-application-cache&gt;&lt;span class=secno&gt;5.7.4 &lt;/span&gt;Updating an application cache&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#matching-a-fallback-namespace&gt;&lt;span class=secno&gt;5.7.5 &lt;/span&gt;Matching a fallback namespace&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-application-cache-selection-algorithm&gt;&lt;span class=secno&gt;5.7.6 &lt;/span&gt;The application cache selection algorithm&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#a-sample-manifest&gt;&lt;span class=secno&gt;5.8.3.1 &lt;/span&gt;A sample manifest&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#writing-cache-manifests&gt;&lt;span class=secno&gt;5.8.3.2 &lt;/span&gt;Writing cache manifests&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-cache-manifests&gt;&lt;span class=secno&gt;5.8.3.3 &lt;/span&gt;Parsing cache manifests&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#updating-an-application-cache&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;Updating an application cache&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#matching-a-fallback-namespace&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;Matching a fallback namespace&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-application-cache-selection-algorithm&gt;&lt;span class=secno&gt;5.8.6 &lt;/span&gt;The application cache selection algorithm&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#changesToNetworkingModel&gt;&lt;span class=secno&gt;5.7.6.1 &lt;/span&gt;Changes to the networking model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#application-cache-api&gt;&lt;span class=secno&gt;5.7.7 &lt;/span&gt;Application cache API&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#browser-state&gt;&lt;span class=secno&gt;5.7.8 &lt;/span&gt;Browser state&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#history&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Session history and navigation&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#changesToNetworkingModel&gt;&lt;span class=secno&gt;5.8.6.1 &lt;/span&gt;Changes to the networking model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#application-cache-api&gt;&lt;span class=secno&gt;5.8.7 &lt;/span&gt;Application cache API&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#browser-state&gt;&lt;span class=secno&gt;5.8.8 &lt;/span&gt;Browser state&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#history&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Session history and navigation&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#the-session-history-of-browsing-contexts&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;The session history of browsing contexts&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-history-interface&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The &lt;code&gt;History&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#activating-state-object-entries&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;Activating state object entries&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-location-interface&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;The &lt;code&gt;Location&lt;/code&gt; interface&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#the-session-history-of-browsing-contexts&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;The session history of browsing contexts&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-history-interface&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;The &lt;code&gt;History&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#activating-state-object-entries&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;Activating state object entries&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-location-interface&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;The &lt;code&gt;Location&lt;/code&gt; interface&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#security-3&gt;&lt;span class=secno&gt;5.8.4.1 &lt;/span&gt;Security&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#history-notes&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;Implementation notes for session history&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#browsing-the-web&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Browsing the Web&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#security-3&gt;&lt;span class=secno&gt;5.9.4.1 &lt;/span&gt;Security&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#history-notes&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;Implementation notes for session history&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#browsing-the-web&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Browsing the Web&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#navigating-across-documents&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;Navigating across documents&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-html&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;Page load processing model for HTML files&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-xml&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;Page load processing model for XML files&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-text&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;Page load processing model for text files&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-image&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;Page load processing model for images&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-plugin&gt;&lt;span class=secno&gt;5.9.6 &lt;/span&gt;Page load processing model for content that uses plugins&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#read-ua-inline&gt;&lt;span class=secno&gt;5.9.7 &lt;/span&gt;Page load processing model for inline content that doesn't have a DOM&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#scroll-to-fragid&gt;&lt;span class=secno&gt;5.9.8 &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#history-traversal&gt;&lt;span class=secno&gt;5.9.9 &lt;/span&gt;History traversal&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#unloading-documents&gt;&lt;span class=secno&gt;5.9.10 &lt;/span&gt;Unloading documents&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#navigating-across-documents&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Navigating across documents&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-html&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;Page load processing model for HTML files&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-xml&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;Page load processing model for XML files&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-text&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;Page load processing model for text files&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-image&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;Page load processing model for images&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-plugin&gt;&lt;span class=secno&gt;5.10.6 &lt;/span&gt;Page load processing model for content that uses plugins&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#read-ua-inline&gt;&lt;span class=secno&gt;5.10.7 &lt;/span&gt;Page load processing model for inline content that doesn't have a DOM&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#scroll-to-fragid&gt;&lt;span class=secno&gt;5.10.8 &lt;/span&gt;Navigating to a fragment identifier&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#history-traversal&gt;&lt;span class=secno&gt;5.10.9 &lt;/span&gt;History traversal&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#unloading-documents&gt;&lt;span class=secno&gt;5.10.10 &lt;/span&gt;Unloading documents&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#event-definition&gt;&lt;span class=secno&gt;5.9.10.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#structured-client-side-storage&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Structured client-side storage&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#event-definition&gt;&lt;span class=secno&gt;5.10.10.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#structured-client-side-storage&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Structured client-side storage&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#storage&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Storing name/value pairs&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#storage&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Storing name/value pairs&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#introduction-2&gt;&lt;span class=secno&gt;5.10.1.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-storage-interface&gt;&lt;span class=secno&gt;5.10.1.2 &lt;/span&gt;The &lt;code&gt;Storage&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.10.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;sessionStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-localstorage-attribute&gt;&lt;span class=secno&gt;5.10.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-storage-event&gt;&lt;span class=secno&gt;5.10.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;storage&lt;/code&gt; event&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#introduction-2&gt;&lt;span class=secno&gt;5.11.1.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-storage-interface&gt;&lt;span class=secno&gt;5.11.1.2 &lt;/span&gt;The &lt;code&gt;Storage&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;sessionStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-localstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;localStorage&lt;/code&gt; attribute&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-storage-event&gt;&lt;span class=secno&gt;5.11.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;storage&lt;/code&gt; event&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#event-definition-0&gt;&lt;span class=secno&gt;5.10.1.5.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#threads&gt;&lt;span class=secno&gt;5.10.1.6 &lt;/span&gt;Threads&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#sql&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;Database storage&lt;/a&gt;
+         &lt;li&gt;&lt;a href=#event-definition-0&gt;&lt;span class=secno&gt;5.11.1.5.1 &lt;/span&gt;Event definition&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#threads&gt;&lt;span class=secno&gt;5.11.1.6 &lt;/span&gt;Threads&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#sql&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Database storage&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;5.10.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#databases&gt;&lt;span class=secno&gt;5.10.2.2 &lt;/span&gt;Databases&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#executing-sql-statements&gt;&lt;span class=secno&gt;5.10.2.3 &lt;/span&gt;Executing SQL statements&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#database-query-results&gt;&lt;span class=secno&gt;5.10.2.4 &lt;/span&gt;Database query results&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#errors&gt;&lt;span class=secno&gt;5.10.2.5 &lt;/span&gt;Errors&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;5.10.2.6 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#disk-space&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;Disk space&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#privacy&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;Privacy&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#introduction-3&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#databases&gt;&lt;span class=secno&gt;5.11.2.2 &lt;/span&gt;Databases&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#executing-sql-statements&gt;&lt;span class=secno&gt;5.11.2.3 &lt;/span&gt;Executing SQL statements&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#database-query-results&gt;&lt;span class=secno&gt;5.11.2.4 &lt;/span&gt;Database query results&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#errors&gt;&lt;span class=secno&gt;5.11.2.5 &lt;/span&gt;Errors&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#processing-model-2&gt;&lt;span class=secno&gt;5.11.2.6 &lt;/span&gt;Processing model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#disk-space&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Disk space&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#privacy&gt;&lt;span class=secno&gt;5.11.4 &lt;/span&gt;Privacy&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#user-tracking&gt;&lt;span class=secno&gt;5.10.4.1 &lt;/span&gt;User tracking&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cookie-resurrection&gt;&lt;span class=secno&gt;5.10.4.2 &lt;/span&gt;Cookie resurrection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#security-4&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;Security&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#user-tracking&gt;&lt;span class=secno&gt;5.11.4.1 &lt;/span&gt;User tracking&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cookie-resurrection&gt;&lt;span class=secno&gt;5.11.4.2 &lt;/span&gt;Cookie resurrection&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#security-4&gt;&lt;span class=secno&gt;5.11.5 &lt;/span&gt;Security&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.10.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#cross-directory-attacks&gt;&lt;span class=secno&gt;5.10.5.2 &lt;/span&gt;Cross-directory attacks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#implementation-risks&gt;&lt;span class=secno&gt;5.10.5.3 &lt;/span&gt;Implementation risks&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sql-and-user-agents&gt;&lt;span class=secno&gt;5.10.5.4 &lt;/span&gt;SQL and user agents&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sql-injection&gt;&lt;span class=secno&gt;5.10.5.5 &lt;/span&gt;SQL injection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
-   &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.11.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#cross-directory-attacks&gt;&lt;span class=secno&gt;5.11.5.2 &lt;/span&gt;Cross-directory attacks&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#implementation-risks&gt;&lt;span class=secno&gt;5.11.5.3 &lt;/span&gt;Implementation risks&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#sql-and-user-agents&gt;&lt;span class=secno&gt;5.11.5.4 &lt;/span&gt;SQL and user agents&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#sql-injection&gt;&lt;span class=secno&gt;5.11.5.5 &lt;/span&gt;SQL injection&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#links&gt;&lt;span class=secno&gt;5.12 &lt;/span&gt;Links&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#following-hyperlinks&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Following hyperlinks&lt;/a&gt;
+     &lt;li&gt;&lt;a href=#hyperlink-elements&gt;&lt;span class=secno&gt;5.12.1 &lt;/span&gt;Hyperlink elements&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#following-hyperlinks&gt;&lt;span class=secno&gt;5.12.2 &lt;/span&gt;Following hyperlinks&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#hyperlink-auditing&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Hyperlink auditing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#linkTypes&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link types&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#hyperlink-auditing&gt;&lt;span class=secno&gt;5.12.2.1 &lt;/span&gt;Hyperlink auditing&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#linkTypes&gt;&lt;span class=secno&gt;5.12.3 &lt;/span&gt;Link types&lt;/a&gt;
       &lt;ol&gt;
-       &lt;li&gt;&lt;a href=#link-type-alternate&gt;&lt;span class=secno&gt;5.11.3.1 &lt;/span&gt;Link type &quot;&lt;code&gt;alternate&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-archives&gt;&lt;span class=secno&gt;5.11.3.2 &lt;/span&gt;Link type &quot;&lt;code&gt;archives&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-author&gt;&lt;span class=secno&gt;5.11.3.3 &lt;/span&gt;Link type &quot;&lt;code&gt;author&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-bookmark&gt;&lt;span class=secno&gt;5.11.3.4 &lt;/span&gt;Link type &quot;&lt;code&gt;bookmark&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-external&gt;&lt;span class=secno&gt;5.11.3.5 &lt;/span&gt;Link type &quot;&lt;code&gt;external&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-feed&gt;&lt;span class=secno&gt;5.11.3.6 &lt;/span&gt;Link type &quot;&lt;code&gt;feed&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-help&gt;&lt;span class=secno&gt;5.11.3.7 &lt;/span&gt;Link type &quot;&lt;code&gt;help&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#rel-icon&gt;&lt;span class=secno&gt;5.11.3.8 &lt;/span&gt;Link type &quot;&lt;code&gt;icon&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-license&gt;&lt;span class=secno&gt;5.11.3.9 &lt;/span&gt;Link type &quot;&lt;code&gt;license&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-nofollow&gt;&lt;span class=secno&gt;5.11.3.10 &lt;/span&gt;Link type &quot;&lt;code&gt;nofollow&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-noreferrer&gt;&lt;span class=secno&gt;5.11.3.11 &lt;/span&gt;Link type &quot;&lt;code&gt;noreferrer&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-pingback&gt;&lt;span class=secno&gt;5.11.3.12 &lt;/span&gt;Link type &quot;&lt;code&gt;pingback&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-prefetch&gt;&lt;span class=secno&gt;5.11.3.13 &lt;/span&gt;Link type &quot;&lt;code&gt;prefetch&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-search&gt;&lt;span class=secno&gt;5.11.3.14 &lt;/span&gt;Link type &quot;&lt;code&gt;search&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-stylesheet&gt;&lt;span class=secno&gt;5.11.3.15 &lt;/span&gt;Link type &quot;&lt;code&gt;stylesheet&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-sidebar&gt;&lt;span class=secno&gt;5.11.3.16 &lt;/span&gt;Link type &quot;&lt;code&gt;sidebar&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#link-type-tag&gt;&lt;span class=secno&gt;5.11.3.17 &lt;/span&gt;Link type &quot;&lt;code&gt;tag&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#hierarchical-link-types&gt;&lt;span class=secno&gt;5.11.3.18 &lt;/span&gt;Hierarchical link types&lt;/a&gt;
+       &lt;li&gt;&lt;a href=#link-type-alternate&gt;&lt;span class=secno&gt;5.12.3.1 &lt;/span&gt;Link type &quot;&lt;code&gt;alternate&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-archives&gt;&lt;span class=secno&gt;5.12.3.2 &lt;/span&gt;Link type &quot;&lt;code&gt;archives&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-author&gt;&lt;span class=secno&gt;5.12.3.3 &lt;/span&gt;Link type &quot;&lt;code&gt;author&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-bookmark&gt;&lt;span class=secno&gt;5.12.3.4 &lt;/span&gt;Link type &quot;&lt;code&gt;bookmark&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-external&gt;&lt;span class=secno&gt;5.12.3.5 &lt;/span&gt;Link type &quot;&lt;code&gt;external&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-feed&gt;&lt;span class=secno&gt;5.12.3.6 &lt;/span&gt;Link type &quot;&lt;code&gt;feed&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-help&gt;&lt;span class=secno&gt;5.12.3.7 &lt;/span&gt;Link type &quot;&lt;code&gt;help&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#rel-icon&gt;&lt;span class=secno&gt;5.12.3.8 &lt;/span&gt;Link type &quot;&lt;code&gt;icon&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-license&gt;&lt;span class=secno&gt;5.12.3.9 &lt;/span&gt;Link type &quot;&lt;code&gt;license&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-nofollow&gt;&lt;span class=secno&gt;5.12.3.10 &lt;/span&gt;Link type &quot;&lt;code&gt;nofollow&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-noreferrer&gt;&lt;span class=secno&gt;5.12.3.11 &lt;/span&gt;Link type &quot;&lt;code&gt;noreferrer&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-pingback&gt;&lt;span class=secno&gt;5.12.3.12 &lt;/span&gt;Link type &quot;&lt;code&gt;pingback&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-prefetch&gt;&lt;span class=secno&gt;5.12.3.13 &lt;/span&gt;Link type &quot;&lt;code&gt;prefetch&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-search&gt;&lt;span class=secno&gt;5.12.3.14 &lt;/span&gt;Link type &quot;&lt;code&gt;search&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-stylesheet&gt;&lt;span class=secno&gt;5.12.3.15 &lt;/span&gt;Link type &quot;&lt;code&gt;stylesheet&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-sidebar&gt;&lt;span class=secno&gt;5.12.3.16 &lt;/span&gt;Link type &quot;&lt;code&gt;sidebar&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#link-type-tag&gt;&lt;span class=secno&gt;5.12.3.17 &lt;/span&gt;Link type &quot;&lt;code&gt;tag&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#hierarchical-link-types&gt;&lt;span class=secno&gt;5.12.3.18 &lt;/span&gt;Hierarchical link types&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#link-type-index&gt;&lt;span class=secno&gt;5.11.3.18.1 &lt;/span&gt;Link type &quot;&lt;code&gt;index&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-up&gt;&lt;span class=secno&gt;5.11.3.18.2 &lt;/span&gt;Link type &quot;&lt;code&gt;up&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#sequential-link-types&gt;&lt;span class=secno&gt;5.11.3.19 &lt;/span&gt;Sequential link types&lt;/a&gt;
+         &lt;li&gt;&lt;a href=#link-type-index&gt;&lt;span class=secno&gt;5.12.3.18.1 &lt;/span&gt;Link type &quot;&lt;code&gt;index&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-up&gt;&lt;span class=secno&gt;5.12.3.18.2 &lt;/span&gt;Link type &quot;&lt;code&gt;up&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#sequential-link-types&gt;&lt;span class=secno&gt;5.12.3.19 &lt;/span&gt;Sequential link types&lt;/a&gt;
         &lt;ol&gt;
-         &lt;li&gt;&lt;a href=#link-type-first&gt;&lt;span class=secno&gt;5.11.3.19.1 &lt;/span&gt;Link type &quot;&lt;code&gt;first&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-last&gt;&lt;span class=secno&gt;5.11.3.19.2 &lt;/span&gt;Link type &quot;&lt;code&gt;last&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-next&gt;&lt;span class=secno&gt;5.11.3.19.3 &lt;/span&gt;Link type &quot;&lt;code&gt;next&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
-         &lt;li&gt;&lt;a href=#link-type-prev&gt;&lt;span class=secno&gt;5.11.3.19.4 &lt;/span&gt;Link type &quot;&lt;code&gt;prev&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#other-link-types&gt;&lt;span class=secno&gt;5.11.3.20 &lt;/span&gt;Other link types&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-first&gt;&lt;span class=secno&gt;5.12.3.19.1 &lt;/span&gt;Link type &quot;&lt;code&gt;first&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-last&gt;&lt;span class=secno&gt;5.12.3.19.2 &lt;/span&gt;Link type &quot;&lt;code&gt;last&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-next&gt;&lt;span class=secno&gt;5.12.3.19.3 &lt;/span&gt;Link type &quot;&lt;code&gt;next&lt;/code&gt;&quot;&lt;/a&gt;&lt;/li&gt;
+         &lt;li&gt;&lt;a href=#link-type-prev&gt;&lt;span class=secno&gt;5.12.3.19.4 &lt;/span&gt;Link type &quot;&lt;code&gt;prev&lt;/code&gt;&quot;&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#other-link-types&gt;&lt;span class=secno&gt;5.12.3.20 &lt;/span&gt;Other link types&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#editing&gt;&lt;span class=secno&gt;6 &lt;/span&gt;User Interaction&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#editing-intro&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
@@ -5871,9 +5872,9 @@
 
   &lt;div class=example&gt;
 
-   &lt;p&gt;For example, the &lt;code&gt;document.defaultView&lt;/code&gt; attribute
-   means that there is a strong reference from a &lt;code&gt;Document&lt;/code&gt;
-   object to its &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. Similarly, there is
+   &lt;p&gt;For example, the &lt;code&gt;document.location&lt;/code&gt; attribute means
+   that there is a strong reference from a &lt;code&gt;Document&lt;/code&gt;
+   object to its &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object. Similarly, there is
    always a strong reference from a &lt;code&gt;Document&lt;/code&gt; to any
    descendant nodes, and from any node to its owner
    &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
@@ -5915,14 +5916,8 @@
   &lt;code&gt;DOMImplementation&lt;/code&gt; object is initially an &lt;a href=#xml-documents title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt;, but can be made into an
   &lt;a href=#html-documents title=&quot;HTML documents&quot;&gt;HTML document&lt;/a&gt; by calling &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt; on it.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;Document&lt;/code&gt; is first created, a new &lt;a href=#script-group&gt;script
-  group&lt;/a&gt; must be created. This is the &lt;code&gt;Document&lt;/code&gt;'s
-  &lt;dfn id=current-script-group&gt;current script group&lt;/dfn&gt; until the script group is changed
-  (which can happen if &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt; is invoked on the
-  &lt;code&gt;Document&lt;/code&gt;).&lt;/p&gt;
 
 
-
   &lt;h4 id=documents-in-the-dom&gt;&lt;span class=secno&gt;3.2.1 &lt;/span&gt;Documents in the DOM&lt;/h4&gt;
 
   &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
@@ -5975,7 +5970,7 @@
   // &lt;a href=#dynamic-markup-insertion&gt;dynamic markup insertion&lt;/a&gt;
            attribute DOMString &lt;a href=#dom-innerhtml title=dom-innerHTML&gt;innerHTML&lt;/a&gt;;
   &lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt; &lt;a href=#dom-document-open title=dom-document-open&gt;open&lt;/a&gt;([Optional] in DOMString type, [Optional] in DOMString replace);
-  &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-document-open title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features, [Optional] in boolean replace);
+  &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-document-open title=dom-document-open&gt;open&lt;/a&gt;(in DOMString url, in DOMString name, in DOMString features, [Optional] in boolean replace);
   void &lt;a href=#dom-document-close title=dom-document-close&gt;close&lt;/a&gt;();
   void &lt;a href=#dom-document-write title=dom-document-write&gt;write&lt;/a&gt;([Variadic] in DOMString text);
   void &lt;a href=#dom-document-writeln title=dom-document-writeln&gt;writeln&lt;/a&gt;([Variadic] in DOMString text);
@@ -6433,9 +6428,9 @@
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;elements&lt;/var&gt; has only one element, and that
     element is an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element, then return the
-    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#default-view&gt;default view&lt;/a&gt; of the
-    &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt; represented by that
-    &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element, and abort these steps.&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#nested-browsing-context&gt;nested browsing
+    context&lt;/a&gt; represented by that &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element,
+    and abort these steps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -7744,21 +7739,24 @@
    XHTML, or image document, or something?&lt;/span&gt;&lt;/li&gt;&lt;!-- XXX see
    also innerHTML in HTML --&gt;
 
-   &lt;li&gt;&lt;p&gt;Freeze the document's &lt;a href=#current-script-group&gt;current script group&lt;/a&gt;, as
-   well as the &lt;a href=#current-script-group&gt;current script group&lt;/a&gt; of any &lt;a href=#active-document title=&quot;active document&quot;&gt;active documents&lt;/a&gt; in &lt;a href=#nested-browsing-context title=&quot;nested browsing context&quot;&gt;nested browsing
-   contexts&lt;/a&gt;.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Unregister all event listeners registered on the
    &lt;code&gt;Document&lt;/code&gt; node and its descendants.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Remove all child nodes of the document, without firing any
    mutation events.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Create a new &lt;a href=#script-group&gt;script group&lt;/a&gt; and let the
-   document's &lt;a href=#current-script-group&gt;current script group&lt;/a&gt; be that new
-   group. (The old script group is now permanently frozen.)&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Replace the &lt;code&gt;Document&lt;/code&gt;'s singleton objects with
+   new instances of those objects. (This includes in particular the
+   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#undomanager&gt;UndoManager&lt;/a&gt;&lt;/code&gt;,
+   &lt;code&gt;&lt;a href=#navigator&gt;Navigator&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#selection-0&gt;Selection&lt;/a&gt;&lt;/code&gt; objects, the
+   various &lt;code&gt;&lt;a href=#barprop&gt;BarProp&lt;/a&gt;&lt;/code&gt; objects, the two &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt;
+   objects, and the various &lt;code&gt;&lt;a href=#htmlcollection-0&gt;HTMLCollection&lt;/a&gt;&lt;/code&gt; objects. It
+   also includes all the WebIDL prototypes in the ECMAScript binding,
+   including the &lt;code&gt;Document&lt;/code&gt; object's prototype.)&lt;/li&gt;
 
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E --&gt;
+   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(</A>)%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E --&gt;
 
    &lt;li&gt;&lt;p&gt;Change the &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt; to
    UTF-16.&lt;/li&gt;
@@ -7835,12 +7833,10 @@
 
   &lt;/ol&gt;&lt;p&gt;When called with three or more arguments, the &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;open()&lt;/a&gt;&lt;/code&gt; method on the
   &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object must call the &lt;code title=dom-open&gt;&lt;a href=#dom-open&gt;open()&lt;/a&gt;&lt;/code&gt; method on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-  interface of the object returned by the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;
-  object, with the same arguments as the original call to the &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;open()&lt;/a&gt;&lt;/code&gt; method, and return whatever
-  that method returned. If the &lt;code title=dom-document-defaultView&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt;
-  object is null, then the method must raise an
+  object of the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object, with the same
+  arguments as the original call to the &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;open()&lt;/a&gt;&lt;/code&gt; method, and return whatever
+  that method returned. If the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object has no
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, then the method must raise an
   &lt;code&gt;&lt;a href=#invalid_access_err&gt;INVALID_ACCESS_ERR&lt;/a&gt;&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-document-close title=dom-document-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
@@ -16125,7 +16121,7 @@
            attribute DOMString &lt;a href=#dom-dim-height title=dom-dim-height&gt;height&lt;/a&gt;;
 &lt;!-- XXX we should bring these back since the Window spec has atrophied
   readonly attribute Document &lt;span title=&quot;dom-iframe-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
 --&gt;};&lt;/pre&gt;
     &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#htmliframeelement&gt;HTMLIFrameElement&lt;/a&gt;&lt;/code&gt;
     interface must also implement the &lt;code&gt;EmbeddingElement&lt;/code&gt;
@@ -16146,8 +16142,9 @@
   &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element's document's &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; as the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;. If the
   user &lt;a href=#navigate title=navigate&gt;navigates&lt;/a&gt; away from this page,
-  the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s corresponding &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object
-  will reference new &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute will not change.&lt;/p&gt;
+  the &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;'s corresponding &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt;
+  object will proxy new &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects for new
+  &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute will not change.&lt;/p&gt;
 
   &lt;p&gt;Whenever the &lt;code title=attr-iframe-src&gt;&lt;a href=#attr-iframe-src&gt;src&lt;/a&gt;&lt;/code&gt; attribute
   is set, the user agent must &lt;a href=#resolve-a-url title=&quot;resolve a
@@ -16713,10 +16710,11 @@
            attribute DOMString &lt;a href=#dom-object-usemap title=dom-object-useMap&gt;useMap&lt;/a&gt;;
   readonly attribute &lt;a href=#htmlformelement&gt;HTMLFormElement&lt;/a&gt; &lt;a href=#dom-fae-form title=dom-fae-form&gt;form&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-dim-width title=dom-dim-width&gt;width&lt;/a&gt;;
-           attribute DOMString &lt;a href=#dom-dim-height title=dom-dim-height&gt;height&lt;/a&gt;;&lt;!-- XXX
+           attribute DOMString &lt;a href=#dom-dim-height title=dom-dim-height&gt;height&lt;/a&gt;;
+&lt;!-- XXX we should bring these back since the Window spec has atrophied
   readonly attribute Document &lt;span title=&quot;dom-object-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-object-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;--&gt;
-};&lt;/pre&gt;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-object-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
+--&gt;};&lt;/pre&gt;
     &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#htmlobjectelement&gt;HTMLObjectElement&lt;/a&gt;&lt;/code&gt;
     interface must also implement the &lt;code&gt;EmbeddingElement&lt;/code&gt;
     interface defined in the Window Object specification. &lt;a href=#refsWINDOW&gt;[WINDOW]&lt;/a&gt;&lt;/p&gt;
@@ -33184,26 +33182,39 @@
   requirements defined in this section &lt;em&gt;do&lt;/em&gt; apply to all user
   agents, whether they are Web browsers or not.&lt;/p&gt;
 
+
   &lt;h3 id=windows&gt;&lt;span class=secno&gt;5.1 &lt;/span&gt;Browsing contexts&lt;/h3&gt;
 
-  &lt;p&gt;A &lt;dfn id=browsing-context&gt;browsing context&lt;/dfn&gt; is a collection of one or more
-  &lt;code&gt;Document&lt;/code&gt; objects, and one or more &lt;a href=#view title=view&gt;views&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn id=browsing-context&gt;browsing context&lt;/dfn&gt; is an environment in which
+  &lt;code&gt;Document&lt;/code&gt; objects are presented to the user. At any
+  time, one &lt;code&gt;Document&lt;/code&gt; is designated the &lt;dfn id=active-document&gt;active
+  document&lt;/dfn&gt;. The collection of &lt;code&gt;Document&lt;/code&gt;s is the
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#session-history&gt;session history&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;At any one time, one of the &lt;code&gt;Document&lt;/code&gt;s in a
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is the &lt;dfn id=active-document&gt;active document&lt;/dfn&gt;. The
-  collection of &lt;code&gt;Document&lt;/code&gt;s is the &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt;'s &lt;a href=#session-history&gt;session history&lt;/a&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; has a corresponding
+  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
+  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; has a collection of one or more &lt;a href=#view title=view&gt;views&lt;/a&gt;.&lt;/p&gt;
+
   &lt;p&gt;A &lt;dfn id=view&gt;view&lt;/dfn&gt; is a user agent interface tied to a particular
-  media used for the presentation of &lt;code&gt;Document&lt;/code&gt; objects in
-  some media. A view may be interactive. Each view is represented by
-  an &lt;code&gt;AbstractView&lt;/code&gt; object. Each view belongs to a
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;. &lt;a href=#refsDOM2VIEWS&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
+  media used for the presentation of a particular
+  &lt;code&gt;Document&lt;/code&gt; object in some media. A view may be
+  interactive. Each view is represented by an
+  &lt;code&gt;AbstractView&lt;/code&gt; object. &lt;a href=#refsDOM2VIEWS&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;The main &lt;a href=#view&gt;view&lt;/a&gt; through which a user primarily
+  interacts with a user agent is the &lt;dfn id=default-view&gt;default view&lt;/dfn&gt;. The
+  &lt;code&gt;AbstractView&lt;/code&gt; object that represents this view must also
+  implement the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface, and is referred to as
+  the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p class=note&gt;The &lt;a href=#default-view&gt;default view&lt;/a&gt; of a
+  &lt;code&gt;Document&lt;/code&gt; is given by the &lt;code title=&quot;&quot;&gt;defaultView&lt;/code&gt; attribute on the &lt;code&gt;Document&lt;/code&gt;
+  object's &lt;code&gt;DocumentView&lt;/code&gt; interface. &lt;a href=#refsDOM3VIEWS&gt;[DOM3VIEWS]&lt;/a&gt;&lt;/p&gt;
+
   &lt;p class=note&gt;The &lt;code title=&quot;&quot;&gt;document&lt;/code&gt; attribute of an
   &lt;code&gt;AbstractView&lt;/code&gt; object representing a &lt;a href=#view&gt;view&lt;/a&gt;
-  gives the &lt;code&gt;Document&lt;/code&gt; object of the view's &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;. &lt;a href=#refsDOM2VIEWS&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
+  gives the view's corresponding &lt;code&gt;Document&lt;/code&gt; object. &lt;a href=#refsDOM2VIEWS&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=note&gt;Events that use the &lt;code&gt;UIEvent&lt;/code&gt; interface
   are related to a specific &lt;a href=#view&gt;view&lt;/a&gt; (the view in which the
@@ -33211,19 +33222,20 @@
   in the event object's &lt;code title=&quot;&quot;&gt;view&lt;/code&gt; attribute. &lt;a href=#refsDOM3EVENTS&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=note&gt;A typical Web browser has one obvious
-  &lt;a href=#view&gt;view&lt;/a&gt; per &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;: the browser's
-  window (screen media). If a page is printed, however, a second view
-  becomes evident, that of the print media. The two views always share
-  the same underlying &lt;code&gt;Document&lt;/code&gt;, but they have a different
-  presentation of that document. A speech browser also establishes a
-  browsing context, one with a view in the speech media.&lt;/p&gt;
+  &lt;a href=#view&gt;view&lt;/a&gt; per &lt;code&gt;Document&lt;/code&gt;: the browser's window
+  (screen media). This is typically the &lt;a href=#default-view&gt;default view&lt;/a&gt;. If
+  a page is printed, however, a second view becomes evident, that of
+  the print media. The two views always share the same underlying
+  &lt;code&gt;Document&lt;/code&gt; object, but they have a different presentation
+  of that object. A speech browser might have a different
+  &lt;a href=#default-view&gt;default view&lt;/a&gt;, using the speech media.&lt;/p&gt;
 
   &lt;p class=note&gt;A &lt;code&gt;Document&lt;/code&gt; does not necessarily have a
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; associated with it. In particular,
   data mining tools are likely to never instantiate browsing
   contexts.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; can have a &lt;dfn id=creator-browsing-context&gt;creator browsing
+  &lt;hr&gt;&lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; can have a &lt;dfn id=creator-browsing-context&gt;creator browsing
   context&lt;/dfn&gt;, the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that was
   responsible for its creation. Unless otherwise specified, a
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; has no &lt;a href=#creator-browsing-context&gt;creator browsing
@@ -33235,13 +33247,6 @@
   that &lt;a href=#creator-browsing-context&gt;creator browsing context&lt;/a&gt; at the time &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; was created is the &lt;dfn id=creator-document&gt;creator
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The main &lt;a href=#view&gt;view&lt;/a&gt; through which a user primarily
-  interacts with a user agent is the &lt;dfn id=default-view&gt;default view&lt;/dfn&gt;.&lt;/p&gt;
-
-  &lt;p class=note&gt;The &lt;a href=#default-view&gt;default view&lt;/a&gt; of a
-  &lt;code&gt;Document&lt;/code&gt; is given by the &lt;code title=&quot;&quot;&gt;defaultView&lt;/code&gt; attribute on the &lt;code&gt;Document&lt;/code&gt;
-  object's &lt;code&gt;DocumentView&lt;/code&gt; interface. &lt;a href=#refsDOM3VIEWS&gt;[DOM3VIEWS]&lt;/a&gt;&lt;/p&gt;
-
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is first created, it must be
   created with a single &lt;code&gt;Document&lt;/code&gt; in its session history,
   whose &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; is
@@ -33319,29 +33324,30 @@
   &lt;h5 id=navigating-nested-browsing-contexts-in-the-dom&gt;&lt;span class=secno&gt;5.1.1.1 &lt;/span&gt;Navigating nested browsing contexts in the DOM&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-top title=dom-top&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt; DOM attribute on
-  the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
-  &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of
-  its &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt; (which would be its own
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object if it was a &lt;a href=#top-level-browsing-context&gt;top-level browsing
-  context&lt;/a&gt; itself).&lt;/p&gt;
+  the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a &lt;code&gt;Document&lt;/code&gt; in a
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the
+  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of its &lt;a href=#top-level-browsing-context&gt;top-level browsing
+  context&lt;/a&gt; (which would be its own &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt;
+  object if it was a &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;
+  itself).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-parent title=dom-parent&gt;&lt;code&gt;parent&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#parent-browsing-context&gt;parent browsing
-  context&lt;/a&gt;, if there is one (i.e. if &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is a
-  &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;), or the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-  object of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;
-  itself, otherwise (i.e. if it is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
-  context&lt;/a&gt;).&lt;/p&gt;
+  attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a
+  &lt;code&gt;Document&lt;/code&gt; in a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of
+  the &lt;a href=#parent-browsing-context&gt;parent browsing context&lt;/a&gt;, if there is one (i.e. if
+  &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is a &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;), or
+  the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; itself, otherwise (i.e. if it
+  is a &lt;a href=#top-level-browsing-context&gt;top-level browsing context&lt;/a&gt;).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-frameelement title=dom-frameElement&gt;&lt;code&gt;frameElement&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, on getting, must run the
-  following algorithm:&lt;/p&gt;
+  DOM attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of a
+  &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, on getting, must run
+  the following algorithm:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is not a &lt;a href=#child-browsing-context&gt;child browsing
-   context&lt;/a&gt;, return null and abort these steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; is not a &lt;code&gt;Document&lt;/code&gt; in a
+   &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;, return null and abort these
+   steps.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;a href=#parent-browsing-context&gt;parent browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active
    document&lt;/a&gt; does not have the &lt;span&gt;same&lt;/span&gt; &lt;a href=#effective-script-origin&gt;effective
@@ -33372,10 +33378,10 @@
 
   &lt;p&gt;The &lt;dfn id=dom-opener title=dom-opener&gt;&lt;code&gt;opener&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object must return the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; from
-  which the current browsing context was created (its &lt;a href=#opener-browsing-context&gt;opener
-  browsing context&lt;/a&gt;), if there is one and it is still
-  available.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;
+  from which the current &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; was created
+  (its &lt;a href=#opener-browsing-context&gt;opener browsing context&lt;/a&gt;), if there is one and it
+  is still available.&lt;/p&gt;
 
 
 
@@ -33563,17 +33569,24 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h3 id=the-default-view&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The default view&lt;/h3&gt;
+  &lt;/ol&gt;&lt;h3 id=the-windowproxy-object&gt;&lt;span class=secno&gt;5.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object&lt;/h3&gt;
 
-  &lt;p&gt;The &lt;code&gt;AbstractView&lt;/code&gt; object of &lt;a href=#default-view title=&quot;default
-  view&quot;&gt;default views&lt;/a&gt; must also implement the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;EventTarget&lt;/code&gt; interfaces.&lt;/p&gt;
+  &lt;p&gt;As mentioned earlier, each &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; has a
+  &lt;dfn id=windowproxy&gt;WindowProxy&lt;/dfn&gt; object. This object is unusual in that it
+  must proxy all operations to the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active document&lt;/a&gt;. It is
+  thus indistinguishable from that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object in every
+  way, except that it is not equal to it.&lt;/p&gt;
 
+
+
+  &lt;h3 id=the-window-object&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h3&gt;
+
   &lt;pre class=idl&gt;[&lt;a href=#dom-window-item title=dom-window-item&gt;IndexGetter&lt;/a&gt;, &lt;a href=#dom-window-nameditem title=dom-window-namedItem&gt;NameGetter&lt;/a&gt;=OverrideBuiltins]
 interface &lt;dfn id=window&gt;Window&lt;/dfn&gt; {
   // the current browsing context
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-window title=dom-window&gt;window&lt;/a&gt;;
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-self title=dom-self&gt;self&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-window title=dom-window&gt;window&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-self title=dom-self&gt;self&lt;/a&gt;;
            attribute DOMString &lt;a href=#dom-name title=dom-name&gt;name&lt;/a&gt;;
   [PutForwards=href] readonly attribute &lt;a href=#location&gt;Location&lt;/a&gt; &lt;a href=#dom-document-location title=dom-document-location&gt;location&lt;/a&gt;;
   readonly attribute &lt;a href=#history-1&gt;History&lt;/a&gt; &lt;a href=#dom-history title=dom-history&gt;history&lt;/a&gt;;
@@ -33591,13 +33604,13 @@
   void &lt;a href=#dom-window-blur title=dom-window-blur&gt;blur&lt;/a&gt;();
 
   // other browsing contexts
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-frames title=dom-frames&gt;frames&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-frames title=dom-frames&gt;frames&lt;/a&gt;;
   readonly attribute unsigned long &lt;a href=#dom-length title=dom-length&gt;length&lt;/a&gt;;
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-top title=dom-top&gt;top&lt;/a&gt;;
-  [Replaceable] readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-opener title=dom-opener&gt;opener&lt;/a&gt;;
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-parent title=dom-parent&gt;parent&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-top title=dom-top&gt;top&lt;/a&gt;;
+  [Replaceable] readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-opener title=dom-opener&gt;opener&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-parent title=dom-parent&gt;parent&lt;/a&gt;;
   readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;a href=#dom-frameelement title=dom-frameElement&gt;frameElement&lt;/a&gt;;
-  &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-open title=dom-open&gt;open&lt;/a&gt;([Optional] in DOMString url, [Optional] in DOMString target, [Optional] in DOMString features, [Optional] in DOMString replace);
+  &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-open title=dom-open&gt;open&lt;/a&gt;([Optional] in DOMString url, [Optional] in DOMString target, [Optional] in DOMString features, [Optional] in DOMString replace);
 
   // the user agent
   readonly attribute &lt;a href=#navigator&gt;Navigator&lt;/a&gt; &lt;a href=#dom-navigator title=dom-navigator&gt;navigator&lt;/a&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
@@ -33664,30 +33677,24 @@
           <A HREF="http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindowInternal.idl">http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindowInternal.idl</A> - DOM level 0
    --&gt;
 
+  &lt;p&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object must also implement the
+  &lt;code&gt;EventTarget&lt;/code&gt; interface.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn id=dom-window title=dom-window&gt;&lt;code&gt;window&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-frames title=dom-frames&gt;&lt;code&gt;frames&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-self title=dom-self&gt;&lt;code&gt;self&lt;/code&gt;&lt;/dfn&gt; DOM attributes must all
-  return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object itself.&lt;/p&gt;
+  return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object also provides the scope for &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;
-  execution. Each &lt;code&gt;Document&lt;/code&gt; in a &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; has an associated &lt;dfn id=list-of-added-properties&gt;list of added properties&lt;/dfn&gt;
-  that, when a document is &lt;a href=#active-document title=&quot;active
-  document&quot;&gt;active&lt;/a&gt;, are available on the
-  &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#default-view&gt;default view&lt;/a&gt;'s
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object. A &lt;code&gt;Document&lt;/code&gt; object's
-  &lt;a href=#list-of-added-properties&gt;list of added properties&lt;/a&gt; must be empty when the
-  &lt;code&gt;Document&lt;/code&gt; object is created.&lt;/p&gt;
 
 
+  &lt;h4 id=security-2&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;h4 id=security-2&gt;&lt;span class=secno&gt;5.2.1 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception
+  whenever any of the members of a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object are
+  accessed by scripts whose &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is
+  not the same as the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's
+  &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt;, with
+  the following exceptions:&lt;/p&gt;
 
-  &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception whenever
-  any of the members of a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object are accessed by
-  scripts whose &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; is not the same
-  as the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
-  &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt;,
-  with the following exceptions:&lt;/p&gt;
-
   &lt;ul&gt;&lt;li&gt;The &lt;code title=dom-location&gt;&lt;a href=#dom-location&gt;location&lt;/a&gt;&lt;/code&gt; object
 
    &lt;li&gt;The &lt;code title=dom-window-postMessage-2&gt;&lt;a href=#dom-window-postmessage-2&gt;postMessage()&lt;/a&gt;&lt;/code&gt;
@@ -33705,7 +33712,7 @@
 
 
 
-  &lt;h4 id=apis-for-creating-and-navigating-browsing-contexts-by-name&gt;&lt;span class=secno&gt;5.2.2 &lt;/span&gt;APIs for creating and navigating browsing contexts by name&lt;/h4&gt;
+  &lt;h4 id=apis-for-creating-and-navigating-browsing-contexts-by-name&gt;&lt;span class=secno&gt;5.3.2 &lt;/span&gt;APIs for creating and navigating browsing contexts by name&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-open title=dom-open&gt;&lt;code&gt;open()&lt;/code&gt;&lt;/dfn&gt; method on
   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects provides a mechanism for &lt;a href=#navigate title=navigate&gt;navigating&lt;/a&gt; an existing &lt;a href=#browsing-context&gt;browsing
@@ -33770,11 +33777,11 @@
   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; that invoked the method
   as the &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The method must return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
-  default view of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that was
-  navigated, or null if no browsing context was navigated.&lt;/p&gt;
+  &lt;p&gt;The method must return the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the
+  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that was navigated, or null if no
+  browsing context was navigated.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-name title=dom-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute of
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-name title=dom-name&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute of
   the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object must, on getting, return the current
   name of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, and, on setting, set the
   name of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to the new value.&lt;/p&gt;
@@ -33782,7 +33789,7 @@
   &lt;p class=note&gt;The name &lt;a href=#resetBCName&gt;gets reset&lt;/a&gt; when
   the browsing context is navigated to another domain.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;dfn id=dom-window-close title=dom-window-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
+  &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-window-close title=dom-window-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
   method on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects should, if the corresponding
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
   &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing context&lt;/a&gt; that was created by a script
@@ -33795,39 +33802,42 @@
 
 
 
-  &lt;h4 id=accessing-other-browsing-contexts&gt;&lt;span class=secno&gt;5.2.3 &lt;/span&gt;Accessing other browsing contexts&lt;/h4&gt;
+  &lt;h4 id=accessing-other-browsing-contexts&gt;&lt;span class=secno&gt;5.3.3 &lt;/span&gt;Accessing other browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-length title=dom-length&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface must return the
   number of &lt;a href=#child-browsing-context title=&quot;child browsing context&quot;&gt;child browsing
-  contexts&lt;/a&gt; of the &lt;a href=#active-document title=&quot;active document&quot;&gt;active&lt;/a&gt;
-  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  contexts&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span&gt;indices of the supported indexed properties&lt;/span&gt; on
   the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object at any instant are the numbers in the
   range 0 .. &lt;span&gt;&lt;var title=&quot;&quot;&gt;n&lt;/var&gt;-1&lt;/span&gt;, where &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is the number of &lt;a href=#child-browsing-context title=&quot;child browsing
-  context&quot;&gt;child browsing contexts&lt;/a&gt; of the &lt;a href=#active-document title=&quot;active
-  document&quot;&gt;active&lt;/a&gt; &lt;code&gt;Document&lt;/code&gt;. If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is zero then there are no &lt;span&gt;supported indexed
-  properties&lt;/span&gt;.&lt;/p&gt;
+  context&quot;&gt;child browsing contexts&lt;/a&gt; of the
+  &lt;code&gt;Document&lt;/code&gt;. If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is zero then there
+  are no &lt;span&gt;supported indexed properties&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;When a &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is &lt;dfn id=dom-window-item title=dom-window-item&gt;indexed to retrieve an indexed
   property&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;, the value returned must be
   the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th &lt;a href=#child-browsing-context&gt;child browsing context&lt;/a&gt;
-  of the &lt;a href=#active-document title=&quot;active document&quot;&gt;active&lt;/a&gt;
-  &lt;code&gt;Document&lt;/code&gt;, sorted in document order of the elements
-  nesting those browsing contexts.&lt;/p&gt;
+  of the &lt;code&gt;Document&lt;/code&gt;, sorted in the &lt;a href=#tree-order&gt;tree order&lt;/a&gt;
+  of the elements nesting those &lt;a href=#browsing-context title=&quot;browsing
+  context&quot;&gt;browsing contexts&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;These properties are the &lt;dfn id=dynamic-nested-browsing-context-properties&gt;dynamic nested browsing context
   properties&lt;/dfn&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=garbage-collection-and-browsing-contexts&gt;&lt;span class=secno&gt;5.2.4 &lt;/span&gt;Garbage collection and browsing contexts&lt;/h4&gt;
+  &lt;h4 id=garbage-collection-and-browsing-contexts&gt;&lt;span class=secno&gt;5.3.4 &lt;/span&gt;Garbage collection and browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;A &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; has a strong reference to each of
-  its &lt;code&gt;Document&lt;/code&gt;s and &lt;a href=#view title=view&gt;views&lt;/a&gt;, and
-  the user agent itself has a strong reference to its &lt;a href=#top-level-browsing-context title=&quot;top-level browsing context&quot;&gt;top-level browsing
+  its &lt;code&gt;Document&lt;/code&gt;s and its &lt;code&gt;WindowProxt&lt;/code&gt; object,
+  and the user agent itself has a strong reference to its &lt;a href=#top-level-browsing-context title=&quot;top-level browsing context&quot;&gt;top-level browsing
   contexts&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; has a strong reference to each of its
+  &lt;a href=#view title=view&gt;views&lt;/a&gt; and their &lt;code&gt;AbstractView&lt;/code&gt;
+  objects.&lt;/p&gt;
+
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, that means that it is to lose the
   strong reference from the &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#browsing-context&gt;browsing
@@ -33835,9 +33845,8 @@
 
   &lt;p class=note&gt;The &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#default-view&gt;default
   view&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object &lt;a href=#implied-strong-reference title=&quot;implied strong
-  reference&quot;&gt;has a strong reference of its own&lt;/a&gt; to the
-  &lt;code&gt;Document&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
-  &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
+  reference&quot;&gt;has a strong reference of its own&lt;/a&gt; to its
+  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;When &lt;dfn id=a-browsing-context-is-discarded&gt;a &lt;em&gt;&lt;span&gt;browsing context&lt;/span&gt;&lt;/em&gt; is
   discarded&lt;/dfn&gt;, the strong reference from the user agent itself to
@@ -33851,12 +33860,12 @@
   in response to user requests, e.g. when a user closes a window
   containing one or more &lt;a href=#top-level-browsing-context title=&quot;top-level browsing
   context&quot;&gt;top-level browsing contexts&lt;/a&gt;). Other &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; must be discarded
-  once their &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object is eligible for garbage
+  once their &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object is eligible for garbage
   collection.&lt;/p&gt;
 
 
 
-  &lt;h4 id=named-access-on-the-window-object&gt;&lt;span class=secno&gt;5.2.5 &lt;/span&gt;Named access on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h4&gt;
+  &lt;h4 id=named-access-on-the-window-object&gt;&lt;span class=secno&gt;5.3.5 &lt;/span&gt;Named access on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface &lt;span title=&quot;support named
   properties&quot;&gt;supports named properties&lt;/span&gt;. The &lt;span&gt;names of the
@@ -33891,10 +33900,10 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;elements&lt;/var&gt; contains an &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;
-    element, then return the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
-    &lt;a href=#default-view&gt;default view&lt;/a&gt; of the &lt;a href=#nested-browsing-context&gt;nested browsing
-    context&lt;/a&gt; represented by the first such &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt;
-    element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, and abort these steps.&lt;/p&gt;
+    element, then return the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the
+    &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt; represented by the first such
+    &lt;code&gt;&lt;a href=#the-iframe-element&gt;iframe&lt;/a&gt;&lt;/code&gt; element in &lt;a href=#tree-order&gt;tree order&lt;/a&gt;, and abort
+    these steps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -33925,7 +33934,7 @@
 
    &lt;li&gt;&lt;a href=#html-elements&gt;HTML elements&lt;/a&gt; elements that have an &lt;code title=attr-id&gt;&lt;a href=#the-id-attribute&gt;id&lt;/a&gt;&lt;/code&gt; content attribute whose value is &lt;var title=&quot;&quot;&gt;name&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ul&gt;&lt;h4 id=browser-interface-elements&gt;&lt;span class=secno&gt;5.2.6 &lt;/span&gt;Browser interface elements&lt;/h4&gt;
+  &lt;/ul&gt;&lt;h4 id=browser-interface-elements&gt;&lt;span class=secno&gt;5.3.6 &lt;/span&gt;Browser interface elements&lt;/h4&gt;
 
   &lt;p&gt;To allow Web pages to integrate with Web browsers, certain Web
   browser interface elements are exposed in a limited way to scripts
@@ -34023,7 +34032,7 @@
 --&gt;
 
 
-  &lt;h3 id=origin&gt;&lt;span class=secno&gt;5.3 &lt;/span&gt;Origin&lt;/h3&gt;
+  &lt;h3 id=origin&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Origin&lt;/h3&gt;
   &lt;!-- Hallowed are the Ori --&gt;
 
   &lt;p&gt;The &lt;dfn id=origin-0&gt;origin&lt;/dfn&gt; of a resource and the &lt;dfn id=effective-script-origin&gt;effective script
@@ -34195,8 +34204,7 @@
      &lt;dd&gt;The &lt;a href=#origin-0&gt;origin&lt;/a&gt; and &lt;a href=#effective-script-origin&gt;effective script
      origin&lt;/a&gt; are equal to the &lt;a href=#origin-0&gt;origin&lt;/a&gt; and
      &lt;a href=#effective-script-origin&gt;effective script origin&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt;
-     object that was the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the browsing context of the
-     &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object from which the
+     object of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object from which the
      &lt;code&gt;XMLHttpRequest&lt;/code&gt; constructor was invoked. (That is,
      they track the &lt;code&gt;Document&lt;/code&gt; to which the
      &lt;code&gt;XMLHttpRequest&lt;/code&gt; object's &lt;a href=<A HREF="http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#document-pointer">http://dev.w3.org/2006/webapi/XMLHttpRequest-2/Overview.html#document-pointer</A>&gt;&lt;code&gt;Document&lt;/code&gt;
@@ -34349,7 +34357,7 @@
 
    &lt;li&gt;&lt;p&gt;Return true.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=relaxing-the-same-origin-restriction&gt;&lt;span class=secno&gt;5.3.1 &lt;/span&gt;Relaxing the same-origin restriction&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=relaxing-the-same-origin-restriction&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Relaxing the same-origin restriction&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-document-domain title=dom-document-domain&gt;&lt;code&gt;domain&lt;/code&gt;&lt;/dfn&gt;
   attribute on &lt;code&gt;Document&lt;/code&gt; objects must be initialized to
@@ -34456,9 +34464,9 @@
 
 
 
-  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;5.4 &lt;/span&gt;Scripting&lt;/h3&gt;
+  &lt;h3 id=scripting&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;Scripting&lt;/h3&gt;
 
-  &lt;h4 id=introduction-0&gt;&lt;span class=secno&gt;5.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-0&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;Various mechanisms can cause author-provided executable code to
   run in the context of a document. These mechanisms include, but are
@@ -34478,7 +34486,7 @@
    &lt;li&gt;Processing of technologies like XBL or SVG that have their own
    scripting features.&lt;/li&gt;
 
-  &lt;/ul&gt;&lt;h4 id=enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;5.4.2 &lt;/span&gt;Enabling and disabling scripting&lt;/h4&gt;
+  &lt;/ul&gt;&lt;h4 id=enabling-and-disabling-scripting&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Enabling and disabling scripting&lt;/h4&gt;
 
   &lt;p&gt;&lt;dfn id=concept-bc-script title=concept-bc-script&gt;Scripting is enabled&lt;/dfn&gt; in a
   &lt;em&gt;&lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;&lt;/em&gt; when all of the
@@ -34512,9 +34520,9 @@
 
 
   &lt;!-- SCRIPT EXEC (marks areas related to creation of scripts) --&gt;
-  &lt;h4 id=processing-model-1&gt;&lt;span class=secno&gt;5.4.3 &lt;/span&gt;Processing model&lt;/h4&gt;
+  &lt;h4 id=processing-model-1&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Processing model&lt;/h4&gt;
 
-  &lt;h5 id=definitions-0&gt;&lt;span class=secno&gt;5.4.3.1 &lt;/span&gt;Definitions&lt;/h5&gt;
+  &lt;h5 id=definitions-0&gt;&lt;span class=secno&gt;5.5.3.1 &lt;/span&gt;Definitions&lt;/h5&gt;
 
   &lt;p&gt;A &lt;dfn id=concept-script title=concept-script&gt;script&lt;/dfn&gt; has:&lt;/p&gt;
 
@@ -34610,74 +34618,36 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Membership in a &lt;dfn id=script-group&gt;script group&lt;/dfn&gt;&lt;/dt&gt;
+  &lt;/dl&gt;&lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;5.5.3.2 &lt;/span&gt;Calling scripts&lt;/h5&gt;
 
-   &lt;dd&gt;
-
-    &lt;p&gt;A group of one or more scripts that are loaded in the same
-    context, which are always disabled as a group. Scripts in a script
-    group all have the same &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
-    object&quot;&gt;global object&lt;/a&gt; and &lt;a href=&quot;#script's-browsing-context&quot; title=&quot;script's browsing
-    context&quot;&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;A script group can be &lt;i&gt;frozen&lt;/i&gt;. When a script group is
-    frozen, any code defined in that script group will throw an
-    exception when invoked. A frozen script group can be
-    &lt;i&gt;unfrozen&lt;/i&gt;, allowing scripts in that script group to run
-    normally again.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;h5 id=calling-scripts&gt;&lt;span class=secno&gt;5.4.3.2 &lt;/span&gt;Calling scripts&lt;/h5&gt;
-
   &lt;p&gt;When a user agent is to &lt;dfn id=jump-to-a-code-entry-point&gt;jump to a code entry-point&lt;/dfn&gt; for
-  a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, for example because
-  one &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; has called another,
-  or because the user agent is to invoke a callback defined in that
-  &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, the user agent must run
-  the following steps:&lt;/p&gt;
+  a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, for example to invoke
+  an event listener defined in that &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;, the user agent must run the
+  following steps:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt; is a
+   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose &lt;code&gt;Document&lt;/code&gt; object is
+   not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then abort these steps without doing
+   anything. The callback is not fired.&lt;/p&gt;
 
-    &lt;p&gt;If executable code from a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is making a call to a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; in the same &lt;a href=#script-group&gt;script
-    group&lt;/a&gt;, then skip this step.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#first-script&gt;first script&lt;/a&gt; to be the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; being invoked.&lt;/li&gt;
 
-    &lt;p&gt;Otherwise, if &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting is
-    disabled&lt;/a&gt; in the &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, or
-    if the script's &lt;a href=#script-group&gt;script group&lt;/a&gt; is &lt;i&gt;frozen&lt;/i&gt;, then
-    the user agent must throw an &lt;code&gt;&lt;a href=#unavailable_script_err&gt;UNAVAILABLE_SCRIPT_ERR&lt;/a&gt;&lt;/code&gt;
-    exception and abort these steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If this algorithm was &lt;em&gt;not&lt;/em&gt; invoked by one script
-   calling another, then set the &lt;a href=#first-script&gt;first script&lt;/a&gt; to be the
-   &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; being invoked.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Make the &lt;a href=#script-execution-environment title=&quot;script execution environment&quot;&gt;script
    execution environment&lt;/a&gt; for the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; execute the code for the given
    code entry-point.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If this algorithm was &lt;em&gt;not&lt;/em&gt; invoked by one script
-   calling another, then set the &lt;a href=#first-script&gt;first script&lt;/a&gt; back to
-   whatever it was when this algorithm started.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;a href=#first-script&gt;first script&lt;/a&gt; back to whatever it was
+   when this algorithm started.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p class=note&gt;In particular, this means that scripts in a
-  &lt;i&gt;frozen&lt;/i&gt; &lt;a href=#script-group&gt;script group&lt;/a&gt; can keep on executing so
-  long as they don't call code in another &lt;a href=#script-group&gt;script
-  group&lt;/a&gt;. This is why a script doesn't immediately terminate
-  after calling &lt;code title=dom-document-open&gt;&lt;a href=#dom-document-open&gt;document.open()&lt;/a&gt;&lt;/code&gt;
-  on its own &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;This algorithm is not invoked by one script calling another.&lt;/p&gt;
 
 
+  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;5.5.3.3 &lt;/span&gt;Creating scripts&lt;/h5&gt;
 
-  &lt;h5 id=creating-scripts&gt;&lt;span class=secno&gt;5.4.3.3 &lt;/span&gt;Creating scripts&lt;/h5&gt;
-
   &lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script title=&quot;create a
   script&quot;&gt;created&lt;/dfn&gt;, given some script source, its scripting
   language, a global object, a browsing context, a character encoding,
-  a base URL, and a script group, the user agent must run the
-  following steps:&lt;/p&gt;
+  and a base URL, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;Set up a &lt;a href=#script-execution-environment&gt;script execution environment&lt;/a&gt; as
    appropriate for the scripting language.&lt;/li&gt;
@@ -34695,9 +34665,6 @@
    character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt;
    from the settings passed to this algorithm.&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Add the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; to the given &lt;a href=#script-group&gt;script
-   group&lt;/a&gt;.&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;a href=#jump-to-a-code-entry-point title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/a&gt; to the
    &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;'s &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code
    entry-point&lt;/a&gt;&lt;/i&gt;.&lt;/li&gt;
@@ -34706,10 +34673,10 @@
   given some script source, its scripting language, and a browsing
   context, the user agent must &lt;a href=#create-a-script&gt;create a script&lt;/a&gt;, using the
   given script source and scripting language, using a new empty object
-  as the global object, using the given browsing context as the
-  browsing context, and using a new script group as the script
-  group. The character encoding and base URL for the resulting &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; are not important as no APIs
-  are exposed to the script.&lt;/p&gt;
+  as the global object, and using the given browsing context as the
+  browsing context. The character encoding and base URL for the
+  resulting &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; are not
+  important as no APIs are exposed to the script.&lt;/p&gt;
 
   &lt;hr&gt;&lt;p&gt;When the specification says that a &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; is to be &lt;dfn id=create-a-script-from-a-node title=&quot;create a
   script from a node&quot;&gt;created from a node&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;, given some script source and its scripting
@@ -34726,8 +34693,7 @@
    &lt;li&gt;&lt;p&gt;The browsing context is the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of
    &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
-   &lt;a href=#default-view&gt;default view&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of
+   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of
    &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The character encoding is the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's
@@ -34737,11 +34703,8 @@
    &lt;li&gt;&lt;p&gt;The base URL is the &lt;a href=#document-base-url title=&quot;document base URL&quot;&gt;base
    URL&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a href=#sbu-not-copy&gt;This is a reference, not a copy&lt;/a&gt;.)&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The script group is the &lt;a href=#current-script-group&gt;current script group&lt;/a&gt; of
-   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/li&gt;
+  &lt;/ol&gt;&lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;5.5.3.4 &lt;/span&gt;Killing scripts&lt;/h5&gt;
 
-  &lt;/ol&gt;&lt;h5 id=killing-scripts&gt;&lt;span class=secno&gt;5.4.3.4 &lt;/span&gt;Killing scripts&lt;/h5&gt;
-
   &lt;p&gt;User agents may impose resource limitations on scripts, for
   example CPU quotas, memory limits, total execution time limits, or
   bandwidth limitations. When a script exceeds a limit, the user agent
@@ -34770,7 +34733,7 @@
   should be terminated immediately.&lt;/p&gt;
 
 
-  &lt;h4 id=event-loops&gt;&lt;span class=secno&gt;5.4.4 &lt;/span&gt;Event loops&lt;/h4&gt;
+  &lt;h4 id=event-loops&gt;&lt;span class=secno&gt;5.5.4 &lt;/span&gt;Event loops&lt;/h4&gt;
 
   &lt;p&gt;To coordinate events, user interaction, scripts, rendering,
   networking, and so forth, user agents must use &lt;dfn id=event-loop title=&quot;event
@@ -34879,7 +34842,7 @@
    &lt;li&gt;&lt;p&gt;Return to the first step of the &lt;a href=#event-loop&gt;event
    loop&lt;/a&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=generic-task-sources&gt;&lt;span class=secno&gt;5.4.4.1 &lt;/span&gt;Generic task sources&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=generic-task-sources&gt;&lt;span class=secno&gt;5.5.4.1 &lt;/span&gt;Generic task sources&lt;/h5&gt;
 
   &lt;p&gt;The following &lt;a href=#task-source title=&quot;task source&quot;&gt;task sources&lt;/a&gt; are
   used by a number of mostly unrelated features in this and other
@@ -34925,7 +34888,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;!-- SCRIPT EXEC --&gt;&lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;5.4.5 &lt;/span&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;/dl&gt;&lt;!-- SCRIPT EXEC --&gt;&lt;h4 id=javascript-protocol&gt;&lt;span class=secno&gt;5.5.5 &lt;/span&gt;&lt;dfn title=&quot;javascript protocol&quot;&gt;The &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a &lt;a href=#url&gt;URL&lt;/a&gt; using the &lt;code title=&quot;&quot;&gt;javascript:&lt;/code&gt; protocol is &lt;dfn id=concept-js-deref title=concept-js-deref&gt;dereferenced&lt;/dfn&gt;, the user agent must run
   the following steps:&lt;/p&gt;
@@ -35049,10 +35012,10 @@
   has disabled scripting altogether.&lt;/p&gt;
 
 
-  &lt;h4 id=events&gt;&lt;span class=secno&gt;5.4.6 &lt;/span&gt;Events&lt;/h4&gt;
+  &lt;h4 id=events&gt;&lt;span class=secno&gt;5.5.6 &lt;/span&gt;Events&lt;/h4&gt;
 
 
-  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;5.4.6.1 &lt;/span&gt;Event handler attributes&lt;/h5&gt;
+  &lt;h5 id=event-handler-attributes&gt;&lt;span class=secno&gt;5.5.6.1 &lt;/span&gt;Event handler attributes&lt;/h5&gt;
 
   &lt;!--test: &lt;a href=&quot;<A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0A...%3Cscript%3E%0Aw(a%3Ddocument.implementation.createDocument(null%2C%20null%2C%20null</A>))%3B%0Aw(a.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'html')))%3B%0Aw(b%3Da.firstChild.appendChild(a.createElementNS('http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml'%2C%20'body')))%3B%0Aw(b.test%20%3D%20w)%3B%0Aw(b.setAttribute('onclick'%2C%20'test(%22fire%3A%20%22%20%2B%20event)'))%3B%0Aw(b.onclick)%3B%0Aw(e%3Da.createEvent('Event'))%3B%0Aw(e.initEvent('click'%2C%20false%2C%20false))%3B%0Aw(b.dispatchEvent(e))%3B%0A%3C%2Fscript%3E&quot;&gt;test&lt;/a&gt;--&gt;
 
@@ -35122,8 +35085,7 @@
     of the handler, to the element's object, to the element's
     &lt;a href=#form-owner&gt;form owner&lt;/a&gt;, if it has one, to the element's
     &lt;code&gt;Document&lt;/code&gt; object, to the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of
-    the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of that
-    &lt;code&gt;Document&lt;/code&gt;. Set the function's &lt;code&gt;this&lt;/code&gt;
+    that &lt;code&gt;Document&lt;/code&gt;. Set the function's &lt;code&gt;this&lt;/code&gt;
     parameter to the &lt;code&gt;Element&lt;/code&gt; object representing the
     element. Let this function be the only entry in the script's
     &lt;a href=#list-of-code-entry-points&gt;list of code entry-points&lt;/a&gt;.&lt;/p&gt;
@@ -35141,8 +35103,7 @@
    &lt;a href=&quot;#script's-browsing-context&quot;&gt;script's browsing context&lt;/a&gt;, the &lt;a href=&quot;#script's-character-encoding&quot;&gt;script's
    character encoding&lt;/a&gt;, and the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt;
    from &lt;a href=#the-script-settings-determined-from-the-node&gt;the script settings determined from the node&lt;/a&gt; on
-   which the attribute is being set, and add the &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt; to the &lt;a href=#script-group&gt;script
-   group&lt;/a&gt; determined from that node as well.&lt;/li&gt;
+   which the attribute is being set.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set the corresponding event handler attribute to the
    aforementioned function.&lt;/li&gt;
@@ -35222,7 +35183,7 @@
 
 
 
-  &lt;h5 id=event-handler-attributes-on-elements-and-on-window-objects&gt;&lt;span class=secno&gt;5.4.6.2 &lt;/span&gt;Event handler attributes on elements and on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
+  &lt;h5 id=event-handler-attributes-on-elements-and-on-window-objects&gt;&lt;span class=secno&gt;5.5.6.2 &lt;/span&gt;Event handler attributes on elements and on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects&lt;/h5&gt;
 
   &lt;p&gt;The following are the event handler attributes that must be
   supported by all &lt;a href=#html-elements&gt;HTML elements&lt;/a&gt;, as both content
@@ -35483,7 +35444,7 @@
    &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-unload&gt;unload&lt;/code&gt; event is targeted at or bubbles
    through the object.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=event-firing&gt;&lt;span class=secno&gt;5.4.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=event-firing&gt;&lt;span class=secno&gt;5.5.6.3 &lt;/span&gt;Event firing&lt;/h5&gt;
 
   &lt;p class=XXX&gt;maybe this should be moved higher up
   (terminology? conformance? DOM?) Also, the whole terminology thing
@@ -35553,7 +35514,7 @@
   dispatched in expected ways.&lt;/p&gt;
 
 
-  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;5.4.6.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
+  &lt;h5 id=events-and-the-window-object&gt;&lt;span class=secno&gt;5.5.6.4 &lt;/span&gt;Events and the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object&lt;/h5&gt;
 
   &lt;p&gt;When an event is dispatched at a DOM node in a
   &lt;code&gt;Document&lt;/code&gt; in a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, if the
@@ -35569,7 +35530,7 @@
    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object at the end of the phase, unless bubbling
    has been prevented.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;5.4.6.5 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=runtime-script-errors&gt;&lt;span class=secno&gt;5.5.6.5 &lt;/span&gt;Runtime script errors&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section only applies to user agents that support
   scripting in general and ECMAScript in particular.&lt;/em&gt;&lt;/p&gt;
@@ -35625,9 +35586,9 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;5.5 &lt;/span&gt;User prompts&lt;/h3&gt;
+  &lt;/dl&gt;&lt;h3 id=user-prompts&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;User prompts&lt;/h3&gt;
 
-  &lt;h4 id=simple-dialogs&gt;&lt;span class=secno&gt;5.5.1 &lt;/span&gt;Simple dialogs&lt;/h4&gt;
+  &lt;h4 id=simple-dialogs&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Simple dialogs&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-alert title=dom-alert&gt;&lt;code&gt;alert(&lt;var title=&quot;&quot;&gt;message&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must show
   the given &lt;var title=&quot;&quot;&gt;message&lt;/var&gt; to the user. The user agent
@@ -35654,7 +35615,7 @@
   must return the string that the user responded with.&lt;/p&gt;
 
 
-  &lt;h4 id=printing&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;Printing&lt;/h4&gt;
+  &lt;h4 id=printing&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;Printing&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-print title=dom-print&gt;&lt;code&gt;print()&lt;/code&gt;&lt;/dfn&gt; method,
   when invoked, must run the &lt;a href=#printing-steps&gt;printing steps&lt;/a&gt;.&lt;/p&gt;
@@ -35685,9 +35646,9 @@
 
     &lt;p&gt;The user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called
     &lt;code title=event-beforeprint&gt;beforeprint&lt;/code&gt; at the
-    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the browsing context of the
-    &lt;code&gt;Document&lt;/code&gt; that is being printed, as well as any &lt;a href=#nested-browsing-context title=&quot;nested browsing context&quot;&gt;nested browsing contexts&lt;/a&gt; in
-    it.&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt; that is
+    being printed, as well as any &lt;a href=#nested-browsing-context title=&quot;nested browsing
+    context&quot;&gt;nested browsing contexts&lt;/a&gt; in it.&lt;/p&gt;
 
     &lt;p class=example&gt;The &lt;code title=event-beforeprint&gt;beforeprint&lt;/code&gt; event can be used
     to annotate the printed copy, for instance adding the time at
@@ -35713,9 +35674,9 @@
 
     &lt;p&gt;The user agent must &lt;a href=#fire-a-simple-event&gt;fire a simple event&lt;/a&gt; called
     &lt;code title=event-afterprint&gt;afterprint&lt;/code&gt; at the
-    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the browsing context of the
-    &lt;code&gt;Document&lt;/code&gt; that is being printed, as well as any &lt;a href=#nested-browsing-context title=&quot;nested browsing context&quot;&gt;nested browsing contexts&lt;/a&gt; in
-    it.&lt;/p&gt;
+    &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt; that is
+    being printed, as well as any &lt;a href=#nested-browsing-context title=&quot;nested browsing
+    context&quot;&gt;nested browsing contexts&lt;/a&gt; in it.&lt;/p&gt;
 
     &lt;p class=example&gt;The &lt;code title=event-afterprint&gt;afterprint&lt;/code&gt; event can be used
     to revert annotations added in the earlier event, as well as
@@ -35726,7 +35687,7 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=dialogs-implemented-using-separate-documents&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;Dialogs implemented using separate documents&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=dialogs-implemented-using-separate-documents&gt;&lt;span class=secno&gt;5.6.3 &lt;/span&gt;Dialogs implemented using separate documents&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-showmodaldialog title=dom-showModalDialog&gt;&lt;code&gt;showModalDialog(&lt;var title=&quot;&quot;&gt;url&lt;/var&gt;, &lt;var title=&quot;&quot;&gt;argument&lt;/var&gt;&lt;!--, &lt;var
   title=&quot;&quot;&gt;features&lt;/var&gt;--&gt;)&lt;/code&gt;&lt;/dfn&gt; method, when invoked, must
@@ -35798,8 +35759,9 @@
     the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the &lt;code title=dom-showModalDialog&gt;&lt;a href=#dom-showmodaldialog&gt;showModalDialog()&lt;/a&gt;&lt;/code&gt; method was
     called. The new auxiliary browsing context has no name.&lt;/p&gt;
 
-    &lt;p class=note&gt;This browsing context implements the
-    &lt;code&gt;&lt;a href=#windowmodal&gt;WindowModal&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
+    &lt;p class=note&gt;This &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
+    &lt;code&gt;Document&lt;/code&gt;s' &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects all implement
+    the &lt;code&gt;&lt;a href=#windowmodal&gt;WindowModal&lt;/a&gt;&lt;/code&gt; interface.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -35850,8 +35812,10 @@
 
    &lt;/li&gt;
 
-  &lt;/ol&gt;&lt;p&gt;Browsing contexts created by the above algorithm must implement
-  the &lt;code&gt;&lt;a href=#windowmodal&gt;WindowModal&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
+  &lt;/ol&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects of &lt;code&gt;Document&lt;/code&gt;s hosted
+  by &lt;a href=#browsing-context title=&quot;browsing context&quot;&gt;browsing contexts&lt;/a&gt; created
+  by the above algorithm must all implement the
+  &lt;code&gt;&lt;a href=#windowmodal&gt;WindowModal&lt;/a&gt;&lt;/code&gt; interface:&lt;/p&gt;
 
   &lt;p class=XXX&gt;Really I want the Window object to just gain these
   attributes, as if they were on the Window prototype. That's the XXX
@@ -36090,7 +36054,7 @@
 --&gt;
 
 
-  &lt;h3 id=system-state-and-capabilities&gt;&lt;span class=secno&gt;5.6 &lt;/span&gt;System state and capabilities&lt;/h3&gt;
+  &lt;h3 id=system-state-and-capabilities&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;System state and capabilities&lt;/h3&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-navigator title=dom-navigator&gt;&lt;code&gt;navigator&lt;/code&gt;&lt;/dfn&gt;
   attribute of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface must return an
@@ -36143,7 +36107,7 @@
    --&gt;
 
 
-  &lt;h4 id=client-identification&gt;&lt;span class=secno&gt;5.6.1 &lt;/span&gt;Client identification&lt;/h4&gt;
+  &lt;h4 id=client-identification&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;Client identification&lt;/h4&gt;
 
   &lt;p&gt;In certain cases, despite the best efforts of the entire
   industry, Web browsers have bugs and limitations that Web authors
@@ -36188,7 +36152,7 @@
 
    &lt;!-- vendorSub: Mozilla and Safari only; always returns &quot;&quot; --&gt;
 
-  &lt;/dl&gt;&lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;5.6.2 &lt;/span&gt;Custom protocol and content handlers&lt;/h4&gt;
+  &lt;/dl&gt;&lt;h4 id=custom-handlers&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Custom protocol and content handlers&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-navigator-registerprotocolhandler title=dom-navigator-registerProtocolHandler&gt;&lt;code&gt;registerProtocolHandler()&lt;/code&gt;&lt;/dfn&gt;
   method allows Web sites to register themselves as possible handlers
@@ -36344,7 +36308,7 @@
   not be able to fetch the same data.&lt;/p&gt;
 
 
-  &lt;h5 id=security-and-privacy&gt;&lt;span class=secno&gt;5.6.2.1 &lt;/span&gt;Security and privacy&lt;/h5&gt;
+  &lt;h5 id=security-and-privacy&gt;&lt;span class=secno&gt;5.7.2.1 &lt;/span&gt;Security and privacy&lt;/h5&gt;
 
   &lt;p&gt;These mechanisms can introduce a number of concerns, in
   particular privacy concerns.&lt;/p&gt;
@@ -36424,7 +36388,7 @@
   decision many users are unable to make or even understand).&lt;/p&gt;
 
 
-  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;5.6.2.2 &lt;/span&gt;Sample user interface&lt;/h5&gt;
+  &lt;h5 id=sample-handler-impl&gt;&lt;span class=secno&gt;5.7.2.2 &lt;/span&gt;Sample user interface&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -36504,16 +36468,16 @@
 
 
 
-  &lt;h3 id=offline&gt;&lt;span class=secno&gt;5.7 &lt;/span&gt;Offline Web applications&lt;/h3&gt;
+  &lt;h3 id=offline&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Offline Web applications&lt;/h3&gt;
 
-  &lt;h4 id=introduction-1&gt;&lt;span class=secno&gt;5.7.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-1&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
   &lt;p class=XXX&gt;...&lt;/p&gt;
 
 
-  &lt;h4 id=appcache&gt;&lt;span class=secno&gt;5.7.2 &lt;/span&gt;Application caches&lt;/h4&gt;
+  &lt;h4 id=appcache&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;Application caches&lt;/h4&gt;
 
   &lt;p&gt;An &lt;dfn id=application-cache&gt;application cache&lt;/dfn&gt; is a set of cached resources
   consisting of:&lt;/p&gt;
@@ -36625,10 +36589,10 @@
 
    &lt;li&gt;which application cache the user prefers.
 
-  &lt;/ul&gt;&lt;h4 id=manifests&gt;&lt;span class=secno&gt;5.7.3 &lt;/span&gt;The cache manifest syntax&lt;/h4&gt;
+  &lt;/ul&gt;&lt;h4 id=manifests&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;The cache manifest syntax&lt;/h4&gt;
 
 
-  &lt;h5 id=a-sample-manifest&gt;&lt;span class=secno&gt;5.7.3.1 &lt;/span&gt;A sample manifest&lt;/h5&gt;
+  &lt;h5 id=a-sample-manifest&gt;&lt;span class=secno&gt;5.8.3.1 &lt;/span&gt;A sample manifest&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -36664,7 +36628,7 @@
 style/default.css&lt;/pre&gt;
 
 
-  &lt;h5 id=writing-cache-manifests&gt;&lt;span class=secno&gt;5.7.3.2 &lt;/span&gt;Writing cache manifests&lt;/h5&gt;
+  &lt;h5 id=writing-cache-manifests&gt;&lt;span class=secno&gt;5.8.3.2 &lt;/span&gt;Writing cache manifests&lt;/h5&gt;
 
   &lt;p&gt;Manifests must be served using the &lt;code title=&quot;&quot;&gt;text/cache-manifest&lt;/code&gt; MIME type. All resources served
   using the &lt;code title=&quot;&quot;&gt;text/cache-manifest&lt;/code&gt; MIME type must
@@ -36783,7 +36747,7 @@
   manifests).&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-cache-manifests&gt;&lt;span class=secno&gt;5.7.3.3 &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
+  &lt;h5 id=parsing-cache-manifests&gt;&lt;span class=secno&gt;5.8.3.3 &lt;/span&gt;Parsing cache manifests&lt;/h5&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=parse-a-manifest&gt;parse a manifest&lt;/dfn&gt;, it means
   that the user agent must run the following steps:&lt;/p&gt;
@@ -37022,7 +36986,7 @@
   will be ignored.&lt;/p&gt;
 
 
-  &lt;h4 id=updating-an-application-cache&gt;&lt;span class=secno&gt;5.7.4 &lt;/span&gt;Updating an application cache&lt;/h4&gt;
+  &lt;h4 id=updating-an-application-cache&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;Updating an application cache&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is required (by other parts of this
   specification) to start the &lt;dfn id=application-cache-update-process&gt;application cache update
@@ -37624,7 +37588,7 @@
 
 
 
-  &lt;h4 id=matching-a-fallback-namespace&gt;&lt;span class=secno&gt;5.7.5 &lt;/span&gt;Matching a fallback namespace&lt;/h4&gt;
+  &lt;h4 id=matching-a-fallback-namespace&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;Matching a fallback namespace&lt;/h4&gt;
 
   &lt;p&gt;A URL &lt;dfn id=concept-appcache-matches-fallback title=concept-appcache-matches-fallback&gt;matches a
   fallback namespace&lt;/dfn&gt; if there exists a &lt;a href=#relevant-application-cache&gt;relevant
@@ -37652,7 +37616,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=the-application-cache-selection-algorithm&gt;&lt;span class=secno&gt;5.7.6 &lt;/span&gt;The application cache selection algorithm&lt;/h4&gt;
+  &lt;h4 id=the-application-cache-selection-algorithm&gt;&lt;span class=secno&gt;5.8.6 &lt;/span&gt;The application cache selection algorithm&lt;/h4&gt;
 
   &lt;p&gt;When the &lt;dfn id=concept-appcache-init title=concept-appcache-init&gt;application cache
   selection algorithm&lt;/dfn&gt; algorithm is invoked with a
@@ -37738,7 +37702,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=changesToNetworkingModel&gt;&lt;span class=secno&gt;5.7.6.1 &lt;/span&gt;Changes to the networking model&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=changesToNetworkingModel&gt;&lt;span class=secno&gt;5.8.6.1 &lt;/span&gt;Changes to the networking model&lt;/h5&gt;
 
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#active-document&gt;active
   document&lt;/a&gt; is associated with an &lt;a href=#application-cache&gt;application cache&lt;/a&gt;
@@ -37794,7 +37758,7 @@
   simpler.&lt;/p&gt;
 
 
-  &lt;h4 id=application-cache-api&gt;&lt;span class=secno&gt;5.7.7 &lt;/span&gt;Application cache API&lt;/h4&gt;
+  &lt;h4 id=application-cache-api&gt;&lt;span class=secno&gt;5.8.7 &lt;/span&gt;Application cache API&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=applicationcache&gt;ApplicationCache&lt;/dfn&gt; {
 
@@ -37826,12 +37790,11 @@
   &lt;p&gt;Objects implementing the &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; interface
   must also implement the &lt;code&gt;EventTarget&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;There is a one-to-one mapping from &lt;code&gt;Document&lt;/code&gt; objects
-  to &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; objects. The &lt;dfn id=dom-applicationcache title=dom-applicationCache&gt;&lt;code&gt;applicationCache&lt;/code&gt;&lt;/dfn&gt;
+  &lt;p&gt;There is a one-to-one mapping from &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects to
+  &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; objects. The &lt;dfn id=dom-applicationcache title=dom-applicationCache&gt;&lt;code&gt;applicationCache&lt;/code&gt;&lt;/dfn&gt;
   attribute on &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; objects must return the
   &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object associated with the
-  &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;'s
-  &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;An &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object might be associated with
   an &lt;a href=#application-cache&gt;application cache&lt;/a&gt;. When the &lt;code&gt;Document&lt;/code&gt;
@@ -37994,7 +37957,7 @@
    &lt;dd&gt;&lt;p&gt;Must be invoked whenever an &lt;code title=event-obsolete&gt;obsolete&lt;/code&gt; event is targeted at or bubbles
    through the &lt;code&gt;&lt;a href=#applicationcache&gt;ApplicationCache&lt;/a&gt;&lt;/code&gt; object.&lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h4 id=browser-state&gt;&lt;span class=secno&gt;5.7.8 &lt;/span&gt;Browser state&lt;/h4&gt;
+  &lt;/dl&gt;&lt;h4 id=browser-state&gt;&lt;span class=secno&gt;5.8.8 &lt;/span&gt;Browser state&lt;/h4&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-navigator-online title=dom-navigator-onLine&gt;&lt;code&gt;navigator.onLine&lt;/code&gt;&lt;/dfn&gt;
   attribute must return false if the user agent will not contact the
@@ -38018,27 +37981,28 @@
 
 
 
-  &lt;h3 id=history&gt;&lt;span class=secno&gt;5.8 &lt;/span&gt;Session history and navigation&lt;/h3&gt;
+  &lt;h3 id=history&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Session history and navigation&lt;/h3&gt;
 
-  &lt;h4 id=the-session-history-of-browsing-contexts&gt;&lt;span class=secno&gt;5.8.1 &lt;/span&gt;The session history of browsing contexts&lt;/h4&gt;
+  &lt;h4 id=the-session-history-of-browsing-contexts&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;The session history of browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;The sequence of &lt;code&gt;Document&lt;/code&gt;s in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt; is its &lt;dfn id=session-history&gt;session history&lt;/dfn&gt;.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; objects provide a representation of the
   pages in the session history of &lt;a href=#browsing-context title=&quot;browsing
-  context&quot;&gt;browsing contexts&lt;/a&gt;. Each browsing context has a
-  distinct session history.&lt;/p&gt;
+  context&quot;&gt;browsing contexts&lt;/a&gt;. Each &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt;, including &lt;a href=#nested-browsing-context&gt;nested browsing context&lt;/a&gt;, has
+  a distinct session history.&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a browsing context's session
-  history is associated with a unique instance of the
-  &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; object, although they all must model the same
-  underlying session history.&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt;'s &lt;a href=#session-history&gt;session history&lt;/a&gt; is associated with a
+  unique instance of the &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; object, although they
+  all must model the same underlying &lt;a href=#session-history&gt;session history&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-history title=dom-history&gt;&lt;code&gt;history&lt;/code&gt;&lt;/dfn&gt; attribute
   of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface must return the object
   implementing the &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; interface for that
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; objects represent their &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;'s session history as a flat list of &lt;a href=#session-history-entry title=&quot;session history entry&quot;&gt;session history entries&lt;/a&gt;. Each
@@ -38102,7 +38066,7 @@
   &lt;code&gt;Document&lt;/code&gt; is evicted.&lt;/p&gt;
 
 
-  &lt;h4 id=the-history-interface&gt;&lt;span class=secno&gt;5.8.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+  &lt;h4 id=the-history-interface&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#history-1&gt;History&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=history-1&gt;History&lt;/dfn&gt; {
   readonly attribute long &lt;a href=#dom-history-length title=dom-history-length&gt;length&lt;/a&gt;;
@@ -38229,7 +38193,7 @@
   history.&lt;/p&gt;
 
 
-  &lt;h4 id=activating-state-object-entries&gt;&lt;span class=secno&gt;5.8.3 &lt;/span&gt;&lt;dfn title=&quot;activate the state object&quot;&gt;Activating state object entries&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=activating-state-object-entries&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;&lt;dfn title=&quot;activate the state object&quot;&gt;Activating state object entries&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an entry in the session history is activated (which happens
   during &lt;a href=#traverse-the-history title=&quot;traverse the history&quot;&gt;session traversal&lt;/a&gt;,
@@ -38249,13 +38213,13 @@
      string &quot;complete&quot;&lt;/dt&gt;
 
      &lt;dd&gt;&lt;p&gt;&lt;a href=#queue-a-task&gt;Queue a task&lt;/a&gt; to fire a &lt;dfn id=event-popstate title=event-popstate&gt;&lt;code&gt;popstate&lt;/code&gt;&lt;/dfn&gt; event in no
-     namespace on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing
-     context&lt;/a&gt;, using the &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt; interface,
-     with the &lt;code title=dom-PopStateEvent-state&gt;&lt;a href=#dom-popstateevent-state&gt;state&lt;/a&gt;&lt;/code&gt;
-     attribute set to the value of &lt;var title=&quot;&quot;&gt;state&lt;/var&gt;. This
-     event must bubble but not be cancelable and has no default
-     action. The &lt;a href=#task-source&gt;task source&lt;/a&gt; for this task is the
-     &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task source&lt;/a&gt;.&lt;/dd&gt;
+     namespace on the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the
+     &lt;code&gt;Document&lt;/code&gt;, using the &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt;
+     interface, with the &lt;code title=dom-PopStateEvent-state&gt;&lt;a href=#dom-popstateevent-state&gt;state&lt;/a&gt;&lt;/code&gt; attribute set to the
+     value of &lt;var title=&quot;&quot;&gt;state&lt;/var&gt;. This event must bubble but
+     not be cancelable and has no default action. The &lt;a href=#task-source&gt;task
+     source&lt;/a&gt; for this task is the &lt;a href=#dom-manipulation-task-source&gt;DOM manipulation task
+     source&lt;/a&gt;.&lt;/dd&gt;
 
      &lt;dt&gt;Otherwise&lt;/dt&gt;
 
@@ -38288,7 +38252,7 @@
 
 
 
-  &lt;h4 id=the-location-interface&gt;&lt;span class=secno&gt;5.8.4 &lt;/span&gt;The &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+  &lt;h4 id=the-location-interface&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;The &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
   &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;'s session history is associated with a unique
@@ -38302,7 +38266,7 @@
   &lt;p&gt;The &lt;dfn id=dom-location title=dom-location&gt;&lt;code&gt;location&lt;/code&gt;&lt;/dfn&gt;
   attribute of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; interface must return the
   &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object for that &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object's
-  &lt;a href=#active-document&gt;active document&lt;/a&gt;.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; objects provide a representation of &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;their document's address&lt;/a&gt;, and
   allow the &lt;a href=#current-entry&gt;current entry&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
@@ -38405,7 +38369,7 @@
   &lt;code&gt;&lt;a href=#syntax_err&gt;SYNTAX_ERR&lt;/a&gt;&lt;/code&gt; exception instead.&lt;/p&gt;
 
 
-  &lt;h5 id=security-3&gt;&lt;span class=secno&gt;5.8.4.1 &lt;/span&gt;Security&lt;/h5&gt;
+  &lt;h5 id=security-3&gt;&lt;span class=secno&gt;5.9.4.1 &lt;/span&gt;Security&lt;/h5&gt;
 
   &lt;p&gt;User agents must raise a &lt;code&gt;&lt;a href=#security_err&gt;SECURITY_ERR&lt;/a&gt;&lt;/code&gt; exception whenever
   any of the members of a &lt;code&gt;&lt;a href=#location&gt;Location&lt;/a&gt;&lt;/code&gt; object are accessed by
@@ -38421,7 +38385,7 @@
   &lt;/ul&gt;&lt;p&gt;User agents must not allow scripts to override the &lt;code title=dom-location-href&gt;&lt;a href=#dom-location-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute's setter.&lt;/p&gt;
 
 
-  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;5.8.5 &lt;/span&gt;Implementation notes for session history&lt;/h4&gt;
+  &lt;h4 id=history-notes&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;Implementation notes for session history&lt;/h4&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -38459,9 +38423,9 @@
 
 
 
-  &lt;h3 id=browsing-the-web&gt;&lt;span class=secno&gt;5.9 &lt;/span&gt;Browsing the Web&lt;/h3&gt;
+  &lt;h3 id=browsing-the-web&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Browsing the Web&lt;/h3&gt;
 
-  &lt;h4 id=navigating-across-documents&gt;&lt;span class=secno&gt;5.9.1 &lt;/span&gt;Navigating across documents&lt;/h4&gt;
+  &lt;h4 id=navigating-across-documents&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Navigating across documents&lt;/h4&gt;
 
   &lt;p&gt;Certain actions cause the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; to
   &lt;i&gt;&lt;a href=#navigate&gt;navigate&lt;/a&gt;&lt;/i&gt; to a new resource. Navigation always involves
@@ -38794,7 +38758,7 @@
 
     &lt;/dl&gt;&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=read-html&gt;&lt;span class=secno&gt;5.9.2 &lt;/span&gt;&lt;dfn title=navigate-html&gt;Page load processing model for HTML files&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=read-html&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;&lt;dfn title=navigate-html&gt;Page load processing model for HTML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an HTML document is to be loaded in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;, the user agent must create a &lt;code&gt;Document&lt;/code&gt;
@@ -38828,7 +38792,7 @@
 
 
 
-  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;5.9.3 &lt;/span&gt;&lt;dfn title=navigate-xml&gt;Page load processing model for XML files&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=read-xml&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;&lt;dfn title=navigate-xml&gt;Page load processing model for XML files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When faced with displaying an XML file inline, user agents must
   first create a &lt;code&gt;Document&lt;/code&gt; object, following the
@@ -38887,7 +38851,7 @@
   &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;5.9.4 &lt;/span&gt;&lt;dfn title=navigate-text&gt;Page load processing model for text files&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=read-text&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;&lt;dfn title=navigate-text&gt;Page load processing model for text files&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a plain text document is to be loaded in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;, the user agent should create a &lt;code&gt;Document&lt;/code&gt;
@@ -38929,7 +38893,7 @@
   etc.&lt;/p&gt;
 
 
-  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;5.9.5 &lt;/span&gt;&lt;dfn title=navigate-image&gt;Page load processing model for images&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=read-image&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;&lt;dfn title=navigate-image&gt;Page load processing model for images&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When an image resource is to be loaded in a &lt;a href=#browsing-context&gt;browsing
   context&lt;/a&gt;, the user agent should create a &lt;code&gt;Document&lt;/code&gt;
@@ -38962,7 +38926,7 @@
   script, to give the document a &lt;code&gt;&lt;a href=#the-title-element&gt;title&lt;/a&gt;&lt;/code&gt;, etc.&lt;/p&gt;
 
 
-  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;5.9.6 &lt;/span&gt;&lt;dfn title=navigate-plugin&gt;Page load processing model for content that uses plugins&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=read-plugin&gt;&lt;span class=secno&gt;5.10.6 &lt;/span&gt;&lt;dfn title=navigate-plugin&gt;Page load processing model for content that uses plugins&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a resource that requires an external resource to be rendered
   is to be loaded in a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, the user agent
@@ -38999,7 +38963,7 @@
   context&lt;/a&gt;, the synthesized &lt;code&gt;&lt;a href=#the-embed-element&gt;embed&lt;/a&gt;&lt;/code&gt; element will &lt;a href=#sandboxPluginEmbed&gt;fail to render the content&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;5.9.7 &lt;/span&gt;&lt;dfn title=navigate-ua-inline&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=read-ua-inline&gt;&lt;span class=secno&gt;5.10.7 &lt;/span&gt;&lt;dfn title=navigate-ua-inline&gt;Page load processing model for inline content that doesn't have a DOM&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user agent is to display a user agent page inline in a
   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;, the user agent should create a
@@ -39027,7 +38991,7 @@
 
 
 
-  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;5.9.8 &lt;/span&gt;&lt;dfn title=navigate-fragid&gt;Navigating to a fragment identifier&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=scroll-to-fragid&gt;&lt;span class=secno&gt;5.10.8 &lt;/span&gt;&lt;dfn title=navigate-fragid&gt;Navigating to a fragment identifier&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is supposed to navigate to a fragment
   identifier, then the user agent must &lt;a href=#update-the-session-history-with-the-new-page&gt;update the session
@@ -39084,7 +39048,7 @@
   element; otherwise there is no &lt;i&gt;target element&lt;/i&gt;. &lt;a href=#refsSELECTORS&gt;[SELECTORS]&lt;/a&gt;&lt;/p&gt;
 
 
-  &lt;h4 id=history-traversal&gt;&lt;span class=secno&gt;5.9.9 &lt;/span&gt;History traversal&lt;/h4&gt;
+  &lt;h4 id=history-traversal&gt;&lt;span class=secno&gt;5.10.9 &lt;/span&gt;History traversal&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is required to &lt;dfn id=traverse-the-history&gt;traverse the history&lt;/dfn&gt;
   to a &lt;i&gt;specified entry&lt;/i&gt;, the user agent must act as
@@ -39113,19 +39077,7 @@
    &lt;code&gt;Document&lt;/code&gt; object than the &lt;a href=#current-entry&gt;current entry&lt;/a&gt;
    then the user agent must run the following substeps:&lt;/p&gt;
 
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Freeze the &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;a href=#current-script-group&gt;current
-     script group&lt;/a&gt;, as well as the &lt;a href=#current-script-group&gt;current script
-     group&lt;/a&gt; of any &lt;a href=#active-document title=&quot;active document&quot;&gt;active
-     documents&lt;/a&gt; in &lt;a href=#nested-browsing-context title=&quot;nested browsing context&quot;&gt;nested
-     browsing contexts&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the browsing context's default view's &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-     object to the &lt;a href=#active-document&gt;active document&lt;/a&gt;'s
-     &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#list-of-added-properties&gt;list of added
-     properties&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
+    &lt;ol&gt;&lt;li&gt;If the browsing context is a &lt;a href=#top-level-browsing-context&gt;top-level browsing
      context&lt;/a&gt; (and not an &lt;a href=#auxiliary-browsing-context&gt;auxiliary browsing
      context&lt;/a&gt;), and the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
      &lt;code&gt;Document&lt;/code&gt; of the &lt;i&gt;specified entry&lt;/i&gt; is not the
@@ -39164,17 +39116,6 @@
 
       &lt;/ol&gt;&lt;/li&gt;
 
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;code&gt;Document&lt;/code&gt;'s
-     &lt;a href=#list-of-added-properties&gt;list of added properties&lt;/a&gt; to browsing context's
-     default view's &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Unfreeze the &lt;a href=#active-document&gt;active document&lt;/a&gt;'s &lt;a href=#current-script-group&gt;current
-     script group&lt;/a&gt;, as well as the &lt;a href=#current-script-group&gt;current script
-     group&lt;/a&gt; of any &lt;a href=#active-document title=&quot;active document&quot;&gt;active
-     documents&lt;/a&gt; in &lt;a href=#nested-browsing-context title=&quot;nested browsing context&quot;&gt;nested
-     browsing contexts&lt;/a&gt;.&lt;/li&gt;
-
     &lt;/ol&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;i&gt;specified entry&lt;/i&gt; is a state object or the
@@ -39203,7 +39144,7 @@
 
 
 
-  &lt;h4 id=unloading-documents&gt;&lt;span class=secno&gt;5.9.10 &lt;/span&gt;Unloading documents&lt;/h4&gt;
+  &lt;h4 id=unloading-documents&gt;&lt;span class=secno&gt;5.10.10 &lt;/span&gt;Unloading documents&lt;/h4&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn id=unload-a-document&gt;unload a document&lt;/dfn&gt;, it must run
   the following steps. These steps are passed an argument, &lt;var title=&quot;&quot;&gt;recycle&lt;/var&gt;, which is either true or false, indicating
@@ -39217,8 +39158,7 @@
    which does not bubble but is cancelable.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Dispatch &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; at the
-   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt;'s
-   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/li&gt;
+   &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any event listeners were triggered by the previous step,
    then set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/li&gt;
@@ -39244,22 +39184,22 @@
 
    &lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; called &lt;code title=event-unload&gt;unload&lt;/code&gt; at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
-   object of the &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#browsing-context&gt;browsing
-   context&lt;/a&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#fire-a-simple-event&gt;Fire a simple event&lt;/a&gt; called &lt;code title=event-unload&gt;unload&lt;/code&gt; at the &lt;code&gt;Document&lt;/code&gt;'s
+   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any event listeners were triggered by the previous step,
    then set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there are any outstanding transactions that have
    callbacks that involve &lt;a href=#concept-script title=concept-script&gt;scripts&lt;/a&gt;
-   that are in the document's &lt;a href=#current-script-group&gt;current script group&lt;/a&gt;, roll
-   them back (without invoking any of the callbacks) and set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/p&gt;
+   whose &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt; is
+   the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object, roll them
+   back (without invoking any of the callbacks) and set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;recycle&lt;/var&gt; are both false, &lt;a href=#discard-a-document title=&quot;discard a
    document&quot;&gt;discard the &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h5 id=event-definition&gt;&lt;span class=secno&gt;5.9.10.1 &lt;/span&gt;Event definition&lt;/h5&gt;
+  &lt;/ol&gt;&lt;h5 id=event-definition&gt;&lt;span class=secno&gt;5.10.10.1 &lt;/span&gt;Event definition&lt;/h5&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=beforeunloadevent&gt;BeforeUnloadEvent&lt;/dfn&gt; : Event {
            attribute DOMString &lt;a href=#dom-beforeunloadevent-returnvalue title=dom-BeforeUnloadEvent-returnValue&gt;returnValue&lt;/a&gt;;
@@ -39277,11 +39217,11 @@
 
 
 
-  &lt;h3 id=structured-client-side-storage&gt;&lt;span class=secno&gt;5.10 &lt;/span&gt;Structured client-side storage&lt;/h3&gt;
+  &lt;h3 id=structured-client-side-storage&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Structured client-side storage&lt;/h3&gt;
 
-  &lt;h4 id=storage&gt;&lt;span class=secno&gt;5.10.1 &lt;/span&gt;Storing name/value pairs&lt;/h4&gt;
+  &lt;h4 id=storage&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Storing name/value pairs&lt;/h4&gt;
 
-  &lt;h5 id=introduction-2&gt;&lt;span class=secno&gt;5.10.1.1 &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;h5 id=introduction-2&gt;&lt;span class=secno&gt;5.11.1.1 &lt;/span&gt;Introduction&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -39383,7 +39323,7 @@
   convert it to a string.&lt;/p&gt;
 
 
-  &lt;h5 id=the-storage-interface&gt;&lt;span class=secno&gt;5.10.1.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
+  &lt;h5 id=the-storage-interface&gt;&lt;span class=secno&gt;5.11.1.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; interface&lt;/h5&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=storage-0&gt;Storage&lt;/dfn&gt; {
   readonly attribute unsigned long &lt;a href=#dom-storage-length title=dom-Storage-length&gt;length&lt;/a&gt;;
@@ -39496,7 +39436,7 @@
 
 
 
-  &lt;h5 id=the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.10.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
+  &lt;h5 id=the-sessionstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.3 &lt;/span&gt;The &lt;code title=dom-sessionStorage&gt;&lt;a href=#dom-sessionstorage&gt;sessionStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-sessionstorage title=dom-sessionStorage&gt;&lt;code&gt;sessionStorage&lt;/code&gt;&lt;/dfn&gt;
   attribute represents the set of storage areas specific to the
@@ -39556,7 +39496,7 @@
   storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=the-localstorage-attribute&gt;&lt;span class=secno&gt;5.10.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
+  &lt;h5 id=the-localstorage-attribute&gt;&lt;span class=secno&gt;5.11.1.4 &lt;/span&gt;The &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt; attribute&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-localstorage title=dom-localStorage&gt;&lt;code&gt;localStorage&lt;/code&gt;&lt;/dfn&gt;
   object provides a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object for an
@@ -39576,10 +39516,9 @@
   &lt;p&gt;When the &lt;code title=dom-localStorage&gt;&lt;a href=#dom-localstorage&gt;localStorage&lt;/a&gt;&lt;/code&gt;
   attribute is accessed, the user agent must check to see if it has
   allocated a local storage area for the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
-  &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of
-  the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked. If
-  it has not, a new storage area for that &lt;a href=#origin-0&gt;origin&lt;/a&gt; must be
-  created.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
+  method was invoked. If it has not, a new storage area for that
+  &lt;a href=#origin-0&gt;origin&lt;/a&gt; must be created.&lt;/p&gt;
 
   &lt;p&gt;The user agent must then return the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object
   associated with that origin's local storage area. Each
@@ -39595,7 +39534,7 @@
   storage area, other than &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;, a &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event must be fired, as &lt;a href=#event-storage title=event-storage&gt;described below&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=the-storage-event&gt;&lt;span class=secno&gt;5.10.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event&lt;/h5&gt;
+  &lt;h5 id=the-storage-event&gt;&lt;span class=secno&gt;5.11.1.5 &lt;/span&gt;The &lt;code title=event-storage&gt;&lt;a href=#event-storage&gt;storage&lt;/a&gt;&lt;/code&gt; event&lt;/h5&gt;
 
   &lt;!-- XXX fix up for workers: target is wrong, source and storageArea
   definitions are wrong --&gt;
@@ -39609,9 +39548,9 @@
   &lt;p&gt;When this happens, the user agent must dispatch an event with the
   name &lt;code&gt;&lt;a href=#storage-0&gt;storage&lt;/a&gt;&lt;/code&gt;, with no namespace, which does not bubble
   but is cancelable, and which uses the &lt;code&gt;&lt;a href=#storageevent&gt;StorageEvent&lt;/a&gt;&lt;/code&gt;
-  interface, at each &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose &lt;a href=#active-document&gt;active
-  document&lt;/a&gt; has a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object that is
-  affected.&lt;/p&gt;
+  interface, at each &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object whose
+  &lt;code&gt;Document&lt;/code&gt; object both has a &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object
+  that is affected, and is &lt;a href=#fully-active&gt;fully active&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the event is being fired due to an invocation of the
   &lt;code title=dom-Storage-setItem&gt;&lt;a href=#dom-storage-setitem&gt;setItem()&lt;/a&gt;&lt;/code&gt; or &lt;code title=dom-Storage-removeItem&gt;&lt;a href=#dom-storage-removeitem&gt;removeItem()&lt;/a&gt;&lt;/code&gt; methods, the
@@ -39629,27 +39568,27 @@
 
   &lt;p&gt;In addition, the event must have its &lt;code title=dom-StorageEvent-url&gt;&lt;a href=#dom-storageevent-url&gt;url&lt;/a&gt;&lt;/code&gt; attribute set to &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;the address of the document&lt;/a&gt;
   whose &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object was affected; its &lt;code title=dom-StorageEvent-source&gt;&lt;a href=#dom-storageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute set to the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; that
-  that document is in, if the two documents are in the same &lt;a href=#unit-of-related-browsing-contexts&gt;unit
-  of related browsing contexts&lt;/a&gt;, or null otherwise; and its
-  &lt;code title=dom-StorageEvent-storageArea&gt;&lt;a href=#dom-storageevent-storagearea&gt;storageArea&lt;/a&gt;&lt;/code&gt;
-  attribute set to the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object from the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the target &lt;code&gt;Document&lt;/code&gt; that
-  represents the same kind of &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; area as was
-  affected (i.e. session or local).&lt;/p&gt;
+  that document's &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
+  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object, if the two documents are in the
+  same &lt;a href=#unit-of-related-browsing-contexts&gt;unit of related browsing contexts&lt;/a&gt;, or null
+  otherwise; and its &lt;code title=dom-StorageEvent-storageArea&gt;&lt;a href=#dom-storageevent-storagearea&gt;storageArea&lt;/a&gt;&lt;/code&gt; attribute
+  set to the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object from the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
+  object of the target &lt;code&gt;Document&lt;/code&gt; that represents the same
+  kind of &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; area as was affected (i.e. session or
+  local).&lt;/p&gt;
 
 
-  &lt;h6 id=event-definition-0&gt;&lt;span class=secno&gt;5.10.1.5.1 &lt;/span&gt;Event definition&lt;/h6&gt;
+  &lt;h6 id=event-definition-0&gt;&lt;span class=secno&gt;5.11.1.5.1 &lt;/span&gt;Event definition&lt;/h6&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=storageevent&gt;StorageEvent&lt;/dfn&gt; : Event {
   readonly attribute DOMString &lt;a href=#dom-storageevent-key title=dom-StorageEvent-key&gt;key&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-storageevent-oldvalue title=dom-StorageEvent-oldValue&gt;oldValue&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-storageevent-newvalue title=dom-StorageEvent-newValue&gt;newValue&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-storageevent-url title=dom-StorageEvent-url&gt;url&lt;/a&gt;;
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-storageevent-source title=dom-StorageEvent-source&gt;source&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-storageevent-source title=dom-StorageEvent-source&gt;source&lt;/a&gt;;
   readonly attribute &lt;a href=#storage-0&gt;Storage&lt;/a&gt; &lt;a href=#dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;storageArea&lt;/a&gt;;
-  void &lt;a href=#dom-storageevent-initstorageevent title=dom-StorageEvent-initStorageEvent&gt;initStorageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#window&gt;Window&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
-  void &lt;a href=#dom-storageevent-initstorageeventns title=dom-StorageEvent-initStorageEventNS&gt;initStorageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#window&gt;Window&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
+  void &lt;a href=#dom-storageevent-initstorageevent title=dom-StorageEvent-initStorageEvent&gt;initStorageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
+  void &lt;a href=#dom-storageevent-initstorageeventns title=dom-StorageEvent-initStorageEventNS&gt;initStorageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#storage-0&gt;Storage&lt;/a&gt; storageAreaArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-storageevent-initstorageevent title=dom-StorageEvent-initStorageEvent&gt;&lt;code&gt;initStorageEvent()&lt;/code&gt;&lt;/dfn&gt;
@@ -39671,8 +39610,8 @@
   changed.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-storageevent-source title=dom-StorageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
-  represents the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the document whose key
-  changed.&lt;/p&gt;
+  represents the &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#browsing-context&gt;browsing
+  context&lt;/a&gt; of the document whose key changed.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-storageevent-storagearea title=dom-StorageEvent-storageArea&gt;&lt;code&gt;storageArea&lt;/code&gt;&lt;/dfn&gt;
   attribute represents the &lt;code&gt;&lt;a href=#storage-0&gt;Storage&lt;/a&gt;&lt;/code&gt; object that was
@@ -39680,7 +39619,7 @@
 
 
 
-  &lt;h5 id=threads&gt;&lt;span class=secno&gt;5.10.1.6 &lt;/span&gt;Threads&lt;/h5&gt;
+  &lt;h5 id=threads&gt;&lt;span class=secno&gt;5.11.1.6 &lt;/span&gt;Threads&lt;/h5&gt;
 
   &lt;p&gt;Multiple browsing contexts must be able to access the local
   storage areas simultaneously in such a manner that scripts cannot
@@ -39707,7 +39646,7 @@
 
 
 
-  &lt;h4 id=sql&gt;&lt;span class=secno&gt;5.10.2 &lt;/span&gt;Database storage&lt;/h4&gt;
+  &lt;h4 id=sql&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;Database storage&lt;/h4&gt;
 
   &lt;!-- Feature requests for future versions (v2):
         * deleting databases
@@ -39715,7 +39654,7 @@
         * handling the database getting corrupted
   --&gt;
 
-  &lt;h5 id=introduction-3&gt;&lt;span class=secno&gt;5.10.2.1 &lt;/span&gt;Introduction&lt;/h5&gt;
+  &lt;h5 id=introduction-3&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Introduction&lt;/h5&gt;
 
   &lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
 
@@ -39730,7 +39669,7 @@
    executeSql('SELECT rowid FROM t WHERE c IN (' + q + ')', array, ...);
 --&gt;
 
-  &lt;h5 id=databases&gt;&lt;span class=secno&gt;5.10.2.2 &lt;/span&gt;Databases&lt;/h5&gt;
+  &lt;h5 id=databases&gt;&lt;span class=secno&gt;5.11.2.2 &lt;/span&gt;Databases&lt;/h5&gt;
 
   &lt;p&gt;Each &lt;i&gt;&lt;a href=#origin-0&gt;origin&lt;/a&gt;&lt;/i&gt; has an associated set of databases. Each
   database has a name and a current version. There is no way to
@@ -39752,8 +39691,8 @@
 
   &lt;p&gt;The &lt;code title=dom-opendatabase&gt;&lt;a href=#dom-opendatabase&gt;openDatabase()&lt;/a&gt;&lt;/code&gt; method
   must use and create databases from the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of the
-  &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of
-  the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
+  method was invoked.&lt;/p&gt;
 
   &lt;p&gt;If the database version provided is not the empty string, and the
   database already exists but has a different version, or no version,
@@ -39864,7 +39803,7 @@
   &lt;/ol&gt;&lt;p&gt;...and the &lt;i&gt;mode&lt;/i&gt; being read/write.&lt;/p&gt;
 
 
-  &lt;h5 id=executing-sql-statements&gt;&lt;span class=secno&gt;5.10.2.3 &lt;/span&gt;Executing SQL statements&lt;/h5&gt;
+  &lt;h5 id=executing-sql-statements&gt;&lt;span class=secno&gt;5.11.2.3 &lt;/span&gt;Executing SQL statements&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=dom-database-transaction&gt;&lt;a href=#dom-database-transaction&gt;transaction()&lt;/a&gt;&lt;/code&gt;
   and &lt;code title=dom-database-changeVersion&gt;&lt;a href=#dom-database-changeversion&gt;changeVersion()&lt;/a&gt;&lt;/code&gt;
@@ -39973,7 +39912,7 @@
   define the exact SQL subset required in more detail.&lt;/p&gt;
 
 
-  &lt;h5 id=database-query-results&gt;&lt;span class=secno&gt;5.10.2.4 &lt;/span&gt;Database query results&lt;/h5&gt;
+  &lt;h5 id=database-query-results&gt;&lt;span class=secno&gt;5.11.2.4 &lt;/span&gt;Database query results&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=dom-transaction-executeSql&gt;executeSql()&lt;/code&gt;
   method invokes its callback with a &lt;code&gt;&lt;a href=#sqlresultset&gt;SQLResultSet&lt;/a&gt;&lt;/code&gt; object
@@ -40035,7 +39974,7 @@
   by the database.&lt;/p&gt;
 
 
-  &lt;h5 id=errors&gt;&lt;span class=secno&gt;5.10.2.5 &lt;/span&gt;Errors&lt;/h5&gt;
+  &lt;h5 id=errors&gt;&lt;span class=secno&gt;5.11.2.5 &lt;/span&gt;Errors&lt;/h5&gt;
 
   &lt;p&gt;Errors in the database API are reported using callbacks that have
   a &lt;code&gt;&lt;a href=#sqlerror&gt;SQLError&lt;/a&gt;&lt;/code&gt; object as one of their arguments.&lt;/p&gt;
@@ -40098,7 +40037,7 @@
 
 
 
-  &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;5.10.2.6 &lt;/span&gt;Processing model&lt;/h5&gt;
+  &lt;h5 id=processing-model-2&gt;&lt;span class=secno&gt;5.11.2.6 &lt;/span&gt;Processing model&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn id=transaction-steps&gt;transaction steps&lt;/dfn&gt; are as follows. These steps must
   be run asynchronously. These steps are invoked with a &lt;i&gt;transaction
@@ -40226,7 +40165,7 @@
    transaction. Rollback the transaction. Any still-pending statements
    in the transaction are discarded.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h4 id=disk-space&gt;&lt;span class=secno&gt;5.10.3 &lt;/span&gt;Disk space&lt;/h4&gt;
+  &lt;/ol&gt;&lt;h4 id=disk-space&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Disk space&lt;/h4&gt;
 
   &lt;p&gt;User agents should limit the total amount of space allowed for
   storage areas and databases.&lt;/p&gt;
@@ -40253,9 +40192,9 @@
   update this suggestion in future.&lt;/p&gt;
 
 
-  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;5.10.4 &lt;/span&gt;Privacy&lt;/h4&gt;
+  &lt;h4 id=privacy&gt;&lt;span class=secno&gt;5.11.4 &lt;/span&gt;Privacy&lt;/h4&gt;
 
-  &lt;h5 id=user-tracking&gt;&lt;span class=secno&gt;5.10.4.1 &lt;/span&gt;User tracking&lt;/h5&gt;
+  &lt;h5 id=user-tracking&gt;&lt;span class=secno&gt;5.11.4.1 &lt;/span&gt;User tracking&lt;/h5&gt;
 
   &lt;p&gt;A third-party advertiser (or any entity capable of getting
   content distributed to multiple sites) could use a unique identifier
@@ -40370,7 +40309,7 @@
   separate sessions into coherent user profiles.&lt;/p&gt;
 
 
-  &lt;h5 id=cookie-resurrection&gt;&lt;span class=secno&gt;5.10.4.2 &lt;/span&gt;Cookie resurrection&lt;/h5&gt;
+  &lt;h5 id=cookie-resurrection&gt;&lt;span class=secno&gt;5.11.4.2 &lt;/span&gt;Cookie resurrection&lt;/h5&gt;
 
   &lt;p&gt;If the user interface for persistent storage presents data in the
   persistent storage features separately from data in HTTP session
@@ -40380,9 +40319,9 @@
   privacy.&lt;/p&gt;
 
 
-  &lt;h4 id=security-4&gt;&lt;span class=secno&gt;5.10.5 &lt;/span&gt;Security&lt;/h4&gt;
+  &lt;h4 id=security-4&gt;&lt;span class=secno&gt;5.11.5 &lt;/span&gt;Security&lt;/h4&gt;
 
-  &lt;h5 id=dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.10.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/h5&gt;
+  &lt;h5 id=dns-spoofing-attacks&gt;&lt;span class=secno&gt;5.11.5.1 &lt;/span&gt;DNS spoofing attacks&lt;/h5&gt;
 
   &lt;p&gt;Because of the potential for DNS spoofing attacks, one cannot
   guarantee that a host claiming to be in a certain domain really is
@@ -40392,7 +40331,7 @@
   local storage areas and databases.&lt;/p&gt;
 
 
-  &lt;h5 id=cross-directory-attacks&gt;&lt;span class=secno&gt;5.10.5.2 &lt;/span&gt;Cross-directory attacks&lt;/h5&gt;
+  &lt;h5 id=cross-directory-attacks&gt;&lt;span class=secno&gt;5.11.5.2 &lt;/span&gt;Cross-directory attacks&lt;/h5&gt;
 
   &lt;p&gt;Different authors sharing one host name, for example users
   hosting content on &lt;code&gt;geocities.com&lt;/code&gt;, all share one
@@ -40408,7 +40347,7 @@
   path.&lt;/p&gt;
 
 
-  &lt;h5 id=implementation-risks&gt;&lt;span class=secno&gt;5.10.5.3 &lt;/span&gt;Implementation risks&lt;/h5&gt;
+  &lt;h5 id=implementation-risks&gt;&lt;span class=secno&gt;5.11.5.3 &lt;/span&gt;Implementation risks&lt;/h5&gt;
 
   &lt;p&gt;The two primary risks when implementing these persistent storage
   features are letting hostile sites read information from other
@@ -40433,7 +40372,7 @@
   in this specification is important for user security.&lt;/p&gt;
 
 
-  &lt;h5 id=sql-and-user-agents&gt;&lt;span class=secno&gt;5.10.5.4 &lt;/span&gt;SQL and user agents&lt;/h5&gt;
+  &lt;h5 id=sql-and-user-agents&gt;&lt;span class=secno&gt;5.11.5.4 &lt;/span&gt;SQL and user agents&lt;/h5&gt;
 
   &lt;p&gt;User agent implementors are strongly encouraged to audit all
   their supported SQL statements for security implications. For
@@ -40447,7 +40386,7 @@
   ECMAScript is implicitly UTF-16.&lt;/p&gt;
 
 
-  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;5.10.5.5 &lt;/span&gt;SQL injection&lt;/h5&gt;
+  &lt;h5 id=sql-injection&gt;&lt;span class=secno&gt;5.11.5.5 &lt;/span&gt;SQL injection&lt;/h5&gt;
 
   &lt;p&gt;Authors are strongly recommended to make use of the &lt;code title=&quot;&quot;&gt;?&lt;/code&gt; placeholder feature of the &lt;code title=dom-sqltransaction-executeSql&gt;&lt;a href=#dom-sqltransaction-executesql&gt;executeSql()&lt;/a&gt;&lt;/code&gt; method,
   and to never construct SQL statements on the fly.&lt;/p&gt;
@@ -40456,10 +40395,10 @@
 
 
 
-  &lt;h3 id=links&gt;&lt;span class=secno&gt;5.11 &lt;/span&gt;Links&lt;/h3&gt;
+  &lt;h3 id=links&gt;&lt;span class=secno&gt;5.12 &lt;/span&gt;Links&lt;/h3&gt;
 
 
-  &lt;h4 id=hyperlink-elements&gt;&lt;span class=secno&gt;5.11.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
+  &lt;h4 id=hyperlink-elements&gt;&lt;span class=secno&gt;5.12.1 &lt;/span&gt;Hyperlink elements&lt;/h4&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;
   elements can, in certain situations described in the definitions of
@@ -40534,7 +40473,7 @@
 
 
 
-  &lt;h4 id=following-hyperlinks&gt;&lt;span class=secno&gt;5.11.2 &lt;/span&gt;&lt;dfn&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=following-hyperlinks&gt;&lt;span class=secno&gt;5.12.2 &lt;/span&gt;&lt;dfn&gt;Following hyperlinks&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When a user &lt;em&gt;follows a hyperlink&lt;/em&gt;, the user agent must
   &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolve&lt;/a&gt; the &lt;a href=#url&gt;URL&lt;/a&gt;
@@ -40592,7 +40531,7 @@
   &lt;a href=#source-browsing-context&gt;source browsing context&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=hyperlink-auditing&gt;&lt;span class=secno&gt;5.11.2.1 &lt;/span&gt;Hyperlink auditing&lt;/h5&gt;
+  &lt;h5 id=hyperlink-auditing&gt;&lt;span class=secno&gt;5.12.2.1 &lt;/span&gt;Hyperlink auditing&lt;/h5&gt;
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; hyperlink element has a
   &lt;code title=attr-hyperlink-ping&gt;&lt;a href=#ping&gt;ping&lt;/a&gt;&lt;/code&gt; attribute, and the
@@ -40720,7 +40659,7 @@
 
 
 
-  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;5.11.3 &lt;/span&gt;Link types&lt;/h4&gt;
+  &lt;h4 id=linkTypes&gt;&lt;span class=secno&gt;5.12.3 &lt;/span&gt;Link types&lt;/h4&gt;
 
   &lt;p&gt;The following table summarizes the link types that are defined by
   this specification. This table is non-normative; the actual
@@ -40889,7 +40828,7 @@
     --&gt;
 
 
-  &lt;h5 id=link-type-alternate&gt;&lt;span class=secno&gt;5.11.3.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-alternate&gt;&lt;code&gt;alternate&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-alternate&gt;&lt;span class=secno&gt;5.12.3.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-alternate&gt;&lt;code&gt;alternate&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-alternate&gt;&lt;a href=#link-type-alternate&gt;alternate&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -40950,7 +40889,7 @@
   alternative representations of each other.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-archives&gt;&lt;span class=secno&gt;5.11.3.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-archives&gt;&lt;code&gt;archives&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-archives&gt;&lt;span class=secno&gt;5.12.3.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-archives&gt;&lt;code&gt;archives&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-archives&gt;&lt;a href=#link-type-archives&gt;archives&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -40968,7 +40907,7 @@
   &lt;code title=rel-archives&gt;&lt;a href=#link-type-archives&gt;archives&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-author&gt;&lt;span class=secno&gt;5.11.3.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-author&gt;&lt;code&gt;author&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-author&gt;&lt;span class=secno&gt;5.12.3.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-author&gt;&lt;code&gt;author&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-author&gt;&lt;a href=#link-type-author&gt;author&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -40993,7 +40932,7 @@
   relationship.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-bookmark&gt;&lt;span class=secno&gt;5.11.3.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-bookmark&gt;&lt;code&gt;bookmark&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-bookmark&gt;&lt;span class=secno&gt;5.12.3.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-bookmark&gt;&lt;code&gt;bookmark&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-bookmark&gt;&lt;a href=#link-type-bookmark&gt;bookmark&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -41054,7 +40993,7 @@
   page as a whole.&lt;/p&gt;
 --&gt;
 
-  &lt;h5 id=link-type-external&gt;&lt;span class=secno&gt;5.11.3.5 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-external&gt;&lt;code&gt;external&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-external&gt;&lt;span class=secno&gt;5.12.3.5 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-external&gt;&lt;code&gt;external&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-external&gt;&lt;a href=#link-type-external&gt;external&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -41064,7 +41003,7 @@
   that the current document forms a part of.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-feed&gt;&lt;span class=secno&gt;5.11.3.6 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-feed&gt;&lt;code&gt;feed&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-feed&gt;&lt;span class=secno&gt;5.12.3.6 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-feed&gt;&lt;code&gt;feed&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-feed&gt;&lt;a href=#link-type-feed&gt;feed&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41102,7 +41041,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-help&gt;&lt;span class=secno&gt;5.11.3.7 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-help&gt;&lt;code&gt;help&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-help&gt;&lt;span class=secno&gt;5.12.3.7 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-help&gt;&lt;code&gt;help&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-help&gt;&lt;a href=#link-type-help&gt;help&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41127,7 +41066,7 @@
   document provides help for the page as a whole.&lt;/p&gt;
 
 
-  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;5.11.3.8 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=rel-icon&gt;&lt;span class=secno&gt;5.12.3.8 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-icon&gt;&lt;code&gt;icon&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-icon&gt;&lt;a href=#rel-icon&gt;icon&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -41233,7 +41172,7 @@
   &lt;/div&gt;
 
 
-  &lt;h5 id=link-type-license&gt;&lt;span class=secno&gt;5.11.3.9 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-license&gt;&lt;code&gt;license&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-license&gt;&lt;span class=secno&gt;5.12.3.9 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-license&gt;&lt;code&gt;license&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-license&gt;&lt;a href=#link-type-license&gt;license&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41248,7 +41187,7 @@
   the &lt;code title=rel-license&gt;&lt;a href=#link-type-license&gt;license&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-nofollow&gt;&lt;span class=secno&gt;5.11.3.10 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-nofollow&gt;&lt;code&gt;nofollow&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-nofollow&gt;&lt;span class=secno&gt;5.12.3.10 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-nofollow&gt;&lt;code&gt;nofollow&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-nofollow&gt;&lt;a href=#link-type-nofollow&gt;nofollow&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -41260,7 +41199,7 @@
   affiliated with the two pages.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-noreferrer&gt;&lt;span class=secno&gt;5.11.3.11 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-noreferrer&gt;&lt;code&gt;noreferrer&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-noreferrer&gt;&lt;span class=secno&gt;5.12.3.11 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-noreferrer&gt;&lt;code&gt;noreferrer&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-noreferrer&gt;&lt;a href=#link-type-noreferrer&gt;noreferrer&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; elements.&lt;/p&gt;
@@ -41274,7 +41213,7 @@
   hyperlink creates a new &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-pingback&gt;&lt;span class=secno&gt;5.11.3.12 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-pingback&gt;&lt;code&gt;pingback&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-pingback&gt;&lt;span class=secno&gt;5.12.3.12 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-pingback&gt;&lt;code&gt;pingback&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-pingback&gt;&lt;a href=#link-type-pingback&gt;pingback&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -41283,7 +41222,7 @@
   specification. &lt;a href=#refsPINGBACK&gt;[PINGBACK]&lt;/a&gt;&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-prefetch&gt;&lt;span class=secno&gt;5.11.3.13 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prefetch&gt;&lt;code&gt;prefetch&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-prefetch&gt;&lt;span class=secno&gt;5.12.3.13 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prefetch&gt;&lt;code&gt;prefetch&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-prefetch&gt;&lt;a href=#link-type-prefetch&gt;prefetch&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt;.&lt;/p&gt;
@@ -41296,7 +41235,7 @@
   &lt;p&gt;There is no default type for resources given by the &lt;code title=rel-prefetch&gt;&lt;a href=#link-type-prefetch&gt;prefetch&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-search&gt;&lt;span class=secno&gt;5.11.3.14 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-search&gt;&lt;span class=secno&gt;5.12.3.14 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-search&gt;&lt;a href=#link-type-search&gt;search&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41313,7 +41252,7 @@
   --&gt;
 
 
-  &lt;h5 id=link-type-stylesheet&gt;&lt;span class=secno&gt;5.11.3.15 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-stylesheet&gt;&lt;code&gt;stylesheet&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-stylesheet&gt;&lt;span class=secno&gt;5.12.3.15 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-stylesheet&gt;&lt;code&gt;stylesheet&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-stylesheet&gt;&lt;a href=#link-type-stylesheet&gt;stylesheet&lt;/a&gt;&lt;/code&gt; keyword may be
   used with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; elements, for which it creates an &lt;a href=#external-resource-link title=&quot;external resource link&quot;&gt;external resource link&lt;/a&gt; that
@@ -41336,7 +41275,7 @@
   instead assume it to be &lt;code title=&quot;&quot;&gt;text/css&lt;/code&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-sidebar&gt;&lt;span class=secno&gt;5.11.3.16 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-sidebar&gt;&lt;code&gt;sidebar&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-sidebar&gt;&lt;span class=secno&gt;5.12.3.16 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-sidebar&gt;&lt;code&gt;sidebar&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-sidebar&gt;&lt;a href=#link-type-sidebar&gt;sidebar&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41351,7 +41290,7 @@
   &lt;code title=rel-sidebar&gt;&lt;a href=#link-type-sidebar&gt;sidebar&lt;/a&gt;&lt;/code&gt; keyword specified is a &lt;dfn id=rel-sidebar-hyperlink title=rel-sidebar-hyperlink&gt;sidebar hyperlink&lt;/dfn&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=link-type-tag&gt;&lt;span class=secno&gt;5.11.3.17 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-tag&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
+  &lt;h5 id=link-type-tag&gt;&lt;span class=secno&gt;5.12.3.17 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-tag&gt;&lt;code&gt;tag&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h5&gt;
 
   &lt;p&gt;The &lt;code title=rel-tag&gt;&lt;a href=#link-type-tag&gt;tag&lt;/a&gt;&lt;/code&gt; keyword may be used
   with &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41367,7 +41306,7 @@
   the popular tag across a set of pages.&lt;/p&gt;
 
 
-  &lt;h5 id=hierarchical-link-types&gt;&lt;span class=secno&gt;5.11.3.18 &lt;/span&gt;Hierarchical link types&lt;/h5&gt;
+  &lt;h5 id=hierarchical-link-types&gt;&lt;span class=secno&gt;5.12.3.18 &lt;/span&gt;Hierarchical link types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a hierarchical structure of
   documents.&lt;/p&gt;
@@ -41380,7 +41319,7 @@
   &lt;p&gt;A document may be part of multiple hierarchies.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-index&gt;&lt;span class=secno&gt;5.11.3.18.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-index&gt;&lt;span class=secno&gt;5.12.3.18.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-index&gt;&lt;code&gt;index&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-index&gt;&lt;a href=#link-type-index&gt;index&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41396,7 +41335,7 @@
   &lt;code title=rel-index&gt;&lt;a href=#link-type-index&gt;index&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-up&gt;&lt;span class=secno&gt;5.11.3.18.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-up&gt;&lt;code&gt;up&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-up&gt;&lt;span class=secno&gt;5.12.3.18.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-up&gt;&lt;code&gt;up&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-up&gt;&lt;a href=#link-type-up&gt;up&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41457,7 +41396,7 @@
   interface hides duplicates).&lt;/p&gt;
 
 
-  &lt;h5 id=sequential-link-types&gt;&lt;span class=secno&gt;5.11.3.19 &lt;/span&gt;Sequential link types&lt;/h5&gt;
+  &lt;h5 id=sequential-link-types&gt;&lt;span class=secno&gt;5.12.3.19 &lt;/span&gt;Sequential link types&lt;/h5&gt;
 
   &lt;p&gt;Some documents form part of a sequence of documents.&lt;/p&gt;
 
@@ -41469,7 +41408,7 @@
   &lt;p&gt;A document may be part of multiple sequences.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-first&gt;&lt;span class=secno&gt;5.11.3.19.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-first&gt;&lt;code&gt;first&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-first&gt;&lt;span class=secno&gt;5.12.3.19.1 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-first&gt;&lt;code&gt;first&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-first&gt;&lt;a href=#link-type-first&gt;first&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41484,7 +41423,7 @@
   &quot;&lt;code title=&quot;&quot;&gt;start&lt;/code&gt;&quot; like the &lt;code title=rel-first&gt;&lt;a href=#link-type-first&gt;first&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-last&gt;&lt;span class=secno&gt;5.11.3.19.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-last&gt;&lt;code&gt;last&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-last&gt;&lt;span class=secno&gt;5.12.3.19.2 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-last&gt;&lt;code&gt;last&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-last&gt;&lt;a href=#link-type-last&gt;last&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41499,7 +41438,7 @@
   &lt;code title=rel-last&gt;&lt;a href=#link-type-last&gt;last&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-next&gt;&lt;span class=secno&gt;5.11.3.19.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-next&gt;&lt;code&gt;next&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-next&gt;&lt;span class=secno&gt;5.12.3.19.3 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-next&gt;&lt;code&gt;next&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-next&gt;&lt;a href=#link-type-next&gt;next&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41510,7 +41449,7 @@
   document that is the next logical document in the sequence.&lt;/p&gt;
 
 
-  &lt;h6 id=link-type-prev&gt;&lt;span class=secno&gt;5.11.3.19.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prev&gt;&lt;code&gt;prev&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
+  &lt;h6 id=link-type-prev&gt;&lt;span class=secno&gt;5.12.3.19.4 &lt;/span&gt;Link type &quot;&lt;dfn title=rel-prev&gt;&lt;code&gt;prev&lt;/code&gt;&lt;/dfn&gt;&quot;&lt;/h6&gt;
 
   &lt;p&gt;The &lt;code title=rel-prev&gt;&lt;a href=#link-type-prev&gt;prev&lt;/a&gt;&lt;/code&gt; keyword may be used with
   &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
@@ -41525,7 +41464,7 @@
   the &lt;code title=rel-prev&gt;&lt;a href=#link-type-prev&gt;prev&lt;/a&gt;&lt;/code&gt; keyword.&lt;/p&gt;
 
 
-  &lt;h5 id=other-link-types&gt;&lt;span class=secno&gt;5.11.3.20 &lt;/span&gt;Other link types&lt;/h5&gt;
+  &lt;h5 id=other-link-types&gt;&lt;span class=secno&gt;5.12.3.20 &lt;/span&gt;Other link types&lt;/h5&gt;
 
   &lt;p&gt;Other than the types defined above, only types defined as
   extensions in the &lt;a href=<A HREF="http://wiki.whatwg.org/wiki/RelExtensions">http://wiki.whatwg.org/wiki/RelExtensions</A>&gt;WHATWG Wiki
@@ -44152,10 +44091,10 @@
   readonly attribute any &lt;a href=#dom-messageevent-data title=dom-MessageEvent-data&gt;data&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-origin title=dom-MessageEvent-origin&gt;origin&lt;/a&gt;;
   readonly attribute DOMString &lt;a href=#dom-messageevent-lasteventid title=dom-MessageEvent-lastEventId&gt;lastEventId&lt;/a&gt;;
-  readonly attribute &lt;a href=#window&gt;Window&lt;/a&gt; &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
+  readonly attribute &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; &lt;a href=#dom-messageevent-source title=dom-MessageEvent-source&gt;source&lt;/a&gt;;
   readonly attribute &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; &lt;a href=#dom-messageevent-messageport title=dom-MessageEvent-messagePort&gt;messagePort&lt;/a&gt;;
-  void &lt;a href=#dom-messageevent-initmessageevent title=dom-MessageEvent-initMessageEvent&gt;initMessageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; messagePortArg);
-  void &lt;a href=#dom-messageevent-initmessageeventns title=dom-MessageEvent-initMessageEventNS&gt;initMessageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; messagePortArg);
+  void &lt;a href=#dom-messageevent-initmessageevent title=dom-MessageEvent-initMessageEvent&gt;initMessageEvent&lt;/a&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; messagePortArg);
+  void &lt;a href=#dom-messageevent-initmessageeventns title=dom-MessageEvent-initMessageEventNS&gt;initMessageEventNS&lt;/a&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in &lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt; sourceArg, in &lt;a href=#messageport&gt;MessagePort&lt;/a&gt; messagePortArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-initmessageevent title=dom-MessageEvent-initMessageEvent&gt;&lt;code&gt;initMessageEvent()&lt;/code&gt;&lt;/dfn&gt;
@@ -44179,7 +44118,8 @@
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-source title=dom-MessageEvent-source&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
   represents, in &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt;, the
-  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; from which the message came.&lt;/p&gt;
+  &lt;code&gt;&lt;a href=#windowproxy&gt;WindowProxy&lt;/a&gt;&lt;/code&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; of the
+  &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object from which the message came.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-messageevent-messageport title=dom-MessageEvent-messagePort&gt;&lt;code&gt;messagePort&lt;/code&gt;&lt;/dfn&gt;
   attribute represents, in &lt;a href=#crossDocumentMessages&gt;cross-document messaging&lt;/a&gt; and
@@ -45727,11 +45667,10 @@
 
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument has a value
     other than a single literal U+002A ASTERISK character (&quot;*&quot;), and
-    the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-    context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-    method was invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as
-    &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort these steps
-    silently.&lt;/p&gt;
+    the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on
+    which the method was invoked does not have the &lt;a href=#same-origin&gt;same
+    origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort
+    these steps silently.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -45744,12 +45683,9 @@
     set to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an
     origin&quot;&gt;Unicode serialization&lt;/a&gt; of the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of
     the script that invoked the method, and the &lt;code title=dom-MessageEvent-source&gt;&lt;a href=#dom-messageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be
-    set to the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#default-view&gt;default
-    view&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
-    &lt;code&gt;Document&lt;/code&gt; object with which the script is associated
-    is the &lt;a href=#active-document&gt;active document&lt;/a&gt;&lt;!--, if there is one, or null
-    otherwise--&gt;.&lt;/p&gt;&lt;!-- I think there always is one, because scripts
-    can't run and see a Window without that being the case. --&gt;
+    set to the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;.&lt;/p&gt; &lt;!-- invariant:
+    the global scope is always a Window if the script can see this
+    method --&gt;
 
    &lt;/li&gt;
 
@@ -45759,7 +45695,6 @@
     previous step at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
     method was invoked. The &lt;a href=#task-source&gt;task source&lt;/a&gt; for this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; is the &lt;a href=#posted-message-task-source&gt;posted message task
     source&lt;/a&gt;.&lt;/p&gt;
-    &lt;!-- XXX apply any body/window dispatch decisions here --&gt;
 
    &lt;/li&gt;
 
@@ -45818,11 +45753,10 @@
 
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument has a value
     other than a single literal U+002A ASTERISK character (&quot;*&quot;), and
-    the &lt;a href=#active-document&gt;active document&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing
-    context&lt;/a&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
-    method was invoked does not have the &lt;a href=#same-origin&gt;same origin&lt;/a&gt; as
-    &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort these steps
-    silently.&lt;/p&gt;
+    the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on
+    which the method was invoked does not have the &lt;a href=#same-origin&gt;same
+    origin&lt;/a&gt; as &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort
+    these steps silently.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -45835,12 +45769,9 @@
     set to the &lt;a href=#unicode-serialization-of-an-origin title=&quot;Unicode serialization of an
     origin&quot;&gt;Unicode serialization&lt;/a&gt; of the &lt;a href=#origin-0&gt;origin&lt;/a&gt; of
     the script that invoked the method, and the &lt;code title=dom-MessageEvent-source&gt;&lt;a href=#dom-messageevent-source&gt;source&lt;/a&gt;&lt;/code&gt; attribute must be
-    set to the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object of the &lt;a href=#default-view&gt;default
-    view&lt;/a&gt; of the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; for which the
-    &lt;code&gt;Document&lt;/code&gt; object with which the script is associated
-    is the &lt;a href=#active-document&gt;active document&lt;/a&gt;&lt;!--, if there is one, or null
-    otherwise--&gt;.&lt;/p&gt;&lt;!-- I think there always is one, because scripts
-    can't run and see a Window without that being the case. --&gt;
+    set to the &lt;a href=&quot;#script's-global-object&quot;&gt;script's global object&lt;/a&gt;.&lt;/p&gt; &lt;!-- invariant:
+    the global scope is always a Window if the script can see this
+    method --&gt;
 
    &lt;/li&gt;
 
@@ -45857,7 +45788,6 @@
     previous step at the &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object on which the
     method was invoked. The &lt;a href=#task-source&gt;task source&lt;/a&gt; for this &lt;a href=#concept-task title=concept-task&gt;task&lt;/a&gt; is the &lt;a href=#posted-message-task-source&gt;posted message task
     source&lt;/a&gt;.&lt;/p&gt;
-    &lt;!-- XXX apply any body/window dispatch decisions here --&gt;
 
    &lt;/li&gt;
 
@@ -46124,8 +46054,10 @@
   &lt;a href=#event-loop&gt;event loop&lt;/a&gt; must use it as one of its &lt;a href=#task-source title=&quot;task
   source&quot;&gt;task sources&lt;/a&gt;.&lt;/p&gt;
 
-  &lt;p class=note&gt;If the &lt;a href=#script-group&gt;script group&lt;/a&gt; of the port's event
-  handlers is &lt;i&gt;frozen&lt;/i&gt;, then the messages are lost.&lt;/p&gt;
+  &lt;p class=note&gt;If the &lt;code&gt;Document&lt;/code&gt; of the port's event
+  handlers' &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global object&quot;&gt;global object&lt;/a&gt;
+  is not &lt;a href=#fully-active&gt;fully active&lt;/a&gt;, then the messages are lost.&lt;/p&gt;
+  &lt;!-- because of the jump-to-entry-point algorithm first step --&gt;
 
   &lt;hr&gt;&lt;p&gt;The &lt;dfn id=dom-messageport-close title=dom-MessagePort-close&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
   method, when called on a port &lt;var title=&quot;&quot;&gt;local port&lt;/var&gt; that is
@@ -52830,13 +52762,13 @@
    &lt;li&gt;If the &lt;code&gt;Document&lt;/code&gt; is in a &lt;a href=#browsing-context&gt;browsing
    context&lt;/a&gt;, then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to &lt;a href=#fire-a-load-event title=&quot;fire
    a load event&quot;&gt;fire a &lt;code title=event-load&gt;load&lt;/code&gt;
-   event&lt;/a&gt; at the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s
-   &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object.&lt;/li&gt;
+   event&lt;/a&gt; at the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt;
+   object.&lt;/li&gt;
 
    &lt;li&gt;If the &lt;code&gt;Document&lt;/code&gt; has a &lt;a href=#pending-state-object&gt;pending state
    object&lt;/a&gt;, then &lt;a href=#queue-a-task&gt;queue a task&lt;/a&gt; to fire a &lt;code title=event-popstate&gt;&lt;a href=#event-popstate&gt;popstate&lt;/a&gt;&lt;/code&gt; event in no namespace on the
-   &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object using
-   the &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PopStateEvent-state&gt;&lt;a href=#dom-popstateevent-state&gt;state&lt;/a&gt;&lt;/code&gt; attribute set to the
+   &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object using the
+   &lt;code&gt;&lt;a href=#popstateevent&gt;PopStateEvent&lt;/a&gt;&lt;/code&gt; interface, with the &lt;code title=dom-PopStateEvent-state&gt;&lt;a href=#dom-popstateevent-state&gt;state&lt;/a&gt;&lt;/code&gt; attribute set to the
    current value of the &lt;a href=#pending-state-object&gt;pending state object&lt;/a&gt;. This event
    must bubble but not be cancelable and has no default action.&lt;/li&gt;
 
@@ -56224,8 +56156,9 @@
 
   &lt;p&gt;For both &lt;code title=dom-windowtimers-setTimeout&gt;&lt;a href=#dom-windowtimers-settimeout&gt;setTimeout()&lt;/a&gt;&lt;/code&gt; and &lt;code title=dom-windowtimers-setInterval&gt;&lt;a href=#dom-windowtimers-setinterval&gt;setInterval()&lt;/a&gt;&lt;/code&gt;, the clock
   upon which the timers are based must only tick while the
-  &lt;a href=#script-group&gt;script group&lt;/a&gt; of their callbacks is not
-  &lt;i&gt;frozen&lt;/i&gt;.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;a href=&quot;#script's-global-object&quot; title=&quot;script's global
+  object&quot;&gt;global object&lt;/a&gt; of their callbacks is &lt;a href=#fully-active&gt;fully
+  active&lt;/a&gt;.&lt;/p&gt;
 
 
 

Modified: source
===================================================================
--- source	2009-01-30 08:39:28 UTC (rev 2726)
+++ source	2009-01-31 10:22:09 UTC (rev 2727)
@@ -5816,9 +5816,9 @@
 
   &lt;div class=&quot;example&quot;&gt;
 
-   &lt;p&gt;For example, the &lt;code&gt;document.defaultView&lt;/code&gt; attribute
-   means that there is a strong reference from a &lt;code&gt;Document&lt;/code&gt;
-   object to its &lt;code&gt;Window&lt;/code&gt; object. Similarly, there is
+   &lt;p&gt;For example, the &lt;code&gt;document.location&lt;/code&gt; attribute means
+   that there is a strong reference from a &lt;code&gt;Document&lt;/code&gt;
+   object to its &lt;code&gt;Location&lt;/code&gt; object. Similarly, there is
    always a strong reference from a &lt;code&gt;Document&lt;/code&gt; to any
    descendant nodes, and from any node to its owner
    &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
@@ -5868,15 +5868,8 @@
   &lt;span title=&quot;HTML documents&quot;&gt;HTML document&lt;/span&gt; by calling &lt;code
   title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; on it.&lt;/p&gt;
 
-  &lt;p&gt;When a &lt;code&gt;Document&lt;/code&gt; is first created, a new &lt;span&gt;script
-  group&lt;/span&gt; must be created. This is the &lt;code&gt;Document&lt;/code&gt;'s
-  &lt;dfn&gt;current script group&lt;/dfn&gt; until the script group is changed
-  (which can happen if &lt;code
-  title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt; is invoked on the
-  &lt;code&gt;Document&lt;/code&gt;).&lt;/p&gt;
 
 
-
   &lt;h4&gt;Documents in the DOM&lt;/h4&gt;
 
   &lt;p&gt;All &lt;code&gt;Document&lt;/code&gt; objects (in user agents implementing
@@ -5929,7 +5922,7 @@
   // &lt;span&gt;dynamic markup insertion&lt;/span&gt;
            attribute DOMString &lt;span title=&quot;dom-innerHTML&quot;&gt;innerHTML&lt;/span&gt;;
   &lt;span&gt;HTMLDocument&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;([Optional] in DOMString type, [Optional] in DOMString replace);
-  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features, [Optional] in boolean replace);
+  &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-document-open&quot;&gt;open&lt;/span&gt;(in DOMString url, in DOMString name, in DOMString features, [Optional] in boolean replace);
   void &lt;span title=&quot;dom-document-close&quot;&gt;close&lt;/span&gt;();
   void &lt;span title=&quot;dom-document-write&quot;&gt;write&lt;/span&gt;([Variadic] in DOMString text);
   void &lt;span title=&quot;dom-document-writeln&quot;&gt;writeln&lt;/span&gt;([Variadic] in DOMString text);
@@ -6465,9 +6458,9 @@
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;elements&lt;/var&gt; has only one element, and that
     element is an &lt;code&gt;iframe&lt;/code&gt; element, then return the
-    &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;default view&lt;/span&gt; of the
-    &lt;span&gt;nested browsing context&lt;/span&gt; represented by that
-    &lt;code&gt;iframe&lt;/code&gt; element, and abort these steps.&lt;/p&gt;
+    &lt;code&gt;WindowProxy&lt;/code&gt; object of the &lt;span&gt;nested browsing
+    context&lt;/span&gt; represented by that &lt;code&gt;iframe&lt;/code&gt; element,
+    and abort these steps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -7898,23 +7891,24 @@
    XHTML, or image document, or something?&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;!-- XXX see
    also innerHTML in HTML --&gt;
 
-   &lt;li&gt;&lt;p&gt;Freeze the document's &lt;span&gt;current script group&lt;/span&gt;, as
-   well as the &lt;span&gt;current script group&lt;/span&gt; of any &lt;span
-   title=&quot;active document&quot;&gt;active documents&lt;/span&gt; in &lt;span
-   title=&quot;nested browsing context&quot;&gt;nested browsing
-   contexts&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Unregister all event listeners registered on the
    &lt;code&gt;Document&lt;/code&gt; node and its descendants.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;Remove all child nodes of the document, without firing any
    mutation events.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Create a new &lt;span&gt;script group&lt;/span&gt; and let the
-   document's &lt;span&gt;current script group&lt;/span&gt; be that new
-   group. (The old script group is now permanently frozen.)&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Replace the &lt;code&gt;Document&lt;/code&gt;'s singleton objects with
+   new instances of those objects. (This includes in particular the
+   &lt;code&gt;Window&lt;/code&gt;, &lt;code&gt;Location&lt;/code&gt;, &lt;code&gt;History&lt;/code&gt;,
+   &lt;code&gt;ApplicationCache&lt;/code&gt;, &lt;code&gt;UndoManager&lt;/code&gt;,
+   &lt;code&gt;Navigator&lt;/code&gt;, and &lt;code&gt;Selection&lt;/code&gt; objects, the
+   various &lt;code&gt;BarProp&lt;/code&gt; objects, the two &lt;code&gt;Storage&lt;/code&gt;
+   objects, and the various &lt;code&gt;HTMLCollection&lt;/code&gt; objects. It
+   also includes all the WebIDL prototypes in the ECMAScript binding,
+   including the &lt;code&gt;Document&lt;/code&gt; object's prototype.)&lt;/p&gt;&lt;/li&gt;
 
    &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E...%3Ciframe%20src%3D%22document%22%3E%3C%2Fiframe%3E%0A%3Cscript%3Eonload%20%3D%20function%20(</A>)%20%7B%20f%20%3D%20document.getElementsByTagName('iframe')%5B0%5D%3B%20d%20%3D%20f.contentWindow.document%3B%20%7D%3C%2Fscript%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22w(d.documentElement.innerHTML)%22%20value%3D%22dump%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cscript%3Evar%20x%20%3D%20new%20XMLHttpRequest()%3Bx.open(%26quot%3BGET%26quot%3B%2C%20%26quot%3BGET%26quot%3B)%3Bx.onreadystatechange%3Dfunction()%20%7B%20alert(x.readyState)%3B%20%7D%3Bx.send(null)%3B%3C%2Fscript%3E')%3Bd.close()%3B%20setTimeout(function()%20%7B%20d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%20%7D%2C%200)%3B%22%20value%3D%22xhr%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.onclick%20%3D%20function()%20%7B%20w('click')%20%7D%22%20value%3D%22add%20click%20handler%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3Etest%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%22%3E%0A%3Cinput%20type%3Dbutton%20onclick%3D%22d.open()%3B%20d.write('%3Cp%3E%3Cscript%3Ei%20%3D%200%3B%20setTimeout(%26quot%3Bparent.w(i%2B%2B)%26quot%3B%2C%202000)%3C%2Fscript%3E%3C%2Fp%3E')%3B%20d.close()%22%20value%3D%22replace%20with%20timer%22%3E --&gt;
+   &lt;!-- <A HREF="http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(">http://software.hixie.ch/utilities/js/live-dom-viewer/?%3C!DOCTYPE%20html%3E%0D%0A...%3Ciframe%3E%3C%2Fiframe%3E%0D%0A%3Cscript%3E%0D%0Aonload%20%3D%20function%20(</A>)%20%7B%0D%0A%20frames%5B0%5D.test%20%3D%201%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20var%20a%20%3D%20frames%5B0%5D.document.location.assign%3B%0D%0A%20w(a)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%20frames%5B0%5D.document.open()%3B%0D%0A%20frames%5B0%5D.document.write('%3Cscript%3Edocument.write(test)%3C%5C%2Fscript%3E')%3B%0D%0A%20frames%5B0%5D.document.close()%3B%0D%0A%20w(frames%5B0%5D.test)%3B%0D%0A%20w(frames%5B0%5D.document.location.assign%20%3D%3D%3D%20a)%3B%0D%0A%7D%0D%0A%3C%2Fscript%3E --&gt;
 
    &lt;li&gt;&lt;p&gt;Change the &lt;span&gt;document's character encoding&lt;/span&gt; to
    UTF-16.&lt;/p&gt;&lt;/li&gt;
@@ -8005,15 +7999,11 @@
   title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method on the
   &lt;code&gt;HTMLDocument&lt;/code&gt; object must call the &lt;code
   title=&quot;dom-open&quot;&gt;open()&lt;/code&gt; method on the &lt;code&gt;Window&lt;/code&gt;
-  interface of the object returned by the &lt;code
-  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
-  object, with the same arguments as the original call to the &lt;code
+  object of the &lt;code&gt;HTMLDocument&lt;/code&gt; object, with the same
+  arguments as the original call to the &lt;code
   title=&quot;dom-document-open&quot;&gt;open()&lt;/code&gt; method, and return whatever
-  that method returned. If the &lt;code
-  title=&quot;dom-document-defaultView&quot;&gt;defaultView&lt;/code&gt; attribute of the
-  &lt;code&gt;DocumentView&lt;/code&gt; interface of the &lt;code&gt;HTMLDocument&lt;/code&gt;
-  object is null, then the method must raise an
+  that method returned. If the &lt;code&gt;HTMLDocument&lt;/code&gt; object has no
+  &lt;code&gt;Window&lt;/code&gt; object, then the method must raise an
   &lt;code&gt;INVALID_ACCESS_ERR&lt;/code&gt; exception.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-document-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
@@ -17164,7 +17154,7 @@
            attribute DOMString &lt;span title=&quot;dom-dim-height&quot;&gt;height&lt;/span&gt;;
 &lt;!-- XXX we should bring these back since the Window spec has atrophied
   readonly attribute Document &lt;span title=&quot;dom-iframe-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-iframe-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
 --&gt;};&lt;/pre&gt;
     &lt;p&gt;Objects implementing the &lt;code&gt;HTMLIFrameElement&lt;/code&gt;
     interface must also implement the &lt;code&gt;EmbeddingElement&lt;/code&gt;
@@ -17188,8 +17178,9 @@
   &lt;code&gt;iframe&lt;/code&gt; element's document's &lt;span&gt;browsing
   context&lt;/span&gt; as the &lt;span&gt;source browsing context&lt;/span&gt;. If the
   user &lt;span title=&quot;navigate&quot;&gt;navigates&lt;/span&gt; away from this page,
-  the &lt;code&gt;iframe&lt;/code&gt;'s corresponding &lt;code&gt;Window&lt;/code&gt; object
-  will reference new &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code
+  the &lt;code&gt;iframe&lt;/code&gt;'s corresponding &lt;code&gt;WindowProxy&lt;/code&gt;
+  object will proxy new &lt;code&gt;Window&lt;/code&gt; objects for new
+  &lt;code&gt;Document&lt;/code&gt; objects, but the &lt;code
   title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute will not change.&lt;/p&gt;
 
   &lt;p&gt;Whenever the &lt;code title=&quot;attr-iframe-src&quot;&gt;src&lt;/code&gt; attribute
@@ -17835,10 +17826,11 @@
            attribute DOMString &lt;span title=&quot;dom-object-useMap&quot;&gt;useMap&lt;/span&gt;;
   readonly attribute &lt;span&gt;HTMLFormElement&lt;/span&gt; &lt;span title=&quot;dom-fae-form&quot;&gt;form&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-dim-width&quot;&gt;width&lt;/span&gt;;
-           attribute DOMString &lt;span title=&quot;dom-dim-height&quot;&gt;height&lt;/span&gt;;&lt;!-- XXX
+           attribute DOMString &lt;span title=&quot;dom-dim-height&quot;&gt;height&lt;/span&gt;;
+&lt;!-- XXX we should bring these back since the Window spec has atrophied
   readonly attribute Document &lt;span title=&quot;dom-object-contentDocument&quot;&gt;contentDocument&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-object-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;--&gt;
-};&lt;/pre&gt;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-object-contentWindow&quot;&gt;contentWindow&lt;/span&gt;;
+--&gt;};&lt;/pre&gt;
     &lt;p&gt;Objects implementing the &lt;code&gt;HTMLObjectElement&lt;/code&gt;
     interface must also implement the &lt;code&gt;EmbeddingElement&lt;/code&gt;
     interface defined in the Window Object specification. &lt;a
@@ -37624,28 +37616,43 @@
   requirements defined in this section &lt;em&gt;do&lt;/em&gt; apply to all user
   agents, whether they are Web browsers or not.&lt;/p&gt;
 
+
   &lt;h3 id=&quot;windows&quot;&gt;Browsing contexts&lt;/h3&gt;
 
-  &lt;p&gt;A &lt;dfn&gt;browsing context&lt;/dfn&gt; is a collection of one or more
-  &lt;code&gt;Document&lt;/code&gt; objects, and one or more &lt;span
-  title=&quot;view&quot;&gt;views&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;A &lt;dfn&gt;browsing context&lt;/dfn&gt; is an environment in which
+  &lt;code&gt;Document&lt;/code&gt; objects are presented to the user. At any
+  time, one &lt;code&gt;Document&lt;/code&gt; is designated the &lt;dfn&gt;active
+  document&lt;/dfn&gt;. The collection of &lt;code&gt;Document&lt;/code&gt;s is the
+  &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;session history&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;At any one time, one of the &lt;code&gt;Document&lt;/code&gt;s in a
-  &lt;span&gt;browsing context&lt;/span&gt; is the &lt;dfn&gt;active document&lt;/dfn&gt;. The
-  collection of &lt;code&gt;Document&lt;/code&gt;s is the &lt;span&gt;browsing
-  context&lt;/span&gt;'s &lt;span&gt;session history&lt;/span&gt;.&lt;/p&gt;
+  &lt;p&gt;Each &lt;span&gt;browsing context&lt;/span&gt; has a corresponding
+  &lt;code&gt;WindowProxy&lt;/code&gt; object.&lt;/p&gt;
 
+  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; has a collection of one or more &lt;span
+  title=&quot;view&quot;&gt;views&lt;/span&gt;.&lt;/p&gt;
+
   &lt;p&gt;A &lt;dfn&gt;view&lt;/dfn&gt; is a user agent interface tied to a particular
-  media used for the presentation of &lt;code&gt;Document&lt;/code&gt; objects in
-  some media. A view may be interactive. Each view is represented by
-  an &lt;code&gt;AbstractView&lt;/code&gt; object. Each view belongs to a
-  &lt;span&gt;browsing context&lt;/span&gt;. &lt;a
+  media used for the presentation of a particular
+  &lt;code&gt;Document&lt;/code&gt; object in some media. A view may be
+  interactive. Each view is represented by an
+  &lt;code&gt;AbstractView&lt;/code&gt; object. &lt;a
   href=&quot;#refsDOM2VIEWS&quot;&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
 
+  &lt;p&gt;The main &lt;span&gt;view&lt;/span&gt; through which a user primarily
+  interacts with a user agent is the &lt;dfn&gt;default view&lt;/dfn&gt;. The
+  &lt;code&gt;AbstractView&lt;/code&gt; object that represents this view must also
+  implement the &lt;code&gt;Window&lt;/code&gt; interface, and is referred to as
+  the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;
+
+  &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;default view&lt;/span&gt; of a
+  &lt;code&gt;Document&lt;/code&gt; is given by the &lt;code
+  title=&quot;&quot;&gt;defaultView&lt;/code&gt; attribute on the &lt;code&gt;Document&lt;/code&gt;
+  object's &lt;code&gt;DocumentView&lt;/code&gt; interface. &lt;a
+  href=&quot;#refsDOM3VIEWS&quot;&gt;[DOM3VIEWS]&lt;/a&gt;&lt;/p&gt;
+
   &lt;p class=&quot;note&quot;&gt;The &lt;code title=&quot;&quot;&gt;document&lt;/code&gt; attribute of an
   &lt;code&gt;AbstractView&lt;/code&gt; object representing a &lt;span&gt;view&lt;/span&gt;
-  gives the &lt;code&gt;Document&lt;/code&gt; object of the view's &lt;span&gt;browsing
-  context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;. &lt;a
+  gives the view's corresponding &lt;code&gt;Document&lt;/code&gt; object. &lt;a
   href=&quot;#refsDOM2VIEWS&quot;&gt;[DOM2VIEWS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Events that use the &lt;code&gt;UIEvent&lt;/code&gt; interface
@@ -37655,18 +37662,21 @@
   href=&quot;#refsDOM3EVENTS&quot;&gt;[DOM3EVENTS]&lt;/a&gt;&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;A typical Web browser has one obvious
-  &lt;span&gt;view&lt;/span&gt; per &lt;span&gt;browsing context&lt;/span&gt;: the browser's
-  window (screen media). If a page is printed, however, a second view
-  becomes evident, that of the print media. The two views always share
-  the same underlying &lt;code&gt;Document&lt;/code&gt;, but they have a different
-  presentation of that document. A speech browser also establishes a
-  browsing context, one with a view in the speech media.&lt;/p&gt;
+  &lt;span&gt;view&lt;/span&gt; per &lt;code&gt;Document&lt;/code&gt;: the browser's window
+  (screen media). This is typically the &lt;span&gt;default view&lt;/span&gt;. If
+  a page is printed, however, a second view becomes evident, that of
+  the print media. The two views always share the same underlying
+  &lt;code&gt;Document&lt;/code&gt; object, but they have a different presentation
+  of that object. A speech browser might have a different
+  &lt;span&gt;default view&lt;/span&gt;, using the speech media.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;A &lt;code&gt;Document&lt;/code&gt; does not necessarily have a
   &lt;span&gt;browsing context&lt;/span&gt; associated with it. In particular,
   data mining tools are likely to never instantiate browsing
   contexts.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;A &lt;span&gt;browsing context&lt;/span&gt; can have a &lt;dfn&gt;creator browsing
   context&lt;/dfn&gt;, the &lt;span&gt;browsing context&lt;/span&gt; that was
   responsible for its creation. Unless otherwise specified, a
@@ -37680,15 +37690,6 @@
   title=&quot;&quot;&gt;A&lt;/var&gt; was created is the &lt;dfn&gt;creator
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The main &lt;span&gt;view&lt;/span&gt; through which a user primarily
-  interacts with a user agent is the &lt;dfn&gt;default view&lt;/dfn&gt;.&lt;/p&gt;
-
-  &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;default view&lt;/span&gt; of a
-  &lt;code&gt;Document&lt;/code&gt; is given by the &lt;code
-  title=&quot;&quot;&gt;defaultView&lt;/code&gt; attribute on the &lt;code&gt;Document&lt;/code&gt;
-  object's &lt;code&gt;DocumentView&lt;/code&gt; interface. &lt;a
-  href=&quot;#refsDOM3VIEWS&quot;&gt;[DOM3VIEWS]&lt;/a&gt;&lt;/p&gt;
-
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is first created, it must be
   created with a single &lt;code&gt;Document&lt;/code&gt; in its session history,
   whose &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; is
@@ -37775,31 +37776,33 @@
   &lt;h5&gt;Navigating nested browsing contexts in the DOM&lt;/h5&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-top&quot;&gt;&lt;code&gt;top&lt;/code&gt;&lt;/dfn&gt; DOM attribute on
-  the &lt;code&gt;Window&lt;/code&gt; object of a &lt;span&gt;browsing context&lt;/span&gt;
-  &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the &lt;code&gt;Window&lt;/code&gt; object of
-  its &lt;span&gt;top-level browsing context&lt;/span&gt; (which would be its own
-  &lt;code&gt;Window&lt;/code&gt; object if it was a &lt;span&gt;top-level browsing
-  context&lt;/span&gt; itself).&lt;/p&gt;
+  the &lt;code&gt;Window&lt;/code&gt; object of a &lt;code&gt;Document&lt;/code&gt; in a
+  &lt;span&gt;browsing context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the
+  &lt;code&gt;WindowProxy&lt;/code&gt; object of its &lt;span&gt;top-level browsing
+  context&lt;/span&gt; (which would be its own &lt;code&gt;WindowProxy&lt;/code&gt;
+  object if it was a &lt;span&gt;top-level browsing context&lt;/span&gt;
+  itself).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-parent&quot;&gt;&lt;code&gt;parent&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute on the &lt;code&gt;Window&lt;/code&gt; object of a &lt;span&gt;browsing
-  context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; must return the
-  &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;parent browsing
-  context&lt;/span&gt;, if there is one (i.e. if &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is a
-  &lt;span&gt;child browsing context&lt;/span&gt;), or the &lt;code&gt;Window&lt;/code&gt;
-  object of the &lt;span&gt;browsing context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;
-  itself, otherwise (i.e. if it is a &lt;span&gt;top-level browsing
-  context&lt;/span&gt;).&lt;/p&gt;
+  attribute on the &lt;code&gt;Window&lt;/code&gt; object of a
+  &lt;code&gt;Document&lt;/code&gt; in a &lt;span&gt;browsing context&lt;/span&gt; &lt;var
+  title=&quot;&quot;&gt;b&lt;/var&gt; must return the &lt;code&gt;WindowProxy&lt;/code&gt; object of
+  the &lt;span&gt;parent browsing context&lt;/span&gt;, if there is one (i.e. if
+  &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is a &lt;span&gt;child browsing context&lt;/span&gt;), or
+  the &lt;code&gt;WindowProxy&lt;/code&gt; object of the &lt;span&gt;browsing
+  context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; itself, otherwise (i.e. if it
+  is a &lt;span&gt;top-level browsing context&lt;/span&gt;).&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-frameElement&quot;&gt;&lt;code&gt;frameElement&lt;/code&gt;&lt;/dfn&gt;
-  DOM attribute on the &lt;code&gt;Window&lt;/code&gt; object of a &lt;span&gt;browsing
-  context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;b&lt;/var&gt;, on getting, must run the
-  following algorithm:&lt;/p&gt;
+  DOM attribute on the &lt;code&gt;Window&lt;/code&gt; object of a
+  &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;d&lt;/var&gt;, on getting, must run
+  the following algorithm:&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;b&lt;/var&gt; is not a &lt;span&gt;child browsing
-   context&lt;/span&gt;, return null and abort these steps.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;d&lt;/var&gt; is not a &lt;code&gt;Document&lt;/code&gt; in a
+   &lt;span&gt;child browsing context&lt;/span&gt;, return null and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the &lt;span&gt;parent browsing context&lt;/span&gt;'s &lt;span&gt;active
    document&lt;/span&gt; does not have the &lt;span&gt;same&lt;/span&gt; &lt;span&gt;effective
@@ -37837,10 +37840,10 @@
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-opener&quot;&gt;&lt;code&gt;opener&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute on the &lt;code&gt;Window&lt;/code&gt; object must return the
-  &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt; from
-  which the current browsing context was created (its &lt;span&gt;opener
-  browsing context&lt;/span&gt;), if there is one and it is still
-  available.&lt;/p&gt;
+  &lt;code&gt;WindowProxy&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt;
+  from which the current &lt;span&gt;browsing context&lt;/span&gt; was created
+  (its &lt;span&gt;opener browsing context&lt;/span&gt;), if there is one and it
+  is still available.&lt;/p&gt;
 
 
 
@@ -38062,18 +38065,24 @@
 
 
 
+  &lt;h3&gt;The &lt;code&gt;WindowProxy&lt;/code&gt; object&lt;/h3&gt;
 
-  &lt;h3&gt;The default view&lt;/h3&gt;
+  &lt;p&gt;As mentioned earlier, each &lt;span&gt;browsing context&lt;/span&gt; has a
+  &lt;dfn&gt;WindowProxy&lt;/dfn&gt; object. This object is unusual in that it
+  must proxy all operations to the &lt;code&gt;Window&lt;/code&gt; object of the
+  &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;active document&lt;/span&gt;. It is
+  thus indistinguishable from that &lt;code&gt;Window&lt;/code&gt; object in every
+  way, except that it is not equal to it.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;AbstractView&lt;/code&gt; object of &lt;span title=&quot;default
-  view&quot;&gt;default views&lt;/span&gt; must also implement the
-  &lt;code&gt;Window&lt;/code&gt; and &lt;code&gt;EventTarget&lt;/code&gt; interfaces.&lt;/p&gt;
 
+
+  &lt;h3&gt;The &lt;code&gt;Window&lt;/code&gt; object&lt;/h3&gt;
+
   &lt;pre class=&quot;idl&quot;&gt;[&lt;span title=&quot;dom-window-item&quot;&gt;IndexGetter&lt;/span&gt;, &lt;span title=&quot;dom-window-namedItem&quot;&gt;NameGetter&lt;/span&gt;=OverrideBuiltins]
 interface &lt;dfn&gt;Window&lt;/dfn&gt; {
   // the current browsing context
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-window&quot;&gt;window&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-self&quot;&gt;self&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-window&quot;&gt;window&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-self&quot;&gt;self&lt;/span&gt;;
            attribute DOMString &lt;span title=&quot;dom-name&quot;&gt;name&lt;/span&gt;;
   [PutForwards=href] readonly attribute &lt;span&gt;Location&lt;/span&gt; &lt;span title=&quot;dom-document-location&quot;&gt;location&lt;/span&gt;;
   readonly attribute &lt;span&gt;History&lt;/span&gt; &lt;span title=&quot;dom-history&quot;&gt;history&lt;/span&gt;;
@@ -38091,13 +38100,13 @@
   void &lt;span title=&quot;dom-window-blur&quot;&gt;blur&lt;/span&gt;();
 
   // other browsing contexts
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-frames&quot;&gt;frames&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-frames&quot;&gt;frames&lt;/span&gt;;
   readonly attribute unsigned long &lt;span title=&quot;dom-length&quot;&gt;length&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-top&quot;&gt;top&lt;/span&gt;;
-  [Replaceable] readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-opener&quot;&gt;opener&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-parent&quot;&gt;parent&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-top&quot;&gt;top&lt;/span&gt;;
+  [Replaceable] readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-opener&quot;&gt;opener&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-parent&quot;&gt;parent&lt;/span&gt;;
   readonly attribute &lt;span&gt;Element&lt;/span&gt; &lt;span title=&quot;dom-frameElement&quot;&gt;frameElement&lt;/span&gt;;
-  &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-open&quot;&gt;open&lt;/span&gt;([Optional] in DOMString url, [Optional] in DOMString target, [Optional] in DOMString features, [Optional] in DOMString replace);
+  &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-open&quot;&gt;open&lt;/span&gt;([Optional] in DOMString url, [Optional] in DOMString target, [Optional] in DOMString features, [Optional] in DOMString replace);
 
   // the user agent
   readonly attribute &lt;span&gt;Navigator&lt;/span&gt; &lt;span title=&quot;dom-navigator&quot;&gt;navigator&lt;/span&gt;; &lt;!-- XXX IE6 also has window.clientInformation pointing to this same object --&gt;
@@ -38164,31 +38173,25 @@
           <A HREF="http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindowInternal.idl">http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindowInternal.idl</A> - DOM level 0
    --&gt;
 
+  &lt;p&gt;The &lt;code&gt;Window&lt;/code&gt; object must also implement the
+  &lt;code&gt;EventTarget&lt;/code&gt; interface.&lt;/p&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-window&quot;&gt;&lt;code&gt;window&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn
   title=&quot;dom-frames&quot;&gt;&lt;code&gt;frames&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn
   title=&quot;dom-self&quot;&gt;&lt;code&gt;self&lt;/code&gt;&lt;/dfn&gt; DOM attributes must all
-  return the &lt;code&gt;Window&lt;/code&gt; object itself.&lt;/p&gt;
+  return the &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;browsing
+  context&lt;/span&gt;'s &lt;code&gt;WindowProxy&lt;/code&gt; object.&lt;/p&gt;
 
-  &lt;p&gt;The &lt;code&gt;Window&lt;/code&gt; object also provides the scope for &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;
-  execution. Each &lt;code&gt;Document&lt;/code&gt; in a &lt;span&gt;browsing
-  context&lt;/span&gt; has an associated &lt;dfn&gt;list of added properties&lt;/dfn&gt;
-  that, when a document is &lt;span title=&quot;active
-  document&quot;&gt;active&lt;/span&gt;, are available on the
-  &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;default view&lt;/span&gt;'s
-  &lt;code&gt;Window&lt;/code&gt; object. A &lt;code&gt;Document&lt;/code&gt; object's
-  &lt;span&gt;list of added properties&lt;/span&gt; must be empty when the
-  &lt;code&gt;Document&lt;/code&gt; object is created.&lt;/p&gt;
 
 
-
   &lt;h4&gt;Security&lt;/h4&gt;
 
-  &lt;p&gt;User agents must raise a &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception whenever
-  any of the members of a &lt;code&gt;Window&lt;/code&gt; object are accessed by
-  scripts whose &lt;span&gt;effective script origin&lt;/span&gt; is not the same
-  as the &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;browsing context&lt;/span&gt;'s
-  &lt;span&gt;active document&lt;/span&gt;'s &lt;span&gt;effective script origin&lt;/span&gt;,
-  with the following exceptions:&lt;/p&gt;
+  &lt;p&gt;User agents must raise a &lt;code&gt;SECURITY_ERR&lt;/code&gt; exception
+  whenever any of the members of a &lt;code&gt;Window&lt;/code&gt; object are
+  accessed by scripts whose &lt;span&gt;effective script origin&lt;/span&gt; is
+  not the same as the &lt;code&gt;Window&lt;/code&gt; object's
+  &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;effective script origin&lt;/span&gt;, with
+  the following exceptions:&lt;/p&gt;
 
   &lt;ul&gt;
 
@@ -38282,10 +38285,12 @@
   &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; that invoked the method
   as the &lt;span&gt;source browsing context&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p&gt;The method must return the &lt;code&gt;Window&lt;/code&gt; object of the
-  default view of the &lt;span&gt;browsing context&lt;/span&gt; that was
-  navigated, or null if no browsing context was navigated.&lt;/p&gt;
+  &lt;p&gt;The method must return the &lt;code&gt;WindowProxy&lt;/code&gt; object of the
+  &lt;span&gt;browsing context&lt;/span&gt; that was navigated, or null if no
+  browsing context was navigated.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-name&quot;&gt;&lt;code&gt;name&lt;/code&gt;&lt;/dfn&gt; attribute of
   the &lt;code&gt;Window&lt;/code&gt; object must, on getting, return the current
   name of the &lt;span&gt;browsing context&lt;/span&gt;, and, on setting, set the
@@ -38294,6 +38299,8 @@
   &lt;p class=&quot;note&quot;&gt;The name &lt;a href=&quot;#resetBCName&quot;&gt;gets reset&lt;/a&gt; when
   the browsing context is navigated to another domain.&lt;/p&gt;
 
+  &lt;hr&gt;
+
   &lt;p&gt;The &lt;dfn title=&quot;dom-window-close&quot;&gt;&lt;code&gt;close()&lt;/code&gt;&lt;/dfn&gt;
   method on &lt;code&gt;Window&lt;/code&gt; objects should, if the corresponding
   &lt;span&gt;browsing context&lt;/span&gt; &lt;var title=&quot;&quot;&gt;A&lt;/var&gt; is an
@@ -38313,25 +38320,23 @@
   &lt;p&gt;The &lt;dfn title=&quot;dom-length&quot;&gt;&lt;code&gt;length&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute on the &lt;code&gt;Window&lt;/code&gt; interface must return the
   number of &lt;span title=&quot;child browsing context&quot;&gt;child browsing
-  contexts&lt;/span&gt; of the &lt;span title=&quot;active document&quot;&gt;active&lt;/span&gt;
-  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  contexts&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span&gt;indices of the supported indexed properties&lt;/span&gt; on
   the &lt;code&gt;Window&lt;/code&gt; object at any instant are the numbers in the
   range 0 .. &lt;span&gt;&lt;var title=&quot;&quot;&gt;n&lt;/var&gt;-1&lt;/span&gt;, where &lt;var
   title=&quot;&quot;&gt;n&lt;/var&gt; is the number of &lt;span title=&quot;child browsing
-  context&quot;&gt;child browsing contexts&lt;/span&gt; of the &lt;span title=&quot;active
-  document&quot;&gt;active&lt;/span&gt; &lt;code&gt;Document&lt;/code&gt;. If &lt;var
-  title=&quot;&quot;&gt;n&lt;/var&gt; is zero then there are no &lt;span&gt;supported indexed
-  properties&lt;/span&gt;.&lt;/p&gt;
+  context&quot;&gt;child browsing contexts&lt;/span&gt; of the
+  &lt;code&gt;Document&lt;/code&gt;. If &lt;var title=&quot;&quot;&gt;n&lt;/var&gt; is zero then there
+  are no &lt;span&gt;supported indexed properties&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;When a &lt;code&gt;Window&lt;/code&gt; object is &lt;dfn
   title=&quot;dom-window-item&quot;&gt;indexed to retrieve an indexed
   property&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;, the value returned must be
   the &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;th &lt;span&gt;child browsing context&lt;/span&gt;
-  of the &lt;span title=&quot;active document&quot;&gt;active&lt;/span&gt;
-  &lt;code&gt;Document&lt;/code&gt;, sorted in document order of the elements
-  nesting those browsing contexts.&lt;/p&gt;
+  of the &lt;code&gt;Document&lt;/code&gt;, sorted in the &lt;span&gt;tree order&lt;/span&gt;
+  of the elements nesting those &lt;span title=&quot;browsing
+  context&quot;&gt;browsing contexts&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;These properties are the &lt;dfn&gt;dynamic nested browsing context
   properties&lt;/dfn&gt;.&lt;/p&gt;
@@ -38340,11 +38345,15 @@
   &lt;h4&gt;Garbage collection and browsing contexts&lt;/h4&gt;
 
   &lt;p&gt;A &lt;span&gt;browsing context&lt;/span&gt; has a strong reference to each of
-  its &lt;code&gt;Document&lt;/code&gt;s and &lt;span title=&quot;view&quot;&gt;views&lt;/span&gt;, and
-  the user agent itself has a strong reference to its &lt;span
+  its &lt;code&gt;Document&lt;/code&gt;s and its &lt;code&gt;WindowProxt&lt;/code&gt; object,
+  and the user agent itself has a strong reference to its &lt;span
   title=&quot;top-level browsing context&quot;&gt;top-level browsing
   contexts&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;A &lt;code&gt;Document&lt;/code&gt; has a strong reference to each of its
+  &lt;span title=&quot;view&quot;&gt;views&lt;/span&gt; and their &lt;code&gt;AbstractView&lt;/code&gt;
+  objects.&lt;/p&gt;
+
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is to &lt;dfn&gt;discard a
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, that means that it is to lose the
   strong reference from the &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;browsing
@@ -38352,9 +38361,8 @@
 
   &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;default
   view&lt;/span&gt;'s &lt;code&gt;Window&lt;/code&gt; object &lt;span title=&quot;implied strong
-  reference&quot;&gt;has a strong reference of its own&lt;/span&gt; to the
-  &lt;code&gt;Document&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt;'s
-  &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
+  reference&quot;&gt;has a strong reference of its own&lt;/span&gt; to its
+  &lt;code&gt;Document&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;When &lt;dfn&gt;a &lt;em&gt;&lt;span&gt;browsing context&lt;/span&gt;&lt;/em&gt; is
   discarded&lt;/dfn&gt;, the strong reference from the user agent itself to
@@ -38370,7 +38378,7 @@
   containing one or more &lt;span title=&quot;top-level browsing
   context&quot;&gt;top-level browsing contexts&lt;/span&gt;). Other &lt;span
   title=&quot;browsing context&quot;&gt;browsing contexts&lt;/span&gt; must be discarded
-  once their &lt;code&gt;Window&lt;/code&gt; object is eligible for garbage
+  once their &lt;code&gt;WindowProxy&lt;/code&gt; object is eligible for garbage
   collection.&lt;/p&gt;
 
 
@@ -38419,10 +38427,10 @@
    &lt;li&gt;
 
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;elements&lt;/var&gt; contains an &lt;code&gt;iframe&lt;/code&gt;
-    element, then return the &lt;code&gt;Window&lt;/code&gt; object of the
-    &lt;span&gt;default view&lt;/span&gt; of the &lt;span&gt;nested browsing
-    context&lt;/span&gt; represented by the first such &lt;code&gt;iframe&lt;/code&gt;
-    element in &lt;span&gt;tree order&lt;/span&gt;, and abort these steps.&lt;/p&gt;
+    element, then return the &lt;code&gt;WindowProxy&lt;/code&gt; object of the
+    &lt;span&gt;nested browsing context&lt;/span&gt; represented by the first such
+    &lt;code&gt;iframe&lt;/code&gt; element in &lt;span&gt;tree order&lt;/span&gt;, and abort
+    these steps.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -38777,8 +38785,7 @@
      &lt;dd&gt;The &lt;span&gt;origin&lt;/span&gt; and &lt;span&gt;effective script
      origin&lt;/span&gt; are equal to the &lt;span&gt;origin&lt;/span&gt; and
      &lt;span&gt;effective script origin&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt;
-     object that was the &lt;span&gt;active document&lt;/span&gt; of the browsing context of the
-     &lt;code&gt;Window&lt;/code&gt; object from which the
+     object of the &lt;code&gt;Window&lt;/code&gt; object from which the
      &lt;code&gt;XMLHttpRequest&lt;/code&gt; constructor was invoked. (That is,
      they track the &lt;code&gt;Document&lt;/code&gt; to which the
      &lt;code&gt;XMLHttpRequest&lt;/code&gt; object's &lt;a
@@ -39260,24 +39267,6 @@
 
    &lt;/dd&gt;
 
-   &lt;dt&gt;Membership in a &lt;dfn&gt;script group&lt;/dfn&gt;&lt;/dt&gt;
-
-   &lt;dd&gt;
-
-    &lt;p&gt;A group of one or more scripts that are loaded in the same
-    context, which are always disabled as a group. Scripts in a script
-    group all have the same &lt;span title=&quot;script's global
-    object&quot;&gt;global object&lt;/span&gt; and &lt;span title=&quot;script's browsing
-    context&quot;&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;A script group can be &lt;i&gt;frozen&lt;/i&gt;. When a script group is
-    frozen, any code defined in that script group will throw an
-    exception when invoked. A frozen script group can be
-    &lt;i&gt;unfrozen&lt;/i&gt;, allowing scripts in that script group to run
-    normally again.&lt;/p&gt;
-
-   &lt;/dd&gt;
-
   &lt;/dl&gt;
 
 
@@ -39285,61 +39274,41 @@
   &lt;h5&gt;Calling scripts&lt;/h5&gt;
 
   &lt;p&gt;When a user agent is to &lt;dfn&gt;jump to a code entry-point&lt;/dfn&gt; for
-  a &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;, for example because
-  one &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; has called another,
-  or because the user agent is to invoke a callback defined in that
-  &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;, the user agent must run
-  the following steps:&lt;/p&gt;
+  a &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;, for example to invoke
+  an event listener defined in that &lt;span
+  title=&quot;concept-script&quot;&gt;script&lt;/span&gt;, the user agent must run the
+  following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
-   &lt;li&gt;
+   &lt;li&gt;&lt;p&gt;If the &lt;span&gt;script's global object&lt;/span&gt; is a
+   &lt;code&gt;Window&lt;/code&gt; object whose &lt;code&gt;Document&lt;/code&gt; object is
+   not &lt;span&gt;fully active&lt;/span&gt;, then abort these steps without doing
+   anything. The callback is not fired.&lt;/p&gt;
 
-    &lt;p&gt;If executable code from a &lt;span
-    title=&quot;concept-script&quot;&gt;script&lt;/span&gt; is making a call to a &lt;span
-    title=&quot;concept-script&quot;&gt;script&lt;/span&gt; in the same &lt;span&gt;script
-    group&lt;/span&gt;, then skip this step.&lt;/p&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;first script&lt;/span&gt; to be the &lt;span
+   title=&quot;concept-script&quot;&gt;script&lt;/span&gt; being invoked.&lt;/p&gt;&lt;/li&gt;
 
-    &lt;p&gt;Otherwise, if &lt;span title=&quot;concept-bc-noscript&quot;&gt;scripting is
-    disabled&lt;/span&gt; in the &lt;span&gt;script's browsing context&lt;/span&gt;, or
-    if the script's &lt;span&gt;script group&lt;/span&gt; is &lt;i&gt;frozen&lt;/i&gt;, then
-    the user agent must throw an &lt;code&gt;UNAVAILABLE_SCRIPT_ERR&lt;/code&gt;
-    exception and abort these steps.&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If this algorithm was &lt;em&gt;not&lt;/em&gt; invoked by one script
-   calling another, then set the &lt;span&gt;first script&lt;/span&gt; to be the
-   &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; being invoked.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;Make the &lt;span title=&quot;script execution environment&quot;&gt;script
    execution environment&lt;/span&gt; for the &lt;span
    title=&quot;concept-script&quot;&gt;script&lt;/span&gt; execute the code for the given
    code entry-point.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;If this algorithm was &lt;em&gt;not&lt;/em&gt; invoked by one script
-   calling another, then set the &lt;span&gt;first script&lt;/span&gt; back to
-   whatever it was when this algorithm started.&lt;/p&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Set the &lt;span&gt;first script&lt;/span&gt; back to whatever it was
+   when this algorithm started.&lt;/p&gt;&lt;/li&gt;
 
   &lt;/ol&gt;
 
-  &lt;p class=&quot;note&quot;&gt;In particular, this means that scripts in a
-  &lt;i&gt;frozen&lt;/i&gt; &lt;span&gt;script group&lt;/span&gt; can keep on executing so
-  long as they don't call code in another &lt;span&gt;script
-  group&lt;/span&gt;. This is why a script doesn't immediately terminate
-  after calling &lt;code title=&quot;dom-document-open&quot;&gt;document.open()&lt;/code&gt;
-  on its own &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  &lt;p&gt;This algorithm is not invoked by one script calling another.&lt;/p&gt;
 
 
-
   &lt;h5 id=&quot;creating-scripts&quot;&gt;Creating scripts&lt;/h5&gt;
 
   &lt;p&gt;When the specification says that a &lt;span
   title=&quot;concept-script&quot;&gt;script&lt;/span&gt; is to be &lt;dfn title=&quot;create a
   script&quot;&gt;created&lt;/dfn&gt;, given some script source, its scripting
   language, a global object, a browsing context, a character encoding,
-  a base URL, and a script group, the user agent must run the
-  following steps:&lt;/p&gt;
+  and a base URL, the user agent must run the following steps:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -39359,9 +39328,6 @@
    character encoding&lt;/span&gt;, and the &lt;span&gt;script's base URL&lt;/span&gt;
    from the settings passed to this algorithm.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;Add the &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; to the given &lt;span&gt;script
-   group&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
    &lt;li&gt;&lt;p&gt;&lt;span title=&quot;jump to a code entry-point&quot;&gt;Jump&lt;/span&gt; to the
    &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt;'s &lt;i&gt;initial code
    entry-point&lt;/i&gt;.&lt;/p&gt;&lt;/li&gt;
@@ -39374,11 +39340,10 @@
   given some script source, its scripting language, and a browsing
   context, the user agent must &lt;span&gt;create a script&lt;/span&gt;, using the
   given script source and scripting language, using a new empty object
-  as the global object, using the given browsing context as the
-  browsing context, and using a new script group as the script
-  group. The character encoding and base URL for the resulting &lt;span
-  title=&quot;concept-script&quot;&gt;script&lt;/span&gt; are not important as no APIs
-  are exposed to the script.&lt;/p&gt;
+  as the global object, and using the given browsing context as the
+  browsing context. The character encoding and base URL for the
+  resulting &lt;span title=&quot;concept-script&quot;&gt;script&lt;/span&gt; are not
+  important as no APIs are exposed to the script.&lt;/p&gt;
 
   &lt;hr&gt;
 
@@ -39404,8 +39369,7 @@
    &lt;li&gt;&lt;p&gt;The browsing context is the &lt;span&gt;browsing context&lt;/span&gt; of
    &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;Window&lt;/code&gt; object of the
-   &lt;span&gt;default view&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of
+   &lt;li&gt;&lt;p&gt;The global object is the &lt;code&gt;Window&lt;/code&gt; object of
    &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;The character encoding is the &lt;span title=&quot;document's
@@ -39417,9 +39381,6 @@
    URL&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;. (&lt;a
    href=&quot;#sbu-not-copy&quot;&gt;This is a reference, not a copy&lt;/a&gt;.)&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;p&gt;The script group is the &lt;span&gt;current script group&lt;/span&gt; of
-   &lt;var title=&quot;&quot;&gt;document&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
   &lt;/ol&gt;
 
 
@@ -39864,8 +39825,7 @@
     of the handler, to the element's object, to the element's
     &lt;span&gt;form owner&lt;/span&gt;, if it has one, to the element's
     &lt;code&gt;Document&lt;/code&gt; object, to the &lt;code&gt;Window&lt;/code&gt; object of
-    the &lt;span&gt;browsing context&lt;/span&gt; of that
-    &lt;code&gt;Document&lt;/code&gt;. Set the function's &lt;code&gt;this&lt;/code&gt;
+    that &lt;code&gt;Document&lt;/code&gt;. Set the function's &lt;code&gt;this&lt;/code&gt;
     parameter to the &lt;code&gt;Element&lt;/code&gt; object representing the
     element. Let this function be the only entry in the script's
     &lt;span&gt;list of code entry-points&lt;/span&gt;.&lt;/p&gt;
@@ -39884,9 +39844,7 @@
    &lt;span&gt;script's browsing context&lt;/span&gt;, the &lt;span&gt;script's
    character encoding&lt;/span&gt;, and the &lt;span&gt;script's base URL&lt;/span&gt;
    from &lt;span&gt;the script settings determined from the node&lt;/span&gt; on
-   which the attribute is being set, and add the &lt;span
-   title=&quot;concept-script&quot;&gt;script&lt;/span&gt; to the &lt;span&gt;script
-   group&lt;/span&gt; determined from that node as well.&lt;/p&gt;&lt;/li&gt;
+   which the attribute is being set.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Set the corresponding event handler attribute to the
    aforementioned function.&lt;/p&gt;&lt;/li&gt;
@@ -40552,10 +40510,9 @@
 
     &lt;p&gt;The user agent must &lt;span&gt;fire a simple event&lt;/span&gt; called
     &lt;code title=&quot;event-beforeprint&quot;&gt;beforeprint&lt;/code&gt; at the
-    &lt;code&gt;Window&lt;/code&gt; object of the browsing context of the
-    &lt;code&gt;Document&lt;/code&gt; that is being printed, as well as any &lt;span
-    title=&quot;nested browsing context&quot;&gt;nested browsing contexts&lt;/span&gt; in
-    it.&lt;/p&gt;
+    &lt;code&gt;Window&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt; that is
+    being printed, as well as any &lt;span title=&quot;nested browsing
+    context&quot;&gt;nested browsing contexts&lt;/span&gt; in it.&lt;/p&gt;
 
     &lt;p class=&quot;example&quot;&gt;The &lt;code
     title=&quot;event-beforeprint&quot;&gt;beforeprint&lt;/code&gt; event can be used
@@ -40582,10 +40539,9 @@
 
     &lt;p&gt;The user agent must &lt;span&gt;fire a simple event&lt;/span&gt; called
     &lt;code title=&quot;event-afterprint&quot;&gt;afterprint&lt;/code&gt; at the
-    &lt;code&gt;Window&lt;/code&gt; object of the browsing context of the
-    &lt;code&gt;Document&lt;/code&gt; that is being printed, as well as any &lt;span
-    title=&quot;nested browsing context&quot;&gt;nested browsing contexts&lt;/span&gt; in
-    it.&lt;/p&gt;
+    &lt;code&gt;Window&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt; that is
+    being printed, as well as any &lt;span title=&quot;nested browsing
+    context&quot;&gt;nested browsing contexts&lt;/span&gt; in it.&lt;/p&gt;
 
     &lt;p class=&quot;example&quot;&gt;The &lt;code
     title=&quot;event-afterprint&quot;&gt;afterprint&lt;/code&gt; event can be used
@@ -40684,8 +40640,9 @@
     title=&quot;dom-showModalDialog&quot;&gt;showModalDialog()&lt;/code&gt; method was
     called. The new auxiliary browsing context has no name.&lt;/p&gt;
 
-    &lt;p class=&quot;note&quot;&gt;This browsing context implements the
-    &lt;code&gt;WindowModal&lt;/code&gt; interface.&lt;/p&gt;
+    &lt;p class=&quot;note&quot;&gt;This &lt;span&gt;browsing context&lt;/span&gt;'s
+    &lt;code&gt;Document&lt;/code&gt;s' &lt;code&gt;Window&lt;/code&gt; objects all implement
+    the &lt;code&gt;WindowModal&lt;/code&gt; interface.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -40742,8 +40699,10 @@
 
   &lt;/ol&gt;
 
-  &lt;p&gt;Browsing contexts created by the above algorithm must implement
-  the &lt;code&gt;WindowModal&lt;/code&gt; interface:&lt;/p&gt;
+  &lt;p&gt;The &lt;code&gt;Window&lt;/code&gt; objects of &lt;code&gt;Document&lt;/code&gt;s hosted
+  by &lt;span title=&quot;browsing context&quot;&gt;browsing contexts&lt;/span&gt; created
+  by the above algorithm must all implement the
+  &lt;code&gt;WindowModal&lt;/code&gt; interface:&lt;/p&gt;
 
   &lt;p class=&quot;XXX&quot;&gt;Really I want the Window object to just gain these
   attributes, as if they were on the Window prototype. That's the XXX
@@ -43005,13 +42964,12 @@
   &lt;p&gt;Objects implementing the &lt;code&gt;ApplicationCache&lt;/code&gt; interface
   must also implement the &lt;code&gt;EventTarget&lt;/code&gt; interface.&lt;/p&gt;
 
-  &lt;p&gt;There is a one-to-one mapping from &lt;code&gt;Document&lt;/code&gt; objects
-  to &lt;code&gt;ApplicationCache&lt;/code&gt; objects. The &lt;dfn
+  &lt;p&gt;There is a one-to-one mapping from &lt;code&gt;Window&lt;/code&gt; objects to
+  &lt;code&gt;ApplicationCache&lt;/code&gt; objects. The &lt;dfn
   title=&quot;dom-applicationCache&quot;&gt;&lt;code&gt;applicationCache&lt;/code&gt;&lt;/dfn&gt;
   attribute on &lt;code&gt;Window&lt;/code&gt; objects must return the
   &lt;code&gt;ApplicationCache&lt;/code&gt; object associated with the
-  &lt;span&gt;active document&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt;'s
-  &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;
+  &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;An &lt;code&gt;ApplicationCache&lt;/code&gt; object might be associated with
   an &lt;span&gt;application cache&lt;/span&gt;. When the &lt;code&gt;Document&lt;/code&gt;
@@ -43249,18 +43207,19 @@
 
   &lt;p&gt;&lt;code&gt;History&lt;/code&gt; objects provide a representation of the
   pages in the session history of &lt;span title=&quot;browsing
-  context&quot;&gt;browsing contexts&lt;/span&gt;. Each browsing context has a
-  distinct session history.&lt;/p&gt;
+  context&quot;&gt;browsing contexts&lt;/span&gt;. Each &lt;span&gt;browsing
+  context&lt;/span&gt;, including &lt;span&gt;nested browsing context&lt;/span&gt;, has
+  a distinct session history.&lt;/p&gt;
 
-  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a browsing context's session
-  history is associated with a unique instance of the
-  &lt;code&gt;History&lt;/code&gt; object, although they all must model the same
-  underlying session history.&lt;/p&gt;
+  &lt;p&gt;Each &lt;code&gt;Document&lt;/code&gt; object in a &lt;span&gt;browsing
+  context&lt;/span&gt;'s &lt;span&gt;session history&lt;/span&gt; is associated with a
+  unique instance of the &lt;code&gt;History&lt;/code&gt; object, although they
+  all must model the same underlying &lt;span&gt;session history&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-history&quot;&gt;&lt;code&gt;history&lt;/code&gt;&lt;/dfn&gt; attribute
   of the &lt;code&gt;Window&lt;/code&gt; interface must return the object
   implementing the &lt;code&gt;History&lt;/code&gt; interface for that
-  &lt;code&gt;Window&lt;/code&gt; object's &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
+  &lt;code&gt;Window&lt;/code&gt; object's &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;History&lt;/code&gt; objects represent their &lt;span&gt;browsing
   context&lt;/span&gt;'s session history as a flat list of &lt;span
@@ -43513,13 +43472,14 @@
 
      &lt;dd&gt;&lt;p&gt;&lt;span&gt;Queue a task&lt;/span&gt; to fire a &lt;dfn
      title=&quot;event-popstate&quot;&gt;&lt;code&gt;popstate&lt;/code&gt;&lt;/dfn&gt; event in no
-     namespace on the &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;browsing
-     context&lt;/span&gt;, using the &lt;code&gt;PopStateEvent&lt;/code&gt; interface,
-     with the &lt;code title=&quot;dom-PopStateEvent-state&quot;&gt;state&lt;/code&gt;
-     attribute set to the value of &lt;var title=&quot;&quot;&gt;state&lt;/var&gt;. This
-     event must bubble but not be cancelable and has no default
-     action. The &lt;span&gt;task source&lt;/span&gt; for this task is the
-     &lt;span&gt;DOM manipulation task source&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
+     namespace on the &lt;code&gt;Window&lt;/code&gt; object of the
+     &lt;code&gt;Document&lt;/code&gt;, using the &lt;code&gt;PopStateEvent&lt;/code&gt;
+     interface, with the &lt;code
+     title=&quot;dom-PopStateEvent-state&quot;&gt;state&lt;/code&gt; attribute set to the
+     value of &lt;var title=&quot;&quot;&gt;state&lt;/var&gt;. This event must bubble but
+     not be cancelable and has no default action. The &lt;span&gt;task
+     source&lt;/span&gt; for this task is the &lt;span&gt;DOM manipulation task
+     source&lt;/span&gt;.&lt;/p&gt;&lt;/dd&gt;
 
      &lt;dt&gt;Otherwise&lt;/dt&gt;
 
@@ -43577,7 +43537,7 @@
   &lt;p&gt;The &lt;dfn title=&quot;dom-location&quot;&gt;&lt;code&gt;location&lt;/code&gt;&lt;/dfn&gt;
   attribute of the &lt;code&gt;Window&lt;/code&gt; interface must return the
   &lt;code&gt;Location&lt;/code&gt; object for that &lt;code&gt;Window&lt;/code&gt; object's
-  &lt;span&gt;active document&lt;/span&gt;.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
 
   &lt;p&gt;&lt;code&gt;Location&lt;/code&gt; objects provide a representation of &lt;span
   title=&quot;the document's address&quot;&gt;their document's address&lt;/span&gt;, and
@@ -44506,18 +44466,6 @@
 
     &lt;ol&gt;
 
-     &lt;li&gt;&lt;p&gt;Freeze the &lt;span&gt;active document&lt;/span&gt;'s &lt;span&gt;current
-     script group&lt;/span&gt;, as well as the &lt;span&gt;current script
-     group&lt;/span&gt; of any &lt;span title=&quot;active document&quot;&gt;active
-     documents&lt;/span&gt; in &lt;span title=&quot;nested browsing context&quot;&gt;nested
-     browsing contexts&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the browsing context's default view's &lt;code&gt;Window&lt;/code&gt;
-     object to the &lt;span&gt;active document&lt;/span&gt;'s
-     &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;list of added
-     properties&lt;/span&gt;.&lt;/li&gt;
-
      &lt;li&gt;If the browsing context is a &lt;span&gt;top-level browsing
      context&lt;/span&gt; (and not an &lt;span&gt;auxiliary browsing
      context&lt;/span&gt;), and the &lt;span&gt;origin&lt;/span&gt; of the
@@ -44565,17 +44513,6 @@
 
      &lt;/li&gt;
 
-     &lt;li&gt;The user agent must move any properties that have been added
-     to the &lt;span&gt;active document&lt;/span&gt;'s &lt;code&gt;Document&lt;/code&gt;'s
-     &lt;span&gt;list of added properties&lt;/span&gt; to browsing context's
-     default view's &lt;code&gt;Window&lt;/code&gt; object.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Unfreeze the &lt;span&gt;active document&lt;/span&gt;'s &lt;span&gt;current
-     script group&lt;/span&gt;, as well as the &lt;span&gt;current script
-     group&lt;/span&gt; of any &lt;span title=&quot;active document&quot;&gt;active
-     documents&lt;/span&gt; in &lt;span title=&quot;nested browsing context&quot;&gt;nested
-     browsing contexts&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
     &lt;/ol&gt;
 
    &lt;/li&gt;
@@ -44629,8 +44566,7 @@
    which does not bubble but is cancelable.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;Dispatch &lt;var title=&quot;&quot;&gt;event&lt;/var&gt; at the
-   &lt;code&gt;Window&lt;/code&gt; object of the &lt;code&gt;Document&lt;/code&gt;'s
-   &lt;span&gt;browsing context&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any event listeners were triggered by the previous step,
    then set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/p&gt;&lt;/li&gt;
@@ -44659,17 +44595,17 @@
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;&lt;span&gt;Fire a simple event&lt;/span&gt; called &lt;code
-   title=&quot;event-unload&quot;&gt;unload&lt;/code&gt; at the &lt;code&gt;Window&lt;/code&gt;
-   object of the &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;browsing
-   context&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
+   title=&quot;event-unload&quot;&gt;unload&lt;/code&gt; at the &lt;code&gt;Document&lt;/code&gt;'s
+   &lt;code&gt;Window&lt;/code&gt; object.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If any event listeners were triggered by the previous step,
    then set &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If there are any outstanding transactions that have
    callbacks that involve &lt;span title=&quot;concept-script&quot;&gt;scripts&lt;/span&gt;
-   that are in the document's &lt;span&gt;current script group&lt;/span&gt;, roll
-   them back (without invoking any of the callbacks) and set &lt;var
+   whose &lt;span title=&quot;script's global object&quot;&gt;global object&lt;/span&gt; is
+   the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object, roll them
+   back (without invoking any of the callbacks) and set &lt;var
    title=&quot;&quot;&gt;salvageable&lt;/var&gt; to false.&lt;/p&gt;
 
    &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;salvageable&lt;/var&gt; and &lt;var
@@ -45021,10 +44957,9 @@
   &lt;p&gt;When the &lt;code title=&quot;dom-localStorage&quot;&gt;localStorage&lt;/code&gt;
   attribute is accessed, the user agent must check to see if it has
   allocated a local storage area for the &lt;span&gt;origin&lt;/span&gt; of the
-  &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of
-  the &lt;code&gt;Window&lt;/code&gt; object on which the method was invoked. If
-  it has not, a new storage area for that &lt;span&gt;origin&lt;/span&gt; must be
-  created.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the
+  method was invoked. If it has not, a new storage area for that
+  &lt;span&gt;origin&lt;/span&gt; must be created.&lt;/p&gt;
 
   &lt;p&gt;The user agent must then return the &lt;code&gt;Storage&lt;/code&gt; object
   associated with that origin's local storage area. Each
@@ -45060,9 +44995,9 @@
   &lt;p&gt;When this happens, the user agent must dispatch an event with the
   name &lt;code&gt;storage&lt;/code&gt;, with no namespace, which does not bubble
   but is cancelable, and which uses the &lt;code&gt;StorageEvent&lt;/code&gt;
-  interface, at each &lt;code&gt;Window&lt;/code&gt; object whose &lt;span&gt;active
-  document&lt;/span&gt; has a &lt;code&gt;Storage&lt;/code&gt; object that is
-  affected.&lt;/p&gt;
+  interface, at each &lt;code&gt;Window&lt;/code&gt; object whose
+  &lt;code&gt;Document&lt;/code&gt; object both has a &lt;code&gt;Storage&lt;/code&gt; object
+  that is affected, and is &lt;span&gt;fully active&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;If the event is being fired due to an invocation of the
   &lt;code title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; or &lt;code
@@ -45087,14 +45022,15 @@
   title=&quot;the document's address&quot;&gt;the address of the document&lt;/span&gt;
   whose &lt;code&gt;Storage&lt;/code&gt; object was affected; its &lt;code
   title=&quot;dom-StorageEvent-source&quot;&gt;source&lt;/code&gt; attribute set to the
-  &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;browsing context&lt;/span&gt; that
-  that document is in, if the two documents are in the same &lt;span&gt;unit
-  of related browsing contexts&lt;/span&gt;, or null otherwise; and its
-  &lt;code title=&quot;dom-StorageEvent-storageArea&quot;&gt;storageArea&lt;/code&gt;
-  attribute set to the &lt;code&gt;Storage&lt;/code&gt; object from the
-  &lt;code&gt;Window&lt;/code&gt; object of the target &lt;code&gt;Document&lt;/code&gt; that
-  represents the same kind of &lt;code&gt;Storage&lt;/code&gt; area as was
-  affected (i.e. session or local).&lt;/p&gt;
+  that document's &lt;span&gt;browsing context&lt;/span&gt;'s
+  &lt;code&gt;WindowProxy&lt;/code&gt; object, if the two documents are in the
+  same &lt;span&gt;unit of related browsing contexts&lt;/span&gt;, or null
+  otherwise; and its &lt;code
+  title=&quot;dom-StorageEvent-storageArea&quot;&gt;storageArea&lt;/code&gt; attribute
+  set to the &lt;code&gt;Storage&lt;/code&gt; object from the &lt;code&gt;Window&lt;/code&gt;
+  object of the target &lt;code&gt;Document&lt;/code&gt; that represents the same
+  kind of &lt;code&gt;Storage&lt;/code&gt; area as was affected (i.e. session or
+  local).&lt;/p&gt;
 
 
   &lt;h6&gt;Event definition&lt;/h6&gt;
@@ -45104,10 +45040,10 @@
   readonly attribute DOMString &lt;span title=&quot;dom-StorageEvent-oldValue&quot;&gt;oldValue&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-StorageEvent-newValue&quot;&gt;newValue&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-StorageEvent-url&quot;&gt;url&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-StorageEvent-source&quot;&gt;source&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-StorageEvent-source&quot;&gt;source&lt;/span&gt;;
   readonly attribute &lt;span&gt;Storage&lt;/span&gt; &lt;span title=&quot;dom-StorageEvent-storageArea&quot;&gt;storageArea&lt;/span&gt;;
-  void &lt;span title=&quot;dom-StorageEvent-initStorageEvent&quot;&gt;initStorageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;span&gt;Window&lt;/span&gt; sourceArg, in &lt;span&gt;Storage&lt;/span&gt; storageAreaArg);
-  void &lt;span title=&quot;dom-StorageEvent-initStorageEventNS&quot;&gt;initStorageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;span&gt;Window&lt;/span&gt; sourceArg, in &lt;span&gt;Storage&lt;/span&gt; storageAreaArg);
+  void &lt;span title=&quot;dom-StorageEvent-initStorageEvent&quot;&gt;initStorageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;span&gt;WindowProxy&lt;/span&gt; sourceArg, in &lt;span&gt;Storage&lt;/span&gt; storageAreaArg);
+  void &lt;span title=&quot;dom-StorageEvent-initStorageEventNS&quot;&gt;initStorageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in DOMString keyArg, in DOMString oldValueArg, in DOMString newValueArg, in DOMString urlArg, in &lt;span&gt;WindowProxy&lt;/span&gt; sourceArg, in &lt;span&gt;Storage&lt;/span&gt; storageAreaArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn
@@ -45135,8 +45071,8 @@
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-StorageEvent-source&quot;&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
-  represents the &lt;code&gt;Window&lt;/code&gt; object of the document whose key
-  changed.&lt;/p&gt;
+  represents the &lt;code&gt;WindowProxy&lt;/code&gt; object of the &lt;span&gt;browsing
+  context&lt;/span&gt; of the document whose key changed.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-StorageEvent-storageArea&quot;&gt;&lt;code&gt;storageArea&lt;/code&gt;&lt;/dfn&gt;
@@ -45219,8 +45155,8 @@
 
   &lt;p&gt;The &lt;code title=&quot;dom-opendatabase&quot;&gt;openDatabase()&lt;/code&gt; method
   must use and create databases from the &lt;span&gt;origin&lt;/span&gt; of the
-  &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of
-  the &lt;code&gt;Window&lt;/code&gt; object on which the method was invoked.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the
+  method was invoked.&lt;/p&gt;
 
   &lt;p&gt;If the database version provided is not the empty string, and the
   database already exists but has a different version, or no version,
@@ -50343,10 +50279,10 @@
   readonly attribute any &lt;span title=&quot;dom-MessageEvent-data&quot;&gt;data&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-MessageEvent-origin&quot;&gt;origin&lt;/span&gt;;
   readonly attribute DOMString &lt;span title=&quot;dom-MessageEvent-lastEventId&quot;&gt;lastEventId&lt;/span&gt;;
-  readonly attribute &lt;span&gt;Window&lt;/span&gt; &lt;span title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
+  readonly attribute &lt;span&gt;WindowProxy&lt;/span&gt; &lt;span title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/span&gt;;
   readonly attribute &lt;span&gt;MessagePort&lt;/span&gt; &lt;span title=&quot;dom-MessageEvent-messagePort&quot;&gt;messagePort&lt;/span&gt;;
-  void &lt;span title=&quot;dom-MessageEvent-initMessageEvent&quot;&gt;initMessageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;span&gt;MessagePort&lt;/span&gt; messagePortArg);
-  void &lt;span title=&quot;dom-MessageEvent-initMessageEventNS&quot;&gt;initMessageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in Window sourceArg, in &lt;span&gt;MessagePort&lt;/span&gt; messagePortArg);
+  void &lt;span title=&quot;dom-MessageEvent-initMessageEvent&quot;&gt;initMessageEvent&lt;/span&gt;(in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in &lt;span&gt;WindowProxy&lt;/span&gt; sourceArg, in &lt;span&gt;MessagePort&lt;/span&gt; messagePortArg);
+  void &lt;span title=&quot;dom-MessageEvent-initMessageEventNS&quot;&gt;initMessageEventNS&lt;/span&gt;(in DOMString namespaceURI, in DOMString typeArg, in boolean canBubbleArg, in boolean cancelableArg, in any dataArg, in DOMString originArg, in DOMString lastEventIdArg, in &lt;span&gt;WindowProxy&lt;/span&gt; sourceArg, in &lt;span&gt;MessagePort&lt;/span&gt; messagePortArg);
 };&lt;/pre&gt;
 
   &lt;p&gt;The &lt;dfn
@@ -50377,7 +50313,8 @@
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-MessageEvent-source&quot;&gt;&lt;code&gt;source&lt;/code&gt;&lt;/dfn&gt; attribute
   represents, in &lt;span&gt;cross-document messaging&lt;/span&gt;, the
-  &lt;code&gt;Window&lt;/code&gt; from which the message came.&lt;/p&gt;
+  &lt;code&gt;WindowProxy&lt;/code&gt; of the &lt;span&gt;browsing context&lt;/span&gt; of the
+  &lt;code&gt;Window&lt;/code&gt; object from which the message came.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn
   title=&quot;dom-MessageEvent-messagePort&quot;&gt;&lt;code&gt;messagePort&lt;/code&gt;&lt;/dfn&gt;
@@ -52157,11 +52094,10 @@
 
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument has a value
     other than a single literal U+002A ASTERISK character (&quot;*&quot;), and
-    the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
-    context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the
-    method was invoked does not have the &lt;span&gt;same origin&lt;/span&gt; as
-    &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort these steps
-    silently.&lt;/p&gt;
+    the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on
+    which the method was invoked does not have the &lt;span&gt;same
+    origin&lt;/span&gt; as &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort
+    these steps silently.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -52178,12 +52114,9 @@
     origin&quot;&gt;Unicode serialization&lt;/span&gt; of the &lt;span&gt;origin&lt;/span&gt; of
     the script that invoked the method, and the &lt;code
     title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt; attribute must be
-    set to the &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;default
-    view&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; for which the
-    &lt;code&gt;Document&lt;/code&gt; object with which the script is associated
-    is the &lt;span&gt;active document&lt;/span&gt;&lt;!--, if there is one, or null
-    otherwise--&gt;.&lt;/p&gt;&lt;!-- I think there always is one, because scripts
-    can't run and see a Window without that being the case. --&gt;
+    set to the &lt;span&gt;script's global object&lt;/span&gt;.&lt;/p&gt; &lt;!-- invariant:
+    the global scope is always a Window if the script can see this
+    method --&gt;
 
    &lt;/li&gt;
 
@@ -52194,7 +52127,6 @@
     method was invoked. The &lt;span&gt;task source&lt;/span&gt; for this &lt;span
     title=&quot;concept-task&quot;&gt;task&lt;/span&gt; is the &lt;span&gt;posted message task
     source&lt;/span&gt;.&lt;/p&gt;
-    &lt;!-- XXX apply any body/window dispatch decisions here --&gt;
 
    &lt;/li&gt;
 
@@ -52271,11 +52203,10 @@
 
     &lt;p&gt;If the &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt; argument has a value
     other than a single literal U+002A ASTERISK character (&quot;*&quot;), and
-    the &lt;span&gt;active document&lt;/span&gt; of the &lt;span&gt;browsing
-    context&lt;/span&gt; of the &lt;code&gt;Window&lt;/code&gt; object on which the
-    method was invoked does not have the &lt;span&gt;same origin&lt;/span&gt; as
-    &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort these steps
-    silently.&lt;/p&gt;
+    the &lt;code&gt;Document&lt;/code&gt; of the &lt;code&gt;Window&lt;/code&gt; object on
+    which the method was invoked does not have the &lt;span&gt;same
+    origin&lt;/span&gt; as &lt;var title=&quot;&quot;&gt;targetOrigin&lt;/var&gt;, then abort
+    these steps silently.&lt;/p&gt;
 
    &lt;/li&gt;
 
@@ -52292,12 +52223,9 @@
     origin&quot;&gt;Unicode serialization&lt;/span&gt; of the &lt;span&gt;origin&lt;/span&gt; of
     the script that invoked the method, and the &lt;code
     title=&quot;dom-MessageEvent-source&quot;&gt;source&lt;/code&gt; attribute must be
-    set to the &lt;code&gt;Window&lt;/code&gt; object of the &lt;span&gt;default
-    view&lt;/span&gt; of the &lt;span&gt;browsing context&lt;/span&gt; for which the
-    &lt;code&gt;Document&lt;/code&gt; object with which the script is associated
-    is the &lt;span&gt;active document&lt;/span&gt;&lt;!--, if there is one, or null
-    otherwise--&gt;.&lt;/p&gt;&lt;!-- I think there always is one, because scripts
-    can't run and see a Window without that being the case. --&gt;
+    set to the &lt;span&gt;script's global object&lt;/span&gt;.&lt;/p&gt; &lt;!-- invariant:
+    the global scope is always a Window if the script can see this
+    method --&gt;
 
    &lt;/li&gt;
 
@@ -52316,7 +52244,6 @@
     method was invoked. The &lt;span&gt;task source&lt;/span&gt; for this &lt;span
     title=&quot;concept-task&quot;&gt;task&lt;/span&gt; is the &lt;span&gt;posted message task
     source&lt;/span&gt;.&lt;/p&gt;
-    &lt;!-- XXX apply any body/window dispatch decisions here --&gt;
 
    &lt;/li&gt;
 
@@ -52633,8 +52560,10 @@
   &lt;span&gt;event loop&lt;/span&gt; must use it as one of its &lt;span title=&quot;task
   source&quot;&gt;task sources&lt;/span&gt;.&lt;/p&gt;
 
-  &lt;p class=&quot;note&quot;&gt;If the &lt;span&gt;script group&lt;/span&gt; of the port's event
-  handlers is &lt;i&gt;frozen&lt;/i&gt;, then the messages are lost.&lt;/p&gt;
+  &lt;p class=&quot;note&quot;&gt;If the &lt;code&gt;Document&lt;/code&gt; of the port's event
+  handlers' &lt;span title=&quot;script's global object&quot;&gt;global object&lt;/span&gt;
+  is not &lt;span&gt;fully active&lt;/span&gt;, then the messages are lost.&lt;/p&gt;
+  &lt;!-- because of the jump-to-entry-point algorithm first step --&gt;
 
   &lt;hr&gt;
 
@@ -60100,14 +60029,14 @@
    &lt;li&gt;If the &lt;code&gt;Document&lt;/code&gt; is in a &lt;span&gt;browsing
    context&lt;/span&gt;, then &lt;span&gt;queue a task&lt;/span&gt; to &lt;span title=&quot;fire
    a load event&quot;&gt;fire a &lt;code title=&quot;event-load&quot;&gt;load&lt;/code&gt;
-   event&lt;/span&gt; at the &lt;span&gt;browsing context&lt;/span&gt;'s
-   &lt;code&gt;Window&lt;/code&gt; object.&lt;/li&gt;
+   event&lt;/span&gt; at the &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt;
+   object.&lt;/li&gt;
 
    &lt;li&gt;If the &lt;code&gt;Document&lt;/code&gt; has a &lt;span&gt;pending state
    object&lt;/span&gt;, then &lt;span&gt;queue a task&lt;/span&gt; to fire a &lt;code
    title=&quot;event-popstate&quot;&gt;popstate&lt;/code&gt; event in no namespace on the
-   &lt;span&gt;browsing context&lt;/span&gt;'s &lt;code&gt;Window&lt;/code&gt; object using
-   the &lt;code&gt;PopStateEvent&lt;/code&gt; interface, with the &lt;code
+   &lt;code&gt;Document&lt;/code&gt;'s &lt;code&gt;Window&lt;/code&gt; object using the
+   &lt;code&gt;PopStateEvent&lt;/code&gt; interface, with the &lt;code
    title=&quot;dom-PopStateEvent-state&quot;&gt;state&lt;/code&gt; attribute set to the
    current value of the &lt;span&gt;pending state object&lt;/span&gt;. This event
    must bubble but not be cancelable and has no default action.&lt;/li&gt;
@@ -61502,8 +61431,9 @@
   title=&quot;dom-windowtimers-setTimeout&quot;&gt;setTimeout()&lt;/code&gt; and &lt;code
   title=&quot;dom-windowtimers-setInterval&quot;&gt;setInterval()&lt;/code&gt;, the clock
   upon which the timers are based must only tick while the
-  &lt;span&gt;script group&lt;/span&gt; of their callbacks is not
-  &lt;i&gt;frozen&lt;/i&gt;.&lt;/p&gt;
+  &lt;code&gt;Document&lt;/code&gt; of the &lt;span title=&quot;script's global
+  object&quot;&gt;global object&lt;/span&gt; of their callbacks is &lt;span&gt;fully
+  active&lt;/span&gt;.&lt;/p&gt;
 
 
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009610.html">[html5] r2726 - [e] (0) oops
</A></li>
	<LI>Next message: <A HREF="009612.html">[html5] r2728 - [e] (0) Tweak wording in table header algorithm.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9611">[ date ]</a>
              <a href="thread.html#9611">[ thread ]</a>
              <a href="subject.html#9611">[ subject ]</a>
              <a href="author.html#9611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
