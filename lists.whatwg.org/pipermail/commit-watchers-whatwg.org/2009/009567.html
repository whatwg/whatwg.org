<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r2683 - [giow] (2) Prevent cross-origin javascript:	navigation of browsing contexts. Def [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2683%20-%20%5Bgiow%5D%20%282%29%20Prevent%20cross-origin%20javascript%3A%0A%09navigation%20of%20browsing%20contexts.%20Def%20%5B...%5D&In-Reply-To=%3C20090121005811.69D9B141BB2%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009566.html">
   <LINK REL="Next"  HREF="009568.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r2683 - [giow] (2) Prevent cross-origin javascript:	navigation of browsing contexts. Def [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r2683%20-%20%5Bgiow%5D%20%282%29%20Prevent%20cross-origin%20javascript%3A%0A%09navigation%20of%20browsing%20contexts.%20Def%20%5B...%5D&In-Reply-To=%3C20090121005811.69D9B141BB2%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r2683 - [giow] (2) Prevent cross-origin javascript:	navigation of browsing contexts. Def [...]">whatwg at whatwg.org
       </A><BR>
    <I>Tue Jan 20 16:58:11 PST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009566.html">[html5] r2682 - [e] (0) mention boolean attributes can't be false
</A></li>
        <LI>Next message: <A HREF="009568.html">[html5] r2684 - [] (0) Bring the event handler attribute stuff in	line with reality. Make onerro [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9567">[ date ]</a>
              <a href="thread.html#9567">[ thread ]</a>
              <a href="subject.html#9567">[ subject ]</a>
              <a href="author.html#9567">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-01-20 16:58:10 -0800 (Tue, 20 Jan 2009)
New Revision: 2683

Modified:
   index
   source
Log:
[giow] (2) Prevent cross-origin javascript: navigation of browsing contexts. Define the base URL and document's address of pages generated by javascript: URLs. Minor editorial tweaks.

Modified: index
===================================================================
--- index	2009-01-21 00:15:00 UTC (rev 2682)
+++ index	2009-01-21 00:58:10 UTC (rev 2683)
@@ -34937,25 +34937,11 @@
       &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt; of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was
       raised, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead.&lt;/p&gt;
 
-     &lt;/dd&gt;
+      &lt;p&gt;When it comes time to &lt;a href=&quot;#set-the-document's-address&quot;&gt;set the document's address&lt;/a&gt;
+      in the &lt;a href=#navigate title=navigate&gt;navigation algorithm&lt;/a&gt;, use
+      the &lt;a href=&quot;#script's-base-url&quot;&gt;script's base URL&lt;/a&gt; as the &lt;a href=#override-url&gt;override
+      URL&lt;/a&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;If a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is being &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; to a &lt;code&gt;javascript:&lt;/code&gt;
-     URL, and the &lt;a href=#active-document&gt;active document&lt;/a&gt; of that browsing
-     context has an &lt;a href=#origin-0&gt;origin&lt;/a&gt; that is &lt;em&gt;not&lt;/em&gt; the &lt;a href=#same-origin title=&quot;same origin&quot;&gt;same&lt;/a&gt; as that of the script given by
-     the URL&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;&lt;a href=#create-an-impotent-script&gt;Create an impotent script&lt;/a&gt; using the
-      aforementioned script source, with the scripting language set to
-      JavaScript, and with the &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; being
-      &lt;a href=#navigate title=navigate&gt;navigated&lt;/a&gt; as the browsing
-      context.&lt;/p&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the
-      &lt;i&gt;&lt;a href=#initial-code-entry-point&gt;initial code entry-point&lt;/a&gt;&lt;/i&gt; of this &lt;a href=#concept-script title=concept-script&gt;script&lt;/a&gt;. If an exception was
-      raised, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead.&lt;/p&gt;
-
      &lt;/dd&gt;
 
      &lt;dt&gt;If the &lt;code&gt;Document&lt;/code&gt; object of the element,
@@ -38499,18 +38485,12 @@
     &lt;p&gt;If &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; is not marked as &lt;a href=#concept-appcache-foreign title=concept-appcache-foreign&gt;foreign&lt;/a&gt;, then the user
     agent must discard the failed load and instead continue along
     these steps using &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; as the
-    resource.&lt;/p&gt;
+    resource. &lt;a href=&quot;#the-document's-address&quot;&gt;The document's address&lt;/a&gt;, if appropriate,
+    will still be the originally requested URL, not the fallback URL,
+    but the user agent may indicate to the user that the original page
+    load failed, that the page used was a fallback resource, and what
+    the URL of the fallback resource actually is.&lt;/p&gt;
 
-    &lt;p&gt;For the purposes of session history (and features that depend
-    on session history, e.g. bookmarking) the user agent must use the
-    URL of the resource that was requested (the one that matched the
-    &lt;a href=#concept-appcache-fallback-ns title=concept-appcache-fallback-ns&gt;fallback
-    namespace&lt;/a&gt;), not the fallback resource, as the resource's
-    &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;. However, the
-    user agent may indicate to the user that the original page load
-    failed, that the page used was a fallback resource, and what the
-    URL of the fallback resource actually is.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the document's out-of-band metadata (e.g. HTTP headers),
@@ -38582,16 +38562,24 @@
      &lt;dd&gt;Follow the steps given in the &lt;a href=#read-plugin title=navigate-plugin&gt;plugin&lt;/a&gt; section, and abort these
      steps.&lt;/dd&gt;
 
-    &lt;/dl&gt;&lt;p&gt;Any &lt;code&gt;Document&lt;/code&gt; created by these steps must have its
-    &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; set to the
+    &lt;/dl&gt;&lt;p&gt;&lt;dfn id=&quot;set-the-document's-address&quot; title=&quot;set the document's address&quot;&gt;Setting the document's
+    address&lt;/dfn&gt;: If there is no &lt;dfn id=override-url&gt;override URL&lt;/dfn&gt;, then any
+    &lt;code&gt;Document&lt;/code&gt; created by these steps must have its &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; set to the
     &lt;a href=#url&gt;URL&lt;/a&gt; that was originally to be &lt;a href=#fetch title=fetch&gt;fetched&lt;/a&gt;, ignoring any other data that was
     used to obtain the resource (e.g. the entity body in the case of a
     POST submission is not part of &lt;a href=&quot;#the-document's-address&quot;&gt;the document's
     address&lt;/a&gt;, nor is the URL of the fallback resource in the
     case of the original load having failed and that URL having been
     found to match a &lt;a href=#concept-appcache-fallback-ns title=concept-appcache-fallback-ns&gt;fallback
-    namespace&lt;/a&gt;).&lt;/p&gt;
+    namespace&lt;/a&gt;). However, if there &lt;em&gt;is&lt;/em&gt; an &lt;a href=#override-url&gt;override
+    URL&lt;/a&gt;, then any &lt;code&gt;Document&lt;/code&gt; created by these steps
+    must have its &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt;
+    set to that &lt;a href=#url&gt;URL&lt;/a&gt; instead.&lt;/p&gt;
 
+    &lt;p class=note&gt;An &lt;a href=#override-url title=&quot;override URL&quot;&gt;override URL&lt;/a&gt;
+    is set when &lt;a href=#concept-js-deref title=concept-js-deref&gt;dereferencing a
+    &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/a&gt;.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li id=navigate-non-Document&gt;&lt;p&gt;&lt;i&gt;Non-document content&lt;/i&gt;: If,
@@ -56204,6 +56192,11 @@
        <A HREF="http://code.google.com/p/support/issues/detail?id=1#makechanges">http://code.google.com/p/support/issues/detail?id=1#makechanges</A>
  XXX * become more consistent about what markup we use to mark up
        productions (nothing? &lt;i&gt;? &lt;code&gt;?)
+ XXX * expose the value of a radio button group
+        - either on the NodeList returned by HTMLFormControlCollection
+        - or on the radio button itself
+        - or both, so it works even when the form controls have names
+          that vary more than HTMLFormControlCollection allows?
 --&gt;
 
  

Modified: source
===================================================================
--- source	2009-01-21 00:15:00 UTC (rev 2682)
+++ source	2009-01-21 00:58:10 UTC (rev 2683)
@@ -39723,28 +39723,11 @@
       title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was
       raised, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead.&lt;/p&gt;
 
-     &lt;/dd&gt;
+      &lt;p&gt;When it comes time to &lt;span&gt;set the document's address&lt;/span&gt;
+      in the &lt;span title=&quot;navigate&quot;&gt;navigation algorithm&lt;/span&gt;, use
+      the &lt;span&gt;script's base URL&lt;/span&gt; as the &lt;span&gt;override
+      URL&lt;/span&gt;.&lt;/p&gt;
 
-     &lt;dt&gt;If a &lt;span&gt;browsing context&lt;/span&gt; is being &lt;span
-     title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; to a &lt;code&gt;javascript:&lt;/code&gt;
-     URL, and the &lt;span&gt;active document&lt;/span&gt; of that browsing
-     context has an &lt;span&gt;origin&lt;/span&gt; that is &lt;em&gt;not&lt;/em&gt; the &lt;span
-     title=&quot;same origin&quot;&gt;same&lt;/span&gt; as that of the script given by
-     the URL&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;&lt;span&gt;Create an impotent script&lt;/span&gt; using the
-      aforementioned script source, with the scripting language set to
-      JavaScript, and with the &lt;span&gt;browsing context&lt;/span&gt; being
-      &lt;span title=&quot;navigate&quot;&gt;navigated&lt;/span&gt; as the browsing
-      context.&lt;/p&gt;
-
-      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the return value of the
-      &lt;i&gt;initial code entry-point&lt;/i&gt; of this &lt;span
-      title=&quot;concept-script&quot;&gt;script&lt;/span&gt;. If an exception was
-      raised, let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be void instead.&lt;/p&gt;
-
      &lt;/dd&gt;
 
      &lt;dt&gt;If the &lt;code&gt;Document&lt;/code&gt; object of the element,
@@ -43838,18 +43821,12 @@
     title=&quot;concept-appcache-foreign&quot;&gt;foreign&lt;/span&gt;, then the user
     agent must discard the failed load and instead continue along
     these steps using &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; as the
-    resource.&lt;/p&gt;
+    resource. &lt;span&gt;The document's address&lt;/span&gt;, if appropriate,
+    will still be the originally requested URL, not the fallback URL,
+    but the user agent may indicate to the user that the original page
+    load failed, that the page used was a fallback resource, and what
+    the URL of the fallback resource actually is.&lt;/p&gt;
 
-    &lt;p&gt;For the purposes of session history (and features that depend
-    on session history, e.g. bookmarking) the user agent must use the
-    URL of the resource that was requested (the one that matched the
-    &lt;span title=&quot;concept-appcache-fallback-ns&quot;&gt;fallback
-    namespace&lt;/span&gt;), not the fallback resource, as the resource's
-    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;. However, the
-    user agent may indicate to the user that the original page load
-    failed, that the page used was a fallback resource, and what the
-    URL of the fallback resource actually is.&lt;/p&gt;
-
    &lt;/li&gt;
 
    &lt;li&gt;&lt;p&gt;If the document's out-of-band metadata (e.g. HTTP headers),
@@ -43931,8 +43908,10 @@
 
     &lt;/dl&gt;
 
-    &lt;p&gt;Any &lt;code&gt;Document&lt;/code&gt; created by these steps must have its
-    &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt; set to the
+    &lt;p&gt;&lt;dfn title=&quot;set the document's address&quot;&gt;Setting the document's
+    address&lt;/dfn&gt;: If there is no &lt;dfn&gt;override URL&lt;/dfn&gt;, then any
+    &lt;code&gt;Document&lt;/code&gt; created by these steps must have its &lt;span
+    title=&quot;the document's address&quot;&gt;address&lt;/span&gt; set to the
     &lt;span&gt;URL&lt;/span&gt; that was originally to be &lt;span
     title=&quot;fetch&quot;&gt;fetched&lt;/span&gt;, ignoring any other data that was
     used to obtain the resource (e.g. the entity body in the case of a
@@ -43941,8 +43920,15 @@
     case of the original load having failed and that URL having been
     found to match a &lt;span
     title=&quot;concept-appcache-fallback-ns&quot;&gt;fallback
-    namespace&lt;/span&gt;).&lt;/p&gt;
+    namespace&lt;/span&gt;). However, if there &lt;em&gt;is&lt;/em&gt; an &lt;span&gt;override
+    URL&lt;/span&gt;, then any &lt;code&gt;Document&lt;/code&gt; created by these steps
+    must have its &lt;span title=&quot;the document's address&quot;&gt;address&lt;/span&gt;
+    set to that &lt;span&gt;URL&lt;/span&gt; instead.&lt;/p&gt;
 
+    &lt;p class=&quot;note&quot;&gt;An &lt;span title=&quot;override URL&quot;&gt;override URL&lt;/span&gt;
+    is set when &lt;span title=&quot;concept-js-deref&quot;&gt;dereferencing a
+    &lt;code&gt;javascript:&lt;/code&gt; URL&lt;/span&gt;.&lt;/p&gt;
+
    &lt;/li&gt;
 
    &lt;li id=&quot;navigate-non-Document&quot;&gt;&lt;p&gt;&lt;i&gt;Non-document content&lt;/i&gt;: If,
@@ -61469,6 +61455,11 @@
        <A HREF="http://code.google.com/p/support/issues/detail?id=1#makechanges">http://code.google.com/p/support/issues/detail?id=1#makechanges</A>
  XXX * become more consistent about what markup we use to mark up
        productions (nothing? &lt;i&gt;? &lt;code&gt;?)
+ XXX * expose the value of a radio button group
+        - either on the NodeList returned by HTMLFormControlCollection
+        - or on the radio button itself
+        - or both, so it works even when the form controls have names
+          that vary more than HTMLFormControlCollection allows?
 --&gt;
 
  &lt;/body&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009566.html">[html5] r2682 - [e] (0) mention boolean attributes can't be false
</A></li>
	<LI>Next message: <A HREF="009568.html">[html5] r2684 - [] (0) Bring the event handler attribute stuff in	line with reality. Make onerro [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9567">[ date ]</a>
              <a href="thread.html#9567">[ thread ]</a>
              <a href="subject.html#9567">[ subject ]</a>
              <a href="author.html#9567">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
