<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r4310 - [e] (0) Rewrite this algorithm to make Philip`	happier (and be more consistent w [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4310%20-%20%5Be%5D%20%280%29%20Rewrite%20this%20algorithm%20to%20make%20Philip%60%0A%09happier%20%28and%20be%20more%20consistent%20w%20%5B...%5D&In-Reply-To=%3C20091024113412.6C4CC38DE1B%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="011179.html">
   <LINK REL="Next"  HREF="011181.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r4310 - [e] (0) Rewrite this algorithm to make Philip`	happier (and be more consistent w [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r4310%20-%20%5Be%5D%20%280%29%20Rewrite%20this%20algorithm%20to%20make%20Philip%60%0A%09happier%20%28and%20be%20more%20consistent%20w%20%5B...%5D&In-Reply-To=%3C20091024113412.6C4CC38DE1B%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r4310 - [e] (0) Rewrite this algorithm to make Philip`	happier (and be more consistent w [...]">whatwg at whatwg.org
       </A><BR>
    <I>Sat Oct 24 04:34:12 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="011179.html">[html5] r4309 - [ct] (0) Handle &lt;title&gt;&amp;acute;	&lt;div&gt;&lt;/title&gt; property. Fixing http://www.w3.org/B [...]
</A></li>
        <LI>Next message: <A HREF="011181.html">[html5] r4311 - [ct] (2) Make &lt;!DOCTYPE html PUBLICa&gt; one parse	error, not two. Fixing http://ww [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11180">[ date ]</a>
              <a href="thread.html#11180">[ thread ]</a>
              <a href="subject.html#11180">[ subject ]</a>
              <a href="author.html#11180">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-10-24 04:34:07 -0700 (Sat, 24 Oct 2009)
New Revision: 4310

Modified:
   complete.html
   index
   source
Log:
[e] (0) Rewrite this algorithm to make Philip` happier (and be more consistent with the other algorithms.)
Fixing <A HREF="http://www.w3.org/Bugs/Public/show_bug.cgi?id=8015">http://www.w3.org/Bugs/Public/show_bug.cgi?id=8015</A>

Modified: complete.html
===================================================================
--- complete.html	2009-10-24 11:14:10 UTC (rev 4309)
+++ complete.html	2009-10-24 11:34:07 UTC (rev 4310)
@@ -3072,60 +3072,52 @@
   &lt;p&gt;The &lt;dfn id=steps-for-finding-one-or-two-numbers-of-a-ratio-in-a-string&gt;steps for finding one or two numbers of a ratio in a
   string&lt;/dfn&gt; are as follows:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;If the string is empty, then return nothing and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
+   parsed.&lt;/li&gt;
 
-   &lt;li&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string according to the
-   algorithm below, starting at the start of the string.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
+   string.&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 2 returned nothing or returned an
-   error condition, return nothing and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string according to the
+   algorithm below. If this returns a number, let &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; be that number. Otherwise, if it returned
+   nothing or returned an error condition, return nothing and abort
+   these steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 2, skip all
-   &lt;a href=#white_space&gt;White_Space&lt;/a&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#skip-white_space-characters&gt;Skip White_Space characters&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator
-   punctuation character&lt;/a&gt;, set &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt;
-   to that character.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator punctuation character&lt;/a&gt;,
+   let &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; be that character. Otherwise,
+   &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has no value.&lt;/li&gt;
 
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), but &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value in the step 6, return
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), but &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has a value, return
    nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value
-   in step 6, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has value,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string again, starting
-   immediately after the last character that was collected by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string again. If this
+   returns a number, let &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; be that
+   number. Otherwise, if it returned nothing or an error condition,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 9 returned nothing or an error
-   condition, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#skip-white_space-characters&gt;Skip White_Space characters&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 9.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator punctuation character&lt;/a&gt;,
+   return nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 9, skip all
-   &lt;a href=#white_space&gt;White_Space&lt;/a&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), return nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator
-   punctuation character&lt;/a&gt;, return nothing and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), return nothing and abort
-   these steps.&lt;/li&gt;
-
    &lt;li&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and
    &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt;.&lt;/li&gt;
 
@@ -3133,27 +3125,25 @@
   given a string and a starting position, and returns either nothing,
   a number, or an error condition.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;Starting at the given starting position, ignore all characters
-   in the given string until the first character that is either a
-   U+002E FULL STOP or one of the ten characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are not
+   U+002E FULL STOP characters (.) and are not characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
 
-   &lt;li&gt;If there are no such characters, return nothing and abort these
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
    steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character matched in step 1, collect all the
-   consecutive characters that are either a U+002E FULL STOP or one of
-   the ten characters in the range U+0030 DIGIT ZERO (0) to U+0039
-   DIGIT NINE (9), and assign this string of one or more characters to
-   &lt;var title=&quot;&quot;&gt;string&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+   either U+002E FULL STOP characters (.) or characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9), and let that be
+   &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;If the first character or the last character of &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; is a U+002E FULL STOP character, or if &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; contains more than one U+002E FULL STOP
-   character, then return an error condition and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the first character or the last character of &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; is a U+002E FULL STOP character (.), or if &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; contains more than one U+002E FULL STOP character
+   (.), then return an error condition and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Parse &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; according to the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules
-   for parsing floating point number values&lt;/a&gt;, to obtain &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var title=&quot;&quot;&gt;string&lt;/var&gt; is guaranteed to be a &lt;a href=#valid-floating-point-number&gt;valid floating
-   point number&lt;/a&gt;).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; according to the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules for
+   parsing floating point number values&lt;/a&gt;, to obtain &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+   is guaranteed to be a &lt;a href=#valid-floating-point-number&gt;valid floating point
+   number&lt;/a&gt;).&lt;/li&gt;
 
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
 

Modified: index
===================================================================
--- index	2009-10-24 11:14:10 UTC (rev 4309)
+++ index	2009-10-24 11:34:07 UTC (rev 4310)
@@ -2882,60 +2882,52 @@
   &lt;p&gt;The &lt;dfn id=steps-for-finding-one-or-two-numbers-of-a-ratio-in-a-string&gt;steps for finding one or two numbers of a ratio in a
   string&lt;/dfn&gt; are as follows:&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;If the string is empty, then return nothing and abort these
-   steps.&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
+   parsed.&lt;/li&gt;
 
-   &lt;li&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string according to the
-   algorithm below, starting at the start of the string.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
+   string.&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 2 returned nothing or returned an
-   error condition, return nothing and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string according to the
+   algorithm below. If this returns a number, let &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; be that number. Otherwise, if it returned
+   nothing or returned an error condition, return nothing and abort
+   these steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 2, skip all
-   &lt;a href=#white_space&gt;White_Space&lt;/a&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#skip-white_space-characters&gt;Skip White_Space characters&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator
-   punctuation character&lt;/a&gt;, set &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt;
-   to that character.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator punctuation character&lt;/a&gt;,
+   let &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; be that character. Otherwise,
+   &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has no value.&lt;/li&gt;
 
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), but &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value in the step 6, return
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), but &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has a value, return
    nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value
-   in step 6, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has value,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string again, starting
-   immediately after the last character that was collected by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#find-a-number&gt;Find a number&lt;/a&gt; in the string again. If this
+   returns a number, let &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; be that
+   number. Otherwise, if it returned nothing or an error condition,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 9 returned nothing or an error
-   condition, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#skip-white_space-characters&gt;Skip White_Space characters&lt;/a&gt;.&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 9.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator punctuation character&lt;/a&gt;,
+   return nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 9, skip all
-   &lt;a href=#white_space&gt;White_Space&lt;/a&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), return nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;a href=#valid-denominator-punctuation-character&gt;valid denominator
-   punctuation character&lt;/a&gt;, return nothing and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), return nothing and abort
-   these steps.&lt;/li&gt;
-
    &lt;li&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and
    &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt;.&lt;/li&gt;
 
@@ -2943,27 +2935,25 @@
   given a string and a starting position, and returns either nothing,
   a number, or an error condition.&lt;/p&gt;
 
-  &lt;ol&gt;&lt;li&gt;Starting at the given starting position, ignore all characters
-   in the given string until the first character that is either a
-   U+002E FULL STOP or one of the ten characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are not
+   U+002E FULL STOP characters (.) and are not characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
 
-   &lt;li&gt;If there are no such characters, return nothing and abort these
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
    steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character matched in step 1, collect all the
-   consecutive characters that are either a U+002E FULL STOP or one of
-   the ten characters in the range U+0030 DIGIT ZERO (0) to U+0039
-   DIGIT NINE (9), and assign this string of one or more characters to
-   &lt;var title=&quot;&quot;&gt;string&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;a href=#collect-a-sequence-of-characters&gt;Collect a sequence of characters&lt;/a&gt; that are
+   either U+002E FULL STOP characters (.) or characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9), and let that be
+   &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.&lt;/li&gt;
 
-   &lt;li&gt;If the first character or the last character of &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; is a U+002E FULL STOP character, or if &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; contains more than one U+002E FULL STOP
-   character, then return an error condition and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the first character or the last character of &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; is a U+002E FULL STOP character (.), or if &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; contains more than one U+002E FULL STOP character
+   (.), then return an error condition and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Parse &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; according to the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules
-   for parsing floating point number values&lt;/a&gt;, to obtain &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var title=&quot;&quot;&gt;string&lt;/var&gt; is guaranteed to be a &lt;a href=#valid-floating-point-number&gt;valid floating
-   point number&lt;/a&gt;).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; according to the &lt;a href=#rules-for-parsing-floating-point-number-values&gt;rules for
+   parsing floating point number values&lt;/a&gt;, to obtain &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+   is guaranteed to be a &lt;a href=#valid-floating-point-number&gt;valid floating point
+   number&lt;/a&gt;).&lt;/li&gt;
 
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
 

Modified: source
===================================================================
--- source	2009-10-24 11:14:10 UTC (rev 4309)
+++ source	2009-10-24 11:34:07 UTC (rev 4310)
@@ -2051,62 +2051,56 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;If the string is empty, then return nothing and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; be the string being
+   parsed.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;span&gt;Find a number&lt;/span&gt; in the string according to the
-   algorithm below, starting at the start of the string.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; be a pointer into &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt;, initially pointing at the start of the
+   string.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 2 returned nothing or returned an
-   error condition, return nothing and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Find a number&lt;/span&gt; in the string according to the
+   algorithm below. If this returns a number, let &lt;var
+   title=&quot;&quot;&gt;number1&lt;/var&gt; be that number. Otherwise, if it returned
+   nothing or returned an error condition, return nothing and abort
+   these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 2, skip all
-   &lt;span&gt;White_Space&lt;/span&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip White_Space characters&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;span&gt;valid denominator
-   punctuation character&lt;/span&gt;, set &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt;
-   to that character.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;span&gt;valid denominator punctuation character&lt;/span&gt;,
+   let &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; be that character. Otherwise,
+   &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has no value.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), but &lt;var
-   title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value in the step 6, return
-   nothing and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), but &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has a value, return
+   nothing and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; was given a value
-   in step 6, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var
-   title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;denominator&lt;/var&gt; has value,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and &lt;var
+   title=&quot;&quot;&gt;denominator&lt;/var&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;&lt;span&gt;Find a number&lt;/span&gt; in the string again, starting
-   immediately after the last character that was collected by the
-   sub-algorithm in step 2.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Find a number&lt;/span&gt; in the string again. If this
+   returns a number, let &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; be that
+   number. Otherwise, if it returned nothing or an error condition,
+   return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If the sub-algorithm in step 9 returned nothing or an error
-   condition, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Skip White_Space characters&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Set &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt; to the number returned by the
-   sub-algorithm in step 9.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt;
+   (if any) is a &lt;span&gt;valid denominator punctuation character&lt;/span&gt;,
+   return nothing and abort these steps.&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character immediately after the last one
-   collected by the sub-algorithm in step 9, skip all
-   &lt;span&gt;White_Space&lt;/span&gt; characters in the string (this might match
-   zero characters).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If there are any characters in the range U+0030 DIGIT ZERO
+   (0) to U+0039 DIGIT NINE (9) in &lt;var title=&quot;&quot;&gt;input&lt;/var&gt; at or
+   after the character indicated by &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; (if
+   any), return nothing and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If there are still further characters in the string, and the
-   next character in the string is a &lt;span&gt;valid denominator
-   punctuation character&lt;/span&gt;, return nothing and abort these
-   steps.&lt;/li&gt;
-
-   &lt;li&gt;If the string contains any other characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9), return nothing and abort
-   these steps.&lt;/li&gt;
-
    &lt;li&gt;Otherwise, return &lt;var title=&quot;&quot;&gt;number1&lt;/var&gt; and
    &lt;var title=&quot;&quot;&gt;number2&lt;/var&gt;.&lt;/li&gt;
 
@@ -2118,31 +2112,29 @@
 
   &lt;ol&gt;
 
-   &lt;li&gt;Starting at the given starting position, ignore all characters
-   in the given string until the first character that is either a
-   U+002E FULL STOP or one of the ten characters in the range U+0030
-   DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are not
+   U+002E FULL STOP characters (.) and are not characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9).&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If there are no such characters, return nothing and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;position&lt;/var&gt; is past the end of &lt;var
+   title=&quot;&quot;&gt;input&lt;/var&gt;, then return nothing and abort these
+   steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Starting with the character matched in step 1, collect all the
-   consecutive characters that are either a U+002E FULL STOP or one of
-   the ten characters in the range U+0030 DIGIT ZERO (0) to U+0039
-   DIGIT NINE (9), and assign this string of one or more characters to
-   &lt;var title=&quot;&quot;&gt;string&lt;/var&gt;.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;&lt;span&gt;Collect a sequence of characters&lt;/span&gt; that are
+   either U+002E FULL STOP characters (.) or characters in the range
+   U+0030 DIGIT ZERO (0) to U+0039 DIGIT NINE (9), and let that be
+   &lt;var title=&quot;&quot;&gt;s&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;If the first character or the last character of &lt;var
-   title=&quot;&quot;&gt;string&lt;/var&gt; is a U+002E FULL STOP character, or if &lt;var
-   title=&quot;&quot;&gt;string&lt;/var&gt; contains more than one U+002E FULL STOP
-   character, then return an error condition and abort these
-   steps.&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;If the first character or the last character of &lt;var
+   title=&quot;&quot;&gt;s&lt;/var&gt; is a U+002E FULL STOP character (.), or if &lt;var
+   title=&quot;&quot;&gt;s&lt;/var&gt; contains more than one U+002E FULL STOP character
+   (.), then return an error condition and abort these steps.&lt;/p&gt;&lt;/li&gt;
 
-   &lt;li&gt;Parse &lt;var title=&quot;&quot;&gt;string&lt;/var&gt; according to the &lt;span&gt;rules
-   for parsing floating point number values&lt;/span&gt;, to obtain &lt;var
-   title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var
-   title=&quot;&quot;&gt;string&lt;/var&gt; is guaranteed to be a &lt;span&gt;valid floating
-   point number&lt;/span&gt;).&lt;/li&gt;
+   &lt;li&gt;&lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;s&lt;/var&gt; according to the &lt;span&gt;rules for
+   parsing floating point number values&lt;/span&gt;, to obtain &lt;var
+   title=&quot;&quot;&gt;number&lt;/var&gt;. This step cannot fail (&lt;var title=&quot;&quot;&gt;s&lt;/var&gt;
+   is guaranteed to be a &lt;span&gt;valid floating point
+   number&lt;/span&gt;).&lt;/p&gt;&lt;/li&gt;
 
    &lt;li&gt;Return &lt;var title=&quot;&quot;&gt;number&lt;/var&gt;.&lt;/li&gt;
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="011179.html">[html5] r4309 - [ct] (0) Handle &lt;title&gt;&amp;acute;	&lt;div&gt;&lt;/title&gt; property. Fixing http://www.w3.org/B [...]
</A></li>
	<LI>Next message: <A HREF="011181.html">[html5] r4311 - [ct] (2) Make &lt;!DOCTYPE html PUBLICa&gt; one parse	error, not two. Fixing http://ww [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#11180">[ date ]</a>
              <a href="thread.html#11180">[ thread ]</a>
              <a href="subject.html#11180">[ subject ]</a>
              <a href="author.html#11180">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
