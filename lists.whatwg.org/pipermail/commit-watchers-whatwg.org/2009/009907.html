<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3026 - [] (0) Mention that tasks from discarded documents	are also discarded. Change so [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3026%20-%20%5B%5D%20%280%29%20Mention%20that%20tasks%20from%20discarded%20documents%0A%09are%20also%20discarded.%20Change%20so%20%5B...%5D&In-Reply-To=%3C20090429082924.B6B541389C1%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009906.html">
   <LINK REL="Next"  HREF="009908.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3026 - [] (0) Mention that tasks from discarded documents	are also discarded. Change so [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3026%20-%20%5B%5D%20%280%29%20Mention%20that%20tasks%20from%20discarded%20documents%0A%09are%20also%20discarded.%20Change%20so%20%5B...%5D&In-Reply-To=%3C20090429082924.B6B541389C1%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3026 - [] (0) Mention that tasks from discarded documents	are also discarded. Change so [...]">whatwg at whatwg.org
       </A><BR>
    <I>Wed Apr 29 01:29:24 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009906.html">[html5] r3025 - [] (0) Define the task sources used for WebStorage;	define that 'storage' events [...]
</A></li>
        <LI>Next message: <A HREF="009908.html">[html5] r3027 - [gow] (2) Make how &lt;video&gt; loads resources a bit	more stable -- setting src='' o [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9907">[ date ]</a>
              <a href="thread.html#9907">[ thread ]</a>
              <a href="subject.html#9907">[ subject ]</a>
              <a href="author.html#9907">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-04-29 01:29:23 -0700 (Wed, 29 Apr 2009)
New Revision: 3026

Modified:
   index
   source
Log:
[] (0) Mention that tasks from discarded documents are also discarded. Change some prose to mention origins and sites instead of domains. Fire 'storage' on inactive documents as well so they all get notified.

Modified: index
===================================================================
--- index	2009-04-29 08:02:39 UTC (rev 3025)
+++ index	2009-04-29 08:29:23 UTC (rev 3026)
@@ -40865,7 +40865,9 @@
   &lt;p&gt;When a &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; is to &lt;dfn id=discard-a-document&gt;discard a
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, that means that it is to lose the
   strong reference from the &lt;code&gt;Document&lt;/code&gt;'s &lt;a href=#browsing-context&gt;browsing
-  context&lt;/a&gt; to the &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  context&lt;/a&gt; to the &lt;code&gt;Document&lt;/code&gt;, and that any &lt;a href=#concept-task title=concept-task&gt;tasks&lt;/a&gt; associated with the
+  &lt;code&gt;Document&lt;/code&gt; in any &lt;a href=#task-source&gt;task source&lt;/a&gt; must be
+  removed without being run.&lt;/p&gt;
 
   &lt;p class=note&gt;The &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt;'s &lt;a href=#default-view&gt;default
   view&lt;/a&gt;'s &lt;code&gt;&lt;a href=#window&gt;Window&lt;/a&gt;&lt;/code&gt; object &lt;a href=#implied-strong-reference title=&quot;implied strong

Modified: source
===================================================================
--- source	2009-04-29 08:02:39 UTC (rev 3025)
+++ source	2009-04-29 08:29:23 UTC (rev 3026)
@@ -46155,7 +46155,10 @@
   &lt;p&gt;When a &lt;span&gt;browsing context&lt;/span&gt; is to &lt;dfn&gt;discard a
   &lt;code&gt;Document&lt;/code&gt;&lt;/dfn&gt;, that means that it is to lose the
   strong reference from the &lt;code&gt;Document&lt;/code&gt;'s &lt;span&gt;browsing
-  context&lt;/span&gt; to the &lt;code&gt;Document&lt;/code&gt;.&lt;/p&gt;
+  context&lt;/span&gt; to the &lt;code&gt;Document&lt;/code&gt;, and that any &lt;span
+  title=&quot;concept-task&quot;&gt;tasks&lt;/span&gt; associated with the
+  &lt;code&gt;Document&lt;/code&gt; in any &lt;span&gt;task source&lt;/span&gt; must be
+  removed without being run.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;The &lt;span&gt;browsing context&lt;/span&gt;'s &lt;span&gt;default
   view&lt;/span&gt;'s &lt;code&gt;Window&lt;/code&gt; object &lt;span title=&quot;implied strong
@@ -52867,7 +52870,7 @@
 
   &lt;p&gt;If it couldn't set the new value, the method must raise an
   &lt;code&gt;QUOTA_EXCEEDED_ERR&lt;/code&gt; exception. (Setting could fail if,
-  e.g., the user has disabled storage for the domain, or if the quota
+  e.g., the user has disabled storage for the site, or if the quota
   has been exceeded.)&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-Storage-removeItem&quot;&gt;&lt;code&gt;removeItem(&lt;var
@@ -53039,10 +53042,14 @@
   to fire an event with the name &lt;code&gt;storage&lt;/code&gt;, with no
   namespace, which does not bubble and is not cancelable, and which
   uses the &lt;code&gt;StorageEvent&lt;/code&gt; interface, at each
-  &lt;code&gt;Window&lt;/code&gt; object whose &lt;code&gt;Document&lt;/code&gt; object both
-  has a &lt;code&gt;Storage&lt;/code&gt; object that is affected, and is
-  &lt;span&gt;fully active&lt;/span&gt;.&lt;/p&gt;
+  &lt;code&gt;Window&lt;/code&gt; object whose &lt;code&gt;Document&lt;/code&gt; object has a
+  &lt;code&gt;Storage&lt;/code&gt; object that is affected.&lt;/p&gt;
 
+  &lt;p class=&quot;note&quot;&gt;This includes &lt;code&gt;Document&lt;/code&gt; objects that are
+  not &lt;span&gt;fully active&lt;/span&gt;, but events fired on those are ignored
+  by the &lt;span&gt;event loop&lt;/span&gt; until the &lt;code&gt;Document&lt;/code&gt;
+  becomes &lt;span&gt;fully active&lt;/span&gt; again.&lt;/p&gt;
+
   &lt;p&gt;The &lt;span&gt;task source&lt;/span&gt; for this task is the &lt;span&gt;DOM
   manipulation task source&lt;/span&gt;.&lt;/p&gt;
 
@@ -53175,7 +53182,7 @@
 
   &lt;p&gt;Each &lt;i&gt;origin&lt;/i&gt; has an associated set of databases. Each
   database has a name and a current version. There is no way to
-  enumerate or delete the databases available for a domain from this
+  enumerate or delete the databases available for an origin from this
   API.&lt;/p&gt;
 
   &lt;p class=&quot;note&quot;&gt;Each database has one version at a time; a database
@@ -54030,9 +54037,9 @@
   storage areas and databases.&lt;/p&gt;
 
   &lt;p&gt;User agents should guard against sites storing data in the
-  storage areas or databases of subdomains, e.g. storing up to the
-  limit in a1.example.com, a2.example.com, a3.example.com, etc,
-  circumventing the main example.com storage limit.&lt;/p&gt;
+  storage areas or databases of other affiliated sites, e.g. storing
+  up to the limit in a1.example.com, a2.example.com, a3.example.com,
+  etc, circumventing the main example.com storage limit.&lt;/p&gt;
 
   &lt;p&gt;User agents may prompt the user when quotas are reached, allowing
   the user to grant a site more space. This enables sites to store
@@ -54046,9 +54053,9 @@
   title=&quot;dom-Storage-setItem&quot;&gt;setItem()&lt;/code&gt; call, the method will
   raise an exception.&lt;/p&gt;--&gt;
 
-  &lt;p&gt;A mostly arbitrary limit of five megabytes per domain is
-  recommended. Implementation feedback is welcome and will be used to
-  update this suggestion in future.&lt;/p&gt;
+  &lt;p&gt;A mostly arbitrary limit of five megabytes per
+  &lt;span&gt;origin&lt;/span&gt; is recommended. Implementation feedback is
+  welcome and will be used to update this suggestion in future.&lt;/p&gt;
 
 
   &lt;h4&gt;Privacy&lt;/h4&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009906.html">[html5] r3025 - [] (0) Define the task sources used for WebStorage;	define that 'storage' events [...]
</A></li>
	<LI>Next message: <A HREF="009908.html">[html5] r3027 - [gow] (2) Make how &lt;video&gt; loads resources a bit	more stable -- setting src='' o [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9907">[ date ]</a>
              <a href="thread.html#9907">[ thread ]</a>
              <a href="subject.html#9907">[ subject ]</a>
              <a href="author.html#9907">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
