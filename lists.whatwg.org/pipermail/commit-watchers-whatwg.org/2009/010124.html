<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3245 - [e] (0) Strip the URLs section out now that DanC is	editing the Web Addresses draft.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3245%20-%20%5Be%5D%20%280%29%20Strip%20the%20URLs%20section%20out%20now%20that%20DanC%20is%0A%09editing%20the%20Web%20Addresses%20draft.&In-Reply-To=%3C20090614002105.B61EC1389F2%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010123.html">
   <LINK REL="Next"  HREF="010125.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3245 - [e] (0) Strip the URLs section out now that DanC is	editing the Web Addresses draft.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3245%20-%20%5Be%5D%20%280%29%20Strip%20the%20URLs%20section%20out%20now%20that%20DanC%20is%0A%09editing%20the%20Web%20Addresses%20draft.&In-Reply-To=%3C20090614002105.B61EC1389F2%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3245 - [e] (0) Strip the URLs section out now that DanC is	editing the Web Addresses draft.">whatwg at whatwg.org
       </A><BR>
    <I>Sat Jun 13 17:21:05 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010123.html">[html5] r3244 - [e] (0) editorial cleanup
</A></li>
        <LI>Next message: <A HREF="010125.html">[html5] r3246 - [e] (0) editorial cleanup and reference collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10124">[ date ]</a>
              <a href="thread.html#10124">[ thread ]</a>
              <a href="subject.html#10124">[ subject ]</a>
              <a href="author.html#10124">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-06-13 17:21:04 -0700 (Sat, 13 Jun 2009)
New Revision: 3245

Modified:
   index
   source
Log:
[e] (0) Strip the URLs section out now that DanC is editing the Web Addresses draft.

Modified: index
===================================================================
--- index	2009-06-13 23:51:32 UTC (rev 3244)
+++ index	2009-06-14 00:21:04 UTC (rev 3245)
@@ -39,7 +39,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-standard-&mdash;-date:-01-jan-1901&gt;Draft Standard &mdash; 13 June 2009&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-standard-&mdash;-date:-01-jan-1901&gt;Draft Standard &mdash; 14 June 2009&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -261,10 +261,8 @@
    &lt;li&gt;&lt;a href=#urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#parsing-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Parsing URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#resolving-urls&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Resolving URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#fetching-resources&gt;&lt;span class=secno&gt;2.6 &lt;/span&gt;Fetching resources&lt;/a&gt;
     &lt;ol&gt;
      &lt;li&gt;&lt;a href=#concept-http-equivalent&gt;&lt;span class=secno&gt;2.6.1 &lt;/span&gt;Protocol concepts&lt;/a&gt;&lt;/li&gt;
@@ -4381,387 +4379,59 @@
 
   &lt;h3 id=urls&gt;&lt;span class=secno&gt;2.5 &lt;/span&gt;URLs&lt;/h3&gt;
 
-  &lt;p&gt;This specification defines the term &lt;a href=#url&gt;URL&lt;/a&gt;, and defines
-  various algorithms for dealing with URLs, because for historical
-  reasons the rules defined by the URI and IRI specifications are not
-  a complete description of what HTML user agents need to implement to
-  be compatible with Web content.&lt;/p&gt;
-
-
   &lt;h4 id=terminology-0&gt;&lt;span class=secno&gt;2.5.1 &lt;/span&gt;Terminology&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn id=url&gt;URL&lt;/dfn&gt; is a string used to identify a resource.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt; is a &lt;dfn id=valid-url&gt;valid URL&lt;/dfn&gt; if at least one of
-  the following conditions holds:&lt;/p&gt;
+  &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt; is a &lt;dfn id=valid-url&gt;valid URL&lt;/dfn&gt; if it is a
+  &lt;span&gt;valid Web address&lt;/span&gt; as defined by the Web addresses
+  specification. &lt;a href=#refsWEBADDRESSES&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;ul&gt;&lt;li&gt;&lt;p&gt;The &lt;a href=#url&gt;URL&lt;/a&gt; is a valid URI reference &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;.&lt;/li&gt;
+  &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt; is an &lt;dfn id=absolute-url&gt;absolute URL&lt;/dfn&gt; if it is an
+  &lt;span&gt;absolute Web address&lt;/span&gt; as defined by the Web addresses
+  specification. &lt;a href=#refsWEBADDRESSES&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;a href=#url&gt;URL&lt;/a&gt; is a valid IRI reference and it has no
-   query component. &lt;a href=#refsRFC3987&gt;[RFC3987]&lt;/a&gt;&lt;/li&gt;
+  &lt;div class=impl&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;a href=#url&gt;URL&lt;/a&gt; is a valid IRI reference and its query
-   component contains no unescaped non-ASCII characters. &lt;a href=#refsRFC3987&gt;[RFC3987]&lt;/a&gt;&lt;/li&gt;
+  &lt;p&gt;To &lt;dfn id=parse-a-url&gt;parse a URL&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its
+  component parts, the user agent must use the &lt;span&gt;parse a Web
+  address&lt;/span&gt; algorithm defined by the Web addresses
+  specification. &lt;a href=#refsWEBADDRESSES&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;a href=#url&gt;URL&lt;/a&gt; is a valid IRI reference and the &lt;a href=&quot;#document's-character-encoding&quot; title=&quot;document's character encoding&quot;&gt;character encoding&lt;/a&gt; of
-   the URL's &lt;code&gt;Document&lt;/code&gt; is UTF-8 or UTF-16. &lt;a href=#refsRFC3987&gt;[RFC3987]&lt;/a&gt;&lt;/li&gt;
+  &lt;p&gt;Parsing a URL results in the following components, again as
+  defined by the Web addresses specification:&lt;/p&gt;
 
-  &lt;/ul&gt;&lt;div class=impl&gt;
+  &lt;ul class=brief&gt;&lt;li&gt;&lt;dfn id=url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-host title=url-host&gt;&lt;host&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-port title=url-port&gt;&lt;port&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-hostport title=url-hostport&gt;&lt;hostport&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-path title=url-path&gt;&lt;path&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-query title=url-query&gt;&lt;query&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn id=url-host-specific title=url-host-specific&gt;&lt;host-specific&gt;&lt;/dfn&gt;&lt;/li&gt;
+  &lt;/ul&gt;&lt;p&gt;To &lt;dfn id=resolve-a-url&gt;resolve a URL&lt;/dfn&gt; to an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
+  relative to either another &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; or an element,
+  the user agent must use the &lt;span&gt;resolve a Web address&lt;/span&gt;
+  algorithm defined by the Web addresses specification. &lt;a href=#refsWEBADDRESSES&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt; has an associated &lt;dfn id=url-character-encoding&gt;URL character
-  encoding&lt;/dfn&gt;, determined as follows:&lt;/p&gt;
+  &lt;p&gt;The &lt;dfn id=document-base-url&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt;
+  object is the &lt;span&gt;document base Web address&lt;/span&gt; as defined by
+  the Web addresses specification. &lt;a href=#refsWEBADDRESSES&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;If the URL came from a script (e.g. as an argument to a
-   method)&lt;/dt&gt;
+  &lt;/div&gt;
 
-   &lt;dd&gt;The URL character encoding is the &lt;a href=&quot;#script's-url-character-encoding&quot;&gt;script's URL character
-   encoding&lt;/a&gt;.&lt;/dd&gt;
-
-   &lt;dt&gt;If the URL came from a DOM node (e.g. from an element)&lt;/dt&gt;
-
-   &lt;dd&gt;The node has a &lt;code&gt;Document&lt;/code&gt;, and the URL character
-   encoding is the &lt;a href=&quot;#document's-character-encoding&quot;&gt;document's character encoding&lt;/a&gt;.&lt;/dd&gt;
-
-   &lt;dt&gt;If the URL had a character encoding defined when the URL was
-   created or defined&lt;/dt&gt;
-
-   &lt;dd&gt;The URL character encoding is as defined.&lt;/dd&gt;
-
-  &lt;/dl&gt;&lt;p class=note&gt;The term &quot;URL&quot; in this specification is used in a
+  &lt;p class=note&gt;The term &quot;URL&quot; in this specification is used in a
   manner distinct from the precise technical meaning it is given in
   RFC 3986. Readers familiar with that RFC will find it easier to read
   &lt;em&gt;this&lt;/em&gt; specification if they pretend the term &quot;URL&quot; as used
   herein is really called something else altogether. This is a
   &lt;a href=#willful-violation&gt;willful violation&lt;/a&gt; of RFC 3986. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;/div&gt;
 
-
   &lt;div class=impl&gt;
 
-  &lt;h4 id=parsing-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Parsing URLs&lt;/h4&gt;
+  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.2 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
 
-  &lt;p&gt;To &lt;dfn id=parse-a-url&gt;parse a URL&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its
-  component parts, the user agent must use the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Strip leading and trailing &lt;a href=#space-character title=&quot;space
-   character&quot;&gt;space characters&lt;/a&gt; from &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; in the manner defined by RFC
-    3986, with the following exceptions:&lt;/p&gt;
-
-    &lt;ul&gt;&lt;li&gt;Add all characters with code points less than or equal to
-     U+0020 or greater than or equal to U+007F to the
-     &lt;unreserved&gt; production.&lt;/li&gt;
-
-     &lt;li&gt;Add the characters U+0022, U+003C, U+003E, U+005B .. U+005E,
-     U+0060, and U+007B .. U+007D to the &lt;unreserved&gt;
-     production.
-      &lt;!--
-       0022 QUOTATION MARK
-       003C LESS-THAN SIGN
-       003E GREATER-THAN SIGN
-       005B LEFT SQUARE BRACKET
-       005C REVERSE SOLIDUS
-       005D RIGHT SQUARE BRACKET
-       005E CIRCUMFLEX ACCENT
-       0060 GRAVE ACCENT
-       007B LEFT CURLY BRACKET
-       007C VERTICAL LINE
-       007D RIGHT CURLY BRACKET
-      --&gt;
-     &lt;/li&gt;
-
-     &lt;li&gt;Add a single U+0025 PERCENT SIGN character as a second
-     alternative way of matching the &lt;pct-encoded&gt; production,
-     except when the &lt;pct-encoded&gt; is used in the
-     &lt;reg-name&gt; production.&lt;/li&gt;
-
-     &lt;li&gt;Add the U+0023 NUMBER SIGN character to the characters
-     allowed in the &lt;fragment&gt; production.&lt;/li&gt;
-
-     &lt;!-- some browsers also have other differences, e.g. Mozilla
-     seems to treat &quot;;&quot; as if it was not in sub-delims, if the scheem
-     is &quot;ftp&quot;. --&gt;
-
-    &lt;/ul&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; doesn't match the
-    &lt;URI-reference&gt; production, even after the above changes are
-    made to the ABNF definitions, then parsing the URL fails with an
-    error. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was successful; the
-    components of the URL are substrings of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-    defined as follows:&lt;/p&gt;
-
-    &lt;dl&gt;&lt;dt&gt;&lt;dfn id=url-scheme title=url-scheme&gt;&lt;scheme&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;scheme&gt; production, if any.&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-host title=url-host&gt;&lt;host&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;host&gt; production, if any.&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-port title=url-port&gt;&lt;port&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;port&gt; production, if any.&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-hostport title=url-hostport&gt;&lt;hostport&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;If there is a &lt;scheme&gt; component and a &lt;port&gt;
-     component and the port given by the &lt;port&gt; component is
-     different than the default port defined for the protocol given by
-     the &lt;scheme&gt; component, then &lt;hostport&gt; is the
-     substring that starts with the substring matched by the
-     &lt;host&gt; production and ends with the substring matched by the
-     &lt;port&gt; production, and includes the colon in between the
-     two. Otherwise, it is the same as the &lt;host&gt; component.&lt;/p&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-path title=url-path&gt;&lt;path&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The substring matched by one of the following productions, if
-      one of them was matched:&lt;/p&gt;
-
-      &lt;ul class=brief&gt;&lt;li&gt;&lt;path-abempty&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-absolute&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-noscheme&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-rootless&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-empty&gt;&lt;/li&gt;
-      &lt;/ul&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-query title=url-query&gt;&lt;query&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;query&gt; production, if any.&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-fragment title=url-fragment&gt;&lt;fragment&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;fragment&gt; production, if any.&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn id=url-host-specific title=url-host-specific&gt;&lt;host-specific&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring that &lt;em&gt;follows&lt;/em&gt; the substring matched
-     by the &lt;authority&gt; production, or the whole string if the
-     &lt;authority&gt; production wasn't matched.&lt;/dd&gt;
-
-    &lt;/dl&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p class=note&gt;These parsing rules are a &lt;a href=#willful-violation&gt;willful
-  violation&lt;/a&gt; of RFC 3986 and RFC 3987 (which do not define error
-  handling), motivated by a desire to handle legacy content. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt; &lt;a href=#refsRFC3987&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;div class=impl&gt;
-
-  &lt;h4 id=resolving-urls&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Resolving URLs&lt;/h4&gt;
-
-  &lt;p&gt;To &lt;dfn id=resolve-a-url&gt;resolve a URL&lt;/dfn&gt; to an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
-  relative to either another &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; or an element,
-  the user agent must use the following steps. Resolving a URL can
-  result in an error, in which case the URL is not resolvable.&lt;/p&gt;
-
-  &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the &lt;a href=#url&gt;URL&lt;/a&gt; being
-   resolved.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;a href=#url-character-encoding&gt;URL character
-   encoding&lt;/a&gt;.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; is a UTF-16 encoding, then
-   change the value of &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; to UTF-8.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the algorithm was invoked with an &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
-    to use as the base URL, let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be that
-    &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be the &lt;i&gt;base URI of
-    the element&lt;/i&gt;, as defined by the XML Base specification, with
-    &lt;i&gt;the base URI of the document entity&lt;/i&gt; being defined as the
-    &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; of the &lt;code&gt;Document&lt;/code&gt; that
-    owns the element. &lt;a href=#refsXMLBASE&gt;[XMLBASE]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;For the purposes of the XML Base specification, user agents
-    must act as if all &lt;code&gt;Document&lt;/code&gt; objects represented XML
-    documents.&lt;/p&gt;
-
-    &lt;p class=note&gt;It is possible for &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes to be present
-    even in HTML fragments, as such attributes can be added
-    dynamically using script. (Such scripts would not be conforming,
-    however, as &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes
-    are not allowed in &lt;a href=#html-documents&gt;HTML documents&lt;/a&gt;.)&lt;/p&gt;
-
-    &lt;p&gt;The &lt;dfn id=document-base-url&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt; is
-    the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; obtained by running these
-    substeps:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt; be &lt;a href=&quot;#the-document's-address&quot;&gt;the
-     document's address&lt;/a&gt;.&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
-
-      &lt;!-- XXX this should be tested in the case of a browsing context
-      that was navigated to about:blank after having been elsewhere,
-      as opposed to the about:blank used at the time of the browsing
-      context's creation. --&gt;
-
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt; is
-      &lt;code&gt;&lt;a href=#about:blank&gt;about:blank&lt;/a&gt;&lt;/code&gt;, and the &lt;code&gt;Document&lt;/code&gt;'s
-      &lt;a href=#browsing-context&gt;browsing context&lt;/a&gt; has a &lt;a href=#creator-browsing-context&gt;creator browsing
-      context&lt;/a&gt;, then let &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt;
-      be the &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; of the &lt;a href=#creator-document&gt;creator
-      &lt;code&gt;Document&lt;/code&gt;&lt;/a&gt; instead.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If there is no &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt; element that is both a
-     child of &lt;a href=#the-head-element-0&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/a&gt; and has an
-     &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute, then the
-     &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;fallback base
-     url&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the
-     &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute of the first
-     such element.&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;Resolve&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; relative to &lt;var title=&quot;&quot;&gt;fallback base
-     url&lt;/var&gt; (thus, the &lt;code&gt;&lt;a href=#the-base-element&gt;base&lt;/a&gt;&lt;/code&gt; &lt;code title=attr-base-href&gt;&lt;a href=#attr-base-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute isn't affected by
-     &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attributes).&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;The &lt;a href=#document-base-url&gt;document base URL&lt;/a&gt; is the result of the
-     previous step if it was successful; otherwise it is &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt;.&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;a href=#parse-a-url title=&quot;parse a URL&quot;&gt;Parse&lt;/a&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its component parts.&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;a href=#url-host title=url-host&gt;&lt;host&gt;&lt;/a&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from expanding any sequences of percent-encoded octets in
-    that component that are valid UTF-8 sequences into Unicode
-    characters as defined by UTF-8.&lt;/p&gt;
-
-    &lt;p&gt;If any percent-encoded octets in that component are not valid
-    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
-
-    &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
-    with both the AllowUnassigned and UseSTD3ASCIIRules flags
-    set. Replace the matching substring with the result of the ToASCII
-    algorithm.&lt;/p&gt;
-
-    &lt;p&gt;If ToASCII fails to convert one of the components of the
-    string, e.g. because it is too long or because it contains invalid
-    characters, then return an error and abort these steps. &lt;a href=#refsRFC3490&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from applying the following steps to each character other
-    than U+0025 PERCENT SIGN (%) that doesn't match the original
-    &lt;path&gt; production defined in RFC 3986:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;Encode the character into a sequence of octets as defined by
-     UTF-8.&lt;/li&gt;
-
-     &lt;li&gt;Replace the character with the percent-encoded form of those
-     octets. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;div class=example&gt;
-
-     &lt;p&gt;For instance if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was &quot;&lt;code title=&quot;&quot;&gt;//example.com/a^b&#9786;c%FFd%z/?e&lt;/code&gt;&quot;, then the
-     &lt;a href=#url-path title=url-path&gt;&lt;path&gt;&lt;/a&gt; component's substring
-     would be &quot;&lt;code title=&quot;&quot;&gt;/a^b&#9786;c%FFd%z/&lt;/code&gt;&quot; and the two
-     characters that would have to be escaped would be &quot;&lt;code title=&quot;&quot;&gt;^&lt;/code&gt;&quot; and &quot;&lt;code title=&quot;&quot;&gt;&#9786;&lt;/code&gt;&quot;. The
-     result after this step was applied would therefore be that &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; now had the value &quot;&lt;code title=&quot;&quot;&gt;//example.com/a%5Eb%E2%98%BAc%FFd%z/?e&lt;/code&gt;&quot;.&lt;/p&gt;
-
-    &lt;/div&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;a href=#url-query title=url-query&gt;&lt;query&gt;&lt;/a&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from applying the following steps to each character other
-    than U+0025 PERCENT SIGN (%) that doesn't match the original
-    &lt;query&gt; production defined in RFC 3986:&lt;/p&gt;
-
-    &lt;ol&gt;&lt;li&gt;If the character in question cannot be expressed in the
-     encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;, then replace it with a
-     single 0x3F octet (an ASCII question mark) and skip the remaining
-     substeps for this character.&lt;/li&gt;
-
-     &lt;li&gt;Encode the character into a sequence of octets as defined by
-     the encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;Replace the character with the percent-encoded form of those
-     octets. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Apply the algorithm described in RFC 3986 section 5.2
-   Relative Resolution, using &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as the
-   potentially relative URI reference (&lt;var title=&quot;&quot;&gt;R&lt;/var&gt;), and
-   &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; as the base URI (&lt;var title=&quot;&quot;&gt;Base&lt;/var&gt;). &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Apply any relevant conformance criteria of RFC 3986 and RFC
-    3987, returning an error and aborting these steps if
-    appropriate. &lt;a href=#refsRFC3986&gt;[RFC3986]&lt;/a&gt; &lt;a href=#refsRFC3987&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=example&gt;For instance, if an absolute URI that would be
-    returned by the above algorithm violates the restrictions specific
-    to its scheme, e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI using the
-    &quot;&lt;code title=&quot;&quot;&gt;//&lt;/code&gt;&quot; server-based naming authority syntax,
-    then user agents are to treat this as an error instead.&lt;!-- RFC
-    3986, 3.1 Scheme --&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the target URI (&lt;var title=&quot;&quot;&gt;T&lt;/var&gt;) returned by the Relative Resolution
-   algorithm.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; uses a scheme with a
-   server-based naming authority, replace all U+005C REVERSE SOLIDUS
-   (\) characters in &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; with U+002F SOLIDUS
-   (/) characters.&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/li&gt;
-
-  &lt;/ol&gt;&lt;p&gt;A &lt;a href=#url&gt;URL&lt;/a&gt; is an &lt;dfn id=absolute-url&gt;absolute URL&lt;/dfn&gt; if &lt;a href=#resolve-a-url title=&quot;resolve a URL&quot;&gt;resolving&lt;/a&gt; it results in the same
-  URL without an error.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;div class=impl&gt;
-
-  &lt;h4 id=dynamic-changes-to-base-urls&gt;&lt;span class=secno&gt;2.5.4 &lt;/span&gt;Dynamic changes to base URLs&lt;/h4&gt;
-
   &lt;p&gt;When an &lt;code title=attr-xml-base&gt;&lt;a href=#the-xml:base-attribute-(xml-only)&gt;xml:base&lt;/a&gt;&lt;/code&gt; attribute
   changes, the attribute's element, and all descendant elements, are
   &lt;a href=#affected-by-a-base-url-change&gt;affected by a base URL change&lt;/a&gt;.&lt;/p&gt;
@@ -4832,7 +4502,7 @@
 
 
 
-  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.5 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
+  &lt;h4 id=interfaces-for-url-manipulation&gt;&lt;span class=secno&gt;2.5.3 &lt;/span&gt;Interfaces for URL manipulation&lt;/h4&gt;
 
   &lt;p&gt;An interface that has a complement of &lt;dfn id=url-decomposition-attributes&gt;URL decomposition
   attributes&lt;/dfn&gt; will have seven attributes with the following

Modified: source
===================================================================
--- source	2009-06-13 23:51:32 UTC (rev 3244)
+++ source	2009-06-14 00:21:04 UTC (rev 3245)
@@ -3933,64 +3933,52 @@
 
   &lt;h3&gt;URLs&lt;/h3&gt;
 
-  &lt;p&gt;This specification defines the term &lt;span&gt;URL&lt;/span&gt;, and defines
-  various algorithms for dealing with URLs, because for historical
-  reasons the rules defined by the URI and IRI specifications are not
-  a complete description of what HTML user agents need to implement to
-  be compatible with Web content.&lt;/p&gt;
-
-
   &lt;h4&gt;Terminology&lt;/h4&gt;
 
   &lt;p&gt;A &lt;dfn&gt;URL&lt;/dfn&gt; is a string used to identify a resource.&lt;/p&gt;
 
-  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is a &lt;dfn&gt;valid URL&lt;/dfn&gt; if at least one of
-  the following conditions holds:&lt;/p&gt;
+  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is a &lt;dfn&gt;valid URL&lt;/dfn&gt; if it is a
+  &lt;span&gt;valid Web address&lt;/span&gt; as defined by the Web addresses
+  specification. &lt;a href=&quot;#refsWEBADDRESSES&quot;&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;ul&gt;
+  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is an &lt;dfn&gt;absolute URL&lt;/dfn&gt; if it is an
+  &lt;span&gt;absolute Web address&lt;/span&gt; as defined by the Web addresses
+  specification. &lt;a href=&quot;#refsWEBADDRESSES&quot;&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;URL&lt;/span&gt; is a valid URI reference &lt;a
-   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;URL&lt;/span&gt; is a valid IRI reference and it has no
-   query component. &lt;a href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;URL&lt;/span&gt; is a valid IRI reference and its query
-   component contains no unescaped non-ASCII characters. &lt;a
-   href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;The &lt;span&gt;URL&lt;/span&gt; is a valid IRI reference and the &lt;span
-   title=&quot;document's character encoding&quot;&gt;character encoding&lt;/span&gt; of
-   the URL's &lt;code&gt;Document&lt;/code&gt; is UTF-8 or UTF-16. &lt;a
-   href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ul&gt;
-
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; has an associated &lt;dfn&gt;URL character
-  encoding&lt;/dfn&gt;, determined as follows:&lt;/p&gt;
+  &lt;p&gt;To &lt;dfn&gt;parse a URL&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its
+  component parts, the user agent must use the &lt;span&gt;parse a Web
+  address&lt;/span&gt; algorithm defined by the Web addresses
+  specification. &lt;a href=&quot;#refsWEBADDRESSES&quot;&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;dl class=&quot;switch&quot;&gt;
+  &lt;p&gt;Parsing a URL results in the following components, again as
+  defined by the Web addresses specification:&lt;/p&gt;
 
-   &lt;dt&gt;If the URL came from a script (e.g. as an argument to a
-   method)&lt;/dt&gt;
+  &lt;ul class=&quot;brief&quot;&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-host&quot;&gt;&lt;host&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-port&quot;&gt;&lt;port&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-hostport&quot;&gt;&lt;hostport&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/dfn&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;dfn title=&quot;url-host-specific&quot;&gt;&lt;host-specific&gt;&lt;/dfn&gt;&lt;/li&gt;
+  &lt;/ul&gt; 
 
-   &lt;dd&gt;The URL character encoding is the &lt;span&gt;script's URL character
-   encoding&lt;/span&gt;.&lt;/dd&gt;
+  &lt;p&gt;To &lt;dfn&gt;resolve a URL&lt;/dfn&gt; to an &lt;span&gt;absolute URL&lt;/span&gt;
+  relative to either another &lt;span&gt;absolute URL&lt;/span&gt; or an element,
+  the user agent must use the &lt;span&gt;resolve a Web address&lt;/span&gt;
+  algorithm defined by the Web addresses specification. &lt;a
+  href=&quot;#refsWEBADDRESSES&quot;&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;dt&gt;If the URL came from a DOM node (e.g. from an element)&lt;/dt&gt;
+  &lt;p&gt;The &lt;dfn&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt;
+  object is the &lt;span&gt;document base Web address&lt;/span&gt; as defined by
+  the Web addresses specification. &lt;a
+  href=&quot;#refsWEBADDRESSES&quot;&gt;[WEBADDRESSES]&lt;/a&gt;&lt;/p&gt;
 
-   &lt;dd&gt;The node has a &lt;code&gt;Document&lt;/code&gt;, and the URL character
-   encoding is the &lt;span&gt;document's character encoding&lt;/span&gt;.&lt;/dd&gt;
+  &lt;/div&gt;
 
-   &lt;dt&gt;If the URL had a character encoding defined when the URL was
-   created or defined&lt;/dt&gt;
-
-   &lt;dd&gt;The URL character encoding is as defined.&lt;/dd&gt;
-
-  &lt;/dl&gt;
-
   &lt;p class=&quot;note&quot;&gt;The term &quot;URL&quot; in this specification is used in a
   manner distinct from the precise technical meaning it is given in
   RFC 3986. Readers familiar with that RFC will find it easier to read
@@ -3999,383 +3987,9 @@
   &lt;span&gt;willful violation&lt;/span&gt; of RFC 3986. &lt;a
   href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
 
-  &lt;/div&gt;
 
-
   &lt;div class=&quot;impl&quot;&gt;
 
-  &lt;h4&gt;Parsing URLs&lt;/h4&gt;
-
-  &lt;p&gt;To &lt;dfn&gt;parse a URL&lt;/dfn&gt; &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; into its
-  component parts, the user agent must use the following steps:&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Strip leading and trailing &lt;span title=&quot;space
-   character&quot;&gt;space characters&lt;/span&gt; from &lt;var
-   title=&quot;&quot;&gt;url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Parse &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; in the manner defined by RFC
-    3986, with the following exceptions:&lt;/p&gt;
-
-    &lt;ul&gt;
-
-     &lt;li&gt;Add all characters with code points less than or equal to
-     U+0020 or greater than or equal to U+007F to the
-     &lt;unreserved&gt; production.&lt;/li&gt;
-
-     &lt;li&gt;Add the characters U+0022, U+003C, U+003E, U+005B .. U+005E,
-     U+0060, and U+007B .. U+007D to the &lt;unreserved&gt;
-     production.
-      &lt;!--
-       0022 QUOTATION MARK
-       003C LESS-THAN SIGN
-       003E GREATER-THAN SIGN
-       005B LEFT SQUARE BRACKET
-       005C REVERSE SOLIDUS
-       005D RIGHT SQUARE BRACKET
-       005E CIRCUMFLEX ACCENT
-       0060 GRAVE ACCENT
-       007B LEFT CURLY BRACKET
-       007C VERTICAL LINE
-       007D RIGHT CURLY BRACKET
-      --&gt;
-     &lt;/li&gt;
-
-     &lt;li&gt;Add a single U+0025 PERCENT SIGN character as a second
-     alternative way of matching the &lt;pct-encoded&gt; production,
-     except when the &lt;pct-encoded&gt; is used in the
-     &lt;reg-name&gt; production.&lt;/li&gt;
-
-     &lt;li&gt;Add the U+0023 NUMBER SIGN character to the characters
-     allowed in the &lt;fragment&gt; production.&lt;/li&gt;
-
-     &lt;!-- some browsers also have other differences, e.g. Mozilla
-     seems to treat &quot;;&quot; as if it was not in sub-delims, if the scheem
-     is &quot;ftp&quot;. --&gt;
-
-    &lt;/ul&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; doesn't match the
-    &lt;URI-reference&gt; production, even after the above changes are
-    made to the ABNF definitions, then parsing the URL fails with an
-    error. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was successful; the
-    components of the URL are substrings of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt;
-    defined as follows:&lt;/p&gt;
-
-    &lt;dl&gt;
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-scheme&quot;&gt;&lt;scheme&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;scheme&gt; production, if any.&lt;/p&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-host&quot;&gt;&lt;host&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;host&gt; production, if any.&lt;/p&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-port&quot;&gt;&lt;port&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;port&gt; production, if any.&lt;/p&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-hostport&quot;&gt;&lt;hostport&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;If there is a &lt;scheme&gt; component and a &lt;port&gt;
-     component and the port given by the &lt;port&gt; component is
-     different than the default port defined for the protocol given by
-     the &lt;scheme&gt; component, then &lt;hostport&gt; is the
-     substring that starts with the substring matched by the
-     &lt;host&gt; production and ends with the substring matched by the
-     &lt;port&gt; production, and includes the colon in between the
-     two. Otherwise, it is the same as the &lt;host&gt; component.&lt;/p&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;
-
-      &lt;p&gt;The substring matched by one of the following productions, if
-      one of them was matched:&lt;/p&gt;
-
-      &lt;ul class=&quot;brief&quot;&gt;
-       &lt;li&gt;&lt;path-abempty&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-absolute&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-noscheme&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-rootless&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;path-empty&gt;&lt;/li&gt;
-      &lt;/ul&gt;
-
-     &lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;query&gt; production, if any.&lt;/p&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-fragment&quot;&gt;&lt;fragment&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring matched by the &lt;fragment&gt; production, if any.&lt;/p&gt;&lt;/dd&gt;
-
-
-     &lt;dt&gt;&lt;dfn title=&quot;url-host-specific&quot;&gt;&lt;host-specific&gt;&lt;/dfn&gt;&lt;/dt&gt;
-
-     &lt;dd&gt;&lt;p&gt;The substring that &lt;em&gt;follows&lt;/em&gt; the substring matched
-     by the &lt;authority&gt; production, or the whole string if the
-     &lt;authority&gt; production wasn't matched.&lt;/p&gt;&lt;/dd&gt;
-
-    &lt;/dl&gt;
-
-   &lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p class=&quot;note&quot;&gt;These parsing rules are a &lt;span&gt;willful
-  violation&lt;/span&gt; of RFC 3986 and RFC 3987 (which do not define error
-  handling), motivated by a desire to handle legacy content. &lt;a
-  href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-  href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;h4&gt;Resolving URLs&lt;/h4&gt;
-
-  &lt;p&gt;To &lt;dfn&gt;resolve a URL&lt;/dfn&gt; to an &lt;span&gt;absolute URL&lt;/span&gt;
-  relative to either another &lt;span&gt;absolute URL&lt;/span&gt; or an element,
-  the user agent must use the following steps. Resolving a URL can
-  result in an error, in which case the URL is not resolvable.&lt;/p&gt;
-
-  &lt;ol&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the &lt;span&gt;URL&lt;/span&gt; being
-   resolved.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; be the &lt;span&gt;URL character
-   encoding&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; is a UTF-16 encoding, then
-   change the value of &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt; to UTF-8.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If the algorithm was invoked with an &lt;span&gt;absolute URL&lt;/span&gt;
-    to use as the base URL, let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be that
-    &lt;span&gt;absolute URL&lt;/span&gt;.&lt;/p&gt;
-
-    &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; be the &lt;i&gt;base URI of
-    the element&lt;/i&gt;, as defined by the XML Base specification, with
-    &lt;i&gt;the base URI of the document entity&lt;/i&gt; being defined as the
-    &lt;span&gt;document base URL&lt;/span&gt; of the &lt;code&gt;Document&lt;/code&gt; that
-    owns the element. &lt;a href=&quot;#refsXMLBASE&quot;&gt;[XMLBASE]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p&gt;For the purposes of the XML Base specification, user agents
-    must act as if all &lt;code&gt;Document&lt;/code&gt; objects represented XML
-    documents.&lt;/p&gt;
-
-    &lt;p class=&quot;note&quot;&gt;It is possible for &lt;code
-    title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes to be present
-    even in HTML fragments, as such attributes can be added
-    dynamically using script. (Such scripts would not be conforming,
-    however, as &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes
-    are not allowed in &lt;span&gt;HTML documents&lt;/span&gt;.)&lt;/p&gt;
-
-    &lt;p&gt;The &lt;dfn&gt;document base URL&lt;/dfn&gt; of a &lt;code&gt;Document&lt;/code&gt; is
-    the &lt;span&gt;absolute URL&lt;/span&gt; obtained by running these
-    substeps:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt; be &lt;span&gt;the
-     document's address&lt;/span&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;
-
-      &lt;!-- <A HREF="http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/">http://www.hixie.ch/tests/adhoc/html/navigation/javascript-url/</A> --&gt;
-
-      &lt;!-- XXX this should be tested in the case of a browsing context
-      that was navigated to about:blank after having been elsewhere,
-      as opposed to the about:blank used at the time of the browsing
-      context's creation. --&gt;
-
-      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt; is
-      &lt;code&gt;about:blank&lt;/code&gt;, and the &lt;code&gt;Document&lt;/code&gt;'s
-      &lt;span&gt;browsing context&lt;/span&gt; has a &lt;span&gt;creator browsing
-      context&lt;/span&gt;, then let &lt;var title=&quot;&quot;&gt;fallback base url&lt;/var&gt;
-      be the &lt;span&gt;document base URL&lt;/span&gt; of the &lt;span&gt;creator
-      &lt;code&gt;Document&lt;/code&gt;&lt;/span&gt; instead.&lt;/p&gt;
-
-     &lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;If there is no &lt;code&gt;base&lt;/code&gt; element that is both a
-     child of &lt;span&gt;the &lt;code&gt;head&lt;/code&gt; element&lt;/span&gt; and has an
-     &lt;code title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute, then the
-     &lt;span&gt;document base URL&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;fallback base
-     url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; be the value of the
-     &lt;code title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute of the first
-     such element.&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;&lt;span title=&quot;resolve a URL&quot;&gt;Resolve&lt;/span&gt; &lt;var
-     title=&quot;&quot;&gt;url&lt;/var&gt; relative to &lt;var title=&quot;&quot;&gt;fallback base
-     url&lt;/var&gt; (thus, the &lt;code&gt;base&lt;/code&gt; &lt;code
-     title=&quot;attr-base-href&quot;&gt;href&lt;/code&gt; attribute isn't affected by
-     &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attributes).&lt;/p&gt;&lt;/li&gt;
-
-     &lt;li&gt;&lt;p&gt;The &lt;span&gt;document base URL&lt;/span&gt; is the result of the
-     previous step if it was successful; otherwise it is &lt;var
-     title=&quot;&quot;&gt;fallback base url&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;&lt;span title=&quot;parse a URL&quot;&gt;Parse&lt;/span&gt; &lt;var
-   title=&quot;&quot;&gt;url&lt;/var&gt; into its component parts.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;span
-    title=&quot;url-host&quot;&gt;&lt;host&gt;&lt;/span&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from expanding any sequences of percent-encoded octets in
-    that component that are valid UTF-8 sequences into Unicode
-    characters as defined by UTF-8.&lt;/p&gt;
-
-    &lt;p&gt;If any percent-encoded octets in that component are not valid
-    UTF-8 sequences, then return an error and abort these steps.&lt;/p&gt;
-
-    &lt;p&gt;Apply the IDNA ToASCII algorithm to the matching substring,
-    with both the AllowUnassigned and UseSTD3ASCIIRules flags
-    set. Replace the matching substring with the result of the ToASCII
-    algorithm.&lt;/p&gt;
-
-    &lt;p&gt;If ToASCII fails to convert one of the components of the
-    string, e.g. because it is too long or because it contains invalid
-    characters, then return an error and abort these steps. &lt;a
-    href=&quot;#refsRFC3490&quot;&gt;[RFC3490]&lt;/a&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;span
-    title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/span&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from applying the following steps to each character other
-    than U+0025 PERCENT SIGN (%) that doesn't match the original
-    &lt;path&gt; production defined in RFC 3986:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;Encode the character into a sequence of octets as defined by
-     UTF-8.&lt;/li&gt;
-
-     &lt;li&gt;Replace the character with the percent-encoded form of those
-     octets. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-    &lt;div class=&quot;example&quot;&gt;
-
-     &lt;p&gt;For instance if &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; was &quot;&lt;code
-     title=&quot;&quot;&gt;//example.com/a^b&amp;#x263a;c%FFd%z/?e&lt;/code&gt;&quot;, then the
-     &lt;span title=&quot;url-path&quot;&gt;&lt;path&gt;&lt;/span&gt; component's substring
-     would be &quot;&lt;code title=&quot;&quot;&gt;/a^b&amp;#x263a;c%FFd%z/&lt;/code&gt;&quot; and the two
-     characters that would have to be escaped would be &quot;&lt;code
-     title=&quot;&quot;&gt;^&lt;/code&gt;&quot; and &quot;&lt;code title=&quot;&quot;&gt;&amp;#x263a;&lt;/code&gt;&quot;. The
-     result after this step was applied would therefore be that &lt;var
-     title=&quot;&quot;&gt;url&lt;/var&gt; now had the value &quot;&lt;code
-     title=&quot;&quot;&gt;//example.com/a%5Eb%E2%98%BAc%FFd%z/?e&lt;/code&gt;&quot;.&lt;/p&gt;
-
-    &lt;/div&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;If parsing &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; resulted in a &lt;span
-    title=&quot;url-query&quot;&gt;&lt;query&gt;&lt;/span&gt; component, then replace the
-    matching substring of &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; with the string that
-    results from applying the following steps to each character other
-    than U+0025 PERCENT SIGN (%) that doesn't match the original
-    &lt;query&gt; production defined in RFC 3986:&lt;/p&gt;
-
-    &lt;ol&gt;
-
-     &lt;li&gt;If the character in question cannot be expressed in the
-     encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;, then replace it with a
-     single 0x3F octet (an ASCII question mark) and skip the remaining
-     substeps for this character.&lt;/li&gt;
-
-     &lt;li&gt;Encode the character into a sequence of octets as defined by
-     the encoding &lt;var title=&quot;&quot;&gt;encoding&lt;/var&gt;.&lt;/li&gt;
-
-     &lt;li&gt;Replace the character with the percent-encoded form of those
-     octets. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/li&gt;
-
-    &lt;/ol&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Apply the algorithm described in RFC 3986 section 5.2
-   Relative Resolution, using &lt;var title=&quot;&quot;&gt;url&lt;/var&gt; as the
-   potentially relative URI reference (&lt;var title=&quot;&quot;&gt;R&lt;/var&gt;), and
-   &lt;var title=&quot;&quot;&gt;base&lt;/var&gt; as the base URI (&lt;var
-   title=&quot;&quot;&gt;Base&lt;/var&gt;). &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;
-
-    &lt;p&gt;Apply any relevant conformance criteria of RFC 3986 and RFC
-    3987, returning an error and aborting these steps if
-    appropriate. &lt;a href=&quot;#refsRFC3986&quot;&gt;[RFC3986]&lt;/a&gt; &lt;a
-    href=&quot;#refsRFC3987&quot;&gt;[RFC3987]&lt;/a&gt;&lt;/p&gt;
-
-    &lt;p class=&quot;example&quot;&gt;For instance, if an absolute URI that would be
-    returned by the above algorithm violates the restrictions specific
-    to its scheme, e.g. a &lt;code title=&quot;&quot;&gt;data:&lt;/code&gt; URI using the
-    &quot;&lt;code title=&quot;&quot;&gt;//&lt;/code&gt;&quot; server-based naming authority syntax,
-    then user agents are to treat this as an error instead.&lt;!-- RFC
-    3986, 3.1 Scheme --&gt;&lt;/p&gt;
-
-   &lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; be the target URI (&lt;var
-   title=&quot;&quot;&gt;T&lt;/var&gt;) returned by the Relative Resolution
-   algorithm.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;If &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; uses a scheme with a
-   server-based naming authority, replace all U+005C REVERSE SOLIDUS
-   (\) characters in &lt;var title=&quot;&quot;&gt;result&lt;/var&gt; with U+002F SOLIDUS
-   (/) characters.&lt;/p&gt;&lt;/li&gt;
-
-   &lt;li&gt;&lt;p&gt;Return &lt;var title=&quot;&quot;&gt;result&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
-
-  &lt;/ol&gt;
-
-  &lt;p&gt;A &lt;span&gt;URL&lt;/span&gt; is an &lt;dfn&gt;absolute URL&lt;/dfn&gt; if &lt;span
-  title=&quot;resolve a URL&quot;&gt;resolving&lt;/span&gt; it results in the same
-  URL without an error.&lt;/p&gt;
-
-  &lt;/div&gt;
-
-
-  &lt;div class=&quot;impl&quot;&gt;
-
   &lt;h4&gt;Dynamic changes to base URLs&lt;/h4&gt;
 
   &lt;p&gt;When an &lt;code title=&quot;attr-xml-base&quot;&gt;xml:base&lt;/code&gt; attribute


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010123.html">[html5] r3244 - [e] (0) editorial cleanup
</A></li>
	<LI>Next message: <A HREF="010125.html">[html5] r3246 - [e] (0) editorial cleanup and reference collection
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10124">[ date ]</a>
              <a href="thread.html#10124">[ thread ]</a>
              <a href="subject.html#10124">[ subject ]</a>
              <a href="author.html#10124">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
