<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3382 - [cgt] (2) Change how space characters are handled	in tables. Removes 'taint' con [...]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3382%20-%20%5Bcgt%5D%20%282%29%20Change%20how%20space%20characters%20are%20handled%0A%09in%20tables.%20Removes%20%27taint%27%20con%20%5B...%5D&In-Reply-To=%3C20090710003544.560931389C3%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010259.html">
   <LINK REL="Next"  HREF="010261.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3382 - [cgt] (2) Change how space characters are handled	in tables. Removes 'taint' con [...]</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3382%20-%20%5Bcgt%5D%20%282%29%20Change%20how%20space%20characters%20are%20handled%0A%09in%20tables.%20Removes%20%27taint%27%20con%20%5B...%5D&In-Reply-To=%3C20090710003544.560931389C3%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3382 - [cgt] (2) Change how space characters are handled	in tables. Removes 'taint' con [...]">whatwg at whatwg.org
       </A><BR>
    <I>Thu Jul  9 17:35:44 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010259.html">[html5] r3381 - [e] (0) Further tweak the new warnings section;	remove the specific mention of &lt; [...]
</A></li>
        <LI>Next message: <A HREF="010261.html">[html5] r3383 - [] (0) Define the task source for web workers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10260">[ date ]</a>
              <a href="thread.html#10260">[ thread ]</a>
              <a href="subject.html#10260">[ subject ]</a>
              <a href="author.html#10260">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-07-09 17:35:42 -0700 (Thu, 09 Jul 2009)
New Revision: 3382

Modified:
   index
   source
Log:
[cgt] (2) Change how space characters are handled in tables. Removes 'taint' concept, but adds an insertion mode (that I expect nobody will really implement that way, since the best way to code this is to have string tokens, not character tokens).

Modified: index
===================================================================
--- index	2009-07-08 19:42:09 UTC (rev 3381)
+++ index	2009-07-10 00:35:42 UTC (rev 3382)
@@ -67,7 +67,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-standard-&mdash;-date:-01-jan-1901&gt;Draft Standard &mdash; 8 July 2009&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-standard-&mdash;-date:-01-jan-1901&gt;Draft Standard &mdash; 10 July 2009&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;!--&lt;p class=&quot;impl&quot;&gt;&lt;strong&gt;Implementors!&lt;/strong&gt; We have a &lt;a href=&quot;<A HREF="http://www.whatwg.org/mailing-list#implementors">http://www.whatwg.org/mailing-list#implementors</A>&quot;&gt;mailing list&lt;/a&gt; for you too!&lt;/p&gt;--&gt;
@@ -930,19 +930,20 @@
        &lt;li&gt;&lt;a href=#parsing-main-inbody&gt;&lt;span class=secno&gt;9.2.5.10 &lt;/span&gt;The &quot;in body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#parsing-main-incdata&gt;&lt;span class=secno&gt;9.2.5.11 &lt;/span&gt;The &quot;in CDATA/RCDATA&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
        &lt;li&gt;&lt;a href=#parsing-main-intable&gt;&lt;span class=secno&gt;9.2.5.12 &lt;/span&gt;The &quot;in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;9.2.5.13 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;9.2.5.14 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;9.2.5.15 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;9.2.5.16 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;9.2.5.17 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;9.2.5.18 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;9.2.5.19 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;9.2.5.20 &lt;/span&gt;The &quot;in foreign content&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;9.2.5.21 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;9.2.5.22 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;9.2.5.23 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.24 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
-       &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.25 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-intabletext&gt;&lt;span class=secno&gt;9.2.5.13 &lt;/span&gt;The &quot;in table text&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-incaption&gt;&lt;span class=secno&gt;9.2.5.14 &lt;/span&gt;The &quot;in caption&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-incolgroup&gt;&lt;span class=secno&gt;9.2.5.15 &lt;/span&gt;The &quot;in column group&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-intbody&gt;&lt;span class=secno&gt;9.2.5.16 &lt;/span&gt;The &quot;in table body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-intr&gt;&lt;span class=secno&gt;9.2.5.17 &lt;/span&gt;The &quot;in row&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-intd&gt;&lt;span class=secno&gt;9.2.5.18 &lt;/span&gt;The &quot;in cell&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inselect&gt;&lt;span class=secno&gt;9.2.5.19 &lt;/span&gt;The &quot;in select&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inselectintable&gt;&lt;span class=secno&gt;9.2.5.20 &lt;/span&gt;The &quot;in select in table&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inforeign&gt;&lt;span class=secno&gt;9.2.5.21 &lt;/span&gt;The &quot;in foreign content&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-afterbody&gt;&lt;span class=secno&gt;9.2.5.22 &lt;/span&gt;The &quot;after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-inframeset&gt;&lt;span class=secno&gt;9.2.5.23 &lt;/span&gt;The &quot;in frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#parsing-main-afterframeset&gt;&lt;span class=secno&gt;9.2.5.24 &lt;/span&gt;The &quot;after frameset&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.25 &lt;/span&gt;The &quot;after after body&quot; insertion mode&lt;/a&gt;&lt;/li&gt;
+       &lt;li&gt;&lt;a href=#the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.26 &lt;/span&gt;The &quot;after after frameset&quot; insertion mode&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-end&gt;&lt;span class=secno&gt;9.2.6 &lt;/span&gt;The end&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#coercing-an-html-dom-into-an-infoset&gt;&lt;span class=secno&gt;9.2.7 &lt;/span&gt;Coercing an HTML DOM into an infoset&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#an-introduction-to-error-handling-in-the-parser&gt;&lt;span class=secno&gt;9.2.8 &lt;/span&gt;An introduction to error handling in the parser&lt;/a&gt;
@@ -59089,7 +59090,7 @@
   &quot;&lt;a href=#the-before-head-insertion-mode title=&quot;insertion mode: before head&quot;&gt;before head&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in head&quot;&gt;in head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inheadnoscript title=&quot;insertion mode: in head noscript&quot;&gt;in head noscript&lt;/a&gt;&quot;,
   &quot;&lt;a href=#the-after-head-insertion-mode title=&quot;insertion mode: after head&quot;&gt;after head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/a&gt;&quot;,
-  &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;,
+  &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion mode: in select in table&quot;&gt;in select in
   table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion mode: in foreign content&quot;&gt;in
@@ -59105,8 +59106,7 @@
 
   &lt;p&gt;Seven of these modes, namely &quot;&lt;a href=#parsing-main-inhead title=&quot;insertion mode: in
   head&quot;&gt;in head&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in
-  body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion mode: in CDATA/RCDATA&quot;&gt;in
-  CDATA/RCDATA&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in
+  body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in
   table&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table body&quot;&gt;in table
   body&lt;/a&gt;&quot;, &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode: in row&quot;&gt;in row&lt;/a&gt;&quot;,
   &quot;&lt;a href=#parsing-main-intd title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, and &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, are special, in
@@ -59120,10 +59120,9 @@
   to a new value.&lt;/p&gt;
 
   &lt;p&gt;When the insertion mode is switched to &quot;&lt;a href=#parsing-main-incdata title=&quot;insertion
-  mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/a&gt;&quot;, the &lt;dfn id=original-insertion-mode&gt;original
-  insertion mode&lt;/dfn&gt; is also set. This is the insertion mode to
-  which the tree construction stage will return when the corresponding
-  end tag is parsed.&lt;/p&gt;
+  mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/a&gt;&quot; or &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, the
+  &lt;dfn id=original-insertion-mode&gt;original insertion mode&lt;/dfn&gt; is also set. This is the
+  insertion mode to which the tree construction stage will return.&lt;/p&gt;
 
   &lt;p&gt;When the insertion mode is switched to &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion
   mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot;, the
@@ -60943,7 +60942,9 @@
      &lt;tr&gt;&lt;td&gt;&lt;pre&gt;A&lt;table&gt;B&lt;tr&gt;C&lt;/tr&gt;C&lt;/table&gt;&lt;/pre&gt;
       &lt;td&gt;Three adjacent text nodes before the table, containing &quot;A&quot;, &quot;B&quot;, and &quot;CC&quot; respectively. (This is caused by &lt;a href=#foster-parent title=&quot;foster parent&quot;&gt;foster parenting&lt;/a&gt;.)
      &lt;tr&gt;&lt;td&gt;&lt;pre&gt;A&lt;table&gt;&lt;tr&gt;&nbsp;B&lt;/tr&gt;&nbsp;B&lt;/table&gt;&lt;/pre&gt;
-      &lt;td&gt;Two adjacent text nodes before the table, containing &quot;A&quot; and &quot;B&nbsp;B&quot; respectively, and one text node inside the table with a single space character. (This is caused by &lt;a href=#foster-parent title=&quot;foster parent&quot;&gt;foster parenting&lt;/a&gt; and &lt;a href=#tainted title=tainted&gt;tainting&lt;/a&gt;.)
+      &lt;td&gt;Two adjacent text nodes before the table, containing &quot;A&quot; and &quot;&nbsp;B&nbsp;B&quot; (space-B-space-B) respectively. (This is caused by &lt;a href=#foster-parent title=&quot;foster parent&quot;&gt;foster parenting&lt;/a&gt;.)
+     &lt;tr&gt;&lt;td&gt;&lt;pre&gt;A&lt;table&gt;&lt;tr&gt;&nbsp;B&lt;/tr&gt;&nbsp;&lt;/em&gt;C&lt;/table&gt;&lt;/pre&gt;
+      &lt;td&gt;Three adjacent text nodes before the table, containing &quot;A&quot;, &quot;&nbsp;B&quot; (space-B), and &quot;C&quot; respectively, and one text node inside the table (as a child of a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;) with a single space character. (Space characters separated from non-space characters by non-character tokens are not affected by &lt;a href=#foster-parent title=&quot;foster parent&quot;&gt;foster parenting&lt;/a&gt;, even if those other tokens then get ignored.)
    &lt;/table&gt;&lt;/div&gt;
 
   &lt;p id=mutation-during-parsing&gt;DOM mutation events must not fire
@@ -61167,12 +61168,7 @@
 
   &lt;p&gt;When a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is to be &lt;dfn id=foster-parent title=&quot;foster
   parent&quot;&gt;foster parented&lt;/dfn&gt;, the node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;
-  must be inserted into the &lt;i&gt;&lt;a href=#foster-parent-element&gt;foster parent element&lt;/a&gt;&lt;/i&gt;, and the
-  &lt;a href=#current-table&gt;current table&lt;/a&gt; must be marked as
-  &lt;dfn id=tainted&gt;tainted&lt;/dfn&gt;. (Once the &lt;a href=#current-table&gt;current table&lt;/a&gt; has been
-  &lt;a href=#tainted&gt;tainted&lt;/a&gt;, &lt;a href=#space-character title=&quot;space character&quot;&gt;space
-  characters&lt;/a&gt; are inserted into the &lt;i&gt;&lt;a href=#foster-parent-element&gt;foster parent element&lt;/a&gt;&lt;/i&gt;
-  instead of the &lt;a href=#current-node&gt;current node&lt;/a&gt;.)&lt;/p&gt;
+  must be inserted into the &lt;i&gt;&lt;a href=#foster-parent-element&gt;foster parent element&lt;/a&gt;&lt;/i&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=foster-parent-element&gt;foster parent element&lt;/dfn&gt; is the parent element of the
   last &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element in the &lt;a href=#stack-of-open-elements&gt;stack of open
@@ -63175,17 +63171,18 @@
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intable title=&quot;insertion
   mode: in table&quot;&gt;in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
 
-  &lt;dl class=switch&gt;&lt;dt&gt;A character token that is one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
-   &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
+  &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;If the &lt;a href=#current-table&gt;current table&lt;/a&gt; is &lt;a href=#tainted&gt;tainted&lt;/a&gt;, then
-    act as described in the &quot;anything else&quot; entry below.&lt;/p&gt;
+     &lt;p&gt;Let the &lt;dfn id=pending-table-character-tokens&gt;&lt;var&gt;pending table character tokens&lt;/var&gt;&lt;/dfn&gt;
+     be an empty list of tokens.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;insert the
-    character&lt;/a&gt; into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+     &lt;p&gt;Let the &lt;a href=#original-insertion-mode&gt;original insertion mode&lt;/a&gt; be the current
+     &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt;.&lt;/p&gt;
 
+     &lt;p&gt;Switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot; and
+     reprocess the token.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;A comment token&lt;/dt&gt;
@@ -63351,8 +63348,44 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;9.2.5.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
+  &lt;h5 id=parsing-main-intabletext&gt;&lt;span class=secno&gt;9.2.5.13 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+
+  &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion
+  mode: in table text&quot;&gt;in table text&lt;/a&gt;&quot;, tokens must be handled
+  as follows:&lt;/p&gt;
+
+  &lt;dl class=switch&gt;&lt;dt&gt;A character token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Append the character token to the &lt;var&gt;&lt;a href=#pending-table-character-tokens&gt;pending table character
+    tokens&lt;/a&gt;&lt;/var&gt; list.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If any of the tokens in the &lt;var&gt;&lt;a href=#pending-table-character-tokens&gt;pending table character
+    tokens&lt;/a&gt;&lt;/var&gt; list are character tokens that are not one of U+0009
+    CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED
+    (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE, then
+    reprocess those character tokens using the rules given in the
+    &quot;anything else&quot; entry in the &lt;a href=#parsing-main-intable title=&quot;insertion mode: in
+    table&quot;&gt;in table&lt;/a&gt;&quot; insertion mode.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, &lt;a href=#insert-a-character title=&quot;insert a character&quot;&gt;insert the
+    characters&lt;/a&gt; given by the &lt;var&gt;&lt;a href=#pending-table-character-tokens&gt;pending table character
+    tokens&lt;/a&gt;&lt;/var&gt; list into the &lt;a href=#current-node&gt;current node&lt;/a&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Switch the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; to the &lt;a href=#original-insertion-mode&gt;original
+    insertion mode&lt;/a&gt; and reprocess the token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;&lt;h5 id=parsing-main-incaption&gt;&lt;span class=secno&gt;9.2.5.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incaption title=&quot;insertion
   mode: in caption&quot;&gt;in caption&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
 
@@ -63409,7 +63442,7 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;9.2.5.14 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-incolgroup&gt;&lt;span class=secno&gt;9.2.5.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-incolgroup title=&quot;insertion
   mode: in column group&quot;&gt;in column group&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63496,7 +63529,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;9.2.5.15 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-intbody&gt;&lt;span class=secno&gt;9.2.5.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion
   mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63585,7 +63618,7 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;9.2.5.16 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=parsing-main-intr&gt;&lt;span class=secno&gt;9.2.5.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in row&quot;&gt;in row&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intr title=&quot;insertion
   mode: in row&quot;&gt;in row&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63676,7 +63709,7 @@
   case&lt;/a&gt;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;9.2.5.17 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=parsing-main-intd&gt;&lt;span class=secno&gt;9.2.5.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intd title=&quot;insertion
   mode: in cell&quot;&gt;in cell&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63770,7 +63803,7 @@
   cell&lt;/a&gt;&quot;.&lt;/p&gt;
 
 
-  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;9.2.5.18 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=parsing-main-inselect&gt;&lt;span class=secno&gt;9.2.5.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select&quot;&gt;in select&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselect title=&quot;insertion
   mode: in select&quot;&gt;in select&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63908,7 +63941,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;9.2.5.19 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inselectintable&gt;&lt;span class=secno&gt;9.2.5.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in select in table&quot;&gt;in select in table&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inselectintable title=&quot;insertion
   mode: in select in table&quot;&gt;in select in table&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -63940,7 +63973,7 @@
     mode&lt;/a&gt;.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;9.2.5.20 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inforeign&gt;&lt;span class=secno&gt;9.2.5.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in foreign content&quot;&gt;in foreign content&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inforeign title=&quot;insertion
   mode: in foreign content&quot;&gt;in foreign content&lt;/a&gt;&quot;, tokens must be
@@ -64134,7 +64167,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;9.2.5.21 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-afterbody&gt;&lt;span class=secno&gt;9.2.5.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after body&quot;&gt;after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterbody title=&quot;insertion
   mode: after body&quot;&gt;after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -64192,7 +64225,7 @@
 
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;9.2.5.22 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-inframeset&gt;&lt;span class=secno&gt;9.2.5.23 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: in frameset&quot;&gt;in frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-inframeset title=&quot;insertion
   mode: in frameset&quot;&gt;in frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -64285,7 +64318,7 @@
     &lt;p&gt;&lt;a href=#parse-error&gt;Parse error&lt;/a&gt;. Ignore the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;9.2.5.23 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=parsing-main-afterframeset&gt;&lt;span class=secno&gt;9.2.5.24 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after frameset&quot;&gt;after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-afterframeset title=&quot;insertion
   mode: after frameset&quot;&gt;after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -64345,7 +64378,7 @@
   harder.&lt;/p&gt;
 
 
-  &lt;h5 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.24 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;h5 id=the-after-after-body-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.25 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after body&quot;&gt;after after body&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-body-insertion-mode title=&quot;insertion
   mode: after after body&quot;&gt;after after body&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -64379,7 +64412,7 @@
     reprocess the token.&lt;/p&gt;
    &lt;/dd&gt;
 
-  &lt;/dl&gt;&lt;h5 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.25 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+  &lt;/dl&gt;&lt;h5 id=the-after-after-frameset-insertion-mode&gt;&lt;span class=secno&gt;9.2.5.26 &lt;/span&gt;The &quot;&lt;dfn title=&quot;insertion mode: after after frameset&quot;&gt;after after frameset&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#the-after-after-frameset-insertion-mode title=&quot;insertion
   mode: after after frameset&quot;&gt;after after frameset&lt;/a&gt;&quot;, tokens must be handled as follows:&lt;/p&gt;
@@ -64750,10 +64783,9 @@
   the elements &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; (in that order, despite the
   resulting DOM tree); the &lt;a href=#list-of-active-formatting-elements&gt;list of active formatting
-  elements&lt;/a&gt; just has the &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element in it; the
+  elements&lt;/a&gt; just has the &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element in it; and the
   &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in
-  table&quot;&gt;in table&lt;/a&gt;&quot;; and the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is
-  &lt;a href=#tainted&gt;tainted&lt;/a&gt;.&lt;/p&gt;
+  table&quot;&gt;in table&lt;/a&gt;&quot;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt; start tag causes the &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element
   to be popped off the stack and a &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; start tag to be
@@ -64768,9 +64800,8 @@
   elements &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;, and &lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;; the &lt;a href=#list-of-active-formatting-elements&gt;list of active
   formatting elements&lt;/a&gt; still has the &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element in
-  it; the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intr title=&quot;insertion mode:
-  in row&quot;&gt;in row&lt;/a&gt;&quot;; and the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is still
-  &lt;a href=#tainted&gt;tainted&lt;/a&gt;.&lt;/p&gt;
+  it; and the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intr title=&quot;insertion
+  mode: in row&quot;&gt;in row&lt;/a&gt;&quot;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt; element start tag token, after putting a
   &lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt; element on the tree, puts a marker on the &lt;a href=#list-of-active-formatting-elements&gt;list
@@ -64786,33 +64817,40 @@
   elements &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;,
   and &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;; the &lt;a href=#list-of-active-formatting-elements&gt;list of active formatting
   elements&lt;/a&gt; still has the &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element in it (the
-  marker having been removed by the &quot;td&quot; end tag token); the
+  marker having been removed by the &quot;td&quot; end tag token); and the
   &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in
-  table body&quot;&gt;in table body&lt;/a&gt;&quot;; and the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;
-  element is still &lt;a href=#tainted&gt;tainted&lt;/a&gt;.&lt;/p&gt;
+  table body&quot;&gt;in table body&lt;/a&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Thus it is that the &quot;bbb&quot; character tokens are found. When &lt;a href=#reconstruct-the-active-formatting-elements title=&quot;reconstruct the active formatting elements&quot;&gt;the active
-  formatting elements are reconstructed&lt;/a&gt;, a &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;
-  element is created and &lt;a href=#foster-parent title=&quot;foster parent&quot;&gt;foster
-  parented&lt;/a&gt;, and then the &quot;bbb&quot; text node is appended to it:&lt;/p&gt;
+  &lt;p&gt;Thus it is that the &quot;bbb&quot; character tokens are found. These
+  trigger the &quot;&lt;a href=#parsing-main-intabletext title=&quot;insertion mode: in table text&quot;&gt;in table
+  text&lt;/a&gt;&quot; insertion mode to be used (with the &lt;a href=#original-insertion-mode&gt;original
+  insertion mode&lt;/a&gt; set to &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion mode: in table
+  body&quot;&gt;in table body&lt;/a&gt;&quot;). The character tokens are collected,
+  and when the next token (the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element end tag) is
+  seen, they are processed as a group. Since they are not all spaces,
+  they are handled as per the &quot;anything else&quot; rules in the &quot;&lt;a href=#parsing-main-intable title=&quot;insertion mode: in table&quot;&gt;in table&lt;/a&gt;&quot; insertion mode,
+  which defer to the &quot;&lt;a href=#parsing-main-inbody title=&quot;insertion mode: in body&quot;&gt;in
+  body&lt;/a&gt;&quot; insertion mode but with &lt;a href=#foster-parent title=&quot;foster
+  parent&quot;&gt;foster parenting&lt;/a&gt;.&lt;/p&gt;
 
+  &lt;p&gt;When &lt;a href=#reconstruct-the-active-formatting-elements title=&quot;reconstruct the active formatting elements&quot;&gt;the
+  active formatting elements are reconstructed&lt;/a&gt;, a
+  &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element is created and &lt;a href=#foster-parent title=&quot;foster
+  parent&quot;&gt;foster parented&lt;/a&gt;, and then the &quot;bbb&quot; text node is
+  appended to it:&lt;/p&gt;
+
   &lt;ul class=domTree&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-head-element&gt;head&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;bbb&lt;/span&gt;&lt;/ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-tr-element&gt;tr&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t1&gt;&lt;code&gt;&lt;a href=#the-td-element&gt;td&lt;/a&gt;&lt;/code&gt;&lt;ul&gt;&lt;li class=t3&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;aaa&lt;/span&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p&gt;The &lt;a href=#stack-of-open-elements&gt;stack of open elements&lt;/a&gt; has on it the elements
   &lt;code&gt;&lt;a href=#the-html-element&gt;html&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-body-element&gt;body&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt;,
   &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt;, and the new &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; (again, note that
   this doesn't match the resulting tree!); the &lt;a href=#list-of-active-formatting-elements&gt;list of active
   formatting elements&lt;/a&gt; has the new &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element in it;
-  the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is still &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion
-  mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;; and the
-  &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; element is still &lt;a href=#tainted&gt;tainted&lt;/a&gt;.&lt;/p&gt;
+  and the &lt;a href=#insertion-mode&gt;insertion mode&lt;/a&gt; is still &quot;&lt;a href=#parsing-main-intbody title=&quot;insertion
+  mode: in table body&quot;&gt;in table body&lt;/a&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Had the character tokens been &lt;a href=#space-character title=&quot;space character&quot;&gt;space
-  characters&lt;/a&gt; instead of &quot;bbb&quot;, the result would have been the
-  same, but only because the table is &lt;a href=#tainted&gt;tainted&lt;/a&gt;. Had the
-  &lt;code&gt;&lt;a href=#the-b-element&gt;b&lt;/a&gt;&lt;/code&gt; element's start tag been before the
-  &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; instead of after, then the table wouldn't have
-  been &lt;a href=#tainted&gt;tainted&lt;/a&gt; and such &lt;a href=#space-character title=&quot;space
-  character&quot;&gt;space characters&lt;/a&gt; would just be appended to the
-  &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Had the character tokens been only &lt;a href=#space-character title=&quot;space
+  character&quot;&gt;space characters&lt;/a&gt; instead of &quot;bbb&quot;, then those
+  &lt;a href=#space-character title=&quot;space character&quot;&gt;space characters&lt;/a&gt; would just be
+  appended to the &lt;code&gt;&lt;a href=#the-tbody-element&gt;tbody&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;p&gt;Finally, the &lt;code&gt;&lt;a href=#the-table-element&gt;table&lt;/a&gt;&lt;/code&gt; is closed by a &quot;table&quot; end
   tag. This pops all the nodes from the &lt;a href=#stack-of-open-elements&gt;stack of open

Modified: source
===================================================================
--- source	2009-07-08 19:42:09 UTC (rev 3381)
+++ source	2009-07-10 00:35:42 UTC (rev 3382)
@@ -72671,6 +72671,7 @@
   title=&quot;insertion mode: in body&quot;&gt;in body&lt;/span&gt;&quot;, &quot;&lt;span
   title=&quot;insertion mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/span&gt;&quot;,
   &quot;&lt;span title=&quot;insertion mode: in table&quot;&gt;in table&lt;/span&gt;&quot;, &quot;&lt;span
+  title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot;, &quot;&lt;span
   title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/span&gt;&quot;, &quot;&lt;span
   title=&quot;insertion mode: in column group&quot;&gt;in column group&lt;/span&gt;&quot;,
   &quot;&lt;span title=&quot;insertion mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot;,
@@ -72692,8 +72693,7 @@
 
   &lt;p&gt;Seven of these modes, namely &quot;&lt;span title=&quot;insertion mode: in
   head&quot;&gt;in head&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in body&quot;&gt;in
-  body&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in CDATA/RCDATA&quot;&gt;in
-  CDATA/RCDATA&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in table&quot;&gt;in
+  body&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in table&quot;&gt;in
   table&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in table body&quot;&gt;in table
   body&lt;/span&gt;&quot;, &quot;&lt;span title=&quot;insertion mode: in row&quot;&gt;in row&lt;/span&gt;&quot;,
   &quot;&lt;span title=&quot;insertion mode: in cell&quot;&gt;in cell&lt;/span&gt;&quot;, and &quot;&lt;span
@@ -72709,10 +72709,10 @@
   to a new value.&lt;/p&gt;
 
   &lt;p&gt;When the insertion mode is switched to &quot;&lt;span title=&quot;insertion
-  mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/span&gt;&quot;, the &lt;dfn&gt;original
-  insertion mode&lt;/dfn&gt; is also set. This is the insertion mode to
-  which the tree construction stage will return when the corresponding
-  end tag is parsed.&lt;/p&gt;
+  mode: in CDATA/RCDATA&quot;&gt;in CDATA/RCDATA&lt;/span&gt;&quot; or &quot;&lt;span
+  title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot;, the
+  &lt;dfn&gt;original insertion mode&lt;/dfn&gt; is also set. This is the
+  insertion mode to which the tree construction stage will return.&lt;/p&gt;
 
   &lt;p&gt;When the insertion mode is switched to &quot;&lt;span title=&quot;insertion
   mode: in foreign content&quot;&gt;in foreign content&lt;/span&gt;&quot;, the
@@ -74782,7 +74782,10 @@
       &lt;td&gt;Three adjacent text nodes before the table, containing &quot;A&quot;, &quot;B&quot;, and &quot;CC&quot; respectively. (This is caused by &lt;span title=&quot;foster parent&quot;&gt;foster parenting&lt;/span&gt;.)
      &lt;tr&gt;
       &lt;td&gt;&lt;pre&gt;A&lt;table&gt;&lt;tr&gt;&nbsp;B&lt;/tr&gt;&nbsp;B&lt;/table&gt;&lt;/pre&gt;
-      &lt;td&gt;Two adjacent text nodes before the table, containing &quot;A&quot; and &quot;B&nbsp;B&quot; respectively, and one text node inside the table with a single space character. (This is caused by &lt;span title=&quot;foster parent&quot;&gt;foster parenting&lt;/span&gt; and &lt;span title=&quot;tainted&quot;&gt;tainting&lt;/span&gt;.)
+      &lt;td&gt;Two adjacent text nodes before the table, containing &quot;A&quot; and &quot;&nbsp;B&nbsp;B&quot; (space-B-space-B) respectively. (This is caused by &lt;span title=&quot;foster parent&quot;&gt;foster parenting&lt;/span&gt;.)
+     &lt;tr&gt;
+      &lt;td&gt;&lt;pre&gt;A&lt;table&gt;&lt;tr&gt;&nbsp;B&lt;/tr&gt;&nbsp;&lt;/em&gt;C&lt;/table&gt;&lt;/pre&gt;
+      &lt;td&gt;Three adjacent text nodes before the table, containing &quot;A&quot;, &quot;&nbsp;B&quot; (space-B), and &quot;C&quot; respectively, and one text node inside the table (as a child of a &lt;code&gt;tbody&lt;/code&gt;) with a single space character. (Space characters separated from non-space characters by non-character tokens are not affected by &lt;span title=&quot;foster parent&quot;&gt;foster parenting&lt;/span&gt;, even if those other tokens then get ignored.)
    &lt;/table&gt;
 
   &lt;/div&gt;
@@ -75039,12 +75042,7 @@
 
   &lt;p&gt;When a node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt; is to be &lt;dfn title=&quot;foster
   parent&quot;&gt;foster parented&lt;/dfn&gt;, the node &lt;var title=&quot;&quot;&gt;node&lt;/var&gt;
-  must be inserted into the &lt;i&gt;foster parent element&lt;/i&gt;, and the
-  &lt;span&gt;current table&lt;/span&gt; must be marked as
-  &lt;dfn&gt;tainted&lt;/dfn&gt;. (Once the &lt;span&gt;current table&lt;/span&gt; has been
-  &lt;span&gt;tainted&lt;/span&gt;, &lt;span title=&quot;space character&quot;&gt;space
-  characters&lt;/span&gt; are inserted into the &lt;i&gt;foster parent element&lt;/i&gt;
-  instead of the &lt;span&gt;current node&lt;/span&gt;.)&lt;/p&gt;
+  must be inserted into the &lt;i&gt;foster parent element&lt;/i&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn&gt;foster parent element&lt;/dfn&gt; is the parent element of the
   last &lt;code&gt;table&lt;/code&gt; element in the &lt;span&gt;stack of open
@@ -77245,17 +77243,19 @@
 
   &lt;dl class=&quot;switch&quot;&gt;
 
-   &lt;dt&gt;A character token that is one of U+0009 CHARACTER
-   TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED (FF),
-   &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE&lt;/dt&gt;
+   &lt;dt&gt;A character token&lt;/dt&gt;
    &lt;dd&gt;
 
-    &lt;p&gt;If the &lt;span&gt;current table&lt;/span&gt; is &lt;span&gt;tainted&lt;/span&gt;, then
-    act as described in the &quot;anything else&quot; entry below.&lt;/p&gt;
+     &lt;p&gt;Let the &lt;dfn&gt;&lt;var&gt;pending table character tokens&lt;/var&gt;&lt;/dfn&gt;
+     be an empty list of tokens.&lt;/p&gt;
 
-    &lt;p&gt;Otherwise, &lt;span title=&quot;insert a character&quot;&gt;insert the
-    character&lt;/span&gt; into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+     &lt;p&gt;Let the &lt;span&gt;original insertion mode&lt;/span&gt; be the current
+     &lt;span&gt;insertion mode&lt;/span&gt;.&lt;/p&gt;
 
+     &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to &quot;&lt;span
+     title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot; and
+     reprocess the token.&lt;/p&gt;
+
    &lt;/dd&gt;
 
    &lt;dt&gt;A comment token&lt;/dt&gt;
@@ -77430,6 +77430,47 @@
   case&lt;/span&gt;.&lt;/p&gt;
 
 
+
+  &lt;h5 id=&quot;parsing-main-intabletext&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in table text&quot;&gt;in table text&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
+
+  &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
+  mode: in table text&quot;&gt;in table text&lt;/span&gt;&quot;, tokens must be handled
+  as follows:&lt;/p&gt;
+
+  &lt;dl class=&quot;switch&quot;&gt;
+
+   &lt;dt&gt;A character token&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;Append the character token to the &lt;var&gt;pending table character
+    tokens&lt;/var&gt; list.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+
+   &lt;dt&gt;Anything else&lt;/dt&gt;
+   &lt;dd&gt;
+
+    &lt;p&gt;If any of the tokens in the &lt;var&gt;pending table character
+    tokens&lt;/var&gt; list are character tokens that are not one of U+0009
+    CHARACTER TABULATION, U+000A LINE FEED (LF), U+000C FORM FEED
+    (FF), &lt;!--U+000D CARRIAGE RETURN (CR),--&gt; or U+0020 SPACE, then
+    reprocess those character tokens using the rules given in the
+    &quot;anything else&quot; entry in the &lt;span title=&quot;insertion mode: in
+    table&quot;&gt;in table&lt;/span&gt;&quot; insertion mode.&lt;/p&gt;
+
+    &lt;p&gt;Otherwise, &lt;span title=&quot;insert a character&quot;&gt;insert the
+    characters&lt;/span&gt; given by the &lt;var&gt;pending table character
+    tokens&lt;/var&gt; list into the &lt;span&gt;current node&lt;/span&gt;.&lt;/p&gt;
+
+    &lt;p&gt;Switch the &lt;span&gt;insertion mode&lt;/span&gt; to the &lt;span&gt;original
+    insertion mode&lt;/span&gt; and reprocess the token.&lt;/p&gt;
+
+   &lt;/dd&gt;
+
+  &lt;/dl&gt;
+
+
   &lt;h5 id=&quot;parsing-main-incaption&quot;&gt;The &quot;&lt;dfn title=&quot;insertion mode: in caption&quot;&gt;in caption&lt;/dfn&gt;&quot; insertion mode&lt;/h5&gt;
 
   &lt;p&gt;When the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
@@ -78976,10 +79017,9 @@
   the elements &lt;code&gt;html&lt;/code&gt;, &lt;code&gt;body&lt;/code&gt;,
   &lt;code&gt;table&lt;/code&gt;, and &lt;code&gt;b&lt;/code&gt; (in that order, despite the
   resulting DOM tree); the &lt;span&gt;list of active formatting
-  elements&lt;/span&gt; just has the &lt;code&gt;b&lt;/code&gt; element in it; the
+  elements&lt;/span&gt; just has the &lt;code&gt;b&lt;/code&gt; element in it; and the
   &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion mode: in
-  table&quot;&gt;in table&lt;/span&gt;&quot;; and the &lt;code&gt;table&lt;/code&gt; element is
-  &lt;span&gt;tainted&lt;/span&gt;.&lt;/p&gt;
+  table&quot;&gt;in table&lt;/span&gt;&quot;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;tr&lt;/code&gt; start tag causes the &lt;code&gt;b&lt;/code&gt; element
   to be popped off the stack and a &lt;code&gt;tbody&lt;/code&gt; start tag to be
@@ -78996,9 +79036,8 @@
   elements &lt;code&gt;html&lt;/code&gt;, &lt;code&gt;body&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;,
   &lt;code&gt;tbody&lt;/code&gt;, and &lt;code&gt;tr&lt;/code&gt;; the &lt;span&gt;list of active
   formatting elements&lt;/span&gt; still has the &lt;code&gt;b&lt;/code&gt; element in
-  it; the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion mode:
-  in row&quot;&gt;in row&lt;/span&gt;&quot;; and the &lt;code&gt;table&lt;/code&gt; element is still
-  &lt;span&gt;tainted&lt;/span&gt;.&lt;/p&gt;
+  it; and the &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion
+  mode: in row&quot;&gt;in row&lt;/span&gt;&quot;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;code&gt;td&lt;/code&gt; element start tag token, after putting a
   &lt;code&gt;td&lt;/code&gt; element on the tree, puts a marker on the &lt;span&gt;list
@@ -79019,17 +79058,29 @@
   elements &lt;code&gt;html&lt;/code&gt;, &lt;code&gt;body&lt;/code&gt;, &lt;code&gt;table&lt;/code&gt;,
   and &lt;code&gt;tbody&lt;/code&gt;; the &lt;span&gt;list of active formatting
   elements&lt;/span&gt; still has the &lt;code&gt;b&lt;/code&gt; element in it (the
-  marker having been removed by the &quot;td&quot; end tag token); the
+  marker having been removed by the &quot;td&quot; end tag token); and the
   &lt;span&gt;insertion mode&lt;/span&gt; is &quot;&lt;span title=&quot;insertion mode: in
-  table body&quot;&gt;in table body&lt;/span&gt;&quot;; and the &lt;code&gt;table&lt;/code&gt;
-  element is still &lt;span&gt;tainted&lt;/span&gt;.&lt;/p&gt;
+  table body&quot;&gt;in table body&lt;/span&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Thus it is that the &quot;bbb&quot; character tokens are found. When &lt;span
-  title=&quot;reconstruct the active formatting elements&quot;&gt;the active
-  formatting elements are reconstructed&lt;/span&gt;, a &lt;code&gt;b&lt;/code&gt;
-  element is created and &lt;span title=&quot;foster parent&quot;&gt;foster
-  parented&lt;/span&gt;, and then the &quot;bbb&quot; text node is appended to it:&lt;/p&gt;
+  &lt;p&gt;Thus it is that the &quot;bbb&quot; character tokens are found. These
+  trigger the &quot;&lt;span title=&quot;insertion mode: in table text&quot;&gt;in table
+  text&lt;/span&gt;&quot; insertion mode to be used (with the &lt;span&gt;original
+  insertion mode&lt;/span&gt; set to &quot;&lt;span title=&quot;insertion mode: in table
+  body&quot;&gt;in table body&lt;/span&gt;&quot;). The character tokens are collected,
+  and when the next token (the &lt;code&gt;table&lt;/code&gt; element end tag) is
+  seen, they are processed as a group. Since they are not all spaces,
+  they are handled as per the &quot;anything else&quot; rules in the &quot;&lt;span
+  title=&quot;insertion mode: in table&quot;&gt;in table&lt;/span&gt;&quot; insertion mode,
+  which defer to the &quot;&lt;span title=&quot;insertion mode: in body&quot;&gt;in
+  body&lt;/span&gt;&quot; insertion mode but with &lt;span title=&quot;foster
+  parent&quot;&gt;foster parenting&lt;/span&gt;.&lt;/p&gt;
 
+  &lt;p&gt;When &lt;span title=&quot;reconstruct the active formatting elements&quot;&gt;the
+  active formatting elements are reconstructed&lt;/span&gt;, a
+  &lt;code&gt;b&lt;/code&gt; element is created and &lt;span title=&quot;foster
+  parent&quot;&gt;foster parented&lt;/span&gt;, and then the &quot;bbb&quot; text node is
+  appended to it:&lt;/p&gt;
+
   &lt;ul class=&quot;domTree&quot;&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;html&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;head&lt;/code&gt;&lt;/li&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;body&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;b&lt;/code&gt;&lt;/li&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;b&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t3&quot;&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;bbb&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;table&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;tbody&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;tr&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t1&quot;&gt;&lt;code&gt;td&lt;/code&gt;&lt;ul&gt;&lt;li class=&quot;t3&quot;&gt;&lt;code&gt;#text&lt;/code&gt;: &lt;span title=&quot;&quot;&gt;aaa&lt;/span&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;/ul&gt;
 
   &lt;p&gt;The &lt;span&gt;stack of open elements&lt;/span&gt; has on it the elements
@@ -79037,18 +79088,13 @@
   &lt;code&gt;tbody&lt;/code&gt;, and the new &lt;code&gt;b&lt;/code&gt; (again, note that
   this doesn't match the resulting tree!); the &lt;span&gt;list of active
   formatting elements&lt;/span&gt; has the new &lt;code&gt;b&lt;/code&gt; element in it;
-  the &lt;span&gt;insertion mode&lt;/span&gt; is still &quot;&lt;span title=&quot;insertion
-  mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot;; and the
-  &lt;code&gt;table&lt;/code&gt; element is still &lt;span&gt;tainted&lt;/span&gt;.&lt;/p&gt;
+  and the &lt;span&gt;insertion mode&lt;/span&gt; is still &quot;&lt;span title=&quot;insertion
+  mode: in table body&quot;&gt;in table body&lt;/span&gt;&quot;.&lt;/p&gt;
 
-  &lt;p&gt;Had the character tokens been &lt;span title=&quot;space character&quot;&gt;space
-  characters&lt;/span&gt; instead of &quot;bbb&quot;, the result would have been the
-  same, but only because the table is &lt;span&gt;tainted&lt;/span&gt;. Had the
-  &lt;code&gt;b&lt;/code&gt; element's start tag been before the
-  &lt;code&gt;table&lt;/code&gt; instead of after, then the table wouldn't have
-  been &lt;span&gt;tainted&lt;/span&gt; and such &lt;span title=&quot;space
-  character&quot;&gt;space characters&lt;/span&gt; would just be appended to the
-  &lt;code&gt;tbody&lt;/code&gt; element.&lt;/p&gt;
+  &lt;p&gt;Had the character tokens been only &lt;span title=&quot;space
+  character&quot;&gt;space characters&lt;/span&gt; instead of &quot;bbb&quot;, then those
+  &lt;span title=&quot;space character&quot;&gt;space characters&lt;/span&gt; would just be
+  appended to the &lt;code&gt;tbody&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;p&gt;Finally, the &lt;code&gt;table&lt;/code&gt; is closed by a &quot;table&quot; end
   tag. This pops all the nodes from the &lt;span&gt;stack of open


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010259.html">[html5] r3381 - [e] (0) Further tweak the new warnings section;	remove the specific mention of &lt; [...]
</A></li>
	<LI>Next message: <A HREF="010261.html">[html5] r3383 - [] (0) Define the task source for web workers.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10260">[ date ]</a>
              <a href="thread.html#10260">[ thread ]</a>
              <a href="subject.html#10260">[ subject ]</a>
              <a href="author.html#10260">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
