<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3891 - [] (0) Cleanup in Undo Manager section.
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3891%20-%20%5B%5D%20%280%29%20Cleanup%20in%20Undo%20Manager%20section.&In-Reply-To=%3C20090918074751.83AAD140A71%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="010763.html">
   <LINK REL="Next"  HREF="010765.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3891 - [] (0) Cleanup in Undo Manager section.</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3891%20-%20%5B%5D%20%280%29%20Cleanup%20in%20Undo%20Manager%20section.&In-Reply-To=%3C20090918074751.83AAD140A71%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3891 - [] (0) Cleanup in Undo Manager section.">whatwg at whatwg.org
       </A><BR>
    <I>Fri Sep 18 00:47:51 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="010763.html">[html5] r3890 - [e] (0) Clean up in drag and drop section.
</A></li>
        <LI>Next message: <A HREF="010765.html">[html5] r3892 - [e] (0) More cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10764">[ date ]</a>
              <a href="thread.html#10764">[ thread ]</a>
              <a href="subject.html#10764">[ subject ]</a>
              <a href="author.html#10764">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-09-18 00:47:50 -0700 (Fri, 18 Sep 2009)
New Revision: 3891

Modified:
   index
   source
Log:
[] (0) Cleanup in Undo Manager section.

Modified: index
===================================================================
--- index	2009-09-18 07:10:22 UTC (rev 3890)
+++ index	2009-09-18 07:47:50 UTC (rev 3891)
@@ -834,20 +834,19 @@
      &lt;li&gt;&lt;a href=#security-risks-in-the-drag-and-drop-model&gt;&lt;span class=secno&gt;7.9.7 &lt;/span&gt;Security risks in the drag-and-drop model&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#undo&gt;&lt;span class=secno&gt;7.10 &lt;/span&gt;Undo history&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-5&gt;&lt;span class=secno&gt;7.10.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#definitions-2&gt;&lt;span class=secno&gt;7.10.2 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-undomanager-interface&gt;&lt;span class=secno&gt;7.10.3 &lt;/span&gt;The &lt;code&gt;UndoManager&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#undo:-moving-back-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.4 &lt;/span&gt;Undo: moving back in the undo transaction history&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#redo:-moving-forward-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.5 &lt;/span&gt;Redo: moving forward in the undo transaction history&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#the-undomanagerevent-interface-and-the-undo-and-redo-events&gt;&lt;span class=secno&gt;7.10.6 &lt;/span&gt;The &lt;code&gt;UndoManagerEvent&lt;/code&gt; interface and the &lt;code title=event-undo&gt;undo&lt;/code&gt; and &lt;code title=event-redo&gt;redo&lt;/code&gt; events&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#implementation-notes&gt;&lt;span class=secno&gt;7.10.7 &lt;/span&gt;Implementation notes&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#definitions-2&gt;&lt;span class=secno&gt;7.10.1 &lt;/span&gt;Definitions&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-undomanager-interface&gt;&lt;span class=secno&gt;7.10.2 &lt;/span&gt;The &lt;code&gt;UndoManager&lt;/code&gt; interface&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#undo:-moving-back-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.3 &lt;/span&gt;Undo: moving back in the undo transaction history&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#redo:-moving-forward-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.4 &lt;/span&gt;Redo: moving forward in the undo transaction history&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#the-undomanagerevent-interface-and-the-undo-and-redo-events&gt;&lt;span class=secno&gt;7.10.5 &lt;/span&gt;The &lt;code&gt;UndoManagerEvent&lt;/code&gt; interface and the &lt;code title=event-undo&gt;undo&lt;/code&gt; and &lt;code title=event-redo&gt;redo&lt;/code&gt; events&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#implementation-notes&gt;&lt;span class=secno&gt;7.10.6 &lt;/span&gt;Implementation notes&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#editing-apis&gt;&lt;span class=secno&gt;7.11 &lt;/span&gt;Editing APIs&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#comms&gt;&lt;span class=secno&gt;8 &lt;/span&gt;Communication&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#event-definitions&gt;&lt;span class=secno&gt;8.1 &lt;/span&gt;Event definitions&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#crossDocumentMessages&gt;&lt;span class=secno&gt;8.2 &lt;/span&gt;Cross-document messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-5&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#security-4&gt;&lt;span class=secno&gt;8.2.2 &lt;/span&gt;Security&lt;/a&gt;
       &lt;ol&gt;
        &lt;li&gt;&lt;a href=#authors&gt;&lt;span class=secno&gt;8.2.2.1 &lt;/span&gt;Authors&lt;/a&gt;&lt;/li&gt;
@@ -856,7 +855,7 @@
      &lt;li&gt;&lt;a href=#posting-messages-with-message-ports&gt;&lt;span class=secno&gt;8.2.4 &lt;/span&gt;Posting messages with message ports&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#channel-messaging&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;Channel messaging&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-6&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#message-channels&gt;&lt;span class=secno&gt;8.3.2 &lt;/span&gt;Message channels&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#message-ports&gt;&lt;span class=secno&gt;8.3.3 &lt;/span&gt;Message ports&lt;/a&gt;
       &lt;ol&gt;
@@ -985,10 +984,10 @@
    &lt;li&gt;&lt;a href=#parsing-xhtml-fragments&gt;&lt;span class=secno&gt;10.4 &lt;/span&gt;Parsing XHTML fragments&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#rendering&gt;&lt;span class=secno&gt;11 &lt;/span&gt;Rendering&lt;/a&gt;
   &lt;ol&gt;
-   &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+   &lt;li&gt;&lt;a href=#introduction-7&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-8&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#display-types&gt;&lt;span class=secno&gt;11.2.2 &lt;/span&gt;Display types&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#margins-and-padding&gt;&lt;span class=secno&gt;11.2.3 &lt;/span&gt;Margins and padding&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#alignment&gt;&lt;span class=secno&gt;11.2.4 &lt;/span&gt;Alignment&lt;/a&gt;&lt;/li&gt;
@@ -1006,7 +1005,7 @@
      &lt;li&gt;&lt;a href=#tool-bars-0&gt;&lt;span class=secno&gt;11.3.5 &lt;/span&gt;Tool bars&lt;/a&gt;&lt;/ol&gt;&lt;/li&gt;
    &lt;li&gt;&lt;a href=#bindings&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Bindings&lt;/a&gt;
     &lt;ol&gt;
-     &lt;li&gt;&lt;a href=#introduction-10&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#introduction-9&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-button-element-0&gt;&lt;span class=secno&gt;11.4.2 &lt;/span&gt;The &lt;code&gt;button&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-details-element-0&gt;&lt;span class=secno&gt;11.4.3 &lt;/span&gt;The &lt;code&gt;details&lt;/code&gt; element&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#the-input-element-as-a-text-entry-widget&gt;&lt;span class=secno&gt;11.4.4 &lt;/span&gt;The &lt;code&gt;input&lt;/code&gt; element as a text entry widget&lt;/a&gt;&lt;/li&gt;
@@ -59194,23 +59193,15 @@
 
   &lt;h3 id=undo&gt;&lt;span class=secno&gt;7.10 &lt;/span&gt;&lt;dfn&gt;Undo history&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;p class=XXX&gt;There has got to be a better way of doing this, surely.&lt;/p&gt;
-
-
-  &lt;h4 id=introduction-5&gt;&lt;span class=secno&gt;7.10.1 &lt;/span&gt;Introduction&lt;/h4&gt;
-
-  &lt;p class=XXX&gt;...&lt;/p&gt;
-
-
   &lt;div class=impl&gt;
 
-  &lt;h4 id=definitions-2&gt;&lt;span class=secno&gt;7.10.2 &lt;/span&gt;Definitions&lt;/h4&gt;
+  &lt;h4 id=definitions-2&gt;&lt;span class=secno&gt;7.10.1 &lt;/span&gt;Definitions&lt;/h4&gt;
 
   &lt;p&gt;The user agent must associate an &lt;dfn id=undo-transaction-history&gt;undo transaction
   history&lt;/dfn&gt; with each &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#undo-transaction-history&gt;undo transaction history&lt;/a&gt; is a list of
-  entries. The entries are of two type: &lt;a href=#dom-changes&gt;DOM changes&lt;/a&gt; and
+  entries. The entries are of two types: &lt;a href=#dom-changes&gt;DOM changes&lt;/a&gt; and
   &lt;a href=#undo-object title=&quot;undo object&quot;&gt;undo objects&lt;/a&gt;.&lt;/p&gt;
 
   &lt;p&gt;Each &lt;dfn id=dom-changes&gt;DOM changes&lt;/dfn&gt; entry in the &lt;a href=#undo-transaction-history&gt;undo transaction
@@ -59220,14 +59211,13 @@
   &lt;ul&gt;&lt;li&gt;Changes to the content attributes of an &lt;code&gt;Element&lt;/code&gt;
    node.&lt;/li&gt;
 
-   &lt;li&gt;Changes to the IDL attributes of a &lt;code&gt;Node&lt;/code&gt;.&lt;/li&gt; &lt;!--
-   XXX uh, these change on their own, so clearly this isn't going to
-   fly. Which IDL attributes, exactly? --&gt;
-
    &lt;li&gt;Changes to the DOM hierarchy of nodes that are descendants of
    the &lt;code&gt;&lt;a href=#htmldocument&gt;HTMLDocument&lt;/a&gt;&lt;/code&gt; object (&lt;code&gt;parentNode&lt;/code&gt;,
    &lt;code&gt;childNodes&lt;/code&gt;).&lt;/li&gt;
 
+   &lt;li&gt;Changes to internal state, such as a form control's &lt;a href=#concept-fe-value title=concept-fe-value&gt;value&lt;/a&gt; or &lt;a href=#concept-input-checked-dirty-flag title=concept-input-checked-dirty-flag&gt;dirty checkedness
+   flag&lt;/a&gt;.&lt;/li&gt;
+
   &lt;/ul&gt;&lt;p&gt;&lt;dfn id=undo-object&gt;Undo object&lt;/dfn&gt; entries consist of objects representing
   state that scripts running in the document are managing. For
   example, a Web mail application could use an &lt;a href=#undo-object&gt;undo
@@ -59245,34 +59235,8 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=the-undomanager-interface&gt;&lt;span class=secno&gt;7.10.3 &lt;/span&gt;The &lt;code&gt;&lt;a href=#undomanager&gt;UndoManager&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
+  &lt;h4 id=the-undomanager-interface&gt;&lt;span class=secno&gt;7.10.2 &lt;/span&gt;The &lt;code&gt;&lt;a href=#undomanager&gt;UndoManager&lt;/a&gt;&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;div class=impl&gt;
-
-  &lt;div class=XXX&gt;
-
-   &lt;p&gt;This API sucks. Seriously. It's a terrible API. Really bad. I
-   hate it. Here are the requirements:&lt;/p&gt;
-
-   &lt;ul&gt;&lt;li&gt;Has to cope with cases where the server has undo state already
-    when the page is loaded, that can be stuffed into the undo buffer
-    onload.&lt;/li&gt;
-
-    &lt;li&gt;Has to support undo/redo.&lt;/li&gt;
-
-    &lt;li&gt;Has to cope with the &quot;undo&quot; action being &quot;contact the server
-    and tell it to undo&quot;, rather than it being the opposite of the
-    &quot;redo&quot; action.&lt;/li&gt;
-
-    &lt;li&gt;Has to cope with some undo states expiring from the undo
-    history (e.g. server can only remember one undelete action) but
-    other states not expiring (e.g. client can undo arbitrary amounts
-    of local edits).&lt;/li&gt;
-
-   &lt;/ul&gt;&lt;/div&gt;
-
-  &lt;/div&gt;
-
   &lt;p&gt;To manage &lt;a href=#undo-object&gt;undo object&lt;/a&gt; entries in the &lt;a href=#undo-transaction-history&gt;undo
   transaction history&lt;/a&gt;, the &lt;code&gt;&lt;a href=#undomanager&gt;UndoManager&lt;/a&gt;&lt;/code&gt;
   interface can be used:&lt;/p&gt;
@@ -59373,7 +59337,7 @@
   case there are no &lt;span&gt;supported indexed properties&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-undomanager-item title=dom-UndoManager-item&gt;&lt;code&gt;item(&lt;var title=&quot;&quot;&gt;n&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var title=&quot;&quot;&gt;n&lt;/var&gt;th &lt;a href=#undo-object&gt;undo object&lt;/a&gt; entry in the &lt;a href=#undo-transaction-history&gt;undo
-  transaction history&lt;/a&gt;.&lt;/p&gt; &lt;!-- XXX out of range handling? --&gt;
+  transaction history&lt;/a&gt;, if there is one, or null otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;a href=#undo-transaction-history&gt;undo transaction history&lt;/a&gt; has a &lt;dfn id=undo-position title=&quot;undo
   position&quot;&gt;current position&lt;/dfn&gt;. This is the position between two
@@ -59415,15 +59379,6 @@
   position&lt;/a&gt; must be removed (as if &lt;code title=dom-UndoManager-clearRedo&gt;&lt;a href=#dom-undomanager-clearredo&gt;clearRedo()&lt;/a&gt;&lt;/code&gt; had been
   called).&lt;/p&gt;
 
-  &lt;p class=XXX&gt;We could fire events when someone adds
-  something to the undo history -- one event per undo object entry
-  before the position (or after, during redo addition), allowing the
-  script to decide if that entry should remain or not. Or
-  something. Would make it potentially easier to expire server-held
-  state when the server limitations come into play.&lt;/p&gt;
-
-  &lt;!-- XXX note on expiring undo in case server can only do one level undo --&gt;
-
   &lt;p&gt;The &lt;dfn id=dom-undomanager-remove title=dom-UndoManager-remove&gt;&lt;code&gt;remove(&lt;var title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must remove the &lt;a href=#undo-object&gt;undo
   object&lt;/a&gt; entry with the specified &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;. If
   the index is less than zero or greater than or equal to &lt;code title=dom-UndoManager-length&gt;&lt;a href=#dom-undomanager-length&gt;length&lt;/a&gt;&lt;/code&gt; then the method must
@@ -59442,16 +59397,12 @@
   &lt;a href=#dom-changes&gt;DOM changes&lt;/a&gt; entries or &lt;a href=#undo-object&gt;undo object&lt;/a&gt;
   entries.&lt;/p&gt;
 
-  &lt;p class=XXX&gt;Another idea is to have a way for scripts to
-  say &quot;startBatchingDOMChangesForUndo()&quot; and after that the changes to
-  the DOM go in as if the user had done them.&lt;/p&gt;
-
   &lt;/div&gt;
 
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=undo:-moving-back-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.4 &lt;/span&gt;&lt;dfn title=do-undo&gt;Undo: moving back in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=undo:-moving-back-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.3 &lt;/span&gt;&lt;dfn title=do-undo&gt;Undo: moving back in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user invokes an undo operation, or when the &lt;code title=dom-document-execCommand&gt;&lt;a href=#execCommand&gt;execCommand()&lt;/a&gt;&lt;/code&gt; method is
   called with the &lt;code title=command-undo&gt;&lt;a href=#command-undo&gt;undo&lt;/a&gt;&lt;/code&gt; command, the
@@ -59488,7 +59439,7 @@
   command to undo his undo.&lt;/p&gt;
 
 
-  &lt;h4 id=redo:-moving-forward-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.5 &lt;/span&gt;&lt;dfn title=do-redo&gt;Redo: moving forward in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
+  &lt;h4 id=redo:-moving-forward-in-the-undo-transaction-history&gt;&lt;span class=secno&gt;7.10.4 &lt;/span&gt;&lt;dfn title=do-redo&gt;Redo: moving forward in the undo transaction history&lt;/dfn&gt;&lt;/h4&gt;
 
   &lt;p&gt;When the user invokes a redo operation, or when the &lt;code title=dom-document-execCommand&gt;&lt;a href=#execCommand&gt;execCommand()&lt;/a&gt;&lt;/code&gt; method is
   called with the &lt;code title=command-redo&gt;&lt;a href=#command-redo&gt;redo&lt;/a&gt;&lt;/code&gt; command, the
@@ -59525,7 +59476,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=the-undomanagerevent-interface-and-the-undo-and-redo-events&gt;&lt;span class=secno&gt;7.10.6 &lt;/span&gt;The &lt;code&gt;&lt;a href=#undomanagerevent&gt;UndoManagerEvent&lt;/a&gt;&lt;/code&gt; interface and the &lt;code title=event-undo&gt;&lt;a href=#event-undo&gt;undo&lt;/a&gt;&lt;/code&gt; and &lt;code title=event-redo&gt;&lt;a href=#event-redo&gt;redo&lt;/a&gt;&lt;/code&gt; events&lt;/h4&gt;
+  &lt;h4 id=the-undomanagerevent-interface-and-the-undo-and-redo-events&gt;&lt;span class=secno&gt;7.10.5 &lt;/span&gt;The &lt;code&gt;&lt;a href=#undomanagerevent&gt;UndoManagerEvent&lt;/a&gt;&lt;/code&gt; interface and the &lt;code title=event-undo&gt;&lt;a href=#event-undo&gt;undo&lt;/a&gt;&lt;/code&gt; and &lt;code title=event-redo&gt;&lt;a href=#event-redo&gt;redo&lt;/a&gt;&lt;/code&gt; events&lt;/h4&gt;
 
   &lt;pre class=idl&gt;interface &lt;dfn id=undomanagerevent&gt;UndoManagerEvent&lt;/dfn&gt; : Event {
   readonly attribute any &lt;a href=#dom-undomanagerevent-data title=dom-UndoManagerEvent-data&gt;data&lt;/a&gt;;
@@ -59562,7 +59513,7 @@
 
   &lt;div class=impl&gt;
 
-  &lt;h4 id=implementation-notes&gt;&lt;span class=secno&gt;7.10.7 &lt;/span&gt;Implementation notes&lt;/h4&gt;
+  &lt;h4 id=implementation-notes&gt;&lt;span class=secno&gt;7.10.6 &lt;/span&gt;Implementation notes&lt;/h4&gt;
 
   &lt;p&gt;How user agents present the above conceptual model to the user is
   not defined. The undo interface could be a filtered view of the
@@ -60175,7 +60126,7 @@
   &lt;/div&gt;
 
 
-  &lt;h4 id=introduction-6&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-5&gt;&lt;span class=secno&gt;8.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -60481,7 +60432,7 @@
 
   &lt;h3 id=channel-messaging&gt;&lt;span class=secno&gt;8.3 &lt;/span&gt;&lt;dfn&gt;Channel messaging&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;h4 id=introduction-7&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-6&gt;&lt;span class=secno&gt;8.3.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;&lt;i&gt;This section is non-normative.&lt;/i&gt;&lt;/p&gt;
 
@@ -71116,7 +71067,7 @@
   lead to this experience.&lt;/i&gt;&lt;/p&gt;
 
 
-  &lt;h3 id=introduction-8&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/h3&gt;
+  &lt;h3 id=introduction-7&gt;&lt;span class=secno&gt;11.1 &lt;/span&gt;Introduction&lt;/h3&gt;
 
   &lt;p&gt;In general, user agents are expected to support CSS, and many of
   the suggestions in this section are expressed in CSS terms. User
@@ -71154,7 +71105,7 @@
 
   &lt;h3 id=the-css-user-agent-style-sheet-and-presentational-hints&gt;&lt;span class=secno&gt;11.2 &lt;/span&gt;The CSS user agent style sheet and presentational hints&lt;/h3&gt;
 
-  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-8&gt;&lt;span class=secno&gt;11.2.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;The CSS rules given in these subsections are, unless otherwise
   specified, expected to be used as part of the user-agent level style
@@ -72326,7 +72277,7 @@
 
   &lt;h3 id=bindings&gt;&lt;span class=secno&gt;11.4 &lt;/span&gt;Bindings&lt;/h3&gt;
 
-  &lt;h4 id=introduction-10&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
+  &lt;h4 id=introduction-9&gt;&lt;span class=secno&gt;11.4.1 &lt;/span&gt;Introduction&lt;/h4&gt;
 
   &lt;p&gt;A number of elements have their rendering defined in terms of the
   'binding' property. &lt;a href=#refsBECSS&gt;[BECSS]&lt;/a&gt;&lt;/p&gt;

Modified: source
===================================================================
--- source	2009-09-18 07:10:22 UTC (rev 3890)
+++ source	2009-09-18 07:47:50 UTC (rev 3891)
@@ -69050,14 +69050,6 @@
 
   &lt;h3 id=&quot;undo&quot;&gt;&lt;dfn&gt;Undo history&lt;/dfn&gt;&lt;/h3&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;There has got to be a better way of doing this, surely.&lt;/p&gt;
-
-
-  &lt;h4&gt;Introduction&lt;/h4&gt;
-
-  &lt;p class=&quot;XXX&quot;&gt;...&lt;/p&gt;
-
-
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;h4&gt;Definitions&lt;/h4&gt;
@@ -69066,7 +69058,7 @@
   history&lt;/dfn&gt; with each &lt;code&gt;HTMLDocument&lt;/code&gt; object.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span&gt;undo transaction history&lt;/span&gt; is a list of
-  entries. The entries are of two type: &lt;span&gt;DOM changes&lt;/span&gt; and
+  entries. The entries are of two types: &lt;span&gt;DOM changes&lt;/span&gt; and
   &lt;span title=&quot;undo object&quot;&gt;undo objects&lt;/span&gt;.&lt;/p&gt;
 
   &lt;p&gt;Each &lt;dfn&gt;DOM changes&lt;/dfn&gt; entry in the &lt;span&gt;undo transaction
@@ -69078,14 +69070,15 @@
    &lt;li&gt;Changes to the content attributes of an &lt;code&gt;Element&lt;/code&gt;
    node.&lt;/li&gt;
 
-   &lt;li&gt;Changes to the IDL attributes of a &lt;code&gt;Node&lt;/code&gt;.&lt;/li&gt; &lt;!--
-   XXX uh, these change on their own, so clearly this isn't going to
-   fly. Which IDL attributes, exactly? --&gt;
-
    &lt;li&gt;Changes to the DOM hierarchy of nodes that are descendants of
    the &lt;code&gt;HTMLDocument&lt;/code&gt; object (&lt;code&gt;parentNode&lt;/code&gt;,
    &lt;code&gt;childNodes&lt;/code&gt;).&lt;/li&gt;
 
+   &lt;li&gt;Changes to internal state, such as a form control's &lt;span
+   title=&quot;concept-fe-value&quot;&gt;value&lt;/span&gt; or &lt;span
+   title=&quot;concept-input-checked-dirty-flag&quot;&gt;dirty checkedness
+   flag&lt;/span&gt;.&lt;/li&gt;
+
   &lt;/ul&gt;
 
   &lt;p&gt;&lt;dfn&gt;Undo object&lt;/dfn&gt; entries consist of objects representing
@@ -69107,36 +69100,6 @@
 
   &lt;h4&gt;The &lt;code&gt;UndoManager&lt;/code&gt; interface&lt;/h4&gt;
 
-  &lt;div class=&quot;impl&quot;&gt;
-
-  &lt;div class=&quot;XXX&quot;&gt;
-
-   &lt;p&gt;This API sucks. Seriously. It's a terrible API. Really bad. I
-   hate it. Here are the requirements:&lt;/p&gt;
-
-   &lt;ul&gt;
-
-    &lt;li&gt;Has to cope with cases where the server has undo state already
-    when the page is loaded, that can be stuffed into the undo buffer
-    onload.&lt;/li&gt;
-
-    &lt;li&gt;Has to support undo/redo.&lt;/li&gt;
-
-    &lt;li&gt;Has to cope with the &quot;undo&quot; action being &quot;contact the server
-    and tell it to undo&quot;, rather than it being the opposite of the
-    &quot;redo&quot; action.&lt;/li&gt;
-
-    &lt;li&gt;Has to cope with some undo states expiring from the undo
-    history (e.g. server can only remember one undelete action) but
-    other states not expiring (e.g. client can undo arbitrary amounts
-    of local edits).&lt;/li&gt;
-
-   &lt;/ul&gt;
-
-  &lt;/div&gt;
-
-  &lt;/div&gt;
-
   &lt;p&gt;To manage &lt;span&gt;undo object&lt;/span&gt; entries in the &lt;span&gt;undo
   transaction history&lt;/span&gt;, the &lt;code&gt;UndoManager&lt;/code&gt;
   interface can be used:&lt;/p&gt;
@@ -69245,7 +69208,7 @@
   &lt;p&gt;The &lt;dfn title=&quot;dom-UndoManager-item&quot;&gt;&lt;code&gt;item(&lt;var
   title=&quot;&quot;&gt;n&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must return the &lt;var
   title=&quot;&quot;&gt;n&lt;/var&gt;th &lt;span&gt;undo object&lt;/span&gt; entry in the &lt;span&gt;undo
-  transaction history&lt;/span&gt;.&lt;/p&gt; &lt;!-- XXX out of range handling? --&gt;
+  transaction history&lt;/span&gt;, if there is one, or null otherwise.&lt;/p&gt;
 
   &lt;p&gt;The &lt;span&gt;undo transaction history&lt;/span&gt; has a &lt;dfn title=&quot;undo
   position&quot;&gt;current position&lt;/dfn&gt;. This is the position between two
@@ -69295,15 +69258,6 @@
   title=&quot;dom-UndoManager-clearRedo&quot;&gt;clearRedo()&lt;/code&gt; had been
   called).&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;We could fire events when someone adds
-  something to the undo history -- one event per undo object entry
-  before the position (or after, during redo addition), allowing the
-  script to decide if that entry should remain or not. Or
-  something. Would make it potentially easier to expire server-held
-  state when the server limitations come into play.&lt;/p&gt;
-
-  &lt;!-- XXX note on expiring undo in case server can only do one level undo --&gt;
-
   &lt;p&gt;The &lt;dfn title=&quot;dom-UndoManager-remove&quot;&gt;&lt;code&gt;remove(&lt;var
   title=&quot;&quot;&gt;index&lt;/var&gt;)&lt;/code&gt;&lt;/dfn&gt; method must remove the &lt;span&gt;undo
   object&lt;/span&gt; entry with the specified &lt;var title=&quot;&quot;&gt;index&lt;/var&gt;. If
@@ -69326,10 +69280,6 @@
   &lt;span&gt;DOM changes&lt;/span&gt; entries or &lt;span&gt;undo object&lt;/span&gt;
   entries.&lt;/p&gt;
 
-  &lt;p class=&quot;XXX&quot;&gt;Another idea is to have a way for scripts to
-  say &quot;startBatchingDOMChangesForUndo()&quot; and after that the changes to
-  the DOM go in as if the user had done them.&lt;/p&gt;
-
   &lt;/div&gt;
 
 


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="010763.html">[html5] r3890 - [e] (0) Clean up in drag and drop section.
</A></li>
	<LI>Next message: <A HREF="010765.html">[html5] r3892 - [e] (0) More cleanup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#10764">[ date ]</a>
              <a href="thread.html#10764">[ thread ]</a>
              <a href="subject.html#10764">[ subject ]</a>
              <a href="author.html#10764">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
