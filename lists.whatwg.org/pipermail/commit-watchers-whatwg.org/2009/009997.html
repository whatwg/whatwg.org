<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [html5] r3116 - [act] (0) How to extract an Atom feed from an HTML5	document
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3116%20-%20%5Bact%5D%20%280%29%20How%20to%20extract%20an%20Atom%20feed%20from%20an%20HTML5%0A%09document&In-Reply-To=%3C20090522055518.A55301389F2%40hixie.dreamhostps.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="009996.html">
   <LINK REL="Next"  HREF="009998.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[html5] r3116 - [act] (0) How to extract an Atom feed from an HTML5	document</H1>
<!--htdig_noindex-->
    <B>whatwg at whatwg.org</B> 
    <A HREF="mailto:commit-watchers%40lists.whatwg.org?Subject=Re%3A%20%5Bhtml5%5D%20r3116%20-%20%5Bact%5D%20%280%29%20How%20to%20extract%20an%20Atom%20feed%20from%20an%20HTML5%0A%09document&In-Reply-To=%3C20090522055518.A55301389F2%40hixie.dreamhostps.com%3E"
       TITLE="[html5] r3116 - [act] (0) How to extract an Atom feed from an HTML5	document">whatwg at whatwg.org
       </A><BR>
    <I>Thu May 21 22:55:18 PDT 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="009996.html">[html5] r3115 - [giw] (2) Fix how drag and drop exports data.
</A></li>
        <LI>Next message: <A HREF="009998.html">[html5] r3117 - [e] (0) Fix up some Workers examples;	remove extraneous &lt;link rel=alternate&gt; ste [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9997">[ date ]</a>
              <a href="thread.html#9997">[ thread ]</a>
              <a href="subject.html#9997">[ subject ]</a>
              <a href="author.html#9997">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Author: ianh
Date: 2009-05-21 22:55:17 -0700 (Thu, 21 May 2009)
New Revision: 3116

Modified:
   index
   source
Log:
[act] (0) How to extract an Atom feed from an HTML5 document

Modified: index
===================================================================
--- index	2009-05-19 01:11:49 UTC (rev 3115)
+++ index	2009-05-22 05:55:17 UTC (rev 3116)
@@ -39,7 +39,7 @@
   &lt;div class=head&gt;
    &lt;p&gt;&lt;a class=logo href=<A HREF="http://www.whatwg.org/">http://www.whatwg.org/</A> rel=home&gt;&lt;img alt=WHATWG src=/images/logo&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;h1&gt;HTML 5&lt;/h1&gt;
-   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 19 May 2009&lt;/h2&gt;
+   &lt;h2 class=&quot;no-num no-toc&quot; id=draft-recommendation-&mdash;-date:-01-jan-1901&gt;Draft Recommendation &mdash; 22 May 2009&lt;/h2&gt;
    &lt;p&gt;You can take part in this work. &lt;a href=<A HREF="http://www.whatwg.org/mailing-list">http://www.whatwg.org/mailing-list</A>&gt;Join the working group's discussion list.&lt;/a&gt;&lt;/p&gt;
    &lt;p&gt;&lt;strong&gt;Web designers!&lt;/strong&gt; We have a &lt;a href=<A HREF="http://blog.whatwg.org/faq/">http://blog.whatwg.org/faq/</A>&gt;FAQ&lt;/a&gt;, a &lt;a href=<A HREF="http://forums.whatwg.org/">http://forums.whatwg.org/</A>&gt;forum&lt;/a&gt;, and a &lt;a href=<A HREF="http://www.whatwg.org/mailing-list#help">http://www.whatwg.org/mailing-list#help</A>&gt;help mailing list&lt;/a&gt; for you!&lt;/p&gt;
    &lt;dl&gt;&lt;dt&gt;Multiple-page version:&lt;/dt&gt;
@@ -697,7 +697,8 @@
      &lt;li&gt;&lt;a href=#rdf-0&gt;&lt;span class=secno&gt;5.5.2 &lt;/span&gt;RDF&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#vcard-0&gt;&lt;span class=secno&gt;5.5.3 &lt;/span&gt;vCard&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=#icalendar&gt;&lt;span class=secno&gt;5.5.4 &lt;/span&gt;iCalendar&lt;/a&gt;&lt;/li&gt;
-     &lt;li&gt;&lt;a href=#bibtex-0&gt;&lt;span class=secno&gt;5.5.5 &lt;/span&gt;BibTeX&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#bibtex-0&gt;&lt;span class=secno&gt;5.5.5 &lt;/span&gt;BibTeX&lt;/a&gt;&lt;/li&gt;
+     &lt;li&gt;&lt;a href=#atom&gt;&lt;span class=secno&gt;5.5.6 &lt;/span&gt;Atom&lt;/a&gt;&lt;/ol&gt;&lt;/ol&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=#browsers&gt;&lt;span class=secno&gt;6 &lt;/span&gt;Web browsers&lt;/a&gt;
   &lt;ol&gt;
    &lt;li&gt;&lt;a href=#windows&gt;&lt;span class=secno&gt;6.1 &lt;/span&gt;Browsing contexts&lt;/a&gt;
@@ -12523,11 +12524,12 @@
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;a href=#global-attributes&gt;Global attributes&lt;/a&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=attr-article-cite&gt;&lt;a href=#attr-article-cite&gt;cite&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
-   &lt;!-- v2 attributes to give the date authored, date published, name of author, etc --&gt;
+   &lt;dd&gt;&lt;code title=attr-article-pubdate&gt;&lt;a href=#attr-article-pubdate&gt;pubdate&lt;/a&gt;&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;DOM interface:&lt;/dt&gt;
    &lt;dd&gt;
 &lt;pre class=idl&gt;interface &lt;dfn id=htmlarticleelement&gt;HTMLArticleElement&lt;/dfn&gt; : &lt;a href=#htmlelement&gt;HTMLElement&lt;/a&gt; {
            attribute DOMString &lt;a href=#dom-article-cite title=dom-article-cite&gt;cite&lt;/a&gt;;
+           attribute DOMString &lt;a href=#dom-article-pubdate title=dom-article-pubDate&gt;pubDate&lt;/a&gt;;
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;&lt;p&gt;The &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; element &lt;a href=#represents&gt;represents&lt;/a&gt; a
@@ -12565,10 +12567,16 @@
   element. User agents should allow users to follow such citation
   links.&lt;/span&gt;&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn id=attr-article-pubdate title=attr-article-pubdate&gt;&lt;code&gt;pubdate&lt;/code&gt;&lt;/dfn&gt;
+  attribute may be used to specify the time and date that the article
+  was first published. If present, the &lt;code title=attr-article-pubdate&gt;&lt;a href=#attr-article-pubdate&gt;pubdate&lt;/a&gt;&lt;/code&gt; attribute must be a
+  &lt;a href=#valid-global-date-and-time-string&gt;valid global date and time string&lt;/a&gt; value.&lt;/p&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;The &lt;dfn id=dom-article-cite title=dom-article-cite&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/dfn&gt; DOM
-  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the element's &lt;code title=attr-article-cite&gt;&lt;a href=#attr-article-cite&gt;cite&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
+  attribute must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the element's &lt;code title=attr-article-cite&gt;&lt;a href=#attr-article-cite&gt;cite&lt;/a&gt;&lt;/code&gt; content attribute. The &lt;dfn id=dom-article-pubdate title=dom-article-pubDate&gt;&lt;code&gt;pubDate&lt;/code&gt;&lt;/dfn&gt; DOM attribute
+  must &lt;a href=#reflect&gt;reflect&lt;/a&gt; the element's &lt;code title=attr-article-pubdate&gt;&lt;a href=#attr-article-pubdate&gt;pubdate&lt;/a&gt;&lt;/code&gt; content attribute.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -25810,10 +25818,10 @@
 
   &lt;p&gt;The &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; element also suports the complement of
   &lt;a href=#url-decomposition-attributes&gt;URL decomposition attributes&lt;/a&gt;, &lt;dfn id=dom-area-protocol title=dom-area-protocol&gt;&lt;code&gt;protocol&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-host title=dom-area-host&gt;&lt;code&gt;host&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-port title=dom-area-port&gt;&lt;code&gt;port&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-hostname title=dom-area-hostname&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-pathname title=dom-area-pathname&gt;&lt;code&gt;pathname&lt;/code&gt;&lt;/dfn&gt;, &lt;dfn id=dom-area-search title=dom-area-search&gt;&lt;code&gt;search&lt;/code&gt;&lt;/dfn&gt;, and &lt;dfn id=dom-area-hash title=dom-area-hash&gt;&lt;code&gt;hash&lt;/code&gt;&lt;/dfn&gt;. These must follow the
-  rules given for URL decomposition attributes, with the &lt;a href=#concept-uda-input title=concept-uda-input&gt;input&lt;/a&gt; being the result of &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the element's &lt;code title=attr-area-href&gt;href&lt;/code&gt; attribute relative to the
+  rules given for URL decomposition attributes, with the &lt;a href=#concept-uda-input title=concept-uda-input&gt;input&lt;/a&gt; being the result of &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the element's &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute relative to the
   element, if there is such an attribute and resolving it is
   successful, or the empty string otherwise; and the &lt;a href=#concept-uda-setter title=concept-uda-setter&gt;common setter action&lt;/a&gt; being the
-  same as setting the element's &lt;code title=attr-area-href&gt;href&lt;/code&gt; attribute to the new output
+  same as setting the element's &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute to the new output
   value.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -25841,9 +25849,9 @@
   &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element representing an image, may be associated
   with an image map (in the form of a &lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt; element) by
   specifying a &lt;dfn id=attr-hyperlink-usemap title=attr-hyperlink-usemap&gt;&lt;code&gt;usemap&lt;/code&gt;&lt;/dfn&gt; attribute on
-  the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element. The &lt;code title=attr-area-usemap&gt;usemap&lt;/code&gt; attribute, if specified, must
-  be a &lt;a href=#valid-hash-name-reference&gt;valid hash-name reference&lt;/a&gt; to a &lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt;
-  element.&lt;/p&gt;
+  the &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element. The &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute, if specified,
+  must be a &lt;a href=#valid-hash-name-reference&gt;valid hash-name reference&lt;/a&gt; to a
+  &lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;div class=example&gt;
 
@@ -25875,8 +25883,8 @@
   &lt;h5 id=processing-model&gt;&lt;span class=secno&gt;4.8.14.2 &lt;/span&gt;Processing model&lt;/h5&gt;
 
   &lt;p&gt;If an &lt;code&gt;&lt;a href=#the-img-element&gt;img&lt;/a&gt;&lt;/code&gt; element or an &lt;code&gt;&lt;a href=#the-object-element&gt;object&lt;/a&gt;&lt;/code&gt; element
-  representing an image has a &lt;code title=attr-area-usemap&gt;usemap&lt;/code&gt; attribute specified, user
-  agents must process it as follows:&lt;/p&gt;
+  representing an image has a &lt;code title=attr-hyperlink-usemap&gt;&lt;a href=#attr-hyperlink-usemap&gt;usemap&lt;/a&gt;&lt;/code&gt; attribute specified,
+  user agents must process it as follows:&lt;/p&gt;
 
   &lt;ol&gt;&lt;li&gt;&lt;p&gt;First, &lt;a href=#rules-for-parsing-a-hash-name-reference&gt;rules for parsing a hash-name reference&lt;/a&gt;
    to a &lt;code&gt;&lt;a href=#the-map-element&gt;map&lt;/a&gt;&lt;/code&gt; element must be followed. This will return
@@ -44118,7 +44126,7 @@
 
       &lt;p&gt;If the element is, or is a descendant of, an
       &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#applyToSection&gt;applies&lt;/a&gt; to &lt;a href=#the-body-element-0&gt;the
-      &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;, an the &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; has the type &lt;code title=md-vcard&gt;&lt;a href=#md-vcard&gt;vcard&lt;/a&gt;&lt;/code&gt;, generate the following
+      &lt;code&gt;body&lt;/code&gt; element&lt;/a&gt;, and the &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; has the type &lt;code title=md-vcard&gt;&lt;a href=#md-vcard&gt;vcard&lt;/a&gt;&lt;/code&gt;, generate the following
       triple:&lt;/p&gt;
 
       &lt;dl class=triple&gt;&lt;dt&gt;subject   &lt;dd&gt; &lt;a href=&quot;#the-document's-current-address&quot;&gt;the document's current address&lt;/a&gt;
@@ -44996,8 +45004,451 @@
 
    &lt;li&gt;&lt;p&gt;Append aU+007D RIGHT CURLY BRACKET character (}) to &lt;var title=&quot;&quot;&gt;output&lt;/var&gt;.&lt;/li&gt;
 
-  &lt;/ol&gt;&lt;h2 id=browsers&gt;&lt;span class=secno&gt;6 &lt;/span&gt;Web browsers&lt;/h2&gt;
+  &lt;/ol&gt;&lt;h4 id=atom&gt;&lt;span class=secno&gt;5.5.6 &lt;/span&gt;Atom&lt;/h4&gt;
 
+  &lt;p&gt;Given a &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;source&lt;/var&gt;, a user
+  agent must run the following algorithm to &lt;dfn id=extracting-atom title=&quot;extracting
+  Atom&quot;&gt;extract an Atom feed&lt;/dfn&gt;:&lt;/p&gt;
+
+  &lt;ol&gt;&lt;li&gt;&lt;p&gt;If the &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; does
+   not contain any &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; elements, then return nothing
+   and abort these steps. This algorithm can only be used with
+   documents that contain distinct articles.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; be an empty &lt;a href=#xml-documents title=&quot;XML
+   documents&quot;&gt;XML&lt;/a&gt; &lt;code&gt;Document&lt;/code&gt; object whose &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's address&quot;&gt;address&lt;/a&gt; is user-agent
+   defined.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;feed&lt;/code&gt; element in the
+   &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each element &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; that is, or is a
+    descendant of, an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#applyToSection&gt;applies&lt;/a&gt; to &lt;a href=#the-body-element-0&gt;the &lt;code&gt;body&lt;/code&gt;
+    element&lt;/a&gt;, and that is an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; that has the type &lt;code title=md-vcard&gt;&lt;a href=#md-vcard&gt;vcard&lt;/a&gt;&lt;/code&gt;, if there is a property &lt;var title=&quot;&quot;&gt;property&lt;/var&gt; named &lt;code title=md-vcard-fn&gt;&lt;a href=#md-vcard-fn&gt;fn&lt;/a&gt;&lt;/code&gt;
+    whose &lt;a href=#concept-item-corresponding title=concept-item-corresponding&gt;corresponding
+    item&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;, and the &lt;a href=#concept-property-value title=concept-property-value&gt;value&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;property&lt;/var&gt; is not an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt;, then append an &lt;code title=&quot;&quot;&gt;author&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;
+    to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; whose contents is a
+    text node with its data set to the &lt;a href=#concept-property-value title=concept-property-value&gt;value&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;property&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If there is a &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; element whose &lt;code title=attr-link-rel&gt;&lt;a href=#attr-link-rel&gt;rel&lt;/a&gt;&lt;/code&gt; attribute's value includes the
+    keyword &lt;code title=rel-icon&gt;&lt;a href=#rel-icon&gt;icon&lt;/a&gt;&lt;/code&gt;, and that element also
+    has an &lt;code title=attr-link-href&gt;&lt;a href=#attr-link-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute, then
+    append an &lt;code title=&quot;&quot;&gt;icon&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+    namespace&lt;/a&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to the
+    &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt; resulting from &lt;a href=#resolve-a-url title=&quot;resolve a
+    url&quot;&gt;resolving&lt;/a&gt; the value of the &lt;code title=attr-link-href&gt;&lt;a href=#attr-link-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute relative to the
+    &lt;code&gt;&lt;a href=#the-link-element&gt;link&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+    &lt;!-- could check ratio, could check type... --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;id&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+    namespace&lt;/a&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;a href=&quot;#the-document's-current-address&quot;&gt;the
+    document's current address&lt;/a&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Optionally: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+    namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose
+    value is the string &quot;&lt;code title=&quot;&quot;&gt;self&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to the
+    (user-agent defined) &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+    address&quot;&gt;address&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to the root element
+    of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p class=note&gt;This step would be skipped when the document &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; has no convenient &lt;a href=&quot;#the-document's-address&quot; title=&quot;the document's
+    address&quot;&gt;address&lt;/a&gt;. The presence of the &lt;code title=&quot;&quot;&gt;rel=&quot;self&quot;&lt;/code&gt; link is a &quot;should&quot;-level requirement in
+    the Atom specification.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt;
+    element in the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text
+    node with its data set to &lt;a href=&quot;#the-document's-current-address&quot;&gt;the document's current
+    address&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt;
+    element in the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. If the
+    document being converted is an &lt;a href=#html-documents title=&quot;HTML documents&quot;&gt;HTML
+    document&lt;/a&gt;, add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose
+    value is the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Otherwise, the document being converted is an
+    &lt;a href=#xml-documents title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt;; add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to
+    &lt;a href=&quot;#the-document's-current-address&quot;&gt;the document's current address&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to the root element
+    of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subheading text&lt;/var&gt; be the empty
+   string.&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; be the first element of
+   &lt;a href=#heading-content-0&gt;heading content&lt;/a&gt; whose nearest ancestor of
+   &lt;a href=#sectioning-content-0&gt;sectioning content&lt;/a&gt; is the &lt;a href=#the-body-element-0&gt;the body
+   element&lt;/a&gt;, if any, or null if there is none.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Take the appropriate action from the following list, as
+    determined by the type of the &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;
+    element:&lt;/p&gt;
+
+    &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is null&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+      &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of &lt;a href=#the-title-element-0&gt;the &lt;code&gt;title&lt;/code&gt;
+      element&lt;/a&gt;, if there is one, or the empty string
+      otherwise.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; contains no child
+      &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements, let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty string.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt; be a list of
+      all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element children
+      of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;, sorted first by descending
+      &lt;a href=#rank&gt;rank&lt;/a&gt; and then in &lt;a href=#tree-order&gt;tree order&lt;/a&gt; (so
+      &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;s first, then &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h2&lt;/a&gt;&lt;/code&gt;s, etc, with each
+      group in the order they appear in the document). Then, let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of
+      the first entry in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;, and if
+      there are multiple entries, let &lt;var title=&quot;&quot;&gt;subheading
+      text&lt;/var&gt; be the &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of the second entry
+      in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+      &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+    namespace&lt;/a&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;subheading text&lt;/var&gt; is not the empty string,
+    append a &lt;code title=&quot;&quot;&gt;subtitle&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+    namespace&lt;/a&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;var title=&quot;&quot;&gt;subheading text&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; have no
+   value.&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; element &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; that does not have an ancestor
+    &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; element, run the following steps:&lt;/p&gt;
+
+    &lt;ol&gt;&lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; be an &lt;code title=&quot;&quot;&gt;entry&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;,
+     and append &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; be the first element of
+     &lt;a href=#heading-content-0&gt;heading content&lt;/a&gt; whose nearest ancestor of
+     &lt;a href=#sectioning-content-0&gt;sectioning content&lt;/a&gt; is &lt;var title=&quot;&quot;&gt;article&lt;/var&gt;,
+     if any, or null if there is none.&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Take the appropriate action from the following list, as
+      determined by the type of the &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;
+      element:&lt;/p&gt;
+
+      &lt;dl&gt;&lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is null&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty
+        string.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is a &lt;code&gt;&lt;a href=#the-hgroup-element&gt;hgroup&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; contains no child
+        &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; elements, let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty string.&lt;/p&gt;
+
+        &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt; be a list
+        of all the &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element
+        children of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;, sorted first by
+        descending &lt;a href=#rank&gt;rank&lt;/a&gt; and then in &lt;a href=#tree-order&gt;tree
+        order&lt;/a&gt; (so &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;s first, then
+        &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h2&lt;/a&gt;&lt;/code&gt;s, etc, with each group in the order they
+        appear in the document). Then, let &lt;var title=&quot;&quot;&gt;heading
+        text&lt;/var&gt; be the &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of the first entry
+        in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is an &lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h1&lt;/a&gt;&lt;/code&gt;&ndash;&lt;code&gt;&lt;a href=#the-h1,-h2,-h3,-h4,-h5,-and-h6-elements&gt;h6&lt;/a&gt;&lt;/code&gt; element&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+        &lt;code&gt;&lt;a href=#textcontent&gt;textContent&lt;/a&gt;&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the
+      &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;For each element &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; that is, or is
+      a descendant of, an &lt;code&gt;&lt;a href=#the-address-element&gt;address&lt;/a&gt;&lt;/code&gt; element that &lt;a href=#applyToSection&gt;applies&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;article&lt;/var&gt;, and that is an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt; that has the type &lt;code title=md-vcard&gt;&lt;a href=#md-vcard&gt;vcard&lt;/a&gt;&lt;/code&gt;, if there is a property &lt;var title=&quot;&quot;&gt;property&lt;/var&gt; named &lt;code title=md-vcard-fn&gt;&lt;a href=#md-vcard-fn&gt;fn&lt;/a&gt;&lt;/code&gt; whose &lt;a href=#concept-item-corresponding title=concept-item-corresponding&gt;corresponding item&lt;/a&gt; is
+      &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;, and the &lt;a href=#concept-property-value title=concept-property-value&gt;value&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;property&lt;/var&gt; is not an &lt;a href=#concept-item title=concept-item&gt;item&lt;/a&gt;, then append an &lt;code title=&quot;&quot;&gt;author&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+      namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose contents is a
+      text node with its data set to the &lt;a href=#concept-property-value title=concept-property-value&gt;value&lt;/a&gt; of &lt;var title=&quot;&quot;&gt;property&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Clone &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; and its descendants into an
+      environment that has &lt;a href=#concept-bc-noscript title=concept-bc-noscript&gt;scripting
+      disabled&lt;/a&gt;, has no &lt;a href=#plugin title=plugin&gt;plugins&lt;/a&gt;, and
+      fails any attempt to &lt;a href=#fetch title=fetch&gt;fetch&lt;/a&gt; any
+      resources. Let &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; be the
+      resulting clone &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; element.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Remove from the subtree rooted at &lt;var title=&quot;&quot;&gt;cloned
+      article&lt;/var&gt; any &lt;code&gt;&lt;a href=#the-article-element&gt;article&lt;/a&gt;&lt;/code&gt; elements other than the
+      &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; itself, any
+      &lt;code&gt;&lt;a href=#the-header-element&gt;header&lt;/a&gt;&lt;/code&gt;, &lt;code&gt;&lt;a href=#the-footer-element&gt;footer&lt;/a&gt;&lt;/code&gt;, or &lt;code&gt;&lt;a href=#the-nav-element&gt;nav&lt;/a&gt;&lt;/code&gt;
+      elements whose nearest ancestor of &lt;a href=#sectioning-content-0&gt;sectioning
+      content&lt;/a&gt; is the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt;, and
+      the first element of &lt;a href=#heading-content-0&gt;heading content&lt;/a&gt; whose nearest
+      ancestor of &lt;a href=#sectioning-content-0&gt;sectioning content&lt;/a&gt; is the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt;, if any.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; contains any
+      &lt;code&gt;&lt;a href=#the-ins-element&gt;ins&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-del-element&gt;del&lt;/a&gt;&lt;/code&gt; elements with &lt;code title=attr-mod-datetime&gt;&lt;a href=#attr-mod-datetime&gt;datetime&lt;/a&gt;&lt;/code&gt; attributes whose
+      values &lt;a href=#parse-a-global-date-and-time-string title=&quot;parse a global date and time string&quot;&gt;parse
+      as global date and time strings&lt;/a&gt; without errors, then let
+      &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; be the value of the &lt;code title=attr-mod-datetime&gt;&lt;a href=#attr-mod-datetime&gt;datetime&lt;/a&gt;&lt;/code&gt; attribute that parses
+      to the newest &lt;a href=#concept-datetime title=concept-datetime&gt;global date and
+      time&lt;/a&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; have no
+      value.&lt;/p&gt;
+
+      &lt;p class=note&gt;This value is used below; it is calculated here
+      because in certain cases the next step mutates the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If the document being converted is an &lt;a href=#html-documents title=&quot;HTML
+      documents&quot;&gt;HTML document&lt;/a&gt;, then: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
+      be a &lt;code title=&quot;&quot;&gt;content&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+      namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute
+      whose value is the string &quot;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to the
+      result of running the &lt;a href=#html-fragment-serialization-algorithm&gt;HTML fragment serialization
+      algorithm&lt;/a&gt; on &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, the document being converted is an &lt;a href=#xml-documents title=&quot;XML documents&quot;&gt;XML document&lt;/a&gt;: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;content&lt;/code&gt; element in
+      the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a
+      &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt; element to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Move all the
+      child nodes of the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; node to
+      that &lt;code&gt;&lt;a href=#the-div-element&gt;div&lt;/a&gt;&lt;/code&gt; element, preserving their relative
+      order. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Establish the value of &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; from the first of the following to
+      apply:&lt;/p&gt;
+
+      &lt;dl&gt;&lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has a &lt;code title=attr-article-cite&gt;&lt;a href=#attr-article-cite&gt;cite&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
+       resulting from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the
+       value of the &lt;code title=attr-article-cite&gt;&lt;a href=#attr-article-cite&gt;cite&lt;/a&gt;&lt;/code&gt;
+       relative to the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; element. Let &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be true.&lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has a descendant
+       &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; or &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt; element with an &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt; attribute and a &lt;code title=attr-a-rel&gt;rel&lt;/code&gt; attribute whose value includes
+       the &lt;code title=rel-bookmark&gt;&lt;a href=#link-type-bookmark&gt;bookmark&lt;/a&gt;&lt;/code&gt; keyword&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;a href=#absolute-url&gt;absolute URL&lt;/a&gt;
+       resulting from &lt;a href=#resolve-a-url title=&quot;resolve a url&quot;&gt;resolving&lt;/a&gt; the
+       value of the &lt;code title=attr-hyperlink-href&gt;&lt;a href=#attr-hyperlink-href&gt;href&lt;/a&gt;&lt;/code&gt;
+       attribute of the first such &lt;code&gt;&lt;a href=#the-a-element&gt;a&lt;/a&gt;&lt;/code&gt; ot &lt;code&gt;&lt;a href=#the-area-element&gt;area&lt;/a&gt;&lt;/code&gt;
+       element, relative to the element. Let &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be true.&lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has an &lt;code title=attr-id&gt;&lt;a href=#the-id-attribute&gt;id&lt;/a&gt;&lt;/code&gt; attribute&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be &lt;a href=&quot;#the-document's-current-address&quot;&gt;the document's current
+       address&lt;/a&gt;, with the fragment identifier (if any) removed,
+       and with a new fragment identifier specified, consisting of the
+       value of the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; element's &lt;code title=attr-id&gt;&lt;a href=#the-id-attribute&gt;id&lt;/a&gt;&lt;/code&gt; attribute. Let &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be false.&lt;/dd&gt;
+
+       &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be a user-agent defined
+       undereferencable yet globally unique &lt;a href=#absolute-url&gt;absolute
+       URL&lt;/a&gt;. Let &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be
+       false.&lt;/dd&gt;
+
+      &lt;/dl&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;id&lt;/code&gt; element in the &lt;a href=#atom-namespace&gt;Atom
+      namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose contents is a
+      text node with its data set to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; is true: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt; element in the
+      &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt;
+      attribute whose value is the string &quot;&lt;code title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a
+      text node with its data set to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; has a &lt;code title=attr-article-pubdate&gt;&lt;a href=#attr-article-pubdate&gt;pubdate&lt;/a&gt;&lt;/code&gt; attribute, and &lt;a href=#parse-a-global-date-and-time-string title=&quot;parse a global date and time string&quot;&gt;parsing that
+      attribute's value as a global date and time string&lt;/a&gt; does
+      not result in an error, then let &lt;var title=&quot;&quot;&gt;publication
+      date&lt;/var&gt; be the value of that attribute.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; have no
+      value.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; has no value but &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; does, then let &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; have the value of &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; has no
+      value but &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; does, then let &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; have the value of &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; has a value, and &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; has no value or is less recent
+      than &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt;, then let &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; have the value of &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; and &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; both still have no value, then let
+      them both value a value that is a &lt;a href=#valid-global-date-and-time-string&gt;valid global date and
+      time string&lt;/a&gt; representing the &lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt; of the
+      moment that this algorithm was invoked.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;published&lt;/code&gt; element in the
+      &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;updated&lt;/code&gt; element in the
+      &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; has no value, then
+    let it have a value that is a &lt;a href=#valid-global-date-and-time-string&gt;valid global date and time
+    string&lt;/a&gt; representing the &lt;a href=#concept-datetime title=concept-datetime&gt;global date and time&lt;/a&gt; of the date
+    and time of the &lt;code&gt;Document&lt;/code&gt;'s source file's last
+    modification, if it is known, or else of the moment that this
+    algorithm was invoked.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Insert an &lt;code title=&quot;&quot;&gt;updated&lt;/code&gt; element in the
+    &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; into the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; before the first &lt;code title=&quot;&quot;&gt;entry&lt;/code&gt; in
+    the &lt;a href=#atom-namespace&gt;Atom namespace&lt;/a&gt; whose contents is a text node with
+    its data set to &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the Atom document &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/li&gt;
+
+  &lt;/ol&gt;&lt;p&gt;The &lt;dfn id=atom-namespace&gt;Atom namespace&lt;/dfn&gt; is: &lt;code&gt;<A HREF="http://www.w3.org/2005/Atom&lt;/code">http://www.w3.org/2005/Atom&lt;/code</A>&gt;&lt;/p&gt;
+
+
+
+
+
+  &lt;h2 id=browsers&gt;&lt;span class=secno&gt;6 &lt;/span&gt;Web browsers&lt;/h2&gt;
+
   &lt;div class=impl&gt;
 
   &lt;p&gt;This section describes features that apply most directly to Web

Modified: source
===================================================================
--- source	2009-05-19 01:11:49 UTC (rev 3115)
+++ source	2009-05-22 05:55:17 UTC (rev 3116)
@@ -13352,11 +13352,12 @@
    &lt;dt&gt;Content attributes:&lt;/dt&gt;
    &lt;dd&gt;&lt;span&gt;Global attributes&lt;/span&gt;&lt;/dd&gt;
    &lt;dd&gt;&lt;code title=&quot;attr-article-cite&quot;&gt;cite&lt;/code&gt;&lt;/dd&gt;
-   &lt;!-- v2 attributes to give the date authored, date published, name of author, etc --&gt;
+   &lt;dd&gt;&lt;code title=&quot;attr-article-pubdate&quot;&gt;pubdate&lt;/code&gt;&lt;/dd&gt;
    &lt;dt&gt;DOM interface:&lt;/dt&gt;
    &lt;dd&gt;
 &lt;pre class=&quot;idl&quot;&gt;interface &lt;dfn&gt;HTMLArticleElement&lt;/dfn&gt; : &lt;span&gt;HTMLElement&lt;/span&gt; {
            attribute DOMString &lt;span title=&quot;dom-article-cite&quot;&gt;cite&lt;/span&gt;;
+           attribute DOMString &lt;span title=&quot;dom-article-pubDate&quot;&gt;pubDate&lt;/span&gt;;
 };&lt;/pre&gt;
    &lt;/dd&gt;
   &lt;/dl&gt;
@@ -13397,11 +13398,20 @@
   element. User agents should allow users to follow such citation
   links.&lt;/span&gt;&lt;/p&gt;
 
+  &lt;p&gt;The &lt;dfn title=&quot;attr-article-pubdate&quot;&gt;&lt;code&gt;pubdate&lt;/code&gt;&lt;/dfn&gt;
+  attribute may be used to specify the time and date that the article
+  was first published. If present, the &lt;code
+  title=&quot;attr-article-pubdate&quot;&gt;pubdate&lt;/code&gt; attribute must be a
+  &lt;span&gt;valid global date and time string&lt;/span&gt; value.&lt;/p&gt;
+
   &lt;div class=&quot;impl&quot;&gt;
 
   &lt;p&gt;The &lt;dfn title=&quot;dom-article-cite&quot;&gt;&lt;code&gt;cite&lt;/code&gt;&lt;/dfn&gt; DOM
   attribute must &lt;span&gt;reflect&lt;/span&gt; the element's &lt;code
-  title=&quot;attr-article-cite&quot;&gt;cite&lt;/code&gt; content attribute.&lt;/p&gt;
+  title=&quot;attr-article-cite&quot;&gt;cite&lt;/code&gt; content attribute. The &lt;dfn
+  title=&quot;dom-article-pubDate&quot;&gt;&lt;code&gt;pubDate&lt;/code&gt;&lt;/dfn&gt; DOM attribute
+  must &lt;span&gt;reflect&lt;/span&gt; the element's &lt;code
+  title=&quot;attr-article-pubdate&quot;&gt;pubdate&lt;/code&gt; content attribute.&lt;/p&gt;
 
   &lt;/div&gt;
 
@@ -28445,12 +28455,12 @@
   rules given for URL decomposition attributes, with the &lt;span
   title=&quot;concept-uda-input&quot;&gt;input&lt;/span&gt; being the result of &lt;span
   title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the element's &lt;code
-  title=&quot;attr-area-href&quot;&gt;href&lt;/code&gt; attribute relative to the
+  title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute relative to the
   element, if there is such an attribute and resolving it is
   successful, or the empty string otherwise; and the &lt;span
   title=&quot;concept-uda-setter&quot;&gt;common setter action&lt;/span&gt; being the
   same as setting the element's &lt;code
-  title=&quot;attr-area-href&quot;&gt;href&lt;/code&gt; attribute to the new output
+  title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute to the new output
   value.&lt;/p&gt;
 
   &lt;/div&gt;
@@ -28480,9 +28490,9 @@
   specifying a &lt;dfn
   title=&quot;attr-hyperlink-usemap&quot;&gt;&lt;code&gt;usemap&lt;/code&gt;&lt;/dfn&gt; attribute on
   the &lt;code&gt;img&lt;/code&gt; or &lt;code&gt;object&lt;/code&gt; element. The &lt;code
-  title=&quot;attr-area-usemap&quot;&gt;usemap&lt;/code&gt; attribute, if specified, must
-  be a &lt;span&gt;valid hash-name reference&lt;/span&gt; to a &lt;code&gt;map&lt;/code&gt;
-  element.&lt;/p&gt;
+  title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt; attribute, if specified,
+  must be a &lt;span&gt;valid hash-name reference&lt;/span&gt; to a
+  &lt;code&gt;map&lt;/code&gt; element.&lt;/p&gt;
 
   &lt;div class=&quot;example&quot;&gt;
 
@@ -28515,8 +28525,8 @@
 
   &lt;p&gt;If an &lt;code&gt;img&lt;/code&gt; element or an &lt;code&gt;object&lt;/code&gt; element
   representing an image has a &lt;code
-  title=&quot;attr-area-usemap&quot;&gt;usemap&lt;/code&gt; attribute specified, user
-  agents must process it as follows:&lt;/p&gt;
+  title=&quot;attr-hyperlink-usemap&quot;&gt;usemap&lt;/code&gt; attribute specified,
+  user agents must process it as follows:&lt;/p&gt;
 
   &lt;ol&gt;
 
@@ -49967,7 +49977,7 @@
       &lt;p&gt;If the element is, or is a descendant of, an
       &lt;code&gt;address&lt;/code&gt; element that &lt;a
       href=&quot;#applyToSection&quot;&gt;applies&lt;/a&gt; to &lt;span&gt;the
-      &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;, an the &lt;span
+      &lt;code&gt;body&lt;/code&gt; element&lt;/span&gt;, and the &lt;span
       title=&quot;concept-item&quot;&gt;item&lt;/span&gt; has the type &lt;code
       title=&quot;md-vcard&quot;&gt;vcard&lt;/code&gt;, generate the following
       triple:&lt;/p&gt;
@@ -51225,8 +51235,562 @@
   &lt;/ol&gt;
 
 
+  &lt;h4&gt;Atom&lt;/h4&gt;
 
+  &lt;p&gt;Given a &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;source&lt;/var&gt;, a user
+  agent must run the following algorithm to &lt;dfn title=&quot;extracting
+  Atom&quot;&gt;extract an Atom feed&lt;/dfn&gt;:&lt;/p&gt;
 
+  &lt;ol&gt;
+
+   &lt;li&gt;&lt;p&gt;If the &lt;code&gt;Document&lt;/code&gt; &lt;var title=&quot;&quot;&gt;source&lt;/var&gt; does
+   not contain any &lt;code&gt;article&lt;/code&gt; elements, then return nothing
+   and abort these steps. This algorithm can only be used with
+   documents that contain distinct articles.&lt;/p&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; be an empty &lt;span title=&quot;XML
+   documents&quot;&gt;XML&lt;/span&gt; &lt;code&gt;Document&lt;/code&gt; object whose &lt;span
+   title=&quot;the document's address&quot;&gt;address&lt;/span&gt; is user-agent
+   defined.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;feed&lt;/code&gt; element in the
+   &lt;span&gt;Atom namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each element &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; that is, or is a
+    descendant of, an &lt;code&gt;address&lt;/code&gt; element that &lt;a
+    href=&quot;#applyToSection&quot;&gt;applies&lt;/a&gt; to &lt;span&gt;the &lt;code&gt;body&lt;/code&gt;
+    element&lt;/span&gt;, and that is an &lt;span
+    title=&quot;concept-item&quot;&gt;item&lt;/span&gt; that has the type &lt;code
+    title=&quot;md-vcard&quot;&gt;vcard&lt;/code&gt;, if there is a property &lt;var
+    title=&quot;&quot;&gt;property&lt;/var&gt; named &lt;code title=&quot;md-vcard-fn&quot;&gt;fn&lt;/code&gt;
+    whose &lt;span title=&quot;concept-item-corresponding&quot;&gt;corresponding
+    item&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;, and the &lt;span
+    title=&quot;concept-property-value&quot;&gt;value&lt;/span&gt; of &lt;var
+    title=&quot;&quot;&gt;property&lt;/var&gt; is not an &lt;span
+    title=&quot;concept-item&quot;&gt;item&lt;/span&gt;, then append an &lt;code
+    title=&quot;&quot;&gt;author&lt;/code&gt; element in the &lt;span&gt;Atom namespace&lt;/span&gt;
+    to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; whose contents is a
+    text node with its data set to the &lt;span
+    title=&quot;concept-property-value&quot;&gt;value&lt;/span&gt; of &lt;var
+    title=&quot;&quot;&gt;property&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If there is a &lt;code&gt;link&lt;/code&gt; element whose &lt;code
+    title=&quot;attr-link-rel&quot;&gt;rel&lt;/code&gt; attribute's value includes the
+    keyword &lt;code title=&quot;rel-icon&quot;&gt;icon&lt;/code&gt;, and that element also
+    has an &lt;code title=&quot;attr-link-href&quot;&gt;href&lt;/code&gt; attribute, then
+    append an &lt;code title=&quot;&quot;&gt;icon&lt;/code&gt; element in the &lt;span&gt;Atom
+    namespace&lt;/span&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to the
+    &lt;span&gt;absolute URL&lt;/span&gt; resulting from &lt;span title=&quot;resolve a
+    url&quot;&gt;resolving&lt;/span&gt; the value of the &lt;code
+    title=&quot;attr-link-href&quot;&gt;href&lt;/code&gt; attribute relative to the
+    &lt;code&gt;link&lt;/code&gt; element.&lt;/p&gt;
+
+    &lt;!-- could check ratio, could check type... --&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;id&lt;/code&gt; element in the &lt;span&gt;Atom
+    namespace&lt;/span&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;span&gt;the
+    document's current address&lt;/span&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Optionally: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code
+    title=&quot;&quot;&gt;link&lt;/code&gt; element in the &lt;span&gt;Atom
+    namespace&lt;/span&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose
+    value is the string &quot;&lt;code title=&quot;&quot;&gt;self&lt;/code&gt;&quot; to &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to the
+    (user-agent defined) &lt;span title=&quot;the document's
+    address&quot;&gt;address&lt;/span&gt; of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt; to &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to the root element
+    of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+    &lt;p class=&quot;note&quot;&gt;This step would be skipped when the document &lt;var
+    title=&quot;&quot;&gt;R&lt;/var&gt; has no convenient &lt;span title=&quot;the document's
+    address&quot;&gt;address&lt;/span&gt;. The presence of the &lt;code
+    title=&quot;&quot;&gt;rel=&quot;self&quot;&lt;/code&gt; link is a &quot;should&quot;-level requirement in
+    the Atom specification.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt;
+    element in the &lt;span&gt;Atom namespace&lt;/span&gt;. Add a &lt;code
+    title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose value is the string &quot;&lt;code
+    title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Add a &lt;code
+    title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code
+    title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text
+    node with its data set to &lt;span&gt;the document's current
+    address&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt;
+    element in the &lt;span&gt;Atom namespace&lt;/span&gt;. Add a &lt;code
+    title=&quot;&quot;&gt;rel&lt;/code&gt; attribute whose value is the string &quot;&lt;code
+    title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. If the
+    document being converted is an &lt;span title=&quot;HTML documents&quot;&gt;HTML
+    document&lt;/span&gt;, add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose
+    value is the string &quot;&lt;code title=&quot;&quot;&gt;text/html&lt;/code&gt;&quot; to &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;. Otherwise, the document being converted is an
+    &lt;span title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt;; add a &lt;code
+    title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code
+    title=&quot;&quot;&gt;application/xhtml+xml&lt;/code&gt;&quot; to &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to
+    &lt;span&gt;the document's current address&lt;/span&gt; to &lt;var
+    title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to the root element
+    of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;subheading text&lt;/var&gt; be the empty
+   string.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; be the first element of
+   &lt;span&gt;heading content&lt;/span&gt; whose nearest ancestor of
+   &lt;span&gt;sectioning content&lt;/span&gt; is the &lt;span&gt;the body
+   element&lt;/span&gt;, if any, or null if there is none.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Take the appropriate action from the following list, as
+    determined by the type of the &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;
+    element:&lt;/p&gt;
+
+    &lt;dl&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is null&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+      &lt;code&gt;textContent&lt;/code&gt; of &lt;span&gt;the &lt;code&gt;title&lt;/code&gt;
+      element&lt;/span&gt;, if there is one, or the empty string
+      otherwise.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is a &lt;code&gt;hgroup&lt;/code&gt; element&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; contains no child
+      &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; elements, let &lt;var
+      title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty string.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt; be a list of
+      all the &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element children
+      of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;, sorted first by descending
+      &lt;span&gt;rank&lt;/span&gt; and then in &lt;span&gt;tree order&lt;/span&gt; (so
+      &lt;code&gt;h1&lt;/code&gt;s first, then &lt;code&gt;h2&lt;/code&gt;s, etc, with each
+      group in the order they appear in the document). Then, let &lt;var
+      title=&quot;&quot;&gt;heading text&lt;/var&gt; be the &lt;code&gt;textContent&lt;/code&gt; of
+      the first entry in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;, and if
+      there are multiple entries, let &lt;var title=&quot;&quot;&gt;subheading
+      text&lt;/var&gt; be the &lt;code&gt;textContent&lt;/code&gt; of the second entry
+      in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+     &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is an &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element&lt;/dt&gt;
+
+     &lt;dd&gt;
+
+      &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+      &lt;code&gt;textContent&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/dd&gt;
+
+    &lt;/dl&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the &lt;span&gt;Atom
+    namespace&lt;/span&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;var
+    title=&quot;&quot;&gt;heading text&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;subheading text&lt;/var&gt; is not the empty string,
+    append a &lt;code title=&quot;&quot;&gt;subtitle&lt;/code&gt; element in the &lt;span&gt;Atom
+    namespace&lt;/span&gt; to the root element of &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;
+    whose contents is a text node with its data set to &lt;var
+    title=&quot;&quot;&gt;subheading text&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; have no
+   value.&lt;/p&gt;&lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;For each &lt;code&gt;article&lt;/code&gt; element &lt;var
+    title=&quot;&quot;&gt;article&lt;/var&gt; that does not have an ancestor
+    &lt;code&gt;article&lt;/code&gt; element, run the following steps:&lt;/p&gt;
+
+    &lt;ol&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; be an &lt;code
+     title=&quot;&quot;&gt;entry&lt;/code&gt; element in the &lt;span&gt;Atom namespace&lt;/span&gt;,
+     and append &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; to the root element of &lt;var
+     title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;&lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; be the first element of
+     &lt;span&gt;heading content&lt;/span&gt; whose nearest ancestor of
+     &lt;span&gt;sectioning content&lt;/span&gt; is &lt;var title=&quot;&quot;&gt;article&lt;/var&gt;,
+     if any, or null if there is none.&lt;/p&gt;&lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Take the appropriate action from the following list, as
+      determined by the type of the &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;
+      element:&lt;/p&gt;
+
+      &lt;dl&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is null&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty
+        string.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is a &lt;code&gt;hgroup&lt;/code&gt; element&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; contains no child
+        &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; elements, let &lt;var
+        title=&quot;&quot;&gt;heading text&lt;/var&gt; be the empty string.&lt;/p&gt;
+
+        &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt; be a list
+        of all the &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element
+        children of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;, sorted first by
+        descending &lt;span&gt;rank&lt;/span&gt; and then in &lt;span&gt;tree
+        order&lt;/span&gt; (so &lt;code&gt;h1&lt;/code&gt;s first, then
+        &lt;code&gt;h2&lt;/code&gt;s, etc, with each group in the order they
+        appear in the document). Then, let &lt;var title=&quot;&quot;&gt;heading
+        text&lt;/var&gt; be the &lt;code&gt;textContent&lt;/code&gt; of the first entry
+        in &lt;var title=&quot;&quot;&gt;headings list&lt;/var&gt;.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+       &lt;dt&gt;If &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt; is an &lt;code&gt;h1&lt;/code&gt;&ndash;&lt;code&gt;h6&lt;/code&gt; element&lt;/dt&gt;
+
+       &lt;dd&gt;
+
+        &lt;p&gt;Let &lt;var title=&quot;&quot;&gt;heading text&lt;/var&gt; be the
+        &lt;code&gt;textContent&lt;/code&gt; of &lt;var title=&quot;&quot;&gt;heading&lt;/var&gt;.&lt;/p&gt;
+
+       &lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append a &lt;code title=&quot;&quot;&gt;title&lt;/code&gt; element in the
+      &lt;span&gt;Atom namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var
+      title=&quot;&quot;&gt;heading text&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;For each element &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt; that is, or is
+      a descendant of, an &lt;code&gt;address&lt;/code&gt; element that &lt;a
+      href=&quot;#applyToSection&quot;&gt;applies&lt;/a&gt; to &lt;var
+      title=&quot;&quot;&gt;article&lt;/var&gt;, and that is an &lt;span
+      title=&quot;concept-item&quot;&gt;item&lt;/span&gt; that has the type &lt;code
+      title=&quot;md-vcard&quot;&gt;vcard&lt;/code&gt;, if there is a property &lt;var
+      title=&quot;&quot;&gt;property&lt;/var&gt; named &lt;code
+      title=&quot;md-vcard-fn&quot;&gt;fn&lt;/code&gt; whose &lt;span
+      title=&quot;concept-item-corresponding&quot;&gt;corresponding item&lt;/span&gt; is
+      &lt;var title=&quot;&quot;&gt;candidate&lt;/var&gt;, and the &lt;span
+      title=&quot;concept-property-value&quot;&gt;value&lt;/span&gt; of &lt;var
+      title=&quot;&quot;&gt;property&lt;/var&gt; is not an &lt;span
+      title=&quot;concept-item&quot;&gt;item&lt;/span&gt;, then append an &lt;code
+      title=&quot;&quot;&gt;author&lt;/code&gt; element in the &lt;span&gt;Atom
+      namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose contents is a
+      text node with its data set to the &lt;span
+      title=&quot;concept-property-value&quot;&gt;value&lt;/span&gt; of &lt;var
+      title=&quot;&quot;&gt;property&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Clone &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; and its descendants into an
+      environment that has &lt;span title=&quot;concept-bc-noscript&quot;&gt;scripting
+      disabled&lt;/span&gt;, has no &lt;span title=&quot;plugin&quot;&gt;plugins&lt;/span&gt;, and
+      fails any attempt to &lt;span title=&quot;fetch&quot;&gt;fetch&lt;/span&gt; any
+      resources. Let &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; be the
+      resulting clone &lt;code&gt;article&lt;/code&gt; element.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Remove from the subtree rooted at &lt;var title=&quot;&quot;&gt;cloned
+      article&lt;/var&gt; any &lt;code&gt;article&lt;/code&gt; elements other than the
+      &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; itself, any
+      &lt;code&gt;header&lt;/code&gt;, &lt;code&gt;footer&lt;/code&gt;, or &lt;code&gt;nav&lt;/code&gt;
+      elements whose nearest ancestor of &lt;span&gt;sectioning
+      content&lt;/span&gt; is the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt;, and
+      the first element of &lt;span&gt;heading content&lt;/span&gt; whose nearest
+      ancestor of &lt;span&gt;sectioning content&lt;/span&gt; is the &lt;var
+      title=&quot;&quot;&gt;cloned article&lt;/var&gt;, if any.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; contains any
+      &lt;code&gt;ins&lt;/code&gt; or &lt;code&gt;del&lt;/code&gt; elements with &lt;code
+      title=&quot;attr-mod-datetime&quot;&gt;datetime&lt;/code&gt; attributes whose
+      values &lt;span title=&quot;parse a global date and time string&quot;&gt;parse
+      as global date and time strings&lt;/span&gt; without errors, then let
+      &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; be the value of the &lt;code
+      title=&quot;attr-mod-datetime&quot;&gt;datetime&lt;/code&gt; attribute that parses
+      to the newest &lt;span title=&quot;concept-datetime&quot;&gt;global date and
+      time&lt;/span&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; have no
+      value.&lt;/p&gt;
+
+      &lt;p class=&quot;note&quot;&gt;This value is used below; it is calculated here
+      because in certain cases the next step mutates the &lt;var
+      title=&quot;&quot;&gt;cloned article&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If the document being converted is an &lt;span title=&quot;HTML
+      documents&quot;&gt;HTML document&lt;/span&gt;, then: Let &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;
+      be a &lt;code title=&quot;&quot;&gt;content&lt;/code&gt; element in the &lt;span&gt;Atom
+      namespace&lt;/span&gt;. Add a &lt;code title=&quot;&quot;&gt;type&lt;/code&gt; attribute
+      whose value is the string &quot;&lt;code title=&quot;&quot;&gt;html&lt;/code&gt;&quot; to &lt;var
+      title=&quot;&quot;&gt;x&lt;/var&gt;. Append a text node with its data set to the
+      result of running the &lt;span&gt;HTML fragment serialization
+      algorithm&lt;/span&gt; on &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; to &lt;var
+      title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var
+      title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, the document being converted is an &lt;span
+      title=&quot;XML documents&quot;&gt;XML document&lt;/span&gt;: Let &lt;var
+      title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;content&lt;/code&gt; element in
+      the &lt;span&gt;Atom namespace&lt;/span&gt;. Add a &lt;code
+      title=&quot;&quot;&gt;type&lt;/code&gt; attribute whose value is the string &quot;&lt;code
+      title=&quot;&quot;&gt;xml&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a
+      &lt;code&gt;div&lt;/code&gt; element to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Move all the
+      child nodes of the &lt;var title=&quot;&quot;&gt;cloned article&lt;/var&gt; node to
+      that &lt;code&gt;div&lt;/code&gt; element, preserving their relative
+      order. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var
+      title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Establish the value of &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; and &lt;var
+      title=&quot;&quot;&gt;has-alternate&lt;/var&gt; from the first of the following to
+      apply:&lt;/p&gt;
+
+      &lt;dl&gt;
+
+       &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has a &lt;code
+       title=&quot;attr-article-cite&quot;&gt;cite&lt;/code&gt; attribute&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;span&gt;absolute URL&lt;/span&gt;
+       resulting from &lt;span title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the
+       value of the &lt;code title=&quot;attr-article-cite&quot;&gt;cite&lt;/code&gt;
+       relative to the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; element. Let &lt;var
+       title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be true.&lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has a descendant
+       &lt;code&gt;a&lt;/code&gt; or &lt;code&gt;area&lt;/code&gt; element with an &lt;code
+       title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt; attribute and a &lt;code
+       title=&quot;attr-a-rel&quot;&gt;rel&lt;/code&gt; attribute whose value includes
+       the &lt;code title=&quot;rel-bookmark&quot;&gt;bookmark&lt;/code&gt; keyword&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be the &lt;span&gt;absolute URL&lt;/span&gt;
+       resulting from &lt;span title=&quot;resolve a url&quot;&gt;resolving&lt;/span&gt; the
+       value of the &lt;code title=&quot;attr-hyperlink-href&quot;&gt;href&lt;/code&gt;
+       attribute of the first such &lt;code&gt;a&lt;/code&gt; ot &lt;code&gt;area&lt;/code&gt;
+       element, relative to the element. Let &lt;var
+       title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be true.&lt;/dd&gt;
+
+       &lt;dt&gt;If the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; node has an &lt;code
+       title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be &lt;span&gt;the document's current
+       address&lt;/span&gt;, with the fragment identifier (if any) removed,
+       and with a new fragment identifier specified, consisting of the
+       value of the &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; element's &lt;code
+       title=&quot;attr-id&quot;&gt;id&lt;/code&gt; attribute. Let &lt;var
+       title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be false.&lt;/dd&gt;
+
+       &lt;dt&gt;Otherwise&lt;/dt&gt;
+
+       &lt;dd&gt;Let &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; be a user-agent defined
+       undereferencable yet globally unique &lt;span&gt;absolute
+       URL&lt;/span&gt;. Let &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; be
+       false.&lt;/dd&gt;
+
+      &lt;/dl&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;id&lt;/code&gt; element in the &lt;span&gt;Atom
+      namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose contents is a
+      text node with its data set to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;has-alternate&lt;/var&gt; is true: Let &lt;var
+      title=&quot;&quot;&gt;x&lt;/var&gt; be a &lt;code title=&quot;&quot;&gt;link&lt;/code&gt; element in the
+      &lt;span&gt;Atom namespace&lt;/span&gt;. Add a &lt;code title=&quot;&quot;&gt;rel&lt;/code&gt;
+      attribute whose value is the string &quot;&lt;code
+      title=&quot;&quot;&gt;alternate&lt;/code&gt;&quot; to &lt;var title=&quot;&quot;&gt;x&lt;/var&gt;. Append a
+      text node with its data set to &lt;var title=&quot;&quot;&gt;id&lt;/var&gt; to &lt;var
+      title=&quot;&quot;&gt;x&lt;/var&gt;. Append &lt;var title=&quot;&quot;&gt;x&lt;/var&gt; to &lt;var
+      title=&quot;&quot;&gt;E&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;article&lt;/var&gt; has a &lt;code
+      title=&quot;attr-article-pubdate&quot;&gt;pubdate&lt;/code&gt; attribute, and &lt;span
+      title=&quot;parse a global date and time string&quot;&gt;parsing that
+      attribute's value as a global date and time string&lt;/span&gt; does
+      not result in an error, then let &lt;var title=&quot;&quot;&gt;publication
+      date&lt;/var&gt; be the value of that attribute.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, let &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; have no
+      value.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; has no value but &lt;var
+      title=&quot;&quot;&gt;publication date&lt;/var&gt; does, then let &lt;var
+      title=&quot;&quot;&gt;update date&lt;/var&gt; have the value of &lt;var
+      title=&quot;&quot;&gt;publication date&lt;/var&gt;.&lt;/p&gt;
+
+      &lt;p&gt;Otherwise, if &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; has no
+      value but &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; does, then let &lt;var
+      title=&quot;&quot;&gt;publication date&lt;/var&gt; have the value of &lt;var
+      title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt; has a value, and &lt;var
+      title=&quot;&quot;&gt;global update date&lt;/var&gt; has no value or is less recent
+      than &lt;var title=&quot;&quot;&gt;update date&lt;/var&gt;, then let &lt;var
+      title=&quot;&quot;&gt;global update date&lt;/var&gt; have the value of &lt;var
+      title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;If &lt;var title=&quot;&quot;&gt;publication date&lt;/var&gt; and &lt;var
+      title=&quot;&quot;&gt;update date&lt;/var&gt; both still have no value, then let
+      them both value a value that is a &lt;span&gt;valid global date and
+      time string&lt;/span&gt; representing the &lt;span
+      title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt; of the
+      moment that this algorithm was invoked.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;published&lt;/code&gt; element in the
+      &lt;span&gt;Atom namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var
+      title=&quot;&quot;&gt;publication date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+     &lt;li&gt;
+
+      &lt;p&gt;Append an &lt;code title=&quot;&quot;&gt;updated&lt;/code&gt; element in the
+      &lt;span&gt;Atom namespace&lt;/span&gt; to &lt;var title=&quot;&quot;&gt;E&lt;/var&gt; whose
+      contents is a text node with its data set to &lt;var
+      title=&quot;&quot;&gt;update date&lt;/var&gt;.&lt;/p&gt;
+
+     &lt;/li&gt;
+
+    &lt;/ol&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;If &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt; has no value, then
+    let it have a value that is a &lt;span&gt;valid global date and time
+    string&lt;/span&gt; representing the &lt;span
+    title=&quot;concept-datetime&quot;&gt;global date and time&lt;/span&gt; of the date
+    and time of the &lt;code&gt;Document&lt;/code&gt;'s source file's last
+    modification, if it is known, or else of the moment that this
+    algorithm was invoked.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;
+
+    &lt;p&gt;Insert an &lt;code title=&quot;&quot;&gt;updated&lt;/code&gt; element in the
+    &lt;span&gt;Atom namespace&lt;/span&gt; into the root element of &lt;var
+    title=&quot;&quot;&gt;R&lt;/var&gt; before the first &lt;code title=&quot;&quot;&gt;entry&lt;/code&gt; in
+    the &lt;span&gt;Atom namespace&lt;/span&gt; whose contents is a text node with
+    its data set to &lt;var title=&quot;&quot;&gt;global update date&lt;/var&gt;.&lt;/p&gt;
+
+   &lt;/li&gt;
+
+   &lt;li&gt;&lt;p&gt;Return the Atom document &lt;var title=&quot;&quot;&gt;R&lt;/var&gt;.&lt;/p&gt;&lt;/li&gt;
+
+  &lt;/ol&gt;
+
+  &lt;p&gt;The &lt;dfn&gt;Atom namespace&lt;/dfn&gt; is: &lt;code&gt;<A HREF="http://www.w3.org/2005/Atom&lt;/code">http://www.w3.org/2005/Atom&lt;/code</A>&gt;&lt;/p&gt;
+
+
+
+
+
   &lt;h2 id=&quot;browsers&quot;&gt;Web browsers&lt;/h2&gt;
 
   &lt;div class=&quot;impl&quot;&gt;


</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="009996.html">[html5] r3115 - [giw] (2) Fix how drag and drop exports data.
</A></li>
	<LI>Next message: <A HREF="009998.html">[html5] r3117 - [e] (0) Fix up some Workers examples;	remove extraneous &lt;link rel=alternate&gt; ste [...]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#9997">[ date ]</a>
              <a href="thread.html#9997">[ thread ]</a>
              <a href="subject.html#9997">[ subject ]</a>
              <a href="author.html#9997">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/commit-watchers-whatwg.org">More information about the Commit-Watchers
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
