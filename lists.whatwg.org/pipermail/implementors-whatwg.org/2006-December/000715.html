<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5BImps%5D%20%5Bwhatwg%5D%20Standard%20DOM%20Serialization%3F%20%5Bwas%20%3ACommon%20Subset%5D&In-Reply-To=%3C457DE756.40808%40intertwingly.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000713.html">
   <LINK REL="Next"  HREF="000716.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]</H1>
<!--htdig_noindex-->
    <B>Sam Ruby</B> 
    <A HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5BImps%5D%20%5Bwhatwg%5D%20Standard%20DOM%20Serialization%3F%20%5Bwas%20%3ACommon%20Subset%5D&In-Reply-To=%3C457DE756.40808%40intertwingly.net%3E"
       TITLE="[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]">rubys at intertwingly.net
       </A><BR>
    <I>Mon Dec 11 15:18:46 PST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000713.html">[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]
</A></li>
        <LI>Next message: <A HREF="000716.html">[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#715">[ date ]</a>
              <a href="thread.html#715">[ thread ]</a>
              <a href="subject.html#715">[ subject ]</a>
              <a href="author.html#715">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>James Graham wrote:
&gt;<i> Sam Ruby wrote:
</I>&gt;&gt;<i> Henri Sivonen wrote:
</I>&gt;&gt;&gt;<i> On Dec 11, 2006, at 17:29, Henri Sivonen wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i>   * For element start, write &quot;&lt;&quot; followed by the element name,
</I>&gt;&gt;&gt;&gt;<i> followed by attributes, followed by &quot;&gt;&quot;.
</I>&gt;&gt;&gt;<i>  * For element end, write &quot;&lt;/&quot; followed by the element name, followed 
</I>&gt;&gt;&gt;<i> by &quot;&gt;&quot;.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Don't do that for elements which are always empty.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Also, as Anne pointed out, there is a precise serialization defined 
</I>&gt;&gt;<i> for innerHtml.
</I>&gt;<i> 
</I>&gt;<i> So, does it make any sense to use the innerHTML serialization, along 
</I>&gt;<i> with a similar json-based format as is used for the tokenizer tests for 
</I>&gt;<i> the parser unittests. Something like:
</I>&gt;<i> 
</I>&gt;<i> {&quot;tests&quot;:
</I>&gt;<i> [
</I>&gt;<i> 
</I>&gt;<i> {&quot;description&quot;:&quot;test description&quot;,
</I>&gt;<i> &quot;input&quot;:&quot;some input string&quot;,
</I>&gt;<i> &quot;errors&quot;:[list of parse errors],
</I>&gt;<i> &quot;output&quot;:&quot;innerhtml for resulting DOM&quot;}
</I>&gt;<i> 
</I>&gt;<i> ]
</I>&gt;<i> }
</I>&gt;<i> 
</I>&gt;<i> Since different implementations will report errors differently, I would 
</I>&gt;<i> imagine a common testsuite would be useful for checking the correct 
</I>&gt;<i> number of errors are produced. The big disadvantage of this format is 
</I>&gt;<i> the fact that the innerHTML string will have to be both HTML escaped and 
</I>&gt;<i> json escaped, leading to a high number of noise characters.
</I>
I would presume that parsing and serialization would have separate unit 
tests.  The edge cases actually are quite different for each. 
Furthermore, there may actually be DOM trees that can not be constructed 
via a parse.

Perl's XML::Parser::Style::Tree describes a JSON like serialization of a 
DOM that might be suitable as an 'input' to a serialization test:

<A HREF="http://search.cpan.org/dist/XML-Parser/Parser/Style/Tree.pm">http://search.cpan.org/dist/XML-Parser/Parser/Style/Tree.pm</A>

- Sam Ruby

</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000713.html">[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]
</A></li>
	<LI>Next message: <A HREF="000716.html">[Imps] [whatwg] Standard DOM Serialization? [was :Common Subset]
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#715">[ date ]</a>
              <a href="thread.html#715">[ thread ]</a>
              <a href="subject.html#715">[ subject ]</a>
              <a href="author.html#715">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">More information about the Implementors
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
