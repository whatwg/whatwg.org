<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [imps] Emulating the HTML DOM when actually parsed from XML
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5Bimps%5D%20Emulating%20the%20HTML%20DOM%20when%20actually%20parsed%20from%20XML&In-Reply-To=%3C90924D0E-F13D-42C5-ABD1-82A1ABD62D74%40iki.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000857.html">
   <LINK REL="Next"  HREF="000515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[imps] Emulating the HTML DOM when actually parsed from XML</H1>
<!--htdig_noindex-->
    <B>Henri Sivonen</B> 
    <A HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5Bimps%5D%20Emulating%20the%20HTML%20DOM%20when%20actually%20parsed%20from%20XML&In-Reply-To=%3C90924D0E-F13D-42C5-ABD1-82A1ABD62D74%40iki.fi%3E"
       TITLE="[imps] Emulating the HTML DOM when actually parsed from XML">hsivonen at iki.fi
       </A><BR>
    <I>Fri Apr  4 03:53:29 PDT 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="000857.html">[imps] &lt;div&gt;&lt;/form&gt;
</A></li>
        <LI>Next message: <A HREF="000515.html">[imps] Tree construction test in undocumented format
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#514">[ date ]</a>
              <a href="thread.html#514">[ thread ]</a>
              <a href="subject.html#514">[ subject ]</a>
              <a href="author.html#514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>I was thinking that especially with the MathML and SVG additions, it  
would be great to be able to test effect of the HTML5 parsing  
algorithm in current browsers. Since hooking up a parser written in  
Java or Python into a browser written in C++ is in itself non-trivial,  
I started considering an HTTP proxy that intercepted text/html and  
converted into application/xhtml+xml. (Jetty, Validator.nu parser,  
Commons HttpClient.)

This approach might even work for static pages, as many people already  
write their selectors in lower case.

However, a bit part of Web compat is script compat, and the proxy  
would make browsers put the DOM in the XML mode. Would it be possible  
to monkeypatch the features listed at
<A HREF="http://wiki.whatwg.org/wiki/HtmlVsXhtml#Scripts">http://wiki.whatwg.org/wiki/HtmlVsXhtml#Scripts</A>
using JS prototypes if the proxy injected a script into each document?  
Except for document.write(), of course. Might someone already have  
done this?

Then there's the form pointer issue. With Opera, setting the WF2 form  
attribute would work, but what about Gecko and WebKit? And then  
there's the issue that some behavior depends on the character encoding  
and might break if the document is promoted to UTF-8. Would setting  
accept-charset on &lt;form&gt; work around this sufficiently?

Any ideas if quirks mode CSS and document.write() would make the whole  
exercise futile?

-- 
Henri Sivonen
<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">hsivonen at iki.fi</A>
<A HREF="http://hsivonen.iki.fi/">http://hsivonen.iki.fi/</A>



</PRE>


<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000857.html">[imps] &lt;div&gt;&lt;/form&gt;
</A></li>
	<LI>Next message: <A HREF="000515.html">[imps] Tree construction test in undocumented format
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#514">[ date ]</a>
              <a href="thread.html#514">[ thread ]</a>
              <a href="subject.html#514">[ subject ]</a>
              <a href="author.html#514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">More information about the Implementors
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
