<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [imps] validator front end not talking to servlet
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5Bimps%5D%20validator%20front%20end%20not%20talking%20to%20servlet&In-Reply-To=%3CCABzn3dXRNqKV9nU64zdcpNzx%2BWns6vJH8ophtrX7pszHk1XQyA%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="001004.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[imps] validator front end not talking to servlet</H1>
<!--htdig_noindex-->
    <B>Rancid Iodine</B> 
    <A HREF="mailto:implementors%40lists.whatwg.org?Subject=Re%3A%20%5Bimps%5D%20validator%20front%20end%20not%20talking%20to%20servlet&In-Reply-To=%3CCABzn3dXRNqKV9nU64zdcpNzx%2BWns6vJH8ophtrX7pszHk1XQyA%40mail.gmail.com%3E"
       TITLE="[imps] validator front end not talking to servlet">rancid.iodine at gmail.com
       </A><BR>
    <I>Tue Apr 17 09:57:17 PDT 2012</I>
    <P><UL>
        
        <LI>Next message: <A HREF="001004.html">[imps] validator front end not talking to servlet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#657">[ date ]</a>
              <a href="thread.html#657">[ thread ]</a>
              <a href="subject.html#657">[ subject ]</a>
              <a href="author.html#657">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--/htdig_noindex-->
<!--beginarticle-->
<PRE>Hi Mike,

Following your advice to build the service using &quot;python build/build.py
--local run&quot;, I was pleased to find this does indeed initialise a service
on the default port 8888.

It's possible to telnet to this service on that port (or indeed whatever
other port xxx I make the servlet run on using &quot;python build/build
--port=xxx --local run &quot;), but the markup validator &quot;front end&quot; seems to
have a problem talking to the servlet.

The problem is seen to be a &quot;504 gateway timeout&quot; according to the markup
validator, and shown thus:

External Checker not available

Checking the Document Type of this document requires the help of an
external tool which was either not enabled in this validator, or is
currently unavailable. Check in the validator's system configuration that
HTML5 Validator is enabled and functional.

The error encountered was: 504 Gateway Time-out

The actual servlet process looks like this:
[<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">root at vp-w3c-validator12</A> config]# ps -ef | grep 4244
root      4244  4235  1 17:15 pts/1    00:00:09 java
-XX:-DontCompileHugeMethods -Xms131072k -Xmx131072k
-XX:ThreadStackSize=2048 -classpath
./dependencies/commons-codec-1.4/commons-codec-1.4.jar:./dependencies/commons-httpclient-3.1/commons-httpclient-3.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-1.1.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-adapters-1.1.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-api-1.1.1.jar:./dependencies/icu4j-charsets-4_4_2.jar:./dependencies/icu4j-4_4_2.jar:./dependencies/iri-0.5/lib/iri.jar:./dependencies/jetty-6.1.26/lib/servlet-api-2.5-20081211.jar:./dependencies/jetty-6.1.26/lib/jetty-6.1.26.jar:./dependencies/jetty-6.1.26/lib/jetty-util-6.1.26.jar:./dependencies/jetty-6.1.26/lib/ext/jetty-ajp-6.1.26.jar:./dependencies/apache-log4j-1.2.15/log4j-1.2.15.jar:./dependencies/rhino1_7R1/js.jar:./dependencies/xerces-2_9_1/xercesImpl.jar:./dependencies/xerces-2_9_1/xml-apis.jar:./dependencies/slf4j-1.5.2/slf4j-log4j12-1.5.2.jar:./dependencies/commons-fileupload-1.2.1/lib/commons-fileupload-1.2.1.jar:./dependencies/isorelax.jar:./dependencies/mozilla/intl/chardet/java/dist/lib/chardet.jar:./dependencies/saxon9.jar:./jars/non-schema.jar:./jars/io-xml-util.jar:./jars/htmlparser.jar:./jars/hs-aelfred2.jar:./jars/html5-datatypes.jar:./jars/validator.jar:jing-trang/build/jing.jar
-Dnu.validator.servlet.log4j-properties=validator/log4j.properties
-Dnu.validator.servlet.version=3
-Dnu.validator.servlet.service-name=Validator.nu
-Dorg.whattf.datatype.lang-registry=file:local-entities/
www.iana.org/assignments/language-subtag-registry-Dorg.whattf.datatype.charset-registry=file:local-entities/
www.iana.org/assignments/character-sets -Dorg.whattf.datatype.warn=true
-Dnu.validator.servlet.about-page=<A HREF="http://about.validator.nu/-Dnu.validator.servlet.style-sheet=style.css">http://about.validator.nu/-Dnu.validator.servlet.style-sheet=style.css</A>
-Dnu.validator.servlet.icon=icon.png
-Dnu.validator.servlet.script=script.js
-Dnu.validator.spec.microsyntax-descriptions=file:local-entities/
wiki.whatwg.org/wiki/MicrosyntaxDescriptions-Dnu.validator.spec.alt-advice=file:local-entities/
wiki.whatwg.org/wiki/Validator.nu_alt_advice-Dnu.validator.spec.html5-load=file:validator/spec/html5.html
-Dnu.validator.spec.html5-link=
<A HREF="http://www.whatwg.org/specs/web-apps/current-work/-Dnu.validator.servlet.max-file-size=7340032">http://www.whatwg.org/specs/web-apps/current-work/-Dnu.validator.servlet.max-file-size=7340032</A>
-Dnu.validator.servlet.connection-timeout=5000
-Dnu.validator.servlet.socket-timeout=5000
-Dnu.validator.servlet.use-local-copies=1
-Dnu.validator.servlet.w3cbranding=0
-Dorg.mortbay.http.HttpRequest.maxFormContentSize=7340032
-Dnu.validator.servlet.host.generic= -Dnu.validator.servlet.host.html5=
-Dnu.validator.servlet.host.parsetree=
-Dnu.validator.servlet.path.generic=/
-Dnu.validator.servlet.path.html5=/html5/
-Dnu.validator.servlet.path.parsetree=/parsetree/
-Dnu.validator.servlet.path.about=./validator/site/
nu.validator.servlet.Main 8888

The relevant entries in the validator.conf are:

&lt;External&gt;
HTML5 = <A HREF="http://localhost:8888/html5/">http://localhost:8888/html5/</A>
CompoundXML = <A HREF="http://localhost:8888/">http://localhost:8888/</A>
&lt;/External&gt;

I'm not quite sure what's going wrong here. Does anyone have any experience
of this?

Thanks for your comments,

Andrei

On 29 March 2012 17:17, Michael[tm] Smith &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">mike at w3.org</A>&gt; wrote:

&gt;<i> Please try &quot;python build/build.py --local run&quot;
</I>&gt;<i>
</I>&gt;<i>  --Mike
</I>&gt;<i>
</I>&gt;<i> Rancid Iodine &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">rancid.iodine at gmail.com</A>&gt;, 2012-03-29 17:11 +0100:
</I>&gt;<i>
</I>&gt;<i> &gt; I ran
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; python build/build.py --local all
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; but still end up getting the timeouts after &quot;BUILD SUCCESSFUL&quot;.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The 1st time is here:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &quot;java&quot; -classpath
</I>&gt;<i> &gt;
</I>&gt;<i> ./dependencies/commons-codec-1.4/commons-codec-1.4.jar:./dependencies/commons-httpclient-3.1/commons-httpclient-3.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-1.1.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-adapters-1.1.1.jar:./dependencies/commons-logging-1.1.1/commons-logging-api-1.1.1.jar:./dependencies/icu4j-charsets-4_4_2.jar:./dependencies/icu4j-4_4_2.jar:./dependencies/iri-0.5/lib/iri.jar:./dependencies/jetty-6.1.26/lib/servlet-api-2.5-20081211.jar:./dependencies/jetty-6.1.26/lib/jetty-6.1.26.jar:./dependencies/jetty-6.1.26/lib/jetty-util-6.1.26.jar:./dependencies/jetty-6.1.26/lib/ext/jetty-ajp-6.1.26.jar:./dependencies/apache-log4j-1.2.15/log4j-1.2.15.jar:./dependencies/rhino1_7R1/js.jar:./dependencies/xerces-2_9_1/xercesImpl.jar:./dependencies/xerces-2_9_1/xml-apis.jar:./dependencies/slf4j-1.5.2/slf4j-log4j12-1.5.2.jar:./dependencies/commons-fileupload-1.2.1/lib/commons-fileupload-1.2.1.jar:./dependencies/isorelax.jar:./dependencies/mozilla/intl/chardet/java/dist/lib/chardet.jar:./dependencies/saxon9.jar:./dependencies/jsontools-core-1.5.jar:./dependencies/antlr.jar:./dependencies/xom-1.1.jar:./dependencies/junit-4.4.jar:./dependencies/apache-ant-1.7.0/lib/ant.jar:./dependencies/apache-ant-1.7.0/lib/ant-launcher.jar:./jars/non-schema.jar:./jars/io-xml-util.jar:./jars/htmlparser.jar:./jars/hs-aelfred2.jar:./jars/html5-datatypes.jar:./jars/test-harness.jar:jing-trang/build/jing.jar
</I>&gt;<i> &gt; org.whattf.syntax.Driver
</I>&gt;<i> &gt; Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> org.whattf.datatype.Html5DatatypeLibrary.createDatatype(Html5DatatypeLibrary.java:134)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> org.whattf.datatype.Html5DatatypeLibrary.createDatatypeBuilder(Html5DatatypeLibrary.java:52)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.impl.SchemaBuilderImpl.makeDataPatternBuilder(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.DataExpr(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.PrimaryExpr(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.AnnotatedPrimaryExpr(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.UnaryExpr(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.Expr(Unknown
</I>&gt;<i> Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.Define(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.Definition(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.GrammarComponent(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.GrammarBody(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.IncludedGrammar(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.parseInclude(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactParseable.parseAsInclude(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.impl.SchemaBuilderImpl$IncludeImpl.endInclude(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.Include(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.GrammarComponent(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.GrammarBody(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt;
</I>&gt;<i> com.thaiopensource.relaxng.parse.compact.CompactSyntax.TopLevelGrammar(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.Input(Unknown
</I>&gt;<i> Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactSyntax.parse(Unknown
</I>&gt;<i> Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.parse.compact.CompactParseable.parse(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> com.thaiopensource.relaxng.impl.SchemaBuilderImpl.parse(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.relaxng.impl.SchemaReaderImpl.createSchema(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at
</I>&gt;<i> &gt; com.thaiopensource.validate.AbstractSchemaReader.createSchema(Unknown
</I>&gt;<i> &gt; Source)
</I>&gt;<i> &gt;         at org.whattf.syntax.Driver.schemaByFilename(Driver.java:122)
</I>&gt;<i> &gt;         at org.whattf.syntax.Driver.checkDirectory(Driver.java:202)
</I>&gt;<i> &gt;         at org.whattf.syntax.Driver.check(Driver.java:264)
</I>&gt;<i> &gt;         at org.whattf.syntax.Driver.main(Driver.java:296)
</I>&gt;<i> &gt; Caused by: java.lang.RuntimeException: java.net.ConnectException:
</I>&gt;<i> &gt; Connection timed out
</I>&gt;<i> &gt;         at org.whattf.datatype.Charset.&lt;clinit&gt;(Charset.java:50)
</I>&gt;<i> &gt;         ... 30 more
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; On 29 March 2012 16:51, Michael[tm] Smith &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">mike at w3.org</A>&gt; wrote:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; &gt; Rancid Iodine &lt;<A HREF="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">rancid.iodine at gmail.com</A>&gt;, 2012-03-29 16:44 +0100:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Even so, the java (post- &quot;BUILD SUCCESSFUL&quot;) compilation part of the
</I>&gt;<i> &gt; &gt; build
</I>&gt;<i> &gt; &gt; &gt; procedure would still have the problem getting through our
</I>&gt;<i> firewall/proxy
</I>&gt;<i> &gt; &gt; &gt; which I mentioned before, would it not?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; You should not have that problem if you run the build script with the
</I>&gt;<i> &gt; &gt; &quot;--local&quot; option.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt;  --Mike
</I>&gt;<i> &gt; &gt;
</I>&gt;<i>
</I>&gt;<i> --
</I>&gt;<i> Michael[tm] Smith <A HREF="http://people.w3.org/mike/+">http://people.w3.org/mike/+</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.whatwg.org/pipermail/implementors-whatwg.org/attachments/20120417/16b38b20/attachment-0001.htm">http://lists.whatwg.org/pipermail/implementors-whatwg.org/attachments/20120417/16b38b20/attachment-0001.htm</A>&gt;
</PRE>

<!--endarticle-->
<!--htdig_noindex-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="001004.html">[imps] validator front end not talking to servlet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#657">[ date ]</a>
              <a href="thread.html#657">[ thread ]</a>
              <a href="subject.html#657">[ subject ]</a>
              <a href="author.html#657">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.whatwg.org/listinfo.cgi/implementors-whatwg.org">More information about the Implementors
mailing list</a><br>
<!--/htdig_noindex-->
</body></html>
