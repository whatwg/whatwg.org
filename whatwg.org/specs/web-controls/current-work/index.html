<!DOCTYPE html>

<html lang="en-GB-hixie">
 <head>
  <title>Web Controls 1.0</title>

  <link href="/style/specification" rel="stylesheet" type="text/css">

  <link href="/images/icon" rel="icon">

  <style>
   * { color: gray ! important; background: none ! important; border-color: silver ! important; }
   img, object, iframe { filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); -webkit-filter: grayscale(100%); }
   .obsolete { border: double thick red ! important; background: yellow ! important; margin: 4em auto 0 auto; max-width: 50em; width: 70%; text-align: center; position: fixed;  z-index: 10000;  top: 0; left: 0; right: 0; }
   .obsolete a { color: blue ! important; white-space: nowrap; }
   .obsolete p { font: 900 2em sans-serif; color: red ! important; margin: 1em 1.5em ! important; }
  </style>

 <body class="draft">

  <div class=obsolete>
   <p>This draft is obsolete and will not be further updated.</p>
  </div>

  <div class="head">
   <p><a class="logo" href="https://whatwg.org/" rel="home"><img
    alt="WHATWG" src="/images/logo"></a></p>

   <h1 id="web-controls">Web Controls 1.0</h1>

   <h2 class="no-num no-toc" id="working">Working Draft 8 November 2004</h2>

   <dl>
    <dt>This version:

    <dd><a
     href="https://whatwg.org/specs/web-controls/current-work/">https://whatwg.org/specs/web-controls/current-work/</a>

    <dt>Latest version:

    <dd><a
     href="https://whatwg.org/specs/web-controls/current-work/">https://whatwg.org/specs/web-controls/current-work/</a></dd>

    <dt>Editor:

    <dd>Ian Hickson, Opera Software, ian@hixie.ch
   </dl>

   <p class="copyright">&copy; Copyright 2004 Apple Computer, Inc., Mozilla
    Foundation, and Opera Software ASA.</p>

   <p class="copyright">You are granted a license to use, reproduce and
    create derivative works of this document.</p>
  </div>

  <hr>

  <h2 class="no-num no-toc" id="abstract">Abstract</h2>

  <p>...

  <div class="critical">
   <h2 class="no-num no-toc" id="status">Status of this document</h2>

   <p><strong>This is a work in progress!</strong> This document is changing
    on a daily if not hourly basis in response to comments and as a general
    part of its development process. Comments are very welcome, please send
    them to <a href="mailto:whatwg@whatwg.org">whatwg@whatwg.org</a>. Thank
    you.</p>

   <p>It is very wrong to cite this as anything other than a work in
    progress. Do not implement this in a production product. It is not ready
    yet! At all!</p>
  </div>

  <p>This document is the result of a loose collaboration between interested
   parties in the context of the <a href="https://whatwg.org/">Web
   hypertext application technology working group</a>. To become involved in
   the development of this document, please send comments to the address
   given above. <strong>Your input will be taken into consideration.</strong>

  <p>This is a working draft and may therefore be updated, replaced or
   rendered obsolete by other documents at any time. It is inappropriate to
   use Working Drafts as reference material or to cite them as other than
   "work in progress".

  <p>This draft may contain namespaces that use the <code>data:</code> URI
   scheme. These are temporary and will be changed before this specification
   is ready to be implemented.

  <p>To find the latest version of this working draft, please follow the
   "Latest version" link above.

  <h2 class="no-num no-toc" id="contents">Table of contents</h2>
  <!--begin-toc-->

  <ul class="toc">
   <li><a href="#introduction"><span class="secno">1. </span>Introduction</a>

    <ul class="toc">
     <li><a href="#relationship"><span class="secno">1.1. </span>Relationship
      to Web Forms 2.0</a>

     <li><a href="#relationship0"><span class="secno">1.2.
      </span>Relationship to Web Apps 1.0</a>

     <li><a href="#relationship1"><span class="secno">1.3.
      </span>Relationship to XBL 2.0</a>

     <li><a href="#relationship2"><span class="secno">1.4.
      </span>Relationship to CSS3 UI</a>

     <li><a href="#conformance"><span class="secno">1.5. </span>Conformance
      requirements</a>

     <li><a href="#terminology"><span class="secno">1.6.
      </span>Terminology</a>
    </ul>

   <li><a href="#x"><span class="secno">2. </span>...</a>
    <ul class="toc">
     <li><a href="#the-appearance"><span class="secno">2.1. </span>The
      'appearance' property</a>

     <li><a href="#pseudo-classes"><span class="secno">2.2.
      </span>Pseudo-classes</a>

     <li><a href="#focus"><span class="secno">2.3. </span>Focus</a>

     <li><a href="#key-handling"><span class="secno">2.4. </span>Key
      handling</a>
    </ul>

   <li><a href="#properties"><span class="secno">3. </span>Properties for
    selection, focus, and editing</a>
    <ul class="toc">
     <li><a href="#text-selection"><span class="secno">3.1. </span>Text
      Selection</a>

     <li><a href="#focus0"><span class="secno">3.2. </span>Focus</a>

     <li><a href="#editing"><span class="secno">3.3. </span>Editing</a>

     <li><a href="#changes"><span class="secno">3.4. </span>Changes to
      text-transform</a>

     <li><a href="#changes0"><span class="secno">3.5. </span>Changes to
      position</a>
    </ul>

   <li><a href="#dom-interfaces"><span class="secno">4. </span>DOM
    Interfaces</a>
    <ul class="toc">
     <li><a href="#the-documentui"><span class="secno">4.1. </span>The
      DocumentUI Interface</a>

     <li><a href="#the-elementui"><span class="secno">4.2. </span>The
      ElementUI Interface</a>

     <li><a href="#popup"><span class="secno">4.3. </span>Popup Display
      Events</a>

     <li><a href="#ui-exceptions"><span class="secno">4.4. </span>UI
      Exceptions</a>

     <li><a href="#the-window"><span class="secno">4.5. </span>The Window
      Interface</a>
    </ul>

   <li><a href="#references">References</a>

   <li><a href="#acknowledgements">Acknowledgements</a>
  </ul>
  <!--end-toc-->

  <hr>

  <h2 id="introduction"><span class="secno">1. </span>Introduction</h2>

  <p>...

  <h3 id="relationship"><span class="secno">1.1. </span>Relationship to Web
   Forms 2.0</h3>

  <h3 id="relationship0"><span class="secno">1.2. </span>Relationship to Web
   Apps 1.0</h3>

  <h3 id="relationship1"><span class="secno">1.3. </span>Relationship to XBL
   2.0</h3>

  <h3 id="relationship2"><span class="secno">1.4. </span>Relationship to CSS3
   UI</h3>

  <p>The CSS3 UI specification <a href="#refsCSS3UI">[CSS3UI]</a> introduces
   a number of properties suitable for Web-based application development.
   This specification expands on those properties and specifies their
   interaction with scripting-based environments and the DOM.

  <h3 id="conformance"><span class="secno">1.5. </span>Conformance
   requirements</h3>

  <p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in <a
   href="#refsRFC2119">[RFC2119]</a>.

  <p>Diagrams, examples, and notes are non-normative. All other content in
   this specification is intended to be normative.

  <p>Documents that use the new features described in this specification
   using HTML over HTTP must be served as <code>text/html</code>. Documents
   that use the new features described in this specification using XHTML or
   other XML languages over HTTP must be served using an XML MIME type such
   as <code>application/xml</code> or <code>application/xhtml+xml</code>. <a
   href="#refsRFC3023">[RFC3023]</a>

  <p>(In other words, for the purposes of <a
   href="#refsRFC2854">[RFC2854]</a>, documents conforming to this
   specification using its HTML formulation should be considered HTML
   documents, but documents using the XML formulation should not be
   considered HTML-compatible.)</p>
  <!--#include virtual = "../crec.inc" -->

  <h3 id="terminology"><span class="secno">1.6. </span>Terminology</h3>

  <p>...

  <h2 id="x"><span class="secno">2. </span>...</h2>

  <p>...

  <h3 id="the-appearance"><span class="secno">2.1. </span>The 'appearance'
   property</h3>

  <p>CSS3 UI <a href="#refsCSS3UI">[CSS3UI]</a>

  <p>The exact appearance used will vary based on other properties and out of
   band data. In particular, the metadata and dynamic states described in the
   section on the <span>ElementUI</span> DOM interface directly affect how
   widgets are rendered. For example, a checkbox will look different based on
   whether the <span class="dom">STATE_GROUP_CHECKED</span> state is set to
   <span class="dom">STATE_CHECKED_UNCHECKED</span>, <span
   class="dom">STATE_CHECKED_CHECKED</span>, or <span
   class="dom">STATE_CHECKED_INDETERMINATE</span>. Progress bars, scroll bars
   and sliders (track bars) use the <span
   class="dom">STATE_GROUP_VALUE</span> metadata state to determine their
   position. The value 0 represents the lowest progress/scroll
   position/slider position, and the value 2<sup>16</sup>-1 (65535)
   represents the highest progress/scroll position/slider position.
   <!--XXX These values are arbitrary. Do we want something
    else?-->

  <h3 id="pseudo-classes"><span class="secno">2.2. </span>Pseudo-classes</h3>

  <p>The following dynamic pseudo-classes are defined in terms of state
   information that can be manipulated through the DOM.

  <dl>
   <dt>:active

   <dd>This pseudo-class matches the element that has its DYNAMIC_ACTIVE
    state set, if any.

   <dt>:hover

   <dd>This pseudo-class matches the element that has its DYNAMIC_HOVER state
    set, if any, as well as any ancestors of that element.

   <dt>:focus

   <dd>This pseudo-class matches the element which has focus, if any, as well
    as all its ancestors. See the <code class="dom">focus()</code> and <code
    class="dom">focusByMethod()</code> methods.

   <dt>:open

   <dd>This element matches all elements which have their DYNAMIC_OPEN state
    set.

   <dt>:closed

   <dd>This element matches all elements which have their DYNAMIC_OPEN state
    unset.

   <dt>:enabled

   <dd>This pseudo-class matches all elements that their STATE_GROUP_ENABLED
    state set to STATE_ENABLED_ENABLED, and whose ancestors (including those
    that are not focusable) all have their STATE_GROUP_ENABLED state set to
    STATE_ENABLED_ENABLED.

   <dt>:disabled

   <dd>This pseudo-class matches all elements that have either their
    STATE_GROUP_ENABLED state set to STATE_ENABLED_DISABLED or which have an
    ancestor whose STATE_GROUP_ENABLED state set to STATE_ENABLED_DISABLED
    (including ancestors that cannot be focused).

   <dt>:checked

   <dd>This element matches all elements which have their STATE_GROUP_CHECKED
    state set to STATE_CHECKED_CHECKED.

   <dt>:unchecked

   <dd>This element matches all elements which have their STATE_GROUP_CHECKED
    state set to STATE_CHECKED_UNCHECKED.

   <dt>:indeterminate

   <dd>This element matches all elements which have their STATE_GROUP_CHECKED
    state set to STATE_CHECKED_INDETERMINATE.

   <dt>:selected

   <dd>This element matches all elements which have their
    STATE_GROUP_SELECTED state set to STATE_CHECKED_SELECTED. This
    pseudo-class is unrelated to the similarly named ::selection
    pseudo-element, which applies to the text selection.

   <dt>:unselected

   <dd>This element matches all elements which have their
    STATE_GROUP_SELECTED state set to STATE_CHECKED_UNSELECTED.

   <dt>:default

   <dd>This pseudo-class matches elements that have their STATE_GROUP_DEFAULT
    state set to STATE_DEFAULT_DEFAULT.

   <dt>:valid

   <dd>This element matches all elements which have their STATE_GROUP_VALID
    state set to STATE_VALID_VALID.

   <dt>:invalid

   <dd>This element matches all elements which have their STATE_GROUP_VALID
    state set to STATE_VALID_INVALID.

   <dt>:required

   <dd>This element matches all elements which have their
    STATE_GROUP_REQUIRED state set to STATE_REQUIRED_REQUIRED.

   <dt>:optional

   <dd>This element matches all elements which have their
    STATE_GROUP_REQUIRED state set to STATE_REQUIRED_OPTONAL.

   <dt>:read-only

   <dd>This element matches all elements which have their STATE_GROUP_DATA
    state set to exactly STATE_DATA_READABLE. Note that this is independent
    of the actual editable state of the control as presented to the user. The
    actual state of the control is governed by the computed value of the
    <span class="property"><a href="#user-modify">'user-modify'</a></span>
    property on a per-view basis, while the :read-only pseudo-class relates
    to the intended state of the control as set by the data model or other
    script.

   <dt>:read-write

   <dd>This element matches all elements which have their STATE_GROUP_DATA
    state set to exactly STATE_DATA_EDITABLE. Note that this is independent
    of the actual editable state of the control as presented to the user. The
    actual state of the control is governed by the computed value of the
    <span class="property"><a href="#user-modify">'user-modify'</a></span>
    property on a per-view basis, while the :read-write pseudo-class relates
    to the intended state of the control as set by the data model or other
    script.

   <dt>:write-only

   <dd>This element matches all elements which have their STATE_GROUP_DATA
    state set to exactly STATE_DATA_WRITABLE. Note that this is independent
    of the actual editable state of the control as presented to the user. The
    actual state of the control is governed by the computed value of the
    <span class="property"><a href="#user-modify">'user-modify'</a></span>
    property on a per-view basis, while the :write-only pseudo-class relates
    to the intended state of the control as set by the data model or other
    script.</dd>
   <!--
:form(fname), taking an idref parameter, selects all form controls, groups, switches, and repeats associated with the XForms Model with an id of fname.

:repeat-cursor (modulo rename of 'cursor') selects all currently selected/active/focused repeat-items. (should this be a pseudo-class or pesudo-element?)
-->
  </dl>

  <p>See the <span>ElementUI</span> section for details explaining how to
   toggle these pseudo-classes.

  <p class="issue">When the UI module is in CR, this draft will need to be
   updated to take into account the other pseudo-classes from that module.</p>
  <!--
    <h3>Icons</h3>

    <p>The 'icon' property doesn't do anything directly. User agents
    may use its value as a symbol representing the element or page in
    question. The icon of the root element may be used to represent
    the entire document. For example, user agents often have a session
    history feature; a graphical view of the session history could use
    the 'icon' property of the root element of each document to draw a
    picture next to each entry.</p>

    <p>The icon associated with an element may also be used to select
    the icon used to provide feedback during drag-and-drop
    operations.</p>

    <p>This property is unrelated to the similarly named '::icon'
    pseudo-element.</p>
-->

  <h3 id="focus"><span class="secno">2.3. </span>Focus</h3>

  <p>In UAs that implement this module, the 'nav-index' property doesn't do
   anything directly. It is used by methods on the DocumentUI interface to
   determine the order used for sequential focus changing (what is commonly
   referred to as "tab order").<!--
    See XXX-->

  <p>The value none means that the element is not part of the normal tab
   order, regardless of the value of 'user-can-focus'. <!--XXX-->

  <p>The value 'auto' means that the UA may decide where in the tab order the
   element goes.

  <p>The directional navigational properties ('nav-up' and so forth)
   similarly work in terms of the directional focus methods.

  <h3 id="key-handling"><span class="secno">2.4. </span>Key handling</h3>

  <p>The 'key-equivalent' property doesn't do anything directly. It is used
   by in XBL as a filter for key events. <!--XXX--> The idea is that if the
   <span><a href="#window">window</a></span> receives a key event that
   matches an element's key-equivalent, that element will be sent a separate
   event. <!--(XXX cross ref; what event?)-->

  <p class="issue">A further draft will explain this in more detail.

  <h2 id="properties"><span class="secno">3. </span>Properties for selection,
   focus, and editing</h2>

  <p>Unlike the UI module properties, which apply to non-scriptable
   environments as well as dynamic, scriptable UAs, these properties control
   features that are directly related to the DOM.

  <h3 id="text-selection"><span class="secno">3.1. </span>Text Selection</h3>

  <table class="propdef" id="user-can-select0">
   <caption> <dfn id="user-can-select">'user-can-select'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>never | always | only-with-modifier

    <tr>
     <td><em>Initial:</em>

     <td>always

    <tr>
     <td><em>Applies To:</em>

     <td>all elements and generated content

    <tr>
     <td><em>Inherited:</em>

     <td>yes

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <p>A property to decide if the UA should allow inline selection. Note that
   this is a distinct concept from element selection -- an element can be
   flagged as selected independently of its contents being selected.

  <dl>
   <dt>never

   <dd>The contents of the element cannot be selected.

   <dt>always

   <dd>The contents of the element can be selected using the default
    UA-defined mechanism.

   <dt>only-with-modifier

   <dd>The contents of the element may only be selected using an alternate
    UA-defined selection mechanism.
  </dl>

  <p>For example, if by default a UA uses mouse dragging as a selection
   mechanism, then with 'user-can-select' is set to 'only-with-modifier' the
   same UA could change to mouse dragging with the shift key held down. The
   name 'only-with-modifier' is not meant to restrict the alternate
   mechanism, only to indicate that the UA should not enable the default
   selection mechanism.

  <p>When an elements' contents are selected (in part, in whole, or as part
   of a greater selection), that element contains a ::selection
   pseudo-element which applies to that selection. <!--See
    XXX.-->

  <p>User agents may treat the <span class="css">never</span> value as <span
   class="css">only-with-modifier</span> in untrusted documents, which
   typically would cover any document on the web, although the exact
   definition of 'trusted' is UA-defined and may be dependent on user
   preferences.

  <h3 id="focus0"><span class="secno">3.2. </span>Focus</h3>
  <!--
    <table class="propdef">
      <caption>
        <dfn>'user-can-focus-pointer'</dfn>
      </caption>

      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>takes-focus | leaves-focus | resets-focus</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>leaves-focus</td>
        </tr>
        <tr>
          <td><em>Applies To:</em></td>
          <td>all elements (but not pseudo-elements)</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <table class="propdef">
      <caption>
        <dfn>'user-can-focus-key'</dfn>
      </caption>

      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>takes-focus | leaves-focus | resets-focus</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>leaves-focus</td>
        </tr>
        <tr>
          <td><em>Applies To:</em></td>
          <td>all elements (but not pseudo-elements)</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>

    <table class="propdef">
      <caption>
        <dfn>'user-can-focus-unknown'</dfn>
      </caption>

      <tbody>
        <tr>
          <td><em>Value:</em></td>
          <td>takes-focus | leaves-focus | resets-focus</td>
        </tr>
        <tr>
          <td><em>Initial:</em></td>
          <td>leaves-focus</td>
        </tr>
        <tr>
          <td><em>Applies To:</em></td>
          <td>all elements (but not pseudo-elements)</td>
        </tr>
        <tr>
          <td><em>Inherited:</em></td>
          <td>no</td>
        </tr>
        <tr>
          <td><em>Percentages:</em></td>
          <td>n/a</td>
        </tr>
        <tr>
          <td><em>Media:</em></td>
          <td>visual</td>
        </tr>
        <tr>
          <td><em>Computed Value:</em></td>
          <td>specified value</td>
        </tr>
      </tbody>
    </table>
-->
  <!-- XXX should above be -none rather than -unknown? -->

  <table class="propdef" id="user-can-focus0">
   <caption> <dfn id="user-can-focus">'user-can-focus'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>takes-focus | leaves-focus | resets-focus

    <tr>
     <td><em>Initial:</em>

     <td>leaves-focus

    <tr>
     <td><em>Applies To:</em>

     <td>all elements (but not pseudo-elements)

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <p>These properties decide if the UA should allow an element to gain focus.

  <dl>
   <dt>takes-focus

   <dd>If an attempt is made to focus the element, the active focus is moved
    to the element.

   <dt>leaves-focus

   <dd>If an attempt is made to focus the element, and none of the element's
    ancestors have their 'user-can-focus' property set to 'takes-focus', then
    nothing changes, otherwise focus is transferred to the nearest ancestor
    element with 'takes-focus' set.

   <dt>resets-focus

   <dd>If an attempt is made to focus the element, and none of the element's
    ancestors have their 'user-can-focus' property set to 'takes-focus', then
    focus is reset to the window, otherwise focus is transferred to the
    nearest ancestor element with 'takes-focus' set.
  </dl>

  <p>In this definition, the <dfn id="window">window</dfn> is a
   user-agent-defined construct, typically related to the viewport. When the
   window has focus, the user is typically able to scroll the document using
   arrow keys on a keyboard.</p>
  <!--
    <p>The property 'user-can-focus-key' applies when the focus change
    was requested via a keyboard event, and the property
    'user-can-focus-pointer' applies when the focus change was
    requested via a pointer event. When the source of the focus change
    is unknown, the 'user-can-focus-unknown' property applies. This
    happens when script changes the focus using the generic focus()
    method, e.g. in an onload handler where no particular user action
    is the source of the focus change.</p>

    <p>The property 'user-can-focus' can be used as a shorthand for setting the other three
    properties.</p>
-->
  <!--<p>XXX insert text here explaining how this interacts with element.focus* or whatever we call it
    XXX</p>-->

  <p>Note that this property has no <em>direct</em> effect on the <span
   class="css">:focus</span> pseudo-class. This property merely determines
   whether an element can <em>gain</em> focus in a particular view, not
   whether it can <em>retain</em> focus.

  <table class="propdef" id="user-focus-select-pointer0">
   <caption> <dfn
    id="user-focus-select-pointer">'user-focus-select-pointer'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>all | reset | ignore

    <tr>
     <td><em>Initial:</em>

     <td>ignore

    <tr>
     <td><em>Applies To:</em>

     <td>all elements with <span class="css">user-can-focus<!-- -pointer-->:
      takes-focus</span> and <span class="css">user-can-select: always</span>

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <table class="propdef" id="user-focus-select-key0">
   <caption> <dfn id="user-focus-select-key">'user-focus-select-key'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>all | reset | ignore

    <tr>
     <td><em>Initial:</em>

     <td>ignore

    <tr>
     <td><em>Applies To:</em>

     <td>all elements with <span class="css">user-can-focus<!-- -key -->:
      takes-focus</span> and <span class="css">user-can-select: always</span>

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <table class="propdef" id="user-focus-select-unknown0">
   <caption> <dfn
    id="user-focus-select-unknown">'user-focus-select-unknown'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>all | reset | ignore

    <tr>
     <td><em>Initial:</em>

     <td>ignore

    <tr>
     <td><em>Applies To:</em>

     <td>all elements with <span class="css">user-can-focus<!-- -unknown -->:
      takes-focus</span> and <span class="css">user-can-select: always</span>

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <table class="propdef" id="user-focus-select0">
   <caption> <dfn id="user-focus-select">'user-focus-select'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>all | reset | ignore

    <tr>
     <td><em>Initial:</em>

     <td>not defined for shorthand properties

    <tr>
     <td><em>Applies To:</em>

     <td>see prose

    <tr>
     <td><em>Inherited:</em>

     <td>no

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>visual

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <p>These properties explain what part of the contents of the element should
   be selected when focussing the element.

  <dl>
   <dt>all

   <dd>If the element is focused, all its contents should be selected.

   <dt>reset

   <dd>If the element is focused, then the selection is reset.

   <dt>ignore

   <dd>Nothing happens to the selection is the element is focused.
  </dl>

  <p>The property 'user-focus-select-key' applies when the focus change was
   requested via a keyboard event, the property 'user-focus-select-pointer'
   applies when the focus change was requested via a pointer event, and the
   property 'user-focus-select-unknown' applies in other cases. The property
   'user-focus-select' can be used as a shorthand for setting the other two
   properties.</p>
  <!--<p>XXX insert text here explaining how this interacts with
    element.focus() et al XXX</p>

    <p>See the XXX section on the scope of the selection.</p>-->

  <h3 id="editing"><span class="secno">3.3. </span>Editing</h3>

  <table class="propdef" id="user-modify0">
   <caption> <dfn id="user-modify">'user-modify'</dfn></caption>

   <tbody>
    <tr>
     <td><em>Value:</em>

     <td>read-only | all | [ add-text || edit-text || add-elements ||
      move-elements || attributes || deletable ]

    <tr>
     <td><em>Initial:</em>

     <td>read-only

    <tr>
     <td><em>Applies To:</em>

     <td>all elements that can obtain focus

    <tr>
     <td><em>Inherited:</em>

     <td>yes

    <tr>
     <td><em>Percentages:</em>

     <td>n/a

    <tr>
     <td><em>Media:</em>

     <td>interactive

    <tr>
     <td><em>Computed Value:</em>

     <td>specified value
  </table>

  <p>This property establishes whether the UA should allow editing of the
   node and its children.

  <dl>
   <dt>read-only

   <dd>The element should not be editable by the user (unless overriden by
    the UA, e.g. if the user invokes an "edit" mode on the document).

   <dt>all

   <dd>Any child node may be edited and the element itself may be deleted.
    This is equivalent to specifying all the other flags together.

   <dt>children

   <dd>Equivalent to <span class="css">add-text edit-text add-elements
    move-elements</span>

   <dt>add-text

   <dd>New text nodes may be added to the element and edited.

   <dt>edit-text

   <dd>Any existing child text and CDATA nodes of the element may be edited.

   <dt>add-elements

   <dd>Child elements may be inserted.

   <dt>move-elements

   <dd>Child elements may be moved.

   <dt>attributes

   <dd>The attributes of the element may be added, changed, and removed.

   <dt>deletable

   <dd>The element itself may be deleted.
  </dl>

  <p>This property is inherited, but only applies to editing the element
   itself and its immediate children. The following makes an element
   <code>foo</code> and its children all completely editable:

  <pre class="example">foo, foo * { user-modify: all; }</pre>

  <p>That would also allow the element itself to be deleted, however. In
   order to disallow that, the following rules would be used:

  <pre class="example">foo { user-modify: children; }
foo * { user-modify: all; }</pre>

  <p>The exact mechanisms used to enable editing is up to the UA. <!--The
    intent is that the behaviour of the HTML <code
    class='xml'>textarea</code> element should be covered by:</p>

<pre class="example">
textarea { white-space: XXX }
</pre>-->


  <h3 id="changes"><span class="secno">3.4. </span>Changes to text-transform</h3>

  <p>The <span class="property">'text-transform'</span> property is modified
   to allow a string value to be used. When a string value is specified, all
   characters in the string are replaced with this string. For example:

  <pre class="example">
input[type=password] { text-transform: '*'; }
</pre>

  <p>This would replace each character in an input field with an asterisk, as
   seen in many existing web browsers.

  <h3 id="changes0"><span class="secno">3.5. </span>Changes to position</h3>

  <p>The value <span class="css">popup</span> is added to the <span
   class="property">'position'</span> property. When this value is applied to
   an element, the following changes apply:

  <ol>
   <li>The element is taken out of flow and not shown (same as <span
    class="css">display:none</span>).

   <li>If the element's <span class="property">'overflow'</span> property has
    a specified value of <span class="css">visible</span> then the computed
    value becomes <span class="css">hidden</span>. Other values stay
    unaffected.
  </ol>

  <p>The ElementUI interface can then be used to actually trigger the popup.</p>
  <!--    <h3>Changes to overflow</h3>

    <p>XXX this may be handled by the text module XXX</p>

    <p>The values <span class="css">crop-start</span>, <span
    class="css">crop-end</span> and <span
    class="css">crop-middle</span> are added to the <span
    class="property">'overflow'</span> property. When these value are
    applied to an element, the overflow behaviour is the same as for
    <span class="css">hidden</span>, except that for <span
    class="css">crop-start</span> (respectively <span
    class="css">crop-end</span>, <span class="css">crop-middle</span>)
    the text is XXX (respectively YYY, ZZZ).</p>

    <p>For example, the following fragment:</p>

<pre class="example">

div1 { display: block; border: solid; overflow: crop-start; height: 2em; width: 2em; }
div2 { display: block; border: solid; height: 4em; width: 10em; }
div3 { display: block; border: solid; height: 1em; width: 3em; }

&lt;div1&gt;
  &lt;div2&gt;
    &lt;html:a href="../"&gt;&lt;html:img src="foo" alt=""/&gt;&lt;/html:a&gt;
    Foo.
    &lt;div3&gt;
    &lt;/div3&gt;
  &lt;/div2&gt;
&lt;/div1&gt;
</pre>

    <p>...would render as:</p>

XXX
-->

  <h2 id="dom-interfaces"><span class="secno">4. </span>DOM Interfaces</h2>

  <h3 id="the-documentui"><span class="secno">4.1. </span>The DocumentUI
   Interface</h3>

  <p>The <code class="xml">DocumentUI</code> interface contains methods for
   moving focus around the document.

  <dl>
   <dt>IDL Definition

   <dd>
    <pre class="idl">
interface DocumentUI {
  void moveFocusForward()
  void moveFocusBackward()
  void moveFocusUp()
  void moveFocusRight()
  void moveFocusDown()
  void moveFocusLeft()
};
</pre>

   <dt>Properties

   <dd>Future drafts of this specification will provide properties for the
    current default element and the current focused element.</dd>
   <!-- XXX -->

   <dt>Methods

   <dd>
    <dl>
     <dt><code class="method-name">moveFocusForward</code>

     <dd>This uses <span class="property">'nav-index'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the next focussable element and focusses it.

     <dt><code class="method-name">moveFocusBackward</code>

     <dd>This uses <span class="property">'nav-index'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the previous focussable element and focusses it.

     <dt><code class="method-name">moveFocusUp</code>

     <dd>This uses <span class="property">'nav-up'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the next focussable element and focusses it.

     <dt><code class="method-name">moveFocusLeft</code>

     <dd>This uses <span class="property">'nav-left'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the next focussable element and focusses it.

     <dt><code class="method-name">moveFocusDown</code>

     <dd>This uses <span class="property">'nav-down'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the next focussable element and focusses it.

     <dt><code class="method-name">moveFocusRight</code>

     <dd>This uses <span class="property">'nav-right'</span> and <span
      class="property"><a href="#user-can-focus">'user-can-focus'</a></span>
      properties to find the next focussable element and focusses it.
    </dl>
  </dl>

  <h3 id="the-elementui"><span class="secno">4.2. </span>The ElementUI
   Interface</h3>

  <p>The <code class="dom">ElementUI</code> interface contains methods for
   displaying popups and toggling the state of dynamic pseudo-classes.</p>
  <!--
    <p>XXX It should be possible to toggle the state of psuedo-classes on elements dynamically, so that
    an element can be made to be <span class="css">:active</span> or not for example based on key
    events.</p>

    <p>XXX (List of togglable pseudo-classes and how they work (hierarchal or not))</p>

    <p>XXX the width and height of popups are taken from the relevant
    CSS properties, 'auto' meaning shrink-wrap &mdash need in particular
    to explain how to do the &lt;select&gt; drop down behaviour of
    shrink wrapping the main widget while taking into account the
    extra widget bits and checkboxes and stuff (the way to do this is
    probably to use the DOM to propagate style onMutation and
    onPopup.)</p>

    <p>XXX dynamically changing left, top, bottom, right, height and
    width of popups should work.</p>

    <p>XXX margins on display:popup elements translate into actual
    margins when the element is positioned &mdash the margin edge is used
    to position it (if positioned relative to the popup)</p>

    <p>Currently, popups may only be shown and hidden in the default
    view.</p>

    <p>XXX mention that focus() and blur() get moved from independent
    interfaces to all elements.</p>
-->

  <dl>
   <dt>IDL Definition

   <dd>
    <pre class="idl">
interface ElementUI {

  /* POPUPS */
  const unsigned short      BEFORE_START                   = 0;
  const unsigned short      BEFORE_END                     = 1;
  const unsigned short      AFTER_START                    = 2;
  const unsigned short      AFTER_END                      = 3;
  const unsigned short      START_BEFORE                   = 4;
  const unsigned short      START_AFTER                    = 5;
  const unsigned short      END_BEFORE                     = 6;
  const unsigned short      END_AFTER                      = 7;
  const unsigned short      OVERLAP                        = 8;
  const unsigned short      AFTER_POINTER                  = 9;

  void showPopup(in unsigned short alignment,
                 in Element target, in Element anchor);
<!--  void showPositionedPopup(in PopupPosition position); -->
  void hidePopup();
<!--  boolean tryPopupPosition(in unsigned short alignment, in Element target, in Element anchor, out PopupPosition position); -->


  /* METADATA STATE */  <!--// XXX Need some seriously better names here-->
  /* Metadata states are the same in all views */
  const unsigned short      STATE_GROUP_ENABLED            = 0; // allowed values are STATE_ENABLED_*
  const unsigned short      STATE_GROUP_DEFAULT            = 1; // allowed values are STATE_DEFAULT_*
  const unsigned short      STATE_GROUP_CHECKED            = 2; // allowed values are STATE_CHECKED_*
  const unsigned short      STATE_GROUP_SELECTED           = 3; // allowed values are STATE_SELECTED_*
  const unsigned short      STATE_GROUP_VALID              = 4; // allowed values are STATE_VALID_*
  const unsigned short      STATE_GROUP_REQUIRED           = 5; // allowed values are STATE_REQUIRED_*
  const unsigned short      STATE_GROUP_DATA               = 6; // allowed values are STATE_DATA_*
  const unsigned short      STATE_GROUP_VALUE              = 10; // allowed values are any integer<!-- XXX might need float?-->

  const unsigned short      STATE_ENABLED_DISABLED         = 0; // false
  const unsigned short      STATE_ENABLED_ENABLED          = 1; // true

  const unsigned short      STATE_DEFAULT_NORMAL           = 0; // false
  const unsigned short      STATE_DEFAULT_DEFAULT          = 1; // true

  const unsigned short      STATE_CHECKED_UNCHECKED        = 0; // false
  const unsigned short      STATE_CHECKED_CHECKED          = 1; // true
  const unsigned short      STATE_CHECKED_INDETERMINATE    = 2;

  const unsigned short      STATE_SELECTED_UNSELECTED      = 0; // false
  const unsigned short      STATE_SELECTED_SELECTED        = 1; // true

  const unsigned short      STATE_VALID_INVALID            = 0; // false
  const unsigned short      STATE_VALID_VALID              = 1; // true

  const unsigned short      STATE_REQUIRED_OPTIONAL        = 0; // false
  const unsigned short      STATE_REQUIRED_REQUIRED        = 1; // true

  const unsigned short      STATE_DATA_INACCESSIBLE        = 0; // none
  const unsigned short      STATE_DATA_READABLE            = 1; // 0x01
  const unsigned short      STATE_DATA_WRITABLE            = 2; // 0x02
  const unsigned short      STATE_DATA_EDITABLE            = 3; // 0x01 || 0x02

  void setMetadataState(in unsigned short state, in long value);
  long getMetadataState(in unsigned short state);


  /* DYNAMIC STATE */
  /* Dynamic states are defined on a per-view basis */
  const unsigned short      DYNAMIC_ACTIVE                 = 0;
  const unsigned short      DYNAMIC_HOVER                  = 1;
  const unsigned short      DYNAMIC_OPEN                   = 2;

  void setDynamicState(in unsighed short state, in bool value);
  bool getDynamicState(in unsigned short state);


  /* FOCUS */
  const unsigned short      FOCUSED_BY_UNKNOWN            = 0;
  const unsigned short      FOCUSED_BY_KEYBOARD           = 1;
  const unsigned short      FOCUSED_BY_POINTER            = 2;

  void focus();
<!--  void blur();-->
  void focusByMethod(in unsigned short method);
};
</pre>

   <dt>Methods

   <dd>
    <dl>
     <dt><code class="method-name">showPopup</code>

     <dd> Shows the element as a <span>popup</span>. If the element doesn't
      have the <span class="property">'position'</span> property set to <span
      class="css">popup</span>, this will raise a NOT_A_POPUP_ERR. Calling
      this method will cause the following events: First, a popupShowing
      event is triggered (it is cancellable, cancelling that event will
      prevent the popup from showing), second, the popup is aligned
      (potentially triggering a popupPositioning event), and finally a
      popupShown event is triggered. <!-- XXX popupPositioning? -->
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">alignment</code> of type <code
          class="dom">unsigned short</code>

         <dd>One of the alignment constants. See the descriptions below.

         <dt><code class="parameter-name">target</code> of type <code
          class="dom">Element</code>

         <dd>The element that the popup will be positioned relative to (it
          may itself be part of a popup, for example this is the case for
          cascading menus). If the <code class="dom">target</code> is <code
          class="dom">null</code>, then the point representing the (last
          known) position of the pointing device is used instead. If the
          <code class="dom">target</code> element is not visible, or if there
          is it is <code class="dom">null</code> but there is no pointing
          device, then the viewport is used instead. If the viewport is not
          visible, then the whole screen is used. This ensures that the popup
          will appear, regardless of how it was triggered.

         <dt><code class="parameter-name">anchor</code> of type <code
          class="dom">Element</code>

         <dd>The element to position relative to the target. This must be
          either the popup itself, or one of the popup's descendants
          (excluding anonymous nodes that are not in the default view). If
          <code class="dom">null</code> is used, then that implies the
          element. If the <code class="dom">anchor</code> has no defined
          position (which can happen if is hidden using CSS for example) then
          its closest ancestor which will have a position when the popup is
          shown is used instead.
        </dl>

       <dt>No Return Value

       <dt>Exceptions

       <dd>
        <dl>
         <dt><code class="dom">UIException</code> NOT_A_POPUP_ERR

         <dd>Raised if the element doesn't have the <span
          class="property">'position'</span> property set to <span
          class="css">popup</span>.

         <dt><code class="dom">UIException</code> HIERARCHY_ERR

         <dd>Raised if the <code class="dom">anchor</code> is not a
          descendant of the element or if it is an annoymous descendant that
          is not in the default view.
        </dl>
      </dl>
     </dd>
     <!--
          <dt><code class="method-name">showPositionedPopup</code></dt>
          <dd>
            <p>This XXX
            <dl>
              <dt>Parameters</dt>
              <dd>
                <dl>
                  <dt><code class="parameter-name">position</code> of type <code class="dom">XXX</code></dt>
                  <dd>The ...</dd>
                </dl>
              </dd>
              <dt>No Return Value</dt>
              <dt>Exceptions</dt>
              <dd>
                <dl>
                  <dt><code class="dom">UIException</code> NOT_A_POPUP_ERR</dt>
                  <dd>Raised if the element doesn't have the <span class="property">'position'</span> property set to <span class="css">popup</span>.</dd>
                  <dt><code class="dom">UIException</code> HIERARCHY_ERR</dt>
                  <dd>Raised if the <code class="dom">anchor</code> is not a child of the element.</dd>
                </dl>
              </dd>
            </dl>
          </dd>
-->

     <dt><code class="method-name">hidePopup</code>

     <dd> Hides the popup associated with the element, if any.
      <dl>
       <dt>No Parameters

       <dt>No Return Value

       <dt>No Exceptions
      </dl>

     <dt><code class="method-name">setMetadataState</code>

     <dd> Sets various flags relating to the logical state of the element.
      The different flags have different semantics. See the list of constants
      below.
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">state</code> of type <code
          class="dom">unsigned short</code>

         <dd>This parameter is a flag indicating which metadata state should
          be changed.

         <dt><code class="parameter-name">value</code> of type <code
          class="dom">long</code>

         <dd>What value to give the state in question.
        </dl>

       <dt>No Return Value

       <dt>No Exceptions
      </dl>

     <dt><code class="method-name">getMetadataState</code>

     <dd> Retrieves various flags relating to the logical state of the
      element. The different flags have different semantics. See the list of
      constants below.
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">state</code> of type <code
          class="dom">unsigned short</code>

         <dd>This parameter is a flag indicating which metadata state should
          be retrieved.
        </dl>

       <dt>Return Value

       <dd>
        <dl>
         <dt><code class="dom">long</code>

         <dd>The current value for the specified state.
        </dl>

       <dt>No Exceptions
      </dl>

     <dt><code class="method-name">setDynamicState</code>

     <dd> Sets various flags relating to the dynamic state of the element (in
      the default view). The different flags have different semantics. See
      the list of constants below.
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">state</code> of type <code
          class="dom">unsigned short</code>

         <dd>This parameter is a flag indicating which dynamic state should
          be changed.

         <dt><code class="parameter-name">value</code> of type <code
          class="dom">boolean</code>

         <dd>What value to give the state in question.
        </dl>

       <dt>No Return Value

       <dt>No Exceptions
      </dl>

     <dt><code class="method-name">getDynamicState</code>

     <dd> Retrieves various flags relating to the dynamic state of the
      element in the current view. The different flags have different
      semantics. See the list of constants below.
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">state</code> of type <code
          class="dom">unsigned short</code>

         <dd>This parameter is a flag indicating which dynamic state should
          be retrieved.
        </dl>

       <dt>Return Value

       <dd>
        <dl>
         <dt><code class="dom">long</code>

         <dd>The current value for the specified state.
        </dl>

       <dt>No Exceptions
      </dl>

     <dt><code class="method-name">focus</code>

     <dd> Same as calling focusByMethod(FOCUS_BY_UNKNOWN).
      <dl>
       <dt>No Parameters

       <dt>No Return Value

       <dt>No Exceptions
      </dl>
     </dd>
     <!--
          <dt><code class="method-name">blur</code></dt>
          <dd>

            <dl>
              <dt>No Parameters</dt>
              <dt>No Return Value</dt>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
-->

     <dt><code class="method-name">focusByMethod</code>

     <dd> Focusses the element, using the properties appropriate for the
      method specified to select the content of the element.
      <dl>
       <dt>Parameters

       <dd>
        <dl>
         <dt><code class="parameter-name">method</code> of type <code
          class="dom">unsigned short</code>

         <dd>This parameter is a flag indicating which method was used to
          focus the element.
        </dl>

       <dt>No Return Value

       <dt>No Exceptions
      </dl>
    </dl>

   <dt>Defined Constants For Popups

   <dd> The first eight of these constants use a consistent naming scheme
    based on the writing-mode independent "BASE" system (Before After Start
    End, which map, in a left-to-right top-to-bottom writing mode such as
    English, to the Top Bottom Left and Right sides respectively). The first
    word represents the side of the target which should be adjacent to the
    opposite side of the anchor, and the second word represents the sides of
    the target and anchor which should be aligned so as to be parallel to
    each other.
    <dl>
     <dt><code class="constant-name">BEFORE_START</code>

     <dd><img alt="" class="extra" src="images/BEFORE_START.png">The "before"
      side of the target is made adjacent to the "after" side of the anchor,
      and the "start" sides of the target and anchor are aligned.

     <dt><code class="constant-name">BEFORE_END</code>

     <dd><img alt="" class="extra" src="images/BEFORE_END.png">The "before"
      side of the target is made adjacent to the "after" side of the anchor,
      and the "end" sides of the target and anchor are aligned.

     <dt><code class="constant-name">AFTER_START</code>

     <dd><img alt="" class="extra" src="images/AFTER_START.png">The "after"
      side of the target is made adjacent to the "before" side of the anchor,
      and the "start" sides of the target and anchor are aligned.

     <dt><code class="constant-name">AFTER_END</code>

     <dd><img alt="" class="extra" src="images/AFTER_END.png">The "after"
      side of the target is made adjacent to the "before" side of the anchor,
      and the "end" sides of the target and anchor are aligned.

     <dt><code class="constant-name">START_BEFORE</code>

     <dd><img alt="" class="extra" src="images/START_BEFORE.png">The "start"
      side of the target is made adjacent to the "end" side of the anchor,
      and the "before" sides of the target and anchor are aligned.

     <dt><code class="constant-name">START_AFTER</code>

     <dd><img alt="" class="extra" src="images/START_AFTER.png">The "start"
      side of the target is made adjacent to the "end" side of the anchor,
      and the "after" sides of the target and anchor are aligned.

     <dt><code class="constant-name">END_BEFORE</code>

     <dd><img alt="" class="extra" src="images/END_BEFORE.png">The "end" side
      of the target is made adjacent to the "start" side of the anchor, and
      the "before" sides of the target and anchor are aligned.

     <dt><code class="constant-name">END_AFTER</code>

     <dd><img alt="" class="extra" src="images/END_AFTER.png">The "end" side
      of the target is made adjacent to the "start" side of the anchor, and
      the "after" sides of the target and anchor are aligned.

     <dt><code class="constant-name">OVERLAP</code>

     <dd><img alt="" class="extra" src="images/OVERLAP.png">The before/start
      corners of the target and anchor elements are overlapped so that (if
      they have the same size) they appear over each other.

     <dt><code class="constant-name">AFTER_POINTER</code>

     <dd><img alt="" class="extra" src="images/AFTER_POINTER.png">The "after"
      side of the target is made adjacent to the "before" side of the anchor,
      and the "start" side of the anchor is aligned with the last known
      position of the pointing device, if any, or with the "start" side of
      the target, if there is no pointing device.

     <dt>Special Cases

     <dd>
      <p><img alt="" class="extra" src="images/AT_POINTER.png">If the <code
       class="dom">target</code> is <code class="dom">null</code> and there
       is a pointing device, then the last known position of the pointer is
       used as the target in the cases above. So for example, if <code
       class="dom">alignment</code> is set to <code
       class="dom">BEFORE_START</code> or <code class="dom">END_AFTER</code>,
       then the before/start corner of the popup is positioned at the
       pointer.</p>

      <p>When the target is a point and not a region, the following constants
       become equivalent:</p>

      <ul>
       <li>BEFORE_START and END_AFTER

       <li>BEFORE_END and START_AFTER

       <li>AFTER_START, END_BEFORE, OVERLAP and AFTER_POINTER

       <li>AFTER_END and START_BEFORE
      </ul>

      <p>If the popup is smaller than the screen, then the popup
       <em>must</em> appear completely on the screen. If, after aligning the
       popup as specified by the arguments to the showPopup method, the popup
       would overflow the screen, then the following algorithm should be
       used. The algorithm should be followed step by step until the popup
       fits on the screen.</p>

      <ol>
       <li>If the popup is wider (taller) than the screen, then its outer
        margin width (height) should be set to the width (height) of the
        screen (the <code class="property">'overflow'</code> property
        applies).

       <li>If the alignment is <code class="dom">OVERLAP</code> and the
        anchor is not the popup element itself, then position the anchor as
        required, then shift the popup such that it touches the sides of the
        screen where the anchor overflows the screen (if that is in only one
        direction, the other axis therefore remains unaffected), and apply
        the <code class="property">'overflow'</code> property at that scroll
        position.

       <li>Otherwise, some as-yet-undecided algorithm is used to try each
        alignment value in turn, and if no possibility is found, then the
        popup menu is positioned on the side that had the most room, and then
        the dimensions of the popup are changed so that (from drop downs) it
        touches the relevant side of the screen or (for side opening popups)
        it is moved so that it touches one of the sides.</li>
       <!-- XXX
          <li>If the alignment is </li>
BEFORE_START
BEFORE_END
AFTER_START
AFTER_END
START_BEFORE
START_AFTER
END_BEFORE
END_AFTER
OVERLAP
AFTER_POINTER
-->
      </ol>
    </dl>

   <dt>Defined Constants For Metadata State

   <dd>
    <dl>
     <dt><code class="constant-name">STATE_GROUP_ENABLED</code>

     <dt><code class="constant-name">STATE_ENABLED_DISABLED</code>

     <dt><code class="constant-name">STATE_ENABLED_ENABLED</code>

     <dd>These constants are used to enable and disable user interface
      elements. Every element is either STATE_ENABLED_ENABLED or
      STATE_ENABLED_DISABLED. See the :enabled and :disabled pseudo-classes.
      Elements all initially start with their STATE_GROUP_ENABLED state set
      to STATE_ENABLED_ENABLED.

     <dt><code class="constant-name">STATE_GROUP_DEFAULT</code>

     <dt><code class="constant-name">STATE_DEFAULT_NORMAL</code>

     <dt><code class="constant-name">STATE_DEFAULT_DEFAULT</code>

     <dd>These constants are used to toggle the default element of a
      document. Only one element per document may be the default at any one
      time. Setting an element to STATE_DEFAULT_DEFAULT automatically resets
      any other element to the STATE_DEFAULT_NORMAL state. See the :default
      pseudo-class. Elements all initially start with their
      STATE_GROUP_DEFAULT state set to STATE_DEFAULT_NORMAL.

     <dt><code class="constant-name">STATE_GROUP_CHECKED</code>

     <dt><code class="constant-name">STATE_CHECKED_UNCHECKED</code>

     <dt><code class="constant-name">STATE_CHECKED_CHECKED</code>

     <dt><code class="constant-name">STATE_CHECKED_INDETERMINATE</code>

     <dd>These constants are used to toggle the value of check box and radio
      button interface elements. Every element has one of these values. See
      the :checked, :unchecked and :indeterminate pseudo-classes. Elements
      all initially start with their STATE_GROUP_CHECKED state set to
      STATE_CHECKED_UNCHECKED.

     <dt><code class="constant-name">STATE_GROUP_SELECTED</code>

     <dt><code class="constant-name">STATE_SELECTED_UNSELECTED</code>

     <dt><code class="constant-name">STATE_SELECTED_SELECTED</code>

     <dd>These constants are used to determine the selection state of entire
      elements. (Note: This is distinct from text selection and focus.) Every
      element is either STATE_SELECTED_SELECTED or STATE_SELECTED_UNSELECTED.
      See the :selected and :unselected pseudo-classes. Elements all
      initially start with their STATE_GROUP_SELECTED state set to
      STATE_SELECTED_UNSELECTED.

     <dt><code class="constant-name">STATE_GROUP_VALID</code>

     <dt><code class="constant-name">STATE_VALID_INVALID</code>

     <dt><code class="constant-name">STATE_VALID_VALID</code>

     <dd>These constants are used to determine the validity state of entire
      elements. For example, the XForms data model can place constraints on
      the possible values of controls in a form. Every element is either
      STATE_VALID_VALID or STATE_VALID_INVALID. See the :valid and :invalid
      pseudo-classes. Elements all initially start with their
      STATE_GROUP_VALID state set to STATE_VALID_VALID.

     <dt><code class="constant-name">STATE_GROUP_REQUIRED</code>

     <dt><code class="constant-name">STATE_REQUIRED_OPTIONAL</code>

     <dt><code class="constant-name">STATE_REQUIRED_REQUIRED</code>

     <dd>These constants are used to determine whether entire elements are
      considered optional or required. For example, the XForms data model can
      require that fields be filled before allowing a form to be submitted.
      Every element is either STATE_REQUIRED_REQUIRED or
      STATE_REQUIRED_OPTIONAL. See the :required and :optional
      pseudo-classes. Elements all initially start with their
      STATE_GROUP_REQUIRED state set to STATE_REQUIRED_OPTIONAL.

     <dt><code class="constant-name">STATE_GROUP_DATA</code>

     <dt><code class="constant-name">STATE_DATA_INACCESSIBLE</code>

     <dt><code class="constant-name">STATE_DATA_READABLE</code>

     <dt><code class="constant-name">STATE_DATA_WRITABLE</code>

     <dt><code class="constant-name">STATE_DATA_EDITABLE</code>

     <dd>These constants are used to determine the intended state of elements
      with respect to their content being edited. Note, however, that this
      state causes absolutely nothing to change with respect to elements'
      actual editing state! Typically, this state will be set by the data
      model being used, and selectors will then be used to change the value
      of the <span class="property"><a
      href="#user-modify">'user-modify'</a></span> property of a
      pseudo-element. Every element is in a logical bitwise addition of zero,
      one, or both of STATE_DATA_READABLE and STATE_DATA_WRITABLE. Two
      additional constants are provided for convenience: STATE_DATA_EDITABLE
      (both values set) and STATE_DATA_INACCESSIBLE (neither value set). See
      the :read-only, :write-only and :read-write pseudo-classes. Elements
      all initially start with their STATE_GROUP_DATA state set to
      STATE_DATA_READABLE.

     <dt><code class="constant-name">STATE_GROUP_VALUE</code>

     <dd>This constant is used to access the generic integer value of user
      interface elements. Every element has such a value, although it is only
      typically used by scroll bars, track bars and progress bars. Elements
      all initially start with their STATE_GROUP_VALUE state set to zero.
    </dl>

   <dt>Defined Constants For Dynamic State

   <dd>
    <dl>
     <dt><code class="constant-name">DYNAMIC_ACTIVE</code>

     <dd>This constant is used to toggle the active state of elements. Only
      one element per view may be active at any one time. Setting an element
      to active automatically resets any other active element to its
      non-active state. See the :active pseudo-class.

     <dt><code class="constant-name">DYNAMIC_HOVER</code>

     <dd>This constant is used to toggle the hover state of elements. Only
      one element per view may be in the hover state at any one time. Setting
      an element's hover state to true automatically resets any other
      element's hover state. See the :hover pseudo-class. User agents may, in
      addition to changes triggered using the setDynamicState() method,
      automatically set this state on elements in response to user events
      (such as moving the mouse).

     <dt><code class="constant-name">DYNAMIC_OPEN</code>

     <dd>This constant is used to toggle the open/closed state of elements.
      Every element has an open/closed state for each view. Toggling the
      open/closed state does not affect other elements or other views. (Note:
      At the moment there is no way to change the open/closed state of
      elements in any view other than the default view.) See the :open and
      :closed pseudo-classes.
    </dl>

   <dt>Defined Constants For Focus

   <dd>
    <dl>
     <dt><code class="constant-name">FOCUSED_BY_UNKNOWN</code>

     <dd>An unspecified method was used to focus the element.

     <dt><code class="constant-name">FOCUSED_BY_KEYBOARD</code>

     <dd>The element was focused by some keyboard action.

     <dt><code class="constant-name">FOCUSED_BY_MOUSE</code>

     <dd>The element was focused by the pointing device.
    </dl>
  </dl>

  <h3 id="popup"><span class="secno">4.3. </span>Popup Display Events</h3>

  <p>Four new events are introduced, all related to popups. These use the
   base DOM Event interface to pass contextual information. The different
   types of such events that can occur are:

  <dl>
   <dt>popupShowing

   <dd> The popupShowing event occurs when the <code
    class="dom">popupShow</code> method is called. This event is only valid
    for elements whose <span class="property">'position'</span> property has
    the value <span class="css">popup</span>. If the event is cancelled, then
    the popup will not be shown.
    <ul>
     <li>Bubbles: No

     <li>Cancelable: Yes

     <li>Context Info: None
    </ul>

   <dt>popupShown

   <dd> The popupShown event occurs after a popup has been displayed. This
    event is only valid for elements whose <span
    class="property">'position'</span> property has the value <span
    class="css">popup</span>.
    <ul>
     <li>Bubbles: No

     <li>Cancelable: No

     <li>Context Info: None
    </ul>

   <dt>popupHiding

   <dd> The popupHiding event occurs when the <code
    class="dom">popupHide</code> method is called. This event is only valid
    for elements whose <span class="property">'position'</span> property has
    the value <span class="css">popup</span> and which are currently
    displayed. If the event is cancelled, then the popup will remain visible.

    <ul>
     <li>Bubbles: No

     <li>Cancelable: Yes

     <li>Context Info: None
    </ul>

   <dt>popupHidden

   <dd> The popupHidden event occurs after a popup has been hidden (also
    referred to as cancelling the popup). This event is only valid for
    elements whose <span class="property">'position'</span> property has the
    value <span class="css">popup</span>.
    <ul>
     <li>Bubbles: No

     <li>Cancelable: No

     <li>Context Info: None
    </ul>
  </dl>

  <h3 id="ui-exceptions"><span class="secno">4.4. </span>UI Exceptions</h3>

  <p>This section defines some error codes used by the ElementUI interface.

  <dl>
   <dt>IDL Definition

   <dd>
    <pre class="idl">
exception UIException {
  // UIExceptionCode
  const unsigned short      NOT_A_POPUP_ERR                = 1;
  const unsigned short      HIERARCHY_ERR                  = 2;

  unsigned short   code;
};
</pre>

   <dt>Defined Constants

   <dd>
    <dl>
     <dt><code class="constant-name">NOT_A_POPUP_ERR</code>

     <dd>If the element does not have the <span
      class="property">'position'</span> property set to <span
      class="css">popup</span>.

     <dt><code class="constant-name">HIERARCHY_ERR</code>

     <dd>If the element specified is not a child of the popup element.
    </dl>
  </dl>
  <!--

NOT USED

    <h3>The PopupPosition interface</h3>

    <p>This interface is used to position popups.</p>

    <dl>
      <dt>IDL Definition</dt>
      <dd>
<pre class="idl">
exception UIException {
  // UIExceptionCode
  const unsigned short      NOT_A_POPUP_ERR                = 1;
  const unsigned short      HIERARCHY_ERR                  = 2;

  unsigned short   code;
};
</pre>
      </dd>
      <dt>Defined Constants</dt>
      <dd>
        <dl>
          <dt><code class="constant-name">NOT_A_POPUP_ERR</code></dt>
          <dd>If the element does not have the <span class="property">'position'</span> property set to <span class="css">popup</span>.</dd>
          <dt><code class="constant-name">HIERARCHY_ERR</code></dt>
          <dd>If the element specified is not a child of the popup element.</dd>
        </dl>
      </dd>
    </dl>
-->
  <!--

UNUSED

    <h3>The PopupAlignmentEvent interface</h3>

    <p>The fifth event uses the PopupAlignmentEvent interface.</p>

    <dl>
      <dt>IDL Definition</dt>
      <dd>
<pre class="idl">
interface PopupAlignmentEvent {
  readonly attribute unsigned short preferredAlignment;
  readonly attribute ;

  void addBinding(in DOMString bindingURI);
  void removeBinding(in DOMString bindingURI);
  boolean hasBinding(in DOMString bindingURI);
};
</pre>
      </dd>
      <dt>Properties</dt>
      <dd>
        <dl>
          <dt><code class="property-name">xblChildNodes</code></dt>
          <dd>The <code class="xml">xblChildNodes</code> property is a NodeList that represents the
          true children of the element after insertion points and <code class="xml">element</code>
          tags have been applied. This property can be used to navigate the content model according
          to XBL after bindings have moved explicit and anonymous children using <code class="xml"
          >children</code> tags.</dd>
          <dt><code class="property-name">bindingOwner</code></dt>
          <dd>The <code class="xml">bindingOwner</code> property is used to obtain the bound
          element with the binding attached that is responsible for the generation of the specified
          anonymous node. This property enables an author to determine the scope of any content
          node. For content at the document-level scope, the property's value is <code class="dom"
          >null</code>.</dd>
          <dt><code class="property-name">anonymousParent</code></dt>
          <dd>The <code class="xml">anonymousParent</code> property's value is the anonymous parent
          for an element that was placed underneath an insertion point using the <code class=
          "xml">children</code> element. The property's value is <code class="dom">null</code>
          if the element was not repositioned.</dd>
        </dl>
      </dd>
      <dt>Methods</dt>
      <dd>
        <dl>
          <dt><code class="method-name">addBinding</code></dt>
          <dd>
            The <code class="dom">addBinding</code> method attaches the specified binding (and any
            bindings that the binding inherits from) to an element. This call is not necessarily
            synchronous. The binding may not be attached yet when the call completes.
            <dl>
              <dt>Parameters</dt>
              <dd>
                <dl>
                  <dt><code class="parameter-name">bindingURI</code> of type <code class="dom">DOMString</code></dt>
                  <dd>A URI that specifies the location of a specific binding to attach.</dd>
                </dl>
              </dd>
              <dt>No Return Value</dt>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
          <dt><code class="method-name">removeBinding</code></dt>
          <dd>
            The <code class="dom">removeBinding</code> method detaches the specified binding (and
            any bindings that the binding inherits from explicitly using the <code class=
            "xml">extends</code> attribute) from the element.
            <dl>
              <dt>Parameters</dt>
              <dd>
                <dl>
                  <dt><code class="parameter-name">bindingURI</code> of type <code class="dom">DOMString</code></dt>
                  <dd>A URI that specifies the location of a specific binding to detach.</dd>
                </dl>
              </dd>
              <dt>No Return Value</dt>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
          <dt><code class="method-name">hasBinding</code></dt>
          <dd>
            The <code class="dom">hasBinding</code> method walks up the bindings applied to
            the element and compares each binding's URI with the parameter passed.
            This can be used to check if an element has been bound to a particular
            binding in in order to ensure that the expected methods and properties
            are available. For example widgets may walk up their ancestors looking for an
            element that has been bound to the form-container binding in order to locate
            their scope (so that radio buttons may properly be mutually exclusive, or so
            that a submit button can properly submit a form).
            <dl>
              <dt>Parameters</dt>
              <dd>
                <dl>
                  <dt><code class="parameter-name">bindingURI</code> of type <code class="dom">DOMString</code></dt>
                  <dd>A URI that specifies the location of a specific binding for which to look.</dd>
                </dl>
              </dd>
              <dt>Returns</dt>
              <dd>
                <dl>
                  <dt><code class="dom">boolean</code></dt>
                  <dd><code class="dom">true</code> if any of the bindings match the parameter, <code class="dom">false</code> otherwise.</dd>
                </dl>
              </dd>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
        </dl>
      </dd>
    </dl>
-->

  <h3 id="the-window"><span class="secno">4.5. </span>The Window Interface</h3>

  <p>This section will define some aspects of the DOM Level 0 "window"
   interface. In particular, window.open (with all its flags), resizing,
   possibly window.location and other features.

  <p>A great emphasis should be placed here on backwards compatibility. Only
   the parts that are needed for UI should be defined here.</p>
  <!--
    <p>XXX Something about the DOM Implementation bootstrapping a
    Window interface goes here.</p>
-->

  <p>The Window interface only applies to the default view. There is
   currently no defined way of obtaining the window interface for another
   view.</p>
  <!--
    <dl>
      <dt>IDL Definition</dt>
      <dd>
<pre class="idl">
interface Window {
  const unsigned short      XXX                            = 1;

  void open(...);
  void XXX();
};
</pre>
      </dd>
      <dt>Methods</dt>
      <dd>
        <dl>
          <dt><code class="method-name">method</code></dt>
          <dd>
            Description.
            <dl>
              <dt>No Parameters</dt>
              <dt>No Return Value</dt>
              <dt>No Exceptions</dt>
            </dl>
          </dd>
        </dl>
      </dd>
      <dt>Defined Constants</dt>
      <dd>
        <dl>
          <dt><code class="constant-name">XXX</code></dt>
          <dd>xxx</dd>
        </dl>
      </dd>
    </dl>
-->
  <!--

> One more aspect I want you think about - for "user interface systems" in
> general: The windowing system.
>   Different kinds of windows ("document", "browser (file-system/network or
> otherwise)", "palette", "application modal dialog", "system modal dialog"),
> the rules for layering them (appropriately flexible to allow different
> implementations, e.g. MacOS vs. X-Windows), and simplifications for handheld
> devices (which are sometimes single window devices anyway, but sometimes
> they are one "normal" window plus sometimes one "dialog" window on top.

window.open for dialogs

-->

  <h2 class="no-num" id="references">References</h2>

  <dl>
   <dt id="refsCGI">[CGI]

   <dd><cite><a href="http://hoohoo.ncsa.uiuc.edu/cgi/interface.html">The CGI
    Specification</a></cite>. NCSA HTTPd Development Team, November 1995. The
    CGI Specification is available at
    http://hoohoo.ncsa.uiuc.edu/cgi/interface.html

   <dt id="refsCSJSR">[CSJSR]

   <dd><cite><a
    href="http://devedge.netscape.com/library/manuals/2000/javascript/1.3/reference/index.html">Client-Side
    JavaScript Reference</a></cite> (1.3). Netscape Communications
    Corporation, May 1999. The Client-Side JavaScript Reference (1.3) is
    available at
    http://devedge.netscape.com/library/manuals/2000/javascript/1.3/reference/index.html

   <dt id="refsCHARMOD">[CHARMOD]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/WD-charmod-20030822/">Character Model for
    the World Wide Web 1.0</a></cite>, M. Dürst, F. Yergeau, R. Ishida, M.
    Wolf, T. Texin. W3C, August 2003. The latest version of the Character
    Model specification is available at <a
    href="http://www.w3.org/TR/charmod/">http://www.w3.org/TR/charmod/</a>

   <dt id="refsCSS21">[CSS21]

   <dd><cite><a href="http://www.w3.org/TR/2003/WD-CSS21-20030915">CSS 2.1
    Specification</a></cite>, B. Bos, T. &Ccedil;elik, I. Hickson, H. Lie.
    W3C, September 2003. The latest version of the CSS 2.1 specification is
    available at <a
    href="http://www.w3.org/TR/CSS21">http://www.w3.org/TR/CSS21</a>

   <dt id="refsCSS3UI">[CSS3UI]

   <dd><cite><a href="http://www.w3.org/TR/2003/WD-css3-ui-20030703">CSS3
    Basic User Interface Module</a></cite>, T. &Ccedil;elik. W3C, July 2003.
    The latest version of the CSS3 UI module is available at <a
    href="http://www.w3.org/TR/css3-ui">http://www.w3.org/TR/css3-ui</a>

   <dt id="refsCSS3CONTENT">[CSS3CONTENT]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/WD-css3-content-20030514">CSS3 Generated
    and Replaced Content Module</a></cite>, I. Hickson. W3C, May 2003. The
    latest version of the CSS3 Generated and Replaced Content module is
    available at <a
    href="http://www.w3.org/TR/css3-content">http://www.w3.org/TR/css3-content</a>

   <dt id="refsDOM3CORE">[DOM3CORE]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/CR-DOM-Level-3-Core-20031107">Document
    Object Model (DOM) Level 3 Core Specification</a></cite>, A. Le Hors, P.
    Le H&eacute;garet, L. Wood, G. Nicol, J. Robie, M. Champion, S. Byrne.
    W3C, November 2003. The latest version of the DOM Level 3 Core
    specification is available at <a
    href="http://www.w3.org/TR/DOM-Level-3-Core/">http://www.w3.org/TR/DOM-Level-3-Core/</a>

   <dt id="refsDOM3EVENTS">[DOM3EVENTS]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/NOTE-DOM-Level-3-Events-20031107">Document
    Object Model (DOM) Level 3 Events Specification</a></cite>, P. Le
    H&eacute;garet, T. Pixley. W3C, November 2003. The latest version of the
    DOM Level 3 Events specification is available at <a
    href="http://www.w3.org/TR/DOM-Level-3-Events/">http://www.w3.org/TR/DOM-Level-3-Events/</a>

   <dt id="refsDOM2HTML">[DOM2HTML]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/REC-DOM-Level-2-HTML-20030109">Document
    Object Model (DOM) Level 2 HTML Specification</a></cite>, J. Stenback, P.
    Le H&eacute;garet, A. Le Hors. W3C, January 2003. The latest version of
    the DOM Level 2 HTML specification is available at <a
    href="http://www.w3.org/TR/DOM-Level-2-HTML/">http://www.w3.org/TR/DOM-Level-2-HTML/</a>

   <dt id="refsDOM3LS">[DOM3LS]

   <dd><cite><a
    href="http://www.w3.org/TR/2003/CR-DOM-Level-3-LS-20031107">Document
    Object Model (DOM) Level 3 Load and Save Specification</a></cite>, J.
    Stenback, A. Heninger. W3C, November 2003. The latest version of the DOM
    Level 3 Load and Save specification is available at <a
    href="http://www.w3.org/TR/DOM-Level-3-LS/">http://www.w3.org/TR/DOM-Level-3-LS/</a>

   <dt id="refsECMA262">[ECMA262]

   <dd><cite><a href="http://www.ecma.ch/ecma1/STAND/ECMA-262.HTM">ECMAScript
    Language Specification</a></cite>, Third Edition. ECMA, December 1999.
    This version of the ECMAScript Language is available at
    http://www.ecma.ch/ecma1/STAND/ECMA-262.HTM

   <dt id="refsHTC">[HTC]

   <dd><cite><a
    href="http://www.w3.org/TR/1998/NOTE-HTMLComponents-19981023">HTML
    Components</a></cite>, Chris Wilson. Microsoft, September 1998. The HTML
    Components submission is available at
    http://www.w3.org/TR/1998/NOTE-HTMLComponents-19981023

   <dt id="refsHTML4">[HTML4]

   <dd><cite><a href="http://www.w3.org/TR/1999/REC-html401-19991224">HTML
    4.01 Specification</a></cite>, D. Raggett, A. Le Hors, I. Jacobs. W3C,
    December 1999. The latest version of the HTML4 specification is available
    at <a href="http://www.w3.org/TR/html4">http://www.w3.org/TR/html4</a>

   <dt id="refsISO8601">[ISO8601]

   <dd><cite><a
    href="http://www.iso.ch/iso/en/CatalogueDetailPage.CatalogueDetail?CSNUMBER=26780&amp;ICS1=1&amp;ICS2=140&amp;ICS3=30">ISO8601:2000
    Data elements and interchange formats -- Information interchange --
    Representation of dates and times</a></cite>. ISO, December 2000. ISO8601
    is available for purchase at <a
    href="http://www.iso.ch/">http://www.iso.ch/</a>

   <dt id="refsRFC959">[RFC959]

   <dd><cite><a href="http://www.ietf.org/rfc/rf959">File Transfer Protocol
    (FTP)</a></cite>, J. Postel, J. Reynolds. IETF, October 1985. RFC959 is
    available at http://www.ietf.org/rfc/rfc959

   <dt id="refsRFC2119">[RFC2119]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2119">Key words for use in
    RFCs to Indicate Requirement Levels</a></cite>, S. Bradner. IETF, March
    1997. RFC2119 is available at http://www.ietf.org/rfc/rfc2119

   <dt id="refsRFC1738">[RFC1738]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc1738">Uniform Resource
    Locators (URL)</a></cite>, T. Berners-Lee, L. Masinter, M. McCahill.
    IETF, Decembed 1998. RFC1738 is available at
    http://www.ietf.org/rfc/rfc1738

   <dt id="refsRFC2368">[RFC2368]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2368">The mailto URL
    scheme</a></cite>, P. Hoffman, L. Masinter, J. Zawinski. IETF, July 1998.
    RFC2368 is available at http://www.ietf.org/rfc/rfc2368

   <dt id="refsRFC2387">[RFC2387]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2387">The "data" URL
    scheme</a></cite>, L. Masinter. IETF, August 1998. RFC2387 is available
    at http://www.ietf.org/rfc/rfc2387

   <dt id="refsRFC2396">[RFC2396]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2396">Uniform Resource
    Identifiers (URI): Generic Syntax</a></cite>, T. Berners-Lee, R.
    Fielding, L. Masinter. IETF, August 1998. RFC2396 is available at
    http://www.ietf.org/rfc/rfc2396

   <dt id="refsRFC2616">[RFC2616]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2616">Hypertext Transfer
    Protocol -- HTTP/1.1</a></cite>, R. Fielding, J. Gettys, J. Mogul, H.
    Frystyk, L. Masinter, P. Leach, T. Berners-Lee. IETF, June 1999. RFC2616
    is available at http://www.ietf.org/rfc/rfc2616

   <dt id="refsRFC2806">[RFC2806]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2806">URLs for Telephone
    Calls</a></cite>, A. Vaha-Sipila. IETF, April 2000. RFC2806 is available
    at http://www.ietf.org/rfc/rfc2806

   <dt id="refsRFC2822">[RFC2822]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2822">Internet Message
    Format</a></cite>, P. Resnick. IETF, April 2001. RFC2822 is available at
    http://www.ietf.org/rfc/rfc2822

   <dt id="refsRFC2854">[RFC2854]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc2854">The 'text/html' Media
    Type</a></cite>, D. Connolly, L. Masinter. IETF, June 2000. RFC2854 is
    available at http://www.ietf.org/rfc/rfc2854

   <dt id="refsRFC3023">[RFC3023]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc3023">XML Media
    Types</a></cite>, M. Murata, S. St.Laurent, D. Kohn. IETF, January 2001.
    RFC 3023 is available at http://www.ietf.org/rfc/rfc3023

   <dt id="refsRFC3106">[RFC3106]

   <dd><cite><a href="http://www.ietf.org/rfc/rfc3106">ECML v1.1: Field
    Specifications for E-Commerce</a></cite>, D. Eastlake, T Goldstein. IETF,
    April 2001. RFC 3106 is available at http://www.ietf.org/rfc/rfc3106

   <dt id="refsWF2">[WF2]

   <dd><cite><a href="http://www.hixie.ch/specs/html/forms/web-forms-2">Web
    Forms 2.0</a></cite>, I. Hickson. Opera Software, February 2004. The
    latest version of the Web Forms 2.0 proposed specification is available
    at <a
    href="http://www.hixie.ch/specs/html/forms/web-forms">http://www.hixie.ch/specs/html/forms/web-forms</a>

   <dt id="refsXBL">[XBL]

   <dd><cite><a href="http://www.w3.org/TR/2001/NOTE-xbl-20010223/">XML
    Binding Language</a></cite>, David Hyatt. Mozilla, February 2001. The XBL
    submission is available at http://www.w3.org/TR/2001/NOTE-xbl-20010223/

   <dt id="refsXML">[XML]

   <dd><cite><a href="http://www.w3.org/TR/2000/REC-xml-20001006">Extensible
    Markup Language (XML) 1.0 (Second Edition)</a></cite>, T Bray, J Paoli,
    C. M. Sperberg-McQueen, E. Maler. W3C, October 2000. The latest version
    of the XML specification is available at <a
    href="http://www.w3.org/TR/REC-xml/">http://www.w3.org/TR/REC-xml/</a>

   <dt id="refsXHTML1">[XHTML1]

   <dd><cite><a href="http://www.w3.org/TR/xhtml11/">XHTML&trade; 1.1 -
    Module-based XHTML</a></cite>, M. Altheim, S. McCarron. W3C, May 2001.
    The latest version of the XHTML 1.1 specification is available at <a
    href="http://www.w3.org/TR/xhtml11">http://www.w3.org/TR/xhtml11</a>

   <dt id="refsXHTML2">[XHTML2]

   <dd>XXX

   <dt id="refsXForms">[XForms]

   <dd><cite><a href="http://www.w3.org/TR/2003/REC-xforms-20031014/">XForms
    1.0</a></cite>, M. Dubinko, L. Klotz, R. Merrick, T. Raman. W3C, October
    2003. The latest version of the XForms specification is available at <a
    href="http://www.w3.org/TR/xforms">http://www.w3.org/TR/xforms</a>
  </dl>

  <h2 class="no-num" id="acknowledgements">Acknowledgements</h2>

  <p>Thanks to H&aring;kon Wium Lie, David Hyatt and Brendan Eich for their
   important support. Thanks to Matthew Mastracci and Steven Garrity for
   their useful and substantial comments.</p>
  <!--

<hyatt> the ability to get the current focused element in a window hierarchy
<hyatt> and the current focused window
<hyatt> the ability to programmatically move the focus
<hyatt> to next/prev

 !-->
