<!DOCTYPE HTML>


<html lang="en-GB-hixie">
 <head>
  <title>HTML 5</title>
  <link href="/style/specification" type="text/css" rel="stylesheet">
  <link href="/images/icon" rel="icon">

  <style type="text/css">
   h4 + .element { margin-top: -2.5em; padding-top: 2em; }
   h4 + p + .element { margin-top: -5em; padding-top: 4em; }
   .element { background: #EEFFEE; color: black; margin: 0 0 1em -1em; padding: 0 1em 0.25em 0.75em; border-left: solid #99FF99 0.25em; -padding: 0; /* that last decl is for IE6. Try removing it, it's hilarious! */ }
   .proposal { border: blue solid; padding: 1em; }
   table.matrix, table.matrix td { border: none; text-align: right; }
   table.matrix { margin-left: 2em; }
  </style>

 <link href="section-forms.html#nav-bar" rel="prev" title="3.16. Forms"><link href="index.html#contents" rel="index" title="Table of contents"><link href="section-interactive-elements.html#nav-bar" rel="next" title="3.18. Interactive
   elements"></head><body class="cfc">
  <style scoped>
   * { color: gray ! important; background: none ! important; border-color: silver ! important; }
   img, object, iframe { filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); -webkit-filter: grayscale(100%); }
   .obsolete { border: double thick red ! important; background: yellow ! important; margin: 4em auto 0 auto; max-width: 50em; width: 70%; text-align: center; position: fixed;  z-index: 10000; top: 0; left: 0; right: 0; }
   .obsolete a { color: blue ! important; }
   .obsolete p { font: 900 2em sans-serif; color: red ! important; margin: 1em 1.5em ! important; }
  </style>
  <div class=obsolete>
   <p>This is a snapshot of an early working draft and has therefore
   been superseded by the <a href="http://whatwg.org/html">HTML
   standard</a>.</p>
   <p>This document will not be further updated.</p>
  </div>
<div class="head">
   <p><a href="http://www.whatwg.org/" class="logo" rel="home"><img src="/images/logo" alt="WHATWG"></a></p>

   <h1 id="html-5">HTML 5</h1>

   <h2 id="working" class="no-num no-toc">Call For Comments — 27 October 2007</h2></div><nav id="nav-bar"><a href="section-forms.html#nav-bar">&lt; 3.16. Forms</a> – <a href="index.html#contents">Table of contents</a> – <a href="section-interactive-elements.html#nav-bar">3.18. Interactive
   elements &gt;</a></nav><h3 id="scripting0"><span class="secno">3.17. </span>Scripting</h3>

  <h4 id="script"><span class="secno">3.17.1. </span>The <dfn id="script0"><code>script</code></dfn> element</h4>

  <p><a href="section-documents0.html#block-level0" title="block-level elements">Block-level
   element</a>, <a href="section-documents0.html#strictly">strictly inline-level content</a>, and <a href="section-document.html#metadata" title="metadata elements">metadata element</a>.

  </p><dl class="element">
   <dt>Contexts in which this element may be used:

   </dt><dd>Where <a href="section-document.html#metadata">metadata elements</a> are expected.

   </dd><dd>Where <a href="section-documents0.html#block-level0">block-level elements</a> are expected.

   </dd><dd>Where <a href="section-documents0.html#inline-level0">inline-level content</a> is expected.

   </dd><dt>Content model:

   </dt><dd>If there is no <code title="attr-script-src"><a href="#src9">src</a></code> attribute, depends on the value of the <code title="attr-script-type"><a href="#type11">type</a></code> attribute.

   </dd><dd>If there <em>is</em> a <code title="attr-script-src"><a href="#src9">src</a></code> attribute, the element must be empty.

   </dd><dt>Element-specific attributes:

   </dt><dd><code title="attr-script-src"><a href="#src9">src</a></code>

   </dd><dd><code title="attr-script-async"><a href="#async">async</a></code>

   </dd><dd><code title="attr-script-defer"><a href="#defer">defer</a></code>

   </dd><dd><code title="attr-script-type"><a href="#type11">type</a></code>

   </dd><dt>DOM interface:

   </dt><dd>
    <pre class="idl">interface <dfn id="htmlscriptelement">HTMLScriptElement</dfn> : <a href="section-elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <code title="dom-script-src"><a href="#src10">src</a></code>;
           attribute boolean <code title="dom-script-async"><a href="#async0">async</a></code>;
           attribute boolean <code title="dom-script-defer"><a href="#defer0">defer</a></code>;
           attribute DOMString <code title="dom-script-type"><a href="#type12">type</a></code>;
           attribute DOMString <code title="dom-script-text"><a href="#text0">text</a></code>;
};</pre>
  </dd></dl>

  <p>The <code><a href="#script0">script</a></code> element allows authors to
   include dynamic script in their documents.

  </p><p>When the <dfn id="src9" title="attr-script-src"><code>src</code></dfn>
   attribute is set, the <code><a href="#script0">script</a></code> element
   refers to an external file. The value of the attribute must be a URI (or
   IRI).

  </p><p>If the <code title="attr-script-src"><a href="#src9">src</a></code>
   attribute is not set, then the script is given by the contents of the
   element.

  </p><p>The language of the script may be given by the <dfn id="type11" title="attr-script-type"><code>type</code></dfn> attribute. If the attribute
   is present, its value must be a valid MIME type, optionally with
   parameters. <a href="#refsRFC2046">[RFC2046]</a>

  </p><p>The <dfn id="async" title="attr-script-async"><code>async</code></dfn> and
   <dfn id="defer" title="attr-script-defer"><code>defer</code></dfn> attributes
   are <a href="section-common1.html#boolean0" title="boolean attribute">boolean attributes</a>
   that indicate how the script should be executed.

  </p><p>There are three possible modes that can be selected using these
   attributes. If the <code title="attr-script-async"><a href="#async">async</a></code> attribute is present, then the script will
   be executed asynchronously, as soon as it is available. If the <code title="attr-script-async"><a href="#async">async</a></code> attribute is not
   present but the <code title="attr-script-defer"><a href="#defer">defer</a></code> attribute is present, then the script is
   executed when the page has finished parsing. If neither attribute is
   present, then the script is downloaded and executed immediately, before
   the user agent continues parsing the page. The exact processing details
   for these attributes is described below.

  </p><p>The <code title="attr-script-defer"><a href="#defer">defer</a></code>
   attribute may be specified even if the <code title="attr-script-async"><a href="#async">async</a></code> attribute is specified, to cause legacy Web
   browsers that only support <code title="attr-script-defer"><a href="#defer">defer</a></code> (and not <code title="attr-script-async"><a href="#async">async</a></code>) to fall back to the <code title="attr-script-defer"><a href="#defer">defer</a></code> behavior instead
   of the synchronous blocking behavior that is the default.

  </p><p>Changing the <code title="attr-script-src"><a href="#src9">src</a></code>,
   <code title="attr-script-type"><a href="#type11">type</a></code>, <code title="attr-script-async"><a href="#async">async</a></code>, and <code title="attr-script-defer"><a href="#defer">defer</a></code> attributes
   dynamically has no direct effect; these attribute are only used at
   specific times described below (namely, when the element is inserted into
   the document).

  </p><p><code><a href="#script0">script</a></code> elements have three
   associated pieces of metadata. The first is a flag indicating whether or
   not the script block has been <dfn id="already">&quot;already executed&quot;</dfn>.
   Initially, <code><a href="#script0">script</a></code> elements must have
   this flag unset (script blocks, when created, are not &quot;already executed&quot;).
   When a <code><a href="#script0">script</a></code> element is cloned, the
   &quot;already executed&quot; flag, if set, must be propagated to the clone when it
   is created. The second is a flag indicating whether the element was <dfn id="parser-inserted">&quot;parser-inserted&quot;</dfn>. This flag is set by the <a href="section-parsing.html#html-0">HTML parser</a> and is used to handle <code title="dom-document-write-HTML"><a href="section-dynamic.html#document.write...">document.write()</a></code> calls. The third
   piece of metadata is <dfn id="the-scripts"><var>the script's
   type</var></dfn>. It is determined when the script is run, based on the
   attributes on the element at that time.

  </p><p><dfn id="running0" title="running a script">Running a script</dfn>: when a
   script block is <span>inserted into a document</span>, the user agent must
   act as follows:

  </p><ol>
   <li>
    <p>If the <code><a href="#script0">script</a></code> element has a <code title="attr-script-type"><a href="#type11">type</a></code> attribute but
     its value is the empty string, or if the <code><a href="#script0">script</a></code> element has no <code title="attr-script-type"><a href="#type11">type</a></code> attribute but
     it has a <code title="attr-script-language">language</code> attribute, and
     <em>that</em> attribute's value is the empty string, let <var><a href="#the-scripts">the script's type</a></var> for this <code><a href="#script0">script</a></code> element be &quot;<code title="">text/javascript</code>&quot;.</p>

    <p>Otherwise, if the <code><a href="#script0">script</a></code> element
     has a <code title="attr-script-type"><a href="#type11">type</a></code>
     attribute, let <var><a href="#the-scripts">the script's type</a></var>
     for this <code><a href="#script0">script</a></code> element be the value
     of that attribute.</p>

    <p>Otherwise, if the element has a <code title="attr-script-language">language</code> attribute, let <var><a href="#the-scripts">the script's type</a></var> for this <code><a href="#script0">script</a></code> element be the concatenation of the
     string &quot;<code title="">text/</code>&quot; followed by the value of the <code title="attr-script-language">language</code> attribute.</p>

   </li><li>
    <p>If <a href="section-scripting.html#scripting1">scripting is disabled</a>, or if the
     <code>Document</code> has <code title="dom-document-designMode"><a href="section-contenteditable.html#designMode">designMode</a></code> enabled, or if the <code><a href="#script0">script</a></code> element was created by an <span>XML
     parser</span> that itself was created as part of the processing of the
     <code title="dom-innerHTML-XML"><a href="section-dynamic.html#innerhtml1">innerHTML</a></code>
     attribute's
     setter<!-- no need to worry about the innerHTML-HTML case, as the
    HTML parser handles that for us-->,
     or if the user agent does not <a href="#support">support the scripting
     language</a> given by <var><a href="#the-scripts">the script's
     type</a></var> for this <code><a href="#script0">script</a></code>
     element, or if the <code><a href="#script0">script</a></code> element
     has its <a href="#already">&quot;already executed&quot;</a> flag set, then the
     user agent must abort these steps at this point. The script is not
     executed.</p>

   </li><li>
    <p>The user agent must set the element's <a href="#already">&quot;already
     executed&quot;</a> flag.</p>

   </li><li>
    <p>If the element has a <code title="attr-script-src"><a href="#src9">src</a></code> attribute, then a load for the specified
     content must be started.</p>

    <p class="note">Later, once the load has completed, the user agent will
     have to complete <a href="#when-a" title="when a script completes
     loading">the steps described below</a>.</p>

    <p>For performance reasons, user agents may start loading the script as
     soon as the attribute is set, instead, in the hope that the element will
     be inserted into the document. Either way, once the element is inserted
     into the document, the load must have started. If the UA performs such
     prefetching, but the element is never inserted in the document, or the
     <code title="attr-script-src"><a href="#src9">src</a></code> attribute is
     dynamically changed, then the user agent will not execute the script,
     and the load will have been effectively wasted.</p>

   </li><li>
    <p>Then, the first of the following options that describes the situation
     must be followed:</p>

    <dl class="switch">
     <dt>If the document is still being parsed, and the element has a <code title="attr-script-defer"><a href="#defer">defer</a></code> attribute,
      and the element does not have an <code title="attr-script-async"><a href="#async">async</a></code> attribute

     </dt><dd>The element must be added to the end of the <a href="#list-of">list
      of scripts that will execute when the document has finished
      parsing</a>. The user agent must begin <a href="#when-a" title="when a
      script completes loading">the next set of steps</a> when the script is
      ready. <span class="big-issue">This isn't compatible with IE for inline
      deferred scripts, but then what IE does is pretty hard to pin down
      exactly. Do we want to keep this like it is? Be more compatible?</span>
      <!--XXX  
     http://www.websiteoptimization.com/speed/tweak/defer/test/
     internal deferred scripts execute before any external scripts execute, or before the LOAD if there are none
     external deferred scripts execute before the LOAD
     -->
      

     </dd><dt>If the element has an <code title="attr-script-async"><a href="#async">async</a></code> attribute and a <code title="attr-script-src"><a href="#src9">src</a></code> attribute

     </dt><dd>The element must be added to the end of the <a href="#list-of0">list
      of scripts that will execute asynchronously</a>. The user agent must
      jump to <a href="#when-a" title="when a script completes loading">the
      next set of steps</a> once the script is ready.

     </dd><dt>If the element has an <code title="attr-script-async"><a href="#async">async</a></code> attribute but no <code title="attr-script-src"><a href="#src9">src</a></code> attribute, and the
      <a href="#list-of0">list of scripts that will execute
      asynchronously</a> is not empty

     </dt><dd>The element must be added to the end of the <a href="#list-of0">list
      of scripts that will execute asynchronously</a>.

     </dd><dt>If the element has a <code title="attr-script-src"><a href="#src9">src</a></code> attribute and has been flagged as <a href="#parser-inserted">&quot;parser-inserted&quot;</a>

     </dt><dd>The element is <a href="#the-script">the script that will execute as
      soon as the parser resumes</a>. (There can only be one such script at a
      time.)

     </dd><dt>If the element has a <code title="attr-script-src"><a href="#src9">src</a></code> attribute

     </dt><dd>The element must be added to the end of the <a href="#list-of1">list
      of scripts that will execute as soon as possible</a>. The user agent
      must jump to <a href="#when-a" title="when a script completes
      loading">the next set of steps</a> when the script is ready.

     </dd><dt>Otherwise

     </dt><dd>The user agent must immediately <a href="#executing0" title="executing a script block">execute the script</a>, even if other
      scripts are already executing.
    </dd></dl>
  </li></ol>

  <p><dfn id="when-a" title="when a script completes loading">When a script
   completes loading</dfn>: If a script whose element was added to one of the
   lists mentioned above completes loading while the document is still being
   parsed, then the parser handles it. Otherwise, when a script completes
   loading, the UA must run the following steps as soon as as any other
   scripts that may be executing have finished executing:

  </p><dl class="switch">
   <dt>If the script's element was added to the <dfn id="list-of">list of
    scripts that will execute when the document has finished parsing</dfn>:

   </dt><dd>
    <ol>
     <li>
      <p>If the script's element is not the first element in the list, then
       do nothing yet. Stop going through these steps.</p>

     </li><li>
      <p>Otherwise, <a href="#executing0" title="executing a script
       block">execute the script</a> (that is, the script associated with the
       first element in the list).</p>

     </li><li>
      <p>Remove the script's element from the list (i.e. shift out the first
       entry in the list).</p>

     </li><li>
      <p>If there are any more entries in the list, and if the script
       associated with the element that is now the first in the list is
       already loaded, then jump back to step two to execute it.</p>
    </li></ol>

   </dd><dt>If the script's element was added to the <dfn id="list-of0">list of
    scripts that will execute asynchronously</dfn>:

   </dt><dd>
    <ol>
     <li>
      <p>If the script is not the first element in the list, then do nothing
       yet. Stop going through these steps.</p>

     </li><li>
      <p><a href="#executing0" title="executing a script block">Execute the
       script</a> (the script associated with the first element in the list).</p>

     </li><li>
      <p>Remove the script's element from the list (i.e. shift out the first
       entry in the list).</p>

     </li><li>
      <p>If there are any more scripts in the list, and the element now at
       the head of the list had no <code title="attr-script-src"><a href="#src9">src</a></code> attribute when it was added to the list,
       or had one, but its associated script has finished loading, then jump
       back to step two to execute the script associated with this element.</p>
    </li></ol>

   </dd><dt>If the script's element was added to the <dfn id="list-of1">list of
    scripts that will execute as soon as possible</dfn>:

   </dt><dd>
    <ol>
     <li>
      <p><a href="#executing0" title="executing a script block">Execute the
       script</a>.</p>

     </li><li>
      <p>Remove the script's element from the list.</p>
    </li></ol>

   </dd><dt>If the script is <dfn id="the-script">the script that will execute as
    soon as the parser resumes</dfn>:

   </dt><dd>
    <p>The script will be handled <a href="section-tree-construction.html#scriptTagParserResumes">when the
     parser resumes</a> (amazingly enough).</p>
  </dd></dl>

  <p>The download of an external script must <a href="section-tree-construction.html#delays">delay the
   <code title="event-load">load</code> event</a>.

  </p><p><dfn id="executing0" title="executing a script block">Executing a script
   block</dfn>: If the load resulted in an error (for example a DNS error, or
   an HTTP 404 error), then executing the script must just consist of <a href="section-scripting.html#firing5" title="fire an error event">firing an <code title="event-error">error</code> event</a> at the element.

  </p><p>If the load was successful, then first the user agent must <a href="section-scripting.html#firing4">fire a <code title="event-load">load</code> event</a> at the
   element, and then, if <a href="section-scripting.html#scripting2">scripting is enabled</a>, and
   the <code>Document</code> does not have <code title="dom-document-designMode"><a href="section-contenteditable.html#designMode">designMode</a></code>
   enabled, and the <code>Document</code> is the <a href="section-windows.html#active">active
   document</a> in its <a href="section-windows.html#browsing0">browsing context</a>, the user
   agent must execute the script:

  </p><p>If the script is from an external file, then that file must be used as
   the file to execute.

  </p><p>If the script is inline, then, for scripting languages that consist of
   pure text, user agents must use the value of the DOM <code title="dom-script-text"><a href="#text0">text</a></code> attribute (defined
   below) as the script to execute, and for XML-based scripting languages,
   user agents must use all the child nodes of the <code><a href="#script0">script</a></code> element as the script to execute.

  </p><p>In any case, the user agent must execute the script according to the
   semantics defined by the language associated with <var><a href="#the-scripts">the script's type</a></var> (see the <a href="#scriptingLanguages">scripting languages</a> section below).

  </p><p>Scripts must be executed in the scope of the <a href="section-windows.html#browsing0">browsing context</a> of the element's
   <code>Document</code>.

  </p><p class="note">The element's attributes' values might have changed between
   when the element was inserted into the document and when the script has
   finished loading, as may its other attributes; similarly, the element
   itself might have been taken back out of the DOM, or had other changes
   made. These changes do not in any way affect the above steps; only the
   values of the attributes at the time the <code><a href="#script0">script</a></code> element is first inserted into the
   document matter.

  </p><p>The DOM attributes <dfn id="src10" title="dom-script-src"><code>src</code></dfn>, <dfn id="type12" title="dom-script-type"><code>type</code></dfn>, <dfn id="async0" title="dom-script-async"><code>async</code></dfn>, and <dfn id="defer0" title="dom-script-defer"><code>defer</code></dfn>, each must <a href="section-elements.html#reflect">reflect</a> the respective content attributes of the same
   name.

  </p><p>The DOM attribute <dfn id="text0" title="dom-script-text"><code>text</code></dfn> must return a concatenation
   of the contents of all the <a href="section-terminology.html#text-node" title="text node">text
   nodes</a> that are direct children of the <code><a href="#script0">script</a></code> element (ignoring any other nodes such
   as comments or elements), in tree order. On setting, it must act the same
   way as the <code><a href="section-conformance.html#textcontent">textContent</a></code> DOM
   attribute.

  </p><h5 id="scriptingLanguages"><span class="secno">3.17.1.1. </span>Scripting
   languages</h5>

  <p>A user agent is said to <dfn id="support">support the scripting
   language</dfn> if <var><a href="#the-scripts">the script's type</a></var>
   matches the MIME type of a scripting language that the user agent
   implements.

  </p><p>The following lists some MIME types and the languages to which they
   refer:

  </p><dl>
   <dt><code>text/javascript</code>

   </dt><dd>ECMAScript. <a href="#refsECMA262">[ECMA262]</a>

   </dd><dt><code>text/javascript;e4x=1</code>

   </dt><dd>ECMAScript with ECMAScript for XML. <a href="#refsECMA357">[ECMA357]</a>
  </dd></dl>

  <p>User agents may support other MIME types and other languages.

  </p><p>When examining types to determine if they support the language, user
   agents must not ignore unknown MIME parameters — types with unknown
   parameters must be assumed to be unsupported.</p>
  <!--
   XXX we should reference #refsRFC4329 http://www.ietf.org/rfc/rfc4329
  -->

  <h4 id="the-noscript"><span class="secno">3.17.2. </span>The <dfn id="noscript"><code>noscript</code></dfn> element</h4>

  <p>When <a href="section-scripting.html#scripting1">scripting is disabled</a>: <a href="section-document.html#metadata" title="metadata elements">metadata element</a>, <a href="section-documents0.html#transparent0">transparent</a> <a href="section-documents0.html#block-level0" title="block-level elements">block-level element</a>, and <a href="section-documents0.html#transparent0">transparent</a> <a href="section-documents0.html#strictly">strictly
   inline-level content</a>.

  </p><p>When <a href="section-scripting.html#scripting2">scripting is enabled</a>: <a href="section-document.html#metadata" title="metadata elements">metadata element</a>, <a href="section-documents0.html#block-level0" title="block-level elements">block-level element</a>, and <a href="section-documents0.html#strictly">strictly inline-level content</a>.

  </p><dl class="element">
   <dt>Contexts in which this element may be used:

   </dt><dd>In a <code><a href="section-document.html#head">head</a></code> element of an <a href="section-documents.html#html-" title="&gt;HTML documents">HTML document</a>, if there are no
    ancestor <code><a href="#noscript">noscript</a></code> elements.

   </dd><dd>Where <a href="section-documents0.html#block-level0">block-level elements</a> are expected in
    <a href="section-documents.html#html-">HTML documents</a>, if there are no ancestor <code><a href="#noscript">noscript</a></code> elements.

   </dd><dd>Where <a href="section-documents0.html#inline-level0">inline-level content</a> is expected in
    <a href="section-documents.html#html-">HTML documents</a>, if there are no ancestor <code><a href="#noscript">noscript</a></code> elements.

   </dd><dt>Content model:

   </dt><dd>When <a href="section-scripting.html#scripting1">scripting is disabled</a>, in a <code><a href="section-document.html#head">head</a></code> element: in any order, zero or more <code><a href="section-document.html#link">link</a></code> elements, zero or more <code><a href="section-document.html#style">style</a></code> elements, and zero or more <code><a href="section-document.html#meta0">meta</a></code> elements.

   </dd><dd>When <a href="section-scripting.html#scripting1">scripting is disabled</a>, not in a
    <code><a href="section-document.html#head">head</a></code> element: <a href="section-documents0.html#transparent0">transparent</a>, but there must be no <code><a href="#noscript">noscript</a></code> element descendants.

   </dd><dd>When <a href="section-scripting.html#scripting2">scripting is enabled</a>: text that
    conforms to the requirements given in the prose.

   </dd><dt>Element-specific attributes:

   </dt><dd>None.

   </dd><dt>DOM interface:

   </dt><dd>No difference from <code><a href="section-elements.html#htmlelement">HTMLElement</a></code>.
  </dd></dl>

  <p>The <code><a href="#noscript">noscript</a></code> element does not
   represent anything. It is used to present different markup to user agents
   that support scripting and those that don't support scripting, by
   affecting how the document is parsed.

  </p><p>The <code><a href="#noscript">noscript</a></code> element must not be
   used in <a href="section-documents.html#xml-documents">XML documents</a>.

  </p><p>When used in <a href="section-documents.html#html-">HTML documents</a>, the allowed content
   model depends on whether scripting is enabled or not, and whether the
   element is in a <code><a href="section-document.html#head">head</a></code> element or not.

  </p><p>In a <code><a href="section-document.html#head">head</a></code> element, if <a href="section-scripting.html#scripting1">scripting is disabled</a>, then the content model of a
   <code><a href="#noscript">noscript</a></code> element must contain only
   <code><a href="section-document.html#link">link</a></code>, <code><a href="section-document.html#style">style</a></code>, and <code><a href="section-document.html#meta0">meta</a></code>
   elements. If <a href="section-scripting.html#scripting2">scripting is enabled</a>, then the
   content model of a <code><a href="#noscript">noscript</a></code> element
   is text, except that invoking the <span>HTML fragment parsing algorithm
   with the <code><a href="#noscript">noscript</a></code> element as the <var title="">context</var> and the text contents as the <var title="">input</var> must result in a list of nodes that consists only of
   <code><a href="section-document.html#link">link</a></code>, <code><a href="section-document.html#style">style</a></code>, and <code><a href="section-document.html#meta0">meta</a></code>
   elements.</span>

  </p><p>Outside of <code><a href="section-document.html#head">head</a></code> elements, if <a href="section-scripting.html#scripting1">scripting is disabled</a>, then the content model of a
   <code><a href="#noscript">noscript</a></code> element is <a href="section-documents0.html#transparent0">transparent</a>, with the additional restriction that
   a <code><a href="#noscript">noscript</a></code> element must not have a
   <code><a href="#noscript">noscript</a></code> element as an ancestor (that
   is, <code><a href="#noscript">noscript</a></code> can't be nested).

  </p><p>Outside of <code><a href="section-document.html#head">head</a></code> elements, if <a href="section-scripting.html#scripting2">scripting is enabled</a>, then the content model of a
   <code><a href="#noscript">noscript</a></code> element is text, except that
   the text must be such that running the following algorithm results in a
   conforming document with no <code><a href="#noscript">noscript</a></code>
   elements and no <code><a href="#script0">script</a></code> elements, and
   such that no step in the algorithm causes an <a href="section-parsing.html#html-0">HTML
   parser</a> to flag a <a href="section-parsing.html#parse0">parse error</a>:

  </p><ol>
   <li>Remove every <code><a href="#script0">script</a></code> element from
    the document.

   </li><li>Make a list of every <code><a href="#noscript">noscript</a></code>
    element in the document. For every <code><a href="#noscript">noscript</a></code> element in that list, perform the
    following steps:
    <ol>
     <li>Let the <var title="">parent element</var> be the parent element of
      the <code><a href="#noscript">noscript</a></code> element.

     </li><li>Take all the children of the <var title="">parent element</var> that
      come before the <code><a href="#noscript">noscript</a></code> element,
      and call these elements <var title="">the before children</var>.

     </li><li>Take all the children of the <var title="">parent element</var> that
      come <em>after</em> the <code><a href="#noscript">noscript</a></code>
      element, and call these elements <var title="">the after
      children</var>.

     </li><li>Let <var title="">s</var> be the concatenation of all the <a href="section-terminology.html#text-node">text node</a> children of the <code><a href="#noscript">noscript</a></code> element.

     </li><li>Set the <code title="dom-innerHTML-HTML"><a href="section-dynamic.html#innerhtml0">innerHTML</a></code> attribute of the <var title="">parent element</var> to the value of <var title="">s</var>.
      (This, as a side-effect, causes the <code><a href="#noscript">noscript</a></code> element to be removed from the
      document.)

     </li><li>Insert <var title="">the before children</var> at the start of the
      <var title="">parent element</var>, preserving their original relative
      order.

     </li><li>Insert <var title="">the after children</var> at the end of the <var title="">parent element</var>, preserving their original relative
      order.
    </li></ol>
  </li></ol>

  <p>The <code><a href="#noscript">noscript</a></code> element has no other
   requirements. In particular, children of the <code><a href="#noscript">noscript</a></code> element are not exempt from form
   submission, scripting, and so forth, even when scripting is enabled.

  </p><p class="note">All these contortions are required because, for historical
   reasons, the <code><a href="#noscript">noscript</a></code> element causes
   the <a href="section-parsing.html#html-0">HTML parser</a> to act differently based on whether
   scripting is enabled or not. The element is not allowed in XML, because in
   XML the parser is not affected by such state, and thus the element would
   not have the desired effect.

  </p><h4 id="the-event-source"><span class="secno">3.17.3. </span>The <dfn id="event-source"><code>event-source</code></dfn> element</h4>

  <p><a href="section-documents0.html#block-level0" title="block-level elements">Block-level
   element</a>, <a href="section-documents0.html#strictly">strictly inline-level content</a>, and <a href="section-document.html#metadata" title="metadata elements">metadata element</a>.

  </p><dl class="element">
   <dt>Contexts in which this element may be used:

   </dt><dd>Where <a href="section-document.html#metadata">metadata elements</a> are expected.

   </dd><dd>Where <a href="section-documents0.html#block-level0">block-level elements</a> are expected.

   </dd><dd>Where <a href="section-documents0.html#inline-level0">inline-level content</a> is expected.

   </dd><dt>Content model:

   </dt><dd>Empty.

   </dd><dt>Element-specific attributes:

   </dt><dd><code title="attr-event-source-src"><a href="#src11">src</a></code>

   </dd><dt>DOM interface:

   </dt><dd>
    <pre class="idl">interface <dfn id="htmleventsourceelement">HTMLEventSourceElement</dfn> : <a href="section-elements.html#htmlelement">HTMLElement</a> {
           attribute DOMString <a href="#src12" title="dom-event-source-src">src</a>;
};</pre>
  </dd></dl>

  <p>The <code><a href="#event-source">event-source</a></code> element
   represents a target for events generated by a remote server.

  </p><p>The <dfn id="src11" title="attr-event-source-src"><code>src</code></dfn>
   attribute, if specified, must give a URI (or IRI) pointing to a resource
   that uses the <code>application/x-dom-event-stream</code> format.

  </p><p>When the element is inserted into the document, if it has the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute
   specified, the user agent must act as if the <code title="dom-remoteEventTarget-addEventSource"><a href="section-server-sent-events.html#addeventsource">addEventSource()</a></code> method on the <code><a href="#event-source">event-source</a></code> element had been invoked with
   the URI resulting from resolving the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute's value to an absolute URI.

  </p><p>While the element is in a document, if its <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute is
   mutated, the user agent must act as if first the <code title="dom-remoteEventTarget-removeEventSource"><a href="section-server-sent-events.html#removeeventsource">removeEventSource()</a></code> method on the
   <code><a href="#event-source">event-source</a></code> element had been
   invoked with the URI resulting from resolving the old value of the
   attribute to an absolute URI, and then as if the <code title="dom-remoteEventTarget-addEventSource"><a href="section-server-sent-events.html#addeventsource">addEventSource()</a></code> method on the element
   had been invoked with the URI resulting from resolving the <em>new</em>
   value of the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute to an absolute URI.

  </p><p>When the element is removed from the document, if it has the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute
   specified, or, when the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute is about to be removed, the user
   agent must act as if the <code title="dom-remoteEventTarget-removeEventSource"><a href="section-server-sent-events.html#removeeventsource">removeEventSource()</a></code> method on the
   <code><a href="#event-source">event-source</a></code> element had been
   invoked with the URI resulting from resolving the <code title="attr-event-source-src"><a href="#src11">src</a></code> attribute's
   value to an absolute URI.

  </p><p>There can be more than one <code><a href="#event-source">event-source</a></code> element per document, but
   authors should take care to avoid opening multiple connections to the same
   server as HTTP recommends a limit to the number of simultaneous
   connections that a user agent can open per server.</p>
  <!-- XXX should we make 'load', 'error', 'abort' events fire on this
  element? -->

  <p>The <dfn id="src12" title="dom-event-source-src"><code>src</code></dfn> DOM
   attribute must reflect the content attribute of the same name.

  </p><script src="http://status.whatwg.org/annotate-web-apps.js" type="text/javascript"></script></body></html>
