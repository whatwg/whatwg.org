<!DOCTYPE HTML>


<html lang="en-GB-hixie">
 <head>
  <title>HTML 5</title>
  <link href="/style/specification" type="text/css" rel="stylesheet">
  <link href="/images/icon" rel="icon">

  <style type="text/css">
   h4 + .element { margin-top: -2.5em; padding-top: 2em; }
   h4 + p + .element { margin-top: -5em; padding-top: 4em; }
   .element { background: #EEFFEE; color: black; margin: 0 0 1em -1em; padding: 0 1em 0.25em 0.75em; border-left: solid #99FF99 0.25em; -padding: 0; /* that last decl is for IE6. Try removing it, it's hilarious! */ }
   .proposal { border: blue solid; padding: 1em; }
   table.matrix, table.matrix td { border: none; text-align: right; }
   table.matrix { margin-left: 2em; }
  </style>

 <link href="section-windows.html#nav-bar" rel="prev" title="4.1. Browsing contexts"><link href="index.html#contents" rel="index" title="Table of contents"><link href="section-scripting.html#nav-bar" rel="next" title="4.3. Scripting"></head><body class="cfc">
  <style scoped>
   * { color: gray ! important; background: none ! important; border-color: silver ! important; }
   img, object, iframe { filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); -webkit-filter: grayscale(100%); }
   .obsolete { border: double thick red ! important; background: yellow ! important; margin: 4em auto 0 auto; max-width: 50em; width: 70%; text-align: center; position: fixed;  z-index: 10000; top: 0; left: 0; right: 0; }
   .obsolete a { color: blue ! important; }
   .obsolete p { font: 900 2em sans-serif; color: red ! important; margin: 1em 1.5em ! important; }
  </style>
  <div class=obsolete>
   <p>This is a snapshot of an early working draft and has therefore
   been superseded by the <a href="http://whatwg.org/html">HTML
   standard</a>.</p>
   <p>This document will not be further updated.</p>
  </div>
<div class="head">
   <p><a href="http://www.whatwg.org/" class="logo" rel="home"><img src="/images/logo" alt="WHATWG"></a></p>

   <h1 id="html-5">HTML 5</h1>

   <h2 id="working" class="no-num no-toc">Call For Comments — 27 October 2007</h2></div><nav id="nav-bar"><a href="section-windows.html#nav-bar">&lt; 4.1. Browsing contexts</a> – <a href="index.html#contents">Table of contents</a> – <a href="section-scripting.html#nav-bar">4.3. Scripting &gt;</a></nav><h3 id="the-default0"><span class="secno">4.2. </span>The default view</h3>

  <p>The <code>AbstractView</code> object of <a href="section-windows.html#default3" title="default view">default views</a> must also implement the <code><a href="#window">Window</a></code> object.

  </p><pre class="idl">interface <dfn id="window">Window</dfn> {
  // the current browsing context
  readonly attribute <a href="#window">Window</a> <a href="#window0" title="dom-window">window</a>;
  readonly attribute <a href="#window">Window</a> <a href="#self" title="dom-self">self</a>;
           attribute DOMString <a href="#name3" title="dom-name">name</a>;
  readonly attribute <a href="section-history.html#location2">Location</a> <a href="section-history.html#location0" title="dom-document-location">location</a>;
  readonly attribute <a href="section-history.html#history1">History</a> <a href="section-history.html#history0" title="dom-history">history</a>;
  readonly attribute <a href="section-undo.html#undomanager">UndoManager</a> <a href="section-undo.html#undomanager0" title="dom-undoManager">undoManager</a>;
  <a href="section-selection.html#selection1">Selection</a> <a href="section-selection.html#getselection" title="dom-getSelection">getSelection</a>();

  // the user agent
  readonly attribute <a href="section-browser.html#clientinformation">ClientInformation</a> <a href="section-browser.html#navigator" title="dom-navigator">navigator</a>; <!-- XXX IE6 also has window.clientInformation pointing to this same object -->
  readonly attribute <a href="section-storage.html#storage2">Storage</a> <a href="section-storage.html#sessionstorage" title="dom-sessionStorage">sessionStorage</a>;
  readonly attribute <a href="section-storage.html#storagelist">StorageList</a> <a href="section-storage.html#globalstorage" title="dom-globalStorage">globalStorage</a>;
  <a href="section-sql.html#database0">Database</a> <a href="section-sql.html#opendatabase" title="dom-opendatabase">openDatabase</a>(in DOMString name, in DOMString version, in DOMString displayName, in unsigned long estimatedSize);

  // modal user prompts
  void <a href="section-user-prompts.html#alert" title="dom-alert">alert</a>(in DOMString message);
  boolean <a href="section-user-prompts.html#confirm" title="dom-confirm">confirm</a>(in DOMString message);
  DOMString <a href="section-user-prompts.html#prompt" title="dom-prompt">prompt</a>(in DOMString message);
  DOMString <a href="section-user-prompts.html#prompt" title="dom-prompt">prompt</a>(in DOMString message, in DOMString default);
  void <a href="section-user-prompts.html#print" title="dom-print">print</a>();

  // other browsing contexts
  readonly attribute <a href="#window">Window</a> <a href="#frames" title="dom-frames">frames</a>;
  readonly attribute unsigned long <a href="#length5" title="dom-length">length</a>;
  readonly attribute <a href="#window">Window</a> <a href="section-windows.html#opener0" title="dom-opener">opener</a>;
  <a href="#window">Window</a> <a href="#open2" title="dom-open">open</a>();
  <a href="#window">Window</a> <a href="#open2" title="dom-open">open</a>(in DOMString url);
  <a href="#window">Window</a> <a href="#open2" title="dom-open">open</a>(in DOMString url, in DOMString target);
  <a href="#window">Window</a> <a href="#open2" title="dom-open">open</a>(in DOMString url, in DOMString target, in DOMString features);
  <a href="#window">Window</a> <a href="#open2" title="dom-open">open</a>(in DOMString url, in DOMString target, in DOMString features, in DOMString replace);

  // <a href="section-crossDocumentMessages.html#cross-document">cross-document messaging</a>
  void <a href="section-crossDocumentMessages.html#postmessage" title="dom-window-postMessage">postMessage</a>(in DOMString message);

  // <a href="section-scripting.html#event3">event handler DOM attributes</a>
           attribute <span>EventListener</span> <a href="section-scripting.html#onabort" title="handler-onabort">onabort</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onbeforeunload" title="handler-onbeforeunload">onbeforeunload</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onblur" title="handler-onblur">onblur</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onchange" title="handler-onchange">onchange</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onclick" title="handler-onclick">onclick</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#oncontextmenu" title="handler-oncontextmenu">oncontextmenu</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondblclick" title="handler-ondblclick">ondblclick</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondrag" title="handler-ondrag">ondrag</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondragend" title="handler-ondragend">ondragend</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondragenter" title="handler-ondragenter">ondragenter</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondragleave" title="handler-ondragleave">ondragleave</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondragover" title="handler-ondragover">ondragover</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondragstart" title="handler-ondragstart">ondragstart</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#ondrop" title="handler-ondrop">ondrop</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onerror" title="handler-onerror">onerror</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onfocus" title="handler-onfocus">onfocus</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onkeydown" title="handler-onkeydown">onkeydown</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onkeypress" title="handler-onkeypress">onkeypress</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onkeyup" title="handler-onkeyup">onkeyup</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onload" title="handler-onload">onload</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmessage" title="handler-onmessage">onmessage</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmousedown" title="handler-onmousedown">onmousedown</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmousemove" title="handler-onmousemove">onmousemove</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmouseout" title="handler-onmouseout">onmouseout</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmouseover" title="handler-onmouseover">onmouseover</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmouseup" title="handler-onmouseup">onmouseup</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onmousewheel" title="handler-onmousewheel">onmousewheel</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onresize" title="handler-onresize">onresize</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onscroll" title="handler-onscroll">onscroll</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onselect" title="handler-onselect">onselect</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onsubmit" title="handler-onsubmit">onsubmit</a>;
           attribute <span>EventListener</span> <a href="section-scripting.html#onunload" title="handler-onunload">onunload</a>;
};</pre>
  <!-- XXX XMLHttpRequest
          http://msdn.microsoft.com/workshop/author/dhtml/reference/objects/obj_window.asp
          http://www.mozilla.org/docs/dom/domref/dom_window_ref.html
          http://lxr.mozilla.org/mozilla/source/dom/public/idl/base/nsIDOMWindow.idl
   -->

  <p>The <dfn id="window0" title="dom-window"><code>window</code></dfn>, <dfn id="frames" title="dom-frames"><code>frames</code></dfn>, and <dfn id="self" title="dom-self"><code>self</code></dfn> DOM attributes must all return the
   <code><a href="#window">Window</a></code> object itself.

  </p><p>The <code><a href="#window">Window</a></code> object also provides the
   scope for script execution. Each <code>Document</code> in a <a href="section-windows.html#browsing0">browsing context</a> has an associated <dfn id="list-of2">list of added properties</dfn> which, when a document is <a href="section-windows.html#active" title="active document">active</a>, are available on the
   <code>Document</code>'s <a href="section-windows.html#default3">default view</a> <code><a href="#window">Window</a></code> object. A <code>Document</code> object's
   <a href="#list-of2">list of added properties</a> must be empty when the
   <code>Document</code> object is created.

  </p><p>Objects implementing the <code><a href="#window">Window</a></code>
   interface must also implement the <code>EventTarget</code> interface.

  </p><p class="note"><code><a href="#window">Window</a></code> objects also <a href="#get" title="dom-item">have an implicit [[Get]] method</a> which
   returns <span>nested browsing contexts</span>.

  </p><h4 id="security1"><span class="secno">4.2.1. </span>Security</h4>

  <p>User agents must raise a <a href="section-scripting.html#security8">security exception</a>
   whenever any of the members of a <code><a href="#window">Window</a></code>
   object are accessed by scripts whose <a href="section-scripting.html#origin0">origin</a> is not
   the same as the <code><a href="#window">Window</a></code> object's <a href="section-windows.html#browsing0">browsing context</a>'s <a href="section-windows.html#active">active
   document</a>'s origin, with the following exceptions:

  </p><ul>
   <li>The <code title="dom-location"><a href="section-history.html#location1">location</a></code>
    object

   </li><li>The <code title="dom-window-postMessage"><a href="section-crossDocumentMessages.html#postmessage">postMessage()</a></code> method
  </li></ul>

  <p>User agents must not allow scripts to override the <code title="dom-location"><a href="section-history.html#location1">location</a></code> object's
   setter.

  </p><h4 id="constructors"><span class="secno">4.2.2. </span>Constructors</h4>

  <p>All <code><a href="#window">Window</a></code> objects must provide the
   following constructors:

  </p><dl>
   <dt><dfn id="audio2" title="dom-audio"><code>Audio()</code></dfn>

   </dt><dt><dfn id="audio3" title="dom-audio-s"><code>Audio(<var title="">src</var>)</code></dfn>

   </dt><dd>
    <p>When invoked as constructors, these must return a new <code><a href="section-video.html#htmlaudioelement">HTMLAudioElement</a></code> object (a new
     <code><a href="section-video.html#audio1">audio</a></code> element). If the <var title="src">src</var> argument is present, the object created must have
     its <code title="dom-media-src"><a href="section-video.html#src6">src</a></code> content
     attribute set to the provided value, and the user agent must invoke the
     <code title="dom-media-load"><a href="section-video.html#load">load()</a></code> method on
     the object before returning.

   </p></dd><dt><dfn id="image0" title="dom-image"><code>Image()</code></dfn>

   </dt><dt><dfn id="imagein" title="dom-image-w"><code>Image(in unsigned long <var title="">w</var>)</code></dfn>

   </dt><dt><dfn id="imagein0" title="dom-image-wh"><code>Image(in unsigned long <var title="">w</var>, in unsigned long <var title="">h</var>)</code></dfn>

   </dt><dd>
    <p>When invoked as corstructors, these must return a new <code><a href="section-embedded.html#htmlimageelement">HTMLImageElement</a></code> object (a new
     <code><a href="section-embedded.html#img">img</a></code> element). If the <var title="">h</var> argument is present, the new object's <code title="attr-img-height">height</code> content attribute must be set to
     <var title="">h</var>. If the <var title="">w</var> argument is present,
     the new object's <code title="attr-img-width">width</code> content
     attribute must be set to <var title="">w</var>.

   </p></dd><dt><dfn id="option" title="dom-option"><code>Option()</code></dfn>

   </dt><dt><dfn id="optionin" title="dom-option-n"><code>Option(in DOMString <var title="">name</var>)</code></dfn>

   </dt><dt><dfn id="optionin0" title="dom-option-nv"><code>Option(in DOMString <var title="">name</var>, in DOMString <var title="">value</var>)</code></dfn>

   </dt><dd>
    <p>When invoked as constructors, these must return a new
     <code>HTMLOptionElement</code> object (a new <code>option</code>
     element). <span class="big-issue">need to define argument
     processing</span>
  </p></dd></dl>

  <p class="big-issue">And when constructors are invoked but without using the
   constructor syntax...?

  </p><h4 id="apis-for"><span class="secno">4.2.3. </span>APIs for creating and
   navigating browsing contexts by name</h4>

  <p>The <dfn id="open2" title="dom-open"><code>open()</code></dfn> method on
   <code><a href="#window">Window</a></code> objects provides a mechanism for
   <a href="section-navigating.html#navigate" title="navigate">navigating</a> an existing <a href="section-windows.html#browsing0">browsing context</a> or opening and navigating an <a href="section-windows.html#auxiliary0">auxiliary browsing context</a>.

  </p><p>The method has four arguments, though they are all optional.

  </p><p>The first argument, <var title="">url</var>, gives a URI (or IRI) for a
   page to load in the browsing context. If no arguments are provided, then
   the <var title="">url</var> argument defaults to
   &quot;<code>about:blank</code><!-- XXX xref -->&quot;. The argument must be resolved
   to an absolute URI by <span class="big-issue">...</span>

  </p><p>The second argument, <var title="">target</var>, specifies the <a href="section-windows.html#browsing1" title="browsing context name">name</a> of the browsing
   context that is to be navigated. It must be a <a href="section-windows.html#valid8">valid
   browsing context name</a>. If fewer than two arguments are provided, then
   the <var title="">name</var> argument defaults to the value
   &quot;<code>_blank</code>&quot;.

  </p><p>The third argument, <var title="">features</var>, has no effect and is
   supported for historical reasons only.

  </p><p>The fourth argument, <var title="">replace</var>, specifies whether or
   not the new page will <a href="section-navigating.html#replacement" title="replacement
   enabled">replace</a> the page currently loaded in the browsing context,
   when <var title="">target</var> identifies an existing browsing context
   (as opposed to leaving the current page in the browsing context's <a href="section-history.html#session">session history</a>). When three or fewer arguments are
   provided, <var title="">replace</var> defaults to false.

  </p><p>When the method is invoked, the user agent must first select a <a href="section-windows.html#browsing0">browsing context</a> to navigate by applying <a href="section-windows.html#the-rules">the rules for chosing a browsing context given a
   browsing context name</a> using the <var title="">target</var> argument as
   the name and the <a href="section-windows.html#browsing0">browsing context</a> of the script
   as the context in which the algorithm is executed, unless the user has
   indicated a preference, in which case the browsing context to navigate may
   instead be the one indicated by the user.

  </p><p class="example">For example, suppose there is a user agent that supports
   control-clicking a link to open it in a new tab. If a user clicks in that
   user agent on an element whose <code title="handler-onclick"><a href="section-scripting.html#onclick">onclick</a></code> handler uses the <code title="dom-open"><a href="#open2">window.open()</a></code> API to open a
   page in an iframe, but, while doing so, holds the control key down, the
   user agent could override the selection of the target browsing context to
   instead target a new tab.

  </p><p>Then, the user agent must <a href="section-navigating.html#navigate">navigate</a> the selected
   <a href="section-windows.html#browsing0">browsing context</a> to the URI given in <var title="">url</var>. If the <var title="">replace</var> is true, then <a href="section-navigating.html#replacement" title="replacement enabled">replacement must be
   enabled</a>; otherwise, it must not be enabled unless the <a href="section-windows.html#browsing0">browsing context</a> was just created as part of the <a href="section-windows.html#the-rules">the rules for chosing a browsing context given a
   browsing context name</a>.

  </p><p>The method must return the <code><a href="#window">Window</a></code>
   object of the default view of the <a href="section-windows.html#browsing0">browsing
   context</a> that was navigated, or null if no browsing context was
   navigated.

  </p><p>The <dfn id="name3" title="dom-name"><code>name</code></dfn> attribute of
   the <code><a href="#window">Window</a></code> object must, on getting,
   return the current name of the <a href="section-windows.html#browsing0">browsing context</a>,
   and, on setting, set the name of the <a href="section-windows.html#browsing0">browsing
   context</a> to the new value.

  </p><p class="note">The name <a href="section-history.html#resetBCName">gets reset</a> when the
   browsing context is navigated to another domain.

  </p><h4 id="accessing"><span class="secno">4.2.4. </span>Accessing other browsing
   contexts</h4>

  <p>In ECMAScript implementations, objects that implement the <code><a href="#window">Window</a></code> interface must have a <dfn id="get" title="dom-item">[[Get]]</dfn> method that, when invoked with a property
   name that is a number <var title="">i</var>, returns the <var title="">i</var>th <a href="section-windows.html#child">child browsing context</a> of the <a href="section-windows.html#active" title="active document">active</a> <code>Document</code>,
   sorted in document order of the elements nesting those browsing contexts.

  </p><p>The <dfn id="length5" title="dom-length"><code>length</code></dfn> DOM
   attribute on the <code><a href="#window">Window</a></code> interface must
   return the number of <a href="section-windows.html#child" title="child browsing context">child
   browsing contexts</a> of the <a href="section-windows.html#active" title="active
   document">active</a> <code>Document</code>.

  </p><script src="http://status.whatwg.org/annotate-web-apps.js" type="text/javascript"></script></body></html>
